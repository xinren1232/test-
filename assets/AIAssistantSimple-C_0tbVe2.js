import{c as a,o as d,a as s,t as o,e as v,b as u,F as p,r as m,M as h,Z as k,_ as y,ai as I,n as g}from"./element-plus-DR-erZ3X.js";import{a as A}from"./index-Bo1zM2q5.js";import"./echarts-Dfqt_Pbx.js";const f={name:"AIAssistantSimple",data(){return{aiEnabled:!0,loading:!1,userInput:"",messages:[{type:"ai",content:"æ‚¨å¥½ï¼æˆ‘æ˜¯IQE AIæ™ºèƒ½åŠ©æ‰‹ã€‚æˆ‘å·²æŽ¥å…¥DeepSeekå¤§è¯­è¨€æ¨¡åž‹ï¼Œå¯ä»¥ä¸ºæ‚¨æä¾›ä¸“ä¸šçš„è´¨é‡ç®¡ç†é—®ç­”æœåŠ¡ã€‚",timestamp:new Date}],thinkingSteps:[]}},methods:{goBack(){this.$router.push("/")},toggleAI(){this.aiEnabled=!this.aiEnabled,this.$message.info(`å·²åˆ‡æ¢åˆ°${this.aiEnabled?"AIå¢žå¼ºæ¨¡å¼":"åŸºç¡€æ¨¡å¼"}`)},clearChat(){this.messages=[{type:"ai",content:"å¯¹è¯å·²æ¸…ç©ºã€‚æ‚¨å¥½ï¼æˆ‘æ˜¯IQE AIæ™ºèƒ½åŠ©æ‰‹ï¼Œå·²æŽ¥å…¥DeepSeekå¤§è¯­è¨€æ¨¡åž‹ã€‚",timestamp:new Date}],this.thinkingSteps=[]},selectTool(i){this.userInput=`è¯·ä½¿ç”¨${i}å·¥å…·å¸®æˆ‘åˆ†æžæ•°æ®`,this.$message.success(`å·²é€‰æ‹©å·¥å…·ï¼š${i}`)},askQuick(i){this.userInput=i,this.sendMessage()},async sendMessage(){if(!this.userInput.trim()||this.loading)return;const i={type:"user",content:this.userInput,timestamp:new Date};this.messages.push(i);const t=this.userInput;this.userInput="",this.scrollToBottom();try{await this.processAI(t)}catch(r){console.error("AIå¤„ç†é”™è¯¯:",r),this.messages.push({type:"ai",content:"æŠ±æ­‰ï¼Œå¤„ç†æ‚¨çš„é—®é¢˜æ—¶å‡ºçŽ°äº†é”™è¯¯ã€‚è¯·ç¨åŽé‡è¯•ã€‚",timestamp:new Date})}this.scrollToBottom()},async processAI(i){this.loading=!0,this.thinkingSteps=[];try{this.thinkingSteps.push({type:"thinking",title:"ç†è§£é—®é¢˜",status:"processing"}),await this.delay(500),this.thinkingSteps[0].status="completed",this.thinkingSteps.push({type:"data_query",title:"èŽ·å–ä¸šåŠ¡æ•°æ®",status:"processing"}),await this.delay(400),this.thinkingSteps[1].status="completed",this.thinkingSteps.push({type:"ai_call",title:"è°ƒç”¨AIå¤§æ¨¡åž‹",status:"processing"});let t;if(this.aiEnabled)try{t=await this.callAI(i)}catch{t=`æŠ±æ­‰ï¼ŒAIæœåŠ¡æš‚æ—¶ä¸å¯ç”¨ã€‚åŸºäºŽæ‚¨çš„é—®é¢˜"${i}"ï¼Œæˆ‘ä¸ºæ‚¨æä¾›åŸºç¡€åˆ†æž...`}else t=`åŸºç¡€æ¨¡å¼å›žå¤ï¼šæˆ‘æ”¶åˆ°äº†æ‚¨çš„é—®é¢˜"${i}"ã€‚è¿™æ˜¯ä¸€ä¸ªå…³äºŽè´¨é‡ç®¡ç†çš„é—®é¢˜ï¼Œæˆ‘æ­£åœ¨ä¸ºæ‚¨åˆ†æžç›¸å…³æ•°æ®...`;this.thinkingSteps[2].status="completed",this.thinkingSteps.push({type:"response",title:"ç”Ÿæˆå›žç­”",status:"processing"}),await this.delay(200),this.thinkingSteps[3].status="completed",this.messages.push({type:"ai",content:t,timestamp:new Date})}finally{this.loading=!1}},async callAI(i){const t=await fetch("https://api.deepseek.com/chat/completions",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer sk-cab797574abf4288bcfaca253191565d"},body:JSON.stringify({model:"deepseek-chat",messages:[{role:"system",content:"ä½ æ˜¯IQEè´¨é‡ç®¡ç†ç³»ç»Ÿçš„AIæ™ºèƒ½åŠ©æ‰‹ï¼Œä¸“é—¨è´Ÿè´£è´¨é‡ç®¡ç†æ•°æ®åˆ†æžå’Œé—®ç­”ã€‚è¯·åŸºäºŽç”¨æˆ·é—®é¢˜æä¾›ä¸“ä¸šã€å‡†ç¡®ã€æœ‰ç”¨çš„å›žç­”ã€‚"},{role:"user",content:i}],temperature:.7,max_tokens:2e3})});if(!t.ok)throw new Error(`AI APIé”™è¯¯: ${t.status}`);return(await t.json()).choices[0].message.content},delay(i){return new Promise(t=>setTimeout(t,i))},formatTime(i){return new Date(i).toLocaleTimeString()},getStepIcon(i){return{thinking:"ðŸ¤”",data_query:"ðŸ“Š",ai_call:"ðŸ¤–",response:"ðŸ’¬"}[i]||"âš™ï¸"},getStatusText(i){return{processing:"å¤„ç†ä¸­...",completed:"å®Œæˆ"}[i]||i},scrollToBottom(){this.$nextTick(()=>{this.$refs.chatArea&&(this.$refs.chatArea.scrollTop=this.$refs.chatArea.scrollHeight)})}},mounted(){console.log("ðŸ¤– IQE AIæ™ºèƒ½åŠ©æ‰‹å·²åŠ è½½")}},S={id:"ai-assistant-overlay"},b={class:"ai-container"},T={class:"ai-header"},w={class:"ai-controls"},C={class:"ai-body"},x={class:"ai-left"},E={class:"tool-section"},_={class:"tool-group"},B={class:"tool-group"},D={class:"tool-group"},M={class:"ai-center"},Q={class:"panel-title"},V={class:"quick-tags"},N={class:"chat-area",ref:"chatArea"},P={class:"avatar"},j={class:"content"},q={class:"text"},z={class:"time"},F={key:0,class:"message ai"},K={class:"input-area"},L=["disabled"],O=["disabled"],H={class:"ai-right"},J={class:"thinking-area"},U={key:0,class:"empty"},Z={class:"step-header"},G={class:"step-icon"},R={class:"step-title"},W={class:"step-status"};function X(i,t,r,Y,l,n){return d(),a("div",S,[s("div",b,[s("div",T,[t[15]||(t[15]=s("h1",null,"ðŸ¤– IQE AI æ™ºèƒ½åŠ©æ‰‹",-1)),s("div",w,[s("button",{class:"ai-btn primary",onClick:t[0]||(t[0]=(...e)=>n.toggleAI&&n.toggleAI(...e))},o(l.aiEnabled?"AIå¢žå¼ºæ¨¡å¼":"åŸºç¡€æ¨¡å¼"),1),s("button",{class:"ai-btn",onClick:t[1]||(t[1]=(...e)=>n.clearChat&&n.clearChat(...e))},"æ¸…ç©ºå¯¹è¯"),s("button",{class:"ai-btn secondary",onClick:t[2]||(t[2]=(...e)=>n.goBack&&n.goBack(...e))},"è¿”å›žç³»ç»Ÿ")])]),s("div",C,[s("div",x,[t[25]||(t[25]=s("div",{class:"panel-title"},"ðŸ› ï¸ å¯ç”¨å·¥å…·",-1)),s("div",E,[s("div",_,[t[18]||(t[18]=s("h4",null,"ðŸ“Š æ•°æ®åˆ†æžå·¥å…·",-1)),s("div",{class:"tool-item",onClick:t[3]||(t[3]=e=>n.selectTool("æ•°æ®åˆ†æž"))},t[16]||(t[16]=[s("span",null,"ðŸ“Š",-1),s("div",null,[s("div",{class:"tool-name"},"æ•°æ®åˆ†æž"),s("div",{class:"tool-desc"},"åˆ†æžè´¨é‡ç®¡ç†æ•°æ®")],-1)])),s("div",{class:"tool-item",onClick:t[4]||(t[4]=e=>n.selectTool("ç»Ÿè®¡åˆ†æž"))},t[17]||(t[17]=[s("span",null,"ðŸ“ˆ",-1),s("div",null,[s("div",{class:"tool-name"},"ç»Ÿè®¡åˆ†æž"),s("div",{class:"tool-desc"},"æ‰§è¡Œç»Ÿè®¡åˆ†æž")],-1)]))]),s("div",B,[t[21]||(t[21]=s("h4",null,"ðŸ“ˆ å¯è§†åŒ–å·¥å…·",-1)),s("div",{class:"tool-item",onClick:t[5]||(t[5]=e=>n.selectTool("å›¾è¡¨ç”Ÿæˆ"))},t[19]||(t[19]=[s("span",null,"ðŸ“Š",-1),s("div",null,[s("div",{class:"tool-name"},"å›¾è¡¨ç”Ÿæˆ"),s("div",{class:"tool-desc"},"ç”Ÿæˆæ•°æ®å¯è§†åŒ–å›¾è¡¨")],-1)])),s("div",{class:"tool-item",onClick:t[6]||(t[6]=e=>n.selectTool("æŠ¥å‘Šç”Ÿæˆ"))},t[20]||(t[20]=[s("span",null,"ðŸ“„",-1),s("div",null,[s("div",{class:"tool-name"},"æŠ¥å‘Šç”Ÿæˆ"),s("div",{class:"tool-desc"},"ç”Ÿæˆè´¨é‡åˆ†æžæŠ¥å‘Š")],-1)]))]),s("div",D,[t[24]||(t[24]=s("h4",null,"ðŸŽ¯ è´¨é‡ç®¡ç†",-1)),s("div",{class:"tool-item",onClick:t[7]||(t[7]=e=>n.selectTool("åº“å­˜æŸ¥è¯¢"))},t[22]||(t[22]=[s("span",null,"ðŸ“¦",-1),s("div",null,[s("div",{class:"tool-name"},"åº“å­˜æŸ¥è¯¢"),s("div",{class:"tool-desc"},"æŸ¥è¯¢åº“å­˜ä¿¡æ¯")],-1)])),s("div",{class:"tool-item",onClick:t[8]||(t[8]=e=>n.selectTool("ç”Ÿäº§æŸ¥è¯¢"))},t[23]||(t[23]=[s("span",null,"ðŸ­",-1),s("div",null,[s("div",{class:"tool-name"},"ç”Ÿäº§æŸ¥è¯¢"),s("div",{class:"tool-desc"},"æŸ¥è¯¢ç”Ÿäº§æ•°æ®")],-1)]))])])]),s("div",M,[s("div",Q,[t[26]||(t[26]=v(" ðŸ’¬ æ™ºèƒ½é—®ç­” ")),s("div",V,[s("span",{class:"tag",onClick:t[9]||(t[9]=e=>n.askQuick("æŸ¥è¯¢å·¥åŽ‚Açš„åº“å­˜æƒ…å†µ"))},"æŸ¥è¯¢å·¥åŽ‚Açš„åº“å­˜æƒ…å†µ"),s("span",{class:"tag",onClick:t[10]||(t[10]=e=>n.askQuick("åˆ†æžæœ€è¿‘çš„è´¨é‡è¶‹åŠ¿"))},"åˆ†æžæœ€è¿‘çš„è´¨é‡è¶‹åŠ¿"),s("span",{class:"tag",onClick:t[11]||(t[11]=e=>n.askQuick("ç”Ÿæˆè´¨é‡æŠ¥å‘Š"))},"ç”Ÿæˆè´¨é‡æŠ¥å‘Š")])]),s("div",N,[(d(!0),a(p,null,m(l.messages,(e,c)=>(d(),a("div",{key:c,class:g(["message",e.type])},[s("div",P,o(e.type==="user"?"ðŸ‘¤":"ðŸ¤–"),1),s("div",j,[s("div",q,o(e.content),1),s("div",z,o(n.formatTime(e.timestamp)),1)])],2))),128)),l.loading?(d(),a("div",F,t[27]||(t[27]=[s("div",{class:"avatar"},"ðŸ¤–",-1),s("div",{class:"content"},[s("div",{class:"loading-dots"},[s("span"),s("span"),s("span")]),s("div",{class:"loading-text"},"AIæ­£åœ¨æ€è€ƒä¸­...")],-1)]))):u("",!0)],512),s("div",K,[h(s("textarea",{"onUpdate:modelValue":t[12]||(t[12]=e=>l.userInput=e),placeholder:"è¯·è¾“å…¥æ‚¨çš„é—®é¢˜...",onKeydown:t[13]||(t[13]=y(I((...e)=>n.sendMessage&&n.sendMessage(...e),["ctrl"]),["enter"])),disabled:l.loading},null,40,L),[[k,l.userInput]]),s("button",{class:"send-btn",onClick:t[14]||(t[14]=(...e)=>n.sendMessage&&n.sendMessage(...e)),disabled:!l.userInput.trim()||l.loading},o(l.loading?"å‘é€ä¸­...":"å‘é€"),9,O)])]),s("div",H,[t[29]||(t[29]=s("div",{class:"panel-title"},"ðŸ§  AIæ€è€ƒè¿‡ç¨‹",-1)),s("div",J,[l.thinkingSteps.length===0?(d(),a("div",U,t[28]||(t[28]=[s("div",{class:"empty-icon"},"ðŸ¤”",-1),s("div",{class:"empty-text"},"AIæ­£åœ¨ç­‰å¾…æ‚¨çš„é—®é¢˜...",-1)]))):u("",!0),(d(!0),a(p,null,m(l.thinkingSteps,(e,c)=>(d(),a("div",{key:c,class:g(["step",e.status])},[s("div",Z,[s("span",G,o(n.getStepIcon(e.type)),1),s("span",R,o(e.title),1),s("span",W,o(n.getStatusText(e.status)),1)])],2))),128))])])])])])}const es=A(f,[["render",X]]);export{es as default};
