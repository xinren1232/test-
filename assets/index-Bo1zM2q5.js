const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/data_generator-DpTjsdbG.js","assets/element-plus-DR-erZ3X.js","assets/echarts-Dfqt_Pbx.js","assets/RulesService-D3yBkLbq.js","assets/MaterialQualityReportSimple-ESJYRtUV.js","assets/MaterialQualityReportSimple-DZDL6m3z.css","assets/AIScenarioManagementSimple-BmJ1E-o4.js","assets/AIScenarioManagementSimple-CDyWmRdK.css","assets/AssistantPageNew-Cn_JlWOt.js","assets/AssistantPageNew-B2nv_iPK.css","assets/SimpleQA-DlIGgYzR.js","assets/SimpleQA-BPojS34c.css","assets/AssistantPageAISimple-m-9yjAlz.js","assets/AssistantPageAISimple-D9AgRhG_.css","assets/AssistantPageAIFixed-Du_fP05U.js","assets/AssistantPageAIFixed-BCLIjAAs.css","assets/AITestPage-DWql0IGn.js","assets/aiService-CKXedvtd.js","assets/AITestPage-fGeCpr8U.css","assets/EnhancedAIDemo-CORtvQI4.js","assets/EnhancedAIDemo-Do_Rvqth.css","assets/AIAssistant-C09AiRqz.js","assets/AIAssistant--UXj4ojk.css","assets/AIAssistantSimple-CYvJWBrB.js","assets/AIAssistantSimple-D9vCTjKv.css","assets/AIAssistantWorking-Bu-3eGHT.js","assets/AIAssistantWorking-DL9vX8pV.css","assets/AssistantPageAITest-CiBrr_F3.js","assets/AssistantPageAITest-CoUALQN6.css","assets/AssistantPageAINew-DU03aXCO.js","assets/AssistantPageAINew-CAbN2EEh.css","assets/AssistantPageAIMinimal-CW0TPXzR.js","assets/AssistantPageAIMinimal-CmRUMWDc.css","assets/SimpleAIThreeColumn-gZ8Urylh.js","assets/VoiceServiceManager-2sv0FYbn.js","assets/SimpleAIThreeColumn-c9N3ccrM.css","assets/AnalysisProcessPanel-CZG-Rm7E.css","assets/TestVoiceAI-C413JKIo.js","assets/TestVoiceAI-C3thP47u.css","assets/QMSAssistantLoading-C4H4xqW2.js","assets/QMSAssistantLoading-D3rdtSBc.css","assets/TestAIThreeColumn-DKbLXrh1.js","assets/AnalysisProcessPanel-BXaIJRlO.js","assets/TestAIThreeColumn-CZP2-Z8X.css","assets/AIAssistantThreeColumn-D_TsiW_4.js","assets/AIAssistantThreeColumn-qM4iXBmq.css","assets/AIAssistantFinal-DZqB0rOd.js","assets/AIAssistantFinal-D275h-5q.css","assets/AIAssistantStandalone-DccLXb74.js","assets/AIAssistantStandalone-B7GllO4X.css","assets/AIAssistantFullscreen-DnzYlSXR.js","assets/AIAssistantFullscreen-CQWPA1_f.css","assets/AIAssistantSimple-C_0tbVe2.js","assets/AIAssistantSimple-DlHIFAiV.css","assets/AIAssistantRedirect-DEmTRGrh.js","assets/AIAssistantRedirect-BNgRWZ8Z.css","assets/AIAssistantMain-nivlK3LL.js","assets/AIAssistantMain-E47TdHbI.css","assets/AIAssistantRedesigned-Lek23hmV.js","assets/AIAssistantRedesigned-YyST8DL5.css","assets/AssistantPageAIThreeColumn-CaljNGTQ.js","assets/AssistantPageAIThreeColumn-BQCfpXsv.css","assets/AIPlanningPage-Bw02AfZf.js","assets/AIPlanningPage-wWlAH_Lf.css","assets/AIRoadmapPage-CcYGdNit.js","assets/AIRoadmapPage-BCADSAhi.css","assets/AIArchitecturePage-Duu3brUI.js","assets/AIArchitecturePage-B3l5PqQD.css","assets/TestRealDataDisplay-DNqDrMPa.js","assets/TestRealDataDisplay-BQiyCHHB.css","assets/DataCleaningFinal-BKDG5B8J.js","assets/DataCleaningFinal-D3xQ-YHA.css","assets/DataCleaningMinimal-vYF2KK4f.js","assets/DataCleaningMinimal-YdrcoXxB.css","assets/TestPage-B6_Uno4Z.js","assets/TestPage-CkypxG7M.css","assets/DataProcessingCenter-BKsxiNN5.js","assets/DataProcessingCenter-B6slQNK2.css","assets/dagre-FFZHY6LT-CCnNfLh6.js","assets/graph-BVC-Zb6A.js","assets/layout-CQwmQ0-P.js","assets/c4Diagram-6F6E4RAY-C80zq_1u.js","assets/chunk-67H74DCK-C3eka3T1.js","assets/flowDiagram-PKI6S5ZS-DbrIezbE.js","assets/chunk-E2GYISFI-8vKQ_Qjb.js","assets/chunk-BFAMUDN2-D2CMLG0u.js","assets/chunk-SKB7J2MH-DIRWfbJa.js","assets/channel-CtbVf8nT.js","assets/erDiagram-R3QVA2FD-DwCV7SfS.js","assets/gitGraphDiagram-GW3U2K7C-CYnF7xE8.js","assets/chunk-353BL4L5-DorqYQuI.js","assets/chunk-AACKK3MU-B4DLM9tE.js","assets/treemap-6Y5VK53G-Cl5Wv6tZ.js","assets/ganttDiagram-EK5VF46D-BJW8zf-L.js","assets/linear-DdDTyogs.js","assets/init-Gi6I4Gst.js","assets/defaultLocale-C4B-KCzX.js","assets/infoDiagram-XT3IWWJI-D9q7riry.js","assets/pieDiagram-NIOCPIFQ-BSkiEi1S.js","assets/arc-DMD1Ou1m.js","assets/ordinal-Cboi1Yqb.js","assets/quadrantDiagram-2OG54O6I-DznVXC43.js","assets/xychartDiagram-H2YORKM3-pzsM24AG.js","assets/requirementDiagram-SO3GGRV7-BJ6nV2N3.js","assets/sequenceDiagram-ZIKVLSP4-C1FLKL3x.js","assets/classDiagram-BGRH5UQR-3DwqqSsJ.js","assets/chunk-QEP2MXWD-wkoyZQY-.js","assets/classDiagram-v2-O24JOBDK-3DwqqSsJ.js","assets/stateDiagram-XX37X6EN-PecmVe7R.js","assets/chunk-6OLS64BW-C8UkdXrt.js","assets/stateDiagram-v2-GD6S3NHB-CQcGi_dW.js","assets/journeyDiagram-EWQZEKCU-v6r_Czed.js","assets/timeline-definition-RI47OAVP-DZ-Z9P1Y.js","assets/mindmap-definition-CZNETY7S-DIBz7uyY.js","assets/cytoscape.esm-DjuLyO2d.js","assets/kanban-definition-ILFWEQ3N-CApUlFCz.js","assets/sankeyDiagram-4UZDY2LN-DANYLpNq.js","assets/diagram-5UYTHUR4-BDaIWzwP.js","assets/diagram-ZTM2IBQH-ByWmh3oY.js","assets/blockDiagram-PHRCVELO-7iGK3aqf.js","assets/architectureDiagram-NQ2NVSRB-BxaODYId.js","assets/diagram-3EMPZRKU-D1J58W8A.js"])))=>i.map(i=>d[i]);
var YB=Object.defineProperty;var XB=(e,t,a)=>t in e?YB(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a;var Ze=(e,t,a)=>XB(e,typeof t!="symbol"?t+"":t,a);import{bo as ZB,bp as PC,a0 as kt,bq as KB,$ as Yt,br as sc,S as Z,aE as Wr,bs as BC,W as $a,bt as Zn,aj as fa,aq as af,D as Ii,x as ru,L as xc,bm as Sc,a6 as OC,bu as ms,aw as Es,bv as JB,bw as NC,bl as is,bx as $C,K as lc,by as QB,bz as t3,bA as e3,bB as xi,G as qr,I as a3,bC as oy,aZ as r3,bD as n3,bE as i3,c as ht,O as m,P as x,Q as q,T as Ra,V as dt,o as J,X as Jt,a as S,n as ve,b as te,e as F,t as N,U as rf,R as Mu,F as ye,r as Se,H as Ro,Y as Fn,bF as o3,as as cc,bG as U_,bH as gh,bI as s3,A as l3,bJ as c3,bK as u3,bL as h3,bM as d3,av as mi,bN as f3,aR as ds,y as wc,bO as FC,ak as Cc,bP as p3,bQ as zC,bR as g3,bS as VC,aT as nv,bT as v3,bU as m3,bV as y3,aQ as GC,E as nf,ap as yn,N as Po,M as Bo,bW as HC,d as sy,bX as WC,bY as qC,bZ as _3,b_ as Hh,b$ as UC,c0 as b3,c1 as x3,c2 as S3,c3 as w3,ai as Wh,c4 as C3,aX as T3,c5 as A3,ay as k3,aS as D3,c6 as L3,aa as I3,bn as j_,c7 as M3,J as E3,a$ as R3,c8 as ly,bg as P3,m as Y_,c9 as B3,ca as O3,cb as N3}from"./element-plus-DR-erZ3X.js";import{_ as gt,c as ai,G as ie,a as ba,S as ha,r as X_,b as Nt,e as Rs,l as Ps,u as ze,s as Yr,d as la,g as Aa,n as Oo,Z as Zr,f as Vt,h as Fa,t as Qe,j as Ae,k as Bs,m as il,o as ol,p as na,q as Ot,v as Os,w as Ea,x as oo,P as cy,y as Z_,z as K_,A as va,R as Ge,B as _n,C as Pr,D as Me,E as Ut,F as Ns,H as _e,I as za,J as iv,K as ra,M as qh,N as Oe,O as $3,Q as jC,T as G,L as Wn,U as Tc,V as F3,W as of,X as ge,Y as zi,$ as J_,a0 as Uh,a1 as jh,a2 as YC,a3 as z3,a4 as pe,a5 as XC,a6 as ZC,a7 as KC,a8 as ia,a9 as Ve,aa as ka,ab as Ft,ac as Hr,ad as V3,ae as G3,af as H3,ag as Kr,ah as JC,ai as sl,aj as QC,ak as sf,al as pr,am as uy,an as W3,ao as nu,ap as tT,aq as aa,ar as da,as as yr,at as $r,au as iu,av as Be,aw as q3,ax as lf,ay as cf,az as U3,aA as Va,aB as eT,aC as Kn,aD as Jr,aE as Ma,aF as Yh,aG as j3,aH as hp,aI as Y3,aJ as Xe,aK as uf,aL as ov,aM as pa,aN as sv,aO as $s,aP as X3,aQ as aT,aR as Ke,aS as ll,aT as Z3,aU as K3,aV as tr,aW as Ac,aX as _a,aY as sa,aZ as J3,a_ as Q3,a$ as cl,b0 as Xh,b1 as kc,b2 as Pe,b3 as ma,b4 as ke,b5 as hf,b6 as ue,b7 as t5,b8 as Br,b9 as No,ba as e5,bb as Za,bc as ou,bd as rT,be as Vr,bf as df,bg as xn,bh as Q_,bi as Mi,bj as hy,bk as Ht,bl as nT,bm as a5,bn as r5,bo as n5,bp as iT,bq as oT,br as Ei,bs as $o,bt as Dc,bu as i5,bv as o5,bw as s5,bx as sT,by as lT,bz as Co,bA as Fs,bB as ff,bC as l5,bD as su,bE as Ul,bF as c5,bG as Qa,bH as dy,bI as u5,bJ as h5,bK as cT,bL as fy,bM as pf,bN as Zh,bO as d5,bP as uT,bQ as zn,bR as lv,bS as nr,bT as gf,bU as f5,bV as Ri,bW as Kh,bX as t1,bY as jl,bZ as e1,b_ as hT,b$ as p5,c0 as dT,c1 as vh,c2 as dp,c3 as Jh,c4 as uc,c5 as a1,c6 as ki,c7 as lu,c8 as g5,c9 as v5,ca as fs,cb as r1,cc as cv,cd as m5,ce as y5,cf as fT,cg as _5,ch as pT,ci as b5,cj as n1,ck as x5,cl as S5,cm as w5,cn as ul,co as Lc,cp as qn,cq as Er,cr as py,cs as ys,ct as C5,cu as uv,cv as hv,cw as T5,cx as fp,cy as gT,cz as ua,cA as pp,cB as A5,cC as Yl,cD as k5,cE as i1,cF as D5,cG as dv,cH as L5,cI as Eu,cJ as I5,cK as M5,cL as cu,cM as Ic,cN as E5,cO as vT,cP as o1,cQ as R5,cR as mT,cS as P5,cT as yT,cU as vf,cV as mf,cW as gy,cX as _T,cY as Ya,cZ as B5,c_ as O5,c$ as s1,d0 as N5,d1 as $5,d2 as F5,d3 as z5,d4 as V5,d5 as G5,d6 as H5,d7 as W5,d8 as mo,d9 as fv,da as l1,db as bT,dc as q5,dd as U5,de as xT,df as j5,dg as Y5,dh as ST,di as X5,dj as gp,dk as c1,dl as u1,dm as wT,dn as Z5,dp as K5,dq as J5,dr as Q5,ds as CT,dt as TT,du as xl,dv as Ru,dw as tO,dx as vy,dy as _s,dz as eO,dA as aO,dB as Qh,dC as rO,dD as nO,dE as iO,dF as yf,dG as oO,dH as sO,dI as lO,dJ as cO,dK as h1,dL as AT,dM as uO,dN as hO,dO,dP as fO,dQ as pO,dR as d1,dS as gO,dT as Si,dU as Mc,dV as vO,dW as f1,dX as mO,dY as yO,dZ as kT,d_ as DT,d$ as _O,e0 as _f,e1 as bO,e2 as xO,e3 as SO,e4 as wO,e5 as CO,e6 as TO,e7 as AO,e8 as kO,e9 as DO,ea as LO,eb as IO,ec as MO,ed as EO,ee as LT,ef as my,eg as RO,eh as PO,ei as BO,ej as ps,ek as OO,el as IT,em as pv,en as MT,eo as NO,ep as $O,eq as FO,er as zO,es as Pu,et as VO,eu as GO,ev as HO,i as xr,ew as td,ex as yy,ey as WO,ez as vp,eA as qO,eB as _y,eC as ET}from"./echarts-Dfqt_Pbx.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))r(n);new MutationObserver(n=>{for(const i of n)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function a(n){const i={};return n.integrity&&(i.integrity=n.integrity),n.referrerPolicy&&(i.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?i.credentials="include":n.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(n){if(n.ep)return;n.ep=!0;const i=a(n);fetch(n.href,i)}})();const UO="modulepreload",jO=function(e){return"/test-/"+e},p1={},jt=function(t,a,r){let n=Promise.resolve();if(a&&a.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),s=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));n=Promise.allSettled(a.map(l=>{if(l=jO(l),l in p1)return;p1[l]=!0;const c=l.endsWith(".css"),u=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${u}`))return;const h=document.createElement("link");if(h.rel=c?"stylesheet":UO,c||(h.as="script"),h.crossOrigin="",h.href=l,s&&h.setAttribute("nonce",s),document.head.appendChild(h),c)return new Promise((d,f)=>{h.addEventListener("load",d),h.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${l}`)))})}))}function i(o){const s=new Event("vite:preloadError",{cancelable:!0});if(s.payload=o,window.dispatchEvent(s),!s.defaultPrevented)throw o}return n.then(o=>{for(const s of o||[])s.status==="rejected"&&i(s.reason);return t().catch(i)})};/*!
  * vue-router v4.5.1
  * (c) 2025 Eduardo San Martin Morote
  * @license MIT
  */const os=typeof document<"u";function RT(e){return typeof e=="object"||"displayName"in e||"props"in e||"__vccOpts"in e}function YO(e){return e.__esModule||e[Symbol.toStringTag]==="Module"||e.default&&RT(e.default)}const We=Object.assign;function mp(e,t){const a={};for(const r in t){const n=t[r];a[r]=Xr(n)?n.map(e):e(n)}return a}const hc=()=>{},Xr=Array.isArray,PT=/#/g,XO=/&/g,ZO=/\//g,KO=/=/g,JO=/\?/g,BT=/\+/g,QO=/%5B/g,tN=/%5D/g,OT=/%5E/g,eN=/%60/g,NT=/%7B/g,aN=/%7C/g,$T=/%7D/g,rN=/%20/g;function by(e){return encodeURI(""+e).replace(aN,"|").replace(QO,"[").replace(tN,"]")}function nN(e){return by(e).replace(NT,"{").replace($T,"}").replace(OT,"^")}function gv(e){return by(e).replace(BT,"%2B").replace(rN,"+").replace(PT,"%23").replace(XO,"%26").replace(eN,"`").replace(NT,"{").replace($T,"}").replace(OT,"^")}function iN(e){return gv(e).replace(KO,"%3D")}function oN(e){return by(e).replace(PT,"%23").replace(JO,"%3F")}function sN(e){return e==null?"":oN(e).replace(ZO,"%2F")}function Ec(e){try{return decodeURIComponent(""+e)}catch{}return""+e}const lN=/\/$/,cN=e=>e.replace(lN,"");function yp(e,t,a="/"){let r,n={},i="",o="";const s=t.indexOf("#");let l=t.indexOf("?");return s<l&&s>=0&&(l=-1),l>-1&&(r=t.slice(0,l),i=t.slice(l+1,s>-1?s:t.length),n=e(i)),s>-1&&(r=r||t.slice(0,s),o=t.slice(s,t.length)),r=fN(r??t,a),{fullPath:r+(i&&"?")+i+o,path:r,query:n,hash:Ec(o)}}function uN(e,t){const a=t.query?e(t.query):"";return t.path+(a&&"?")+a+(t.hash||"")}function g1(e,t){return!t||!e.toLowerCase().startsWith(t.toLowerCase())?e:e.slice(t.length)||"/"}function hN(e,t,a){const r=t.matched.length-1,n=a.matched.length-1;return r>-1&&r===n&&zs(t.matched[r],a.matched[n])&&FT(t.params,a.params)&&e(t.query)===e(a.query)&&t.hash===a.hash}function zs(e,t){return(e.aliasOf||e)===(t.aliasOf||t)}function FT(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const a in e)if(!dN(e[a],t[a]))return!1;return!0}function dN(e,t){return Xr(e)?v1(e,t):Xr(t)?v1(t,e):e===t}function v1(e,t){return Xr(t)?e.length===t.length&&e.every((a,r)=>a===t[r]):e.length===1&&e[0]===t}function fN(e,t){if(e.startsWith("/"))return e;if(!e)return t;const a=t.split("/"),r=e.split("/"),n=r[r.length-1];(n===".."||n===".")&&r.push("");let i=a.length-1,o,s;for(o=0;o<r.length;o++)if(s=r[o],s!==".")if(s==="..")i>1&&i--;else break;return a.slice(0,i).join("/")+"/"+r.slice(o).join("/")}const si={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};var Rc;(function(e){e.pop="pop",e.push="push"})(Rc||(Rc={}));var dc;(function(e){e.back="back",e.forward="forward",e.unknown=""})(dc||(dc={}));function pN(e){if(!e)if(os){const t=document.querySelector("base");e=t&&t.getAttribute("href")||"/",e=e.replace(/^\w+:\/\/[^\/]+/,"")}else e="/";return e[0]!=="/"&&e[0]!=="#"&&(e="/"+e),cN(e)}const gN=/^[^#]+#/;function vN(e,t){return e.replace(gN,"#")+t}function mN(e,t){const a=document.documentElement.getBoundingClientRect(),r=e.getBoundingClientRect();return{behavior:t.behavior,left:r.left-a.left-(t.left||0),top:r.top-a.top-(t.top||0)}}const bf=()=>({left:window.scrollX,top:window.scrollY});function yN(e){let t;if("el"in e){const a=e.el,r=typeof a=="string"&&a.startsWith("#"),n=typeof a=="string"?r?document.getElementById(a.slice(1)):document.querySelector(a):a;if(!n)return;t=mN(n,e)}else t=e;"scrollBehavior"in document.documentElement.style?window.scrollTo(t):window.scrollTo(t.left!=null?t.left:window.scrollX,t.top!=null?t.top:window.scrollY)}function m1(e,t){return(history.state?history.state.position-t:-1)+e}const vv=new Map;function _N(e,t){vv.set(e,t)}function bN(e){const t=vv.get(e);return vv.delete(e),t}let xN=()=>location.protocol+"//"+location.host;function zT(e,t){const{pathname:a,search:r,hash:n}=t,i=e.indexOf("#");if(i>-1){let s=n.includes(e.slice(i))?e.slice(i).length:1,l=n.slice(s);return l[0]!=="/"&&(l="/"+l),g1(l,"")}return g1(a,e)+r+n}function SN(e,t,a,r){let n=[],i=[],o=null;const s=({state:d})=>{const f=zT(e,location),p=a.value,g=t.value;let v=0;if(d){if(a.value=f,t.value=d,o&&o===p){o=null;return}v=g?d.position-g.position:0}else r(f);n.forEach(_=>{_(a.value,p,{delta:v,type:Rc.pop,direction:v?v>0?dc.forward:dc.back:dc.unknown})})};function l(){o=a.value}function c(d){n.push(d);const f=()=>{const p=n.indexOf(d);p>-1&&n.splice(p,1)};return i.push(f),f}function u(){const{history:d}=window;d.state&&d.replaceState(We({},d.state,{scroll:bf()}),"")}function h(){for(const d of i)d();i=[],window.removeEventListener("popstate",s),window.removeEventListener("beforeunload",u)}return window.addEventListener("popstate",s),window.addEventListener("beforeunload",u,{passive:!0}),{pauseListeners:l,listen:c,destroy:h}}function y1(e,t,a,r=!1,n=!1){return{back:e,current:t,forward:a,replaced:r,position:window.history.length,scroll:n?bf():null}}function wN(e){const{history:t,location:a}=window,r={value:zT(e,a)},n={value:t.state};n.value||i(r.value,{back:null,current:r.value,forward:null,position:t.length-1,replaced:!0,scroll:null},!0);function i(l,c,u){const h=e.indexOf("#"),d=h>-1?(a.host&&document.querySelector("base")?e:e.slice(h))+l:xN()+e+l;try{t[u?"replaceState":"pushState"](c,"",d),n.value=c}catch(f){console.error(f),a[u?"replace":"assign"](d)}}function o(l,c){const u=We({},t.state,y1(n.value.back,l,n.value.forward,!0),c,{position:n.value.position});i(l,u,!0),r.value=l}function s(l,c){const u=We({},n.value,t.state,{forward:l,scroll:bf()});i(u.current,u,!0);const h=We({},y1(r.value,l,null),{position:u.position+1},c);i(l,h,!1),r.value=l}return{location:r,state:n,push:s,replace:o}}function CN(e){e=pN(e);const t=wN(e),a=SN(e,t.state,t.location,t.replace);function r(i,o=!0){o||a.pauseListeners(),history.go(i)}const n=We({location:"",base:e,go:r,createHref:vN.bind(null,e)},t,a);return Object.defineProperty(n,"location",{enumerable:!0,get:()=>t.location.value}),Object.defineProperty(n,"state",{enumerable:!0,get:()=>t.state.value}),n}function TN(e){return typeof e=="string"||e&&typeof e=="object"}function VT(e){return typeof e=="string"||typeof e=="symbol"}const GT=Symbol("");var _1;(function(e){e[e.aborted=4]="aborted",e[e.cancelled=8]="cancelled",e[e.duplicated=16]="duplicated"})(_1||(_1={}));function Vs(e,t){return We(new Error,{type:e,[GT]:!0},t)}function Mn(e,t){return e instanceof Error&&GT in e&&(t==null||!!(e.type&t))}const b1="[^/]+?",AN={sensitive:!1,strict:!1,start:!0,end:!0},kN=/[.+*?^${}()[\]/\\]/g;function DN(e,t){const a=We({},AN,t),r=[];let n=a.start?"^":"";const i=[];for(const c of e){const u=c.length?[]:[90];a.strict&&!c.length&&(n+="/");for(let h=0;h<c.length;h++){const d=c[h];let f=40+(a.sensitive?.25:0);if(d.type===0)h||(n+="/"),n+=d.value.replace(kN,"\\$&"),f+=40;else if(d.type===1){const{value:p,repeatable:g,optional:v,regexp:_}=d;i.push({name:p,repeatable:g,optional:v});const y=_||b1;if(y!==b1){f+=10;try{new RegExp(`(${y})`)}catch(w){throw new Error(`Invalid custom RegExp for param "${p}" (${y}): `+w.message)}}let b=g?`((?:${y})(?:/(?:${y}))*)`:`(${y})`;h||(b=v&&c.length<2?`(?:/${b})`:"/"+b),v&&(b+="?"),n+=b,f+=20,v&&(f+=-8),g&&(f+=-20),y===".*"&&(f+=-50)}u.push(f)}r.push(u)}if(a.strict&&a.end){const c=r.length-1;r[c][r[c].length-1]+=.7000000000000001}a.strict||(n+="/?"),a.end?n+="$":a.strict&&!n.endsWith("/")&&(n+="(?:/|$)");const o=new RegExp(n,a.sensitive?"":"i");function s(c){const u=c.match(o),h={};if(!u)return null;for(let d=1;d<u.length;d++){const f=u[d]||"",p=i[d-1];h[p.name]=f&&p.repeatable?f.split("/"):f}return h}function l(c){let u="",h=!1;for(const d of e){(!h||!u.endsWith("/"))&&(u+="/"),h=!1;for(const f of d)if(f.type===0)u+=f.value;else if(f.type===1){const{value:p,repeatable:g,optional:v}=f,_=p in c?c[p]:"";if(Xr(_)&&!g)throw new Error(`Provided param "${p}" is an array but it is not repeatable (* or + modifiers)`);const y=Xr(_)?_.join("/"):_;if(!y)if(v)d.length<2&&(u.endsWith("/")?u=u.slice(0,-1):h=!0);else throw new Error(`Missing required param "${p}"`);u+=y}}return u||"/"}return{re:o,score:r,keys:i,parse:s,stringify:l}}function LN(e,t){let a=0;for(;a<e.length&&a<t.length;){const r=t[a]-e[a];if(r)return r;a++}return e.length<t.length?e.length===1&&e[0]===80?-1:1:e.length>t.length?t.length===1&&t[0]===80?1:-1:0}function HT(e,t){let a=0;const r=e.score,n=t.score;for(;a<r.length&&a<n.length;){const i=LN(r[a],n[a]);if(i)return i;a++}if(Math.abs(n.length-r.length)===1){if(x1(r))return 1;if(x1(n))return-1}return n.length-r.length}function x1(e){const t=e[e.length-1];return e.length>0&&t[t.length-1]<0}const IN={type:0,value:""},MN=/[a-zA-Z0-9_]/;function EN(e){if(!e)return[[]];if(e==="/")return[[IN]];if(!e.startsWith("/"))throw new Error(`Invalid path "${e}"`);function t(f){throw new Error(`ERR (${a})/"${c}": ${f}`)}let a=0,r=a;const n=[];let i;function o(){i&&n.push(i),i=[]}let s=0,l,c="",u="";function h(){c&&(a===0?i.push({type:0,value:c}):a===1||a===2||a===3?(i.length>1&&(l==="*"||l==="+")&&t(`A repeatable param (${c}) must be alone in its segment. eg: '/:ids+.`),i.push({type:1,value:c,regexp:u,repeatable:l==="*"||l==="+",optional:l==="*"||l==="?"})):t("Invalid state to consume buffer"),c="")}function d(){c+=l}for(;s<e.length;){if(l=e[s++],l==="\\"&&a!==2){r=a,a=4;continue}switch(a){case 0:l==="/"?(c&&h(),o()):l===":"?(h(),a=1):d();break;case 4:d(),a=r;break;case 1:l==="("?a=2:MN.test(l)?d():(h(),a=0,l!=="*"&&l!=="?"&&l!=="+"&&s--);break;case 2:l===")"?u[u.length-1]=="\\"?u=u.slice(0,-1)+l:a=3:u+=l;break;case 3:h(),a=0,l!=="*"&&l!=="?"&&l!=="+"&&s--,u="";break;default:t("Unknown state");break}}return a===2&&t(`Unfinished custom RegExp for param "${c}"`),h(),o(),n}function RN(e,t,a){const r=DN(EN(e.path),a),n=We(r,{record:e,parent:t,children:[],alias:[]});return t&&!n.record.aliasOf==!t.record.aliasOf&&t.children.push(n),n}function PN(e,t){const a=[],r=new Map;t=T1({strict:!1,end:!0,sensitive:!1},t);function n(h){return r.get(h)}function i(h,d,f){const p=!f,g=w1(h);g.aliasOf=f&&f.record;const v=T1(t,h),_=[g];if("alias"in h){const w=typeof h.alias=="string"?[h.alias]:h.alias;for(const T of w)_.push(w1(We({},g,{components:f?f.record.components:g.components,path:T,aliasOf:f?f.record:g})))}let y,b;for(const w of _){const{path:T}=w;if(d&&T[0]!=="/"){const C=d.record.path,A=C[C.length-1]==="/"?"":"/";w.path=d.record.path+(T&&A+T)}if(y=RN(w,d,v),f?f.alias.push(y):(b=b||y,b!==y&&b.alias.push(y),p&&h.name&&!C1(y)&&o(h.name)),WT(y)&&l(y),g.children){const C=g.children;for(let A=0;A<C.length;A++)i(C[A],y,f&&f.children[A])}f=f||y}return b?()=>{o(b)}:hc}function o(h){if(VT(h)){const d=r.get(h);d&&(r.delete(h),a.splice(a.indexOf(d),1),d.children.forEach(o),d.alias.forEach(o))}else{const d=a.indexOf(h);d>-1&&(a.splice(d,1),h.record.name&&r.delete(h.record.name),h.children.forEach(o),h.alias.forEach(o))}}function s(){return a}function l(h){const d=NN(h,a);a.splice(d,0,h),h.record.name&&!C1(h)&&r.set(h.record.name,h)}function c(h,d){let f,p={},g,v;if("name"in h&&h.name){if(f=r.get(h.name),!f)throw Vs(1,{location:h});v=f.record.name,p=We(S1(d.params,f.keys.filter(b=>!b.optional).concat(f.parent?f.parent.keys.filter(b=>b.optional):[]).map(b=>b.name)),h.params&&S1(h.params,f.keys.map(b=>b.name))),g=f.stringify(p)}else if(h.path!=null)g=h.path,f=a.find(b=>b.re.test(g)),f&&(p=f.parse(g),v=f.record.name);else{if(f=d.name?r.get(d.name):a.find(b=>b.re.test(d.path)),!f)throw Vs(1,{location:h,currentLocation:d});v=f.record.name,p=We({},d.params,h.params),g=f.stringify(p)}const _=[];let y=f;for(;y;)_.unshift(y.record),y=y.parent;return{name:v,path:g,params:p,matched:_,meta:ON(_)}}e.forEach(h=>i(h));function u(){a.length=0,r.clear()}return{addRoute:i,resolve:c,removeRoute:o,clearRoutes:u,getRoutes:s,getRecordMatcher:n}}function S1(e,t){const a={};for(const r of t)r in e&&(a[r]=e[r]);return a}function w1(e){const t={path:e.path,redirect:e.redirect,name:e.name,meta:e.meta||{},aliasOf:e.aliasOf,beforeEnter:e.beforeEnter,props:BN(e),children:e.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in e?e.components||null:e.component&&{default:e.component}};return Object.defineProperty(t,"mods",{value:{}}),t}function BN(e){const t={},a=e.props||!1;if("component"in e)t.default=a;else for(const r in e.components)t[r]=typeof a=="object"?a[r]:a;return t}function C1(e){for(;e;){if(e.record.aliasOf)return!0;e=e.parent}return!1}function ON(e){return e.reduce((t,a)=>We(t,a.meta),{})}function T1(e,t){const a={};for(const r in e)a[r]=r in t?t[r]:e[r];return a}function NN(e,t){let a=0,r=t.length;for(;a!==r;){const i=a+r>>1;HT(e,t[i])<0?r=i:a=i+1}const n=$N(e);return n&&(r=t.lastIndexOf(n,r-1)),r}function $N(e){let t=e;for(;t=t.parent;)if(WT(t)&&HT(e,t)===0)return t}function WT({record:e}){return!!(e.name||e.components&&Object.keys(e.components).length||e.redirect)}function FN(e){const t={};if(e===""||e==="?")return t;const r=(e[0]==="?"?e.slice(1):e).split("&");for(let n=0;n<r.length;++n){const i=r[n].replace(BT," "),o=i.indexOf("="),s=Ec(o<0?i:i.slice(0,o)),l=o<0?null:Ec(i.slice(o+1));if(s in t){let c=t[s];Xr(c)||(c=t[s]=[c]),c.push(l)}else t[s]=l}return t}function A1(e){let t="";for(let a in e){const r=e[a];if(a=iN(a),r==null){r!==void 0&&(t+=(t.length?"&":"")+a);continue}(Xr(r)?r.map(i=>i&&gv(i)):[r&&gv(r)]).forEach(i=>{i!==void 0&&(t+=(t.length?"&":"")+a,i!=null&&(t+="="+i))})}return t}function zN(e){const t={};for(const a in e){const r=e[a];r!==void 0&&(t[a]=Xr(r)?r.map(n=>n==null?null:""+n):r==null?r:""+r)}return t}const VN=Symbol(""),k1=Symbol(""),xf=Symbol(""),xy=Symbol(""),mv=Symbol("");function Sl(){let e=[];function t(r){return e.push(r),()=>{const n=e.indexOf(r);n>-1&&e.splice(n,1)}}function a(){e=[]}return{add:t,list:()=>e.slice(),reset:a}}function yi(e,t,a,r,n,i=o=>o()){const o=r&&(r.enterCallbacks[n]=r.enterCallbacks[n]||[]);return()=>new Promise((s,l)=>{const c=d=>{d===!1?l(Vs(4,{from:a,to:t})):d instanceof Error?l(d):TN(d)?l(Vs(2,{from:t,to:d})):(o&&r.enterCallbacks[n]===o&&typeof d=="function"&&o.push(d),s())},u=i(()=>e.call(r&&r.instances[n],t,a,c));let h=Promise.resolve(u);e.length<3&&(h=h.then(c)),h.catch(d=>l(d))})}function _p(e,t,a,r,n=i=>i()){const i=[];for(const o of e)for(const s in o.components){let l=o.components[s];if(!(t!=="beforeRouteEnter"&&!o.instances[s]))if(RT(l)){const u=(l.__vccOpts||l)[t];u&&i.push(yi(u,a,r,o,s,n))}else{let c=l();i.push(()=>c.then(u=>{if(!u)throw new Error(`Couldn't resolve component "${s}" at "${o.path}"`);const h=YO(u)?u.default:u;o.mods[s]=u,o.components[s]=h;const f=(h.__vccOpts||h)[t];return f&&yi(f,a,r,o,s,n)()}))}}return i}function D1(e){const t=Zn(xf),a=Zn(xy),r=Yt(()=>{const l=kt(e.to);return t.resolve(l)}),n=Yt(()=>{const{matched:l}=r.value,{length:c}=l,u=l[c-1],h=a.matched;if(!u||!h.length)return-1;const d=h.findIndex(zs.bind(null,u));if(d>-1)return d;const f=L1(l[c-2]);return c>1&&L1(u)===f&&h[h.length-1].path!==f?h.findIndex(zs.bind(null,l[c-2])):d}),i=Yt(()=>n.value>-1&&UN(a.params,r.value.params)),o=Yt(()=>n.value>-1&&n.value===a.matched.length-1&&FT(a.params,r.value.params));function s(l={}){if(qN(l)){const c=t[kt(e.replace)?"replace":"push"](kt(e.to)).catch(hc);return e.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>c),c}return Promise.resolve()}return{route:r,href:Yt(()=>r.value.href),isActive:i,isExactActive:o,navigate:s}}function GN(e){return e.length===1?e[0]:e}const HN=PC({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"},viewTransition:Boolean},useLink:D1,setup(e,{slots:t}){const a=fa(D1(e)),{options:r}=Zn(xf),n=Yt(()=>({[I1(e.activeClass,r.linkActiveClass,"router-link-active")]:a.isActive,[I1(e.exactActiveClass,r.linkExactActiveClass,"router-link-exact-active")]:a.isExactActive}));return()=>{const i=t.default&&GN(t.default(a));return e.custom?i:BC("a",{"aria-current":a.isExactActive?e.ariaCurrentValue:null,href:a.href,onClick:a.navigate,class:n.value},i)}}}),WN=HN;function qN(e){if(!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)&&!e.defaultPrevented&&!(e.button!==void 0&&e.button!==0)){if(e.currentTarget&&e.currentTarget.getAttribute){const t=e.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(t))return}return e.preventDefault&&e.preventDefault(),!0}}function UN(e,t){for(const a in t){const r=t[a],n=e[a];if(typeof r=="string"){if(r!==n)return!1}else if(!Xr(n)||n.length!==r.length||r.some((i,o)=>i!==n[o]))return!1}return!0}function L1(e){return e?e.aliasOf?e.aliasOf.path:e.path:""}const I1=(e,t,a)=>e??t??a,jN=PC({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(e,{attrs:t,slots:a}){const r=Zn(mv),n=Yt(()=>e.route||r.value),i=Zn(k1,0),o=Yt(()=>{let c=kt(i);const{matched:u}=n.value;let h;for(;(h=u[c])&&!h.components;)c++;return c}),s=Yt(()=>n.value.matched[o.value]);sc(k1,Yt(()=>o.value+1)),sc(VN,s),sc(mv,n);const l=Z();return Wr(()=>[l.value,s.value,e.name],([c,u,h],[d,f,p])=>{u&&(u.instances[h]=c,f&&f!==u&&c&&c===d&&(u.leaveGuards.size||(u.leaveGuards=f.leaveGuards),u.updateGuards.size||(u.updateGuards=f.updateGuards))),c&&u&&(!f||!zs(u,f)||!d)&&(u.enterCallbacks[h]||[]).forEach(g=>g(c))},{flush:"post"}),()=>{const c=n.value,u=e.name,h=s.value,d=h&&h.components[u];if(!d)return M1(a.default,{Component:d,route:c});const f=h.props[u],p=f?f===!0?c.params:typeof f=="function"?f(c):f:null,v=BC(d,We({},p,t,{onVnodeUnmounted:_=>{_.component.isUnmounted&&(h.instances[u]=null)},ref:l}));return M1(a.default,{Component:v,route:c})||v}}});function M1(e,t){if(!e)return null;const a=e(t);return a.length===1?a[0]:a}const YN=jN;function XN(e){const t=PN(e.routes,e),a=e.parseQuery||FN,r=e.stringifyQuery||A1,n=e.history,i=Sl(),o=Sl(),s=Sl(),l=ZB(si);let c=si;os&&e.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const u=mp.bind(null,et=>""+et),h=mp.bind(null,sN),d=mp.bind(null,Ec);function f(et,ut){let at,Q;return VT(et)?(at=t.getRecordMatcher(et),Q=ut):Q=et,t.addRoute(Q,at)}function p(et){const ut=t.getRecordMatcher(et);ut&&t.removeRoute(ut)}function g(){return t.getRoutes().map(et=>et.record)}function v(et){return!!t.getRecordMatcher(et)}function _(et,ut){if(ut=We({},ut||l.value),typeof et=="string"){const ft=yp(a,et,ut.path),$t=t.resolve({path:ft.path},ut),Pt=n.createHref(ft.fullPath);return We(ft,$t,{params:d($t.params),hash:Ec(ft.hash),redirectedFrom:void 0,href:Pt})}let at;if(et.path!=null)at=We({},et,{path:yp(a,et.path,ut.path).path});else{const ft=We({},et.params);for(const $t in ft)ft[$t]==null&&delete ft[$t];at=We({},et,{params:h(ft)}),ut.params=h(ut.params)}const Q=t.resolve(at,ut),bt=et.hash||"";Q.params=u(d(Q.params));const Dt=uN(r,We({},et,{hash:nN(bt),path:Q.path})),Et=n.createHref(Dt);return We({fullPath:Dt,hash:bt,query:r===A1?zN(et.query):et.query||{}},Q,{redirectedFrom:void 0,href:Et})}function y(et){return typeof et=="string"?yp(a,et,l.value.path):We({},et)}function b(et,ut){if(c!==et)return Vs(8,{from:ut,to:et})}function w(et){return A(et)}function T(et){return w(We(y(et),{replace:!0}))}function C(et){const ut=et.matched[et.matched.length-1];if(ut&&ut.redirect){const{redirect:at}=ut;let Q=typeof at=="function"?at(et):at;return typeof Q=="string"&&(Q=Q.includes("?")||Q.includes("#")?Q=y(Q):{path:Q},Q.params={}),We({query:et.query,hash:et.hash,params:Q.path!=null?{}:et.params},Q)}}function A(et,ut){const at=c=_(et),Q=l.value,bt=et.state,Dt=et.force,Et=et.replace===!0,ft=C(at);if(ft)return A(We(y(ft),{state:typeof ft=="object"?We({},bt,ft.state):bt,force:Dt,replace:Et}),ut||at);const $t=at;$t.redirectedFrom=ut;let Pt;return!Dt&&hN(r,Q,at)&&(Pt=Vs(16,{to:$t,from:Q}),ot(Q,Q,!0,!1)),(Pt?Promise.resolve(Pt):M($t,Q)).catch(qt=>Mn(qt)?Mn(qt,2)?qt:it(qt):z(qt,$t,Q)).then(qt=>{if(qt){if(Mn(qt,2))return A(We({replace:Et},y(qt.to),{state:typeof qt.to=="object"?We({},bt,qt.to.state):bt,force:Dt}),ut||$t)}else qt=E($t,Q,!0,Et,bt);return P($t,Q,qt),qt})}function k(et,ut){const at=b(et,ut);return at?Promise.reject(at):Promise.resolve()}function L(et){const ut=mt.values().next().value;return ut&&typeof ut.runWithContext=="function"?ut.runWithContext(et):et()}function M(et,ut){let at;const[Q,bt,Dt]=ZN(et,ut);at=_p(Q.reverse(),"beforeRouteLeave",et,ut);for(const ft of Q)ft.leaveGuards.forEach($t=>{at.push(yi($t,et,ut))});const Et=k.bind(null,et,ut);return at.push(Et),Mt(at).then(()=>{at=[];for(const ft of i.list())at.push(yi(ft,et,ut));return at.push(Et),Mt(at)}).then(()=>{at=_p(bt,"beforeRouteUpdate",et,ut);for(const ft of bt)ft.updateGuards.forEach($t=>{at.push(yi($t,et,ut))});return at.push(Et),Mt(at)}).then(()=>{at=[];for(const ft of Dt)if(ft.beforeEnter)if(Xr(ft.beforeEnter))for(const $t of ft.beforeEnter)at.push(yi($t,et,ut));else at.push(yi(ft.beforeEnter,et,ut));return at.push(Et),Mt(at)}).then(()=>(et.matched.forEach(ft=>ft.enterCallbacks={}),at=_p(Dt,"beforeRouteEnter",et,ut,L),at.push(Et),Mt(at))).then(()=>{at=[];for(const ft of o.list())at.push(yi(ft,et,ut));return at.push(Et),Mt(at)}).catch(ft=>Mn(ft,8)?ft:Promise.reject(ft))}function P(et,ut,at){s.list().forEach(Q=>L(()=>Q(et,ut,at)))}function E(et,ut,at,Q,bt){const Dt=b(et,ut);if(Dt)return Dt;const Et=ut===si,ft=os?history.state:{};at&&(Q||Et?n.replace(et.fullPath,We({scroll:Et&&ft&&ft.scroll},bt)):n.push(et.fullPath,bt)),l.value=et,ot(et,ut,at,Et),it()}let D;function O(){D||(D=n.listen((et,ut,at)=>{if(!Tt.listening)return;const Q=_(et),bt=C(Q);if(bt){A(We(bt,{replace:!0,force:!0}),Q).catch(hc);return}c=Q;const Dt=l.value;os&&_N(m1(Dt.fullPath,at.delta),bf()),M(Q,Dt).catch(Et=>Mn(Et,12)?Et:Mn(Et,2)?(A(We(y(Et.to),{force:!0}),Q).then(ft=>{Mn(ft,20)&&!at.delta&&at.type===Rc.pop&&n.go(-1,!1)}).catch(hc),Promise.reject()):(at.delta&&n.go(-at.delta,!1),z(Et,Q,Dt))).then(Et=>{Et=Et||E(Q,Dt,!1),Et&&(at.delta&&!Mn(Et,8)?n.go(-at.delta,!1):at.type===Rc.pop&&Mn(Et,20)&&n.go(-1,!1)),P(Q,Dt,Et)}).catch(hc)}))}let B=Sl(),R=Sl(),V;function z(et,ut,at){it(et);const Q=R.list();return Q.length?Q.forEach(bt=>bt(et,ut,at)):console.error(et),Promise.reject(et)}function W(){return V&&l.value!==si?Promise.resolve():new Promise((et,ut)=>{B.add([et,ut])})}function it(et){return V||(V=!et,O(),B.list().forEach(([ut,at])=>et?at(et):ut()),B.reset()),et}function ot(et,ut,at,Q){const{scrollBehavior:bt}=e;if(!os||!bt)return Promise.resolve();const Dt=!at&&bN(m1(et.fullPath,0))||(Q||!at)&&history.state&&history.state.scroll||null;return $a().then(()=>bt(et,ut,Dt)).then(Et=>Et&&yN(Et)).catch(Et=>z(Et,et,ut))}const xt=et=>n.go(et);let j;const mt=new Set,Tt={currentRoute:l,listening:!0,addRoute:f,removeRoute:p,clearRoutes:t.clearRoutes,hasRoute:v,getRoutes:g,resolve:_,options:e,push:w,replace:T,go:xt,back:()=>xt(-1),forward:()=>xt(1),beforeEach:i.add,beforeResolve:o.add,afterEach:s.add,onError:R.add,isReady:W,install(et){const ut=this;et.component("RouterLink",WN),et.component("RouterView",YN),et.config.globalProperties.$router=ut,Object.defineProperty(et.config.globalProperties,"$route",{enumerable:!0,get:()=>kt(l)}),os&&!j&&l.value===si&&(j=!0,w(n.location).catch(bt=>{}));const at={};for(const bt in si)Object.defineProperty(at,bt,{get:()=>l.value[bt],enumerable:!0});et.provide(xf,ut),et.provide(xy,KB(at)),et.provide(mv,l);const Q=et.unmount;mt.add(et),et.unmount=function(){mt.delete(et),mt.size<1&&(c=si,D&&D(),D=null,l.value=si,j=!1,V=!1),Q()}}};function Mt(et){return et.reduce((ut,at)=>ut.then(()=>L(at)),Promise.resolve())}return Tt}function ZN(e,t){const a=[],r=[],n=[],i=Math.max(t.matched.length,e.matched.length);for(let o=0;o<i;o++){const s=t.matched[o];s&&(e.matched.find(c=>zs(c,s))?r.push(s):a.push(s));const l=e.matched[o];l&&(t.matched.find(c=>zs(c,l))||n.push(l))}return[a,r,n]}function hl(){return Zn(xf)}function KN(e){return Zn(xy)}var qT={name:"zh-cn",el:{breadcrumb:{label:"面包屑"},colorpicker:{confirm:"确定",clear:"清空",defaultLabel:"颜色选择器",description:"当前颜色 {color}，按 Enter 键选择新颜色",alphaLabel:"选择透明度的值"},datepicker:{now:"此刻",today:"今天",cancel:"取消",clear:"清空",confirm:"确定",dateTablePrompt:"使用方向键与 Enter 键可选择日期",monthTablePrompt:"使用方向键与 Enter 键可选择月份",yearTablePrompt:"使用方向键与 Enter 键可选择年份",selectedDate:"已选日期",selectDate:"选择日期",selectTime:"选择时间",startDate:"开始日期",startTime:"开始时间",endDate:"结束日期",endTime:"结束时间",prevYear:"前一年",nextYear:"后一年",prevMonth:"上个月",nextMonth:"下个月",year:"年",month1:"1 月",month2:"2 月",month3:"3 月",month4:"4 月",month5:"5 月",month6:"6 月",month7:"7 月",month8:"8 月",month9:"9 月",month10:"10 月",month11:"11 月",month12:"12 月",weeks:{sun:"日",mon:"一",tue:"二",wed:"三",thu:"四",fri:"五",sat:"六"},weeksFull:{sun:"星期日",mon:"星期一",tue:"星期二",wed:"星期三",thu:"星期四",fri:"星期五",sat:"星期六"},months:{jan:"一月",feb:"二月",mar:"三月",apr:"四月",may:"五月",jun:"六月",jul:"七月",aug:"八月",sep:"九月",oct:"十月",nov:"十一月",dec:"十二月"}},inputNumber:{decrease:"减少数值",increase:"增加数值"},select:{loading:"加载中",noMatch:"无匹配数据",noData:"无数据",placeholder:"请选择"},dropdown:{toggleDropdown:"切换下拉选项"},mention:{loading:"加载中"},cascader:{noMatch:"无匹配数据",loading:"加载中",placeholder:"请选择",noData:"暂无数据"},pagination:{goto:"前往",pagesize:"条/页",total:"共 {total} 条",pageClassifier:"页",page:"页",prev:"上一页",next:"下一页",currentPage:"第 {pager} 页",prevPages:"向前 {pager} 页",nextPages:"向后 {pager} 页",deprecationWarning:"你使用了一些已被废弃的用法，请参考 el-pagination 的官方文档"},dialog:{close:"关闭此对话框"},drawer:{close:"关闭此对话框"},messagebox:{title:"提示",confirm:"确定",cancel:"取消",error:"输入的数据不合法!",close:"关闭此对话框"},upload:{deleteTip:"按 Delete 键可删除",delete:"删除",preview:"查看图片",continue:"继续上传"},slider:{defaultLabel:"滑块介于 {min} 至 {max}",defaultRangeStartLabel:"选择起始值",defaultRangeEndLabel:"选择结束值"},table:{emptyText:"暂无数据",confirmFilter:"筛选",resetFilter:"重置",clearFilter:"全部",sumText:"合计"},tour:{next:"下一步",previous:"上一步",finish:"结束导览"},tree:{emptyText:"暂无数据"},transfer:{noMatch:"无匹配数据",noData:"无数据",titles:["列表 1","列表 2"],filterPlaceholder:"请输入搜索内容",noCheckedFormat:"共 {total} 项",hasCheckedFormat:"已选 {checked}/{total} 项"},image:{error:"加载失败"},pageHeader:{title:"返回"},popconfirm:{confirmButtonText:"确定",cancelButtonText:"取消"},carousel:{leftArrow:"上一张幻灯片",rightArrow:"下一张幻灯片",indicator:"幻灯片切换至索引 {index}"}}};const ca=(e,t)=>{const a=e.__vccOpts||e;for(const[r,n]of t)a[r]=n;return a},JN={name:"App",components:{ElConfigProvider:i3,HomeFilled:n3,DataBoard:r3,Goods:oy,OfficeBuilding:a3,Document:qr,Operation:xi,Stopwatch:e3,Fold:t3,Expand:QB,DataAnalysis:lc,ChatLineRound:$C,ChatDotRound:is,CaretBottom:NC,User:JB,Setting:Es,Tools:ms,MagicStick:OC,Connection:Sc,TrendCharts:xc,View:ru,Download:Ii,Search:af},setup(){const e=KN(),t=Z(!1),a=Yt(()=>e.name||""),r=Yt(()=>{const c=["/ai-assistant-final","/ai-assistant-three-column","/ai-assistant-standalone","/ai-assistant-fullscreen","/ai-assistant-simple","/ai-assistant-main","/ai-assistant-redesigned","/assistant-ai-new","/assistant-ai-three-column"].includes(e.path);return console.log("当前路由:",e.path,"是否为AI路由:",c),c}),n=Yt(()=>e.path),i=()=>{t.value=!t.value};sc("unifiedDataService",unifiedDataService),sc("systemDataUpdater",systemDataUpdater),Ra(()=>{try{console.log("初始化基础数据服务..."),unifiedDataService.migrateOldData(),o()||(console.warn("检测到数据不一致，尝试修复..."),s());const c=localStorage.getItem(unifiedDataService.STORAGE_KEYS.INVENTORY)!==null,u=localStorage.getItem(unifiedDataService.STORAGE_KEYS.LAB)!==null,h=localStorage.getItem(unifiedDataService.STORAGE_KEYS.FACTORY)!==null;console.log("数据检查结果:",{hasInventoryData:c,hasLabData:u,hasFactoryData:h}),console.log("统一数据服务初始化完成")}catch(l){console.error("初始化统一数据服务失败:",l),dt.error("初始化数据服务失败，部分功能可能无法正常工作")}});const o=()=>{try{const l=localStorage.getItem("inventory_data"),c=localStorage.getItem(unifiedDataService.STORAGE_KEYS.INVENTORY),u=localStorage.getItem("lab_data"),h=localStorage.getItem("lab_test_data"),d=localStorage.getItem(unifiedDataService.STORAGE_KEYS.LAB),f=localStorage.getItem("factory_data"),p=localStorage.getItem("online_data"),g=localStorage.getItem(unifiedDataService.STORAGE_KEYS.FACTORY);return(!l||!c||l===c)&&(!u&&!h||!d||u===d||h===d)&&(!f&&!p||!g||f===g||p===g)}catch(l){return console.error("检查数据一致性失败:",l),!1}},s=()=>{try{const l=unifiedDataService.getInventoryData(),c=unifiedDataService.getLabData(),u=unifiedDataService.getFactoryData();l.length>0&&(localStorage.setItem(unifiedDataService.STORAGE_KEYS.INVENTORY,JSON.stringify(l)),localStorage.setItem("inventory_data",JSON.stringify(l))),c.length>0&&(localStorage.setItem(unifiedDataService.STORAGE_KEYS.LAB,JSON.stringify(c)),localStorage.setItem("lab_data",JSON.stringify(c)),localStorage.setItem("lab_test_data",JSON.stringify(c))),u.length>0&&(localStorage.setItem(unifiedDataService.STORAGE_KEYS.FACTORY,JSON.stringify(u)),localStorage.setItem("factory_data",JSON.stringify(u)),localStorage.setItem("online_data",JSON.stringify(u))),console.log("已修复数据不一致问题")}catch(l){console.error("修复数据不一致失败:",l)}};return{zhCn:qT,route:e,currentPageName:a,isCollapsed:t,activeMenu:n,toggleCollapse:i,isAIAssistantRoute:r}}},QN={class:"app-container"},t$={key:1,class:"main-layout"},e$={class:"logo-container"},a$={class:"logo-icon-section"},r$={key:0,class:"logo-text-section"},n$={class:"header"},i$={class:"breadcrumb"},o$={class:"header-right"},s$={class:"user-info"},l$={class:"content-container"};function c$(e,t,a,r,n,i){const o=q("router-view"),s=q("DataAnalysis"),l=q("el-icon"),c=q("el-button"),u=q("HomeFilled"),h=q("el-menu-item"),d=q("Goods"),f=q("OfficeBuilding"),p=q("Stopwatch"),g=q("Document"),v=q("TrendCharts"),_=q("el-sub-menu"),y=q("Setting"),b=q("MagicStick"),w=q("Connection"),T=q("Operation"),C=q("Search"),A=q("Tools"),k=q("el-menu"),L=q("Expand"),M=q("Fold"),P=q("el-breadcrumb-item"),E=q("el-breadcrumb"),D=q("User"),O=q("el-avatar"),B=q("CaretBottom"),R=q("el-dropdown-item"),V=q("el-dropdown-menu"),z=q("el-dropdown"),W=q("el-config-provider");return J(),ht("div",QN,[m(W,{locale:r.zhCn},{default:x(()=>[r.isAIAssistantRoute?(J(),Jt(o,{key:0})):(J(),ht("div",t$,[S("div",{class:ve(["sidebar",{collapsed:r.isCollapsed}])},[S("div",e$,[S("div",a$,[m(l,{size:"28"},{default:x(()=>[m(s)]),_:1})]),r.isCollapsed?te("",!0):(J(),ht("div",r$,t[1]||(t[1]=[S("h3",{class:"logo-text"},"QMS智能管理系统",-1),S("span",{class:"logo-subtitle"},"Quality Management System",-1)]))),m(c,{icon:r.isCollapsed?e.Expand:e.Fold,onClick:e.toggleSidebar,class:"collapse-btn-header",text:"",size:"small"},null,8,["icon","onClick"])]),m(k,{"default-active":r.activeMenu,class:"sidebar-menu",collapse:r.isCollapsed,"background-color":"#304156","text-color":"#fff","active-text-color":"#ffd04b",router:"","unique-opened":""},{default:x(()=>[m(h,{index:"/",class:"menu-item-enhanced"},{title:x(()=>t[2]||(t[2]=[S("span",{class:"menu-title"},"首页",-1)])),default:x(()=>[m(l,{class:"menu-icon"},{default:x(()=>[m(u)]),_:1})]),_:1}),m(_,{index:"/stage1-menu",class:"submenu-enhanced"},{title:x(()=>[m(l,{class:"menu-icon"},{default:x(()=>[m(d)]),_:1}),t[3]||(t[3]=S("span",{class:"menu-title"},"阶段一：模拟场景搭建",-1))]),default:x(()=>[m(h,{index:"/inventory",class:"submenu-item"},{default:x(()=>[m(l,{class:"submenu-icon"},{default:x(()=>[m(d)]),_:1}),t[4]||(t[4]=S("span",{class:"submenu-title"},"物料库存管理",-1))]),_:1,__:[4]}),m(h,{index:"/factory",class:"submenu-item"},{default:x(()=>[m(l,{class:"submenu-icon"},{default:x(()=>[m(f)]),_:1}),t[5]||(t[5]=S("span",{class:"submenu-title"},"物料上线跟踪",-1))]),_:1,__:[5]}),m(h,{index:"/lab",class:"submenu-item"},{default:x(()=>[m(l,{class:"submenu-icon"},{default:x(()=>[m(p)]),_:1}),t[6]||(t[6]=S("span",{class:"submenu-title"},"物料测试跟踪",-1))]),_:1,__:[6]}),m(h,{index:"/batch",class:"submenu-item"},{default:x(()=>[m(l,{class:"submenu-icon"},{default:x(()=>[m(g)]),_:1}),t[7]||(t[7]=S("span",{class:"submenu-title"},"批次管理",-1))]),_:1,__:[7]}),m(h,{index:"/material-quality-report",class:"submenu-item"},{default:x(()=>[m(l,{class:"submenu-icon"},{default:x(()=>[m(v)]),_:1}),t[8]||(t[8]=S("span",{class:"submenu-title"},"物料质量总结报告",-1))]),_:1,__:[8]})]),_:1}),m(_,{index:"/stage2-menu",class:"submenu-enhanced"},{title:x(()=>[m(l,{class:"menu-icon"},{default:x(()=>[m(s)]),_:1}),t[9]||(t[9]=S("span",{class:"menu-title"},"阶段二：数据功能搭建",-1))]),default:x(()=>[m(_,{index:"/data-management-submenu",class:"nested-submenu"},{title:x(()=>[m(l,{class:"submenu-icon"},{default:x(()=>[m(y)]),_:1}),t[10]||(t[10]=S("span",{class:"submenu-title"},"数据管理",-1))]),default:x(()=>[m(h,{index:"/admin/data",class:"nested-item"},{default:x(()=>t[11]||(t[11]=[S("span",{class:"nested-title"},"数据生成工具",-1)])),_:1,__:[11]}),m(h,{index:"/admin/data/rules/definition",class:"nested-item"},{default:x(()=>t[12]||(t[12]=[S("span",{class:"nested-title"},"数据规则定义",-1)])),_:1,__:[12]}),m(h,{index:"/rule-library",class:"nested-item"},{default:x(()=>t[13]||(t[13]=[S("span",{class:"nested-title"},"规则库管理",-1)])),_:1,__:[13]})]),_:1}),m(_,{index:"/ai-development-submenu"},{title:x(()=>[m(l,null,{default:x(()=>[m(b)]),_:1}),t[14]||(t[14]=S("span",null,"智能AI开发",-1))]),default:x(()=>[m(h,{index:"/assistant"},{default:x(()=>t[15]||(t[15]=[F("智能问答")])),_:1,__:[15]}),m(h,{index:"/ai-scenario-management"},{default:x(()=>t[16]||(t[16]=[F("AI场景管理")])),_:1,__:[16]})]),_:1})]),_:1}),m(_,{index:"/stage3-menu"},{title:x(()=>[m(l,null,{default:x(()=>[m(v)]),_:1}),t[17]||(t[17]=S("span",null,"阶段三：AI建设规划",-1))]),default:x(()=>[m(h,{index:"/ai-planning"},{default:x(()=>[m(l,null,{default:x(()=>[m(g)]),_:1}),t[18]||(t[18]=S("span",null,"AI规划文档",-1))]),_:1,__:[18]}),m(h,{index:"/ai-roadmap"},{default:x(()=>[m(l,null,{default:x(()=>[m(w)]),_:1}),t[19]||(t[19]=S("span",null,"技术路线图",-1))]),_:1,__:[19]}),m(h,{index:"/ai-architecture"},{default:x(()=>[m(l,null,{default:x(()=>[m(T)]),_:1}),t[20]||(t[20]=S("span",null,"架构设计",-1))]),_:1,__:[20]})]),_:1}),m(_,{index:"/stage4-menu",class:"submenu-enhanced"},{title:x(()=>[m(l,{class:"menu-icon"},{default:x(()=>[m(C)]),_:1}),t[21]||(t[21]=S("span",{class:"menu-title"},"阶段四：场景探索",-1))]),default:x(()=>[m(h,{index:"/data-cleaning",class:"submenu-item"},{default:x(()=>[m(l,{class:"submenu-icon"},{default:x(()=>[m(A)]),_:1}),t[22]||(t[22]=S("span",{class:"submenu-title"},"数据清洗治理",-1))]),_:1,__:[22]})]),_:1}),m(h,{index:"/assistant-ai-three-column",class:"main-menu-item"},{default:x(()=>[m(l,{class:"menu-icon"},{default:x(()=>[m(b)]),_:1}),t[23]||(t[23]=S("span",{class:"menu-title"},"QMS AI智能助手",-1))]),_:1,__:[23]}),m(h,{index:"/admin"},{title:x(()=>t[24]||(t[24]=[F("系统管理")])),default:x(()=>[m(l,null,{default:x(()=>[m(y)]),_:1})]),_:1})]),_:1},8,["default-active","collapse"]),S("div",{class:"collapse-btn",onClick:t[0]||(t[0]=(...it)=>r.toggleCollapse&&r.toggleCollapse(...it))},[r.isCollapsed?(J(),Jt(l,{key:0},{default:x(()=>[m(L)]),_:1})):(J(),Jt(l,{key:1},{default:x(()=>[m(M)]),_:1}))])],2),S("div",{class:ve(["main-content",{expanded:r.isCollapsed}])},[S("div",n$,[S("div",i$,[m(E,{separator:"/"},{default:x(()=>[m(P,{to:{path:"/"}},{default:x(()=>t[25]||(t[25]=[F("首页")])),_:1,__:[25]}),r.route.meta.title?(J(),Jt(P,{key:0},{default:x(()=>[F(N(r.route.meta.title),1)]),_:1})):te("",!0)]),_:1})]),S("div",o$,[m(z,{class:"user-dropdown"},{dropdown:x(()=>[m(V,null,{default:x(()=>[m(R,null,{default:x(()=>t[27]||(t[27]=[F("个人设置")])),_:1,__:[27]}),m(R,null,{default:x(()=>t[28]||(t[28]=[F("修改密码")])),_:1,__:[28]}),m(R,{divided:""},{default:x(()=>t[29]||(t[29]=[F("退出登录")])),_:1,__:[29]})]),_:1})]),default:x(()=>[S("span",s$,[m(O,{size:32,class:"user-avatar"},{default:x(()=>[m(l,null,{default:x(()=>[m(D)]),_:1})]),_:1}),t[26]||(t[26]=S("span",{class:"user-name"},"管理员",-1)),m(l,null,{default:x(()=>[m(B)]),_:1})])]),_:1})])]),S("div",l$,[m(o)])],2)]))]),_:1},8,["locale"])])}const u$=ca(JN,[["render",c$]]),h$=[{id:1,name:"电子元件",description:"各类电子元器件，包括电阻、电容、IC等",risk_level:"medium"},{id:2,name:"结构件",description:"产品结构和外观相关部件",risk_level:"low"},{id:3,name:"晶片类",description:"液晶显示屏、触控面板等晶片类物料",risk_level:"high"},{id:4,name:"CAM/FP/电声组件",description:"摄像头模组、指纹模组和扬声器等电声组件",risk_level:"medium"},{id:5,name:"连接器",description:"各类连接器和接插件",risk_level:"low"},{id:6,name:"电池/电源",description:"电池和电源管理组件",risk_level:"high"},{id:7,name:"辅料/包材",description:"辅助材料和包装材料",risk_level:"low"},{id:8,name:"其他",description:"其他类别物料",risk_level:"low"}],d$={class:"home-container"},f$={class:"section background-section"},p$={class:"section-header"},g$={class:"section-title"},v$={class:"background-intro"},m$={class:"intro-card"},y$={class:"intro-icon"},_$={class:"background-content"},b$={class:"card-header"},x$={class:"card-icon"},S$={class:"card-title"},w$={class:"card-content"},C$={class:"card-description"},T$={class:"card-solution"},A$={class:"card-progress"},k$={class:"background-summary"},D$={class:"section framework-section"},L$={class:"section-header"},I$={class:"section-title"},M$={class:"framework-content"},E$={class:"compact-architecture"},R$={class:"panel-header"},P$={class:"tech-categories"},B$={class:"tech-category frontend-tech"},O$={class:"category-header"},N$={class:"tech-category backend-tech"},$$={class:"category-header"},F$={class:"tech-category ai-tech"},z$={class:"category-header"},V$={class:"tech-category tools-tech"},G$={class:"category-header"},H$={class:"arch-flow-container"},W$={class:"compact-layer"},q$={class:"compact-layer"},U$={class:"compact-nodes-row"},j$={class:"compact-layer"},Y$={class:"compact-nodes-row"},X$={class:"dual-layer"},Z$={class:"compact-layer ai-section"},K$={class:"compact-nodes-col"},J$={class:"compact-layer data-section"},Q$={class:"compact-nodes-col"},t4={class:"data-flow-summary"},e4={class:"flow-summary-steps"},a4={class:"step-icon"},r4={class:"step-icon"},n4={class:"step-icon"},i4={class:"section design-section"},o4={class:"section-header"},s4={class:"section-title"},l4={class:"design-content"},c4={class:"compact-stages-container"},u4={class:"stage-card-wrapper"},h4={class:"compact-stage-header"},d4={class:"stage-number-compact"},f4={class:"stage-info-compact"},p4={class:"stage-title-compact"},g4={class:"stage-subtitle-compact"},v4={class:"stage-status-compact"},m4={class:"compact-modules-grid"},y4=["onClick"],_4={class:"module-icon-compact"},b4={class:"module-content-compact"},x4={class:"module-name-compact"},S4={class:"module-desc-compact"},w4={class:"module-action-compact"},C4={class:"compact-stage-progress"},T4={class:"progress-info-compact"},A4={class:"progress-value-compact"},k4={class:"stage-controls"},D4={class:"stage-indicators"},L4=["onClick"],I4={class:"stage-navigation"},M4={class:"section ai-assistant-section"},E4={class:"section-header"},R4={class:"section-title"},P4={class:"ai-assistant-content"},B4={class:"ai-symmetric-layout"},O4={class:"ai-column ai-features-column"},N4={class:"column-header"},$4={class:"symmetric-grid"},F4={class:"card-content"},z4={class:"card-title"},V4={class:"card-description"},G4={class:"card-tags"},H4={class:"ai-column ai-roadmap-column"},W4={class:"column-header"},q4={class:"symmetric-grid"},U4={class:"card-content"},j4={class:"card-header"},Y4={class:"card-title"},X4={class:"card-time"},Z4={class:"card-description"},K4={class:"card-tags"},J4={class:"ai-assistant-actions"},Q4={__name:"HomeView",setup(e){const t=hl();Z([]),Z([]),Z([]);const a=Z(0),r=Z(!1),n=Z(0),i=Z([{title:"智库平台",icon:"House",status:"仅支持问答助手",statusClass:"status-warning",statusIcon:"Warning",description:"当前智库平台功能相对单一，仅支持基础问答功能，无法满足复杂业务场景需求",solution:"通过模拟系统验证多模态AI能力，为正式系统扩展奠定基础",progress:35,progressColor:"#E6A23C"},{title:"案例应用",icon:"Folder",status:"数据需要清洗",statusClass:"status-danger",statusIcon:"Warning",description:"历史数据杂乱无序，缺乏统一标准，需要外接工具进行数据清洗和整理",solution:"在模拟系统中建立数据治理规范，验证自动化清洗流程",progress:25,progressColor:"#F56C6C"},{title:"Agent开发",icon:"Service",status:"行业难题",statusClass:"status-danger",statusIcon:"Warning",description:"智能代理开发面临行业特有技术挑战，需要自主研发专业功能模块",solution:"通过模拟环境构建领域专用Agent框架，降低正式开发风险",progress:20,progressColor:"#F56C6C"},{title:"QMS系统",icon:"Setting",status:"建设初期",statusClass:"status-info",statusIcon:"Clock",description:"质量管理系统处于建设初期，基础架构和核心功能尚在规划阶段",solution:"先行搭建模拟系统，验证技术方案和业务流程，为正式接入做准备",progress:60,progressColor:"#409EFF"}]),o=Z([{title:"阶段一：模拟场景搭建（IQE）",subtitle:"基础数据管理与业务流程建立",status:"已完成",statusClass:"status-success",tagType:"success",progress:95,progressColor:"#67C23A",features:[{name:"物料库存管理",description:"132条库存数据管理",icon:"Box",available:!0,path:"/stage1/inventory"},{name:"物料上线跟踪",description:"1056条上线记录跟踪",icon:"Monitor",available:!0,path:"/stage1/online"},{name:"物料测试跟踪",description:"396条测试记录管理",icon:"DataAnalysis",available:!0,path:"/stage1/lab"},{name:"批次管理",description:"批次生命周期管理",icon:"DocumentCopy",available:!0,path:"/stage1/batch"}]},{title:"阶段二：数据功能搭建",subtitle:"数据规则与智能AI开发",status:"进行中",statusClass:"status-warning",tagType:"warning",progress:75,progressColor:"#E6A23C",features:[{name:"数据管理",description:"数据规则定义与管理",icon:"Setting",available:!0,path:"/stage2/data"},{name:"智能问答",description:"AI驱动的智能问答系统",icon:"ChatDotRound",available:!0,path:"/ai-assistant"},{name:"AI场景管理",description:"智能场景配置与管理",icon:"MagicStick",available:!0,path:"/ai-scenario"},{name:"数据分析工具",description:"高级数据分析与可视化",icon:"TrendCharts",available:!1,path:"/stage2/analysis"}]},{title:"阶段三：AI建设规划",subtitle:"全面AI能力建设与系统优化",status:"规划中",statusClass:"status-info",tagType:"info",progress:30,progressColor:"#409EFF",features:[{name:"AI规划文档",description:"详细的AI建设规划",icon:"Document",available:!0,path:"/stage3/ai-planning"},{name:"技术路线图",description:"技术发展路径规划",icon:"TrendCharts",available:!0,path:"/stage3/roadmap"},{name:"架构设计",description:"系统架构设计方案",icon:"Connection",available:!0,path:"/stage3/architecture"},{name:"预测性维护",description:"基于AI的预测性维护",icon:"MagicStick",available:!1,path:"/stage3/predictive"}]}]),s=Z([{name:"智能问答系统",description:"基于自然语言的智能问答，支持复杂业务查询与数据分析",icon:"QuestionFilled",statusClass:"feature-blue",tagType:"primary",tags:["自然语言","业务查询","实时响应"]},{name:"数据智能分析",description:"自动化数据分析与洞察发现，提供深度业务洞察",icon:"Search",statusClass:"feature-green",tagType:"success",tags:["数据挖掘","趋势分析","异常检测"]},{name:"质量预测模型",description:"基于历史数据的质量风险预测，构建预警体系",icon:"TrendCharts",statusClass:"feature-orange",tagType:"warning",tags:["机器学习","风险预测","预警系统"]},{name:"智能推荐引擎",description:"个性化的质量管理建议与优化方案，实现智能决策",icon:"Star",statusClass:"feature-purple",tagType:"info",tags:["推荐算法","决策支持","优化建议"]}]),l=Z([{phase:"基础建设期",timeline:"2025 Q2-Q3",description:"基础AI能力建设，实现智能问答和数据分析功能，构建核心技术框架",statusClass:"roadmap-blue",tagType:"primary",icon:"Setting",goals:["智能问答","数据可视化","基础分析"]},{phase:"能力提升期",timeline:"2025 Q4-2026 Q1",description:"增强AI分析能力，引入机器学习模型，提升预测准确性和智能化水平",statusClass:"roadmap-green",tagType:"success",icon:"TrendCharts",goals:["预测模型","异常检测","智能推荐"]},{phase:"智能预警期",timeline:"2026 Q2-Q3",description:"质量预测与风险管理，构建预警体系，实现主动质量控制和管理",statusClass:"roadmap-orange",tagType:"warning",icon:"Warning",goals:["风险预测","预警系统","质量控制"]},{phase:"全面集成期",timeline:"2026 Q4-2027 Q1",description:"全面AI集成，实现端到端智能化管理，打造行业领先的智能QMS系统",statusClass:"roadmap-purple",tagType:"info",icon:"Connection",goals:["自动化决策","持续学习","系统优化"]}]);Yt(()=>"1.2"),Yt(()=>"95"),Yt(()=>"0.8"),Yt(()=>8),Yt(()=>"6"),Yt(()=>h$.map((b,w)=>({categoryId:b.id,categoryName:b.name,totalCount:10+w*5,highRiskCount:Math.floor(Math.random()*3),mediumRiskCount:Math.floor(Math.random()*5),lowRiskCount:8+w*3})));function c(b){t.push(b)}function u(){t.push("/qms-assistant-loading")}function h(b){n.value=b}function d(){n.value<o.value.length-1&&n.value++}function f(){n.value>0&&n.value--}function p(){let b=0;const w=setInterval(()=>{b++,a.value=b,b>=9&&(clearInterval(w),setTimeout(()=>{a.value=0,g()},3e3))},800)}function g(){let b=0;const w=setInterval(()=>{b++,a.value=b,b>=9&&(clearInterval(w),setTimeout(()=>{a.value=0,g()},3e3))},800)}let v=null;function _(){v=setInterval(()=>{n.value=(n.value+1)%o.value.length},5e3)}function y(){v&&(clearInterval(v),v=null)}return Ra(()=>{p(),_()}),rf(()=>{y()}),(b,w)=>{const T=q("el-icon"),C=q("el-progress"),A=q("el-col"),k=q("el-row"),L=q("el-alert"),M=q("el-button"),P=q("User"),E=q("Grid"),D=q("Coin"),O=q("el-tag"),B=q("ArrowLeft");return J(),ht("div",d$,[S("div",f$,[S("div",p$,[S("h2",g$,[m(T,null,{default:x(()=>[m(kt(qr))]),_:1}),w[3]||(w[3]=F(" 项目背景与现状分析 "))]),w[4]||(w[4]=S("p",{class:"section-subtitle"},"基于当前技术栈与业务需求的深度分析，为QMS智能管理模拟系统建设提供依据",-1))]),S("div",v$,[S("div",m$,[S("div",y$,[m(T,null,{default:x(()=>[m(kt(Ro))]),_:1})]),w[5]||(w[5]=S("div",{class:"intro-content"},[S("h3",null,"建设背景"),S("p",null,[F("面对智库平台功能局限、案例应用数据混乱、Agent开发技术挑战、QMS系统建设初期等现状，我们搭建了"),S("strong",null,"QMS智能管理模拟系统"),F("，通过提前实现功能搭建和效果调试，验证数据流、工具流的运行机制，为后续正式接入QMS系统奠定基础。")])],-1))])]),S("div",_$,[m(k,{gutter:20},{default:x(()=>[(J(!0),ht(ye,null,Se(i.value,(R,V)=>(J(),Jt(A,{xs:24,sm:12,md:6,key:V},{default:x(()=>[S("div",{class:ve(["background-card",`card-${V+1}`])},[S("div",b$,[S("div",x$,[m(T,null,{default:x(()=>[(J(),Jt(Fn(R.icon)))]),_:2},1024)]),S("h3",S$,N(R.title),1)]),S("div",w$,[S("div",{class:ve(["card-status",R.statusClass])},[m(T,null,{default:x(()=>[(J(),Jt(Fn(R.statusIcon)))]),_:2},1024),S("span",null,N(R.status),1)],2),S("p",C$,N(R.description),1),S("div",T$,[w[6]||(w[6]=S("strong",null,"解决方案：",-1)),S("span",null,N(R.solution),1)])]),S("div",A$,[m(C,{percentage:R.progress,color:R.progressColor,"stroke-width":4},null,8,["percentage","color"])])],2)]),_:2},1024))),128))]),_:1}),S("div",k$,[m(L,{title:"建设目标",type:"success",description:"通过提前实现功能搭建和效果调试，完善数据流、工具流的运行机制，深入了解后续规划，为快速接入QMS系统实现AI落地奠定坚实基础。","show-icon":"",closable:!1})])])]),S("div",D$,[S("div",L$,[S("h2",I$,[m(T,null,{default:x(()=>[m(kt(Sc))]),_:1}),w[7]||(w[7]=F(" 系统架构与数据流 "))]),w[8]||(w[8]=S("p",{class:"section-subtitle"},"动态展示系统整体流程与信息流转",-1))]),S("div",M$,[S("div",E$,[S("div",{class:"tech-stack-trigger",onClick:w[0]||(w[0]=R=>r.value=!r.value)},[m(T,null,{default:x(()=>[m(kt(Es))]),_:1}),w[9]||(w[9]=S("span",null,"核心技术栈",-1))]),S("div",{class:ve(["tech-stack-panel",{active:r.value}])},[S("div",R$,[w[10]||(w[10]=S("h4",null,"核心技术栈",-1)),w[11]||(w[11]=S("p",null,"构建现代化智能质检系统的技术基础",-1)),m(M,{type:"text",class:"close-btn",onClick:w[1]||(w[1]=R=>r.value=!1)},{default:x(()=>[m(T,null,{default:x(()=>[m(kt(o3))]),_:1})]),_:1})]),S("div",P$,[S("div",B$,[S("div",O$,[m(T,null,{default:x(()=>[m(kt(cc))]),_:1}),w[12]||(w[12]=S("span",null,"前端技术",-1))]),w[13]||(w[13]=Mu('<div class="tech-tags" data-v-841f9416><span class="tech-tag vue-tag" data-v-841f9416>Vue 3</span><span class="tech-tag element-tag" data-v-841f9416>Element Plus</span><span class="tech-tag chart-tag" data-v-841f9416>ECharts</span><span class="tech-tag ts-tag" data-v-841f9416>TypeScript</span><span class="tech-tag vite-tag" data-v-841f9416>Vite</span></div>',1))]),S("div",N$,[S("div",$$,[m(T,null,{default:x(()=>[m(kt(U_))]),_:1}),w[14]||(w[14]=S("span",null,"后端服务",-1))]),w[15]||(w[15]=Mu('<div class="tech-tags" data-v-841f9416><span class="tech-tag fastapi-tag" data-v-841f9416>FastAPI</span><span class="tech-tag python-tag" data-v-841f9416>Python</span><span class="tech-tag sqlite-tag" data-v-841f9416>SQLite</span><span class="tech-tag uvicorn-tag" data-v-841f9416>Uvicorn</span><span class="tech-tag pydantic-tag" data-v-841f9416>Pydantic</span></div>',1))]),S("div",F$,[S("div",z$,[m(T,null,{default:x(()=>[m(kt(is))]),_:1}),w[16]||(w[16]=S("span",null,"AI技术",-1))]),w[17]||(w[17]=Mu('<div class="tech-tags" data-v-841f9416><span class="tech-tag deepseek-tag" data-v-841f9416>DeepSeek</span><span class="tech-tag langchain-tag" data-v-841f9416>LangChain</span><span class="tech-tag openai-tag" data-v-841f9416>OpenAI API</span><span class="tech-tag embedding-tag" data-v-841f9416>Embedding</span><span class="tech-tag rag-tag" data-v-841f9416>RAG</span></div>',1))]),S("div",V$,[S("div",G$,[m(T,null,{default:x(()=>[m(kt(ms))]),_:1}),w[18]||(w[18]=S("span",null,"工具链",-1))]),w[19]||(w[19]=Mu('<div class="tech-tags" data-v-841f9416><span class="tech-tag git-tag" data-v-841f9416>Git</span><span class="tech-tag pnpm-tag" data-v-841f9416>pnpm</span><span class="tech-tag eslint-tag" data-v-841f9416>ESLint</span><span class="tech-tag prettier-tag" data-v-841f9416>Prettier</span><span class="tech-tag vscode-tag" data-v-841f9416>VSCode</span></div>',1))])])],2),S("div",{class:ve(["tech-stack-overlay",{active:r.value}]),onClick:w[2]||(w[2]=R=>r.value=!1)},null,2),S("div",H$,[S("div",W$,[w[21]||(w[21]=S("div",{class:"layer-title"},"用户交互",-1)),S("div",{class:ve(["compact-node user-node",{active:a.value>=1}])},[m(T,null,{default:x(()=>[m(P)]),_:1}),w[20]||(w[20]=S("span",null,"用户",-1))],2)]),S("div",{class:ve(["flowing-connector",{active:a.value>=2}])},w[22]||(w[22]=[S("div",{class:"flow-line"},[S("div",{class:"flow-dots"})],-1)]),2),S("div",q$,[w[26]||(w[26]=S("div",{class:"layer-title"},"前端展示层",-1)),S("div",U$,[S("div",{class:ve(["compact-node vue-node",{active:a.value>=2}])},[m(T,null,{default:x(()=>[m(kt(cc))]),_:1}),w[23]||(w[23]=S("span",null,"Vue 3",-1))],2),S("div",{class:ve(["compact-node element-node",{active:a.value>=2}])},[m(T,null,{default:x(()=>[m(E)]),_:1}),w[24]||(w[24]=S("span",null,"Element Plus",-1))],2),S("div",{class:ve(["compact-node chart-node",{active:a.value>=2}])},[m(T,null,{default:x(()=>[m(kt(xc))]),_:1}),w[25]||(w[25]=S("span",null,"ECharts",-1))],2)])]),S("div",{class:ve(["flowing-connector",{active:a.value>=3}])},w[27]||(w[27]=[S("div",{class:"flow-line"},[S("div",{class:"flow-dots"})],-1)]),2),S("div",j$,[w[31]||(w[31]=S("div",{class:"layer-title"},"后端服务层",-1)),S("div",Y$,[S("div",{class:ve(["compact-node fastapi-node",{active:a.value>=3}])},[m(T,null,{default:x(()=>[m(kt(U_))]),_:1}),w[28]||(w[28]=S("span",null,"FastAPI",-1))],2),S("div",{class:ve(["compact-node python-node",{active:a.value>=3}])},[m(T,null,{default:x(()=>[m(kt(ms))]),_:1}),w[29]||(w[29]=S("span",null,"Python",-1))],2),S("div",{class:ve(["compact-node rule-node",{active:a.value>=3}])},[m(T,null,{default:x(()=>[m(kt(Es))]),_:1}),w[30]||(w[30]=S("span",null,"规则引擎",-1))],2)])]),S("div",{class:ve(["branch-connector",{active:a.value>=4}])},w[32]||(w[32]=[S("div",{class:"branch-left-line"},[S("div",{class:"flow-dots"})],-1),S("div",{class:"branch-right-line"},[S("div",{class:"flow-dots"})],-1)]),2),S("div",X$,[S("div",Z$,[w[35]||(w[35]=S("div",{class:"layer-title"},"AI服务层",-1)),S("div",K$,[S("div",{class:ve(["compact-node deepseek-node",{active:a.value>=4}])},[m(T,null,{default:x(()=>[m(kt(is))]),_:1}),w[33]||(w[33]=S("span",null,"DeepSeek",-1))],2),S("div",{class:ve(["compact-node langchain-node",{active:a.value>=4}])},[m(T,null,{default:x(()=>[m(kt(OC))]),_:1}),w[34]||(w[34]=S("span",null,"LangChain",-1))],2)])]),S("div",J$,[w[38]||(w[38]=S("div",{class:"layer-title"},"数据存储层",-1)),S("div",Q$,[S("div",{class:ve(["compact-node sqlite-node",{active:a.value>=4}])},[m(T,null,{default:x(()=>[m(D)]),_:1}),w[36]||(w[36]=S("span",null,"SQLite",-1))],2),S("div",{class:ve(["compact-node json-node",{active:a.value>=4}])},[m(T,null,{default:x(()=>[m(kt(qr))]),_:1}),w[37]||(w[37]=S("span",null,"JSON",-1))],2)])])]),S("div",{class:ve(["flowing-connector",{active:a.value>=5}])},w[39]||(w[39]=[S("div",{class:"flow-line"},[S("div",{class:"flow-dots"})],-1)]),2),S("div",t4,[w[45]||(w[45]=S("div",{class:"flow-summary-title"},"数据流转过程",-1)),S("div",e4,[S("div",{class:ve(["summary-step",{active:a.value>=5}])},[S("div",a4,[m(T,null,{default:x(()=>[m(kt(gh))]),_:1})]),w[40]||(w[40]=S("div",{class:"step-text"},[S("strong",null,"数据采集"),S("span",null,"132+396+1056条")],-1))],2),w[43]||(w[43]=S("div",{class:"summary-arrow"},"→",-1)),S("div",{class:ve(["summary-step",{active:a.value>=6}])},[S("div",r4,[m(T,null,{default:x(()=>[m(kt(ms))]),_:1})]),w[41]||(w[41]=S("div",{class:"step-text"},[S("strong",null,"数据处理"),S("span",null,"清洗验证")],-1))],2),w[44]||(w[44]=S("div",{class:"summary-arrow"},"→",-1)),S("div",{class:ve(["summary-step",{active:a.value>=7}])},[S("div",n4,[m(T,null,{default:x(()=>[m(kt(is))]),_:1})]),w[42]||(w[42]=S("div",{class:"step-text"},[S("strong",null,"AI分析"),S("span",null,"智能问答")],-1))],2)])])])])])]),S("div",i4,[S("div",o4,[S("h2",s4,[m(T,null,{default:x(()=>[m(kt(s3))]),_:1}),w[46]||(w[46]=F(" 三阶段设计展示 "))]),w[47]||(w[47]=S("p",{class:"section-subtitle"},"系统建设路径与功能规划",-1))]),S("div",l4,[S("div",c4,[S("div",u4,[(J(!0),ht(ye,null,Se(o.value,(R,V)=>(J(),ht("div",{class:ve(["stage-card",[`stage-${V+1}`,{active:n.value===V,"slide-left":n.value>V,"slide-right":n.value<V}]]),key:V},[S("div",h4,[S("div",d4,N(V+1),1),S("div",f4,[S("h3",p4,N(R.title),1),S("p",g4,N(R.subtitle),1)]),S("div",v4,[m(O,{type:R.tagType,size:"small"},{default:x(()=>[F(N(R.status),1)]),_:2},1032,["type"])])]),S("div",m4,[(J(!0),ht(ye,null,Se(R.features,(z,W)=>(J(),ht("div",{class:ve(["compact-module-item",{available:z.available}]),key:W,onClick:it=>z.available&&c(z.path)},[S("div",_4,[m(T,null,{default:x(()=>[(J(),Jt(Fn(z.icon)))]),_:2},1024)]),S("div",b4,[S("h4",x4,N(z.name),1),S("p",S4,N(z.description),1)]),S("div",w4,[m(M,{type:z.available?"primary":"info",disabled:!z.available,size:"small",text:""},{default:x(()=>[F(N(z.available?"进入":"规划中"),1)]),_:2},1032,["type","disabled"])])],10,y4))),128))]),S("div",C4,[S("div",T4,[w[48]||(w[48]=S("span",{class:"progress-label-compact"},"完成度",-1)),S("span",A4,N(R.progress)+"%",1)]),m(C,{percentage:R.progress,color:R.progressColor,"stroke-width":6,"show-text":!1},null,8,["percentage","color"])])],2))),128))]),S("div",k4,[S("div",D4,[(J(!0),ht(ye,null,Se(o.value,(R,V)=>(J(),ht("div",{class:ve(["indicator-dot",{active:n.value===V}]),key:V,onClick:z=>h(V)},null,10,L4))),128))]),S("div",I4,[m(M,{type:"text",disabled:n.value===0,onClick:f,class:"nav-btn"},{default:x(()=>[m(T,null,{default:x(()=>[m(B)]),_:1}),w[49]||(w[49]=F(" 上一阶段 "))]),_:1,__:[49]},8,["disabled"]),m(M,{type:"text",disabled:n.value===o.value.length-1,onClick:d,class:"nav-btn"},{default:x(()=>[w[50]||(w[50]=F(" 下一阶段 ")),m(T,null,{default:x(()=>[m(kt(l3))]),_:1})]),_:1,__:[50]},8,["disabled"])])])])])]),S("div",M4,[S("div",E4,[S("h2",R4,[m(T,null,{default:x(()=>[m(kt(is))]),_:1}),w[51]||(w[51]=F(" QMS AI智能助手 "))]),w[52]||(w[52]=S("p",{class:"section-subtitle"},"核心AI功能与发展规划",-1))]),S("div",P4,[S("div",B4,[S("div",O4,[S("div",N4,[m(T,{class:"header-icon"},{default:x(()=>[m(kt(c3))]),_:1}),w[53]||(w[53]=S("h4",{class:"column-title"},"核心功能",-1))]),S("div",$4,[(J(!0),ht(ye,null,Se(s.value,(R,V)=>(J(),ht("div",{class:"symmetric-card",key:V},[S("div",{class:ve(["card-icon",R.statusClass])},[m(T,null,{default:x(()=>[(J(),Jt(Fn(R.icon)))]),_:2},1024)],2),S("div",F4,[S("h5",z4,N(R.name),1),S("p",V4,N(R.description),1),S("div",G4,[(J(!0),ht(ye,null,Se(R.tags,z=>(J(),ht("span",{class:"tag-item",key:z},N(z),1))),128))])])]))),128))])]),S("div",H4,[S("div",W4,[m(T,{class:"header-icon"},{default:x(()=>[m(kt(xc))]),_:1}),w[54]||(w[54]=S("h4",{class:"column-title"},"发展规划",-1))]),S("div",q4,[(J(!0),ht(ye,null,Se(l.value,(R,V)=>(J(),ht("div",{class:"symmetric-card",key:V},[S("div",{class:ve(["card-icon",R.statusClass])},[m(T,null,{default:x(()=>[(J(),Jt(Fn(R.icon)))]),_:2},1024)],2),S("div",U4,[S("div",j4,[S("h5",Y4,N(R.phase),1),S("span",X4,N(R.timeline),1)]),S("p",Z4,N(R.description),1),S("div",K4,[(J(!0),ht(ye,null,Se(R.goals,z=>(J(),ht("span",{class:"tag-item",key:z},N(z),1))),128))])])]))),128))])])]),S("div",J4,[m(M,{type:"primary",size:"large",onClick:u},{default:x(()=>[m(T,null,{default:x(()=>[m(kt(is))]),_:1}),w[55]||(w[55]=F(" 体验AI助手 "))]),_:1,__:[55]})])])])])}}},tF=ca(Q4,[["__scopeId","data-v-841f9416"]]);var eF=function(e){gt(t,e);function t(){var a=e!==null&&e.apply(this,arguments)||this;return a.type=t.type,a.hasSymbolVisual=!0,a}return t.prototype.getInitialData=function(a){return ai(null,this,{useEncodeDefaulter:!0})},t.prototype.getLegendIcon=function(a){var r=new ie,n=ba("line",0,a.itemHeight/2,a.itemWidth,0,a.lineStyle.stroke,!1);r.add(n),n.setStyle(a.lineStyle);var i=this.getData().getVisual("symbol"),o=this.getData().getVisual("symbolRotate"),s=i==="none"?"circle":i,l=a.itemHeight*.8,c=ba(s,(a.itemWidth-l)/2,(a.itemHeight-l)/2,l,l,a.itemStyle.fill);r.add(c),c.setStyle(a.itemStyle);var u=a.iconRotate==="inherit"?o:a.iconRotate||0;return c.rotation=u*Math.PI/180,c.setOrigin([a.itemWidth/2,a.itemHeight/2]),s.indexOf("empty")>-1&&(c.style.stroke=c.style.fill,c.style.fill="#fff",c.style.lineWidth=2),r},t.type="series.line",t.dependencies=["grid","polar"],t.defaultOption={z:3,coordinateSystem:"cartesian2d",legendHoverLink:!0,clip:!0,label:{position:"top"},endLabel:{show:!1,valueAnimation:!0,distance:8},lineStyle:{width:2,type:"solid"},emphasis:{scale:!0},step:!1,smooth:!1,smoothMonotone:null,symbol:"emptyCircle",symbolSize:4,symbolRotate:null,showSymbol:!0,showAllSymbol:"auto",connectNulls:!1,sampling:"none",animationEasing:"linear",progressive:0,hoverLayerThreshold:1/0,universalTransition:{divideShape:"clone"},triggerLineEvent:!1},t}(ha);function Gs(e,t){var a=e.mapDimensionsAll("defaultedLabel"),r=a.length;if(r===1){var n=X_(e,t,a[0]);return n!=null?n+"":null}else if(r){for(var i=[],o=0;o<a.length;o++)i.push(X_(e,t,a[o]));return i.join(" ")}}function UT(e,t){var a=e.mapDimensionsAll("defaultedLabel");if(!Nt(t))return t+"";for(var r=[],n=0;n<a.length;n++){var i=e.getDimensionIndex(a[n]);i>=0&&r.push(t[i])}return r.join(" ")}var uu=function(e){gt(t,e);function t(a,r,n,i){var o=e.call(this)||this;return o.updateData(a,r,n,i),o}return t.prototype._createSymbol=function(a,r,n,i,o){this.removeAll();var s=ba(a,-1,-1,2,2,null,o);s.attr({z2:100,culling:!0,scaleX:i[0]/2,scaleY:i[1]/2}),s.drift=aF,this._symbolType=a,this.add(s)},t.prototype.stopSymbolAnimation=function(a){this.childAt(0).stopAnimation(null,a)},t.prototype.getSymbolType=function(){return this._symbolType},t.prototype.getSymbolPath=function(){return this.childAt(0)},t.prototype.highlight=function(){Rs(this.childAt(0))},t.prototype.downplay=function(){Ps(this.childAt(0))},t.prototype.setZ=function(a,r){var n=this.childAt(0);n.zlevel=a,n.z=r},t.prototype.setDraggable=function(a,r){var n=this.childAt(0);n.draggable=a,n.cursor=!r&&a?"move":n.cursor},t.prototype.updateData=function(a,r,n,i){this.silent=!1;var o=a.getItemVisual(r,"symbol")||"circle",s=a.hostModel,l=t.getSymbolSize(a,r),c=o!==this._symbolType,u=i&&i.disableAnimation;if(c){var h=a.getItemVisual(r,"symbolKeepAspect");this._createSymbol(o,a,r,l,h)}else{var d=this.childAt(0);d.silent=!1;var f={scaleX:l[0]/2,scaleY:l[1]/2};u?d.attr(f):ze(d,f,s,r),Yr(d)}if(this._updateCommon(a,r,l,n,i),c){var d=this.childAt(0);if(!u){var f={scaleX:this._sizeX,scaleY:this._sizeY,style:{opacity:d.style.opacity}};d.scaleX=d.scaleY=0,d.style.opacity=0,la(d,f,s,r)}}u&&this.childAt(0).stopAnimation("leave")},t.prototype._updateCommon=function(a,r,n,i,o){var s=this.childAt(0),l=a.hostModel,c,u,h,d,f,p,g,v,_;if(i&&(c=i.emphasisItemStyle,u=i.blurItemStyle,h=i.selectItemStyle,d=i.focus,f=i.blurScope,g=i.labelStatesModels,v=i.hoverScale,_=i.cursorStyle,p=i.emphasisDisabled),!i||a.hasItemOption){var y=i&&i.itemModel?i.itemModel:a.getItemModel(r),b=y.getModel("emphasis");c=b.getModel("itemStyle").getItemStyle(),h=y.getModel(["select","itemStyle"]).getItemStyle(),u=y.getModel(["blur","itemStyle"]).getItemStyle(),d=b.get("focus"),f=b.get("blurScope"),p=b.get("disabled"),g=Aa(y),v=b.getShallow("scale"),_=y.getShallow("cursor")}var w=a.getItemVisual(r,"symbolRotate");s.attr("rotation",(w||0)*Math.PI/180||0);var T=Oo(a.getItemVisual(r,"symbolOffset"),n);T&&(s.x=T[0],s.y=T[1]),_&&s.attr("cursor",_);var C=a.getItemVisual(r,"style"),A=C.fill;if(s instanceof Zr){var k=s.style;s.useStyle(Vt({image:k.image,x:k.x,y:k.y,width:k.width,height:k.height},C))}else s.__isEmptyBrush?s.useStyle(Vt({},C)):s.useStyle(C),s.style.decal=null,s.setColor(A,o&&o.symbolInnerColor),s.style.strokeNoScale=!0;var L=a.getItemVisual(r,"liftZ"),M=this._z2;L!=null?M==null&&(this._z2=s.z2,s.z2+=L):M!=null&&(s.z2=M,this._z2=null);var P=o&&o.useNameLabel;Fa(s,g,{labelFetcher:l,labelDataIndex:r,defaultText:E,inheritColor:A,defaultOpacity:C.opacity});function E(B){return P?a.getName(B):Gs(a,B)}this._sizeX=n[0]/2,this._sizeY=n[1]/2;var D=s.ensureState("emphasis");D.style=c,s.ensureState("select").style=h,s.ensureState("blur").style=u;var O=v==null||v===!0?Math.max(1.1,3/this._sizeY):isFinite(v)&&v>0?+v:1;D.scaleX=this._sizeX*O,D.scaleY=this._sizeY*O,this.setSymbolScale(1),Qe(this,d,f,p)},t.prototype.setSymbolScale=function(a){this.scaleX=this.scaleY=a},t.prototype.fadeOut=function(a,r,n){var i=this.childAt(0),o=Ae(this).dataIndex,s=n&&n.animation;if(this.silent=i.silent=!0,n&&n.fadeLabel){var l=i.getTextContent();l&&Bs(l,{style:{opacity:0}},r,{dataIndex:o,removeOpt:s,cb:function(){i.removeTextContent()}})}else i.removeTextContent();Bs(i,{style:{opacity:0},scaleX:0,scaleY:0},r,{dataIndex:o,cb:a,removeOpt:s})},t.getSymbolSize=function(a,r){return il(a.getItemVisual(r,"symbolSize"))},t}(ie);function aF(e,t){this.parent.drift(e,t)}function bp(e,t,a,r){return t&&!isNaN(t[0])&&!isNaN(t[1])&&!(r.isIgnore&&r.isIgnore(a))&&!(r.clipShape&&!r.clipShape.contain(t[0],t[1]))&&e.getItemVisual(a,"symbol")!=="none"}function E1(e){return e!=null&&!na(e)&&(e={isIgnore:e}),e||{}}function R1(e){var t=e.hostModel,a=t.getModel("emphasis");return{emphasisItemStyle:a.getModel("itemStyle").getItemStyle(),blurItemStyle:t.getModel(["blur","itemStyle"]).getItemStyle(),selectItemStyle:t.getModel(["select","itemStyle"]).getItemStyle(),focus:a.get("focus"),blurScope:a.get("blurScope"),emphasisDisabled:a.get("disabled"),hoverScale:a.get("scale"),labelStatesModels:Aa(t),cursorStyle:t.get("cursor")}}var hu=function(){function e(t){this.group=new ie,this._SymbolCtor=t||uu}return e.prototype.updateData=function(t,a){this._progressiveEls=null,a=E1(a);var r=this.group,n=t.hostModel,i=this._data,o=this._SymbolCtor,s=a.disableAnimation,l=R1(t),c={disableAnimation:s},u=a.getSymbolPoint||function(h){return t.getItemLayout(h)};i||r.removeAll(),t.diff(i).add(function(h){var d=u(h);if(bp(t,d,h,a)){var f=new o(t,h,l,c);f.setPosition(d),t.setItemGraphicEl(h,f),r.add(f)}}).update(function(h,d){var f=i.getItemGraphicEl(d),p=u(h);if(!bp(t,p,h,a)){r.remove(f);return}var g=t.getItemVisual(h,"symbol")||"circle",v=f&&f.getSymbolType&&f.getSymbolType();if(!f||v&&v!==g)r.remove(f),f=new o(t,h,l,c),f.setPosition(p);else{f.updateData(t,h,l,c);var _={x:p[0],y:p[1]};s?f.attr(_):ze(f,_,n)}r.add(f),t.setItemGraphicEl(h,f)}).remove(function(h){var d=i.getItemGraphicEl(h);d&&d.fadeOut(function(){r.remove(d)},n)}).execute(),this._getSymbolPoint=u,this._data=t},e.prototype.updateLayout=function(){var t=this,a=this._data;a&&a.eachItemGraphicEl(function(r,n){var i=t._getSymbolPoint(n);r.setPosition(i),r.markRedraw()})},e.prototype.incrementalPrepareUpdate=function(t){this._seriesScope=R1(t),this._data=null,this.group.removeAll()},e.prototype.incrementalUpdate=function(t,a,r){this._progressiveEls=[],r=E1(r);function n(l){l.isGroup||(l.incremental=!0,l.ensureState("emphasis").hoverLayer=!0)}for(var i=t.start;i<t.end;i++){var o=a.getItemLayout(i);if(bp(a,o,i,r)){var s=new this._SymbolCtor(a,i,this._seriesScope);s.traverse(n),s.setPosition(o),this.group.add(s),a.setItemGraphicEl(i,s),this._progressiveEls.push(s)}}},e.prototype.eachRendered=function(t){ol(this._progressiveEls||this.group,t)},e.prototype.remove=function(t){var a=this.group,r=this._data;r&&t?r.eachItemGraphicEl(function(n){n.fadeOut(function(){a.remove(n)},r.hostModel)}):a.removeAll()},e}();function jT(e,t,a){var r=e.getBaseAxis(),n=e.getOtherAxis(r),i=rF(n,a),o=r.dim,s=n.dim,l=t.mapDimension(s),c=t.mapDimension(o),u=s==="x"||s==="radius"?1:0,h=Ot(e.dimensions,function(p){return t.mapDimension(p)}),d=!1,f=t.getCalculationInfo("stackResultDimension");return Os(t,h[0])&&(d=!0,h[0]=f),Os(t,h[1])&&(d=!0,h[1]=f),{dataDimsForPoint:h,valueStart:i,valueAxisDim:s,baseAxisDim:o,stacked:!!d,valueDim:l,baseDim:c,baseDataOffset:u,stackedOverDimension:t.getCalculationInfo("stackedOverDimension")}}function rF(e,t){var a=0,r=e.scale.getExtent();return t==="start"?a=r[0]:t==="end"?a=r[1]:Ea(t)&&!isNaN(t)?a=t:r[0]>0?a=r[0]:r[1]<0&&(a=r[1]),a}function YT(e,t,a,r){var n=NaN;e.stacked&&(n=a.get(a.getCalculationInfo("stackedOverDimension"),r)),isNaN(n)&&(n=e.valueStart);var i=e.baseDataOffset,o=[];return o[i]=a.get(e.baseDim,r),o[1-i]=n,t.dataToPoint(o)}function nF(e,t){var a=[];return t.diff(e).add(function(r){a.push({cmd:"+",idx:r})}).update(function(r,n){a.push({cmd:"=",idx:n,idx1:r})}).remove(function(r){a.push({cmd:"-",idx:r})}).execute(),a}function iF(e,t,a,r,n,i,o,s){for(var l=nF(e,t),c=[],u=[],h=[],d=[],f=[],p=[],g=[],v=jT(n,t,o),_=e.getLayout("points")||[],y=t.getLayout("points")||[],b=0;b<l.length;b++){var w=l[b],T=!0,C=void 0,A=void 0;switch(w.cmd){case"=":C=w.idx*2,A=w.idx1*2;var k=_[C],L=_[C+1],M=y[A],P=y[A+1];(isNaN(k)||isNaN(L))&&(k=M,L=P),c.push(k,L),u.push(M,P),h.push(a[C],a[C+1]),d.push(r[A],r[A+1]),g.push(t.getRawIndex(w.idx1));break;case"+":var E=w.idx,D=v.dataDimsForPoint,O=n.dataToPoint([t.get(D[0],E),t.get(D[1],E)]);A=E*2,c.push(O[0],O[1]),u.push(y[A],y[A+1]);var B=YT(v,n,t,E);h.push(B[0],B[1]),d.push(r[A],r[A+1]),g.push(t.getRawIndex(E));break;case"-":T=!1}T&&(f.push(w),p.push(p.length))}p.sort(function(Tt,Mt){return g[Tt]-g[Mt]});for(var R=c.length,V=oo(R),z=oo(R),W=oo(R),it=oo(R),ot=[],b=0;b<p.length;b++){var xt=p[b],j=b*2,mt=xt*2;V[j]=c[mt],V[j+1]=c[mt+1],z[j]=u[mt],z[j+1]=u[mt+1],W[j]=h[mt],W[j+1]=h[mt+1],it[j]=d[mt],it[j+1]=d[mt+1],ot[b]=f[xt]}return{current:V,next:z,stackedOnCurrent:W,stackedOnNext:it,status:ot}}var li=Math.min,ci=Math.max;function yo(e,t){return isNaN(e)||isNaN(t)}function yv(e,t,a,r,n,i,o,s,l){for(var c,u,h,d,f,p,g=a,v=0;v<r;v++){var _=t[g*2],y=t[g*2+1];if(g>=n||g<0)break;if(yo(_,y)){if(l){g+=i;continue}break}if(g===a)e[i>0?"moveTo":"lineTo"](_,y),h=_,d=y;else{var b=_-c,w=y-u;if(b*b+w*w<.5){g+=i;continue}if(o>0){for(var T=g+i,C=t[T*2],A=t[T*2+1];C===_&&A===y&&v<r;)v++,T+=i,g+=i,C=t[T*2],A=t[T*2+1],_=t[g*2],y=t[g*2+1],b=_-c,w=y-u;var k=v+1;if(l)for(;yo(C,A)&&k<r;)k++,T+=i,C=t[T*2],A=t[T*2+1];var L=.5,M=0,P=0,E=void 0,D=void 0;if(k>=r||yo(C,A))f=_,p=y;else{M=C-c,P=A-u;var O=_-c,B=C-_,R=y-u,V=A-y,z=void 0,W=void 0;if(s==="x"){z=Math.abs(O),W=Math.abs(B);var it=M>0?1:-1;f=_-it*z*o,p=y,E=_+it*W*o,D=y}else if(s==="y"){z=Math.abs(R),W=Math.abs(V);var ot=P>0?1:-1;f=_,p=y-ot*z*o,E=_,D=y+ot*W*o}else z=Math.sqrt(O*O+R*R),W=Math.sqrt(B*B+V*V),L=W/(W+z),f=_-M*o*(1-L),p=y-P*o*(1-L),E=_+M*o*L,D=y+P*o*L,E=li(E,ci(C,_)),D=li(D,ci(A,y)),E=ci(E,li(C,_)),D=ci(D,li(A,y)),M=E-_,P=D-y,f=_-M*z/W,p=y-P*z/W,f=li(f,ci(c,_)),p=li(p,ci(u,y)),f=ci(f,li(c,_)),p=ci(p,li(u,y)),M=_-f,P=y-p,E=_+M*W/z,D=y+P*W/z}e.bezierCurveTo(h,d,f,p,_,y),h=E,d=D}else e.lineTo(_,y)}c=_,u=y,g+=i}return v}var XT=function(){function e(){this.smooth=0,this.smoothConstraint=!0}return e}(),oF=function(e){gt(t,e);function t(a){var r=e.call(this,a)||this;return r.type="ec-polyline",r}return t.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},t.prototype.getDefaultShape=function(){return new XT},t.prototype.buildPath=function(a,r){var n=r.points,i=0,o=n.length/2;if(r.connectNulls){for(;o>0&&yo(n[o*2-2],n[o*2-1]);o--);for(;i<o&&yo(n[i*2],n[i*2+1]);i++);}for(;i<o;)i+=yv(a,n,i,o,o,1,r.smooth,r.smoothMonotone,r.connectNulls)+1},t.prototype.getPointOn=function(a,r){this.path||(this.createPathProxy(),this.buildPath(this.path,this.shape));for(var n=this.path,i=n.data,o=cy.CMD,s,l,c=r==="x",u=[],h=0;h<i.length;){var d=i[h++],f=void 0,p=void 0,g=void 0,v=void 0,_=void 0,y=void 0,b=void 0;switch(d){case o.M:s=i[h++],l=i[h++];break;case o.L:if(f=i[h++],p=i[h++],b=c?(a-s)/(f-s):(a-l)/(p-l),b<=1&&b>=0){var w=c?(p-l)*b+l:(f-s)*b+s;return c?[a,w]:[w,a]}s=f,l=p;break;case o.C:f=i[h++],p=i[h++],g=i[h++],v=i[h++],_=i[h++],y=i[h++];var T=c?Z_(s,f,g,_,a,u):Z_(l,p,v,y,a,u);if(T>0)for(var C=0;C<T;C++){var A=u[C];if(A<=1&&A>=0){var w=c?K_(l,p,v,y,A):K_(s,f,g,_,A);return c?[a,w]:[w,a]}}s=_,l=y;break}}},t}(va),sF=function(e){gt(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t}(XT),ZT=function(e){gt(t,e);function t(a){var r=e.call(this,a)||this;return r.type="ec-polygon",r}return t.prototype.getDefaultShape=function(){return new sF},t.prototype.buildPath=function(a,r){var n=r.points,i=r.stackedOnPoints,o=0,s=n.length/2,l=r.smoothMonotone;if(r.connectNulls){for(;s>0&&yo(n[s*2-2],n[s*2-1]);s--);for(;o<s&&yo(n[o*2],n[o*2+1]);o++);}for(;o<s;){var c=yv(a,n,o,s,s,1,r.smooth,l,r.connectNulls);yv(a,i,o+c-1,c,s,-1,r.stackedOnSmooth,l,r.connectNulls),o+=c+1,a.closePath()}},t}(va);function KT(e,t,a,r,n){var i=e.getArea(),o=i.x,s=i.y,l=i.width,c=i.height,u=a.get(["lineStyle","width"])||0;o-=u/2,s-=u/2,l+=u,c+=u,l=Math.ceil(l),o!==Math.floor(o)&&(o=Math.floor(o),l++);var h=new Ge({shape:{x:o,y:s,width:l,height:c}});if(t){var d=e.getBaseAxis(),f=d.isHorizontal(),p=d.inverse;f?(p&&(h.shape.x+=l),h.shape.width=0):(p||(h.shape.y+=c),h.shape.height=0);var g=Me(n)?function(v){n(v,h)}:null;la(h,{shape:{width:l,height:c,x:o,y:s}},a,null,r,g)}return h}function JT(e,t,a){var r=e.getArea(),n=_n(r.r0,1),i=_n(r.r,1),o=new Pr({shape:{cx:_n(e.cx,1),cy:_n(e.cy,1),r0:n,r:i,startAngle:r.startAngle,endAngle:r.endAngle,clockwise:r.clockwise}});if(t){var s=e.getBaseAxis().dim==="angle";s?o.shape.endAngle=r.startAngle:o.shape.r=n,la(o,{shape:{endAngle:r.endAngle,r:i}},a)}return o}function du(e,t,a,r,n){if(e){if(e.type==="polar")return JT(e,t,a);if(e.type==="cartesian2d")return KT(e,t,a,r,n)}else return null;return null}function Fo(e,t){return e.type===t}function P1(e,t){if(e.length===t.length){for(var a=0;a<e.length;a++)if(e[a]!==t[a])return;return!0}}function B1(e){for(var t=1/0,a=1/0,r=-1/0,n=-1/0,i=0;i<e.length;){var o=e[i++],s=e[i++];isNaN(o)||(t=Math.min(o,t),r=Math.max(o,r)),isNaN(s)||(a=Math.min(s,a),n=Math.max(s,n))}return[[t,a],[r,n]]}function O1(e,t){var a=B1(e),r=a[0],n=a[1],i=B1(t),o=i[0],s=i[1];return Math.max(Math.abs(r[0]-o[0]),Math.abs(r[1]-o[1]),Math.abs(n[0]-s[0]),Math.abs(n[1]-s[1]))}function N1(e){return Ea(e)?e:e?.5:0}function lF(e,t,a){if(!a.valueDim)return[];for(var r=t.count(),n=oo(r*2),i=0;i<r;i++){var o=YT(a,e,t,i);n[i*2]=o[0],n[i*2+1]=o[1]}return n}function ui(e,t,a,r,n){var i=a.getBaseAxis(),o=i.dim==="x"||i.dim==="radius"?0:1,s=[],l=0,c=[],u=[],h=[],d=[];if(n){for(l=0;l<e.length;l+=2){var f=t||e;!isNaN(f[l])&&!isNaN(f[l+1])&&d.push(e[l],e[l+1])}e=d}for(l=0;l<e.length-2;l+=2)switch(h[0]=e[l+2],h[1]=e[l+3],u[0]=e[l],u[1]=e[l+1],s.push(u[0],u[1]),r){case"end":c[o]=h[o],c[1-o]=u[1-o],s.push(c[0],c[1]);break;case"middle":var p=(u[o]+h[o])/2,g=[];c[o]=g[o]=p,c[1-o]=u[1-o],g[1-o]=h[1-o],s.push(c[0],c[1]),s.push(g[0],g[1]);break;default:c[o]=u[o],c[1-o]=h[1-o],s.push(c[0],c[1])}return s.push(e[l++],e[l++]),s}function cF(e,t){var a=[],r=e.length,n,i;function o(u,h,d){var f=u.coord,p=(d-f)/(h.coord-f),g=F3(p,[u.color,h.color]);return{coord:d,color:g}}for(var s=0;s<r;s++){var l=e[s],c=l.coord;if(c<0)n=l;else if(c>t){i?a.push(o(i,l,t)):n&&a.push(o(n,l,0),o(n,l,t));break}else n&&(a.push(o(n,l,0)),n=null),a.push(l),i=l}return a}function uF(e,t,a){var r=e.getVisual("visualMeta");if(!(!r||!r.length||!e.count())&&t.type==="cartesian2d"){for(var n,i,o=r.length-1;o>=0;o--){var s=e.getDimensionInfo(r[o].dimension);if(n=s&&s.coordDim,n==="x"||n==="y"){i=r[o];break}}if(i){var l=t.getAxis(n),c=Ot(i.stops,function(b){return{coord:l.toGlobalCoord(l.dataToCoord(b.value)),color:b.color}}),u=c.length,h=i.outerColors.slice();u&&c[0].coord>c[u-1].coord&&(c.reverse(),h.reverse());var d=cF(c,n==="x"?a.getWidth():a.getHeight()),f=d.length;if(!f&&u)return c[0].coord<0?h[1]?h[1]:c[u-1].color:h[0]?h[0]:c[0].color;var p=10,g=d[0].coord-p,v=d[f-1].coord+p,_=v-g;if(_<.001)return"transparent";G(d,function(b){b.offset=(b.coord-g)/_}),d.push({offset:f?d[f-1].offset:.5,color:h[1]||"transparent"}),d.unshift({offset:f?d[0].offset:.5,color:h[0]||"transparent"});var y=new Wn(0,0,0,0,d,!0);return y[n]=g,y[n+"2"]=v,y}}}function hF(e,t,a){var r=e.get("showAllSymbol"),n=r==="auto";if(!(r&&!n)){var i=a.getAxesByScale("ordinal")[0];if(i&&!(n&&dF(i,t))){var o=t.mapDimension(i.dim),s={};return G(i.getViewLabels(),function(l){var c=i.scale.getRawOrdinalNumber(l.tickValue);s[c]=1}),function(l){return!s.hasOwnProperty(t.get(o,l))}}}}function dF(e,t){var a=e.getExtent(),r=Math.abs(a[1]-a[0])/e.scale.count();isNaN(r)&&(r=0);for(var n=t.count(),i=Math.max(1,Math.round(n/5)),o=0;o<n;o+=i)if(uu.getSymbolSize(t,o)[e.isHorizontal()?1:0]*1.5>r)return!1;return!0}function fF(e,t){return isNaN(e)||isNaN(t)}function pF(e){for(var t=e.length/2;t>0&&fF(e[t*2-2],e[t*2-1]);t--);return t-1}function $1(e,t){return[e[t*2],e[t*2+1]]}function gF(e,t,a){for(var r=e.length/2,n=a==="x"?0:1,i,o,s=0,l=-1,c=0;c<r;c++)if(o=e[c*2+n],!(isNaN(o)||isNaN(e[c*2+1-n]))){if(c===0){i=o;continue}if(i<=t&&o>=t||i>=t&&o<=t){l=c;break}s=c,i=o}return{range:[s,l],t:(t-i)/(o-i)}}function QT(e){if(e.get(["endLabel","show"]))return!0;for(var t=0;t<Tc.length;t++)if(e.get([Tc[t],"endLabel","show"]))return!0;return!1}function xp(e,t,a,r){if(Fo(t,"cartesian2d")){var n=r.getModel("endLabel"),i=n.get("valueAnimation"),o=r.getData(),s={lastFrameIndex:0},l=QT(r)?function(f,p){e._endLabelOnDuring(f,p,o,s,i,n,t)}:null,c=t.getBaseAxis().isHorizontal(),u=KT(t,a,r,function(){var f=e._endLabel;f&&a&&s.originalX!=null&&f.attr({x:s.originalX,y:s.originalY})},l);if(!r.get("clip",!0)){var h=u.shape,d=Math.max(h.width,h.height);c?(h.y-=d,h.height+=d*2):(h.x-=d,h.width+=d*2)}return l&&l(1,u),u}else return JT(t,a,r)}function vF(e,t){var a=t.getBaseAxis(),r=a.isHorizontal(),n=a.inverse,i=r?n?"right":"left":"center",o=r?"middle":n?"top":"bottom";return{normal:{align:e.get("align")||i,verticalAlign:e.get("verticalAlign")||o}}}var mF=function(e){gt(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.init=function(){var a=new ie,r=new hu;this.group.add(r.group),this._symbolDraw=r,this._lineGroup=a,this._changePolyState=Ut(this._changePolyState,this)},t.prototype.render=function(a,r,n){var i=a.coordinateSystem,o=this.group,s=a.getData(),l=a.getModel("lineStyle"),c=a.getModel("areaStyle"),u=s.getLayout("points")||[],h=i.type==="polar",d=this._coordSys,f=this._symbolDraw,p=this._polyline,g=this._polygon,v=this._lineGroup,_=!r.ssr&&a.get("animation"),y=!c.isEmpty(),b=c.get("origin"),w=jT(i,s,b),T=y&&lF(i,s,w),C=a.get("showSymbol"),A=a.get("connectNulls"),k=C&&!h&&hF(a,s,i),L=this._data;L&&L.eachItemGraphicEl(function(Tt,Mt){Tt.__temp&&(o.remove(Tt),L.setItemGraphicEl(Mt,null))}),C||f.remove(),o.add(v);var M=h?!1:a.get("step"),P;i&&i.getArea&&a.get("clip",!0)&&(P=i.getArea(),P.width!=null?(P.x-=.1,P.y-=.1,P.width+=.2,P.height+=.2):P.r0&&(P.r0-=.5,P.r+=.5)),this._clipShapeForSymbol=P;var E=uF(s,i,n)||s.getVisual("style")[s.getVisual("drawType")];if(!(p&&d.type===i.type&&M===this._step))C&&f.updateData(s,{isIgnore:k,clipShape:P,disableAnimation:!0,getSymbolPoint:function(Tt){return[u[Tt*2],u[Tt*2+1]]}}),_&&this._initSymbolLabelAnimation(s,i,P),M&&(T&&(T=ui(T,u,i,M,A)),u=ui(u,null,i,M,A)),p=this._newPolyline(u),y?g=this._newPolygon(u,T):g&&(v.remove(g),g=this._polygon=null),h||this._initOrUpdateEndLabel(a,i,Ns(E)),v.setClipPath(xp(this,i,!0,a));else{y&&!g?g=this._newPolygon(u,T):g&&!y&&(v.remove(g),g=this._polygon=null),h||this._initOrUpdateEndLabel(a,i,Ns(E));var D=v.getClipPath();if(D){var O=xp(this,i,!1,a);la(D,{shape:O.shape},a)}else v.setClipPath(xp(this,i,!0,a));C&&f.updateData(s,{isIgnore:k,clipShape:P,disableAnimation:!0,getSymbolPoint:function(Tt){return[u[Tt*2],u[Tt*2+1]]}}),(!P1(this._stackedOnPoints,T)||!P1(this._points,u))&&(_?this._doUpdateAnimation(s,T,i,n,M,b,A):(M&&(T&&(T=ui(T,u,i,M,A)),u=ui(u,null,i,M,A)),p.setShape({points:u}),g&&g.setShape({points:u,stackedOnPoints:T})))}var B=a.getModel("emphasis"),R=B.get("focus"),V=B.get("blurScope"),z=B.get("disabled");if(p.useStyle(_e(l.getLineStyle(),{fill:"none",stroke:E,lineJoin:"bevel"})),za(p,a,"lineStyle"),p.style.lineWidth>0&&a.get(["emphasis","lineStyle","width"])==="bolder"){var W=p.getState("emphasis").style;W.lineWidth=+p.style.lineWidth+1}Ae(p).seriesIndex=a.seriesIndex,Qe(p,R,V,z);var it=N1(a.get("smooth")),ot=a.get("smoothMonotone");if(p.setShape({smooth:it,smoothMonotone:ot,connectNulls:A}),g){var xt=s.getCalculationInfo("stackedOnSeries"),j=0;g.useStyle(_e(c.getAreaStyle(),{fill:E,opacity:.7,lineJoin:"bevel",decal:s.getVisual("style").decal})),xt&&(j=N1(xt.get("smooth"))),g.setShape({smooth:it,stackedOnSmooth:j,smoothMonotone:ot,connectNulls:A}),za(g,a,"areaStyle"),Ae(g).seriesIndex=a.seriesIndex,Qe(g,R,V,z)}var mt=this._changePolyState;s.eachItemGraphicEl(function(Tt){Tt&&(Tt.onHoverStateChange=mt)}),this._polyline.onHoverStateChange=mt,this._data=s,this._coordSys=i,this._stackedOnPoints=T,this._points=u,this._step=M,this._valueOrigin=b,a.get("triggerLineEvent")&&(this.packEventData(a,p),g&&this.packEventData(a,g))},t.prototype.packEventData=function(a,r){Ae(r).eventData={componentType:"series",componentSubType:"line",componentIndex:a.componentIndex,seriesIndex:a.seriesIndex,seriesName:a.name,seriesType:"line"}},t.prototype.highlight=function(a,r,n,i){var o=a.getData(),s=iv(o,i);if(this._changePolyState("emphasis"),!(s instanceof Array)&&s!=null&&s>=0){var l=o.getLayout("points"),c=o.getItemGraphicEl(s);if(!c){var u=l[s*2],h=l[s*2+1];if(isNaN(u)||isNaN(h)||this._clipShapeForSymbol&&!this._clipShapeForSymbol.contain(u,h))return;var d=a.get("zlevel")||0,f=a.get("z")||0;c=new uu(o,s),c.x=u,c.y=h,c.setZ(d,f);var p=c.getSymbolPath().getTextContent();p&&(p.zlevel=d,p.z=f,p.z2=this._polyline.z2+1),c.__temp=!0,o.setItemGraphicEl(s,c),c.stopSymbolAnimation(!0),this.group.add(c)}c.highlight()}else ra.prototype.highlight.call(this,a,r,n,i)},t.prototype.downplay=function(a,r,n,i){var o=a.getData(),s=iv(o,i);if(this._changePolyState("normal"),s!=null&&s>=0){var l=o.getItemGraphicEl(s);l&&(l.__temp?(o.setItemGraphicEl(s,null),this.group.remove(l)):l.downplay())}else ra.prototype.downplay.call(this,a,r,n,i)},t.prototype._changePolyState=function(a){var r=this._polygon;qh(this._polyline,a),r&&qh(r,a)},t.prototype._newPolyline=function(a){var r=this._polyline;return r&&this._lineGroup.remove(r),r=new oF({shape:{points:a},segmentIgnoreThreshold:2,z2:10}),this._lineGroup.add(r),this._polyline=r,r},t.prototype._newPolygon=function(a,r){var n=this._polygon;return n&&this._lineGroup.remove(n),n=new ZT({shape:{points:a,stackedOnPoints:r},segmentIgnoreThreshold:2}),this._lineGroup.add(n),this._polygon=n,n},t.prototype._initSymbolLabelAnimation=function(a,r,n){var i,o,s=r.getBaseAxis(),l=s.inverse;r.type==="cartesian2d"?(i=s.isHorizontal(),o=!1):r.type==="polar"&&(i=s.dim==="angle",o=!0);var c=a.hostModel,u=c.get("animationDuration");Me(u)&&(u=u(null));var h=c.get("animationDelay")||0,d=Me(h)?h(null):h;a.eachItemGraphicEl(function(f,p){var g=f;if(g){var v=[f.x,f.y],_=void 0,y=void 0,b=void 0;if(n)if(o){var w=n,T=r.pointToCoord(v);i?(_=w.startAngle,y=w.endAngle,b=-T[1]/180*Math.PI):(_=w.r0,y=w.r,b=T[0])}else{var C=n;i?(_=C.x,y=C.x+C.width,b=f.x):(_=C.y+C.height,y=C.y,b=f.y)}var A=y===_?0:(b-_)/(y-_);l&&(A=1-A);var k=Me(h)?h(p):u*A+d,L=g.getSymbolPath(),M=L.getTextContent();g.attr({scaleX:0,scaleY:0}),g.animateTo({scaleX:1,scaleY:1},{duration:200,setToFinal:!0,delay:k}),M&&M.animateFrom({style:{opacity:0}},{duration:300,delay:k}),L.disableLabelAnimation=!0}})},t.prototype._initOrUpdateEndLabel=function(a,r,n){var i=a.getModel("endLabel");if(QT(a)){var o=a.getData(),s=this._polyline,l=o.getLayout("points");if(!l){s.removeTextContent(),this._endLabel=null;return}var c=this._endLabel;c||(c=this._endLabel=new Oe({z2:200}),c.ignoreClip=!0,s.setTextContent(this._endLabel),s.disableLabelAnimation=!0);var u=pF(l);u>=0&&(Fa(s,Aa(a,"endLabel"),{inheritColor:n,labelFetcher:a,labelDataIndex:u,defaultText:function(h,d,f){return f!=null?UT(o,f):Gs(o,h)},enableTextSetter:!0},vF(i,r)),s.textConfig.position=null)}else this._endLabel&&(this._polyline.removeTextContent(),this._endLabel=null)},t.prototype._endLabelOnDuring=function(a,r,n,i,o,s,l){var c=this._endLabel,u=this._polyline;if(c){a<1&&i.originalX==null&&(i.originalX=c.x,i.originalY=c.y);var h=n.getLayout("points"),d=n.hostModel,f=d.get("connectNulls"),p=s.get("precision"),g=s.get("distance")||0,v=l.getBaseAxis(),_=v.isHorizontal(),y=v.inverse,b=r.shape,w=y?_?b.x:b.y+b.height:_?b.x+b.width:b.y,T=(_?g:0)*(y?-1:1),C=(_?0:-g)*(y?-1:1),A=_?"x":"y",k=gF(h,w,A),L=k.range,M=L[1]-L[0],P=void 0;if(M>=1){if(M>1&&!f){var E=$1(h,L[0]);c.attr({x:E[0]+T,y:E[1]+C}),o&&(P=d.getRawValue(L[0]))}else{var E=u.getPointOn(w,A);E&&c.attr({x:E[0]+T,y:E[1]+C});var D=d.getRawValue(L[0]),O=d.getRawValue(L[1]);o&&(P=$3(n,p,D,O,k.t))}i.lastFrameIndex=L[0]}else{var B=a===1||i.lastFrameIndex>0?L[0]:0,E=$1(h,B);o&&(P=d.getRawValue(B)),c.attr({x:E[0]+T,y:E[1]+C})}if(o){var R=jC(c);typeof R.setLabelText=="function"&&R.setLabelText(P)}}},t.prototype._doUpdateAnimation=function(a,r,n,i,o,s,l){var c=this._polyline,u=this._polygon,h=a.hostModel,d=iF(this._data,a,this._stackedOnPoints,r,this._coordSys,n,this._valueOrigin),f=d.current,p=d.stackedOnCurrent,g=d.next,v=d.stackedOnNext;if(o&&(p=ui(d.stackedOnCurrent,d.current,n,o,l),f=ui(d.current,null,n,o,l),v=ui(d.stackedOnNext,d.next,n,o,l),g=ui(d.next,null,n,o,l)),O1(f,g)>3e3||u&&O1(p,v)>3e3){c.stopAnimation(),c.setShape({points:g}),u&&(u.stopAnimation(),u.setShape({points:g,stackedOnPoints:v}));return}c.shape.__points=d.current,c.shape.points=f;var _={shape:{points:g}};d.current!==f&&(_.shape.__points=d.next),c.stopAnimation(),ze(c,_,h),u&&(u.setShape({points:f,stackedOnPoints:p}),u.stopAnimation(),ze(u,{shape:{stackedOnPoints:v}},h),c.shape.points!==u.shape.points&&(u.shape.points=c.shape.points));for(var y=[],b=d.status,w=0;w<b.length;w++){var T=b[w].cmd;if(T==="="){var C=a.getItemGraphicEl(b[w].idx1);C&&y.push({el:C,ptIdx:w})}}c.animators&&c.animators.length&&c.animators[0].during(function(){u&&u.dirtyShape();for(var A=c.shape.__points,k=0;k<y.length;k++){var L=y[k].el,M=y[k].ptIdx*2;L.x=A[M],L.y=A[M+1],L.markRedraw()}})},t.prototype.remove=function(a){var r=this.group,n=this._data;this._lineGroup.removeAll(),this._symbolDraw.remove(!0),n&&n.eachItemGraphicEl(function(i,o){i.__temp&&(r.remove(i),n.setItemGraphicEl(o,null))}),this._polyline=this._polygon=this._coordSys=this._points=this._stackedOnPoints=this._endLabel=this._data=null},t.type="line",t}(ra);function fu(e,t){return{seriesType:e,plan:of(),reset:function(a){var r=a.getData(),n=a.coordinateSystem,i=a.pipelineContext,o=t||i.large;if(n){var s=Ot(n.dimensions,function(f){return r.mapDimension(f)}).slice(0,2),l=s.length,c=r.getCalculationInfo("stackResultDimension");Os(r,s[0])&&(s[0]=c),Os(r,s[1])&&(s[1]=c);var u=r.getStore(),h=r.getDimensionIndex(s[0]),d=r.getDimensionIndex(s[1]);return l&&{progress:function(f,p){for(var g=f.end-f.start,v=o&&oo(g*l),_=[],y=[],b=f.start,w=0;b<f.end;b++){var T=void 0;if(l===1){var C=u.get(h,b);T=n.dataToPoint(C,null,y)}else _[0]=u.get(h,b),_[1]=u.get(d,b),T=n.dataToPoint(_,null,y);o?(v[w++]=T[0],v[w++]=T[1]):p.setItemLayout(b,T.slice())}o&&p.setLayout("points",v)}}}}}}var yF={average:function(e){for(var t=0,a=0,r=0;r<e.length;r++)isNaN(e[r])||(t+=e[r],a++);return a===0?NaN:t/a},sum:function(e){for(var t=0,a=0;a<e.length;a++)t+=e[a]||0;return t},max:function(e){for(var t=-1/0,a=0;a<e.length;a++)e[a]>t&&(t=e[a]);return isFinite(t)?t:NaN},min:function(e){for(var t=1/0,a=0;a<e.length;a++)e[a]<t&&(t=e[a]);return isFinite(t)?t:NaN},nearest:function(e){return e[0]}},_F=function(e){return Math.round(e.length/2)};function tA(e){return{seriesType:e,reset:function(t,a,r){var n=t.getData(),i=t.get("sampling"),o=t.coordinateSystem,s=n.count();if(s>10&&o.type==="cartesian2d"&&i){var l=o.getBaseAxis(),c=o.getOtherAxis(l),u=l.getExtent(),h=r.getDevicePixelRatio(),d=Math.abs(u[1]-u[0])*(h||1),f=Math.round(s/d);if(isFinite(f)&&f>1){i==="lttb"?t.setData(n.lttbDownSample(n.mapDimension(c.dim),1/f)):i==="minmax"&&t.setData(n.minmaxDownSample(n.mapDimension(c.dim),1/f));var p=void 0;ge(i)?p=yF[i]:Me(i)&&(p=i),p&&t.setData(n.downSample(n.mapDimension(c.dim),1/f,p,_F))}}}}}function zo(e){e.registerChartView(mF),e.registerSeriesModel(eF),e.registerLayout(fu("line",!0)),e.registerVisual({seriesType:"line",reset:function(t){var a=t.getData(),r=t.getModel("lineStyle").getLineStyle();r&&!r.stroke&&(r.stroke=a.getVisual("style").fill),a.setVisual("legendLineStyle",r)}}),e.registerProcessor(e.PRIORITY.PROCESSOR.STATISTIC,tA("line"))}var Pc=function(e){gt(t,e);function t(){var a=e!==null&&e.apply(this,arguments)||this;return a.type=t.type,a}return t.prototype.getInitialData=function(a,r){return ai(null,this,{useEncodeDefaulter:!0})},t.prototype.getMarkerPosition=function(a,r,n){var i=this.coordinateSystem;if(i&&i.clampData){var o=i.clampData(a),s=i.dataToPoint(o);if(n)G(i.getAxes(),function(d,f){if(d.type==="category"&&r!=null){var p=d.getTicksCoords(),g=d.getTickModel().get("alignWithLabel"),v=o[f],_=r[f]==="x1"||r[f]==="y1";if(_&&!g&&(v+=1),p.length<2)return;if(p.length===2){s[f]=d.toGlobalCoord(d.getExtent()[_?1:0]);return}for(var y=void 0,b=void 0,w=1,T=0;T<p.length;T++){var C=p[T].coord,A=T===p.length-1?p[T-1].tickValue+w:p[T].tickValue;if(A===v){b=C;break}else if(A<v)y=C;else if(y!=null&&A>v){b=(C+y)/2;break}T===1&&(w=A-p[0].tickValue)}b==null&&(y?y&&(b=p[p.length-1].coord):b=p[0].coord),s[f]=d.toGlobalCoord(b)}});else{var l=this.getData(),c=l.getLayout("offset"),u=l.getLayout("size"),h=i.getBaseAxis().isHorizontal()?0:1;s[h]+=c+u/2}return s}return[NaN,NaN]},t.type="series.__base_bar__",t.defaultOption={z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,barMinHeight:0,barMinAngle:0,large:!1,largeThreshold:400,progressive:3e3,progressiveChunkMode:"mod"},t}(ha);ha.registerClass(Pc);var bF=function(e){gt(t,e);function t(){var a=e!==null&&e.apply(this,arguments)||this;return a.type=t.type,a}return t.prototype.getInitialData=function(){return ai(null,this,{useEncodeDefaulter:!0,createInvertedIndices:!!this.get("realtimeSort",!0)||null})},t.prototype.getProgressive=function(){return this.get("large")?this.get("progressive"):!1},t.prototype.getProgressiveThreshold=function(){var a=this.get("progressiveThreshold"),r=this.get("largeThreshold");return r>a&&(a=r),a},t.prototype.brushSelector=function(a,r,n){return n.rect(r.getItemLayout(a))},t.type="series.bar",t.dependencies=["grid","polar"],t.defaultOption=zi(Pc.defaultOption,{clip:!0,roundCap:!1,showBackground:!1,backgroundStyle:{color:"rgba(180, 180, 180, 0.2)",borderColor:null,borderWidth:0,borderType:"solid",borderRadius:0,shadowBlur:0,shadowColor:null,shadowOffsetX:0,shadowOffsetY:0,opacity:1},select:{itemStyle:{borderColor:"#212121"}},realtimeSort:!1}),t}(Pc),xF=function(){function e(){this.cx=0,this.cy=0,this.r0=0,this.r=0,this.startAngle=0,this.endAngle=Math.PI*2,this.clockwise=!0}return e}(),ed=function(e){gt(t,e);function t(a){var r=e.call(this,a)||this;return r.type="sausage",r}return t.prototype.getDefaultShape=function(){return new xF},t.prototype.buildPath=function(a,r){var n=r.cx,i=r.cy,o=Math.max(r.r0||0,0),s=Math.max(r.r,0),l=(s-o)*.5,c=o+l,u=r.startAngle,h=r.endAngle,d=r.clockwise,f=Math.PI*2,p=d?h-u<f:u-h<f;p||(u=h-(d?f:-f));var g=Math.cos(u),v=Math.sin(u),_=Math.cos(h),y=Math.sin(h);p?(a.moveTo(g*o+n,v*o+i),a.arc(g*c+n,v*c+i,l,-Math.PI+u,u,!d)):a.moveTo(g*s+n,v*s+i),a.arc(n,i,s,u,h,!d),a.arc(_*c+n,y*c+i,l,h-Math.PI*2,h-Math.PI,!d),o!==0&&a.arc(n,i,o,h,u,d)},t}(va);function SF(e,t){t=t||{};var a=t.isRoundCap;return function(r,n,i){var o=n.position;if(!o||o instanceof Array)return J_(r,n,i);var s=e(o),l=n.distance!=null?n.distance:5,c=this.shape,u=c.cx,h=c.cy,d=c.r,f=c.r0,p=(d+f)/2,g=c.startAngle,v=c.endAngle,_=(g+v)/2,y=a?Math.abs(d-f)/2:0,b=Math.cos,w=Math.sin,T=u+d*b(g),C=h+d*w(g),A="left",k="top";switch(s){case"startArc":T=u+(f-l)*b(_),C=h+(f-l)*w(_),A="center",k="top";break;case"insideStartArc":T=u+(f+l)*b(_),C=h+(f+l)*w(_),A="center",k="bottom";break;case"startAngle":T=u+p*b(g)+Bu(g,l+y,!1),C=h+p*w(g)+Ou(g,l+y,!1),A="right",k="middle";break;case"insideStartAngle":T=u+p*b(g)+Bu(g,-l+y,!1),C=h+p*w(g)+Ou(g,-l+y,!1),A="left",k="middle";break;case"middle":T=u+p*b(_),C=h+p*w(_),A="center",k="middle";break;case"endArc":T=u+(d+l)*b(_),C=h+(d+l)*w(_),A="center",k="bottom";break;case"insideEndArc":T=u+(d-l)*b(_),C=h+(d-l)*w(_),A="center",k="top";break;case"endAngle":T=u+p*b(v)+Bu(v,l+y,!0),C=h+p*w(v)+Ou(v,l+y,!0),A="left",k="middle";break;case"insideEndAngle":T=u+p*b(v)+Bu(v,-l+y,!0),C=h+p*w(v)+Ou(v,-l+y,!0),A="right",k="middle";break;default:return J_(r,n,i)}return r=r||{},r.x=T,r.y=C,r.align=A,r.verticalAlign=k,r}}function wF(e,t,a,r){if(Ea(r)){e.setTextConfig({rotation:r});return}else if(Nt(t)){e.setTextConfig({rotation:0});return}var n=e.shape,i=n.clockwise?n.startAngle:n.endAngle,o=n.clockwise?n.endAngle:n.startAngle,s=(i+o)/2,l,c=a(t);switch(c){case"startArc":case"insideStartArc":case"middle":case"insideEndArc":case"endArc":l=s;break;case"startAngle":case"insideStartAngle":l=i;break;case"endAngle":case"insideEndAngle":l=o;break;default:e.setTextConfig({rotation:0});return}var u=Math.PI*1.5-l;c==="middle"&&u>Math.PI/2&&u<Math.PI*1.5&&(u-=Math.PI),e.setTextConfig({rotation:u})}function Bu(e,t,a){return t*Math.sin(e)*(a?-1:1)}function Ou(e,t,a){return t*Math.cos(e)*(a?1:-1)}function so(e,t,a){var r=e.get("borderRadius");if(r==null)return a?{cornerRadius:0}:null;Nt(r)||(r=[r,r,r,r]);var n=Math.abs(t.r||0-t.r0||0);return{cornerRadius:Ot(r,function(i){return Uh(i,n)})}}var Sp=Math.max,wp=Math.min;function CF(e,t){var a=e.getArea&&e.getArea();if(Fo(e,"cartesian2d")){var r=e.getBaseAxis();if(r.type!=="category"||!r.onBand){var n=t.getLayout("bandWidth");r.isHorizontal()?(a.x-=n,a.width+=n*2):(a.y-=n,a.height+=n*2)}}return a}var TF=function(e){gt(t,e);function t(){var a=e.call(this)||this;return a.type=t.type,a._isFirstFrame=!0,a}return t.prototype.render=function(a,r,n,i){this._model=a,this._removeOnRenderedListener(n),this._updateDrawMode(a);var o=a.get("coordinateSystem");(o==="cartesian2d"||o==="polar")&&(this._progressiveEls=null,this._isLargeDraw?this._renderLarge(a,r,n):this._renderNormal(a,r,n,i))},t.prototype.incrementalPrepareRender=function(a){this._clear(),this._updateDrawMode(a),this._updateLargeClip(a)},t.prototype.incrementalRender=function(a,r){this._progressiveEls=[],this._incrementalRenderLarge(a,r)},t.prototype.eachRendered=function(a){ol(this._progressiveEls||this.group,a)},t.prototype._updateDrawMode=function(a){var r=a.pipelineContext.large;(this._isLargeDraw==null||r!==this._isLargeDraw)&&(this._isLargeDraw=r,this._clear())},t.prototype._renderNormal=function(a,r,n,i){var o=this.group,s=a.getData(),l=this._data,c=a.coordinateSystem,u=c.getBaseAxis(),h;c.type==="cartesian2d"?h=u.isHorizontal():c.type==="polar"&&(h=u.dim==="angle");var d=a.isAnimationEnabled()?a:null,f=AF(a,c);f&&this._enableRealtimeSort(f,s,n);var p=a.get("clip",!0)||f,g=CF(c,s);o.removeClipPath();var v=a.get("roundCap",!0),_=a.get("showBackground",!0),y=a.getModel("backgroundStyle"),b=y.get("borderRadius")||0,w=[],T=this._backgroundEls,C=i&&i.isInitSort,A=i&&i.type==="changeAxisOrder";function k(P){var E=Nu[c.type](s,P),D=RF(c,h,E);return D.useStyle(y.getItemStyle()),c.type==="cartesian2d"?D.setShape("r",b):D.setShape("cornerRadius",b),w[P]=D,D}s.diff(l).add(function(P){var E=s.getItemModel(P),D=Nu[c.type](s,P,E);if(_&&k(P),!(!s.hasValue(P)||!H1[c.type](D))){var O=!1;p&&(O=F1[c.type](g,D));var B=z1[c.type](a,s,P,D,h,d,u.model,!1,v);f&&(B.forceLabelAnimation=!0),W1(B,s,P,E,D,a,h,c.type==="polar"),C?B.attr({shape:D}):f?V1(f,d,B,D,P,h,!1,!1):la(B,{shape:D},a,P),s.setItemGraphicEl(P,B),o.add(B),B.ignore=O}}).update(function(P,E){var D=s.getItemModel(P),O=Nu[c.type](s,P,D);if(_){var B=void 0;T.length===0?B=k(E):(B=T[E],B.useStyle(y.getItemStyle()),c.type==="cartesian2d"?B.setShape("r",b):B.setShape("cornerRadius",b),w[P]=B);var R=Nu[c.type](s,P),V=aA(h,R,c);ze(B,{shape:V},d,P)}var z=l.getItemGraphicEl(E);if(!s.hasValue(P)||!H1[c.type](O)){o.remove(z);return}var W=!1;if(p&&(W=F1[c.type](g,O),W&&o.remove(z)),z?Yr(z):z=z1[c.type](a,s,P,O,h,d,u.model,!!z,v),f&&(z.forceLabelAnimation=!0),A){var it=z.getTextContent();if(it){var ot=jC(it);ot.prevValue!=null&&(ot.prevValue=ot.value)}}else W1(z,s,P,D,O,a,h,c.type==="polar");C?z.attr({shape:O}):f?V1(f,d,z,O,P,h,!0,A):ze(z,{shape:O},a,P,null),s.setItemGraphicEl(P,z),z.ignore=W,o.add(z)}).remove(function(P){var E=l.getItemGraphicEl(P);E&&jh(E,a,P)}).execute();var L=this._backgroundGroup||(this._backgroundGroup=new ie);L.removeAll();for(var M=0;M<w.length;++M)L.add(w[M]);o.add(L),this._backgroundEls=w,this._data=s},t.prototype._renderLarge=function(a,r,n){this._clear(),U1(a,this.group),this._updateLargeClip(a)},t.prototype._incrementalRenderLarge=function(a,r){this._removeBackground(),U1(r,this.group,this._progressiveEls,!0)},t.prototype._updateLargeClip=function(a){var r=a.get("clip",!0)&&du(a.coordinateSystem,!1,a),n=this.group;r?n.setClipPath(r):n.removeClipPath()},t.prototype._enableRealtimeSort=function(a,r,n){var i=this;if(r.count()){var o=a.baseAxis;if(this._isFirstFrame)this._dispatchInitSort(r,a,n),this._isFirstFrame=!1;else{var s=function(l){var c=r.getItemGraphicEl(l),u=c&&c.shape;return u&&Math.abs(o.isHorizontal()?u.height:u.width)||0};this._onRendered=function(){i._updateSortWithinSameData(r,s,o,n)},n.getZr().on("rendered",this._onRendered)}}},t.prototype._dataSort=function(a,r,n){var i=[];return a.each(a.mapDimension(r.dim),function(o,s){var l=n(s);l=l??NaN,i.push({dataIndex:s,mappedValue:l,ordinalNumber:o})}),i.sort(function(o,s){return s.mappedValue-o.mappedValue}),{ordinalNumbers:Ot(i,function(o){return o.ordinalNumber})}},t.prototype._isOrderChangedWithinSameData=function(a,r,n){for(var i=n.scale,o=a.mapDimension(n.dim),s=Number.MAX_VALUE,l=0,c=i.getOrdinalMeta().categories.length;l<c;++l){var u=a.rawIndexOf(o,i.getRawOrdinalNumber(l)),h=u<0?Number.MIN_VALUE:r(a.indexOfRawIndex(u));if(h>s)return!0;s=h}return!1},t.prototype._isOrderDifferentInView=function(a,r){for(var n=r.scale,i=n.getExtent(),o=Math.max(0,i[0]),s=Math.min(i[1],n.getOrdinalMeta().categories.length-1);o<=s;++o)if(a.ordinalNumbers[o]!==n.getRawOrdinalNumber(o))return!0},t.prototype._updateSortWithinSameData=function(a,r,n,i){if(this._isOrderChangedWithinSameData(a,r,n)){var o=this._dataSort(a,n,r);this._isOrderDifferentInView(o,n)&&(this._removeOnRenderedListener(i),i.dispatchAction({type:"changeAxisOrder",componentType:n.dim+"Axis",axisId:n.index,sortInfo:o}))}},t.prototype._dispatchInitSort=function(a,r,n){var i=r.baseAxis,o=this._dataSort(a,i,function(s){return a.get(a.mapDimension(r.otherAxis.dim),s)});n.dispatchAction({type:"changeAxisOrder",componentType:i.dim+"Axis",isInitSort:!0,axisId:i.index,sortInfo:o})},t.prototype.remove=function(a,r){this._clear(this._model),this._removeOnRenderedListener(r)},t.prototype.dispose=function(a,r){this._removeOnRenderedListener(r)},t.prototype._removeOnRenderedListener=function(a){this._onRendered&&(a.getZr().off("rendered",this._onRendered),this._onRendered=null)},t.prototype._clear=function(a){var r=this.group,n=this._data;a&&a.isAnimationEnabled()&&n&&!this._isLargeDraw?(this._removeBackground(),this._backgroundEls=[],n.eachItemGraphicEl(function(i){jh(i,a,Ae(i).dataIndex)})):r.removeAll(),this._data=null,this._isFirstFrame=!0},t.prototype._removeBackground=function(){this.group.remove(this._backgroundGroup),this._backgroundGroup=null},t.type="bar",t}(ra),F1={cartesian2d:function(e,t){var a=t.width<0?-1:1,r=t.height<0?-1:1;a<0&&(t.x+=t.width,t.width=-t.width),r<0&&(t.y+=t.height,t.height=-t.height);var n=e.x+e.width,i=e.y+e.height,o=Sp(t.x,e.x),s=wp(t.x+t.width,n),l=Sp(t.y,e.y),c=wp(t.y+t.height,i),u=s<o,h=c<l;return t.x=u&&o>n?s:o,t.y=h&&l>i?c:l,t.width=u?0:s-o,t.height=h?0:c-l,a<0&&(t.x+=t.width,t.width=-t.width),r<0&&(t.y+=t.height,t.height=-t.height),u||h},polar:function(e,t){var a=t.r0<=t.r?1:-1;if(a<0){var r=t.r;t.r=t.r0,t.r0=r}var n=wp(t.r,e.r),i=Sp(t.r0,e.r0);t.r=n,t.r0=i;var o=n-i<0;if(a<0){var r=t.r;t.r=t.r0,t.r0=r}return o}},z1={cartesian2d:function(e,t,a,r,n,i,o,s,l){var c=new Ge({shape:Vt({},r),z2:1});if(c.__dataIndex=a,c.name="item",i){var u=c.shape,h=n?"height":"width";u[h]=0}return c},polar:function(e,t,a,r,n,i,o,s,l){var c=!n&&l?ed:Pr,u=new c({shape:r,z2:1});u.name="item";var h=eA(n);if(u.calculateTextPosition=SF(h,{isRoundCap:c===ed}),i){var d=u.shape,f=n?"r":"endAngle",p={};d[f]=n?r.r0:r.startAngle,p[f]=r[f],(s?ze:la)(u,{shape:p},i)}return u}};function AF(e,t){var a=e.get("realtimeSort",!0),r=t.getBaseAxis();if(a&&r.type==="category"&&t.type==="cartesian2d")return{baseAxis:r,otherAxis:t.getOtherAxis(r)}}function V1(e,t,a,r,n,i,o,s){var l,c;i?(c={x:r.x,width:r.width},l={y:r.y,height:r.height}):(c={y:r.y,height:r.height},l={x:r.x,width:r.width}),s||(o?ze:la)(a,{shape:l},t,n,null);var u=t?e.baseAxis.model:null;(o?ze:la)(a,{shape:c},u,n)}function G1(e,t){for(var a=0;a<t.length;a++)if(!isFinite(e[t[a]]))return!0;return!1}var kF=["x","y","width","height"],DF=["cx","cy","r","startAngle","endAngle"],H1={cartesian2d:function(e){return!G1(e,kF)},polar:function(e){return!G1(e,DF)}},Nu={cartesian2d:function(e,t,a){var r=e.getItemLayout(t),n=a?IF(a,r):0,i=r.width>0?1:-1,o=r.height>0?1:-1;return{x:r.x+i*n/2,y:r.y+o*n/2,width:r.width-i*n,height:r.height-o*n}},polar:function(e,t,a){var r=e.getItemLayout(t);return{cx:r.cx,cy:r.cy,r0:r.r0,r:r.r,startAngle:r.startAngle,endAngle:r.endAngle,clockwise:r.clockwise}}};function LF(e){return e.startAngle!=null&&e.endAngle!=null&&e.startAngle===e.endAngle}function eA(e){return function(t){var a=t?"Arc":"Angle";return function(r){switch(r){case"start":case"insideStart":case"end":case"insideEnd":return r+a;default:return r}}}(e)}function W1(e,t,a,r,n,i,o,s){var l=t.getItemVisual(a,"style");if(s){if(!i.get("roundCap")){var u=e.shape,h=so(r.getModel("itemStyle"),u,!0);Vt(u,h),e.setShape(u)}}else{var c=r.get(["itemStyle","borderRadius"])||0;e.setShape("r",c)}e.useStyle(l);var d=r.getShallow("cursor");d&&e.attr("cursor",d);var f=s?o?n.r>=n.r0?"endArc":"startArc":n.endAngle>=n.startAngle?"endAngle":"startAngle":o?n.height>=0?"bottom":"top":n.width>=0?"right":"left",p=Aa(r);Fa(e,p,{labelFetcher:i,labelDataIndex:a,defaultText:Gs(i.getData(),a),inheritColor:l.fill,defaultOpacity:l.opacity,defaultOutsidePosition:f});var g=e.getTextContent();if(s&&g){var v=r.get(["label","position"]);e.textConfig.inside=v==="middle"?!0:null,wF(e,v==="outside"?f:v,eA(o),r.get(["label","rotate"]))}YC(g,p,i.getRawValue(a),function(y){return UT(t,y)});var _=r.getModel(["emphasis"]);Qe(e,_.get("focus"),_.get("blurScope"),_.get("disabled")),za(e,r),LF(n)&&(e.style.fill="none",e.style.stroke="none",G(e.states,function(y){y.style&&(y.style.fill=y.style.stroke="none")}))}function IF(e,t){var a=e.get(["itemStyle","borderColor"]);if(!a||a==="none")return 0;var r=e.get(["itemStyle","borderWidth"])||0,n=isNaN(t.width)?Number.MAX_VALUE:Math.abs(t.width),i=isNaN(t.height)?Number.MAX_VALUE:Math.abs(t.height);return Math.min(r,n,i)}var MF=function(){function e(){}return e}(),q1=function(e){gt(t,e);function t(a){var r=e.call(this,a)||this;return r.type="largeBar",r}return t.prototype.getDefaultShape=function(){return new MF},t.prototype.buildPath=function(a,r){for(var n=r.points,i=this.baseDimIdx,o=1-this.baseDimIdx,s=[],l=[],c=this.barWidth,u=0;u<n.length;u+=3)l[i]=c,l[o]=n[u+2],s[i]=n[u+i],s[o]=n[u+o],a.rect(s[0],s[1],l[0],l[1])},t}(va);function U1(e,t,a,r){var n=e.getData(),i=n.getLayout("valueAxisHorizontal")?1:0,o=n.getLayout("largeDataIndices"),s=n.getLayout("size"),l=e.getModel("backgroundStyle"),c=n.getLayout("largeBackgroundPoints");if(c){var u=new q1({shape:{points:c},incremental:!!r,silent:!0,z2:0});u.baseDimIdx=i,u.largeDataIndices=o,u.barWidth=s,u.useStyle(l.getItemStyle()),t.add(u),a&&a.push(u)}var h=new q1({shape:{points:n.getLayout("largePoints")},incremental:!!r,ignoreCoarsePointer:!0,z2:1});h.baseDimIdx=i,h.largeDataIndices=o,h.barWidth=s,t.add(h),h.useStyle(n.getVisual("style")),h.style.stroke=null,Ae(h).seriesIndex=e.seriesIndex,e.get("silent")||(h.on("mousedown",j1),h.on("mousemove",j1)),a&&a.push(h)}var j1=z3(function(e){var t=this,a=EF(t,e.offsetX,e.offsetY);Ae(t).dataIndex=a>=0?a:null},30,!1);function EF(e,t,a){for(var r=e.baseDimIdx,n=1-r,i=e.shape.points,o=e.largeDataIndices,s=[],l=[],c=e.barWidth,u=0,h=i.length/3;u<h;u++){var d=u*3;if(l[r]=c,l[n]=i[d+2],s[r]=i[d+r],s[n]=i[d+n],l[n]<0&&(s[n]+=l[n],l[n]=-l[n]),t>=s[0]&&t<=s[0]+l[0]&&a>=s[1]&&a<=s[1]+l[1])return o[u]}return-1}function aA(e,t,a){if(Fo(a,"cartesian2d")){var r=t,n=a.getArea();return{x:e?r.x:n.x,y:e?n.y:r.y,width:e?r.width:n.width,height:e?n.height:r.height}}else{var n=a.getArea(),i=t;return{cx:n.cx,cy:n.cy,r0:e?n.r0:i.r0,r:e?n.r:i.r,startAngle:e?i.startAngle:0,endAngle:e?i.endAngle:Math.PI*2}}}function RF(e,t,a){var r=e.type==="polar"?Pr:Ge;return new r({shape:aA(t,a,e),silent:!0,z2:0})}function Vi(e){e.registerChartView(TF),e.registerSeriesModel(bF),e.registerLayout(e.PRIORITY.VISUAL.LAYOUT,pe(XC,"bar")),e.registerLayout(e.PRIORITY.VISUAL.PROGRESSIVE_LAYOUT,ZC("bar")),e.registerProcessor(e.PRIORITY.PROCESSOR.STATISTIC,tA("bar")),e.registerAction({type:"changeAxisOrder",event:"changeAxisOrder",update:"update"},function(t,a){var r=t.componentType||"series";a.eachComponent({mainType:r,query:t},function(n){t.sortInfo&&n.axis.setCategorySortInfo(t.sortInfo)})})}var Y1=Math.PI*2,$u=Math.PI/180;function rA(e,t){return ka(e.getBoxLayoutParams(),{width:t.getWidth(),height:t.getHeight()})}function nA(e,t){var a=rA(e,t),r=e.get("center"),n=e.get("radius");Nt(n)||(n=[0,n]);var i=Ft(a.width,t.getWidth()),o=Ft(a.height,t.getHeight()),s=Math.min(i,o),l=Ft(n[0],s/2),c=Ft(n[1],s/2),u,h,d=e.coordinateSystem;if(d){var f=d.dataToPoint(r);u=f[0]||0,h=f[1]||0}else Nt(r)||(r=[r,r]),u=Ft(r[0],i)+a.x,h=Ft(r[1],o)+a.y;return{cx:u,cy:h,r0:l,r:c}}function PF(e,t,a){t.eachSeriesByType(e,function(r){var n=r.getData(),i=n.mapDimension("value"),o=rA(r,a),s=nA(r,a),l=s.cx,c=s.cy,u=s.r,h=s.r0,d=-r.get("startAngle")*$u,f=r.get("endAngle"),p=r.get("padAngle")*$u;f=f==="auto"?d-Y1:-f*$u;var g=r.get("minAngle")*$u,v=g+p,_=0;n.each(i,function(V){!isNaN(V)&&_++});var y=n.getSum(i),b=Math.PI/(y||_)*2,w=r.get("clockwise"),T=r.get("roseType"),C=r.get("stillShowZeroSum"),A=n.getDataExtent(i);A[0]=0;var k=w?1:-1,L=[d,f],M=k*p/2;KC(L,!w),d=L[0],f=L[1];var P=iA(r);P.startAngle=d,P.endAngle=f,P.clockwise=w;var E=Math.abs(f-d),D=E,O=0,B=d;if(n.setLayout({viewRect:o,r:u}),n.each(i,function(V,z){var W;if(isNaN(V)){n.setItemLayout(z,{angle:NaN,startAngle:NaN,endAngle:NaN,clockwise:w,cx:l,cy:c,r0:h,r:T?NaN:u});return}T!=="area"?W=y===0&&C?b:V*b:W=E/_,W<v?(W=v,D-=v):O+=V;var it=B+k*W,ot=0,xt=0;p>W?(ot=B+k*W/2,xt=ot):(ot=B+M,xt=it-M),n.setItemLayout(z,{angle:W,startAngle:ot,endAngle:xt,clockwise:w,cx:l,cy:c,r0:h,r:T?Ve(V,A,[h,u]):u}),B=it}),D<Y1&&_)if(D<=.001){var R=E/_;n.each(i,function(V,z){if(!isNaN(V)){var W=n.getItemLayout(z);W.angle=R;var it=0,ot=0;R<p?(it=d+k*(z+1/2)*R,ot=it):(it=d+k*z*R+M,ot=d+k*(z+1)*R-M),W.startAngle=it,W.endAngle=ot}})}else b=D/O,B=d,n.each(i,function(V,z){if(!isNaN(V)){var W=n.getItemLayout(z),it=W.angle===v?v:V*b,ot=0,xt=0;it<p?(ot=B+k*it/2,xt=ot):(ot=B+M,xt=B+k*it-M),W.startAngle=ot,W.endAngle=xt,B+=k*it}})})}var iA=ia();function pu(e){return{seriesType:e,reset:function(t,a){var r=a.findComponents({mainType:"legend"});if(!(!r||!r.length)){var n=t.getData();n.filterSelf(function(i){for(var o=n.getName(i),s=0;s<r.length;s++)if(!r[s].isSelected(o))return!1;return!0})}}}}var BF=Math.PI/180;function X1(e,t,a,r,n,i,o,s,l,c){if(e.length<2)return;function u(g){for(var v=g.rB,_=v*v,y=0;y<g.list.length;y++){var b=g.list[y],w=Math.abs(b.label.y-a),T=r+b.len,C=T*T,A=Math.sqrt(Math.abs((1-w*w/_)*C)),k=t+(A+b.len2)*n,L=k-b.label.x,M=b.targetTextWidth-L*n;oA(b,M,!0),b.label.x=k}}function h(g){for(var v={list:[],maxY:0},_={list:[],maxY:0},y=0;y<g.length;y++)if(g[y].labelAlignTo==="none"){var b=g[y],w=b.label.y>a?_:v,T=Math.abs(b.label.y-a);if(T>=w.maxY){var C=b.label.x-t-b.len2*n,A=r+b.len,k=Math.abs(C)<A?Math.sqrt(T*T/(1-C*C/A/A)):A;w.rB=k,w.maxY=T}w.list.push(b)}u(v),u(_)}for(var d=e.length,f=0;f<d;f++)if(e[f].position==="outer"&&e[f].labelAlignTo==="labelLine"){var p=e[f].label.x-c;e[f].linePoints[1][0]+=p,e[f].label.x=c}H3(e,l,l+o)&&h(e)}function OF(e,t,a,r,n,i,o,s){for(var l=[],c=[],u=Number.MAX_VALUE,h=-Number.MAX_VALUE,d=0;d<e.length;d++){var f=e[d].label;Cp(e[d])||(f.x<t?(u=Math.min(u,f.x),l.push(e[d])):(h=Math.max(h,f.x),c.push(e[d])))}for(var d=0;d<e.length;d++){var p=e[d];if(!Cp(p)&&p.linePoints){if(p.labelStyleWidth!=null)continue;var f=p.label,g=p.linePoints,v=void 0;p.labelAlignTo==="edge"?f.x<t?v=g[2][0]-p.labelDistance-o-p.edgeDistance:v=o+n-p.edgeDistance-g[2][0]-p.labelDistance:p.labelAlignTo==="labelLine"?f.x<t?v=u-o-p.bleedMargin:v=o+n-h-p.bleedMargin:f.x<t?v=f.x-o-p.bleedMargin:v=o+n-f.x-p.bleedMargin,p.targetTextWidth=v,oA(p,v)}}X1(c,t,a,r,1,n,i,o,s,h),X1(l,t,a,r,-1,n,i,o,s,u);for(var d=0;d<e.length;d++){var p=e[d];if(!Cp(p)&&p.linePoints){var f=p.label,g=p.linePoints,_=p.labelAlignTo==="edge",y=f.style.padding,b=y?y[1]+y[3]:0,w=f.style.backgroundColor?0:b,T=p.rect.width+w,C=g[1][0]-g[2][0];_?f.x<t?g[2][0]=o+p.edgeDistance+T+p.labelDistance:g[2][0]=o+n-p.edgeDistance-T-p.labelDistance:(f.x<t?g[2][0]=f.x+p.labelDistance:g[2][0]=f.x-p.labelDistance,g[1][0]=g[2][0]+C),g[1][1]=g[2][1]=f.y}}}function oA(e,t,a){if(a===void 0&&(a=!1),e.labelStyleWidth==null){var r=e.label,n=r.style,i=e.rect,o=n.backgroundColor,s=n.padding,l=s?s[1]+s[3]:0,c=n.overflow,u=i.width+(o?0:l);if(t<u||a){var h=i.height;if(c&&c.match("break")){r.setStyle("backgroundColor",null),r.setStyle("width",t-l);var d=r.getBoundingRect();r.setStyle("width",Math.ceil(d.width)),r.setStyle("backgroundColor",o)}else{var f=t-l,p=t<u?f:a?f>e.unconstrainedWidth?null:f:null;r.setStyle("width",p)}var g=r.getBoundingRect();i.width=g.width;var v=(r.style.margin||0)+2.1;i.height=g.height+v,i.y-=(i.height-h)/2}}}function Cp(e){return e.position==="center"}function NF(e){var t=e.getData(),a=[],r,n,i=!1,o=(e.get("minShowLabelAngle")||0)*BF,s=t.getLayout("viewRect"),l=t.getLayout("r"),c=s.width,u=s.x,h=s.y,d=s.height;function f(C){C.ignore=!0}function p(C){if(!C.ignore)return!0;for(var A in C.states)if(C.states[A].ignore===!1)return!0;return!1}t.each(function(C){var A=t.getItemGraphicEl(C),k=A.shape,L=A.getTextContent(),M=A.getTextGuideLine(),P=t.getItemModel(C),E=P.getModel("label"),D=E.get("position")||P.get(["emphasis","label","position"]),O=E.get("distanceToLabelLine"),B=E.get("alignTo"),R=Ft(E.get("edgeDistance"),c),V=E.get("bleedMargin"),z=P.getModel("labelLine"),W=z.get("length");W=Ft(W,c);var it=z.get("length2");if(it=Ft(it,c),Math.abs(k.endAngle-k.startAngle)<o){G(L.states,f),L.ignore=!0,M&&(G(M.states,f),M.ignore=!0);return}if(p(L)){var ot=(k.startAngle+k.endAngle)/2,xt=Math.cos(ot),j=Math.sin(ot),mt,Tt,Mt,et;r=k.cx,n=k.cy;var ut=D==="inside"||D==="inner";if(D==="center")mt=k.cx,Tt=k.cy,et="center";else{var at=(ut?(k.r+k.r0)/2*xt:k.r*xt)+r,Q=(ut?(k.r+k.r0)/2*j:k.r*j)+n;if(mt=at+xt*3,Tt=Q+j*3,!ut){var bt=at+xt*(W+l-k.r),Dt=Q+j*(W+l-k.r),Et=bt+(xt<0?-1:1)*it,ft=Dt;B==="edge"?mt=xt<0?u+R:u+c-R:mt=Et+(xt<0?-O:O),Tt=ft,Mt=[[at,Q],[bt,Dt],[Et,ft]]}et=ut?"center":B==="edge"?xt>0?"right":"left":xt>0?"left":"right"}var $t=Math.PI,Pt=0,qt=E.get("rotate");if(Ea(qt))Pt=qt*($t/180);else if(D==="center")Pt=0;else if(qt==="radial"||qt===!0){var nt=xt<0?-ot+$t:-ot;Pt=nt}else if(qt==="tangential"&&D!=="outside"&&D!=="outer"){var H=Math.atan2(xt,j);H<0&&(H=$t*2+H);var tt=j>0;tt&&(H=$t+H),Pt=H-$t}if(i=!!Pt,L.x=mt,L.y=Tt,L.rotation=Pt,L.setStyle({verticalAlign:"middle"}),ut){L.setStyle({align:et});var X=L.states.select;X&&(X.x+=L.x,X.y+=L.y)}else{var Rt=L.getBoundingRect().clone();Rt.applyTransform(L.getComputedTransform());var lt=(L.style.margin||0)+2.1;Rt.y-=lt/2,Rt.height+=lt,a.push({label:L,labelLine:M,position:D,len:W,len2:it,minTurnAngle:z.get("minTurnAngle"),maxSurfaceAngle:z.get("maxSurfaceAngle"),surfaceNormal:new Hr(xt,j),linePoints:Mt,textAlign:et,labelDistance:O,labelAlignTo:B,edgeDistance:R,bleedMargin:V,rect:Rt,unconstrainedWidth:Rt.width,labelStyleWidth:L.style.width})}A.setTextConfig({inside:ut})}}),!i&&e.get("avoidLabelOverlap")&&OF(a,r,n,l,c,d,u,h);for(var g=0;g<a.length;g++){var v=a[g],_=v.label,y=v.labelLine,b=isNaN(_.x)||isNaN(_.y);if(_){_.setStyle({align:v.textAlign}),b&&(G(_.states,f),_.ignore=!0);var w=_.states.select;w&&(w.x+=_.x,w.y+=_.y)}if(y){var T=v.linePoints;b||!T?(G(y.states,f),y.ignore=!0):(V3(T,v.minTurnAngle),G3(T,v.surfaceNormal,v.maxSurfaceAngle),y.setShape({points:T}),_.__hostTarget.textGuideLineConfig={anchor:new Hr(T[0][0],T[0][1])})}}}var $F=function(e){gt(t,e);function t(a,r,n){var i=e.call(this)||this;i.z2=2;var o=new Oe;return i.setTextContent(o),i.updateData(a,r,n,!0),i}return t.prototype.updateData=function(a,r,n,i){var o=this,s=a.hostModel,l=a.getItemModel(r),c=l.getModel("emphasis"),u=a.getItemLayout(r),h=Vt(so(l.getModel("itemStyle"),u,!0),u);if(isNaN(h.startAngle)){o.setShape(h);return}if(i){o.setShape(h);var d=s.getShallow("animationType");s.ecModel.ssr?(la(o,{scaleX:0,scaleY:0},s,{dataIndex:r,isFrom:!0}),o.originX=h.cx,o.originY=h.cy):d==="scale"?(o.shape.r=u.r0,la(o,{shape:{r:u.r}},s,r)):n!=null?(o.setShape({startAngle:n,endAngle:n}),la(o,{shape:{startAngle:u.startAngle,endAngle:u.endAngle}},s,r)):(o.shape.endAngle=u.startAngle,ze(o,{shape:{endAngle:u.endAngle}},s,r))}else Yr(o),ze(o,{shape:h},s,r);o.useStyle(a.getItemVisual(r,"style")),za(o,l);var f=(u.startAngle+u.endAngle)/2,p=s.get("selectedOffset"),g=Math.cos(f)*p,v=Math.sin(f)*p,_=l.getShallow("cursor");_&&o.attr("cursor",_),this._updateLabel(s,a,r),o.ensureState("emphasis").shape=Vt({r:u.r+(c.get("scale")&&c.get("scaleSize")||0)},so(c.getModel("itemStyle"),u)),Vt(o.ensureState("select"),{x:g,y:v,shape:so(l.getModel(["select","itemStyle"]),u)}),Vt(o.ensureState("blur"),{shape:so(l.getModel(["blur","itemStyle"]),u)});var y=o.getTextGuideLine(),b=o.getTextContent();y&&Vt(y.ensureState("select"),{x:g,y:v}),Vt(b.ensureState("select"),{x:g,y:v}),Qe(this,c.get("focus"),c.get("blurScope"),c.get("disabled"))},t.prototype._updateLabel=function(a,r,n){var i=this,o=r.getItemModel(n),s=o.getModel("labelLine"),l=r.getItemVisual(n,"style"),c=l&&l.fill,u=l&&l.opacity;Fa(i,Aa(o),{labelFetcher:r.hostModel,labelDataIndex:n,inheritColor:c,defaultOpacity:u,defaultText:a.getFormattedLabel(n,"normal")||r.getName(n)});var h=i.getTextContent();i.setTextConfig({position:null,rotation:null}),h.attr({z2:10});var d=a.get(["label","position"]);if(d!=="outside"&&d!=="outer")i.removeTextGuideLine();else{var f=this.getTextGuideLine();f||(f=new Kr,this.setTextGuideLine(f)),JC(this,QC(o),{stroke:c,opacity:sl(s.get(["lineStyle","opacity"]),u,1)})}},t}(Pr),FF=function(e){gt(t,e);function t(){var a=e!==null&&e.apply(this,arguments)||this;return a.ignoreLabelLineUpdate=!0,a}return t.prototype.render=function(a,r,n,i){var o=a.getData(),s=this._data,l=this.group,c;if(!s&&o.count()>0){for(var u=o.getItemLayout(0),h=1;isNaN(u&&u.startAngle)&&h<o.count();++h)u=o.getItemLayout(h);u&&(c=u.startAngle)}if(this._emptyCircleSector&&l.remove(this._emptyCircleSector),o.count()===0&&a.get("showEmptyCircle")){var d=iA(a),f=new Pr({shape:Vt(nA(a,n),d)});f.useStyle(a.getModel("emptyCircleStyle").getItemStyle()),this._emptyCircleSector=f,l.add(f)}o.diff(s).add(function(p){var g=new $F(o,p,c);o.setItemGraphicEl(p,g),l.add(g)}).update(function(p,g){var v=s.getItemGraphicEl(g);v.updateData(o,p,c),v.off("click"),l.add(v),o.setItemGraphicEl(p,v)}).remove(function(p){var g=s.getItemGraphicEl(p);jh(g,a,p)}).execute(),NF(a),a.get("animationTypeUpdate")!=="expansion"&&(this._data=o)},t.prototype.dispose=function(){},t.prototype.containPoint=function(a,r){var n=r.getData(),i=n.getItemLayout(0);if(i){var o=a[0]-i.cx,s=a[1]-i.cy,l=Math.sqrt(o*o+s*s);return l<=i.r&&l>=i.r0}},t.type="pie",t}(ra);function dl(e,t,a){t=Nt(t)&&{coordDimensions:t}||Vt({encodeDefine:e.getEncode()},t);var r=e.getSource(),n=sf(r,t).dimensions,i=new pr(n,e);return i.initData(r,a),i}var gu=function(){function e(t,a){this._getDataWithEncodedVisual=t,this._getRawData=a}return e.prototype.getAllNames=function(){var t=this._getRawData();return t.mapArray(t.getName)},e.prototype.containName=function(t){var a=this._getRawData();return a.indexOfName(t)>=0},e.prototype.indexOfName=function(t){var a=this._getDataWithEncodedVisual();return a.indexOfName(t)},e.prototype.getItemVisual=function(t,a){var r=this._getDataWithEncodedVisual();return r.getItemVisual(t,a)},e}(),zF=ia(),VF=function(e){gt(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.init=function(a){e.prototype.init.apply(this,arguments),this.legendVisualProvider=new gu(Ut(this.getData,this),Ut(this.getRawData,this)),this._defaultLabelLine(a)},t.prototype.mergeOption=function(){e.prototype.mergeOption.apply(this,arguments)},t.prototype.getInitialData=function(){return dl(this,{coordDimensions:["value"],encodeDefaulter:pe(uy,this)})},t.prototype.getDataParams=function(a){var r=this.getData(),n=zF(r),i=n.seats;if(!i){var o=[];r.each(r.mapDimension("value"),function(l){o.push(l)}),i=n.seats=W3(o,r.hostModel.get("percentPrecision"))}var s=e.prototype.getDataParams.call(this,a);return s.percent=i[a]||0,s.$vars.push("percent"),s},t.prototype._defaultLabelLine=function(a){nu(a,"labelLine",["show"]);var r=a.labelLine,n=a.emphasis.labelLine;r.show=r.show&&a.label.show,n.show=n.show&&a.emphasis.label.show},t.type="series.pie",t.defaultOption={z:2,legendHoverLink:!0,colorBy:"data",center:["50%","50%"],radius:[0,"75%"],clockwise:!0,startAngle:90,endAngle:"auto",padAngle:0,minAngle:0,minShowLabelAngle:0,selectedOffset:10,percentPrecision:2,stillShowZeroSum:!0,left:0,top:0,right:0,bottom:0,width:null,height:null,label:{rotate:0,show:!0,overflow:"truncate",position:"outer",alignTo:"none",edgeDistance:"25%",bleedMargin:10,distanceToLabelLine:5},labelLine:{show:!0,length:15,length2:15,smooth:!1,minTurnAngle:90,maxSurfaceAngle:90,lineStyle:{width:1,type:"solid"}},itemStyle:{borderWidth:1,borderJoin:"round"},showEmptyCircle:!0,emptyCircleStyle:{color:"lightgray",opacity:1},labelLayout:{hideOverlap:!0},emphasis:{scale:!0,scaleSize:5},avoidLabelOverlap:!0,animationType:"expansion",animationDuration:1e3,animationTypeUpdate:"transition",animationEasingUpdate:"cubicInOut",animationDurationUpdate:500,animationEasing:"cubicInOut"},t}(ha);function GF(e){return{seriesType:e,reset:function(t,a){var r=t.getData();r.filterSelf(function(n){var i=r.mapDimension("value"),o=r.get(i,n);return!(Ea(o)&&!isNaN(o)&&o<0)})}}}function fl(e){e.registerChartView(FF),e.registerSeriesModel(VF),tT("pie",e.registerAction),e.registerLayout(pe(PF,"pie")),e.registerProcessor(pu("pie")),e.registerProcessor(GF("pie"))}var HF=function(e){gt(t,e);function t(){var a=e!==null&&e.apply(this,arguments)||this;return a.type=t.type,a.hasSymbolVisual=!0,a}return t.prototype.getInitialData=function(a,r){return ai(null,this,{useEncodeDefaulter:!0})},t.prototype.getProgressive=function(){var a=this.option.progressive;return a??(this.option.large?5e3:this.get("progressive"))},t.prototype.getProgressiveThreshold=function(){var a=this.option.progressiveThreshold;return a??(this.option.large?1e4:this.get("progressiveThreshold"))},t.prototype.brushSelector=function(a,r,n){return n.point(r.getItemLayout(a))},t.prototype.getZLevelKey=function(){return this.getData().count()>this.getProgressiveThreshold()?this.id:""},t.type="series.scatter",t.dependencies=["grid","polar","geo","singleAxis","calendar"],t.defaultOption={coordinateSystem:"cartesian2d",z:2,legendHoverLink:!0,symbolSize:10,large:!1,largeThreshold:2e3,itemStyle:{opacity:.8},emphasis:{scale:!0},clip:!0,select:{itemStyle:{borderColor:"#212121"}},universalTransition:{divideShape:"clone"}},t}(ha),sA=4,WF=function(){function e(){}return e}(),qF=function(e){gt(t,e);function t(a){var r=e.call(this,a)||this;return r._off=0,r.hoverDataIdx=-1,r}return t.prototype.getDefaultShape=function(){return new WF},t.prototype.reset=function(){this.notClear=!1,this._off=0},t.prototype.buildPath=function(a,r){var n=r.points,i=r.size,o=this.symbolProxy,s=o.shape,l=a.getContext?a.getContext():a,c=l&&i[0]<sA,u=this.softClipShape,h;if(c){this._ctx=l;return}for(this._ctx=null,h=this._off;h<n.length;){var d=n[h++],f=n[h++];isNaN(d)||isNaN(f)||u&&!u.contain(d,f)||(s.x=d-i[0]/2,s.y=f-i[1]/2,s.width=i[0],s.height=i[1],o.buildPath(a,s,!0))}this.incremental&&(this._off=h,this.notClear=!0)},t.prototype.afterBrush=function(){var a=this.shape,r=a.points,n=a.size,i=this._ctx,o=this.softClipShape,s;if(i){for(s=this._off;s<r.length;){var l=r[s++],c=r[s++];isNaN(l)||isNaN(c)||o&&!o.contain(l,c)||i.fillRect(l-n[0]/2,c-n[1]/2,n[0],n[1])}this.incremental&&(this._off=s,this.notClear=!0)}},t.prototype.findDataIndex=function(a,r){for(var n=this.shape,i=n.points,o=n.size,s=Math.max(o[0],4),l=Math.max(o[1],4),c=i.length/2-1;c>=0;c--){var u=c*2,h=i[u]-s/2,d=i[u+1]-l/2;if(a>=h&&r>=d&&a<=h+s&&r<=d+l)return c}return-1},t.prototype.contain=function(a,r){var n=this.transformCoordToLocal(a,r),i=this.getBoundingRect();if(a=n[0],r=n[1],i.contain(a,r)){var o=this.hoverDataIdx=this.findDataIndex(a,r);return o>=0}return this.hoverDataIdx=-1,!1},t.prototype.getBoundingRect=function(){var a=this._rect;if(!a){for(var r=this.shape,n=r.points,i=r.size,o=i[0],s=i[1],l=1/0,c=1/0,u=-1/0,h=-1/0,d=0;d<n.length;){var f=n[d++],p=n[d++];l=Math.min(f,l),u=Math.max(f,u),c=Math.min(p,c),h=Math.max(p,h)}a=this._rect=new aa(l-o/2,c-s/2,u-l+o,h-c+s)}return a},t}(va),UF=function(){function e(){this.group=new ie}return e.prototype.updateData=function(t,a){this._clear();var r=this._create();r.setShape({points:t.getLayout("points")}),this._setCommon(r,t,a)},e.prototype.updateLayout=function(t){var a=t.getLayout("points");this.group.eachChild(function(r){if(r.startIndex!=null){var n=(r.endIndex-r.startIndex)*2,i=r.startIndex*4*2;a=new Float32Array(a.buffer,i,n)}r.setShape("points",a),r.reset()})},e.prototype.incrementalPrepareUpdate=function(t){this._clear()},e.prototype.incrementalUpdate=function(t,a,r){var n=this._newAdded[0],i=a.getLayout("points"),o=n&&n.shape.points;if(o&&o.length<2e4){var s=o.length,l=new Float32Array(s+i.length);l.set(o),l.set(i,s),n.endIndex=t.end,n.setShape({points:l})}else{this._newAdded=[];var c=this._create();c.startIndex=t.start,c.endIndex=t.end,c.incremental=!0,c.setShape({points:i}),this._setCommon(c,a,r)}},e.prototype.eachRendered=function(t){this._newAdded[0]&&t(this._newAdded[0])},e.prototype._create=function(){var t=new qF({cursor:"default"});return t.ignoreCoarsePointer=!0,this.group.add(t),this._newAdded.push(t),t},e.prototype._setCommon=function(t,a,r){var n=a.hostModel;r=r||{};var i=a.getVisual("symbolSize");t.setShape("size",i instanceof Array?i:[i,i]),t.softClipShape=r.clipShape||null,t.symbolProxy=ba(a.getVisual("symbol"),0,0,0,0),t.setColor=t.symbolProxy.setColor;var o=t.shape.size[0]<sA;t.useStyle(n.getModel("itemStyle").getItemStyle(o?["color","shadowBlur","shadowColor"]:["color"]));var s=a.getVisual("style"),l=s&&s.fill;l&&t.setColor(l);var c=Ae(t);c.seriesIndex=n.seriesIndex,t.on("mousemove",function(u){c.dataIndex=null;var h=t.hoverDataIdx;h>=0&&(c.dataIndex=h+(t.startIndex||0))})},e.prototype.remove=function(){this._clear()},e.prototype._clear=function(){this._newAdded=[],this.group.removeAll()},e}(),jF=function(e){gt(t,e);function t(){var a=e!==null&&e.apply(this,arguments)||this;return a.type=t.type,a}return t.prototype.render=function(a,r,n){var i=a.getData(),o=this._updateSymbolDraw(i,a);o.updateData(i,{clipShape:this._getClipShape(a)}),this._finished=!0},t.prototype.incrementalPrepareRender=function(a,r,n){var i=a.getData(),o=this._updateSymbolDraw(i,a);o.incrementalPrepareUpdate(i),this._finished=!1},t.prototype.incrementalRender=function(a,r,n){this._symbolDraw.incrementalUpdate(a,r.getData(),{clipShape:this._getClipShape(r)}),this._finished=a.end===r.getData().count()},t.prototype.updateTransform=function(a,r,n){var i=a.getData();if(this.group.dirty(),!this._finished||i.count()>1e4)return{update:!0};var o=fu("").reset(a,r,n);o.progress&&o.progress({start:0,end:i.count(),count:i.count()},i),this._symbolDraw.updateLayout(i)},t.prototype.eachRendered=function(a){this._symbolDraw&&this._symbolDraw.eachRendered(a)},t.prototype._getClipShape=function(a){if(a.get("clip",!0)){var r=a.coordinateSystem;return r&&r.getArea&&r.getArea(.1)}},t.prototype._updateSymbolDraw=function(a,r){var n=this._symbolDraw,i=r.pipelineContext,o=i.large;return(!n||o!==this._isLargeDraw)&&(n&&n.remove(),n=this._symbolDraw=o?new UF:new hu,this._isLargeDraw=o,this.group.removeAll()),this.group.add(n.group),n},t.prototype.remove=function(a,r){this._symbolDraw&&this._symbolDraw.remove(!0),this._symbolDraw=null},t.prototype.dispose=function(){},t.type="scatter",t}(ra),YF=function(e){gt(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.type="grid",t.dependencies=["xAxis","yAxis"],t.layoutMode="box",t.defaultOption={show:!1,z:0,left:"10%",top:60,right:"10%",bottom:70,containLabel:!1,backgroundColor:"rgba(0,0,0,0)",borderWidth:1,borderColor:"#ccc"},t}(da),_v=function(e){gt(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getCoordSysModel=function(){return this.getReferringComponents("grid",yr).models[0]},t.type="cartesian2dAxis",t}(da);$r(_v,iu);var lA={show:!0,z:0,inverse:!1,name:"",nameLocation:"end",nameRotate:null,nameTruncate:{maxWidth:null,ellipsis:"...",placeholder:"."},nameTextStyle:{},nameGap:15,silent:!1,triggerEvent:!1,tooltip:{show:!1},axisPointer:{},axisLine:{show:!0,onZero:!0,onZeroAxisIndex:null,lineStyle:{color:"#6E7079",width:1,type:"solid"},symbol:["none","none"],symbolSize:[10,15]},axisTick:{show:!0,inside:!1,length:5,lineStyle:{width:1}},axisLabel:{show:!0,inside:!1,rotate:0,showMinLabel:null,showMaxLabel:null,margin:8,fontSize:12},splitLine:{show:!0,showMinLine:!0,showMaxLine:!0,lineStyle:{color:["#E0E6F1"],width:1,type:"solid"}},splitArea:{show:!1,areaStyle:{color:["rgba(250,250,250,0.2)","rgba(210,219,238,0.2)"]}}},XF=Be({boundaryGap:!0,deduplication:null,splitLine:{show:!1},axisTick:{alignWithLabel:!1,interval:"auto"},axisLabel:{interval:"auto"}},lA),Sy=Be({boundaryGap:[0,0],axisLine:{show:"auto"},axisTick:{show:"auto"},splitNumber:5,minorTick:{show:!1,splitNumber:5,length:3,lineStyle:{}},minorSplitLine:{show:!1,lineStyle:{color:"#F4F7FD",width:1}}},lA),ZF=Be({splitNumber:6,axisLabel:{showMinLabel:!1,showMaxLabel:!1,rich:{primary:{fontWeight:"bold"}}},splitLine:{show:!1}},Sy),KF=_e({logBase:10},Sy);const cA={category:XF,value:Sy,time:ZF,log:KF};var JF={value:1,category:1,time:1,log:1};function Hs(e,t,a,r){G(JF,function(n,i){var o=Be(Be({},cA[i],!0),r,!0),s=function(l){gt(c,l);function c(){var u=l!==null&&l.apply(this,arguments)||this;return u.type=t+"Axis."+i,u}return c.prototype.mergeDefaultAndTheme=function(u,h){var d=q3(this),f=d?lf(u):{},p=h.getTheme();Be(u,p.get(i+"Axis")),Be(u,this.getDefaultOption()),u.type=Z1(u),d&&cf(u,f,d)},c.prototype.optionUpdated=function(){var u=this.option;u.type==="category"&&(this.__ordinalMeta=U3.createByAxisModel(this))},c.prototype.getCategories=function(u){var h=this.option;if(h.type==="category")return u?h.data:this.__ordinalMeta.categories},c.prototype.getOrdinalMeta=function(){return this.__ordinalMeta},c.type=t+"Axis."+i,c.defaultOption=o,c}(a);e.registerComponentModel(s)}),e.registerSubTypeDefaulter(t+"Axis",Z1)}function Z1(e){return e.type||(e.data?"category":"value")}var QF=function(){function e(t){this.type="cartesian",this._dimList=[],this._axes={},this.name=t||""}return e.prototype.getAxis=function(t){return this._axes[t]},e.prototype.getAxes=function(){return Ot(this._dimList,function(t){return this._axes[t]},this)},e.prototype.getAxesByScale=function(t){return t=t.toLowerCase(),Va(this.getAxes(),function(a){return a.scale.type===t})},e.prototype.addAxis=function(t){var a=t.dim;this._axes[a]=t,this._dimList.push(a)},e}(),bv=["x","y"];function K1(e){return e.type==="interval"||e.type==="time"}var t8=function(e){gt(t,e);function t(){var a=e!==null&&e.apply(this,arguments)||this;return a.type="cartesian2d",a.dimensions=bv,a}return t.prototype.calcAffineTransform=function(){this._transform=this._invTransform=null;var a=this.getAxis("x").scale,r=this.getAxis("y").scale;if(!(!K1(a)||!K1(r))){var n=a.getExtent(),i=r.getExtent(),o=this.dataToPoint([n[0],i[0]]),s=this.dataToPoint([n[1],i[1]]),l=n[1]-n[0],c=i[1]-i[0];if(!(!l||!c)){var u=(s[0]-o[0])/l,h=(s[1]-o[1])/c,d=o[0]-n[0]*u,f=o[1]-i[0]*h,p=this._transform=[u,0,0,h,d,f];this._invTransform=eT([],p)}}},t.prototype.getBaseAxis=function(){return this.getAxesByScale("ordinal")[0]||this.getAxesByScale("time")[0]||this.getAxis("x")},t.prototype.containPoint=function(a){var r=this.getAxis("x"),n=this.getAxis("y");return r.contain(r.toLocalCoord(a[0]))&&n.contain(n.toLocalCoord(a[1]))},t.prototype.containData=function(a){return this.getAxis("x").containData(a[0])&&this.getAxis("y").containData(a[1])},t.prototype.containZone=function(a,r){var n=this.dataToPoint(a),i=this.dataToPoint(r),o=this.getArea(),s=new aa(n[0],n[1],i[0]-n[0],i[1]-n[1]);return o.intersect(s)},t.prototype.dataToPoint=function(a,r,n){n=n||[];var i=a[0],o=a[1];if(this._transform&&i!=null&&isFinite(i)&&o!=null&&isFinite(o))return Kn(n,a,this._transform);var s=this.getAxis("x"),l=this.getAxis("y");return n[0]=s.toGlobalCoord(s.dataToCoord(i,r)),n[1]=l.toGlobalCoord(l.dataToCoord(o,r)),n},t.prototype.clampData=function(a,r){var n=this.getAxis("x").scale,i=this.getAxis("y").scale,o=n.getExtent(),s=i.getExtent(),l=n.parse(a[0]),c=i.parse(a[1]);return r=r||[],r[0]=Math.min(Math.max(Math.min(o[0],o[1]),l),Math.max(o[0],o[1])),r[1]=Math.min(Math.max(Math.min(s[0],s[1]),c),Math.max(s[0],s[1])),r},t.prototype.pointToData=function(a,r){var n=[];if(this._invTransform)return Kn(n,a,this._invTransform);var i=this.getAxis("x"),o=this.getAxis("y");return n[0]=i.coordToData(i.toLocalCoord(a[0]),r),n[1]=o.coordToData(o.toLocalCoord(a[1]),r),n},t.prototype.getOtherAxis=function(a){return this.getAxis(a.dim==="x"?"y":"x")},t.prototype.getArea=function(a){a=a||0;var r=this.getAxis("x").getGlobalExtent(),n=this.getAxis("y").getGlobalExtent(),i=Math.min(r[0],r[1])-a,o=Math.min(n[0],n[1])-a,s=Math.max(r[0],r[1])-i+a,l=Math.max(n[0],n[1])-o+a;return new aa(i,o,s,l)},t}(QF),e8=function(e){gt(t,e);function t(a,r,n,i,o){var s=e.call(this,a,r,n)||this;return s.index=0,s.type=i||"value",s.position=o||"bottom",s}return t.prototype.isHorizontal=function(){var a=this.position;return a==="top"||a==="bottom"},t.prototype.getGlobalExtent=function(a){var r=this.getExtent();return r[0]=this.toGlobalCoord(r[0]),r[1]=this.toGlobalCoord(r[1]),a&&r[0]>r[1]&&r.reverse(),r},t.prototype.pointToData=function(a,r){return this.coordToData(this.toLocalCoord(a[this.dim==="x"?0:1]),r)},t.prototype.setCategorySortInfo=function(a){if(this.type!=="category")return!1;this.model.option.categorySortInfo=a,this.scale.setSortInfo(a)},t}(Jr);function xv(e,t,a){a=a||{};var r=e.coordinateSystem,n=t.axis,i={},o=n.getAxesOnZeroOf()[0],s=n.position,l=o?"onZero":s,c=n.dim,u=r.getRect(),h=[u.x,u.x+u.width,u.y,u.y+u.height],d={left:0,right:1,top:0,bottom:1,onZero:2},f=t.get("offset")||0,p=c==="x"?[h[2]-f,h[3]+f]:[h[0]-f,h[1]+f];if(o){var g=o.toGlobalCoord(o.dataToCoord(0));p[d.onZero]=Math.max(Math.min(g,p[1]),p[0])}i.position=[c==="y"?p[d[l]]:h[0],c==="x"?p[d[l]]:h[3]],i.rotation=Math.PI/2*(c==="x"?0:1);var v={top:-1,bottom:1,left:-1,right:1};i.labelDirection=i.tickDirection=i.nameDirection=v[s],i.labelOffset=o?p[d[s]]-p[d.onZero]:0,t.get(["axisTick","inside"])&&(i.tickDirection=-i.tickDirection),Ma(a.labelInside,t.get(["axisLabel","inside"]))&&(i.labelDirection=-i.labelDirection);var _=t.get(["axisLabel","rotate"]);return i.labelRotate=l==="top"?-_:_,i.z2=1,i}function J1(e){return e.get("coordinateSystem")==="cartesian2d"}function Q1(e){var t={xAxisModel:null,yAxisModel:null};return G(t,function(a,r){var n=r.replace(/Model$/,""),i=e.getReferringComponents(n,yr).models[0];t[r]=i}),t}var Tp=Math.log;function uA(e,t,a){var r=Yh.prototype,n=r.getTicks.call(a),i=r.getTicks.call(a,!0),o=n.length-1,s=r.getInterval.call(a),l=j3(e,t),c=l.extent,u=l.fixMin,h=l.fixMax;if(e.type==="log"){var d=Tp(e.base);c=[Tp(c[0])/d,Tp(c[1])/d]}e.setExtent(c[0],c[1]),e.calcNiceExtent({splitNumber:o,fixMin:u,fixMax:h});var f=r.getExtent.call(e);u&&(c[0]=f[0]),h&&(c[1]=f[1]);var p=r.getInterval.call(e),g=c[0],v=c[1];if(u&&h)p=(v-g)/o;else if(u)for(v=c[0]+p*o;v<c[1]&&isFinite(v)&&isFinite(c[1]);)p=hp(p),v=c[0]+p*o;else if(h)for(g=c[1]-p*o;g>c[0]&&isFinite(g)&&isFinite(c[0]);)p=hp(p),g=c[1]-p*o;else{var _=e.getTicks().length-1;_>o&&(p=hp(p));var y=p*o;v=Math.ceil(c[1]/p)*p,g=_n(v-y),g<0&&c[0]>=0?(g=0,v=_n(y)):v>0&&c[1]<=0&&(v=0,g=-_n(y))}var b=(n[0].value-i[0].value)/s,w=(n[o].value-i[o].value)/s;r.setExtent.call(e,g+p*b,v+p*w),r.setInterval.call(e,p),(b||w)&&r.setNiceExtent.call(e,g+p,v-p)}var a8=function(){function e(t,a,r){this.type="grid",this._coordsMap={},this._coordsList=[],this._axesMap={},this._axesList=[],this.axisPointerEnabled=!0,this.dimensions=bv,this._initCartesian(t,a,r),this.model=t}return e.prototype.getRect=function(){return this._rect},e.prototype.update=function(t,a){var r=this._axesMap;this._updateScale(t,this.model);function n(o){var s,l=pa(o),c=l.length;if(c){for(var u=[],h=c-1;h>=0;h--){var d=+l[h],f=o[d],p=f.model,g=f.scale;sv(g)&&p.get("alignTicks")&&p.get("interval")==null?u.push(f):($s(g,p),sv(g)&&(s=f))}u.length&&(s||(s=u.pop(),$s(s.scale,s.model)),G(u,function(v){uA(v.scale,v.model,s.scale)}))}}n(r.x),n(r.y);var i={};G(r.x,function(o){tb(r,"y",o,i)}),G(r.y,function(o){tb(r,"x",o,i)}),this.resize(this.model,a)},e.prototype.resize=function(t,a,r){var n=t.getBoxLayoutParams(),i=!r&&t.get("containLabel"),o=ka(n,{width:a.getWidth(),height:a.getHeight()});this._rect=o;var s=this._axesList;l(),i&&(G(s,function(c){if(!c.model.get(["axisLabel","inside"])){var u=Y3(c);if(u){var h=c.isHorizontal()?"height":"width",d=c.model.get(["axisLabel","margin"]);o[h]-=u[h]+d,c.position==="top"?o.y+=u.height+d:c.position==="left"&&(o.x+=u.width+d)}}}),l()),G(this._coordsList,function(c){c.calcAffineTransform()});function l(){G(s,function(c){var u=c.isHorizontal(),h=u?[0,o.width]:[0,o.height],d=c.inverse?1:0;c.setExtent(h[d],h[1-d]),r8(c,u?o.x:o.y)})}},e.prototype.getAxis=function(t,a){var r=this._axesMap[t];if(r!=null)return r[a||0]},e.prototype.getAxes=function(){return this._axesList.slice()},e.prototype.getCartesian=function(t,a){if(t!=null&&a!=null){var r="x"+t+"y"+a;return this._coordsMap[r]}na(t)&&(a=t.yAxisIndex,t=t.xAxisIndex);for(var n=0,i=this._coordsList;n<i.length;n++)if(i[n].getAxis("x").index===t||i[n].getAxis("y").index===a)return i[n]},e.prototype.getCartesians=function(){return this._coordsList.slice()},e.prototype.convertToPixel=function(t,a,r){var n=this._findConvertTarget(a);return n.cartesian?n.cartesian.dataToPoint(r):n.axis?n.axis.toGlobalCoord(n.axis.dataToCoord(r)):null},e.prototype.convertFromPixel=function(t,a,r){var n=this._findConvertTarget(a);return n.cartesian?n.cartesian.pointToData(r):n.axis?n.axis.coordToData(n.axis.toLocalCoord(r)):null},e.prototype._findConvertTarget=function(t){var a=t.seriesModel,r=t.xAxisModel||a&&a.getReferringComponents("xAxis",yr).models[0],n=t.yAxisModel||a&&a.getReferringComponents("yAxis",yr).models[0],i=t.gridModel,o=this._coordsList,s,l;if(a)s=a.coordinateSystem,Xe(o,s)<0&&(s=null);else if(r&&n)s=this.getCartesian(r.componentIndex,n.componentIndex);else if(r)l=this.getAxis("x",r.componentIndex);else if(n)l=this.getAxis("y",n.componentIndex);else if(i){var c=i.coordinateSystem;c===this&&(s=this._coordsList[0])}return{cartesian:s,axis:l}},e.prototype.containPoint=function(t){var a=this._coordsList[0];if(a)return a.containPoint(t)},e.prototype._initCartesian=function(t,a,r){var n=this,i=this,o={left:!1,right:!1,top:!1,bottom:!1},s={x:{},y:{}},l={x:0,y:0};if(a.eachComponent("xAxis",c("x"),this),a.eachComponent("yAxis",c("y"),this),!l.x||!l.y){this._axesMap={},this._axesList=[];return}this._axesMap=s,G(s.x,function(u,h){G(s.y,function(d,f){var p="x"+h+"y"+f,g=new t8(p);g.master=n,g.model=t,n._coordsMap[p]=g,n._coordsList.push(g),g.addAxis(u),g.addAxis(d)})});function c(u){return function(h,d){if(Ap(h,t)){var f=h.get("position");u==="x"?f!=="top"&&f!=="bottom"&&(f=o.bottom?"top":"bottom"):f!=="left"&&f!=="right"&&(f=o.left?"right":"left"),o[f]=!0;var p=new e8(u,uf(h),[0,0],h.get("type"),f),g=p.type==="category";p.onBand=g&&h.get("boundaryGap"),p.inverse=h.get("inverse"),h.axis=p,p.model=h,p.grid=i,p.index=d,i._axesList.push(p),s[u][d]=p,l[u]++}}}},e.prototype._updateScale=function(t,a){G(this._axesList,function(n){if(n.scale.setExtent(1/0,-1/0),n.type==="category"){var i=n.model.get("categorySortInfo");n.scale.setSortInfo(i)}}),t.eachSeries(function(n){if(J1(n)){var i=Q1(n),o=i.xAxisModel,s=i.yAxisModel;if(!Ap(o,a)||!Ap(s,a))return;var l=this.getCartesian(o.componentIndex,s.componentIndex),c=n.getData(),u=l.getAxis("x"),h=l.getAxis("y");r(c,u),r(c,h)}},this);function r(n,i){G(ov(n,i.dim),function(o){i.scale.unionExtentFromData(n,o)})}},e.prototype.getTooltipAxes=function(t){var a=[],r=[];return G(this.getCartesians(),function(n){var i=t!=null&&t!=="auto"?n.getAxis(t):n.getBaseAxis(),o=n.getOtherAxis(i);Xe(a,i)<0&&a.push(i),Xe(r,o)<0&&r.push(o)}),{baseAxes:a,otherAxes:r}},e.create=function(t,a){var r=[];return t.eachComponent("grid",function(n,i){var o=new e(n,t,a);o.name="grid_"+i,o.resize(n,a,!0),n.coordinateSystem=o,r.push(o)}),t.eachSeries(function(n){if(J1(n)){var i=Q1(n),o=i.xAxisModel,s=i.yAxisModel,l=o.getCoordSysModel(),c=l.coordinateSystem;n.coordinateSystem=c.getCartesian(o.componentIndex,s.componentIndex)}}),r},e.dimensions=bv,e}();function Ap(e,t){return e.getCoordSysModel()===t}function tb(e,t,a,r){a.getAxesOnZeroOf=function(){return i?[i]:[]};var n=e[t],i,o=a.model,s=o.get(["axisLine","onZero"]),l=o.get(["axisLine","onZeroAxisIndex"]);if(!s)return;if(l!=null)eb(n[l])&&(i=n[l]);else for(var c in n)if(n.hasOwnProperty(c)&&eb(n[c])&&!r[u(n[c])]){i=n[c];break}i&&(r[u(i)]=!0);function u(h){return h.dim+"_"+h.index}}function eb(e){return e&&e.type!=="category"&&e.type!=="time"&&X3(e)}function r8(e,t){var a=e.getExtent(),r=a[0]+a[1];e.toGlobalCoord=e.dim==="x"?function(n){return n+t}:function(n){return r-n+t},e.toLocalCoord=e.dim==="x"?function(n){return n-t}:function(n){return r-n+t}}var wi=Math.PI,ir=function(){function e(t,a){this.group=new ie,this.opt=a,this.axisModel=t,_e(a,{labelOffset:0,nameDirection:1,tickDirection:1,labelDirection:1,silent:!0,handleAutoShown:function(){return!0}});var r=new ie({x:a.position[0],y:a.position[1],rotation:a.rotation});r.updateTransform(),this._transformGroup=r}return e.prototype.hasBuilder=function(t){return!!ab[t]},e.prototype.add=function(t){ab[t](this.opt,this.axisModel,this.group,this._transformGroup)},e.prototype.getGroup=function(){return this.group},e.innerTextLayout=function(t,a,r){var n=aT(a-t),i,o;return kc(n)?(o=r>0?"top":"bottom",i="center"):kc(n-wi)?(o=r>0?"bottom":"top",i="center"):(o="middle",n>0&&n<wi?i=r>0?"right":"left":i=r>0?"left":"right"),{rotation:n,textAlign:i,textVerticalAlign:o}},e.makeAxisEventDataBase=function(t){var a={componentType:t.mainType,componentIndex:t.componentIndex};return a[t.mainType+"Index"]=t.componentIndex,a},e.isLabelSilent=function(t){var a=t.get("tooltip");return t.get("silent")||!(t.get("triggerEvent")||a&&a.show)},e}(),ab={axisLine:function(e,t,a,r){var n=t.get(["axisLine","show"]);if(n==="auto"&&e.handleAutoShown&&(n=e.handleAutoShown("axisLine")),!!n){var i=t.axis.getExtent(),o=r.transform,s=[i[0],0],l=[i[1],0],c=s[0]>l[0];o&&(Kn(s,s,o),Kn(l,l,o));var u=Vt({lineCap:"round"},t.getModel(["axisLine","lineStyle"]).getLineStyle()),h=new tr({shape:{x1:s[0],y1:s[1],x2:l[0],y2:l[1]},style:u,strokeContainThreshold:e.strokeContainThreshold||5,silent:!0,z2:1});Ac(h.shape,h.style.lineWidth),h.anid="line",a.add(h);var d=t.get(["axisLine","symbol"]);if(d!=null){var f=t.get(["axisLine","symbolSize"]);ge(d)&&(d=[d,d]),(ge(f)||Ea(f))&&(f=[f,f]);var p=Oo(t.get(["axisLine","symbolOffset"])||0,f),g=f[0],v=f[1];G([{rotate:e.rotation+Math.PI/2,offset:p[0],r:0},{rotate:e.rotation-Math.PI/2,offset:p[1],r:Math.sqrt((s[0]-l[0])*(s[0]-l[0])+(s[1]-l[1])*(s[1]-l[1]))}],function(_,y){if(d[y]!=="none"&&d[y]!=null){var b=ba(d[y],-g/2,-v/2,g,v,u.stroke,!0),w=_.r+_.offset,T=c?l:s;b.attr({rotation:_.rotate,x:T[0]+w*Math.cos(e.rotation),y:T[1]-w*Math.sin(e.rotation),silent:!0,z2:11}),a.add(b)}})}}},axisTickLabel:function(e,t,a,r){var n=o8(a,r,t,e),i=l8(a,r,t,e);if(i8(t,i,n),s8(a,r,t,e.tickDirection),t.get(["axisLabel","hideOverlap"])){var o=Z3(Ot(i,function(s){return{label:s,priority:s.z2,defaultAttr:{ignore:s.ignore}}}));K3(o)}},axisName:function(e,t,a,r){var n=Ma(e.axisName,t.get("name"));if(n){var i=t.get("nameLocation"),o=e.nameDirection,s=t.getModel("nameTextStyle"),l=t.get("nameGap")||0,c=t.axis.getExtent(),u=c[0]>c[1]?-1:1,h=[i==="start"?c[0]-u*l:i==="end"?c[1]+u*l:(c[0]+c[1])/2,nb(i)?e.labelOffset+o*l:0],d,f=t.get("nameRotate");f!=null&&(f=f*wi/180);var p;nb(i)?d=ir.innerTextLayout(e.rotation,f??e.rotation,o):(d=n8(e.rotation,i,f||0,c),p=e.axisNameAvailableWidth,p!=null&&(p=Math.abs(p/Math.sin(d.rotation)),!isFinite(p)&&(p=null)));var g=s.getFont(),v=t.get("nameTruncate",!0)||{},_=v.ellipsis,y=Ma(e.nameTruncateMaxWidth,v.maxWidth,p),b=new Oe({x:h[0],y:h[1],rotation:d.rotation,silent:ir.isLabelSilent(t),style:Ke(s,{text:n,font:g,overflow:"truncate",width:y,ellipsis:_,fill:s.getTextColor()||t.get(["axisLine","lineStyle","color"]),align:s.get("align")||d.textAlign,verticalAlign:s.get("verticalAlign")||d.textVerticalAlign}),z2:1});if(ll({el:b,componentModel:t,itemName:n}),b.__fullText=n,b.anid="name",t.get("triggerEvent")){var w=ir.makeAxisEventDataBase(t);w.targetType="axisName",w.name=n,Ae(b).eventData=w}r.add(b),b.updateTransform(),a.add(b),b.decomposeTransform()}}};function n8(e,t,a,r){var n=aT(a-e),i,o,s=r[0]>r[1],l=t==="start"&&!s||t!=="start"&&s;return kc(n-wi/2)?(o=l?"bottom":"top",i="center"):kc(n-wi*1.5)?(o=l?"top":"bottom",i="center"):(o="middle",n<wi*1.5&&n>wi/2?i=l?"left":"right":i=l?"right":"left"),{rotation:n,textAlign:i,textVerticalAlign:o}}function i8(e,t,a){if(!J3(e.axis)){var r=e.get(["axisLabel","showMinLabel"]),n=e.get(["axisLabel","showMaxLabel"]);t=t||[],a=a||[];var i=t[0],o=t[1],s=t[t.length-1],l=t[t.length-2],c=a[0],u=a[1],h=a[a.length-1],d=a[a.length-2];r===!1?(Cr(i),Cr(c)):rb(i,o)&&(r?(Cr(o),Cr(u)):(Cr(i),Cr(c))),n===!1?(Cr(s),Cr(h)):rb(l,s)&&(n?(Cr(l),Cr(d)):(Cr(s),Cr(h)))}}function Cr(e){e&&(e.ignore=!0)}function rb(e,t){var a=e&&e.getBoundingRect().clone(),r=t&&t.getBoundingRect().clone();if(!(!a||!r)){var n=Q3([]);return cl(n,n,-e.rotation),a.applyTransform(Xh([],n,e.getLocalTransform())),r.applyTransform(Xh([],n,t.getLocalTransform())),a.intersect(r)}}function nb(e){return e==="middle"||e==="center"}function hA(e,t,a,r,n){for(var i=[],o=[],s=[],l=0;l<e.length;l++){var c=e[l].coord;o[0]=c,o[1]=0,s[0]=c,s[1]=a,t&&(Kn(o,o,t),Kn(s,s,t));var u=new tr({shape:{x1:o[0],y1:o[1],x2:s[0],y2:s[1]},style:r,z2:2,autoBatch:!0,silent:!0});Ac(u.shape,u.style.lineWidth),u.anid=n+"_"+e[l].tickValue,i.push(u)}return i}function o8(e,t,a,r){var n=a.axis,i=a.getModel("axisTick"),o=i.get("show");if(o==="auto"&&r.handleAutoShown&&(o=r.handleAutoShown("axisTick")),!(!o||n.scale.isBlank())){for(var s=i.getModel("lineStyle"),l=r.tickDirection*i.get("length"),c=n.getTicksCoords(),u=hA(c,t.transform,l,_e(s.getLineStyle(),{stroke:a.get(["axisLine","lineStyle","color"])}),"ticks"),h=0;h<u.length;h++)e.add(u[h]);return u}}function s8(e,t,a,r){var n=a.axis,i=a.getModel("minorTick");if(!(!i.get("show")||n.scale.isBlank())){var o=n.getMinorTicksCoords();if(o.length)for(var s=i.getModel("lineStyle"),l=r*i.get("length"),c=_e(s.getLineStyle(),_e(a.getModel("axisTick").getLineStyle(),{stroke:a.get(["axisLine","lineStyle","color"])})),u=0;u<o.length;u++)for(var h=hA(o[u],t.transform,l,c,"minorticks_"+u),d=0;d<h.length;d++)e.add(h[d])}}function l8(e,t,a,r){var n=a.axis,i=Ma(r.axisLabelShow,a.get(["axisLabel","show"]));if(!(!i||n.scale.isBlank())){var o=a.getModel("axisLabel"),s=o.get("margin"),l=n.getViewLabels(),c=(Ma(r.labelRotate,o.get("rotate"))||0)*wi/180,u=ir.innerTextLayout(r.rotation,c,r.labelDirection),h=a.getCategories&&a.getCategories(!0),d=[],f=ir.isLabelSilent(a),p=a.get("triggerEvent");return G(l,function(g,v){var _=n.scale.type==="ordinal"?n.scale.getRawOrdinalNumber(g.tickValue):g.tickValue,y=g.formattedLabel,b=g.rawLabel,w=o;if(h&&h[_]){var T=h[_];na(T)&&T.textStyle&&(w=new _a(T.textStyle,o,a.ecModel))}var C=w.getTextColor()||a.get(["axisLine","lineStyle","color"]),A=n.dataToCoord(_),k=w.getShallow("align",!0)||u.textAlign,L=sa(w.getShallow("alignMinLabel",!0),k),M=sa(w.getShallow("alignMaxLabel",!0),k),P=w.getShallow("verticalAlign",!0)||w.getShallow("baseline",!0)||u.textVerticalAlign,E=sa(w.getShallow("verticalAlignMinLabel",!0),P),D=sa(w.getShallow("verticalAlignMaxLabel",!0),P),O=new Oe({x:A,y:r.labelOffset+r.labelDirection*s,rotation:u.rotation,silent:f,z2:10+(g.level||0),style:Ke(w,{text:y,align:v===0?L:v===l.length-1?M:k,verticalAlign:v===0?E:v===l.length-1?D:P,fill:Me(C)?C(n.type==="category"?b:n.type==="value"?_+"":_,v):C})});if(O.anid="label_"+_,ll({el:O,componentModel:a,itemName:y,formatterParamsExtra:{isTruncated:function(){return O.isTruncated},value:b,tickIndex:v}}),p){var B=ir.makeAxisEventDataBase(a);B.targetType="axisLabel",B.value=b,B.tickIndex=v,n.type==="category"&&(B.dataIndex=_),Ae(O).eventData=B}t.add(O),O.updateTransform(),d.push(O),e.add(O),O.decomposeTransform()}),d}}function c8(e,t){var a={axesInfo:{},seriesInvolved:!1,coordSysAxesInfo:{},coordSysMap:{}};return u8(a,e,t),a.seriesInvolved&&d8(a,e),a}function u8(e,t,a){var r=t.getComponent("tooltip"),n=t.getComponent("axisPointer"),i=n.get("link",!0)||[],o=[];G(a.getCoordinateSystems(),function(s){if(!s.axisPointerEnabled)return;var l=Bc(s.model),c=e.coordSysAxesInfo[l]={};e.coordSysMap[l]=s;var u=s.model,h=u.getModel("tooltip",r);if(G(s.getAxes(),pe(g,!1,null)),s.getTooltipAxes&&r&&h.get("show")){var d=h.get("trigger")==="axis",f=h.get(["axisPointer","type"])==="cross",p=s.getTooltipAxes(h.get(["axisPointer","axis"]));(d||f)&&G(p.baseAxes,pe(g,f?"cross":!0,d)),f&&G(p.otherAxes,pe(g,"cross",!1))}function g(v,_,y){var b=y.model.getModel("axisPointer",n),w=b.get("show");if(!(!w||w==="auto"&&!v&&!Sv(b))){_==null&&(_=b.get("triggerTooltip")),b=v?h8(y,h,n,t,v,_):b;var T=b.get("snap"),C=b.get("triggerEmphasis"),A=Bc(y.model),k=_||T||y.type==="category",L=e.axesInfo[A]={key:A,axis:y,coordSys:s,axisPointerModel:b,triggerTooltip:_,triggerEmphasis:C,involveSeries:k,snap:T,useHandle:Sv(b),seriesModels:[],linkGroup:null};c[A]=L,e.seriesInvolved=e.seriesInvolved||k;var M=f8(i,y);if(M!=null){var P=o[M]||(o[M]={axesInfo:{}});P.axesInfo[A]=L,P.mapper=i[M].mapper,L.linkGroup=P}}}})}function h8(e,t,a,r,n,i){var o=t.getModel("axisPointer"),s=["type","snap","lineStyle","shadowStyle","label","animation","animationDurationUpdate","animationEasingUpdate","z"],l={};G(s,function(d){l[d]=Pe(o.get(d))}),l.snap=e.type!=="category"&&!!i,o.get("type")==="cross"&&(l.type="line");var c=l.label||(l.label={});if(c.show==null&&(c.show=!1),n==="cross"){var u=o.get(["label","show"]);if(c.show=u??!0,!i){var h=l.lineStyle=o.get("crossStyle");h&&_e(c,h.textStyle)}}return e.model.getModel("axisPointer",new _a(l,a,r))}function d8(e,t){t.eachSeries(function(a){var r=a.coordinateSystem,n=a.get(["tooltip","trigger"],!0),i=a.get(["tooltip","show"],!0);!r||n==="none"||n===!1||n==="item"||i===!1||a.get(["axisPointer","show"],!0)===!1||G(e.coordSysAxesInfo[Bc(r.model)],function(o){var s=o.axis;r.getAxis(s.dim)===s&&(o.seriesModels.push(a),o.seriesDataCount==null&&(o.seriesDataCount=0),o.seriesDataCount+=a.getData().count())})})}function f8(e,t){for(var a=t.model,r=t.dim,n=0;n<e.length;n++){var i=e[n]||{};if(kp(i[r+"AxisId"],a.id)||kp(i[r+"AxisIndex"],a.componentIndex)||kp(i[r+"AxisName"],a.name))return n}}function kp(e,t){return e==="all"||Nt(e)&&Xe(e,t)>=0||e===t}function p8(e){var t=wy(e);if(t){var a=t.axisPointerModel,r=t.axis.scale,n=a.option,i=a.get("status"),o=a.get("value");o!=null&&(o=r.parse(o));var s=Sv(a);i==null&&(n.status=s?"show":"hide");var l=r.getExtent().slice();l[0]>l[1]&&l.reverse(),(o==null||o>l[1])&&(o=l[1]),o<l[0]&&(o=l[0]),n.value=o,s&&(n.status=t.axis.scale.isBlank()?"hide":"show")}}function wy(e){var t=(e.ecModel.getComponent("axisPointer")||{}).coordSysAxesInfo;return t&&t.axesInfo[Bc(e)]}function g8(e){var t=wy(e);return t&&t.axisPointerModel}function Sv(e){return!!e.get(["handle","show"])}function Bc(e){return e.type+"||"+e.id}var ib={},Vo=function(e){gt(t,e);function t(){var a=e!==null&&e.apply(this,arguments)||this;return a.type=t.type,a}return t.prototype.render=function(a,r,n,i){this.axisPointerClass&&p8(a),e.prototype.render.apply(this,arguments),this._doUpdateAxisPointerClass(a,n,!0)},t.prototype.updateAxisPointer=function(a,r,n,i){this._doUpdateAxisPointerClass(a,n,!1)},t.prototype.remove=function(a,r){var n=this._axisPointer;n&&n.remove(r)},t.prototype.dispose=function(a,r){this._disposeAxisPointer(r),e.prototype.dispose.apply(this,arguments)},t.prototype._doUpdateAxisPointerClass=function(a,r,n){var i=t.getAxisPointerClass(this.axisPointerClass);if(i){var o=g8(a);o?(this._axisPointer||(this._axisPointer=new i)).render(a,o,r,n):this._disposeAxisPointer(r)}},t.prototype._disposeAxisPointer=function(a){this._axisPointer&&this._axisPointer.dispose(a),this._axisPointer=null},t.registerAxisPointerClass=function(a,r){ib[a]=r},t.getAxisPointerClass=function(a){return a&&ib[a]},t.type="axis",t}(ma),wv=ia();function dA(e,t,a,r){var n=a.axis;if(!n.scale.isBlank()){var i=a.getModel("splitArea"),o=i.getModel("areaStyle"),s=o.get("color"),l=r.coordinateSystem.getRect(),c=n.getTicksCoords({tickModel:i,clamp:!0});if(c.length){var u=s.length,h=wv(e).splitAreaColors,d=ke(),f=0;if(h)for(var p=0;p<c.length;p++){var g=h.get(c[p].tickValue);if(g!=null){f=(g+(u-1)*p)%u;break}}var v=n.toGlobalCoord(c[0].coord),_=o.getAreaStyle();s=Nt(s)?s:[s];for(var p=1;p<c.length;p++){var y=n.toGlobalCoord(c[p].coord),b=void 0,w=void 0,T=void 0,C=void 0;n.isHorizontal()?(b=v,w=l.y,T=y-b,C=l.height,v=b+T):(b=l.x,w=v,T=l.width,C=y-w,v=w+C);var A=c[p-1].tickValue;A!=null&&d.set(A,f),t.add(new Ge({anid:A!=null?"area_"+A:null,shape:{x:b,y:w,width:T,height:C},style:_e({fill:s[f]},_),autoBatch:!0,silent:!0})),f=(f+1)%u}wv(e).splitAreaColors=d}}}function fA(e){wv(e).splitAreaColors=null}var v8=["axisLine","axisTickLabel","axisName"],m8=["splitArea","splitLine","minorSplitLine"],pA=function(e){gt(t,e);function t(){var a=e!==null&&e.apply(this,arguments)||this;return a.type=t.type,a.axisPointerClass="CartesianAxisPointer",a}return t.prototype.render=function(a,r,n,i){this.group.removeAll();var o=this._axisGroup;if(this._axisGroup=new ie,this.group.add(this._axisGroup),!!a.get("show")){var s=a.getCoordSysModel(),l=xv(s,a),c=new ir(a,Vt({handleAutoShown:function(h){for(var d=s.coordinateSystem.getCartesians(),f=0;f<d.length;f++)if(sv(d[f].getOtherAxis(a.axis).scale))return!0;return!1}},l));G(v8,c.add,c),this._axisGroup.add(c.getGroup()),G(m8,function(h){a.get([h,"show"])&&y8[h](this,this._axisGroup,a,s)},this);var u=i&&i.type==="changeAxisOrder"&&i.isInitSort;u||hf(o,this._axisGroup,a),e.prototype.render.call(this,a,r,n,i)}},t.prototype.remove=function(){fA(this)},t.type="cartesianAxis",t}(Vo),y8={splitLine:function(e,t,a,r){var n=a.axis;if(!n.scale.isBlank()){var i=a.getModel("splitLine"),o=i.getModel("lineStyle"),s=o.get("color"),l=i.get("showMinLine")!==!1,c=i.get("showMaxLine")!==!1;s=Nt(s)?s:[s];for(var u=r.coordinateSystem.getRect(),h=n.isHorizontal(),d=0,f=n.getTicksCoords({tickModel:i}),p=[],g=[],v=o.getLineStyle(),_=0;_<f.length;_++){var y=n.toGlobalCoord(f[_].coord);if(!(_===0&&!l||_===f.length-1&&!c)){var b=f[_].tickValue;h?(p[0]=y,p[1]=u.y,g[0]=y,g[1]=u.y+u.height):(p[0]=u.x,p[1]=y,g[0]=u.x+u.width,g[1]=y);var w=d++%s.length,T=new tr({anid:b!=null?"line_"+b:null,autoBatch:!0,shape:{x1:p[0],y1:p[1],x2:g[0],y2:g[1]},style:_e({stroke:s[w]},v),silent:!0});Ac(T.shape,v.lineWidth),t.add(T)}}}},minorSplitLine:function(e,t,a,r){var n=a.axis,i=a.getModel("minorSplitLine"),o=i.getModel("lineStyle"),s=r.coordinateSystem.getRect(),l=n.isHorizontal(),c=n.getMinorTicksCoords();if(c.length)for(var u=[],h=[],d=o.getLineStyle(),f=0;f<c.length;f++)for(var p=0;p<c[f].length;p++){var g=n.toGlobalCoord(c[f][p].coord);l?(u[0]=g,u[1]=s.y,h[0]=g,h[1]=s.y+s.height):(u[0]=s.x,u[1]=g,h[0]=s.x+s.width,h[1]=g);var v=new tr({anid:"minor_line_"+c[f][p].tickValue,autoBatch:!0,shape:{x1:u[0],y1:u[1],x2:h[0],y2:h[1]},style:d,silent:!0});Ac(v.shape,d.lineWidth),t.add(v)}},splitArea:function(e,t,a,r){dA(e,t,a,r)}},gA=function(e){gt(t,e);function t(){var a=e!==null&&e.apply(this,arguments)||this;return a.type=t.type,a}return t.type="xAxis",t}(pA),_8=function(e){gt(t,e);function t(){var a=e!==null&&e.apply(this,arguments)||this;return a.type=gA.type,a}return t.type="yAxis",t}(pA),b8=function(e){gt(t,e);function t(){var a=e!==null&&e.apply(this,arguments)||this;return a.type="grid",a}return t.prototype.render=function(a,r){this.group.removeAll(),a.get("show")&&this.group.add(new Ge({shape:a.coordinateSystem.getRect(),style:_e({fill:a.get("backgroundColor")},a.getItemStyle()),silent:!0,z2:-1}))},t.type="grid",t}(ma),ob={offset:0};function vA(e){e.registerComponentView(b8),e.registerComponentModel(YF),e.registerCoordinateSystem("cartesian2d",a8),Hs(e,"x",_v,ob),Hs(e,"y",_v,ob),e.registerComponentView(gA),e.registerComponentView(_8),e.registerPreprocessor(function(t){t.xAxis&&t.yAxis&&!t.grid&&(t.grid={})})}function Cy(e){ue(vA),e.registerSeriesModel(HF),e.registerChartView(jF),e.registerLayout(fu("scatter"))}function x8(e){e.eachSeriesByType("radar",function(t){var a=t.getData(),r=[],n=t.coordinateSystem;if(n){var i=n.getIndicatorAxes();G(i,function(o,s){a.each(a.mapDimension(i[s].dim),function(l,c){r[c]=r[c]||[];var u=n.dataToPoint(l,s);r[c][s]=sb(u)?u:lb(n)})}),a.each(function(o){var s=t5(r[o],function(l){return sb(l)})||lb(n);r[o].push(s.slice()),a.setItemLayout(o,r[o])})}})}function sb(e){return!isNaN(e[0])&&!isNaN(e[1])}function lb(e){return[e.cx,e.cy]}function S8(e){var t=e.polar;if(t){Nt(t)||(t=[t]);var a=[];G(t,function(r,n){r.indicator?(r.type&&!r.shape&&(r.shape=r.type),e.radar=e.radar||[],Nt(e.radar)||(e.radar=[e.radar]),e.radar.push(r)):a.push(r)}),e.polar=a}G(e.series,function(r){r&&r.type==="radar"&&r.polarIndex&&(r.radarIndex=r.polarIndex)})}var w8=function(e){gt(t,e);function t(){var a=e!==null&&e.apply(this,arguments)||this;return a.type=t.type,a}return t.prototype.render=function(a,r,n){var i=a.coordinateSystem,o=this.group,s=a.getData(),l=this._data;function c(d,f){var p=d.getItemVisual(f,"symbol")||"circle";if(p!=="none"){var g=il(d.getItemVisual(f,"symbolSize")),v=ba(p,-1,-1,2,2),_=d.getItemVisual(f,"symbolRotate")||0;return v.attr({style:{strokeNoScale:!0},z2:100,scaleX:g[0]/2,scaleY:g[1]/2,rotation:_*Math.PI/180||0}),v}}function u(d,f,p,g,v,_){p.removeAll();for(var y=0;y<f.length-1;y++){var b=c(g,v);b&&(b.__dimIdx=y,d[y]?(b.setPosition(d[y]),No[_?"initProps":"updateProps"](b,{x:f[y][0],y:f[y][1]},a,v)):b.setPosition(f[y]),p.add(b))}}function h(d){return Ot(d,function(f){return[i.cx,i.cy]})}s.diff(l).add(function(d){var f=s.getItemLayout(d);if(f){var p=new Br,g=new Kr,v={shape:{points:f}};p.shape.points=h(f),g.shape.points=h(f),la(p,v,a,d),la(g,v,a,d);var _=new ie,y=new ie;_.add(g),_.add(p),_.add(y),u(g.shape.points,f,y,s,d,!0),s.setItemGraphicEl(d,_)}}).update(function(d,f){var p=l.getItemGraphicEl(f),g=p.childAt(0),v=p.childAt(1),_=p.childAt(2),y={shape:{points:s.getItemLayout(d)}};y.shape.points&&(u(g.shape.points,y.shape.points,_,s,d,!1),Yr(v),Yr(g),ze(g,y,a),ze(v,y,a),s.setItemGraphicEl(d,p))}).remove(function(d){o.remove(l.getItemGraphicEl(d))}).execute(),s.eachItemGraphicEl(function(d,f){var p=s.getItemModel(f),g=d.childAt(0),v=d.childAt(1),_=d.childAt(2),y=s.getItemVisual(f,"style"),b=y.fill;o.add(d),g.useStyle(_e(p.getModel("lineStyle").getLineStyle(),{fill:"none",stroke:b})),za(g,p,"lineStyle"),za(v,p,"areaStyle");var w=p.getModel("areaStyle"),T=w.isEmpty()&&w.parentModel.isEmpty();v.ignore=T,G(["emphasis","select","blur"],function(k){var L=p.getModel([k,"areaStyle"]),M=L.isEmpty()&&L.parentModel.isEmpty();v.ensureState(k).ignore=M&&T}),v.useStyle(_e(w.getAreaStyle(),{fill:b,opacity:.7,decal:y.decal}));var C=p.getModel("emphasis"),A=C.getModel("itemStyle").getItemStyle();_.eachChild(function(k){if(k instanceof Zr){var L=k.style;k.useStyle(Vt({image:L.image,x:L.x,y:L.y,width:L.width,height:L.height},y))}else k.useStyle(y),k.setColor(b),k.style.strokeNoScale=!0;var M=k.ensureState("emphasis");M.style=Pe(A);var P=s.getStore().get(s.getDimensionIndex(k.__dimIdx),f);(P==null||isNaN(P))&&(P=""),Fa(k,Aa(p),{labelFetcher:s.hostModel,labelDataIndex:f,labelDimIndex:k.__dimIdx,defaultText:P,inheritColor:b,defaultOpacity:y.opacity})}),Qe(d,C.get("focus"),C.get("blurScope"),C.get("disabled"))}),this._data=s},t.prototype.remove=function(){this.group.removeAll(),this._data=null},t.type="radar",t}(ra),C8=function(e){gt(t,e);function t(){var a=e!==null&&e.apply(this,arguments)||this;return a.type=t.type,a.hasSymbolVisual=!0,a}return t.prototype.init=function(a){e.prototype.init.apply(this,arguments),this.legendVisualProvider=new gu(Ut(this.getData,this),Ut(this.getRawData,this))},t.prototype.getInitialData=function(a,r){return dl(this,{generateCoord:"indicator_",generateCoordCount:1/0})},t.prototype.formatTooltip=function(a,r,n){var i=this.getData(),o=this.coordinateSystem,s=o.getIndicatorAxes(),l=this.getData().getName(a),c=l===""?this.name:l,u=e5(this,a);return Za("section",{header:c,sortBlocks:!0,blocks:Ot(s,function(h){var d=i.get(i.mapDimension(h.dim),a);return Za("nameValue",{markerType:"subItem",markerColor:u,name:h.name,value:d,sortParam:d})})})},t.prototype.getTooltipPosition=function(a){if(a!=null){for(var r=this.getData(),n=this.coordinateSystem,i=r.getValues(Ot(n.dimensions,function(c){return r.mapDimension(c)}),a),o=0,s=i.length;o<s;o++)if(!isNaN(i[o])){var l=n.getIndicatorAxes();return n.coordToPoint(l[o].dataToCoord(i[o]),o)}}},t.type="series.radar",t.dependencies=["radar"],t.defaultOption={z:2,colorBy:"data",coordinateSystem:"radar",legendHoverLink:!0,radarIndex:0,lineStyle:{width:2,type:"solid",join:"round"},label:{position:"top"},symbolSize:8},t}(ha),wl=cA.value;function Fu(e,t){return _e({show:t},e)}var T8=function(e){gt(t,e);function t(){var a=e!==null&&e.apply(this,arguments)||this;return a.type=t.type,a}return t.prototype.optionUpdated=function(){var a=this.get("boundaryGap"),r=this.get("splitNumber"),n=this.get("scale"),i=this.get("axisLine"),o=this.get("axisTick"),s=this.get("axisLabel"),l=this.get("axisName"),c=this.get(["axisName","show"]),u=this.get(["axisName","formatter"]),h=this.get("axisNameGap"),d=this.get("triggerEvent"),f=Ot(this.get("indicator")||[],function(p){p.max!=null&&p.max>0&&!p.min?p.min=0:p.min!=null&&p.min<0&&!p.max&&(p.max=0);var g=l;p.color!=null&&(g=_e({color:p.color},l));var v=Be(Pe(p),{boundaryGap:a,splitNumber:r,scale:n,axisLine:i,axisTick:o,axisLabel:s,name:p.text,showName:c,nameLocation:"end",nameGap:h,nameTextStyle:g,triggerEvent:d},!1);if(ge(u)){var _=v.name;v.name=u.replace("{value}",_??"")}else Me(u)&&(v.name=u(v.name,v));var y=new _a(v,null,this.ecModel);return $r(y,iu.prototype),y.mainType="radar",y.componentIndex=this.componentIndex,y},this);this._indicatorModels=f},t.prototype.getIndicatorModels=function(){return this._indicatorModels},t.type="radar",t.defaultOption={z:0,center:["50%","50%"],radius:"75%",startAngle:90,axisName:{show:!0},boundaryGap:[0,0],splitNumber:5,axisNameGap:15,scale:!1,shape:"polygon",axisLine:Be({lineStyle:{color:"#bbb"}},wl.axisLine),axisLabel:Fu(wl.axisLabel,!1),axisTick:Fu(wl.axisTick,!1),splitLine:Fu(wl.splitLine,!0),splitArea:Fu(wl.splitArea,!0),indicator:[]},t}(da),A8=["axisLine","axisTickLabel","axisName"],k8=function(e){gt(t,e);function t(){var a=e!==null&&e.apply(this,arguments)||this;return a.type=t.type,a}return t.prototype.render=function(a,r,n){var i=this.group;i.removeAll(),this._buildAxes(a),this._buildSplitLineAndArea(a)},t.prototype._buildAxes=function(a){var r=a.coordinateSystem,n=r.getIndicatorAxes(),i=Ot(n,function(o){var s=o.model.get("showName")?o.name:"",l=new ir(o.model,{axisName:s,position:[r.cx,r.cy],rotation:o.angle,labelDirection:-1,tickDirection:-1,nameDirection:1});return l});G(i,function(o){G(A8,o.add,o),this.group.add(o.getGroup())},this)},t.prototype._buildSplitLineAndArea=function(a){var r=a.coordinateSystem,n=r.getIndicatorAxes();if(!n.length)return;var i=a.get("shape"),o=a.getModel("splitLine"),s=a.getModel("splitArea"),l=o.getModel("lineStyle"),c=s.getModel("areaStyle"),u=o.get("show"),h=s.get("show"),d=l.get("color"),f=c.get("color"),p=Nt(d)?d:[d],g=Nt(f)?f:[f],v=[],_=[];function y(B,R,V){var z=V%R.length;return B[z]=B[z]||[],z}if(i==="circle")for(var b=n[0].getTicksCoords(),w=r.cx,T=r.cy,C=0;C<b.length;C++){if(u){var A=y(v,p,C);v[A].push(new ou({shape:{cx:w,cy:T,r:b[C].coord}}))}if(h&&C<b.length-1){var A=y(_,g,C);_[A].push(new rT({shape:{cx:w,cy:T,r0:b[C].coord,r:b[C+1].coord}}))}}else for(var k,L=Ot(n,function(B,R){var V=B.getTicksCoords();return k=k==null?V.length-1:Math.min(V.length-1,k),Ot(V,function(z){return r.coordToPoint(z.coord,R)})}),M=[],C=0;C<=k;C++){for(var P=[],E=0;E<n.length;E++)P.push(L[E][C]);if(P[0]&&P.push(P[0].slice()),u){var A=y(v,p,C);v[A].push(new Kr({shape:{points:P}}))}if(h&&M){var A=y(_,g,C-1);_[A].push(new Br({shape:{points:P.concat(M)}}))}M=P.slice().reverse()}var D=l.getLineStyle(),O=c.getAreaStyle();G(_,function(B,R){this.group.add(Vr(B,{style:_e({stroke:"none",fill:g[R%g.length]},O),silent:!0}))},this),G(v,function(B,R){this.group.add(Vr(B,{style:_e({fill:"none",stroke:p[R%p.length]},D),silent:!0}))},this)},t.type="radar",t}(ma),D8=function(e){gt(t,e);function t(a,r,n){var i=e.call(this,a,r,n)||this;return i.type="value",i.angle=0,i.name="",i}return t}(Jr),L8=function(){function e(t,a,r){this.dimensions=[],this._model=t,this._indicatorAxes=Ot(t.getIndicatorModels(),function(n,i){var o="indicator_"+i,s=new D8(o,new Yh);return s.name=n.get("name"),s.model=n,n.axis=s,this.dimensions.push(o),s},this),this.resize(t,r)}return e.prototype.getIndicatorAxes=function(){return this._indicatorAxes},e.prototype.dataToPoint=function(t,a){var r=this._indicatorAxes[a];return this.coordToPoint(r.dataToCoord(t),a)},e.prototype.coordToPoint=function(t,a){var r=this._indicatorAxes[a],n=r.angle,i=this.cx+t*Math.cos(n),o=this.cy-t*Math.sin(n);return[i,o]},e.prototype.pointToData=function(t){var a=t[0]-this.cx,r=t[1]-this.cy,n=Math.sqrt(a*a+r*r);a/=n,r/=n;for(var i=Math.atan2(-r,a),o=1/0,s,l=-1,c=0;c<this._indicatorAxes.length;c++){var u=this._indicatorAxes[c],h=Math.abs(i-u.angle);h<o&&(s=u,l=c,o=h)}return[l,+(s&&s.coordToData(n))]},e.prototype.resize=function(t,a){var r=t.get("center"),n=a.getWidth(),i=a.getHeight(),o=Math.min(n,i)/2;this.cx=Ft(r[0],n),this.cy=Ft(r[1],i),this.startAngle=t.get("startAngle")*Math.PI/180;var s=t.get("radius");(ge(s)||Ea(s))&&(s=[0,s]),this.r0=Ft(s[0],o),this.r=Ft(s[1],o),G(this._indicatorAxes,function(l,c){l.setExtent(this.r0,this.r);var u=this.startAngle+c*Math.PI*2/this._indicatorAxes.length;u=Math.atan2(Math.sin(u),Math.cos(u)),l.angle=u},this)},e.prototype.update=function(t,a){var r=this._indicatorAxes,n=this._model;G(r,function(s){s.scale.setExtent(1/0,-1/0)}),t.eachSeriesByType("radar",function(s,l){if(!(s.get("coordinateSystem")!=="radar"||t.getComponent("radar",s.get("radarIndex"))!==n)){var c=s.getData();G(r,function(u){u.scale.unionExtentFromData(c,c.mapDimension(u.dim))})}},this);var i=n.get("splitNumber"),o=new Yh;o.setExtent(0,i),o.setInterval(1),G(r,function(s,l){uA(s.scale,s.model,o)})},e.prototype.convertToPixel=function(t,a,r){return console.warn("Not implemented."),null},e.prototype.convertFromPixel=function(t,a,r){return console.warn("Not implemented."),null},e.prototype.containPoint=function(t){return console.warn("Not implemented."),!1},e.create=function(t,a){var r=[];return t.eachComponent("radar",function(n){var i=new e(n,t,a);r.push(i),n.coordinateSystem=i}),t.eachSeriesByType("radar",function(n){n.get("coordinateSystem")==="radar"&&(n.coordinateSystem=r[n.get("radarIndex")||0])}),r},e.dimensions=[],e}();function I8(e){e.registerCoordinateSystem("radar",L8),e.registerComponentModel(T8),e.registerComponentView(k8),e.registerVisual({seriesType:"radar",reset:function(t){var a=t.getData();a.each(function(r){a.setItemVisual(r,"legendIcon","roundRect")}),a.setVisual("legendIcon","roundRect")}})}function Ty(e){ue(I8),e.registerChartView(w8),e.registerSeriesModel(C8),e.registerLayout(x8),e.registerProcessor(pu("radar")),e.registerPreprocessor(S8)}var cb="\0_ec_interaction_mutex";function M8(e,t,a){var r=Ay(e);r[t]=a}function E8(e,t,a){var r=Ay(e),n=r[t];n===a&&(r[t]=null)}function ub(e,t){return!!Ay(e)[t]}function Ay(e){return e[cb]||(e[cb]={})}df({type:"takeGlobalCursor",event:"globalCursorTaken",update:"update"},xn);var vu=function(e){gt(t,e);function t(a){var r=e.call(this)||this;r._zr=a;var n=Ut(r._mousedownHandler,r),i=Ut(r._mousemoveHandler,r),o=Ut(r._mouseupHandler,r),s=Ut(r._mousewheelHandler,r),l=Ut(r._pinchHandler,r);return r.enable=function(c,u){this.disable(),this._opt=_e(Pe(u)||{},{zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!1,preventDefaultMouseMove:!0}),c==null&&(c=!0),(c===!0||c==="move"||c==="pan")&&(a.on("mousedown",n),a.on("mousemove",i),a.on("mouseup",o)),(c===!0||c==="scale"||c==="zoom")&&(a.on("mousewheel",s),a.on("pinch",l))},r.disable=function(){a.off("mousedown",n),a.off("mousemove",i),a.off("mouseup",o),a.off("mousewheel",s),a.off("pinch",l)},r}return t.prototype.isDragging=function(){return this._dragging},t.prototype.isPinching=function(){return this._pinching},t.prototype.setPointerChecker=function(a){this.pointerChecker=a},t.prototype.dispose=function(){this.disable()},t.prototype._mousedownHandler=function(a){if(!Q_(a)){for(var r=a.target;r;){if(r.draggable)return;r=r.__hostTarget||r.parent}var n=a.offsetX,i=a.offsetY;this.pointerChecker&&this.pointerChecker(a,n,i)&&(this._x=n,this._y=i,this._dragging=!0)}},t.prototype._mousemoveHandler=function(a){if(!(!this._dragging||!mh("moveOnMouseMove",a,this._opt)||a.gestureEvent==="pinch"||ub(this._zr,"globalPan"))){var r=a.offsetX,n=a.offsetY,i=this._x,o=this._y,s=r-i,l=n-o;this._x=r,this._y=n,this._opt.preventDefaultMouseMove&&Mi(a.event),mA(this,"pan","moveOnMouseMove",a,{dx:s,dy:l,oldX:i,oldY:o,newX:r,newY:n,isAvailableBehavior:null})}},t.prototype._mouseupHandler=function(a){Q_(a)||(this._dragging=!1)},t.prototype._mousewheelHandler=function(a){var r=mh("zoomOnMouseWheel",a,this._opt),n=mh("moveOnMouseWheel",a,this._opt),i=a.wheelDelta,o=Math.abs(i),s=a.offsetX,l=a.offsetY;if(!(i===0||!r&&!n)){if(r){var c=o>3?1.4:o>1?1.2:1.1,u=i>0?c:1/c;Dp(this,"zoom","zoomOnMouseWheel",a,{scale:u,originX:s,originY:l,isAvailableBehavior:null})}if(n){var h=Math.abs(i),d=(i>0?1:-1)*(h>3?.4:h>1?.15:.05);Dp(this,"scrollMove","moveOnMouseWheel",a,{scrollDelta:d,originX:s,originY:l,isAvailableBehavior:null})}}},t.prototype._pinchHandler=function(a){if(!ub(this._zr,"globalPan")){var r=a.pinchScale>1?1.1:1/1.1;Dp(this,"zoom",null,a,{scale:r,originX:a.pinchX,originY:a.pinchY,isAvailableBehavior:null})}},t}(hy);function Dp(e,t,a,r,n){e.pointerChecker&&e.pointerChecker(r,n.originX,n.originY)&&(Mi(r.event),mA(e,t,a,r,n))}function mA(e,t,a,r,n){n.isAvailableBehavior=Ut(mh,null,a,r),e.trigger(t,n)}function mh(e,t,a){var r=a[e];return!e||r&&(!ge(r)||t.event[r+"Key"])}function ky(e,t,a){var r=e.target;r.x+=t,r.y+=a,r.dirty()}function Dy(e,t,a,r){var n=e.target,i=e.zoomLimit,o=e.zoom=e.zoom||1;if(o*=t,i){var s=i.min||0,l=i.max||1/0;o=Math.max(Math.min(l,o),s)}var c=o/e.zoom;e.zoom=o,n.x-=(a-n.x)*(c-1),n.y-=(r-n.y)*(c-1),n.scaleX*=c,n.scaleY*=c,n.dirty()}var R8={axisPointer:1,tooltip:1,brush:1};function Sf(e,t,a){var r=t.getComponentByElement(e.topTarget),n=r&&r.coordinateSystem;return r&&r!==a&&!R8.hasOwnProperty(r.mainType)&&n&&n.model!==a}function yA(e){if(ge(e)){var t=new DOMParser;e=t.parseFromString(e,"text/xml")}var a=e;for(a.nodeType===9&&(a=a.firstChild);a.nodeName.toLowerCase()!=="svg"||a.nodeType!==1;)a=a.nextSibling;return a}var Lp,ad={fill:"fill",stroke:"stroke","stroke-width":"lineWidth",opacity:"opacity","fill-opacity":"fillOpacity","stroke-opacity":"strokeOpacity","stroke-dasharray":"lineDash","stroke-dashoffset":"lineDashOffset","stroke-linecap":"lineCap","stroke-linejoin":"lineJoin","stroke-miterlimit":"miterLimit","font-family":"fontFamily","font-size":"fontSize","font-style":"fontStyle","font-weight":"fontWeight","text-anchor":"textAlign",visibility:"visibility",display:"display"},hb=pa(ad),rd={"alignment-baseline":"textBaseline","stop-color":"stopColor"},db=pa(rd),P8=function(){function e(){this._defs={},this._root=null}return e.prototype.parse=function(t,a){a=a||{};var r=yA(t);this._defsUsePending=[];var n=new ie;this._root=n;var i=[],o=r.getAttribute("viewBox")||"",s=parseFloat(r.getAttribute("width")||a.width),l=parseFloat(r.getAttribute("height")||a.height);isNaN(s)&&(s=null),isNaN(l)&&(l=null),_r(r,n,null,!0,!1);for(var c=r.firstChild;c;)this._parseNode(c,n,i,null,!1,!1),c=c.nextSibling;N8(this._defs,this._defsUsePending),this._defsUsePending=[];var u,h;if(o){var d=wf(o);d.length>=4&&(u={x:parseFloat(d[0]||0),y:parseFloat(d[1]||0),width:parseFloat(d[2]),height:parseFloat(d[3])})}if(u&&s!=null&&l!=null&&(h=bA(u,{x:0,y:0,width:s,height:l}),!a.ignoreViewBox)){var f=n;n=new ie,n.add(f),f.scaleX=f.scaleY=h.scale,f.x=h.x,f.y=h.y}return!a.ignoreRootClip&&s!=null&&l!=null&&n.setClipPath(new Ge({shape:{x:0,y:0,width:s,height:l}})),{root:n,width:s,height:l,viewBoxRect:u,viewBoxTransform:h,named:i}},e.prototype._parseNode=function(t,a,r,n,i,o){var s=t.nodeName.toLowerCase(),l,c=n;if(s==="defs"&&(i=!0),s==="text"&&(o=!0),s==="defs"||s==="switch")l=a;else{if(!i){var u=Lp[s];if(u&&Ht(Lp,s)){l=u.call(this,t,a);var h=t.getAttribute("name");if(h){var d={name:h,namedFrom:null,svgNodeTagLower:s,el:l};r.push(d),s==="g"&&(c=d)}else n&&r.push({name:n.name,namedFrom:n,svgNodeTagLower:s,el:l});a.add(l)}}var f=fb[s];if(f&&Ht(fb,s)){var p=f.call(this,t),g=t.getAttribute("id");g&&(this._defs[g]=p)}}if(l&&l.isGroup)for(var v=t.firstChild;v;)v.nodeType===1?this._parseNode(v,l,r,c,i,o):v.nodeType===3&&o&&this._parseText(v,l),v=v.nextSibling},e.prototype._parseText=function(t,a){var r=new nT({style:{text:t.textContent},silent:!0,x:this._textX||0,y:this._textY||0});Tr(a,r),_r(t,r,this._defsUsePending,!1,!1),B8(r,a);var n=r.style,i=n.fontSize;i&&i<9&&(n.fontSize=9,r.scaleX*=i/9,r.scaleY*=i/9);var o=(n.fontSize||n.fontFamily)&&[n.fontStyle,n.fontWeight,(n.fontSize||12)+"px",n.fontFamily||"sans-serif"].join(" ");n.font=o;var s=r.getBoundingRect();return this._textX+=s.width,a.add(r),r},e.internalField=function(){Lp={g:function(t,a){var r=new ie;return Tr(a,r),_r(t,r,this._defsUsePending,!1,!1),r},rect:function(t,a){var r=new Ge;return Tr(a,r),_r(t,r,this._defsUsePending,!1,!1),r.setShape({x:parseFloat(t.getAttribute("x")||"0"),y:parseFloat(t.getAttribute("y")||"0"),width:parseFloat(t.getAttribute("width")||"0"),height:parseFloat(t.getAttribute("height")||"0")}),r.silent=!0,r},circle:function(t,a){var r=new ou;return Tr(a,r),_r(t,r,this._defsUsePending,!1,!1),r.setShape({cx:parseFloat(t.getAttribute("cx")||"0"),cy:parseFloat(t.getAttribute("cy")||"0"),r:parseFloat(t.getAttribute("r")||"0")}),r.silent=!0,r},line:function(t,a){var r=new tr;return Tr(a,r),_r(t,r,this._defsUsePending,!1,!1),r.setShape({x1:parseFloat(t.getAttribute("x1")||"0"),y1:parseFloat(t.getAttribute("y1")||"0"),x2:parseFloat(t.getAttribute("x2")||"0"),y2:parseFloat(t.getAttribute("y2")||"0")}),r.silent=!0,r},ellipse:function(t,a){var r=new r5;return Tr(a,r),_r(t,r,this._defsUsePending,!1,!1),r.setShape({cx:parseFloat(t.getAttribute("cx")||"0"),cy:parseFloat(t.getAttribute("cy")||"0"),rx:parseFloat(t.getAttribute("rx")||"0"),ry:parseFloat(t.getAttribute("ry")||"0")}),r.silent=!0,r},polygon:function(t,a){var r=t.getAttribute("points"),n;r&&(n=vb(r));var i=new Br({shape:{points:n||[]},silent:!0});return Tr(a,i),_r(t,i,this._defsUsePending,!1,!1),i},polyline:function(t,a){var r=t.getAttribute("points"),n;r&&(n=vb(r));var i=new Kr({shape:{points:n||[]},silent:!0});return Tr(a,i),_r(t,i,this._defsUsePending,!1,!1),i},image:function(t,a){var r=new Zr;return Tr(a,r),_r(t,r,this._defsUsePending,!1,!1),r.setStyle({image:t.getAttribute("xlink:href")||t.getAttribute("href"),x:+t.getAttribute("x"),y:+t.getAttribute("y"),width:+t.getAttribute("width"),height:+t.getAttribute("height")}),r.silent=!0,r},text:function(t,a){var r=t.getAttribute("x")||"0",n=t.getAttribute("y")||"0",i=t.getAttribute("dx")||"0",o=t.getAttribute("dy")||"0";this._textX=parseFloat(r)+parseFloat(i),this._textY=parseFloat(n)+parseFloat(o);var s=new ie;return Tr(a,s),_r(t,s,this._defsUsePending,!1,!0),s},tspan:function(t,a){var r=t.getAttribute("x"),n=t.getAttribute("y");r!=null&&(this._textX=parseFloat(r)),n!=null&&(this._textY=parseFloat(n));var i=t.getAttribute("dx")||"0",o=t.getAttribute("dy")||"0",s=new ie;return Tr(a,s),_r(t,s,this._defsUsePending,!1,!0),this._textX+=parseFloat(i),this._textY+=parseFloat(o),s},path:function(t,a){var r=t.getAttribute("d")||"",n=a5(r);return Tr(a,n),_r(t,n,this._defsUsePending,!1,!1),n.silent=!0,n}}}(),e}(),fb={lineargradient:function(e){var t=parseInt(e.getAttribute("x1")||"0",10),a=parseInt(e.getAttribute("y1")||"0",10),r=parseInt(e.getAttribute("x2")||"10",10),n=parseInt(e.getAttribute("y2")||"0",10),i=new Wn(t,a,r,n);return pb(e,i),gb(e,i),i},radialgradient:function(e){var t=parseInt(e.getAttribute("cx")||"0",10),a=parseInt(e.getAttribute("cy")||"0",10),r=parseInt(e.getAttribute("r")||"0",10),n=new n5(t,a,r);return pb(e,n),gb(e,n),n}};function pb(e,t){var a=e.getAttribute("gradientUnits");a==="userSpaceOnUse"&&(t.global=!0)}function gb(e,t){for(var a=e.firstChild;a;){if(a.nodeType===1&&a.nodeName.toLocaleLowerCase()==="stop"){var r=a.getAttribute("offset"),n=void 0;r&&r.indexOf("%")>0?n=parseInt(r,10)/100:r?n=parseFloat(r):n=0;var i={};_A(a,i,i);var o=i.stopColor||a.getAttribute("stop-color")||"#000000";t.colorStops.push({offset:n,color:o})}a=a.nextSibling}}function Tr(e,t){e&&e.__inheritedStyle&&(t.__inheritedStyle||(t.__inheritedStyle={}),_e(t.__inheritedStyle,e.__inheritedStyle))}function vb(e){for(var t=wf(e),a=[],r=0;r<t.length;r+=2){var n=parseFloat(t[r]),i=parseFloat(t[r+1]);a.push([n,i])}return a}function _r(e,t,a,r,n){var i=t,o=i.__inheritedStyle=i.__inheritedStyle||{},s={};e.nodeType===1&&(z8(e,t),_A(e,o,s),r||V8(e,o,s)),i.style=i.style||{},o.fill!=null&&(i.style.fill=mb(i,"fill",o.fill,a)),o.stroke!=null&&(i.style.stroke=mb(i,"stroke",o.stroke,a)),G(["lineWidth","opacity","fillOpacity","strokeOpacity","miterLimit","fontSize"],function(l){o[l]!=null&&(i.style[l]=parseFloat(o[l]))}),G(["lineDashOffset","lineCap","lineJoin","fontWeight","fontFamily","fontStyle","textAlign"],function(l){o[l]!=null&&(i.style[l]=o[l])}),n&&(i.__selfStyle=s),o.lineDash&&(i.style.lineDash=Ot(wf(o.lineDash),function(l){return parseFloat(l)})),(o.visibility==="hidden"||o.visibility==="collapse")&&(i.invisible=!0),o.display==="none"&&(i.ignore=!0)}function B8(e,t){var a=t.__selfStyle;if(a){var r=a.textBaseline,n=r;!r||r==="auto"||r==="baseline"?n="alphabetic":r==="before-edge"||r==="text-before-edge"?n="top":r==="after-edge"||r==="text-after-edge"?n="bottom":(r==="central"||r==="mathematical")&&(n="middle"),e.style.textBaseline=n}var i=t.__inheritedStyle;if(i){var o=i.textAlign,s=o;o&&(o==="middle"&&(s="center"),e.style.textAlign=s)}}var O8=/^url\(\s*#(.*?)\)/;function mb(e,t,a,r){var n=a&&a.match(O8);if(n){var i=iT(n[1]);r.push([e,t,i]);return}return a==="none"&&(a=null),a}function N8(e,t){for(var a=0;a<t.length;a++){var r=t[a];r[0].style[r[1]]=e[r[2]]}}var $8=/-?([0-9]*\.)?[0-9]+([eE]-?[0-9]+)?/g;function wf(e){return e.match($8)||[]}var F8=/(translate|scale|rotate|skewX|skewY|matrix)\(([\-\s0-9\.eE,]*)\)/g,Ip=Math.PI/180;function z8(e,t){var a=e.getAttribute("transform");if(a){a=a.replace(/,/g," ");var r=[],n=null;a.replace(F8,function(h,d,f){return r.push(d,f),""});for(var i=r.length-1;i>0;i-=2){var o=r[i],s=r[i-1],l=wf(o);switch(n=n||$o(),s){case"translate":Ei(n,n,[parseFloat(l[0]),parseFloat(l[1]||"0")]);break;case"scale":oT(n,n,[parseFloat(l[0]),parseFloat(l[1]||l[0])]);break;case"rotate":cl(n,n,-parseFloat(l[0])*Ip,[parseFloat(l[1]||"0"),parseFloat(l[2]||"0")]);break;case"skewX":var c=Math.tan(parseFloat(l[0])*Ip);Xh(n,[1,0,c,1,0,0],n);break;case"skewY":var u=Math.tan(parseFloat(l[0])*Ip);Xh(n,[1,u,0,1,0,0],n);break;case"matrix":n[0]=parseFloat(l[0]),n[1]=parseFloat(l[1]),n[2]=parseFloat(l[2]),n[3]=parseFloat(l[3]),n[4]=parseFloat(l[4]),n[5]=parseFloat(l[5]);break}}t.setLocalTransform(n)}}var yb=/([^\s:;]+)\s*:\s*([^:;]+)/g;function _A(e,t,a){var r=e.getAttribute("style");if(r){yb.lastIndex=0;for(var n;(n=yb.exec(r))!=null;){var i=n[1],o=Ht(ad,i)?ad[i]:null;o&&(t[o]=n[2]);var s=Ht(rd,i)?rd[i]:null;s&&(a[s]=n[2])}}}function V8(e,t,a){for(var r=0;r<hb.length;r++){var n=hb[r],i=e.getAttribute(n);i!=null&&(t[ad[n]]=i)}for(var r=0;r<db.length;r++){var n=db[r],i=e.getAttribute(n);i!=null&&(a[rd[n]]=i)}}function bA(e,t){var a=t.width/e.width,r=t.height/e.height,n=Math.min(a,r);return{scale:n,x:-(e.x+e.width/2)*n+(t.x+t.width/2),y:-(e.y+e.height/2)*n+(t.y+t.height/2)}}function G8(e,t){var a=new P8;return a.parse(e,t)}var H8=ke(["rect","circle","line","ellipse","polygon","polyline","path","text","tspan","g"]),W8=function(){function e(t,a){this.type="geoSVG",this._usedGraphicMap=ke(),this._freedGraphics=[],this._mapName=t,this._parsedXML=yA(a)}return e.prototype.load=function(){var t=this._firstGraphic;if(!t){t=this._firstGraphic=this._buildGraphic(this._parsedXML),this._freedGraphics.push(t),this._boundingRect=this._firstGraphic.boundingRect.clone();var a=U8(t.named),r=a.regions,n=a.regionsMap;this._regions=r,this._regionsMap=n}return{boundingRect:this._boundingRect,regions:this._regions,regionsMap:this._regionsMap}},e.prototype._buildGraphic=function(t){var a,r;try{a=t&&G8(t,{ignoreViewBox:!0,ignoreRootClip:!0})||{},r=a.root,Dc(r!=null)}catch(v){throw new Error(`Invalid svg format
`+v.message)}var n=new ie;n.add(r),n.isGeoSVGGraphicRoot=!0;var i=a.width,o=a.height,s=a.viewBoxRect,l=this._boundingRect;if(!l){var c=void 0,u=void 0,h=void 0,d=void 0;if(i!=null?(c=0,h=i):s&&(c=s.x,h=s.width),o!=null?(u=0,d=o):s&&(u=s.y,d=s.height),c==null||u==null){var f=r.getBoundingRect();c==null&&(c=f.x,h=f.width),u==null&&(u=f.y,d=f.height)}l=this._boundingRect=new aa(c,u,h,d)}if(s){var p=bA(s,l);r.scaleX=r.scaleY=p.scale,r.x=p.x,r.y=p.y}n.setClipPath(new Ge({shape:l.plain()}));var g=[];return G(a.named,function(v){H8.get(v.svgNodeTagLower)!=null&&(g.push(v),q8(v.el))}),{root:n,boundingRect:l,named:g}},e.prototype.useGraphic=function(t){var a=this._usedGraphicMap,r=a.get(t);return r||(r=this._freedGraphics.pop()||this._buildGraphic(this._parsedXML),a.set(t,r),r)},e.prototype.freeGraphic=function(t){var a=this._usedGraphicMap,r=a.get(t);r&&(a.removeKey(t),this._freedGraphics.push(r))},e}();function q8(e){e.silent=!1,e.isGroup&&e.traverse(function(t){t.silent=!1})}function U8(e){var t=[],a=ke();return G(e,function(r){if(r.namedFrom==null){var n=new i5(r.name,r.el);t.push(n),a.set(r.name,n)}}),{regions:t,regionsMap:a}}var Cv=[126,25],_b="南海诸岛",Xi=[[[0,3.5],[7,11.2],[15,11.9],[30,7],[42,.7],[52,.7],[56,7.7],[59,.7],[64,.7],[64,0],[5,0],[0,3.5]],[[13,16.1],[19,14.7],[16,21.7],[11,23.1],[13,16.1]],[[12,32.2],[14,38.5],[15,38.5],[13,32.2],[12,32.2]],[[16,47.6],[12,53.2],[13,53.2],[18,47.6],[16,47.6]],[[6,64.4],[8,70],[9,70],[8,64.4],[6,64.4]],[[23,82.6],[29,79.8],[30,79.8],[25,82.6],[23,82.6]],[[37,70.7],[43,62.3],[44,62.3],[39,70.7],[37,70.7]],[[48,51.1],[51,45.5],[53,45.5],[50,51.1],[48,51.1]],[[51,35],[51,28.7],[53,28.7],[53,35],[51,35]],[[52,22.4],[55,17.5],[56,17.5],[53,22.4],[52,22.4]],[[58,12.6],[62,7],[63,7],[60,12.6],[58,12.6]],[[0,3.5],[0,93.1],[64,93.1],[64,0],[63,0],[63,92.4],[1,92.4],[1,3.5],[0,3.5]]];for(var Hi=0;Hi<Xi.length;Hi++)for(var Uo=0;Uo<Xi[Hi].length;Uo++)Xi[Hi][Uo][0]/=10.5,Xi[Hi][Uo][1]/=-10.5/.75,Xi[Hi][Uo][0]+=Cv[0],Xi[Hi][Uo][1]+=Cv[1];function j8(e,t){if(e==="china"){for(var a=0;a<t.length;a++)if(t[a].name===_b)return;t.push(new o5(_b,Ot(Xi,function(r){return{type:"polygon",exterior:r}}),Cv))}}var Y8={南海诸岛:[32,80],广东:[0,-10],香港:[10,5],澳门:[-10,10],天津:[5,5]};function X8(e,t){if(e==="china"){var a=Y8[t.name];if(a){var r=t.getCenter();r[0]+=a[0]/10.5,r[1]+=-a[1]/(10.5/.75),t.setCenter(r)}}}var Z8=[[[123.45165252685547,25.73527164402261],[123.49731445312499,25.73527164402261],[123.49731445312499,25.750734064600884],[123.45165252685547,25.750734064600884],[123.45165252685547,25.73527164402261]]];function K8(e,t){e==="china"&&t.name==="台湾"&&t.geometries.push({type:"polygon",exterior:Z8[0]})}var J8="name",Q8=function(){function e(t,a,r){this.type="geoJSON",this._parsedMap=ke(),this._mapName=t,this._specialAreas=r,this._geoJSON=e6(a)}return e.prototype.load=function(t,a){a=a||J8;var r=this._parsedMap.get(a);if(!r){var n=this._parseToRegions(a);r=this._parsedMap.set(a,{regions:n,boundingRect:t6(n)})}var i=ke(),o=[];return G(r.regions,function(s){var l=s.name;t&&Ht(t,l)&&(s=s.cloneShallow(l=t[l])),o.push(s),i.set(l,s)}),{regions:o,boundingRect:r.boundingRect||new aa(0,0,0,0),regionsMap:i}},e.prototype._parseToRegions=function(t){var a=this._mapName,r=this._geoJSON,n;try{n=r?s5(r,t):[]}catch(i){throw new Error(`Invalid geoJson format
`+i.message)}return j8(a,n),G(n,function(i){var o=i.name;X8(a,i),K8(a,i);var s=this._specialAreas&&this._specialAreas[o];s&&i.transformTo(s.left,s.top,s.width,s.height)},this),n},e.prototype.getMapForUser=function(){return{geoJson:this._geoJSON,geoJSON:this._geoJSON,specialAreas:this._specialAreas}},e}();function t6(e){for(var t,a=0;a<e.length;a++){var r=e[a].getBoundingRect();t=t||r.clone(),t.union(r)}return t}function e6(e){return ge(e)?typeof JSON<"u"&&JSON.parse?JSON.parse(e):new Function("return ("+e+");")():e}var Cl=ke();const Jn={registerMap:function(e,t,a){if(t.svg){var r=new W8(e,t.svg);Cl.set(e,r)}else{var n=t.geoJson||t.geoJSON;n&&!t.features?a=t.specialAreas:n=t;var r=new Q8(e,n,a);Cl.set(e,r)}},getGeoResource:function(e){return Cl.get(e)},getMapForUser:function(e){var t=Cl.get(e);return t&&t.type==="geoJSON"&&t.getMapForUser()},load:function(e,t,a){var r=Cl.get(e);if(r)return r.load(t,a)}};var Ly=["rect","circle","line","ellipse","polygon","polyline","path"],a6=ke(Ly),r6=ke(Ly.concat(["g"])),n6=ke(Ly.concat(["g"])),xA=ia();function zu(e){var t=e.getItemStyle(),a=e.get("areaColor");return a!=null&&(t.fill=a),t}function bb(e){var t=e.style;t&&(t.stroke=t.stroke||t.fill,t.fill=null)}var SA=function(){function e(t){var a=new ie;this.uid=sT("ec_map_draw"),this._controller=new vu(t.getZr()),this._controllerHost={target:a},this.group=a,a.add(this._regionsGroup=new ie),a.add(this._svgGroup=new ie)}return e.prototype.draw=function(t,a,r,n,i){var o=t.mainType==="geo",s=t.getData&&t.getData();o&&a.eachComponent({mainType:"series",subType:"map"},function(_){!s&&_.getHostGeoModel()===t&&(s=_.getData())});var l=t.coordinateSystem,c=this._regionsGroup,u=this.group,h=l.getTransformInfo(),d=h.raw,f=h.roam,p=!c.childAt(0)||i;p?(u.x=f.x,u.y=f.y,u.scaleX=f.scaleX,u.scaleY=f.scaleY,u.dirty()):ze(u,f,t);var g=s&&s.getVisual("visualMeta")&&s.getVisual("visualMeta").length>0,v={api:r,geo:l,mapOrGeoModel:t,data:s,isVisualEncodedByVisualMap:g,isGeo:o,transformInfoRaw:d};l.resourceType==="geoJSON"?this._buildGeoJSON(v):l.resourceType==="geoSVG"&&this._buildSVG(v),this._updateController(t,a,r),this._updateMapSelectHandler(t,c,r,n)},e.prototype._buildGeoJSON=function(t){var a=this._regionsGroupByName=ke(),r=ke(),n=this._regionsGroup,i=t.transformInfoRaw,o=t.mapOrGeoModel,s=t.data,l=t.geo.projection,c=l&&l.stream;function u(f,p){return p&&(f=p(f)),f&&[f[0]*i.scaleX+i.x,f[1]*i.scaleY+i.y]}function h(f){for(var p=[],g=!c&&l&&l.project,v=0;v<f.length;++v){var _=u(f[v],g);_&&p.push(_)}return p}function d(f){return{shape:{points:h(f)}}}n.removeAll(),G(t.geo.regions,function(f){var p=f.name,g=a.get(p),v=r.get(p)||{},_=v.dataIdx,y=v.regionModel;if(!g){g=a.set(p,new ie),n.add(g),_=s?s.indexOfName(p):null,y=t.isGeo?o.getRegionModel(p):s?s.getItemModel(_):null;var b=y.get("silent",!0);b!=null&&(g.silent=b),r.set(p,{dataIdx:_,regionModel:y})}var w=[],T=[];G(f.geometries,function(k){if(k.type==="polygon"){var L=[k.exterior].concat(k.interiors||[]);c&&(L=Ab(L,c)),G(L,function(P){w.push(new Br(d(P)))})}else{var M=k.points;c&&(M=Ab(M,c,!0)),G(M,function(P){T.push(new Kr(d(P)))})}});var C=u(f.getCenter(),l&&l.project);function A(k,L){if(k.length){var M=new lT({culling:!0,segmentIgnoreThreshold:1,shape:{paths:k}});g.add(M),xb(t,M,_,y),Sb(t,M,p,y,o,_,C),L&&(bb(M),G(M.states,bb))}}A(w),A(T,!0)}),a.each(function(f,p){var g=r.get(p),v=g.dataIdx,_=g.regionModel;wb(t,f,p,_,o,v),Cb(t,f,p,_,o),Tb(t,f,p,_,o)},this)},e.prototype._buildSVG=function(t){var a=t.geo.map,r=t.transformInfoRaw;this._svgGroup.x=r.x,this._svgGroup.y=r.y,this._svgGroup.scaleX=r.scaleX,this._svgGroup.scaleY=r.scaleY,this._svgResourceChanged(a)&&(this._freeSVG(),this._useSVG(a));var n=this._svgDispatcherMap=ke(),i=!1;G(this._svgGraphicRecord.named,function(o){var s=o.name,l=t.mapOrGeoModel,c=t.data,u=o.svgNodeTagLower,h=o.el,d=c?c.indexOfName(s):null,f=l.getRegionModel(s);a6.get(u)!=null&&h instanceof Co&&xb(t,h,d,f),h instanceof Co&&(h.culling=!0);var p=f.get("silent",!0);if(p!=null&&(h.silent=p),h.z2EmphasisLift=0,!o.namedFrom&&(n6.get(u)!=null&&Sb(t,h,s,f,l,d,null),wb(t,h,s,f,l,d),Cb(t,h,s,f,l),r6.get(u)!=null)){var g=Tb(t,h,s,f,l);g==="self"&&(i=!0);var v=n.get(s)||n.set(s,[]);v.push(h)}},this),this._enableBlurEntireSVG(i,t)},e.prototype._enableBlurEntireSVG=function(t,a){if(t&&a.isGeo){var r=a.mapOrGeoModel.getModel(["blur","itemStyle"]).getItemStyle(),n=r.opacity;this._svgGraphicRecord.root.traverse(function(i){if(!i.isGroup){Fs(i);var o=i.ensureState("blur").style||{};o.opacity==null&&n!=null&&(o.opacity=n),i.ensureState("emphasis")}})}},e.prototype.remove=function(){this._regionsGroup.removeAll(),this._regionsGroupByName=null,this._svgGroup.removeAll(),this._freeSVG(),this._controller.dispose(),this._controllerHost=null},e.prototype.findHighDownDispatchers=function(t,a){if(t==null)return[];var r=a.coordinateSystem;if(r.resourceType==="geoJSON"){var n=this._regionsGroupByName;if(n){var i=n.get(t);return i?[i]:[]}}else if(r.resourceType==="geoSVG")return this._svgDispatcherMap&&this._svgDispatcherMap.get(t)||[]},e.prototype._svgResourceChanged=function(t){return this._svgMapName!==t},e.prototype._useSVG=function(t){var a=Jn.getGeoResource(t);if(a&&a.type==="geoSVG"){var r=a.useGraphic(this.uid);this._svgGroup.add(r.root),this._svgGraphicRecord=r,this._svgMapName=t}},e.prototype._freeSVG=function(){var t=this._svgMapName;if(t!=null){var a=Jn.getGeoResource(t);a&&a.type==="geoSVG"&&a.freeGraphic(this.uid),this._svgGraphicRecord=null,this._svgDispatcherMap=null,this._svgGroup.removeAll(),this._svgMapName=null}},e.prototype._updateController=function(t,a,r){var n=t.coordinateSystem,i=this._controller,o=this._controllerHost;o.zoomLimit=t.get("scaleLimit"),o.zoom=n.getZoom(),i.enable(t.get("roam")||!1);var s=t.mainType;function l(){var c={type:"geoRoam",componentType:s};return c[s+"Id"]=t.id,c}i.off("pan").on("pan",function(c){this._mouseDownFlag=!1,ky(o,c.dx,c.dy),r.dispatchAction(Vt(l(),{dx:c.dx,dy:c.dy,animation:{duration:0}}))},this),i.off("zoom").on("zoom",function(c){this._mouseDownFlag=!1,Dy(o,c.scale,c.originX,c.originY),r.dispatchAction(Vt(l(),{totalZoom:o.zoom,zoom:c.scale,originX:c.originX,originY:c.originY,animation:{duration:0}}))},this),i.setPointerChecker(function(c,u,h){return n.containPoint([u,h])&&!Sf(c,r,t)})},e.prototype.resetForLabelLayout=function(){this.group.traverse(function(t){var a=t.getTextContent();a&&(a.ignore=xA(a).ignore)})},e.prototype._updateMapSelectHandler=function(t,a,r,n){var i=this;a.off("mousedown"),a.off("click"),t.get("selectedMode")&&(a.on("mousedown",function(){i._mouseDownFlag=!0}),a.on("click",function(o){i._mouseDownFlag&&(i._mouseDownFlag=!1)}))},e}();function xb(e,t,a,r){var n=r.getModel("itemStyle"),i=r.getModel(["emphasis","itemStyle"]),o=r.getModel(["blur","itemStyle"]),s=r.getModel(["select","itemStyle"]),l=zu(n),c=zu(i),u=zu(s),h=zu(o),d=e.data;if(d){var f=d.getItemVisual(a,"style"),p=d.getItemVisual(a,"decal");e.isVisualEncodedByVisualMap&&f.fill&&(l.fill=f.fill),p&&(l.decal=ff(p,e.api))}t.setStyle(l),t.style.strokeNoScale=!0,t.ensureState("emphasis").style=c,t.ensureState("select").style=u,t.ensureState("blur").style=h,Fs(t)}function Sb(e,t,a,r,n,i,o){var s=e.data,l=e.isGeo,c=s&&isNaN(s.get(s.mapDimension("value"),i)),u=s&&s.getItemLayout(i);if(l||c||u&&u.showLabel){var h=l?a:i,d=void 0;(!s||i>=0)&&(d=n);var f=o?{normal:{align:"center",verticalAlign:"middle"}}:null;Fa(t,Aa(r),{labelFetcher:d,labelDataIndex:h,defaultText:a},f);var p=t.getTextContent();if(p&&(xA(p).ignore=p.ignore,t.textConfig&&o)){var g=t.getBoundingRect().clone();t.textConfig.layoutRect=g,t.textConfig.position=[(o[0]-g.x)/g.width*100+"%",(o[1]-g.y)/g.height*100+"%"]}t.disableLabelAnimation=!0}else t.removeTextContent(),t.removeTextConfig(),t.disableLabelAnimation=null}function wb(e,t,a,r,n,i){e.data?e.data.setItemGraphicEl(i,t):Ae(t).eventData={componentType:"geo",componentIndex:n.componentIndex,geoIndex:n.componentIndex,name:a,region:r&&r.option||{}}}function Cb(e,t,a,r,n){e.data||ll({el:t,componentModel:n,itemName:a,itemTooltipOption:r.get("tooltip")})}function Tb(e,t,a,r,n){t.highDownSilentOnTouch=!!n.get("selectedMode");var i=r.getModel("emphasis"),o=i.get("focus");return Qe(t,o,i.get("blurScope"),i.get("disabled")),e.isGeo&&l5(t,n,a),o}function Ab(e,t,a){var r=[],n;function i(){n=[]}function o(){n.length&&(r.push(n),n=[])}var s=t({polygonStart:i,polygonEnd:o,lineStart:i,lineEnd:o,point:function(l,c){isFinite(l)&&isFinite(c)&&n.push([l,c])},sphere:function(){}});return!a&&s.polygonStart(),G(e,function(l){s.lineStart();for(var c=0;c<l.length;c++)s.point(l[c][0],l[c][1]);s.lineEnd()}),!a&&s.polygonEnd(),r}var i6=function(e){gt(t,e);function t(){var a=e!==null&&e.apply(this,arguments)||this;return a.type=t.type,a}return t.prototype.render=function(a,r,n,i){if(!(i&&i.type==="mapToggleSelect"&&i.from===this.uid)){var o=this.group;if(o.removeAll(),!a.getHostGeoModel()){if(this._mapDraw&&i&&i.type==="geoRoam"&&this._mapDraw.resetForLabelLayout(),i&&i.type==="geoRoam"&&i.componentType==="series"&&i.seriesId===a.id){var s=this._mapDraw;s&&o.add(s.group)}else if(a.needsDrawMap){var s=this._mapDraw||new SA(n);o.add(s.group),s.draw(a,r,n,this,i),this._mapDraw=s}else this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null;a.get("showLegendSymbol")&&r.getComponent("legend")&&this._renderSymbols(a,r,n)}}},t.prototype.remove=function(){this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null,this.group.removeAll()},t.prototype.dispose=function(){this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null},t.prototype._renderSymbols=function(a,r,n){var i=a.originalData,o=this.group;i.each(i.mapDimension("value"),function(s,l){if(!isNaN(s)){var c=i.getItemLayout(l);if(!(!c||!c.point)){var u=c.point,h=c.offset,d=new ou({style:{fill:a.getData().getVisual("style").fill},shape:{cx:u[0]+h*9,cy:u[1],r:3},silent:!0,z2:8+(h?0:su+1)});if(!h){var f=a.mainSeries.getData(),p=i.getName(l),g=f.indexOfName(p),v=i.getItemModel(l),_=v.getModel("label"),y=f.getItemGraphicEl(g);Fa(d,Aa(v),{labelFetcher:{getFormattedLabel:function(b,w){return a.getFormattedLabel(g,w)}},defaultText:p}),d.disableLabelAnimation=!0,_.get("position")||d.setTextConfig({position:"bottom"}),y.onHoverStateChange=function(b){qh(d,b)}}o.add(d)}}})},t.type="map",t}(ra),o6=function(e){gt(t,e);function t(){var a=e!==null&&e.apply(this,arguments)||this;return a.type=t.type,a.needsDrawMap=!1,a.seriesGroup=[],a.getTooltipPosition=function(r){if(r!=null){var n=this.getData().getName(r),i=this.coordinateSystem,o=i.getRegion(n);return o&&i.dataToPoint(o.getCenter())}},a}return t.prototype.getInitialData=function(a){for(var r=dl(this,{coordDimensions:["value"],encodeDefaulter:pe(uy,this)}),n=ke(),i=[],o=0,s=r.count();o<s;o++){var l=r.getName(o);n.set(l,o)}var c=Jn.load(this.getMapType(),this.option.nameMap,this.option.nameProperty);return G(c.regions,function(u){var h=u.name,d=n.get(h),f=u.properties&&u.properties.echartsStyle,p;d==null?(p={name:h},i.push(p)):p=r.getRawDataItem(d),f&&Be(p,f)}),r.appendData(i),r},t.prototype.getHostGeoModel=function(){var a=this.option.geoIndex;return a!=null?this.ecModel.getComponent("geo",a):null},t.prototype.getMapType=function(){return(this.getHostGeoModel()||this).option.map},t.prototype.getRawValue=function(a){var r=this.getData();return r.get(r.mapDimension("value"),a)},t.prototype.getRegionModel=function(a){var r=this.getData();return r.getItemModel(r.indexOfName(a))},t.prototype.formatTooltip=function(a,r,n){for(var i=this.getData(),o=this.getRawValue(a),s=i.getName(a),l=this.seriesGroup,c=[],u=0;u<l.length;u++){var h=l[u].originalData.indexOfName(s),d=i.mapDimension("value");isNaN(l[u].originalData.get(d,h))||c.push(l[u].name)}return Za("section",{header:c.join(", "),noHeader:!c.length,blocks:[Za("nameValue",{name:s,value:o})]})},t.prototype.setZoom=function(a){this.option.zoom=a},t.prototype.setCenter=function(a){this.option.center=a},t.prototype.getLegendIcon=function(a){var r=a.icon||"roundRect",n=ba(r,0,0,a.itemWidth,a.itemHeight,a.itemStyle.fill);return n.setStyle(a.itemStyle),n.style.stroke="none",r.indexOf("empty")>-1&&(n.style.stroke=n.style.fill,n.style.fill="#fff",n.style.lineWidth=2),n},t.type="series.map",t.dependencies=["geo"],t.layoutMode="box",t.defaultOption={z:2,coordinateSystem:"geo",map:"",left:"center",top:"center",aspectScale:null,showLegendSymbol:!0,boundingCoords:null,center:null,zoom:1,scaleLimit:null,selectedMode:!0,label:{show:!1,color:"#000"},itemStyle:{borderWidth:.5,borderColor:"#444",areaColor:"#eee"},emphasis:{label:{show:!0,color:"rgb(100,0,0)"},itemStyle:{areaColor:"rgba(255,215,0,0.8)"}},select:{label:{show:!0,color:"rgb(100,0,0)"},itemStyle:{color:"rgba(255,215,0,0.8)"}},nameProperty:"name"},t}(ha);function s6(e,t){var a={};return G(e,function(r){r.each(r.mapDimension("value"),function(n,i){var o="ec-"+r.getName(i);a[o]=a[o]||[],isNaN(n)||a[o].push(n)})}),e[0].map(e[0].mapDimension("value"),function(r,n){for(var i="ec-"+e[0].getName(n),o=0,s=1/0,l=-1/0,c=a[i].length,u=0;u<c;u++)s=Math.min(s,a[i][u]),l=Math.max(l,a[i][u]),o+=a[i][u];var h;return t==="min"?h=s:t==="max"?h=l:t==="average"?h=o/c:h=o,c===0?NaN:h})}function l6(e){var t={};e.eachSeriesByType("map",function(a){var r=a.getHostGeoModel(),n=r?"o"+r.id:"i"+a.getMapType();(t[n]=t[n]||[]).push(a)}),G(t,function(a,r){for(var n=s6(Ot(a,function(o){return o.getData()}),a[0].get("mapValueCalculation")),i=0;i<a.length;i++)a[i].originalData=a[i].getData();for(var i=0;i<a.length;i++)a[i].seriesGroup=a,a[i].needsDrawMap=i===0&&!a[i].getHostGeoModel(),a[i].setData(n.cloneShallow()),a[i].mainSeries=a[0]})}function c6(e){var t={};e.eachSeriesByType("map",function(a){var r=a.getMapType();if(!(a.getHostGeoModel()||t[r])){var n={};G(a.seriesGroup,function(o){var s=o.coordinateSystem,l=o.originalData;o.get("showLegendSymbol")&&e.getComponent("legend")&&l.each(l.mapDimension("value"),function(c,u){var h=l.getName(u),d=s.getRegion(h);if(!(!d||isNaN(c))){var f=n[h]||0,p=s.dataToPoint(d.getCenter());n[h]=f+1,l.setItemLayout(u,{point:p,offset:f})}})});var i=a.getData();i.each(function(o){var s=i.getName(o),l=i.getItemLayout(o)||{};l.showLabel=!n[s],i.setItemLayout(o,l)}),t[r]=!0}})}var kb=Kn,mu=function(e){gt(t,e);function t(a){var r=e.call(this)||this;return r.type="view",r.dimensions=["x","y"],r._roamTransformable=new Ul,r._rawTransformable=new Ul,r.name=a,r}return t.prototype.setBoundingRect=function(a,r,n,i){return this._rect=new aa(a,r,n,i),this._rect},t.prototype.getBoundingRect=function(){return this._rect},t.prototype.setViewRect=function(a,r,n,i){this._transformTo(a,r,n,i),this._viewRect=new aa(a,r,n,i)},t.prototype._transformTo=function(a,r,n,i){var o=this.getBoundingRect(),s=this._rawTransformable;s.transform=o.calculateTransform(new aa(a,r,n,i));var l=s.parent;s.parent=null,s.decomposeTransform(),s.parent=l,this._updateTransform()},t.prototype.setCenter=function(a,r){a&&(this._center=[Ft(a[0],r.getWidth()),Ft(a[1],r.getHeight())],this._updateCenterAndZoom())},t.prototype.setZoom=function(a){a=a||1;var r=this.zoomLimit;r&&(r.max!=null&&(a=Math.min(r.max,a)),r.min!=null&&(a=Math.max(r.min,a))),this._zoom=a,this._updateCenterAndZoom()},t.prototype.getDefaultCenter=function(){var a=this.getBoundingRect(),r=a.x+a.width/2,n=a.y+a.height/2;return[r,n]},t.prototype.getCenter=function(){return this._center||this.getDefaultCenter()},t.prototype.getZoom=function(){return this._zoom||1},t.prototype.getRoamTransform=function(){return this._roamTransformable.getLocalTransform()},t.prototype._updateCenterAndZoom=function(){var a=this._rawTransformable.getLocalTransform(),r=this._roamTransformable,n=this.getDefaultCenter(),i=this.getCenter(),o=this.getZoom();i=Kn([],i,a),n=Kn([],n,a),r.originX=i[0],r.originY=i[1],r.x=n[0]-i[0],r.y=n[1]-i[1],r.scaleX=r.scaleY=o,this._updateTransform()},t.prototype._updateTransform=function(){var a=this._roamTransformable,r=this._rawTransformable;r.parent=a,a.updateTransform(),r.updateTransform(),c5(this.transform||(this.transform=[]),r.transform||$o()),this._rawTransform=r.getLocalTransform(),this.invTransform=this.invTransform||[],eT(this.invTransform,this.transform),this.decomposeTransform()},t.prototype.getTransformInfo=function(){var a=this._rawTransformable,r=this._roamTransformable,n=new Ul;return n.transform=r.transform,n.decomposeTransform(),{roam:{x:n.x,y:n.y,scaleX:n.scaleX,scaleY:n.scaleY},raw:{x:a.x,y:a.y,scaleX:a.scaleX,scaleY:a.scaleY}}},t.prototype.getViewRect=function(){return this._viewRect},t.prototype.getViewRectAfterRoam=function(){var a=this.getBoundingRect().clone();return a.applyTransform(this.transform),a},t.prototype.dataToPoint=function(a,r,n){var i=r?this._rawTransform:this.transform;return n=n||[],i?kb(n,a,i):Qa(n,a)},t.prototype.pointToData=function(a){var r=this.invTransform;return r?kb([],a,r):[a[0],a[1]]},t.prototype.convertToPixel=function(a,r,n){var i=Db(r);return i===this?i.dataToPoint(n):null},t.prototype.convertFromPixel=function(a,r,n){var i=Db(r);return i===this?i.pointToData(n):null},t.prototype.containPoint=function(a){return this.getViewRectAfterRoam().contain(a[0],a[1])},t.dimensions=["x","y"],t}(Ul);function Db(e){var t=e.seriesModel;return t?t.coordinateSystem:null}var u6={geoJSON:{aspectScale:.75,invertLongitute:!0},geoSVG:{aspectScale:1,invertLongitute:!1}},wA=["lng","lat"],Tv=function(e){gt(t,e);function t(a,r,n){var i=e.call(this,a)||this;i.dimensions=wA,i.type="geo",i._nameCoordMap=ke(),i.map=r;var o=n.projection,s=Jn.load(r,n.nameMap,n.nameProperty),l=Jn.getGeoResource(r);i.resourceType=l?l.type:null;var c=i.regions=s.regions,u=u6[l.type];i._regionsMap=s.regionsMap,i.regions=s.regions,i.projection=o;var h;if(o)for(var d=0;d<c.length;d++){var f=c[d].getBoundingRect(o);h=h||f.clone(),h.union(f)}else h=s.boundingRect;return i.setBoundingRect(h.x,h.y,h.width,h.height),i.aspectScale=o?1:sa(n.aspectScale,u.aspectScale),i._invertLongitute=o?!1:u.invertLongitute,i}return t.prototype._transformTo=function(a,r,n,i){var o=this.getBoundingRect(),s=this._invertLongitute;o=o.clone(),s&&(o.y=-o.y-o.height);var l=this._rawTransformable;l.transform=o.calculateTransform(new aa(a,r,n,i));var c=l.parent;l.parent=null,l.decomposeTransform(),l.parent=c,s&&(l.scaleY=-l.scaleY),this._updateTransform()},t.prototype.getRegion=function(a){return this._regionsMap.get(a)},t.prototype.getRegionByCoord=function(a){for(var r=this.regions,n=0;n<r.length;n++){var i=r[n];if(i.type==="geoJSON"&&i.contain(a))return r[n]}},t.prototype.addGeoCoord=function(a,r){this._nameCoordMap.set(a,r)},t.prototype.getGeoCoord=function(a){var r=this._regionsMap.get(a);return this._nameCoordMap.get(a)||r&&r.getCenter()},t.prototype.dataToPoint=function(a,r,n){if(ge(a)&&(a=this.getGeoCoord(a)),a){var i=this.projection;return i&&(a=i.project(a)),a&&this.projectedToPoint(a,r,n)}},t.prototype.pointToData=function(a){var r=this.projection;return r&&(a=r.unproject(a)),a&&this.pointToProjected(a)},t.prototype.pointToProjected=function(a){return e.prototype.pointToData.call(this,a)},t.prototype.projectedToPoint=function(a,r,n){return e.prototype.dataToPoint.call(this,a,r,n)},t.prototype.convertToPixel=function(a,r,n){var i=Lb(r);return i===this?i.dataToPoint(n):null},t.prototype.convertFromPixel=function(a,r,n){var i=Lb(r);return i===this?i.pointToData(n):null},t}(mu);$r(Tv,mu);function Lb(e){var t=e.geoModel,a=e.seriesModel;return t?t.coordinateSystem:a?a.coordinateSystem||(a.getReferringComponents("geo",yr).models[0]||{}).coordinateSystem:null}function Ib(e,t){var a=e.get("boundingCoords");if(a!=null){var r=a[0],n=a[1];if(isFinite(r[0])&&isFinite(r[1])&&isFinite(n[0])&&isFinite(n[1])){var i=this.projection;if(i){var o=r[0],s=r[1],l=n[0],c=n[1];r=[1/0,1/0],n=[-1/0,-1/0];var u=function(C,A,k,L){for(var M=k-C,P=L-A,E=0;E<=100;E++){var D=E/100,O=i.project([C+M*D,A+P*D]);u5(r,r,O),h5(n,n,O)}};u(o,s,l,s),u(l,s,l,c),u(l,c,o,c),u(o,c,l,s)}this.setBoundingRect(r[0],r[1],n[0]-r[0],n[1]-r[1])}}var h=this.getBoundingRect(),d=e.get("layoutCenter"),f=e.get("layoutSize"),p=t.getWidth(),g=t.getHeight(),v=h.width/h.height*this.aspectScale,_=!1,y,b;d&&f&&(y=[Ft(d[0],p),Ft(d[1],g)],b=Ft(f,Math.min(p,g)),!isNaN(y[0])&&!isNaN(y[1])&&!isNaN(b)&&(_=!0));var w;if(_)w={},v>1?(w.width=b,w.height=b/v):(w.height=b,w.width=b*v),w.y=y[1]-w.height/2,w.x=y[0]-w.width/2;else{var T=e.getBoxLayoutParams();T.aspect=v,w=ka(T,{width:p,height:g})}this.setViewRect(w.x,w.y,w.width,w.height),this.setCenter(e.get("center"),t),this.setZoom(e.get("zoom"))}function h6(e,t){G(t.get("geoCoord"),function(a,r){e.addGeoCoord(r,a)})}var d6=function(){function e(){this.dimensions=wA}return e.prototype.create=function(t,a){var r=[];function n(o){return{nameProperty:o.get("nameProperty"),aspectScale:o.get("aspectScale"),projection:o.get("projection")}}t.eachComponent("geo",function(o,s){var l=o.get("map"),c=new Tv(l+s,l,Vt({nameMap:o.get("nameMap")},n(o)));c.zoomLimit=o.get("scaleLimit"),r.push(c),o.coordinateSystem=c,c.model=o,c.resize=Ib,c.resize(o,a)}),t.eachSeries(function(o){var s=o.get("coordinateSystem");if(s==="geo"){var l=o.get("geoIndex")||0;o.coordinateSystem=r[l]}});var i={};return t.eachSeriesByType("map",function(o){if(!o.getHostGeoModel()){var s=o.getMapType();i[s]=i[s]||[],i[s].push(o)}}),G(i,function(o,s){var l=Ot(o,function(u){return u.get("nameMap")}),c=new Tv(s,s,Vt({nameMap:dy(l)},n(o[0])));c.zoomLimit=Ma.apply(null,Ot(o,function(u){return u.get("scaleLimit")})),r.push(c),c.resize=Ib,c.resize(o[0],a),G(o,function(u){u.coordinateSystem=c,h6(c,u)})}),r},e.prototype.getFilledRegions=function(t,a,r,n){for(var i=(t||[]).slice(),o=ke(),s=0;s<i.length;s++)o.set(i[s].name,i[s]);var l=Jn.load(a,r,n);return G(l.regions,function(c){var u=c.name,h=o.get(u),d=c.properties&&c.properties.echartsStyle;h||(h={name:u},i.push(h)),d&&Be(h,d)}),i},e}(),CA=new d6,f6=function(e){gt(t,e);function t(){var a=e!==null&&e.apply(this,arguments)||this;return a.type=t.type,a}return t.prototype.init=function(a,r,n){var i=Jn.getGeoResource(a.map);if(i&&i.type==="geoJSON"){var o=a.itemStyle=a.itemStyle||{};"color"in o||(o.color="#eee")}this.mergeDefaultAndTheme(a,n),nu(a,"label",["show"])},t.prototype.optionUpdated=function(){var a=this,r=this.option;r.regions=CA.getFilledRegions(r.regions,r.map,r.nameMap,r.nameProperty);var n={};this._optionModelMap=cT(r.regions||[],function(i,o){var s=o.name;return s&&(i.set(s,new _a(o,a,a.ecModel)),o.selected&&(n[s]=!0)),i},ke()),r.selectedMap||(r.selectedMap=n)},t.prototype.getRegionModel=function(a){return this._optionModelMap.get(a)||new _a(null,this,this.ecModel)},t.prototype.getFormattedLabel=function(a,r){var n=this.getRegionModel(a),i=r==="normal"?n.get(["label","formatter"]):n.get(["emphasis","label","formatter"]),o={name:a};if(Me(i))return o.status=r,i(o);if(ge(i))return i.replace("{a}",a??"")},t.prototype.setZoom=function(a){this.option.zoom=a},t.prototype.setCenter=function(a){this.option.center=a},t.prototype.select=function(a){var r=this.option,n=r.selectedMode;if(n){n!=="multiple"&&(r.selectedMap=null);var i=r.selectedMap||(r.selectedMap={});i[a]=!0}},t.prototype.unSelect=function(a){var r=this.option.selectedMap;r&&(r[a]=!1)},t.prototype.toggleSelected=function(a){this[this.isSelected(a)?"unSelect":"select"](a)},t.prototype.isSelected=function(a){var r=this.option.selectedMap;return!!(r&&r[a])},t.type="geo",t.layoutMode="box",t.defaultOption={z:0,show:!0,left:"center",top:"center",aspectScale:null,silent:!1,map:"",boundingCoords:null,center:null,zoom:1,scaleLimit:null,label:{show:!1,color:"#000"},itemStyle:{borderWidth:.5,borderColor:"#444"},emphasis:{label:{show:!0,color:"rgb(100,0,0)"},itemStyle:{color:"rgba(255,215,0,0.8)"}},select:{label:{show:!0,color:"rgb(100,0,0)"},itemStyle:{color:"rgba(255,215,0,0.8)"}},regions:[]},t}(da);function Mb(e,t){return e.pointToProjected?e.pointToProjected(t):e.pointToData(t)}function Iy(e,t,a,r){var n=e.getZoom(),i=e.getCenter(),o=t.zoom,s=e.projectedToPoint?e.projectedToPoint(i):e.dataToPoint(i);if(t.dx!=null&&t.dy!=null&&(s[0]-=t.dx,s[1]-=t.dy,e.setCenter(Mb(e,s),r)),o!=null){if(a){var l=a.min||0,c=a.max||1/0;o=Math.max(Math.min(n*o,c),l)/n}e.scaleX*=o,e.scaleY*=o;var u=(t.originX-e.x)*(o-1),h=(t.originY-e.y)*(o-1);e.x-=u,e.y-=h,e.updateTransform(),e.setCenter(Mb(e,s),r),e.setZoom(o*n)}return{center:e.getCenter(),zoom:e.getZoom()}}var p6=function(e){gt(t,e);function t(){var a=e!==null&&e.apply(this,arguments)||this;return a.type=t.type,a.focusBlurEnabled=!0,a}return t.prototype.init=function(a,r){this._api=r},t.prototype.render=function(a,r,n,i){if(this._model=a,!a.get("show")){this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null;return}this._mapDraw||(this._mapDraw=new SA(n));var o=this._mapDraw;o.draw(a,r,n,this,i),o.group.on("click",this._handleRegionClick,this),o.group.silent=a.get("silent"),this.group.add(o.group),this.updateSelectStatus(a,r,n)},t.prototype._handleRegionClick=function(a){var r;fy(a.target,function(n){return(r=Ae(n).eventData)!=null},!0),r&&this._api.dispatchAction({type:"geoToggleSelect",geoId:this._model.id,name:r.name})},t.prototype.updateSelectStatus=function(a,r,n){var i=this;this._mapDraw.group.traverse(function(o){var s=Ae(o).eventData;if(s)return i._model.isSelected(s.name)?n.enterSelect(o):n.leaveSelect(o),!0})},t.prototype.findHighDownDispatchers=function(a){return this._mapDraw&&this._mapDraw.findHighDownDispatchers(a,this._model)},t.prototype.dispose=function(){this._mapDraw&&this._mapDraw.remove()},t.type="geo",t}(ma);function g6(e,t,a){Jn.registerMap(e,t,a)}function TA(e){e.registerCoordinateSystem("geo",CA),e.registerComponentModel(f6),e.registerComponentView(p6),e.registerImpl("registerMap",g6),e.registerImpl("getMap",function(a){return Jn.getMapForUser(a)});function t(a,r){r.update="geo:updateSelectStatus",e.registerAction(r,function(n,i){var o={},s=[];return i.eachComponent({mainType:"geo",query:n},function(l){l[a](n.name);var c=l.coordinateSystem;G(c.regions,function(h){o[h.name]=l.isSelected(h.name)||!1});var u=[];G(o,function(h,d){o[d]&&u.push(d)}),s.push({geoIndex:l.componentIndex,name:u})}),{selected:o,allSelected:s,name:n.name}})}t("toggleSelected",{type:"geoToggleSelect",event:"geoselectchanged"}),t("select",{type:"geoSelect",event:"geoselected"}),t("unSelect",{type:"geoUnSelect",event:"geounselected"}),e.registerAction({type:"geoRoam",event:"geoRoam",update:"updateTransform"},function(a,r,n){var i=a.componentType||"series";r.eachComponent({mainType:i,query:a},function(o){var s=o.coordinateSystem;if(s.type==="geo"){var l=Iy(s,a,o.get("scaleLimit"),n);o.setCenter&&o.setCenter(l.center),o.setZoom&&o.setZoom(l.zoom),i==="series"&&G(o.seriesGroup,function(c){c.setCenter(l.center),c.setZoom(l.zoom)})}})})}function v6(e){ue(TA),e.registerChartView(i6),e.registerSeriesModel(o6),e.registerLayout(c6),e.registerProcessor(e.PRIORITY.PROCESSOR.STATISTIC,l6),tT("map",e.registerAction)}function m6(e){var t=e;t.hierNode={defaultAncestor:null,ancestor:t,prelim:0,modifier:0,change:0,shift:0,i:0,thread:null};for(var a=[t],r,n;r=a.pop();)if(n=r.children,r.isExpand&&n.length)for(var i=n.length,o=i-1;o>=0;o--){var s=n[o];s.hierNode={defaultAncestor:null,ancestor:s,prelim:0,modifier:0,change:0,shift:0,i:o,thread:null},a.push(s)}}function y6(e,t){var a=e.isExpand?e.children:[],r=e.parentNode.children,n=e.hierNode.i?r[e.hierNode.i-1]:null;if(a.length){x6(e);var i=(a[0].hierNode.prelim+a[a.length-1].hierNode.prelim)/2;n?(e.hierNode.prelim=n.hierNode.prelim+t(e,n),e.hierNode.modifier=e.hierNode.prelim-i):e.hierNode.prelim=i}else n&&(e.hierNode.prelim=n.hierNode.prelim+t(e,n));e.parentNode.hierNode.defaultAncestor=S6(e,n,e.parentNode.hierNode.defaultAncestor||r[0],t)}function _6(e){var t=e.hierNode.prelim+e.parentNode.hierNode.modifier;e.setLayout({x:t},!0),e.hierNode.modifier+=e.parentNode.hierNode.modifier}function Eb(e){return arguments.length?e:T6}function Xl(e,t){return e-=Math.PI/2,{x:t*Math.cos(e),y:t*Math.sin(e)}}function b6(e,t){return ka(e.getBoxLayoutParams(),{width:t.getWidth(),height:t.getHeight()})}function x6(e){for(var t=e.children,a=t.length,r=0,n=0;--a>=0;){var i=t[a];i.hierNode.prelim+=r,i.hierNode.modifier+=r,n+=i.hierNode.change,r+=i.hierNode.shift+n}}function S6(e,t,a,r){if(t){for(var n=e,i=e,o=i.parentNode.children[0],s=t,l=n.hierNode.modifier,c=i.hierNode.modifier,u=o.hierNode.modifier,h=s.hierNode.modifier;s=Mp(s),i=Ep(i),s&&i;){n=Mp(n),o=Ep(o),n.hierNode.ancestor=e;var d=s.hierNode.prelim+h-i.hierNode.prelim-c+r(s,i);d>0&&(C6(w6(s,e,a),e,d),c+=d,l+=d),h+=s.hierNode.modifier,c+=i.hierNode.modifier,l+=n.hierNode.modifier,u+=o.hierNode.modifier}s&&!Mp(n)&&(n.hierNode.thread=s,n.hierNode.modifier+=h-l),i&&!Ep(o)&&(o.hierNode.thread=i,o.hierNode.modifier+=c-u,a=e)}return a}function Mp(e){var t=e.children;return t.length&&e.isExpand?t[t.length-1]:e.hierNode.thread}function Ep(e){var t=e.children;return t.length&&e.isExpand?t[0]:e.hierNode.thread}function w6(e,t,a){return e.hierNode.ancestor.parentNode===t.parentNode?e.hierNode.ancestor:a}function C6(e,t,a){var r=a/(t.hierNode.i-e.hierNode.i);t.hierNode.change-=r,t.hierNode.shift+=a,t.hierNode.modifier+=a,t.hierNode.prelim+=a,e.hierNode.change+=r}function T6(e,t){return e.parentNode===t.parentNode?1:2}var A6=function(){function e(){this.parentPoint=[],this.childPoints=[]}return e}(),k6=function(e){gt(t,e);function t(a){return e.call(this,a)||this}return t.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},t.prototype.getDefaultShape=function(){return new A6},t.prototype.buildPath=function(a,r){var n=r.childPoints,i=n.length,o=r.parentPoint,s=n[0],l=n[i-1];if(i===1){a.moveTo(o[0],o[1]),a.lineTo(s[0],s[1]);return}var c=r.orient,u=c==="TB"||c==="BT"?0:1,h=1-u,d=Ft(r.forkPosition,1),f=[];f[u]=o[u],f[h]=o[h]+(l[h]-o[h])*d,a.moveTo(o[0],o[1]),a.lineTo(f[0],f[1]),a.moveTo(s[0],s[1]),f[u]=s[u],a.lineTo(f[0],f[1]),f[u]=l[u],a.lineTo(f[0],f[1]),a.lineTo(l[0],l[1]);for(var p=1;p<i-1;p++){var g=n[p];a.moveTo(g[0],g[1]),f[u]=g[u],a.lineTo(f[0],f[1])}},t}(va),D6=function(e){gt(t,e);function t(){var a=e!==null&&e.apply(this,arguments)||this;return a.type=t.type,a._mainGroup=new ie,a}return t.prototype.init=function(a,r){this._controller=new vu(r.getZr()),this._controllerHost={target:this.group},this.group.add(this._mainGroup)},t.prototype.render=function(a,r,n){var i=a.getData(),o=a.layoutInfo,s=this._mainGroup,l=a.get("layout");l==="radial"?(s.x=o.x+o.width/2,s.y=o.y+o.height/2):(s.x=o.x,s.y=o.y),this._updateViewCoordSys(a,n),this._updateController(a,r,n);var c=this._data;i.diff(c).add(function(u){Rb(i,u)&&Pb(i,u,null,s,a)}).update(function(u,h){var d=c.getItemGraphicEl(h);if(!Rb(i,u)){d&&Ob(c,h,d,s,a);return}Pb(i,u,d,s,a)}).remove(function(u){var h=c.getItemGraphicEl(u);h&&Ob(c,u,h,s,a)}).execute(),this._nodeScaleRatio=a.get("nodeScaleRatio"),this._updateNodeAndLinkScale(a),a.get("expandAndCollapse")===!0&&i.eachItemGraphicEl(function(u,h){u.off("click").on("click",function(){n.dispatchAction({type:"treeExpandAndCollapse",seriesId:a.id,dataIndex:h})})}),this._data=i},t.prototype._updateViewCoordSys=function(a,r){var n=a.getData(),i=[];n.each(function(h){var d=n.getItemLayout(h);d&&!isNaN(d.x)&&!isNaN(d.y)&&i.push([+d.x,+d.y])});var o=[],s=[];pf(i,o,s);var l=this._min,c=this._max;s[0]-o[0]===0&&(o[0]=l?l[0]:o[0]-1,s[0]=c?c[0]:s[0]+1),s[1]-o[1]===0&&(o[1]=l?l[1]:o[1]-1,s[1]=c?c[1]:s[1]+1);var u=a.coordinateSystem=new mu;u.zoomLimit=a.get("scaleLimit"),u.setBoundingRect(o[0],o[1],s[0]-o[0],s[1]-o[1]),u.setCenter(a.get("center"),r),u.setZoom(a.get("zoom")),this.group.attr({x:u.x,y:u.y,scaleX:u.scaleX,scaleY:u.scaleY}),this._min=o,this._max=s},t.prototype._updateController=function(a,r,n){var i=this,o=this._controller,s=this._controllerHost,l=this.group;o.setPointerChecker(function(c,u,h){var d=l.getBoundingRect();return d.applyTransform(l.transform),d.contain(u,h)&&!Sf(c,n,a)}),o.enable(a.get("roam")),s.zoomLimit=a.get("scaleLimit"),s.zoom=a.coordinateSystem.getZoom(),o.off("pan").off("zoom").on("pan",function(c){ky(s,c.dx,c.dy),n.dispatchAction({seriesId:a.id,type:"treeRoam",dx:c.dx,dy:c.dy})}).on("zoom",function(c){Dy(s,c.scale,c.originX,c.originY),n.dispatchAction({seriesId:a.id,type:"treeRoam",zoom:c.scale,originX:c.originX,originY:c.originY}),i._updateNodeAndLinkScale(a),n.updateLabelLayout()})},t.prototype._updateNodeAndLinkScale=function(a){var r=a.getData(),n=this._getNodeGlobalScale(a);r.eachItemGraphicEl(function(i,o){i.setSymbolScale(n)})},t.prototype._getNodeGlobalScale=function(a){var r=a.coordinateSystem;if(r.type!=="view")return 1;var n=this._nodeScaleRatio,i=r.scaleX||1,o=r.getZoom(),s=(o-1)*n+1;return s/i},t.prototype.dispose=function(){this._controller&&this._controller.dispose(),this._controllerHost=null},t.prototype.remove=function(){this._mainGroup.removeAll(),this._data=null},t.type="tree",t}(ra);function Rb(e,t){var a=e.getItemLayout(t);return a&&!isNaN(a.x)&&!isNaN(a.y)}function Pb(e,t,a,r,n){var i=!a,o=e.tree.getNodeByDataIndex(t),s=o.getModel(),l=o.getVisual("style").fill,c=o.isExpand===!1&&o.children.length!==0?l:"#fff",u=e.tree.root,h=o.parentNode===u?o:o.parentNode||o,d=e.getItemGraphicEl(h.dataIndex),f=h.getLayout(),p=d?{x:d.__oldX,y:d.__oldY,rawX:d.__radialOldRawX,rawY:d.__radialOldRawY}:f,g=o.getLayout();i?(a=new uu(e,t,null,{symbolInnerColor:c,useNameLabel:!0}),a.x=p.x,a.y=p.y):a.updateData(e,t,null,{symbolInnerColor:c,useNameLabel:!0}),a.__radialOldRawX=a.__radialRawX,a.__radialOldRawY=a.__radialRawY,a.__radialRawX=g.rawX,a.__radialRawY=g.rawY,r.add(a),e.setItemGraphicEl(t,a),a.__oldX=a.x,a.__oldY=a.y,ze(a,{x:g.x,y:g.y},n);var v=a.getSymbolPath();if(n.get("layout")==="radial"){var _=u.children[0],y=_.getLayout(),b=_.children.length,w=void 0,T=void 0;if(g.x===y.x&&o.isExpand===!0&&_.children.length){var C={x:(_.children[0].getLayout().x+_.children[b-1].getLayout().x)/2,y:(_.children[0].getLayout().y+_.children[b-1].getLayout().y)/2};w=Math.atan2(C.y-y.y,C.x-y.x),w<0&&(w=Math.PI*2+w),T=C.x<y.x,T&&(w=w-Math.PI)}else w=Math.atan2(g.y-y.y,g.x-y.x),w<0&&(w=Math.PI*2+w),o.children.length===0||o.children.length!==0&&o.isExpand===!1?(T=g.x<y.x,T&&(w=w-Math.PI)):(T=g.x>y.x,T||(w=w-Math.PI));var A=T?"left":"right",k=s.getModel("label"),L=k.get("rotate"),M=L*(Math.PI/180),P=v.getTextContent();P&&(v.setTextConfig({position:k.get("position")||A,rotation:L==null?-w:M,origin:"center"}),P.setStyle("verticalAlign","middle"))}var E=s.get(["emphasis","focus"]),D=E==="relative"?Zh(o.getAncestorsIndices(),o.getDescendantIndices()):E==="ancestor"?o.getAncestorsIndices():E==="descendant"?o.getDescendantIndices():null;D&&(Ae(a).focus=D),L6(n,o,u,a,p,f,g,r),a.__edge&&(a.onHoverStateChange=function(O){if(O!=="blur"){var B=o.parentNode&&e.getItemGraphicEl(o.parentNode.dataIndex);B&&B.hoverState===d5||qh(a.__edge,O)}})}function L6(e,t,a,r,n,i,o,s){var l=t.getModel(),c=e.get("edgeShape"),u=e.get("layout"),h=e.getOrient(),d=e.get(["lineStyle","curveness"]),f=e.get("edgeForkPosition"),p=l.getModel("lineStyle").getLineStyle(),g=r.__edge;if(c==="curve")t.parentNode&&t.parentNode!==a&&(g||(g=r.__edge=new uT({shape:Av(u,h,d,n,n)})),ze(g,{shape:Av(u,h,d,i,o)},e));else if(c==="polyline"&&u==="orthogonal"&&t!==a&&t.children&&t.children.length!==0&&t.isExpand===!0){for(var v=t.children,_=[],y=0;y<v.length;y++){var b=v[y].getLayout();_.push([b.x,b.y])}g||(g=r.__edge=new k6({shape:{parentPoint:[o.x,o.y],childPoints:[[o.x,o.y]],orient:h,forkPosition:f}})),ze(g,{shape:{parentPoint:[o.x,o.y],childPoints:_}},e)}g&&!(c==="polyline"&&!t.isExpand)&&(g.useStyle(_e({strokeNoScale:!0,fill:null},p)),za(g,l,"lineStyle"),Fs(g),s.add(g))}function Bb(e,t,a,r,n){var i=t.tree.root,o=AA(i,e),s=o.source,l=o.sourceLayout,c=t.getItemGraphicEl(e.dataIndex);if(c){var u=t.getItemGraphicEl(s.dataIndex),h=u.__edge,d=c.__edge||(s.isExpand===!1||s.children.length===1?h:void 0),f=r.get("edgeShape"),p=r.get("layout"),g=r.get("orient"),v=r.get(["lineStyle","curveness"]);d&&(f==="curve"?Bs(d,{shape:Av(p,g,v,l,l),style:{opacity:0}},r,{cb:function(){a.remove(d)},removeOpt:n}):f==="polyline"&&r.get("layout")==="orthogonal"&&Bs(d,{shape:{parentPoint:[l.x,l.y],childPoints:[[l.x,l.y]]},style:{opacity:0}},r,{cb:function(){a.remove(d)},removeOpt:n}))}}function AA(e,t){for(var a=t.parentNode===e?t:t.parentNode||t,r;r=a.getLayout(),r==null;)a=a.parentNode===e?a:a.parentNode||a;return{source:a,sourceLayout:r}}function Ob(e,t,a,r,n){var i=e.tree.getNodeByDataIndex(t),o=e.tree.root,s=AA(o,i).sourceLayout,l={duration:n.get("animationDurationUpdate"),easing:n.get("animationEasingUpdate")};Bs(a,{x:s.x+1,y:s.y+1},n,{cb:function(){r.remove(a),e.setItemGraphicEl(t,null)},removeOpt:l}),a.fadeOut(null,e.hostModel,{fadeLabel:!0,animation:l}),i.children.forEach(function(c){Bb(c,e,r,n,l)}),Bb(i,e,r,n,l)}function Av(e,t,a,r,n){var i,o,s,l,c,u,h,d;if(e==="radial"){c=r.rawX,h=r.rawY,u=n.rawX,d=n.rawY;var f=Xl(c,h),p=Xl(c,h+(d-h)*a),g=Xl(u,d+(h-d)*a),v=Xl(u,d);return{x1:f.x||0,y1:f.y||0,x2:v.x||0,y2:v.y||0,cpx1:p.x||0,cpy1:p.y||0,cpx2:g.x||0,cpy2:g.y||0}}else c=r.x,h=r.y,u=n.x,d=n.y,(t==="LR"||t==="RL")&&(i=c+(u-c)*a,o=h,s=u+(c-u)*a,l=d),(t==="TB"||t==="BT")&&(i=c,o=h+(d-h)*a,s=u,l=d+(h-d)*a);return{x1:c,y1:h,x2:u,y2:d,cpx1:i,cpy1:o,cpx2:s,cpy2:l}}var Rr=ia();function kA(e){var t=e.mainData,a=e.datas;a||(a={main:t},e.datasAttr={main:"data"}),e.datas=e.mainData=null,DA(t,a,e),G(a,function(r){G(t.TRANSFERABLE_METHODS,function(n){r.wrapMethod(n,pe(I6,e))})}),t.wrapMethod("cloneShallow",pe(E6,e)),G(t.CHANGABLE_METHODS,function(r){t.wrapMethod(r,pe(M6,e))}),Dc(a[t.dataType]===t)}function I6(e,t){if(B6(this)){var a=Vt({},Rr(this).datas);a[this.dataType]=t,DA(t,a,e)}else My(t,this.dataType,Rr(this).mainData,e);return t}function M6(e,t){return e.struct&&e.struct.update(),t}function E6(e,t){return G(Rr(t).datas,function(a,r){a!==t&&My(a.cloneShallow(),r,t,e)}),t}function R6(e){var t=Rr(this).mainData;return e==null||t==null?t:Rr(t).datas[e]}function P6(){var e=Rr(this).mainData;return e==null?[{data:e}]:Ot(pa(Rr(e).datas),function(t){return{type:t,data:Rr(e).datas[t]}})}function B6(e){return Rr(e).mainData===e}function DA(e,t,a){Rr(e).datas={},G(t,function(r,n){My(r,n,e,a)})}function My(e,t,a,r){Rr(a).datas[t]=e,Rr(e).mainData=a,e.dataType=t,r.struct&&(e[r.structAttr]=r.struct,r.struct[r.datasAttr[t]]=e),e.getLinkedData=R6,e.getLinkedDataAll=P6}var O6=function(){function e(t,a){this.depth=0,this.height=0,this.dataIndex=-1,this.children=[],this.viewChildren=[],this.isExpand=!1,this.name=t||"",this.hostTree=a}return e.prototype.isRemoved=function(){return this.dataIndex<0},e.prototype.eachNode=function(t,a,r){Me(t)&&(r=a,a=t,t=null),t=t||{},ge(t)&&(t={order:t});var n=t.order||"preorder",i=this[t.attr||"children"],o;n==="preorder"&&(o=a.call(r,this));for(var s=0;!o&&s<i.length;s++)i[s].eachNode(t,a,r);n==="postorder"&&a.call(r,this)},e.prototype.updateDepthAndHeight=function(t){var a=0;this.depth=t;for(var r=0;r<this.children.length;r++){var n=this.children[r];n.updateDepthAndHeight(t+1),n.height>a&&(a=n.height)}this.height=a+1},e.prototype.getNodeById=function(t){if(this.getId()===t)return this;for(var a=0,r=this.children,n=r.length;a<n;a++){var i=r[a].getNodeById(t);if(i)return i}},e.prototype.contains=function(t){if(t===this)return!0;for(var a=0,r=this.children,n=r.length;a<n;a++){var i=r[a].contains(t);if(i)return i}},e.prototype.getAncestors=function(t){for(var a=[],r=t?this:this.parentNode;r;)a.push(r),r=r.parentNode;return a.reverse(),a},e.prototype.getAncestorsIndices=function(){for(var t=[],a=this;a;)t.push(a.dataIndex),a=a.parentNode;return t.reverse(),t},e.prototype.getDescendantIndices=function(){var t=[];return this.eachNode(function(a){t.push(a.dataIndex)}),t},e.prototype.getValue=function(t){var a=this.hostTree.data;return a.getStore().get(a.getDimensionIndex(t||"value"),this.dataIndex)},e.prototype.setLayout=function(t,a){this.dataIndex>=0&&this.hostTree.data.setItemLayout(this.dataIndex,t,a)},e.prototype.getLayout=function(){return this.hostTree.data.getItemLayout(this.dataIndex)},e.prototype.getModel=function(t){if(!(this.dataIndex<0)){var a=this.hostTree,r=a.data.getItemModel(this.dataIndex);return r.getModel(t)}},e.prototype.getLevelModel=function(){return(this.hostTree.levelModels||[])[this.depth]},e.prototype.setVisual=function(t,a){this.dataIndex>=0&&this.hostTree.data.setItemVisual(this.dataIndex,t,a)},e.prototype.getVisual=function(t){return this.hostTree.data.getItemVisual(this.dataIndex,t)},e.prototype.getRawIndex=function(){return this.hostTree.data.getRawIndex(this.dataIndex)},e.prototype.getId=function(){return this.hostTree.data.getId(this.dataIndex)},e.prototype.getChildIndex=function(){if(this.parentNode){for(var t=this.parentNode.children,a=0;a<t.length;++a)if(t[a]===this)return a;return-1}return-1},e.prototype.isAncestorOf=function(t){for(var a=t.parentNode;a;){if(a===this)return!0;a=a.parentNode}return!1},e.prototype.isDescendantOf=function(t){return t!==this&&t.isAncestorOf(this)},e}(),Ey=function(){function e(t){this.type="tree",this._nodes=[],this.hostModel=t}return e.prototype.eachNode=function(t,a,r){this.root.eachNode(t,a,r)},e.prototype.getNodeByDataIndex=function(t){var a=this.data.getRawIndex(t);return this._nodes[a]},e.prototype.getNodeById=function(t){return this.root.getNodeById(t)},e.prototype.update=function(){for(var t=this.data,a=this._nodes,r=0,n=a.length;r<n;r++)a[r].dataIndex=-1;for(var r=0,n=t.count();r<n;r++)a[t.getRawIndex(r)].dataIndex=r},e.prototype.clearLayouts=function(){this.data.clearItemLayouts()},e.createTree=function(t,a,r){var n=new e(a),i=[],o=1;s(t);function s(u,h){var d=u.value;o=Math.max(o,Nt(d)?d.length:1),i.push(u);var f=new O6(zn(u.name,""),n);h?N6(f,h):n.root=f,n._nodes.push(f);var p=u.children;if(p)for(var g=0;g<p.length;g++)s(p[g],f)}n.root.updateDepthAndHeight(0);var l=sf(i,{coordDimensions:["value"],dimensionsCount:o}).dimensions,c=new pr(l,a);return c.initData(i),r&&r(c),kA({mainData:c,struct:n,structAttr:"tree"}),n.update(),n},e}();function N6(e,t){var a=t.children;e.parentNode!==t&&(a.push(e),e.parentNode=t)}function Oc(e,t,a){if(e&&Xe(t,e.type)>=0){var r=a.getData().tree.root,n=e.targetNode;if(ge(n)&&(n=r.getNodeById(n)),n&&r.contains(n))return{node:n};var i=e.targetNodeId;if(i!=null&&(n=r.getNodeById(i)))return{node:n}}}function LA(e){for(var t=[];e;)e=e.parentNode,e&&t.push(e);return t.reverse()}function Ry(e,t){var a=LA(e);return Xe(a,t)>=0}function Cf(e,t){for(var a=[];e;){var r=e.dataIndex;a.push({name:e.name,dataIndex:r,value:t.getRawValue(r)}),e=e.parentNode}return a.reverse(),a}var $6=function(e){gt(t,e);function t(){var a=e!==null&&e.apply(this,arguments)||this;return a.hasSymbolVisual=!0,a.ignoreStyleOnData=!0,a}return t.prototype.getInitialData=function(a){var r={name:a.name,children:a.data},n=a.leaves||{},i=new _a(n,this,this.ecModel),o=Ey.createTree(r,this,s);function s(h){h.wrapMethod("getItemModel",function(d,f){var p=o.getNodeByDataIndex(f);return p&&p.children.length&&p.isExpand||(d.parentModel=i),d})}var l=0;o.eachNode("preorder",function(h){h.depth>l&&(l=h.depth)});var c=a.expandAndCollapse,u=c&&a.initialTreeDepth>=0?a.initialTreeDepth:l;return o.root.eachNode("preorder",function(h){var d=h.hostTree.data.getRawDataItem(h.dataIndex);h.isExpand=d&&d.collapsed!=null?!d.collapsed:h.depth<=u}),o.data},t.prototype.getOrient=function(){var a=this.get("orient");return a==="horizontal"?a="LR":a==="vertical"&&(a="TB"),a},t.prototype.setZoom=function(a){this.option.zoom=a},t.prototype.setCenter=function(a){this.option.center=a},t.prototype.formatTooltip=function(a,r,n){for(var i=this.getData().tree,o=i.root.children[0],s=i.getNodeByDataIndex(a),l=s.getValue(),c=s.name;s&&s!==o;)c=s.parentNode.name+"."+c,s=s.parentNode;return Za("nameValue",{name:c,value:l,noValue:isNaN(l)||l==null})},t.prototype.getDataParams=function(a){var r=e.prototype.getDataParams.apply(this,arguments),n=this.getData().tree.getNodeByDataIndex(a);return r.treeAncestors=Cf(n,this),r.collapsed=!n.isExpand,r},t.type="series.tree",t.layoutMode="box",t.defaultOption={z:2,coordinateSystem:"view",left:"12%",top:"12%",right:"12%",bottom:"12%",layout:"orthogonal",edgeShape:"curve",edgeForkPosition:"50%",roam:!1,nodeScaleRatio:.4,center:null,zoom:1,orient:"LR",symbol:"emptyCircle",symbolSize:7,expandAndCollapse:!0,initialTreeDepth:2,lineStyle:{color:"#ccc",width:1.5,curveness:.5},itemStyle:{color:"lightsteelblue",borderWidth:1.5},label:{show:!0},animationEasing:"linear",animationDuration:700,animationDurationUpdate:500},t}(ha);function F6(e,t,a){for(var r=[e],n=[],i;i=r.pop();)if(n.push(i),i.isExpand){var o=i.children;if(o.length)for(var s=0;s<o.length;s++)r.push(o[s])}for(;i=n.pop();)t(i,a)}function Tl(e,t){for(var a=[e],r;r=a.pop();)if(t(r),r.isExpand){var n=r.children;if(n.length)for(var i=n.length-1;i>=0;i--)a.push(n[i])}}function z6(e,t){e.eachSeriesByType("tree",function(a){V6(a,t)})}function V6(e,t){var a=b6(e,t);e.layoutInfo=a;var r=e.get("layout"),n=0,i=0,o=null;r==="radial"?(n=2*Math.PI,i=Math.min(a.height,a.width)/2,o=Eb(function(b,w){return(b.parentNode===w.parentNode?1:2)/b.depth})):(n=a.width,i=a.height,o=Eb());var s=e.getData().tree.root,l=s.children[0];if(l){m6(s),F6(l,y6,o),s.hierNode.modifier=-l.hierNode.prelim,Tl(l,_6);var c=l,u=l,h=l;Tl(l,function(b){var w=b.getLayout().x;w<c.getLayout().x&&(c=b),w>u.getLayout().x&&(u=b),b.depth>h.depth&&(h=b)});var d=c===u?1:o(c,u)/2,f=d-c.getLayout().x,p=0,g=0,v=0,_=0;if(r==="radial")p=n/(u.getLayout().x+d+f),g=i/(h.depth-1||1),Tl(l,function(b){v=(b.getLayout().x+f)*p,_=(b.depth-1)*g;var w=Xl(v,_);b.setLayout({x:w.x,y:w.y,rawX:v,rawY:_},!0)});else{var y=e.getOrient();y==="RL"||y==="LR"?(g=i/(u.getLayout().x+d+f),p=n/(h.depth-1||1),Tl(l,function(b){_=(b.getLayout().x+f)*g,v=y==="LR"?(b.depth-1)*p:n-(b.depth-1)*p,b.setLayout({x:v,y:_},!0)})):(y==="TB"||y==="BT")&&(p=n/(u.getLayout().x+d+f),g=i/(h.depth-1||1),Tl(l,function(b){v=(b.getLayout().x+f)*p,_=y==="TB"?(b.depth-1)*g:i-(b.depth-1)*g,b.setLayout({x:v,y:_},!0)}))}}}function G6(e){e.eachSeriesByType("tree",function(t){var a=t.getData(),r=a.tree;r.eachNode(function(n){var i=n.getModel(),o=i.getModel("itemStyle").getItemStyle(),s=a.ensureUniqueItemVisual(n.dataIndex,"style");Vt(s,o)})})}function H6(e){e.registerAction({type:"treeExpandAndCollapse",event:"treeExpandAndCollapse",update:"update"},function(t,a){a.eachComponent({mainType:"series",subType:"tree",query:t},function(r){var n=t.dataIndex,i=r.getData().tree,o=i.getNodeByDataIndex(n);o.isExpand=!o.isExpand})}),e.registerAction({type:"treeRoam",event:"treeRoam",update:"none"},function(t,a,r){a.eachComponent({mainType:"series",subType:"tree",query:t},function(n){var i=n.coordinateSystem,o=Iy(i,t,void 0,r);n.setCenter&&n.setCenter(o.center),n.setZoom&&n.setZoom(o.zoom)})})}function W6(e){e.registerChartView(D6),e.registerSeriesModel($6),e.registerLayout(z6),e.registerVisual(G6),H6(e)}var Nb=["treemapZoomToNode","treemapRender","treemapMove"];function q6(e){for(var t=0;t<Nb.length;t++)e.registerAction({type:Nb[t],update:"updateView"},xn);e.registerAction({type:"treemapRootToNode",update:"updateView"},function(a,r){r.eachComponent({mainType:"series",subType:"treemap",query:a},n);function n(i,o){var s=["treemapZoomToNode","treemapRootToNode"],l=Oc(a,s,i);if(l){var c=i.getViewRoot();c&&(a.direction=Ry(c,l.node)?"rollUp":"drillDown"),i.resetViewRoot(l.node)}}})}function IA(e){var t=e.getData(),a=t.tree,r={};a.eachNode(function(n){for(var i=n;i&&i.depth>1;)i=i.parentNode;var o=lv(e.ecModel,i.name||i.dataIndex+"",r);n.setVisual("decal",o)})}var U6=function(e){gt(t,e);function t(){var a=e!==null&&e.apply(this,arguments)||this;return a.type=t.type,a.preventUsingHoverLayer=!0,a}return t.prototype.getInitialData=function(a,r){var n={name:a.name,children:a.data};MA(n);var i=a.levels||[],o=this.designatedVisualItemStyle={},s=new _a({itemStyle:o},this,r);i=a.levels=j6(i,r);var l=Ot(i||[],function(h){return new _a(h,s,r)},this),c=Ey.createTree(n,this,u);function u(h){h.wrapMethod("getItemModel",function(d,f){var p=c.getNodeByDataIndex(f),g=p?l[p.depth]:null;return d.parentModel=g||s,d})}return c.data},t.prototype.optionUpdated=function(){this.resetViewRoot()},t.prototype.formatTooltip=function(a,r,n){var i=this.getData(),o=this.getRawValue(a),s=i.getName(a);return Za("nameValue",{name:s,value:o})},t.prototype.getDataParams=function(a){var r=e.prototype.getDataParams.apply(this,arguments),n=this.getData().tree.getNodeByDataIndex(a);return r.treeAncestors=Cf(n,this),r.treePathInfo=r.treeAncestors,r},t.prototype.setLayoutInfo=function(a){this.layoutInfo=this.layoutInfo||{},Vt(this.layoutInfo,a)},t.prototype.mapIdToIndex=function(a){var r=this._idIndexMap;r||(r=this._idIndexMap=ke(),this._idIndexMapCount=0);var n=r.get(a);return n==null&&r.set(a,n=this._idIndexMapCount++),n},t.prototype.getViewRoot=function(){return this._viewRoot},t.prototype.resetViewRoot=function(a){a?this._viewRoot=a:a=this._viewRoot;var r=this.getRawData().tree.root;(!a||a!==r&&!r.contains(a))&&(this._viewRoot=r)},t.prototype.enableAriaDecal=function(){IA(this)},t.type="series.treemap",t.layoutMode="box",t.defaultOption={progressive:0,left:"center",top:"middle",width:"80%",height:"80%",sort:!0,clipWindow:"origin",squareRatio:.5*(1+Math.sqrt(5)),leafDepth:null,drillDownIcon:"▶",zoomToNodeRatio:.32*.32,scaleLimit:null,roam:!0,nodeClick:"zoomToNode",animation:!0,animationDurationUpdate:900,animationEasing:"quinticInOut",breadcrumb:{show:!0,height:22,left:"center",top:"bottom",emptyItemWidth:25,itemStyle:{color:"rgba(0,0,0,0.7)",textStyle:{color:"#fff"}},emphasis:{itemStyle:{color:"rgba(0,0,0,0.9)"}}},label:{show:!0,distance:0,padding:5,position:"inside",color:"#fff",overflow:"truncate"},upperLabel:{show:!1,position:[0,"50%"],height:20,overflow:"truncate",verticalAlign:"middle"},itemStyle:{color:null,colorAlpha:null,colorSaturation:null,borderWidth:0,gapWidth:0,borderColor:"#fff",borderColorSaturation:null},emphasis:{upperLabel:{show:!0,position:[0,"50%"],overflow:"truncate",verticalAlign:"middle"}},visualDimension:0,visualMin:null,visualMax:null,color:[],colorAlpha:null,colorSaturation:null,colorMappingBy:"index",visibleMin:10,childrenVisibleMin:null,levels:[]},t}(ha);function MA(e){var t=0;G(e.children,function(r){MA(r);var n=r.value;Nt(n)&&(n=n[0]),t+=n});var a=e.value;Nt(a)&&(a=a[0]),(a==null||isNaN(a))&&(a=t),a<0&&(a=0),Nt(e.value)?e.value[0]=a:e.value=a}function j6(e,t){var a=nr(t.get("color")),r=nr(t.get(["aria","decal","decals"]));if(a){e=e||[];var n,i;G(e,function(s){var l=new _a(s),c=l.get("color"),u=l.get("decal");(l.get(["itemStyle","color"])||c&&c!=="none")&&(n=!0),(l.get(["itemStyle","decal"])||u&&u!=="none")&&(i=!0)});var o=e[0]||(e[0]={});return n||(o.color=a.slice()),!i&&r&&(o.decal=r.slice()),e}}var Y6=8,$b=8,Rp=5,X6=function(){function e(t){this.group=new ie,t.add(this.group)}return e.prototype.render=function(t,a,r,n){var i=t.getModel("breadcrumb"),o=this.group;if(o.removeAll(),!(!i.get("show")||!r)){var s=i.getModel("itemStyle"),l=i.getModel("emphasis"),c=s.getModel("textStyle"),u=l.getModel(["itemStyle","textStyle"]),h={pos:{left:i.get("left"),right:i.get("right"),top:i.get("top"),bottom:i.get("bottom")},box:{width:a.getWidth(),height:a.getHeight()},emptyItemWidth:i.get("emptyItemWidth"),totalWidth:0,renderList:[]};this._prepare(r,h,c),this._renderContent(t,h,s,l,c,u,n),gf(o,h.pos,h.box)}},e.prototype._prepare=function(t,a,r){for(var n=t;n;n=n.parentNode){var i=zn(n.getModel().get("name"),""),o=r.getTextRect(i),s=Math.max(o.width+Y6*2,a.emptyItemWidth);a.totalWidth+=s+$b,a.renderList.push({node:n,text:i,width:s})}},e.prototype._renderContent=function(t,a,r,n,i,o,s){for(var l=0,c=a.emptyItemWidth,u=t.get(["breadcrumb","height"]),h=f5(a.pos,a.box),d=a.totalWidth,f=a.renderList,p=n.getModel("itemStyle").getItemStyle(),g=f.length-1;g>=0;g--){var v=f[g],_=v.node,y=v.width,b=v.text;d>h.width&&(d-=y-c,y=c,b=null);var w=new Br({shape:{points:Z6(l,0,y,u,g===f.length-1,g===0)},style:_e(r.getItemStyle(),{lineJoin:"bevel"}),textContent:new Oe({style:Ke(i,{text:b})}),textConfig:{position:"inside"},z2:su*1e4,onclick:pe(s,_)});w.disableLabelAnimation=!0,w.getTextContent().ensureState("emphasis").style=Ke(o,{text:b}),w.ensureState("emphasis").style=p,Qe(w,n.get("focus"),n.get("blurScope"),n.get("disabled")),this.group.add(w),K6(w,t,_),l+=y+$b}},e.prototype.remove=function(){this.group.removeAll()},e}();function Z6(e,t,a,r,n,i){var o=[[n?e:e-Rp,t],[e+a,t],[e+a,t+r],[n?e:e-Rp,t+r]];return!i&&o.splice(2,0,[e+a+Rp,t+r/2]),!n&&o.push([e,t+r/2]),o}function K6(e,t,a){Ae(e).eventData={componentType:"series",componentSubType:"treemap",componentIndex:t.componentIndex,seriesIndex:t.seriesIndex,seriesName:t.name,seriesType:"treemap",selfType:"breadcrumb",nodeData:{dataIndex:a&&a.dataIndex,name:a&&a.name},treePathInfo:a&&Cf(a,t)}}var J6=function(){function e(){this._storage=[],this._elExistsMap={}}return e.prototype.add=function(t,a,r,n,i){return this._elExistsMap[t.id]?!1:(this._elExistsMap[t.id]=!0,this._storage.push({el:t,target:a,duration:r,delay:n,easing:i}),!0)},e.prototype.finished=function(t){return this._finishedCallback=t,this},e.prototype.start=function(){for(var t=this,a=this._storage.length,r=function(){a--,a<=0&&(t._storage.length=0,t._elExistsMap={},t._finishedCallback&&t._finishedCallback())},n=0,i=this._storage.length;n<i;n++){var o=this._storage[n];o.el.animateTo(o.target,{duration:o.duration,delay:o.delay,easing:o.easing,setToFinal:!0,done:r,aborted:r})}return this},e}();function Q6(){return new J6}var kv=ie,Fb=Ge,zb=3,Vb="label",Gb="upperLabel",tz=su*10,ez=su*2,az=su*3,Zi=hT([["fill","color"],["stroke","strokeColor"],["lineWidth","strokeWidth"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"]]),Hb=function(e){var t=Zi(e);return t.stroke=t.fill=t.lineWidth=null,t},nd=ia(),rz=function(e){gt(t,e);function t(){var a=e!==null&&e.apply(this,arguments)||this;return a.type=t.type,a._state="ready",a._storage=Al(),a}return t.prototype.render=function(a,r,n,i){var o=r.findComponents({mainType:"series",subType:"treemap",query:i});if(!(Xe(o,a)<0)){this.seriesModel=a,this.api=n,this.ecModel=r;var s=["treemapZoomToNode","treemapRootToNode"],l=Oc(i,s,a),c=i&&i.type,u=a.layoutInfo,h=!this._oldTree,d=this._storage,f=c==="treemapRootToNode"&&l&&d?{rootNodeGroup:d.nodeGroup[l.node.getRawIndex()],direction:i.direction}:null,p=this._giveContainerGroup(u),g=a.get("animation"),v=this._doRender(p,a,f);g&&!h&&(!c||c==="treemapZoomToNode"||c==="treemapRootToNode")?this._doAnimation(p,v,a,f):v.renderFinally(),this._resetController(n),this._renderBreadcrumb(a,n,l)}},t.prototype._giveContainerGroup=function(a){var r=this._containerGroup;return r||(r=this._containerGroup=new kv,this._initEvents(r),this.group.add(r)),r.x=a.x,r.y=a.y,r},t.prototype._doRender=function(a,r,n){var i=r.getData().tree,o=this._oldTree,s=Al(),l=Al(),c=this._storage,u=[];function h(y,b,w,T){return nz(r,l,c,n,s,u,y,b,w,T)}g(i.root?[i.root]:[],o&&o.root?[o.root]:[],a,i===o||!o,0);var d=v(c);if(this._oldTree=i,this._storage=l,this._controllerHost){var f=this.seriesModel.layoutInfo,p=i.root.getLayout();p.width===f.width&&p.height===f.height&&(this._controllerHost.zoom=1)}return{lastsForAnimation:s,willDeleteEls:d,renderFinally:_};function g(y,b,w,T,C){T?(b=y,G(y,function(L,M){!L.isRemoved()&&k(M,M)})):new Ri(b,y,A,A).add(k).update(k).remove(pe(k,null)).execute();function A(L){return L.getId()}function k(L,M){var P=L!=null?y[L]:null,E=M!=null?b[M]:null,D=h(P,E,w,C);D&&g(P&&P.viewChildren||[],E&&E.viewChildren||[],D,T,C+1)}}function v(y){var b=Al();return y&&G(y,function(w,T){var C=b[T];G(w,function(A){A&&(C.push(A),nd(A).willDelete=!0)})}),b}function _(){G(d,function(y){G(y,function(b){b.parent&&b.parent.remove(b)})}),G(u,function(y){y.invisible=!0,y.dirty()})}},t.prototype._doAnimation=function(a,r,n,i){var o=n.get("animationDurationUpdate"),s=n.get("animationEasing"),l=(Me(o)?0:o)||0,c=(Me(s)?null:s)||"cubicOut",u=Q6();G(r.willDeleteEls,function(h,d){G(h,function(f,p){if(!f.invisible){var g=f.parent,v,_=nd(g);if(i&&i.direction==="drillDown")v=g===i.rootNodeGroup?{shape:{x:0,y:0,width:_.nodeWidth,height:_.nodeHeight},style:{opacity:0}}:{style:{opacity:0}};else{var y=0,b=0;_.willDelete||(y=_.nodeWidth/2,b=_.nodeHeight/2),v=d==="nodeGroup"?{x:y,y:b,style:{opacity:0}}:{shape:{x:y,y:b,width:0,height:0},style:{opacity:0}}}v&&u.add(f,v,l,0,c)}})}),G(this._storage,function(h,d){G(h,function(f,p){var g=r.lastsForAnimation[d][p],v={};g&&(f instanceof ie?g.oldX!=null&&(v.x=f.x,v.y=f.y,f.x=g.oldX,f.y=g.oldY):(g.oldShape&&(v.shape=Vt({},f.shape),f.setShape(g.oldShape)),g.fadein?(f.setStyle("opacity",0),v.style={opacity:1}):f.style.opacity!==1&&(v.style={opacity:1})),u.add(f,v,l,0,c))})},this),this._state="animating",u.finished(Ut(function(){this._state="ready",r.renderFinally()},this)).start()},t.prototype._resetController=function(a){var r=this._controller,n=this._controllerHost;n||(this._controllerHost={target:this.group},n=this._controllerHost),r||(r=this._controller=new vu(a.getZr()),r.enable(this.seriesModel.get("roam")),n.zoomLimit=this.seriesModel.get("scaleLimit"),n.zoom=this.seriesModel.get("zoom"),r.on("pan",Ut(this._onPan,this)),r.on("zoom",Ut(this._onZoom,this)));var i=new aa(0,0,a.getWidth(),a.getHeight());r.setPointerChecker(function(o,s,l){return i.contain(s,l)})},t.prototype._clearController=function(){var a=this._controller;this._controllerHost=null,a&&(a.dispose(),a=null)},t.prototype._onPan=function(a){if(this._state!=="animating"&&(Math.abs(a.dx)>zb||Math.abs(a.dy)>zb)){var r=this.seriesModel.getData().tree.root;if(!r)return;var n=r.getLayout();if(!n)return;this.api.dispatchAction({type:"treemapMove",from:this.uid,seriesId:this.seriesModel.id,rootRect:{x:n.x+a.dx,y:n.y+a.dy,width:n.width,height:n.height}})}},t.prototype._onZoom=function(a){var r=a.originX,n=a.originY,i=a.scale;if(this._state!=="animating"){var o=this.seriesModel.getData().tree.root;if(!o)return;var s=o.getLayout();if(!s)return;var l=new aa(s.x,s.y,s.width,s.height),c=null,u=this._controllerHost;c=u.zoomLimit;var h=u.zoom=u.zoom||1;if(h*=i,c){var d=c.min||0,f=c.max||1/0;h=Math.max(Math.min(f,h),d)}var p=h/u.zoom;u.zoom=h;var g=this.seriesModel.layoutInfo;r-=g.x,n-=g.y;var v=$o();Ei(v,v,[-r,-n]),oT(v,v,[p,p]),Ei(v,v,[r,n]),l.applyTransform(v),this.api.dispatchAction({type:"treemapRender",from:this.uid,seriesId:this.seriesModel.id,rootRect:{x:l.x,y:l.y,width:l.width,height:l.height}})}},t.prototype._initEvents=function(a){var r=this;a.on("click",function(n){if(r._state==="ready"){var i=r.seriesModel.get("nodeClick",!0);if(i){var o=r.findTarget(n.offsetX,n.offsetY);if(o){var s=o.node;if(s.getLayout().isLeafRoot)r._rootToNode(o);else if(i==="zoomToNode")r._zoomToNode(o);else if(i==="link"){var l=s.hostTree.data.getItemModel(s.dataIndex),c=l.get("link",!0),u=l.get("target",!0)||"blank";c&&Kh(c,u)}}}}},this)},t.prototype._renderBreadcrumb=function(a,r,n){var i=this;n||(n=a.get("leafDepth",!0)!=null?{node:a.getViewRoot()}:this.findTarget(r.getWidth()/2,r.getHeight()/2),n||(n={node:a.getData().tree.root})),(this._breadcrumb||(this._breadcrumb=new X6(this.group))).render(a,r,n.node,function(o){i._state!=="animating"&&(Ry(a.getViewRoot(),o)?i._rootToNode({node:o}):i._zoomToNode({node:o}))})},t.prototype.remove=function(){this._clearController(),this._containerGroup&&this._containerGroup.removeAll(),this._storage=Al(),this._state="ready",this._breadcrumb&&this._breadcrumb.remove()},t.prototype.dispose=function(){this._clearController()},t.prototype._zoomToNode=function(a){this.api.dispatchAction({type:"treemapZoomToNode",from:this.uid,seriesId:this.seriesModel.id,targetNode:a.node})},t.prototype._rootToNode=function(a){this.api.dispatchAction({type:"treemapRootToNode",from:this.uid,seriesId:this.seriesModel.id,targetNode:a.node})},t.prototype.findTarget=function(a,r){var n,i=this.seriesModel.getViewRoot();return i.eachNode({attr:"viewChildren",order:"preorder"},function(o){var s=this._storage.background[o.getRawIndex()];if(s){var l=s.transformCoordToLocal(a,r),c=s.shape;if(c.x<=l[0]&&l[0]<=c.x+c.width&&c.y<=l[1]&&l[1]<=c.y+c.height)n={node:o,offsetX:l[0],offsetY:l[1]};else return!1}},this),n},t.type="treemap",t}(ra);function Al(){return{nodeGroup:[],background:[],content:[]}}function nz(e,t,a,r,n,i,o,s,l,c){if(!o)return;var u=o.getLayout(),h=e.getData(),d=o.getModel();if(h.setItemGraphicEl(o.dataIndex,null),!u||!u.isInView)return;var f=u.width,p=u.height,g=u.borderWidth,v=u.invisible,_=o.getRawIndex(),y=s&&s.getRawIndex(),b=o.viewChildren,w=u.upperHeight,T=b&&b.length,C=d.getModel("itemStyle"),A=d.getModel(["emphasis","itemStyle"]),k=d.getModel(["blur","itemStyle"]),L=d.getModel(["select","itemStyle"]),M=C.get("borderRadius")||0,P=Tt("nodeGroup",kv);if(!P)return;if(l.add(P),P.x=u.x||0,P.y=u.y||0,P.markRedraw(),nd(P).nodeWidth=f,nd(P).nodeHeight=p,u.isAboveViewRoot)return P;var E=Tt("background",Fb,c,ez);E&&it(P,E,T&&u.upperLabelHeight);var D=d.getModel("emphasis"),O=D.get("focus"),B=D.get("blurScope"),R=D.get("disabled"),V=O==="ancestor"?o.getAncestorsIndices():O==="descendant"?o.getDescendantIndices():O;if(T)t1(P)&&jl(P,!1),E&&(jl(E,!R),h.setItemGraphicEl(o.dataIndex,E),e1(E,V,B));else{var z=Tt("content",Fb,c,az);z&&ot(P,z),E.disableMorphing=!0,E&&t1(E)&&jl(E,!1),jl(P,!R),h.setItemGraphicEl(o.dataIndex,P);var W=d.getShallow("cursor");W&&z.attr("cursor",W),e1(P,V,B)}return P;function it(ut,at,Q){var bt=Ae(at);if(bt.dataIndex=o.dataIndex,bt.seriesIndex=e.seriesIndex,at.setShape({x:0,y:0,width:f,height:p,r:M}),v)xt(at);else{at.invisible=!1;var Dt=o.getVisual("style"),Et=Dt.stroke,ft=Hb(C);ft.fill=Et;var $t=Zi(A);$t.fill=A.get("borderColor");var Pt=Zi(k);Pt.fill=k.get("borderColor");var qt=Zi(L);if(qt.fill=L.get("borderColor"),Q){var nt=f-2*g;j(at,Et,Dt.opacity,{x:g,y:0,width:nt,height:w})}else at.removeTextContent();at.setStyle(ft),at.ensureState("emphasis").style=$t,at.ensureState("blur").style=Pt,at.ensureState("select").style=qt,Fs(at)}ut.add(at)}function ot(ut,at){var Q=Ae(at);Q.dataIndex=o.dataIndex,Q.seriesIndex=e.seriesIndex;var bt=Math.max(f-2*g,0),Dt=Math.max(p-2*g,0);if(at.culling=!0,at.setShape({x:g,y:g,width:bt,height:Dt,r:M}),v)xt(at);else{at.invisible=!1;var Et=o.getVisual("style"),ft=Et.fill,$t=Hb(C);$t.fill=ft,$t.decal=Et.decal;var Pt=Zi(A),qt=Zi(k),nt=Zi(L);j(at,ft,Et.opacity,null),at.setStyle($t),at.ensureState("emphasis").style=Pt,at.ensureState("blur").style=qt,at.ensureState("select").style=nt,Fs(at)}ut.add(at)}function xt(ut){!ut.invisible&&i.push(ut)}function j(ut,at,Q,bt){var Dt=d.getModel(bt?Gb:Vb),Et=zn(d.get("name"),null),ft=Dt.getShallow("show");Fa(ut,Aa(d,bt?Gb:Vb),{defaultText:ft?Et:null,inheritColor:at,defaultOpacity:Q,labelFetcher:e,labelDataIndex:o.dataIndex});var $t=ut.getTextContent();if($t){var Pt=$t.style,qt=p5(Pt.padding||0);bt&&(ut.setTextConfig({layoutRect:bt}),$t.disableLabelLayout=!0),$t.beforeUpdate=function(){var H=Math.max((bt?bt.width:ut.shape.width)-qt[1]-qt[3],0),tt=Math.max((bt?bt.height:ut.shape.height)-qt[0]-qt[2],0);(Pt.width!==H||Pt.height!==tt)&&$t.setStyle({width:H,height:tt})},Pt.truncateMinChar=2,Pt.lineOverflow="truncate",mt(Pt,bt,u);var nt=$t.getState("emphasis");mt(nt?nt.style:null,bt,u)}}function mt(ut,at,Q){var bt=ut?ut.text:null;if(!at&&Q.isLeafRoot&&bt!=null){var Dt=e.get("drillDownIcon",!0);ut.text=Dt?Dt+" "+bt:bt}}function Tt(ut,at,Q,bt){var Dt=y!=null&&a[ut][y],Et=n[ut];return Dt?(a[ut][y]=null,Mt(Et,Dt)):v||(Dt=new at,Dt instanceof Co&&(Dt.z2=iz(Q,bt)),et(Et,Dt)),t[ut][_]=Dt}function Mt(ut,at){var Q=ut[_]={};at instanceof kv?(Q.oldX=at.x,Q.oldY=at.y):Q.oldShape=Vt({},at.shape)}function et(ut,at){var Q=ut[_]={},bt=o.parentNode,Dt=at instanceof ie;if(bt&&(!r||r.direction==="drillDown")){var Et=0,ft=0,$t=n.background[bt.getRawIndex()];!r&&$t&&$t.oldShape&&(Et=$t.oldShape.width,ft=$t.oldShape.height),Dt?(Q.oldX=0,Q.oldY=ft):Q.oldShape={x:Et,y:ft,width:0,height:0}}Q.fadein=!Dt}}function iz(e,t){return e*tz+t}var Nc=G,oz=na,id=-1,Ta=function(){function e(t){var a=t.mappingMethod,r=t.type,n=this.option=Pe(t);this.type=r,this.mappingMethod=a,this._normalizeData=cz[a];var i=e.visualHandlers[r];this.applyVisual=i.applyVisual,this.getColorMapper=i.getColorMapper,this._normalizedToVisual=i._normalizedToVisual[a],a==="piecewise"?(Pp(n),sz(n)):a==="category"?n.categories?lz(n):Pp(n,!0):(Dc(a!=="linear"||n.dataExtent),Pp(n))}return e.prototype.mapValueToVisual=function(t){var a=this._normalizeData(t);return this._normalizedToVisual(a,t)},e.prototype.getNormalizer=function(){return Ut(this._normalizeData,this)},e.listVisualTypes=function(){return pa(e.visualHandlers)},e.isValidType=function(t){return e.visualHandlers.hasOwnProperty(t)},e.eachVisual=function(t,a,r){na(t)?G(t,a,r):a.call(r,t)},e.mapVisual=function(t,a,r){var n,i=Nt(t)?[]:na(t)?{}:(n=!0,null);return e.eachVisual(t,function(o,s){var l=a.call(r,o,s);n?i=l:i[s]=l}),i},e.retrieveVisuals=function(t){var a={},r;return t&&Nc(e.visualHandlers,function(n,i){t.hasOwnProperty(i)&&(a[i]=t[i],r=!0)}),r?a:null},e.prepareVisualTypes=function(t){if(Nt(t))t=t.slice();else if(oz(t)){var a=[];Nc(t,function(r,n){a.push(n)}),t=a}else return[];return t.sort(function(r,n){return n==="color"&&r!=="color"&&r.indexOf("color")===0?1:-1}),t},e.dependsOn=function(t,a){return a==="color"?!!(t&&t.indexOf(a)===0):t===a},e.findPieceIndex=function(t,a,r){for(var n,i=1/0,o=0,s=a.length;o<s;o++){var l=a[o].value;if(l!=null){if(l===t||ge(l)&&l===t+"")return o;r&&d(l,o)}}for(var o=0,s=a.length;o<s;o++){var c=a[o],u=c.interval,h=c.close;if(u){if(u[0]===-1/0){if(Gu(h[1],t,u[1]))return o}else if(u[1]===1/0){if(Gu(h[0],u[0],t))return o}else if(Gu(h[0],u[0],t)&&Gu(h[1],t,u[1]))return o;r&&d(u[0],o),r&&d(u[1],o)}}if(r)return t===1/0?a.length-1:t===-1/0?0:n;function d(f,p){var g=Math.abs(f-t);g<i&&(i=g,n=p)}},e.visualHandlers={color:{applyVisual:kl("color"),getColorMapper:function(){var t=this.option;return Ut(t.mappingMethod==="category"?function(a,r){return!r&&(a=this._normalizeData(a)),Zl.call(this,a)}:function(a,r,n){var i=!!n;return!r&&(a=this._normalizeData(a)),n=dp(a,t.parsedVisual,n),i?n:vh(n,"rgba")},this)},_normalizedToVisual:{linear:function(t){return vh(dp(t,this.option.parsedVisual),"rgba")},category:Zl,piecewise:function(t,a){var r=Lv.call(this,a);return r==null&&(r=vh(dp(t,this.option.parsedVisual),"rgba")),r},fixed:Ki}},colorHue:Vu(function(t,a){return uc(t,a)}),colorSaturation:Vu(function(t,a){return uc(t,null,a)}),colorLightness:Vu(function(t,a){return uc(t,null,null,a)}),colorAlpha:Vu(function(t,a){return Jh(t,a)}),decal:{applyVisual:kl("decal"),_normalizedToVisual:{linear:null,category:Zl,piecewise:null,fixed:null}},opacity:{applyVisual:kl("opacity"),_normalizedToVisual:Dv([0,1])},liftZ:{applyVisual:kl("liftZ"),_normalizedToVisual:{linear:Ki,category:Ki,piecewise:Ki,fixed:Ki}},symbol:{applyVisual:function(t,a,r){var n=this.mapValueToVisual(t);r("symbol",n)},_normalizedToVisual:{linear:Wb,category:Zl,piecewise:function(t,a){var r=Lv.call(this,a);return r==null&&(r=Wb.call(this,t)),r},fixed:Ki}},symbolSize:{applyVisual:kl("symbolSize"),_normalizedToVisual:Dv([0,1])}},e}();function sz(e){var t=e.pieceList;e.hasSpecialVisual=!1,G(t,function(a,r){a.originIndex=r,a.visual!=null&&(e.hasSpecialVisual=!0)})}function lz(e){var t=e.categories,a=e.categoryMap={},r=e.visual;if(Nc(t,function(o,s){a[o]=s}),!Nt(r)){var n=[];na(r)?Nc(r,function(o,s){var l=a[s];n[l??id]=o}):n[id]=r,r=EA(e,n)}for(var i=t.length-1;i>=0;i--)r[i]==null&&(delete a[t[i]],t.pop())}function Pp(e,t){var a=e.visual,r=[];na(a)?Nc(a,function(i){r.push(i)}):a!=null&&r.push(a);var n={color:1,symbol:1};!t&&r.length===1&&!n.hasOwnProperty(e.type)&&(r[1]=r[0]),EA(e,r)}function Vu(e){return{applyVisual:function(t,a,r){var n=this.mapValueToVisual(t);r("color",e(a("color"),n))},_normalizedToVisual:Dv([0,1])}}function Wb(e){var t=this.option.visual;return t[Math.round(Ve(e,[0,1],[0,t.length-1],!0))]||{}}function kl(e){return function(t,a,r){r(e,this.mapValueToVisual(t))}}function Zl(e){var t=this.option.visual;return t[this.option.loop&&e!==id?e%t.length:e]}function Ki(){return this.option.visual[0]}function Dv(e){return{linear:function(t){return Ve(t,e,this.option.visual,!0)},category:Zl,piecewise:function(t,a){var r=Lv.call(this,a);return r==null&&(r=Ve(t,e,this.option.visual,!0)),r},fixed:Ki}}function Lv(e){var t=this.option,a=t.pieceList;if(t.hasSpecialVisual){var r=Ta.findPieceIndex(e,a),n=a[r];if(n&&n.visual)return n.visual[this.type]}}function EA(e,t){return e.visual=t,e.type==="color"&&(e.parsedVisual=Ot(t,function(a){var r=dT(a);return r||[0,0,0,1]})),t}var cz={linear:function(e){return Ve(e,this.option.dataExtent,[0,1],!0)},piecewise:function(e){var t=this.option.pieceList,a=Ta.findPieceIndex(e,t,!0);if(a!=null)return Ve(a,[0,t.length-1],[0,1],!0)},category:function(e){var t=this.option.categories?this.option.categoryMap[e]:e;return t??id},fixed:xn};function Gu(e,t,a){return e?t<=a:t<a}var uz="itemStyle",RA=ia();const hz={seriesType:"treemap",reset:function(e){var t=e.getData().tree,a=t.root;a.isRemoved()||PA(a,{},e.getViewRoot().getAncestors(),e)}};function PA(e,t,a,r){var n=e.getModel(),i=e.getLayout(),o=e.hostTree.data;if(!(!i||i.invisible||!i.isInView)){var s=n.getModel(uz),l=dz(s,t,r),c=o.ensureUniqueItemVisual(e.dataIndex,"style"),u=s.get("borderColor"),h=s.get("borderColorSaturation"),d;h!=null&&(d=qb(l),u=fz(h,d)),c.stroke=u;var f=e.viewChildren;if(!f||!f.length)d=qb(l),c.fill=d;else{var p=pz(e,n,i,s,l,f);G(f,function(g,v){if(g.depth>=a.length||g===a[g.depth]){var _=gz(n,l,g,v,p,r);PA(g,_,a,r)}})}}}function dz(e,t,a){var r=Vt({},t),n=a.designatedVisualItemStyle;return G(["color","colorAlpha","colorSaturation"],function(i){n[i]=t[i];var o=e.get(i);n[i]=null,o!=null&&(r[i]=o)}),r}function qb(e){var t=Bp(e,"color");if(t){var a=Bp(e,"colorAlpha"),r=Bp(e,"colorSaturation");return r&&(t=uc(t,null,null,r)),a&&(t=Jh(t,a)),t}}function fz(e,t){return t!=null?uc(t,null,null,e):null}function Bp(e,t){var a=e[t];if(a!=null&&a!=="none")return a}function pz(e,t,a,r,n,i){if(!(!i||!i.length)){var o=Op(t,"color")||n.color!=null&&n.color!=="none"&&(Op(t,"colorAlpha")||Op(t,"colorSaturation"));if(o){var s=t.get("visualMin"),l=t.get("visualMax"),c=a.dataExtent.slice();s!=null&&s<c[0]&&(c[0]=s),l!=null&&l>c[1]&&(c[1]=l);var u=t.get("colorMappingBy"),h={type:o.name,dataExtent:c,visual:o.range};h.type==="color"&&(u==="index"||u==="id")?(h.mappingMethod="category",h.loop=!0):h.mappingMethod="linear";var d=new Ta(h);return RA(d).drColorMappingBy=u,d}}}function Op(e,t){var a=e.get(t);return Nt(a)&&a.length?{name:t,range:a}:null}function gz(e,t,a,r,n,i){var o=Vt({},t);if(n){var s=n.type,l=s==="color"&&RA(n).drColorMappingBy,c=l==="index"?r:l==="id"?i.mapIdToIndex(a.getId()):a.getValue(e.get("visualDimension"));o[s]=n.mapValueToVisual(c)}return o}var $c=Math.max,od=Math.min,Ub=Ma,Py=G,BA=["itemStyle","borderWidth"],vz=["itemStyle","gapWidth"],mz=["upperLabel","show"],yz=["upperLabel","height"];const _z={seriesType:"treemap",reset:function(e,t,a,r){var n=a.getWidth(),i=a.getHeight(),o=e.option,s=ka(e.getBoxLayoutParams(),{width:a.getWidth(),height:a.getHeight()}),l=o.size||[],c=Ft(Ub(s.width,l[0]),n),u=Ft(Ub(s.height,l[1]),i),h=r&&r.type,d=["treemapZoomToNode","treemapRootToNode"],f=Oc(r,d,e),p=h==="treemapRender"||h==="treemapMove"?r.rootRect:null,g=e.getViewRoot(),v=LA(g);if(h!=="treemapMove"){var _=h==="treemapZoomToNode"?Tz(e,f,g,c,u):p?[p.width,p.height]:[c,u],y=o.sort;y&&y!=="asc"&&y!=="desc"&&(y="desc");var b={squareRatio:o.squareRatio,sort:y,leafDepth:o.leafDepth};g.hostTree.clearLayouts();var w={x:0,y:0,width:_[0],height:_[1],area:_[0]*_[1]};g.setLayout(w),OA(g,b,!1,0),w=g.getLayout(),Py(v,function(C,A){var k=(v[A+1]||g).getValue();C.setLayout(Vt({dataExtent:[k,k],borderWidth:0,upperHeight:0},w))})}var T=e.getData().tree.root;T.setLayout(Az(s,p,f),!0),e.setLayoutInfo(s),NA(T,new aa(-s.x,-s.y,n,i),v,g,0)}};function OA(e,t,a,r){var n,i;if(!e.isRemoved()){var o=e.getLayout();n=o.width,i=o.height;var s=e.getModel(),l=s.get(BA),c=s.get(vz)/2,u=$A(s),h=Math.max(l,u),d=l-c,f=h-c;e.setLayout({borderWidth:l,upperHeight:h,upperLabelHeight:u},!0),n=$c(n-2*d,0),i=$c(i-d-f,0);var p=n*i,g=bz(e,s,p,t,a,r);if(g.length){var v={x:d,y:f,width:n,height:i},_=od(n,i),y=1/0,b=[];b.area=0;for(var w=0,T=g.length;w<T;){var C=g[w];b.push(C),b.area+=C.getLayout().area;var A=Cz(b,_,t.squareRatio);A<=y?(w++,y=A):(b.area-=b.pop().getLayout().area,jb(b,_,v,c,!1),_=od(v.width,v.height),b.length=b.area=0,y=1/0)}if(b.length&&jb(b,_,v,c,!0),!a){var k=s.get("childrenVisibleMin");k!=null&&p<k&&(a=!0)}for(var w=0,T=g.length;w<T;w++)OA(g[w],t,a,r+1)}}}function bz(e,t,a,r,n,i){var o=e.children||[],s=r.sort;s!=="asc"&&s!=="desc"&&(s=null);var l=r.leafDepth!=null&&r.leafDepth<=i;if(n&&!l)return e.viewChildren=[];o=Va(o,function(f){return!f.isRemoved()}),Sz(o,s);var c=wz(t,o,s);if(c.sum===0)return e.viewChildren=[];if(c.sum=xz(t,a,c.sum,s,o),c.sum===0)return e.viewChildren=[];for(var u=0,h=o.length;u<h;u++){var d=o[u].getValue()/c.sum*a;o[u].setLayout({area:d})}return l&&(o.length&&e.setLayout({isLeafRoot:!0},!0),o.length=0),e.viewChildren=o,e.setLayout({dataExtent:c.dataExtent},!0),o}function xz(e,t,a,r,n){if(!r)return a;for(var i=e.get("visibleMin"),o=n.length,s=o,l=o-1;l>=0;l--){var c=n[r==="asc"?o-l-1:l].getValue();c/a*t<i&&(s=l,a-=c)}return r==="asc"?n.splice(0,o-s):n.splice(s,o-s),a}function Sz(e,t){return t&&e.sort(function(a,r){var n=t==="asc"?a.getValue()-r.getValue():r.getValue()-a.getValue();return n===0?t==="asc"?a.dataIndex-r.dataIndex:r.dataIndex-a.dataIndex:n}),e}function wz(e,t,a){for(var r=0,n=0,i=t.length;n<i;n++)r+=t[n].getValue();var o=e.get("visualDimension"),s;return!t||!t.length?s=[NaN,NaN]:o==="value"&&a?(s=[t[t.length-1].getValue(),t[0].getValue()],a==="asc"&&s.reverse()):(s=[1/0,-1/0],Py(t,function(l){var c=l.getValue(o);c<s[0]&&(s[0]=c),c>s[1]&&(s[1]=c)})),{sum:r,dataExtent:s}}function Cz(e,t,a){for(var r=0,n=1/0,i=0,o=void 0,s=e.length;i<s;i++)o=e[i].getLayout().area,o&&(o<n&&(n=o),o>r&&(r=o));var l=e.area*e.area,c=t*t*a;return l?$c(c*r/l,l/(c*n)):1/0}function jb(e,t,a,r,n){var i=t===a.width?0:1,o=1-i,s=["x","y"],l=["width","height"],c=a[s[i]],u=t?e.area/t:0;(n||u>a[l[o]])&&(u=a[l[o]]);for(var h=0,d=e.length;h<d;h++){var f=e[h],p={},g=u?f.getLayout().area/u:0,v=p[l[o]]=$c(u-2*r,0),_=a[s[i]]+a[l[i]]-c,y=h===d-1||_<g?_:g,b=p[l[i]]=$c(y-2*r,0);p[s[o]]=a[s[o]]+od(r,v/2),p[s[i]]=c+od(r,b/2),c+=y,f.setLayout(p,!0)}a[s[o]]+=u,a[l[o]]-=u}function Tz(e,t,a,r,n){var i=(t||{}).node,o=[r,n];if(!i||i===a)return o;for(var s,l=r*n,c=l*e.option.zoomToNodeRatio;s=i.parentNode;){for(var u=0,h=s.children,d=0,f=h.length;d<f;d++)u+=h[d].getValue();var p=i.getValue();if(p===0)return o;c*=u/p;var g=s.getModel(),v=g.get(BA),_=Math.max(v,$A(g));c+=4*v*v+(3*v+_)*Math.pow(c,.5),c>a1&&(c=a1),i=s}c<l&&(c=l);var y=Math.pow(c/l,.5);return[r*y,n*y]}function Az(e,t,a){if(t)return{x:t.x,y:t.y};var r={x:0,y:0};if(!a)return r;var n=a.node,i=n.getLayout();if(!i)return r;for(var o=[i.width/2,i.height/2],s=n;s;){var l=s.getLayout();o[0]+=l.x,o[1]+=l.y,s=s.parentNode}return{x:e.width/2-o[0],y:e.height/2-o[1]}}function NA(e,t,a,r,n){var i=e.getLayout(),o=a[n],s=o&&o===e;if(!(o&&!s||n===a.length&&e!==r)){e.setLayout({isInView:!0,invisible:!s&&!t.intersect(i),isAboveViewRoot:s},!0);var l=new aa(t.x-i.x,t.y-i.y,t.width,t.height);Py(e.viewChildren||[],function(c){NA(c,l,a,r,n+1)})}}function $A(e){return e.get(mz)?e.get(yz):0}function kz(e){e.registerSeriesModel(U6),e.registerChartView(rz),e.registerVisual(hz),e.registerLayout(_z),q6(e)}function Dz(e){var t=e.findComponents({mainType:"legend"});!t||!t.length||e.eachSeriesByType("graph",function(a){var r=a.getCategoriesData(),n=a.getGraph(),i=n.data,o=r.mapArray(r.getName);i.filterSelf(function(s){var l=i.getItemModel(s),c=l.getShallow("category");if(c!=null){Ea(c)&&(c=o[c]);for(var u=0;u<t.length;u++)if(!t[u].isSelected(c))return!1}return!0})})}function Lz(e){var t={};e.eachSeriesByType("graph",function(a){var r=a.getCategoriesData(),n=a.getData(),i={};r.each(function(o){var s=r.getName(o);i["ec-"+s]=o;var l=r.getItemModel(o),c=l.getModel("itemStyle").getItemStyle();c.fill||(c.fill=a.getColorFromPalette(s,t)),r.setItemVisual(o,"style",c);for(var u=["symbol","symbolSize","symbolKeepAspect"],h=0;h<u.length;h++){var d=l.getShallow(u[h],!0);d!=null&&r.setItemVisual(o,u[h],d)}}),r.count()&&n.each(function(o){var s=n.getItemModel(o),l=s.getShallow("category");if(l!=null){ge(l)&&(l=i["ec-"+l]);var c=r.getItemVisual(l,"style"),u=n.ensureUniqueItemVisual(o,"style");Vt(u,c);for(var h=["symbol","symbolSize","symbolKeepAspect"],d=0;d<h.length;d++)n.setItemVisual(o,h[d],r.getItemVisual(l,h[d]))}})})}function Hu(e){return e instanceof Array||(e=[e,e]),e}function Iz(e){e.eachSeriesByType("graph",function(t){var a=t.getGraph(),r=t.getEdgeData(),n=Hu(t.get("edgeSymbol")),i=Hu(t.get("edgeSymbolSize"));r.setVisual("fromSymbol",n&&n[0]),r.setVisual("toSymbol",n&&n[1]),r.setVisual("fromSymbolSize",i&&i[0]),r.setVisual("toSymbolSize",i&&i[1]),r.setVisual("style",t.getModel("lineStyle").getLineStyle()),r.each(function(o){var s=r.getItemModel(o),l=a.getEdgeByIndex(o),c=Hu(s.getShallow("symbol",!0)),u=Hu(s.getShallow("symbolSize",!0)),h=s.getModel("lineStyle").getLineStyle(),d=r.ensureUniqueItemVisual(o,"style");switch(Vt(d,h),d.stroke){case"source":{var f=l.node1.getVisual("style");d.stroke=f&&f.fill;break}case"target":{var f=l.node2.getVisual("style");d.stroke=f&&f.fill;break}}c[0]&&l.setVisual("fromSymbol",c[0]),c[1]&&l.setVisual("toSymbol",c[1]),u[0]&&l.setVisual("fromSymbolSize",u[0]),u[1]&&l.setVisual("toSymbolSize",u[1])})})}var Iv="-->",Tf=function(e){return e.get("autoCurveness")||null},FA=function(e,t){var a=Tf(e),r=20,n=[];if(Ea(a))r=a;else if(Nt(a)){e.__curvenessList=a;return}t>r&&(r=t);var i=r%2?r+2:r+3;n=[];for(var o=0;o<i;o++)n.push((o%2?o+1:o)/10*(o%2?-1:1));e.__curvenessList=n},Fc=function(e,t,a){var r=[e.id,e.dataIndex].join("."),n=[t.id,t.dataIndex].join(".");return[a.uid,r,n].join(Iv)},zA=function(e){var t=e.split(Iv);return[t[0],t[2],t[1]].join(Iv)},Mz=function(e,t){var a=Fc(e.node1,e.node2,t);return t.__edgeMap[a]},Ez=function(e,t){var a=Mv(Fc(e.node1,e.node2,t),t),r=Mv(Fc(e.node2,e.node1,t),t);return a+r},Mv=function(e,t){var a=t.__edgeMap;return a[e]?a[e].length:0};function Rz(e){Tf(e)&&(e.__curvenessList=[],e.__edgeMap={},FA(e))}function Pz(e,t,a,r){if(Tf(a)){var n=Fc(e,t,a),i=a.__edgeMap,o=i[zA(n)];i[n]&&!o?i[n].isForward=!0:o&&i[n]&&(o.isForward=!0,i[n].isForward=!1),i[n]=i[n]||[],i[n].push(r)}}function By(e,t,a,r){var n=Tf(t),i=Nt(n);if(!n)return null;var o=Mz(e,t);if(!o)return null;for(var s=-1,l=0;l<o.length;l++)if(o[l]===a){s=l;break}var c=Ez(e,t);FA(t,c),e.lineStyle=e.lineStyle||{};var u=Fc(e.node1,e.node2,t),h=t.__curvenessList,d=i||c%2?0:1;if(o.isForward)return h[d+s];var f=zA(u),p=Mv(f,t),g=h[s+p+d];return r?i?n&&n[0]===0?(p+d)%2?g:-g:((p%2?0:1)+d)%2?g:-g:(p+d)%2?g:-g:h[s+p+d]}function VA(e){var t=e.coordinateSystem;if(!(t&&t.type!=="view")){var a=e.getGraph();a.eachNode(function(r){var n=r.getModel();r.setLayout([+n.get("x"),+n.get("y")])}),Oy(a,e)}}function Oy(e,t){e.eachEdge(function(a,r){var n=sl(a.getModel().get(["lineStyle","curveness"]),-By(a,t,r,!0),0),i=ki(a.node1.getLayout()),o=ki(a.node2.getLayout()),s=[i,o];+n&&s.push([(i[0]+o[0])/2-(i[1]-o[1])*n,(i[1]+o[1])/2-(o[0]-i[0])*n]),a.setLayout(s)})}function Bz(e,t){e.eachSeriesByType("graph",function(a){var r=a.get("layout"),n=a.coordinateSystem;if(n&&n.type!=="view"){var i=a.getData(),o=[];G(n.dimensions,function(d){o=o.concat(i.mapDimensionsAll(d))});for(var s=0;s<i.count();s++){for(var l=[],c=!1,u=0;u<o.length;u++){var h=i.get(o[u],s);isNaN(h)||(c=!0),l.push(h)}c?i.setItemLayout(s,n.dataToPoint(l)):i.setItemLayout(s,[NaN,NaN])}Oy(i.graph,a)}else(!r||r==="none")&&VA(a)})}function Kl(e){var t=e.coordinateSystem;if(t.type!=="view")return 1;var a=e.option.nodeScaleRatio,r=t.scaleX,n=t.getZoom(),i=(n-1)*a+1;return i/r}function Jl(e){var t=e.getVisual("symbolSize");return t instanceof Array&&(t=(t[0]+t[1])/2),+t}var Yb=Math.PI,Np=[];function Ny(e,t,a,r){var n=e.coordinateSystem;if(!(n&&n.type!=="view")){var i=n.getBoundingRect(),o=e.getData(),s=o.graph,l=i.width/2+i.x,c=i.height/2+i.y,u=Math.min(i.width,i.height)/2,h=o.count();if(o.setLayout({cx:l,cy:c}),!!h){if(a){var d=n.pointToData(r),f=d[0],p=d[1],g=[f-l,p-c];lu(g,g),g5(g,g,u),a.setLayout([l+g[0],c+g[1]],!0);var v=e.get(["circular","rotateLabel"]);GA(a,v,l,c)}Oz[t](e,s,o,u,l,c,h),s.eachEdge(function(_,y){var b=sl(_.getModel().get(["lineStyle","curveness"]),By(_,e,y),0),w=ki(_.node1.getLayout()),T=ki(_.node2.getLayout()),C,A=(w[0]+T[0])/2,k=(w[1]+T[1])/2;+b&&(b*=3,C=[l*b+A*(1-b),c*b+k*(1-b)]),_.setLayout([w,T,C])})}}}var Oz={value:function(e,t,a,r,n,i,o){var s=0,l=a.getSum("value"),c=Math.PI*2/(l||o);t.eachNode(function(u){var h=u.getValue("value"),d=c*(l?h:1)/2;s+=d,u.setLayout([r*Math.cos(s)+n,r*Math.sin(s)+i]),s+=d})},symbolSize:function(e,t,a,r,n,i,o){var s=0;Np.length=o;var l=Kl(e);t.eachNode(function(h){var d=Jl(h);isNaN(d)&&(d=2),d<0&&(d=0),d*=l;var f=Math.asin(d/2/r);isNaN(f)&&(f=Yb/2),Np[h.dataIndex]=f,s+=f*2});var c=(2*Yb-s)/o/2,u=0;t.eachNode(function(h){var d=c+Np[h.dataIndex];u+=d,(!h.getLayout()||!h.getLayout().fixed)&&h.setLayout([r*Math.cos(u)+n,r*Math.sin(u)+i]),u+=d})}};function GA(e,t,a,r){var n=e.getGraphicEl();if(n){var i=e.getModel(),o=i.get(["label","rotate"])||0,s=n.getSymbolPath();if(t){var l=e.getLayout(),c=Math.atan2(l[1]-r,l[0]-a);c<0&&(c=Math.PI*2+c);var u=l[0]<a;u&&(c=c-Math.PI);var h=u?"left":"right";s.setTextConfig({rotation:-c,position:h,origin:"center"});var d=s.ensureState("emphasis");Vt(d.textConfig||(d.textConfig={}),{position:h})}else s.setTextConfig({rotation:o*=Math.PI/180})}}function Nz(e){e.eachSeriesByType("graph",function(t){t.get("layout")==="circular"&&Ny(t,"symbolSize")})}var jo=cv;function $z(e,t,a){for(var r=e,n=t,i=a.rect,o=i.width,s=i.height,l=[i.x+o/2,i.y+s/2],c=a.gravity==null?.1:a.gravity,u=0;u<r.length;u++){var h=r[u];h.p||(h.p=v5(o*(Math.random()-.5)+l[0],s*(Math.random()-.5)+l[1])),h.pp=ki(h.p),h.edges=null}var d=a.friction==null?.6:a.friction,f=d,p,g;return{warmUp:function(){f=d*.8},setFixed:function(v){r[v].fixed=!0},setUnfixed:function(v){r[v].fixed=!1},beforeStep:function(v){p=v},afterStep:function(v){g=v},step:function(v){p&&p(r,n);for(var _=[],y=r.length,b=0;b<n.length;b++){var w=n[b];if(!w.ignoreForceLayout){var T=w.n1,C=w.n2;fs(_,C.p,T.p);var A=r1(_)-w.d,k=C.w/(T.w+C.w);isNaN(k)&&(k=0),lu(_,_),!T.fixed&&jo(T.p,T.p,_,k*A*f),!C.fixed&&jo(C.p,C.p,_,-(1-k)*A*f)}}for(var b=0;b<y;b++){var L=r[b];L.fixed||(fs(_,l,L.p),jo(L.p,L.p,_,c*f))}for(var b=0;b<y;b++)for(var T=r[b],M=b+1;M<y;M++){var C=r[M];fs(_,C.p,T.p);var A=r1(_);A===0&&(m5(_,Math.random()-.5,Math.random()-.5),A=1);var P=(T.rep+C.rep)/A/A;!T.fixed&&jo(T.pp,T.pp,_,P),!C.fixed&&jo(C.pp,C.pp,_,-P)}for(var E=[],b=0;b<y;b++){var L=r[b];L.fixed||(fs(E,L.p,L.pp),jo(L.p,L.p,E,f),Qa(L.pp,L.p))}f=f*.992;var D=f<.01;g&&g(r,n,D),v&&v(D)}}}function Fz(e){e.eachSeriesByType("graph",function(t){var a=t.coordinateSystem;if(!(a&&a.type!=="view"))if(t.get("layout")==="force"){var r=t.preservedPoints||{},n=t.getGraph(),i=n.data,o=n.edgeData,s=t.getModel("force"),l=s.get("initLayout");t.preservedPoints?i.each(function(b){var w=i.getId(b);i.setItemLayout(b,r[w]||[NaN,NaN])}):!l||l==="none"?VA(t):l==="circular"&&Ny(t,"value");var c=i.getDataExtent("value"),u=o.getDataExtent("value"),h=s.get("repulsion"),d=s.get("edgeLength"),f=Nt(h)?h:[h,h],p=Nt(d)?d:[d,d];p=[p[1],p[0]];var g=i.mapArray("value",function(b,w){var T=i.getItemLayout(w),C=Ve(b,c,f);return isNaN(C)&&(C=(f[0]+f[1])/2),{w:C,rep:C,fixed:i.getItemModel(w).get("fixed"),p:!T||isNaN(T[0])||isNaN(T[1])?null:T}}),v=o.mapArray("value",function(b,w){var T=n.getEdgeByIndex(w),C=Ve(b,u,p);isNaN(C)&&(C=(p[0]+p[1])/2);var A=T.getModel(),k=sl(T.getModel().get(["lineStyle","curveness"]),-By(T,t,w,!0),0);return{n1:g[T.node1.dataIndex],n2:g[T.node2.dataIndex],d:C,curveness:k,ignoreForceLayout:A.get("ignoreForceLayout")}}),_=a.getBoundingRect(),y=$z(g,v,{rect:_,gravity:s.get("gravity"),friction:s.get("friction")});y.beforeStep(function(b,w){for(var T=0,C=b.length;T<C;T++)b[T].fixed&&Qa(b[T].p,n.getNodeByIndex(T).getLayout())}),y.afterStep(function(b,w,T){for(var C=0,A=b.length;C<A;C++)b[C].fixed||n.getNodeByIndex(C).setLayout(b[C].p),r[i.getId(C)]=b[C].p;for(var C=0,A=w.length;C<A;C++){var k=w[C],L=n.getEdgeByIndex(C),M=k.n1.p,P=k.n2.p,E=L.getLayout();E=E?E.slice():[],E[0]=E[0]||[],E[1]=E[1]||[],Qa(E[0],M),Qa(E[1],P),+k.curveness&&(E[2]=[(M[0]+P[0])/2-(M[1]-P[1])*k.curveness,(M[1]+P[1])/2-(P[0]-M[0])*k.curveness]),L.setLayout(E)}}),t.forceLayout=y,t.preservedPoints=r,y.step()}else t.forceLayout=null})}function zz(e,t,a){var r=Vt(e.getBoxLayoutParams(),{aspect:a});return ka(r,{width:t.getWidth(),height:t.getHeight()})}function Vz(e,t){var a=[];return e.eachSeriesByType("graph",function(r){var n=r.get("coordinateSystem");if(!n||n==="view"){var i=r.getData(),o=i.mapArray(function(v){var _=i.getItemModel(v);return[+_.get("x"),+_.get("y")]}),s=[],l=[];pf(o,s,l),l[0]-s[0]===0&&(l[0]+=1,s[0]-=1),l[1]-s[1]===0&&(l[1]+=1,s[1]-=1);var c=(l[0]-s[0])/(l[1]-s[1]),u=zz(r,t,c);isNaN(c)&&(s=[u.x,u.y],l=[u.x+u.width,u.y+u.height]);var h=l[0]-s[0],d=l[1]-s[1],f=u.width,p=u.height,g=r.coordinateSystem=new mu;g.zoomLimit=r.get("scaleLimit"),g.setBoundingRect(s[0],s[1],h,d),g.setViewRect(u.x,u.y,f,p),g.setCenter(r.get("center"),t),g.setZoom(r.get("zoom")),a.push(g)}}),a}var Xb=tr.prototype,$p=uT.prototype,HA=function(){function e(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.percent=1}return e}();(function(e){gt(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t})(HA);function Fp(e){return isNaN(+e.cpx1)||isNaN(+e.cpy1)}var Gz=function(e){gt(t,e);function t(a){var r=e.call(this,a)||this;return r.type="ec-line",r}return t.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},t.prototype.getDefaultShape=function(){return new HA},t.prototype.buildPath=function(a,r){Fp(r)?Xb.buildPath.call(this,a,r):$p.buildPath.call(this,a,r)},t.prototype.pointAt=function(a){return Fp(this.shape)?Xb.pointAt.call(this,a):$p.pointAt.call(this,a)},t.prototype.tangentAt=function(a){var r=this.shape,n=Fp(r)?[r.x2-r.x1,r.y2-r.y1]:$p.tangentAt.call(this,a);return lu(n,n)},t}(va),zp=["fromSymbol","toSymbol"];function Zb(e){return"_"+e+"Type"}function Kb(e,t,a){var r=t.getItemVisual(a,e);if(!r||r==="none")return r;var n=t.getItemVisual(a,e+"Size"),i=t.getItemVisual(a,e+"Rotate"),o=t.getItemVisual(a,e+"Offset"),s=t.getItemVisual(a,e+"KeepAspect"),l=il(n),c=Oo(o||0,l);return r+l+c+(i||"")+(s||"")}function Jb(e,t,a){var r=t.getItemVisual(a,e);if(!(!r||r==="none")){var n=t.getItemVisual(a,e+"Size"),i=t.getItemVisual(a,e+"Rotate"),o=t.getItemVisual(a,e+"Offset"),s=t.getItemVisual(a,e+"KeepAspect"),l=il(n),c=Oo(o||0,l),u=ba(r,-l[0]/2+c[0],-l[1]/2+c[1],l[0],l[1],null,s);return u.__specifiedRotation=i==null||isNaN(i)?void 0:+i*Math.PI/180||0,u.name=e,u}}function Hz(e){var t=new Gz({name:"line",subPixelOptimize:!0});return Ev(t.shape,e),t}function Ev(e,t){e.x1=t[0][0],e.y1=t[0][1],e.x2=t[1][0],e.y2=t[1][1],e.percent=1;var a=t[2];a?(e.cpx1=a[0],e.cpy1=a[1]):(e.cpx1=NaN,e.cpy1=NaN)}var $y=function(e){gt(t,e);function t(a,r,n){var i=e.call(this)||this;return i._createLine(a,r,n),i}return t.prototype._createLine=function(a,r,n){var i=a.hostModel,o=a.getItemLayout(r),s=Hz(o);s.shape.percent=0,la(s,{shape:{percent:1}},i,r),this.add(s),G(zp,function(l){var c=Jb(l,a,r);this.add(c),this[Zb(l)]=Kb(l,a,r)},this),this._updateCommonStl(a,r,n)},t.prototype.updateData=function(a,r,n){var i=a.hostModel,o=this.childOfName("line"),s=a.getItemLayout(r),l={shape:{}};Ev(l.shape,s),ze(o,l,i,r),G(zp,function(c){var u=Kb(c,a,r),h=Zb(c);if(this[h]!==u){this.remove(this.childOfName(c));var d=Jb(c,a,r);this.add(d)}this[h]=u},this),this._updateCommonStl(a,r,n)},t.prototype.getLinePath=function(){return this.childAt(0)},t.prototype._updateCommonStl=function(a,r,n){var i=a.hostModel,o=this.childOfName("line"),s=n&&n.emphasisLineStyle,l=n&&n.blurLineStyle,c=n&&n.selectLineStyle,u=n&&n.labelStatesModels,h=n&&n.emphasisDisabled,d=n&&n.focus,f=n&&n.blurScope;if(!n||a.hasItemOption){var p=a.getItemModel(r),g=p.getModel("emphasis");s=g.getModel("lineStyle").getLineStyle(),l=p.getModel(["blur","lineStyle"]).getLineStyle(),c=p.getModel(["select","lineStyle"]).getLineStyle(),h=g.get("disabled"),d=g.get("focus"),f=g.get("blurScope"),u=Aa(p)}var v=a.getItemVisual(r,"style"),_=v.stroke;o.useStyle(v),o.style.fill=null,o.style.strokeNoScale=!0,o.ensureState("emphasis").style=s,o.ensureState("blur").style=l,o.ensureState("select").style=c,G(zp,function(C){var A=this.childOfName(C);if(A){A.setColor(_),A.style.opacity=v.opacity;for(var k=0;k<Tc.length;k++){var L=Tc[k],M=o.getState(L);if(M){var P=M.style||{},E=A.ensureState(L),D=E.style||(E.style={});P.stroke!=null&&(D[A.__isEmptyBrush?"stroke":"fill"]=P.stroke),P.opacity!=null&&(D.opacity=P.opacity)}}A.markRedraw()}},this);var y=i.getRawValue(r);Fa(this,u,{labelDataIndex:r,labelFetcher:{getFormattedLabel:function(C,A){return i.getFormattedLabel(C,A,a.dataType)}},inheritColor:_||"#000",defaultOpacity:v.opacity,defaultText:(y==null?a.getName(r):isFinite(y)?_n(y):y)+""});var b=this.getTextContent();if(b){var w=u.normal;b.__align=b.style.align,b.__verticalAlign=b.style.verticalAlign,b.__position=w.get("position")||"middle";var T=w.get("distance");Nt(T)||(T=[T,T]),b.__labelDistance=T}this.setTextConfig({position:null,local:!0,inside:!1}),Qe(this,d,f,h)},t.prototype.highlight=function(){Rs(this)},t.prototype.downplay=function(){Ps(this)},t.prototype.updateLayout=function(a,r){this.setLinePoints(a.getItemLayout(r))},t.prototype.setLinePoints=function(a){var r=this.childOfName("line");Ev(r.shape,a),r.dirty()},t.prototype.beforeUpdate=function(){var a=this,r=a.childOfName("fromSymbol"),n=a.childOfName("toSymbol"),i=a.getTextContent();if(!r&&!n&&(!i||i.ignore))return;for(var o=1,s=this.parent;s;)s.scaleX&&(o/=s.scaleX),s=s.parent;var l=a.childOfName("line");if(!this.__dirty&&!l.__dirty)return;var c=l.shape.percent,u=l.pointAt(0),h=l.pointAt(c),d=fs([],h,u);lu(d,d);function f(M,P){var E=M.__specifiedRotation;if(E==null){var D=l.tangentAt(P);M.attr("rotation",(P===1?-1:1)*Math.PI/2-Math.atan2(D[1],D[0]))}else M.attr("rotation",E)}if(r&&(r.setPosition(u),f(r,0),r.scaleX=r.scaleY=o*c,r.markRedraw()),n&&(n.setPosition(h),f(n,1),n.scaleX=n.scaleY=o*c,n.markRedraw()),i&&!i.ignore){i.x=i.y=0,i.originX=i.originY=0;var p=void 0,g=void 0,v=i.__labelDistance,_=v[0]*o,y=v[1]*o,b=c/2,w=l.tangentAt(b),T=[w[1],-w[0]],C=l.pointAt(b);T[1]>0&&(T[0]=-T[0],T[1]=-T[1]);var A=w[0]<0?-1:1;if(i.__position!=="start"&&i.__position!=="end"){var k=-Math.atan2(w[1],w[0]);h[0]<u[0]&&(k=Math.PI+k),i.rotation=k}var L=void 0;switch(i.__position){case"insideStartTop":case"insideMiddleTop":case"insideEndTop":case"middle":L=-y,g="bottom";break;case"insideStartBottom":case"insideMiddleBottom":case"insideEndBottom":L=y,g="top";break;default:L=0,g="middle"}switch(i.__position){case"end":i.x=d[0]*_+h[0],i.y=d[1]*y+h[1],p=d[0]>.8?"left":d[0]<-.8?"right":"center",g=d[1]>.8?"top":d[1]<-.8?"bottom":"middle";break;case"start":i.x=-d[0]*_+u[0],i.y=-d[1]*y+u[1],p=d[0]>.8?"right":d[0]<-.8?"left":"center",g=d[1]>.8?"bottom":d[1]<-.8?"top":"middle";break;case"insideStartTop":case"insideStart":case"insideStartBottom":i.x=_*A+u[0],i.y=u[1]+L,p=w[0]<0?"right":"left",i.originX=-_*A,i.originY=-L;break;case"insideMiddleTop":case"insideMiddle":case"insideMiddleBottom":case"middle":i.x=C[0],i.y=C[1]+L,p="center",i.originY=-L;break;case"insideEndTop":case"insideEnd":case"insideEndBottom":i.x=-_*A+h[0],i.y=h[1]+L,p=w[0]>=0?"right":"left",i.originX=_*A,i.originY=-L;break}i.scaleX=i.scaleY=o,i.setStyle({verticalAlign:i.__verticalAlign||g,align:i.__align||p})}},t}(ie),Fy=function(){function e(t){this.group=new ie,this._LineCtor=t||$y}return e.prototype.updateData=function(t){var a=this;this._progressiveEls=null;var r=this,n=r.group,i=r._lineData;r._lineData=t,i||n.removeAll();var o=Qb(t);t.diff(i).add(function(s){a._doAdd(t,s,o)}).update(function(s,l){a._doUpdate(i,t,l,s,o)}).remove(function(s){n.remove(i.getItemGraphicEl(s))}).execute()},e.prototype.updateLayout=function(){var t=this._lineData;t&&t.eachItemGraphicEl(function(a,r){a.updateLayout(t,r)},this)},e.prototype.incrementalPrepareUpdate=function(t){this._seriesScope=Qb(t),this._lineData=null,this.group.removeAll()},e.prototype.incrementalUpdate=function(t,a){this._progressiveEls=[];function r(s){!s.isGroup&&!Wz(s)&&(s.incremental=!0,s.ensureState("emphasis").hoverLayer=!0)}for(var n=t.start;n<t.end;n++){var i=a.getItemLayout(n);if(Vp(i)){var o=new this._LineCtor(a,n,this._seriesScope);o.traverse(r),this.group.add(o),a.setItemGraphicEl(n,o),this._progressiveEls.push(o)}}},e.prototype.remove=function(){this.group.removeAll()},e.prototype.eachRendered=function(t){ol(this._progressiveEls||this.group,t)},e.prototype._doAdd=function(t,a,r){var n=t.getItemLayout(a);if(Vp(n)){var i=new this._LineCtor(t,a,r);t.setItemGraphicEl(a,i),this.group.add(i)}},e.prototype._doUpdate=function(t,a,r,n,i){var o=t.getItemGraphicEl(r);if(!Vp(a.getItemLayout(n))){this.group.remove(o);return}o?o.updateData(a,n,i):o=new this._LineCtor(a,n,i),a.setItemGraphicEl(n,o),this.group.add(o)},e}();function Wz(e){return e.animators&&e.animators.length>0}function Qb(e){var t=e.hostModel,a=t.getModel("emphasis");return{lineStyle:t.getModel("lineStyle").getLineStyle(),emphasisLineStyle:a.getModel(["lineStyle"]).getLineStyle(),blurLineStyle:t.getModel(["blur","lineStyle"]).getLineStyle(),selectLineStyle:t.getModel(["select","lineStyle"]).getLineStyle(),emphasisDisabled:a.get("disabled"),blurScope:a.get("blurScope"),focus:a.get("focus"),labelStatesModels:Aa(t)}}function tx(e){return isNaN(e[0])||isNaN(e[1])}function Vp(e){return e&&!tx(e[0])&&!tx(e[1])}var Gp=[],Hp=[],Wp=[],Yo=fT,qp=_5,ex=Math.abs;function ax(e,t,a){for(var r=e[0],n=e[1],i=e[2],o=1/0,s,l=a*a,c=.1,u=.1;u<=.9;u+=.1){Gp[0]=Yo(r[0],n[0],i[0],u),Gp[1]=Yo(r[1],n[1],i[1],u);var h=ex(qp(Gp,t)-l);h<o&&(o=h,s=u)}for(var d=0;d<32;d++){var f=s+c;Hp[0]=Yo(r[0],n[0],i[0],s),Hp[1]=Yo(r[1],n[1],i[1],s),Wp[0]=Yo(r[0],n[0],i[0],f),Wp[1]=Yo(r[1],n[1],i[1],f);var h=qp(Hp,t)-l;if(ex(h)<.01)break;var p=qp(Wp,t)-l;c/=2,h<0?p>=0?s=s+c:s=s-c:p>=0?s=s-c:s=s+c}return s}function Up(e,t){var a=[],r=y5,n=[[],[],[]],i=[[],[]],o=[];t/=2,e.eachEdge(function(s,l){var c=s.getLayout(),u=s.getVisual("fromSymbol"),h=s.getVisual("toSymbol");c.__original||(c.__original=[ki(c[0]),ki(c[1])],c[2]&&c.__original.push(ki(c[2])));var d=c.__original;if(c[2]!=null){if(Qa(n[0],d[0]),Qa(n[1],d[2]),Qa(n[2],d[1]),u&&u!=="none"){var f=Jl(s.node1),p=ax(n,d[0],f*t);r(n[0][0],n[1][0],n[2][0],p,a),n[0][0]=a[3],n[1][0]=a[4],r(n[0][1],n[1][1],n[2][1],p,a),n[0][1]=a[3],n[1][1]=a[4]}if(h&&h!=="none"){var f=Jl(s.node2),p=ax(n,d[1],f*t);r(n[0][0],n[1][0],n[2][0],p,a),n[1][0]=a[1],n[2][0]=a[2],r(n[0][1],n[1][1],n[2][1],p,a),n[1][1]=a[1],n[2][1]=a[2]}Qa(c[0],n[0]),Qa(c[1],n[2]),Qa(c[2],n[1])}else{if(Qa(i[0],d[0]),Qa(i[1],d[1]),fs(o,i[1],i[0]),lu(o,o),u&&u!=="none"){var f=Jl(s.node1);cv(i[0],i[0],o,f*t)}if(h&&h!=="none"){var f=Jl(s.node2);cv(i[1],i[1],o,-f*t)}Qa(c[0],i[0]),Qa(c[1],i[1])}})}function rx(e){return e.type==="view"}var qz=function(e){gt(t,e);function t(){var a=e!==null&&e.apply(this,arguments)||this;return a.type=t.type,a}return t.prototype.init=function(a,r){var n=new hu,i=new Fy,o=this.group;this._controller=new vu(r.getZr()),this._controllerHost={target:o},o.add(n.group),o.add(i.group),this._symbolDraw=n,this._lineDraw=i,this._firstRender=!0},t.prototype.render=function(a,r,n){var i=this,o=a.coordinateSystem;this._model=a;var s=this._symbolDraw,l=this._lineDraw,c=this.group;if(rx(o)){var u={x:o.x,y:o.y,scaleX:o.scaleX,scaleY:o.scaleY};this._firstRender?c.attr(u):ze(c,u,a)}Up(a.getGraph(),Kl(a));var h=a.getData();s.updateData(h);var d=a.getEdgeData();l.updateData(d),this._updateNodeAndLinkScale(),this._updateController(a,r,n),clearTimeout(this._layoutTimeout);var f=a.forceLayout,p=a.get(["force","layoutAnimation"]);f&&this._startForceLayoutIteration(f,p);var g=a.get("layout");h.graph.eachNode(function(b){var w=b.dataIndex,T=b.getGraphicEl(),C=b.getModel();if(T){T.off("drag").off("dragend");var A=C.get("draggable");A&&T.on("drag",function(L){switch(g){case"force":f.warmUp(),!i._layouting&&i._startForceLayoutIteration(f,p),f.setFixed(w),h.setItemLayout(w,[T.x,T.y]);break;case"circular":h.setItemLayout(w,[T.x,T.y]),b.setLayout({fixed:!0},!0),Ny(a,"symbolSize",b,[L.offsetX,L.offsetY]),i.updateLayout(a);break;case"none":default:h.setItemLayout(w,[T.x,T.y]),Oy(a.getGraph(),a),i.updateLayout(a);break}}).on("dragend",function(){f&&f.setUnfixed(w)}),T.setDraggable(A,!!C.get("cursor"));var k=C.get(["emphasis","focus"]);k==="adjacency"&&(Ae(T).focus=b.getAdjacentDataIndices())}}),h.graph.eachEdge(function(b){var w=b.getGraphicEl(),T=b.getModel().get(["emphasis","focus"]);w&&T==="adjacency"&&(Ae(w).focus={edge:[b.dataIndex],node:[b.node1.dataIndex,b.node2.dataIndex]})});var v=a.get("layout")==="circular"&&a.get(["circular","rotateLabel"]),_=h.getLayout("cx"),y=h.getLayout("cy");h.graph.eachNode(function(b){GA(b,v,_,y)}),this._firstRender=!1},t.prototype.dispose=function(){this.remove(),this._controller&&this._controller.dispose(),this._controllerHost=null},t.prototype._startForceLayoutIteration=function(a,r){var n=this;(function i(){a.step(function(o){n.updateLayout(n._model),(n._layouting=!o)&&(r?n._layoutTimeout=setTimeout(i,16):i())})})()},t.prototype._updateController=function(a,r,n){var i=this,o=this._controller,s=this._controllerHost,l=this.group;if(o.setPointerChecker(function(c,u,h){var d=l.getBoundingRect();return d.applyTransform(l.transform),d.contain(u,h)&&!Sf(c,n,a)}),!rx(a.coordinateSystem)){o.disable();return}o.enable(a.get("roam")),s.zoomLimit=a.get("scaleLimit"),s.zoom=a.coordinateSystem.getZoom(),o.off("pan").off("zoom").on("pan",function(c){ky(s,c.dx,c.dy),n.dispatchAction({seriesId:a.id,type:"graphRoam",dx:c.dx,dy:c.dy})}).on("zoom",function(c){Dy(s,c.scale,c.originX,c.originY),n.dispatchAction({seriesId:a.id,type:"graphRoam",zoom:c.scale,originX:c.originX,originY:c.originY}),i._updateNodeAndLinkScale(),Up(a.getGraph(),Kl(a)),i._lineDraw.updateLayout(),n.updateLabelLayout()})},t.prototype._updateNodeAndLinkScale=function(){var a=this._model,r=a.getData(),n=Kl(a);r.eachItemGraphicEl(function(i,o){i&&i.setSymbolScale(n)})},t.prototype.updateLayout=function(a){Up(a.getGraph(),Kl(a)),this._symbolDraw.updateLayout(),this._lineDraw.updateLayout()},t.prototype.remove=function(){clearTimeout(this._layoutTimeout),this._layouting=!1,this._layoutTimeout=null,this._symbolDraw&&this._symbolDraw.remove(),this._lineDraw&&this._lineDraw.remove()},t.type="graph",t}(ra);function Xo(e){return"_EC_"+e}var Uz=function(){function e(t){this.type="graph",this.nodes=[],this.edges=[],this._nodesMap={},this._edgesMap={},this._directed=t||!1}return e.prototype.isDirected=function(){return this._directed},e.prototype.addNode=function(t,a){t=t==null?""+a:""+t;var r=this._nodesMap;if(!r[Xo(t)]){var n=new Ji(t,a);return n.hostGraph=this,this.nodes.push(n),r[Xo(t)]=n,n}},e.prototype.getNodeByIndex=function(t){var a=this.data.getRawIndex(t);return this.nodes[a]},e.prototype.getNodeById=function(t){return this._nodesMap[Xo(t)]},e.prototype.addEdge=function(t,a,r){var n=this._nodesMap,i=this._edgesMap;if(Ea(t)&&(t=this.nodes[t]),Ea(a)&&(a=this.nodes[a]),t instanceof Ji||(t=n[Xo(t)]),a instanceof Ji||(a=n[Xo(a)]),!(!t||!a)){var o=t.id+"-"+a.id,s=new WA(t,a,r);return s.hostGraph=this,this._directed&&(t.outEdges.push(s),a.inEdges.push(s)),t.edges.push(s),t!==a&&a.edges.push(s),this.edges.push(s),i[o]=s,s}},e.prototype.getEdgeByIndex=function(t){var a=this.edgeData.getRawIndex(t);return this.edges[a]},e.prototype.getEdge=function(t,a){t instanceof Ji&&(t=t.id),a instanceof Ji&&(a=a.id);var r=this._edgesMap;return this._directed?r[t+"-"+a]:r[t+"-"+a]||r[a+"-"+t]},e.prototype.eachNode=function(t,a){for(var r=this.nodes,n=r.length,i=0;i<n;i++)r[i].dataIndex>=0&&t.call(a,r[i],i)},e.prototype.eachEdge=function(t,a){for(var r=this.edges,n=r.length,i=0;i<n;i++)r[i].dataIndex>=0&&r[i].node1.dataIndex>=0&&r[i].node2.dataIndex>=0&&t.call(a,r[i],i)},e.prototype.breadthFirstTraverse=function(t,a,r,n){if(a instanceof Ji||(a=this._nodesMap[Xo(a)]),!!a){for(var i=r==="out"?"outEdges":r==="in"?"inEdges":"edges",o=0;o<this.nodes.length;o++)this.nodes[o].__visited=!1;if(!t.call(n,a,null))for(var s=[a];s.length;)for(var l=s.shift(),c=l[i],o=0;o<c.length;o++){var u=c[o],h=u.node1===l?u.node2:u.node1;if(!h.__visited){if(t.call(n,h,l))return;s.push(h),h.__visited=!0}}}},e.prototype.update=function(){for(var t=this.data,a=this.edgeData,r=this.nodes,n=this.edges,i=0,o=r.length;i<o;i++)r[i].dataIndex=-1;for(var i=0,o=t.count();i<o;i++)r[t.getRawIndex(i)].dataIndex=i;a.filterSelf(function(s){var l=n[a.getRawIndex(s)];return l.node1.dataIndex>=0&&l.node2.dataIndex>=0});for(var i=0,o=n.length;i<o;i++)n[i].dataIndex=-1;for(var i=0,o=a.count();i<o;i++)n[a.getRawIndex(i)].dataIndex=i},e.prototype.clone=function(){for(var t=new e(this._directed),a=this.nodes,r=this.edges,n=0;n<a.length;n++)t.addNode(a[n].id,a[n].dataIndex);for(var n=0;n<r.length;n++){var i=r[n];t.addEdge(i.node1.id,i.node2.id,i.dataIndex)}return t},e}(),Ji=function(){function e(t,a){this.inEdges=[],this.outEdges=[],this.edges=[],this.dataIndex=-1,this.id=t??"",this.dataIndex=a??-1}return e.prototype.degree=function(){return this.edges.length},e.prototype.inDegree=function(){return this.inEdges.length},e.prototype.outDegree=function(){return this.outEdges.length},e.prototype.getModel=function(t){if(!(this.dataIndex<0)){var a=this.hostGraph,r=a.data.getItemModel(this.dataIndex);return r.getModel(t)}},e.prototype.getAdjacentDataIndices=function(){for(var t={edge:[],node:[]},a=0;a<this.edges.length;a++){var r=this.edges[a];r.dataIndex<0||(t.edge.push(r.dataIndex),t.node.push(r.node1.dataIndex,r.node2.dataIndex))}return t},e.prototype.getTrajectoryDataIndices=function(){for(var t=ke(),a=ke(),r=0;r<this.edges.length;r++){var n=this.edges[r];if(!(n.dataIndex<0)){t.set(n.dataIndex,!0);for(var i=[n.node1],o=[n.node2],s=0;s<i.length;){var l=i[s];s++,a.set(l.dataIndex,!0);for(var c=0;c<l.inEdges.length;c++)t.set(l.inEdges[c].dataIndex,!0),i.push(l.inEdges[c].node1)}for(s=0;s<o.length;){var u=o[s];s++,a.set(u.dataIndex,!0);for(var c=0;c<u.outEdges.length;c++)t.set(u.outEdges[c].dataIndex,!0),o.push(u.outEdges[c].node2)}}}return{edge:t.keys(),node:a.keys()}},e}(),WA=function(){function e(t,a,r){this.dataIndex=-1,this.node1=t,this.node2=a,this.dataIndex=r??-1}return e.prototype.getModel=function(t){if(!(this.dataIndex<0)){var a=this.hostGraph,r=a.edgeData.getItemModel(this.dataIndex);return r.getModel(t)}},e.prototype.getAdjacentDataIndices=function(){return{edge:[this.dataIndex],node:[this.node1.dataIndex,this.node2.dataIndex]}},e.prototype.getTrajectoryDataIndices=function(){var t=ke(),a=ke();t.set(this.dataIndex,!0);for(var r=[this.node1],n=[this.node2],i=0;i<r.length;){var o=r[i];i++,a.set(o.dataIndex,!0);for(var s=0;s<o.inEdges.length;s++)t.set(o.inEdges[s].dataIndex,!0),r.push(o.inEdges[s].node1)}for(i=0;i<n.length;){var l=n[i];i++,a.set(l.dataIndex,!0);for(var s=0;s<l.outEdges.length;s++)t.set(l.outEdges[s].dataIndex,!0),n.push(l.outEdges[s].node2)}return{edge:t.keys(),node:a.keys()}},e}();function qA(e,t){return{getValue:function(a){var r=this[e][t];return r.getStore().get(r.getDimensionIndex(a||"value"),this.dataIndex)},setVisual:function(a,r){this.dataIndex>=0&&this[e][t].setItemVisual(this.dataIndex,a,r)},getVisual:function(a){return this[e][t].getItemVisual(this.dataIndex,a)},setLayout:function(a,r){this.dataIndex>=0&&this[e][t].setItemLayout(this.dataIndex,a,r)},getLayout:function(){return this[e][t].getItemLayout(this.dataIndex)},getGraphicEl:function(){return this[e][t].getItemGraphicEl(this.dataIndex)},getRawIndex:function(){return this[e][t].getRawIndex(this.dataIndex)}}}$r(Ji,qA("hostGraph","data"));$r(WA,qA("hostGraph","edgeData"));function UA(e,t,a,r,n){for(var i=new Uz(r),o=0;o<e.length;o++)i.addNode(Ma(e[o].id,e[o].name,o),o);for(var s=[],l=[],c=0,o=0;o<t.length;o++){var u=t[o],h=u.source,d=u.target;i.addEdge(h,d,c)&&(l.push(u),s.push(Ma(zn(u.id,null),h+" > "+d)),c++)}var f=a.get("coordinateSystem"),p;if(f==="cartesian2d"||f==="polar")p=ai(e,a);else{var g=pT.get(f),v=g?g.dimensions||[]:[];Xe(v,"value")<0&&v.concat(["value"]);var _=sf(e,{coordDimensions:v,encodeDefine:a.getEncode()}).dimensions;p=new pr(_,a),p.initData(e)}var y=new pr(["value"],a);return y.initData(l,s),n&&n(p,y),kA({mainData:p,struct:i,structAttr:"graph",datas:{node:p,edge:y},datasAttr:{node:"data",edge:"edgeData"}}),i.update(),i}var jz=function(e){gt(t,e);function t(){var a=e!==null&&e.apply(this,arguments)||this;return a.type=t.type,a.hasSymbolVisual=!0,a}return t.prototype.init=function(a){e.prototype.init.apply(this,arguments);var r=this;function n(){return r._categoriesData}this.legendVisualProvider=new gu(n,n),this.fillDataTextStyle(a.edges||a.links),this._updateCategoriesData()},t.prototype.mergeOption=function(a){e.prototype.mergeOption.apply(this,arguments),this.fillDataTextStyle(a.edges||a.links),this._updateCategoriesData()},t.prototype.mergeDefaultAndTheme=function(a){e.prototype.mergeDefaultAndTheme.apply(this,arguments),nu(a,"edgeLabel",["show"])},t.prototype.getInitialData=function(a,r){var n=a.edges||a.links||[],i=a.data||a.nodes||[],o=this;if(i&&n){Rz(this);var s=UA(i,n,this,!0,l);return G(s.edges,function(c){Pz(c.node1,c.node2,this,c.dataIndex)},this),s.data}function l(c,u){c.wrapMethod("getItemModel",function(p){var g=o._categoriesModels,v=p.getShallow("category"),_=g[v];return _&&(_.parentModel=p.parentModel,p.parentModel=_),p});var h=_a.prototype.getModel;function d(p,g){var v=h.call(this,p,g);return v.resolveParentPath=f,v}u.wrapMethod("getItemModel",function(p){return p.resolveParentPath=f,p.getModel=d,p});function f(p){if(p&&(p[0]==="label"||p[1]==="label")){var g=p.slice();return p[0]==="label"?g[0]="edgeLabel":p[1]==="label"&&(g[1]="edgeLabel"),g}return p}}},t.prototype.getGraph=function(){return this.getData().graph},t.prototype.getEdgeData=function(){return this.getGraph().edgeData},t.prototype.getCategoriesData=function(){return this._categoriesData},t.prototype.formatTooltip=function(a,r,n){if(n==="edge"){var i=this.getData(),o=this.getDataParams(a,n),s=i.graph.getEdgeByIndex(a),l=i.getName(s.node1.dataIndex),c=i.getName(s.node2.dataIndex),u=[];return l!=null&&u.push(l),c!=null&&u.push(c),Za("nameValue",{name:u.join(" > "),value:o.value,noValue:o.value==null})}var h=b5({series:this,dataIndex:a,multipleSeries:r});return h},t.prototype._updateCategoriesData=function(){var a=Ot(this.option.categories||[],function(n){return n.value!=null?n:Vt({value:0},n)}),r=new pr(["value"],this);r.initData(a),this._categoriesData=r,this._categoriesModels=r.mapArray(function(n){return r.getItemModel(n)})},t.prototype.setZoom=function(a){this.option.zoom=a},t.prototype.setCenter=function(a){this.option.center=a},t.prototype.isAnimationEnabled=function(){return e.prototype.isAnimationEnabled.call(this)&&!(this.get("layout")==="force"&&this.get(["force","layoutAnimation"]))},t.type="series.graph",t.dependencies=["grid","polar","geo","singleAxis","calendar"],t.defaultOption={z:2,coordinateSystem:"view",legendHoverLink:!0,layout:null,circular:{rotateLabel:!1},force:{initLayout:null,repulsion:[0,50],gravity:.1,friction:.6,edgeLength:30,layoutAnimation:!0},left:"center",top:"center",symbol:"circle",symbolSize:10,edgeSymbol:["none","none"],edgeSymbolSize:10,edgeLabel:{position:"middle",distance:5},draggable:!1,roam:!1,center:null,zoom:1,nodeScaleRatio:.6,label:{show:!1,formatter:"{b}"},itemStyle:{},lineStyle:{color:"#aaa",width:1,opacity:.5},emphasis:{scale:!0,label:{show:!0}},select:{itemStyle:{borderColor:"#212121"}}},t}(ha),Yz={type:"graphRoam",event:"graphRoam",update:"none"};function Xz(e){e.registerChartView(qz),e.registerSeriesModel(jz),e.registerProcessor(Dz),e.registerVisual(Lz),e.registerVisual(Iz),e.registerLayout(Bz),e.registerLayout(e.PRIORITY.VISUAL.POST_CHART_LAYOUT,Nz),e.registerLayout(Fz),e.registerCoordinateSystem("graphView",{dimensions:mu.dimensions,create:Vz}),e.registerAction({type:"focusNodeAdjacency",event:"focusNodeAdjacency",update:"series:focusNodeAdjacency"},xn),e.registerAction({type:"unfocusNodeAdjacency",event:"unfocusNodeAdjacency",update:"series:unfocusNodeAdjacency"},xn),e.registerAction(Yz,function(t,a,r){a.eachComponent({mainType:"series",query:t},function(n){var i=n.coordinateSystem,o=Iy(i,t,void 0,r);n.setCenter&&n.setCenter(o.center),n.setZoom&&n.setZoom(o.zoom)})})}var Zz=function(){function e(){this.angle=0,this.width=10,this.r=10,this.x=0,this.y=0}return e}(),Kz=function(e){gt(t,e);function t(a){var r=e.call(this,a)||this;return r.type="pointer",r}return t.prototype.getDefaultShape=function(){return new Zz},t.prototype.buildPath=function(a,r){var n=Math.cos,i=Math.sin,o=r.r,s=r.width,l=r.angle,c=r.x-n(l)*s*(s>=o/3?1:2),u=r.y-i(l)*s*(s>=o/3?1:2);l=r.angle-Math.PI/2,a.moveTo(c,u),a.lineTo(r.x+n(l)*s,r.y+i(l)*s),a.lineTo(r.x+n(r.angle)*o,r.y+i(r.angle)*o),a.lineTo(r.x-n(l)*s,r.y-i(l)*s),a.lineTo(c,u)},t}(va);function Jz(e,t){var a=e.get("center"),r=t.getWidth(),n=t.getHeight(),i=Math.min(r,n),o=Ft(a[0],t.getWidth()),s=Ft(a[1],t.getHeight()),l=Ft(e.get("radius"),i/2);return{cx:o,cy:s,r:l}}function Wu(e,t){var a=e==null?"":e+"";return t&&(ge(t)?a=t.replace("{value}",a):Me(t)&&(a=t(e))),a}var Qz=function(e){gt(t,e);function t(){var a=e!==null&&e.apply(this,arguments)||this;return a.type=t.type,a}return t.prototype.render=function(a,r,n){this.group.removeAll();var i=a.get(["axisLine","lineStyle","color"]),o=Jz(a,n);this._renderMain(a,r,n,i,o),this._data=a.getData()},t.prototype.dispose=function(){},t.prototype._renderMain=function(a,r,n,i,o){var s=this.group,l=a.get("clockwise"),c=-a.get("startAngle")/180*Math.PI,u=-a.get("endAngle")/180*Math.PI,h=a.getModel("axisLine"),d=h.get("roundCap"),f=d?ed:Pr,p=h.get("show"),g=h.getModel("lineStyle"),v=g.get("width"),_=[c,u];KC(_,!l),c=_[0],u=_[1];for(var y=u-c,b=c,w=[],T=0;p&&T<i.length;T++){var C=Math.min(Math.max(i[T][0],0),1);u=c+y*C;var A=new f({shape:{startAngle:b,endAngle:u,cx:o.cx,cy:o.cy,clockwise:l,r0:o.r-v,r:o.r},silent:!0});A.setStyle({fill:i[T][1]}),A.setStyle(g.getLineStyle(["color","width"])),w.push(A),b=u}w.reverse(),G(w,function(L){return s.add(L)});var k=function(L){if(L<=0)return i[0][1];var M;for(M=0;M<i.length;M++)if(i[M][0]>=L&&(M===0?0:i[M-1][0])<L)return i[M][1];return i[M-1][1]};this._renderTicks(a,r,n,k,o,c,u,l,v),this._renderTitleAndDetail(a,r,n,k,o),this._renderAnchor(a,o),this._renderPointer(a,r,n,k,o,c,u,l,v)},t.prototype._renderTicks=function(a,r,n,i,o,s,l,c,u){for(var h=this.group,d=o.cx,f=o.cy,p=o.r,g=+a.get("min"),v=+a.get("max"),_=a.getModel("splitLine"),y=a.getModel("axisTick"),b=a.getModel("axisLabel"),w=a.get("splitNumber"),T=y.get("splitNumber"),C=Ft(_.get("length"),p),A=Ft(y.get("length"),p),k=s,L=(l-s)/w,M=L/T,P=_.getModel("lineStyle").getLineStyle(),E=y.getModel("lineStyle").getLineStyle(),D=_.get("distance"),O,B,R=0;R<=w;R++){if(O=Math.cos(k),B=Math.sin(k),_.get("show")){var V=D?D+u:u,z=new tr({shape:{x1:O*(p-V)+d,y1:B*(p-V)+f,x2:O*(p-C-V)+d,y2:B*(p-C-V)+f},style:P,silent:!0});P.stroke==="auto"&&z.setStyle({stroke:i(R/w)}),h.add(z)}if(b.get("show")){var V=b.get("distance")+D,W=Wu(_n(R/w*(v-g)+g),b.get("formatter")),it=i(R/w),ot=O*(p-C-V)+d,xt=B*(p-C-V)+f,j=b.get("rotate"),mt=0;j==="radial"?(mt=-k+2*Math.PI,mt>Math.PI/2&&(mt+=Math.PI)):j==="tangential"?mt=-k-Math.PI/2:Ea(j)&&(mt=j*Math.PI/180),mt===0?h.add(new Oe({style:Ke(b,{text:W,x:ot,y:xt,verticalAlign:B<-.8?"top":B>.8?"bottom":"middle",align:O<-.4?"left":O>.4?"right":"center"},{inheritColor:it}),silent:!0})):h.add(new Oe({style:Ke(b,{text:W,x:ot,y:xt,verticalAlign:"middle",align:"center"},{inheritColor:it}),silent:!0,originX:ot,originY:xt,rotation:mt}))}if(y.get("show")&&R!==w){var V=y.get("distance");V=V?V+u:u;for(var Tt=0;Tt<=T;Tt++){O=Math.cos(k),B=Math.sin(k);var Mt=new tr({shape:{x1:O*(p-V)+d,y1:B*(p-V)+f,x2:O*(p-A-V)+d,y2:B*(p-A-V)+f},silent:!0,style:E});E.stroke==="auto"&&Mt.setStyle({stroke:i((R+Tt/T)/w)}),h.add(Mt),k+=M}k-=M}else k+=L}},t.prototype._renderPointer=function(a,r,n,i,o,s,l,c,u){var h=this.group,d=this._data,f=this._progressEls,p=[],g=a.get(["pointer","show"]),v=a.getModel("progress"),_=v.get("show"),y=a.getData(),b=y.mapDimension("value"),w=+a.get("min"),T=+a.get("max"),C=[w,T],A=[s,l];function k(M,P){var E=y.getItemModel(M),D=E.getModel("pointer"),O=Ft(D.get("width"),o.r),B=Ft(D.get("length"),o.r),R=a.get(["pointer","icon"]),V=D.get("offsetCenter"),z=Ft(V[0],o.r),W=Ft(V[1],o.r),it=D.get("keepAspect"),ot;return R?ot=ba(R,z-O/2,W-B,O,B,null,it):ot=new Kz({shape:{angle:-Math.PI/2,width:O,r:B,x:z,y:W}}),ot.rotation=-(P+Math.PI/2),ot.x=o.cx,ot.y=o.cy,ot}function L(M,P){var E=v.get("roundCap"),D=E?ed:Pr,O=v.get("overlap"),B=O?v.get("width"):u/y.count(),R=O?o.r-B:o.r-(M+1)*B,V=O?o.r:o.r-M*B,z=new D({shape:{startAngle:s,endAngle:P,cx:o.cx,cy:o.cy,clockwise:c,r0:R,r:V}});return O&&(z.z2=Ve(y.get(b,M),[w,T],[100,0],!0)),z}(_||g)&&(y.diff(d).add(function(M){var P=y.get(b,M);if(g){var E=k(M,s);la(E,{rotation:-((isNaN(+P)?A[0]:Ve(P,C,A,!0))+Math.PI/2)},a),h.add(E),y.setItemGraphicEl(M,E)}if(_){var D=L(M,s),O=v.get("clip");la(D,{shape:{endAngle:Ve(P,C,A,O)}},a),h.add(D),n1(a.seriesIndex,y.dataType,M,D),p[M]=D}}).update(function(M,P){var E=y.get(b,M);if(g){var D=d.getItemGraphicEl(P),O=D?D.rotation:s,B=k(M,O);B.rotation=O,ze(B,{rotation:-((isNaN(+E)?A[0]:Ve(E,C,A,!0))+Math.PI/2)},a),h.add(B),y.setItemGraphicEl(M,B)}if(_){var R=f[P],V=R?R.shape.endAngle:s,z=L(M,V),W=v.get("clip");ze(z,{shape:{endAngle:Ve(E,C,A,W)}},a),h.add(z),n1(a.seriesIndex,y.dataType,M,z),p[M]=z}}).execute(),y.each(function(M){var P=y.getItemModel(M),E=P.getModel("emphasis"),D=E.get("focus"),O=E.get("blurScope"),B=E.get("disabled");if(g){var R=y.getItemGraphicEl(M),V=y.getItemVisual(M,"style"),z=V.fill;if(R instanceof Zr){var W=R.style;R.useStyle(Vt({image:W.image,x:W.x,y:W.y,width:W.width,height:W.height},V))}else R.useStyle(V),R.type!=="pointer"&&R.setColor(z);R.setStyle(P.getModel(["pointer","itemStyle"]).getItemStyle()),R.style.fill==="auto"&&R.setStyle("fill",i(Ve(y.get(b,M),C,[0,1],!0))),R.z2EmphasisLift=0,za(R,P),Qe(R,D,O,B)}if(_){var it=p[M];it.useStyle(y.getItemVisual(M,"style")),it.setStyle(P.getModel(["progress","itemStyle"]).getItemStyle()),it.z2EmphasisLift=0,za(it,P),Qe(it,D,O,B)}}),this._progressEls=p)},t.prototype._renderAnchor=function(a,r){var n=a.getModel("anchor"),i=n.get("show");if(i){var o=n.get("size"),s=n.get("icon"),l=n.get("offsetCenter"),c=n.get("keepAspect"),u=ba(s,r.cx-o/2+Ft(l[0],r.r),r.cy-o/2+Ft(l[1],r.r),o,o,null,c);u.z2=n.get("showAbove")?1:0,u.setStyle(n.getModel("itemStyle").getItemStyle()),this.group.add(u)}},t.prototype._renderTitleAndDetail=function(a,r,n,i,o){var s=this,l=a.getData(),c=l.mapDimension("value"),u=+a.get("min"),h=+a.get("max"),d=new ie,f=[],p=[],g=a.isAnimationEnabled(),v=a.get(["pointer","showAbove"]);l.diff(this._data).add(function(_){f[_]=new Oe({silent:!0}),p[_]=new Oe({silent:!0})}).update(function(_,y){f[_]=s._titleEls[y],p[_]=s._detailEls[y]}).execute(),l.each(function(_){var y=l.getItemModel(_),b=l.get(c,_),w=new ie,T=i(Ve(b,[u,h],[0,1],!0)),C=y.getModel("title");if(C.get("show")){var A=C.get("offsetCenter"),k=o.cx+Ft(A[0],o.r),L=o.cy+Ft(A[1],o.r),M=f[_];M.attr({z2:v?0:2,style:Ke(C,{x:k,y:L,text:l.getName(_),align:"center",verticalAlign:"middle"},{inheritColor:T})}),w.add(M)}var P=y.getModel("detail");if(P.get("show")){var E=P.get("offsetCenter"),D=o.cx+Ft(E[0],o.r),O=o.cy+Ft(E[1],o.r),B=Ft(P.get("width"),o.r),R=Ft(P.get("height"),o.r),V=a.get(["progress","show"])?l.getItemVisual(_,"style").fill:T,M=p[_],z=P.get("formatter");M.attr({z2:v?0:2,style:Ke(P,{x:D,y:O,text:Wu(b,z),width:isNaN(B)?null:B,height:isNaN(R)?null:R,align:"center",verticalAlign:"middle"},{inheritColor:V})}),YC(M,{normal:P},b,function(it){return Wu(it,z)}),g&&x5(M,_,l,a,{getFormattedLabel:function(it,ot,xt,j,mt,Tt){return Wu(Tt?Tt.interpolatedValue:b,z)}}),w.add(M)}d.add(w)}),this.group.add(d),this._titleEls=f,this._detailEls=p},t.type="gauge",t}(ra),tV=function(e){gt(t,e);function t(){var a=e!==null&&e.apply(this,arguments)||this;return a.type=t.type,a.visualStyleAccessPath="itemStyle",a}return t.prototype.getInitialData=function(a,r){return dl(this,["value"])},t.type="series.gauge",t.defaultOption={z:2,colorBy:"data",center:["50%","50%"],legendHoverLink:!0,radius:"75%",startAngle:225,endAngle:-45,clockwise:!0,min:0,max:100,splitNumber:10,axisLine:{show:!0,roundCap:!1,lineStyle:{color:[[1,"#E6EBF8"]],width:10}},progress:{show:!1,overlap:!0,width:10,roundCap:!1,clip:!0},splitLine:{show:!0,length:10,distance:10,lineStyle:{color:"#63677A",width:3,type:"solid"}},axisTick:{show:!0,splitNumber:5,length:6,distance:10,lineStyle:{color:"#63677A",width:1,type:"solid"}},axisLabel:{show:!0,distance:15,color:"#464646",fontSize:12,rotate:0},pointer:{icon:null,offsetCenter:[0,0],show:!0,showAbove:!0,length:"60%",width:6,keepAspect:!1},anchor:{show:!1,showAbove:!1,size:6,icon:"circle",offsetCenter:[0,0],keepAspect:!1,itemStyle:{color:"#fff",borderWidth:0,borderColor:"#5470c6"}},title:{show:!0,offsetCenter:[0,"20%"],color:"#464646",fontSize:16,valueAnimation:!1},detail:{show:!0,backgroundColor:"rgba(0,0,0,0)",borderWidth:0,borderColor:"#ccc",width:100,height:null,padding:[5,10],offsetCenter:[0,"40%"],color:"#464646",fontSize:30,fontWeight:"bold",lineHeight:30,valueAnimation:!1}},t}(ha);function eV(e){e.registerChartView(Qz),e.registerSeriesModel(tV)}var aV=["itemStyle","opacity"],rV=function(e){gt(t,e);function t(a,r){var n=e.call(this)||this,i=n,o=new Kr,s=new Oe;return i.setTextContent(s),n.setTextGuideLine(o),n.updateData(a,r,!0),n}return t.prototype.updateData=function(a,r,n){var i=this,o=a.hostModel,s=a.getItemModel(r),l=a.getItemLayout(r),c=s.getModel("emphasis"),u=s.get(aV);u=u??1,n||Yr(i),i.useStyle(a.getItemVisual(r,"style")),i.style.lineJoin="round",n?(i.setShape({points:l.points}),i.style.opacity=0,la(i,{style:{opacity:u}},o,r)):ze(i,{style:{opacity:u},shape:{points:l.points}},o,r),za(i,s),this._updateLabel(a,r),Qe(this,c.get("focus"),c.get("blurScope"),c.get("disabled"))},t.prototype._updateLabel=function(a,r){var n=this,i=this.getTextGuideLine(),o=n.getTextContent(),s=a.hostModel,l=a.getItemModel(r),c=a.getItemLayout(r),u=c.label,h=a.getItemVisual(r,"style"),d=h.fill;Fa(o,Aa(l),{labelFetcher:a.hostModel,labelDataIndex:r,defaultOpacity:h.opacity,defaultText:a.getName(r)},{normal:{align:u.textAlign,verticalAlign:u.verticalAlign}}),n.setTextConfig({local:!0,inside:!!u.inside,insideStroke:d,outsideFill:d});var f=u.linePoints;i.setShape({points:f}),n.textGuideLineConfig={anchor:f?new Hr(f[0][0],f[0][1]):null},ze(o,{style:{x:u.x,y:u.y}},s,r),o.attr({rotation:u.rotation,originX:u.x,originY:u.y,z2:10}),JC(n,QC(l),{stroke:d})},t}(Br),nV=function(e){gt(t,e);function t(){var a=e!==null&&e.apply(this,arguments)||this;return a.type=t.type,a.ignoreLabelLineUpdate=!0,a}return t.prototype.render=function(a,r,n){var i=a.getData(),o=this._data,s=this.group;i.diff(o).add(function(l){var c=new rV(i,l);i.setItemGraphicEl(l,c),s.add(c)}).update(function(l,c){var u=o.getItemGraphicEl(c);u.updateData(i,l),s.add(u),i.setItemGraphicEl(l,u)}).remove(function(l){var c=o.getItemGraphicEl(l);jh(c,a,l)}).execute(),this._data=i},t.prototype.remove=function(){this.group.removeAll(),this._data=null},t.prototype.dispose=function(){},t.type="funnel",t}(ra),iV=function(e){gt(t,e);function t(){var a=e!==null&&e.apply(this,arguments)||this;return a.type=t.type,a}return t.prototype.init=function(a){e.prototype.init.apply(this,arguments),this.legendVisualProvider=new gu(Ut(this.getData,this),Ut(this.getRawData,this)),this._defaultLabelLine(a)},t.prototype.getInitialData=function(a,r){return dl(this,{coordDimensions:["value"],encodeDefaulter:pe(uy,this)})},t.prototype._defaultLabelLine=function(a){nu(a,"labelLine",["show"]);var r=a.labelLine,n=a.emphasis.labelLine;r.show=r.show&&a.label.show,n.show=n.show&&a.emphasis.label.show},t.prototype.getDataParams=function(a){var r=this.getData(),n=e.prototype.getDataParams.call(this,a),i=r.mapDimension("value"),o=r.getSum(i);return n.percent=o?+(r.get(i,a)/o*100).toFixed(2):0,n.$vars.push("percent"),n},t.type="series.funnel",t.defaultOption={z:2,legendHoverLink:!0,colorBy:"data",left:80,top:60,right:80,bottom:60,minSize:"0%",maxSize:"100%",sort:"descending",orient:"vertical",gap:0,funnelAlign:"center",label:{show:!0,position:"outer"},labelLine:{show:!0,length:20,lineStyle:{width:1}},itemStyle:{borderColor:"#fff",borderWidth:1},emphasis:{label:{show:!0}},select:{itemStyle:{borderColor:"#212121"}}},t}(ha);function oV(e,t){return ka(e.getBoxLayoutParams(),{width:t.getWidth(),height:t.getHeight()})}function sV(e,t){for(var a=e.mapDimension("value"),r=e.mapArray(a,function(l){return l}),n=[],i=t==="ascending",o=0,s=e.count();o<s;o++)n[o]=o;return Me(t)?n.sort(t):t!=="none"&&n.sort(function(l,c){return i?r[l]-r[c]:r[c]-r[l]}),n}function lV(e){var t=e.hostModel,a=t.get("orient");e.each(function(r){var n=e.getItemModel(r),i=n.getModel("label"),o=i.get("position"),s=n.getModel("labelLine"),l=e.getItemLayout(r),c=l.points,u=o==="inner"||o==="inside"||o==="center"||o==="insideLeft"||o==="insideRight",h,d,f,p;if(u)o==="insideLeft"?(d=(c[0][0]+c[3][0])/2+5,f=(c[0][1]+c[3][1])/2,h="left"):o==="insideRight"?(d=(c[1][0]+c[2][0])/2-5,f=(c[1][1]+c[2][1])/2,h="right"):(d=(c[0][0]+c[1][0]+c[2][0]+c[3][0])/4,f=(c[0][1]+c[1][1]+c[2][1]+c[3][1])/4,h="center"),p=[[d,f],[d,f]];else{var g=void 0,v=void 0,_=void 0,y=void 0,b=s.get("length");o==="left"?(g=(c[3][0]+c[0][0])/2,v=(c[3][1]+c[0][1])/2,_=g-b,d=_-5,h="right"):o==="right"?(g=(c[1][0]+c[2][0])/2,v=(c[1][1]+c[2][1])/2,_=g+b,d=_+5,h="left"):o==="top"?(g=(c[3][0]+c[0][0])/2,v=(c[3][1]+c[0][1])/2,y=v-b,f=y-5,h="center"):o==="bottom"?(g=(c[1][0]+c[2][0])/2,v=(c[1][1]+c[2][1])/2,y=v+b,f=y+5,h="center"):o==="rightTop"?(g=a==="horizontal"?c[3][0]:c[1][0],v=a==="horizontal"?c[3][1]:c[1][1],a==="horizontal"?(y=v-b,f=y-5,h="center"):(_=g+b,d=_+5,h="top")):o==="rightBottom"?(g=c[2][0],v=c[2][1],a==="horizontal"?(y=v+b,f=y+5,h="center"):(_=g+b,d=_+5,h="bottom")):o==="leftTop"?(g=c[0][0],v=a==="horizontal"?c[0][1]:c[1][1],a==="horizontal"?(y=v-b,f=y-5,h="center"):(_=g-b,d=_-5,h="right")):o==="leftBottom"?(g=a==="horizontal"?c[1][0]:c[3][0],v=a==="horizontal"?c[1][1]:c[2][1],a==="horizontal"?(y=v+b,f=y+5,h="center"):(_=g-b,d=_-5,h="right")):(g=(c[1][0]+c[2][0])/2,v=(c[1][1]+c[2][1])/2,a==="horizontal"?(y=v+b,f=y+5,h="center"):(_=g+b,d=_+5,h="left")),a==="horizontal"?(_=g,d=_):(y=v,f=y),p=[[g,v],[_,y]]}l.label={linePoints:p,x:d,y:f,verticalAlign:"middle",textAlign:h,inside:u}})}function cV(e,t){e.eachSeriesByType("funnel",function(a){var r=a.getData(),n=r.mapDimension("value"),i=a.get("sort"),o=oV(a,t),s=a.get("orient"),l=o.width,c=o.height,u=sV(r,i),h=o.x,d=o.y,f=s==="horizontal"?[Ft(a.get("minSize"),c),Ft(a.get("maxSize"),c)]:[Ft(a.get("minSize"),l),Ft(a.get("maxSize"),l)],p=r.getDataExtent(n),g=a.get("min"),v=a.get("max");g==null&&(g=Math.min(p[0],0)),v==null&&(v=p[1]);var _=a.get("funnelAlign"),y=a.get("gap"),b=s==="horizontal"?l:c,w=(b-y*(r.count()-1))/r.count(),T=function(O,B){if(s==="horizontal"){var R=r.get(n,O)||0,V=Ve(R,[g,v],f,!0),z=void 0;switch(_){case"top":z=d;break;case"center":z=d+(c-V)/2;break;case"bottom":z=d+(c-V);break}return[[B,z],[B,z+V]]}var W=r.get(n,O)||0,it=Ve(W,[g,v],f,!0),ot;switch(_){case"left":ot=h;break;case"center":ot=h+(l-it)/2;break;case"right":ot=h+l-it;break}return[[ot,B],[ot+it,B]]};i==="ascending"&&(w=-w,y=-y,s==="horizontal"?h+=l:d+=c,u=u.reverse());for(var C=0;C<u.length;C++){var A=u[C],k=u[C+1],L=r.getItemModel(A);if(s==="horizontal"){var M=L.get(["itemStyle","width"]);M==null?M=w:(M=Ft(M,l),i==="ascending"&&(M=-M));var P=T(A,h),E=T(k,h+M);h+=M+y,r.setItemLayout(A,{points:P.concat(E.slice().reverse())})}else{var D=L.get(["itemStyle","height"]);D==null?D=w:(D=Ft(D,c),i==="ascending"&&(D=-D));var P=T(A,d),E=T(k,d+D);d+=D+y,r.setItemLayout(A,{points:P.concat(E.slice().reverse())})}}lV(r)})}function uV(e){e.registerChartView(nV),e.registerSeriesModel(iV),e.registerLayout(cV),e.registerProcessor(pu("funnel"))}var hV=.3,dV=function(e){gt(t,e);function t(){var a=e!==null&&e.apply(this,arguments)||this;return a.type=t.type,a._dataGroup=new ie,a._initialized=!1,a}return t.prototype.init=function(){this.group.add(this._dataGroup)},t.prototype.render=function(a,r,n,i){this._progressiveEls=null;var o=this._dataGroup,s=a.getData(),l=this._data,c=a.coordinateSystem,u=c.dimensions,h=ix(a);s.diff(l).add(d).update(f).remove(p).execute();function d(v){var _=nx(s,o,v,u,c);jp(_,s,v,h)}function f(v,_){var y=l.getItemGraphicEl(_),b=jA(s,v,u,c);s.setItemGraphicEl(v,y),ze(y,{shape:{points:b}},a,v),Yr(y),jp(y,s,v,h)}function p(v){var _=l.getItemGraphicEl(v);o.remove(_)}if(!this._initialized){this._initialized=!0;var g=fV(c,a,function(){setTimeout(function(){o.removeClipPath()})});o.setClipPath(g)}this._data=s},t.prototype.incrementalPrepareRender=function(a,r,n){this._initialized=!0,this._data=null,this._dataGroup.removeAll()},t.prototype.incrementalRender=function(a,r,n){for(var i=r.getData(),o=r.coordinateSystem,s=o.dimensions,l=ix(r),c=this._progressiveEls=[],u=a.start;u<a.end;u++){var h=nx(i,this._dataGroup,u,s,o);h.incremental=!0,jp(h,i,u,l),c.push(h)}},t.prototype.remove=function(){this._dataGroup&&this._dataGroup.removeAll(),this._data=null},t.type="parallel",t}(ra);function fV(e,t,a){var r=e.model,n=e.getRect(),i=new Ge({shape:{x:n.x,y:n.y,width:n.width,height:n.height}}),o=r.get("layout")==="horizontal"?"width":"height";return i.setShape(o,0),la(i,{shape:{width:n.width,height:n.height}},t,a),i}function jA(e,t,a,r){for(var n=[],i=0;i<a.length;i++){var o=a[i],s=e.get(e.mapDimension(o),t);pV(s,r.getAxis(o).type)||n.push(r.dataToPoint(s,o))}return n}function nx(e,t,a,r,n){var i=jA(e,a,r,n),o=new Kr({shape:{points:i},z2:10});return t.add(o),e.setItemGraphicEl(a,o),o}function ix(e){var t=e.get("smooth",!0);return t===!0&&(t=hV),t=S5(t),w5(t)&&(t=0),{smooth:t}}function jp(e,t,a,r){e.useStyle(t.getItemVisual(a,"style")),e.style.fill=null,e.setShape("smooth",r.smooth);var n=t.getItemModel(a),i=n.getModel("emphasis");za(e,n,"lineStyle"),Qe(e,i.get("focus"),i.get("blurScope"),i.get("disabled"))}function pV(e,t){return t==="category"?e==null:e==null||isNaN(e)}var gV=function(e){gt(t,e);function t(){var a=e!==null&&e.apply(this,arguments)||this;return a.type=t.type,a.visualStyleAccessPath="lineStyle",a.visualDrawType="stroke",a}return t.prototype.getInitialData=function(a,r){return ai(null,this,{useEncodeDefaulter:Ut(vV,null,this)})},t.prototype.getRawIndicesByActiveState=function(a){var r=this.coordinateSystem,n=this.getData(),i=[];return r.eachActiveState(n,function(o,s){a===o&&i.push(n.getRawIndex(s))}),i},t.type="series.parallel",t.dependencies=["parallel"],t.defaultOption={z:2,coordinateSystem:"parallel",parallelIndex:0,label:{show:!1},inactiveOpacity:.05,activeOpacity:1,lineStyle:{width:1,opacity:.45,type:"solid"},emphasis:{label:{show:!1}},progressive:500,smooth:!1,animationEasing:"linear"},t}(ha);function vV(e){var t=e.ecModel.getComponent("parallel",e.get("parallelIndex"));if(t){var a={};return G(t.dimensions,function(r){var n=mV(r);a[r]=n}),a}}function mV(e){return+e.replace("dim","")}var yV=["lineStyle","opacity"],_V={seriesType:"parallel",reset:function(e,t){var a=e.coordinateSystem,r={normal:e.get(["lineStyle","opacity"]),active:e.get("activeOpacity"),inactive:e.get("inactiveOpacity")};return{progress:function(n,i){a.eachActiveState(i,function(o,s){var l=r[o];if(o==="normal"&&i.hasItemOption){var c=i.getItemModel(s).get(yV,!0);c!=null&&(l=c)}var u=i.ensureUniqueItemVisual(s,"style");u.opacity=l},n.start,n.end)}}}};function bV(e){xV(e),SV(e)}function xV(e){if(!e.parallel){var t=!1;G(e.series,function(a){a&&a.type==="parallel"&&(t=!0)}),t&&(e.parallel=[{}])}}function SV(e){var t=nr(e.parallelAxis);G(t,function(a){if(na(a)){var r=a.parallelIndex||0,n=nr(e.parallel)[r];n&&n.parallelAxisDefault&&Be(a,n.parallelAxisDefault,!1)}})}var wV=5,CV=function(e){gt(t,e);function t(){var a=e!==null&&e.apply(this,arguments)||this;return a.type=t.type,a}return t.prototype.render=function(a,r,n){this._model=a,this._api=n,this._handlers||(this._handlers={},G(TV,function(i,o){n.getZr().on(o,this._handlers[o]=Ut(i,this))},this)),ul(this,"_throttledDispatchExpand",a.get("axisExpandRate"),"fixRate")},t.prototype.dispose=function(a,r){Lc(this,"_throttledDispatchExpand"),G(this._handlers,function(n,i){r.getZr().off(i,n)}),this._handlers=null},t.prototype._throttledDispatchExpand=function(a){this._dispatchExpand(a)},t.prototype._dispatchExpand=function(a){a&&this._api.dispatchAction(Vt({type:"parallelAxisExpand"},a))},t.type="parallel",t}(ma),TV={mousedown:function(e){Yp(this,"click")&&(this._mouseDownPoint=[e.offsetX,e.offsetY])},mouseup:function(e){var t=this._mouseDownPoint;if(Yp(this,"click")&&t){var a=[e.offsetX,e.offsetY],r=Math.pow(t[0]-a[0],2)+Math.pow(t[1]-a[1],2);if(r>wV)return;var n=this._model.coordinateSystem.getSlidedAxisExpandWindow([e.offsetX,e.offsetY]);n.behavior!=="none"&&this._dispatchExpand({axisExpandWindow:n.axisExpandWindow})}this._mouseDownPoint=null},mousemove:function(e){if(!(this._mouseDownPoint||!Yp(this,"mousemove"))){var t=this._model,a=t.coordinateSystem.getSlidedAxisExpandWindow([e.offsetX,e.offsetY]),r=a.behavior;r==="jump"&&this._throttledDispatchExpand.debounceNextCall(t.get("axisExpandDebounce")),this._throttledDispatchExpand(r==="none"?null:{axisExpandWindow:a.axisExpandWindow,animation:r==="jump"?null:{duration:0}})}}};function Yp(e,t){var a=e._model;return a.get("axisExpandable")&&a.get("axisExpandTriggerOn")===t}var AV=function(e){gt(t,e);function t(){var a=e!==null&&e.apply(this,arguments)||this;return a.type=t.type,a}return t.prototype.init=function(){e.prototype.init.apply(this,arguments),this.mergeOption({})},t.prototype.mergeOption=function(a){var r=this.option;a&&Be(r,a,!0),this._initDimensions()},t.prototype.contains=function(a,r){var n=a.get("parallelIndex");return n!=null&&r.getComponent("parallel",n)===this},t.prototype.setAxisExpand=function(a){G(["axisExpandable","axisExpandCenter","axisExpandCount","axisExpandWidth","axisExpandWindow"],function(r){a.hasOwnProperty(r)&&(this.option[r]=a[r])},this)},t.prototype._initDimensions=function(){var a=this.dimensions=[],r=this.parallelAxisIndex=[],n=Va(this.ecModel.queryComponents({mainType:"parallelAxis"}),function(i){return(i.get("parallelIndex")||0)===this.componentIndex},this);G(n,function(i){a.push("dim"+i.get("dim")),r.push(i.componentIndex)})},t.type="parallel",t.dependencies=["parallelAxis"],t.layoutMode="box",t.defaultOption={z:0,left:80,top:60,right:80,bottom:60,layout:"horizontal",axisExpandable:!1,axisExpandCenter:null,axisExpandCount:0,axisExpandWidth:50,axisExpandRate:17,axisExpandDebounce:50,axisExpandSlideTriggerArea:[-.15,.05,.4],axisExpandTriggerOn:"click",parallelAxisDefault:null},t}(da),kV=function(e){gt(t,e);function t(a,r,n,i,o){var s=e.call(this,a,r,n)||this;return s.type=i||"value",s.axisIndex=o,s}return t.prototype.isHorizontal=function(){return this.coordinateSystem.getModel().get("layout")!=="horizontal"},t}(Jr);function Go(e,t,a,r,n,i){e=e||0;var o=a[1]-a[0];if(n!=null&&(n=Zo(n,[0,o])),i!=null&&(i=Math.max(i,n??0)),r==="all"){var s=Math.abs(t[1]-t[0]);s=Zo(s,[0,o]),n=i=Zo(s,[n,i]),r=0}t[0]=Zo(t[0],a),t[1]=Zo(t[1],a);var l=Xp(t,r);t[r]+=e;var c=n||0,u=a.slice();l.sign<0?u[0]+=c:u[1]-=c,t[r]=Zo(t[r],u);var h;return h=Xp(t,r),n!=null&&(h.sign!==l.sign||h.span<n)&&(t[1-r]=t[r]+l.sign*n),h=Xp(t,r),i!=null&&h.span>i&&(t[1-r]=t[r]+h.sign*i),t}function Xp(e,t){var a=e[t]-e[1-t];return{span:Math.abs(a),sign:a>0?-1:a<0?1:t?-1:1}}function Zo(e,t){return Math.min(t[1]!=null?t[1]:1/0,Math.max(t[0]!=null?t[0]:-1/0,e))}var Zp=G,YA=Math.min,XA=Math.max,ox=Math.floor,DV=Math.ceil,sx=_n,LV=Math.PI,IV=function(){function e(t,a,r){this.type="parallel",this._axesMap=ke(),this._axesLayout={},this.dimensions=t.dimensions,this._model=t,this._init(t,a,r)}return e.prototype._init=function(t,a,r){var n=t.dimensions,i=t.parallelAxisIndex;Zp(n,function(o,s){var l=i[s],c=a.getComponent("parallelAxis",l),u=this._axesMap.set(o,new kV(o,uf(c),[0,0],c.get("type"),l)),h=u.type==="category";u.onBand=h&&c.get("boundaryGap"),u.inverse=c.get("inverse"),c.axis=u,u.model=c,u.coordinateSystem=c.coordinateSystem=this},this)},e.prototype.update=function(t,a){this._updateAxesFromSeries(this._model,t)},e.prototype.containPoint=function(t){var a=this._makeLayoutInfo(),r=a.axisBase,n=a.layoutBase,i=a.pixelDimIndex,o=t[1-i],s=t[i];return o>=r&&o<=r+a.axisLength&&s>=n&&s<=n+a.layoutLength},e.prototype.getModel=function(){return this._model},e.prototype._updateAxesFromSeries=function(t,a){a.eachSeries(function(r){if(t.contains(r,a)){var n=r.getData();Zp(this.dimensions,function(i){var o=this._axesMap.get(i);o.scale.unionExtentFromData(n,n.mapDimension(i)),$s(o.scale,o.model)},this)}},this)},e.prototype.resize=function(t,a){this._rect=ka(t.getBoxLayoutParams(),{width:a.getWidth(),height:a.getHeight()}),this._layoutAxes()},e.prototype.getRect=function(){return this._rect},e.prototype._makeLayoutInfo=function(){var t=this._model,a=this._rect,r=["x","y"],n=["width","height"],i=t.get("layout"),o=i==="horizontal"?0:1,s=a[n[o]],l=[0,s],c=this.dimensions.length,u=qu(t.get("axisExpandWidth"),l),h=qu(t.get("axisExpandCount")||0,[0,c]),d=t.get("axisExpandable")&&c>3&&c>h&&h>1&&u>0&&s>0,f=t.get("axisExpandWindow"),p;if(f)p=qu(f[1]-f[0],l),f[1]=f[0]+p;else{p=qu(u*(h-1),l);var g=t.get("axisExpandCenter")||ox(c/2);f=[u*g-p/2],f[1]=f[0]+p}var v=(s-p)/(c-h);v<3&&(v=0);var _=[ox(sx(f[0]/u,1))+1,DV(sx(f[1]/u,1))-1],y=v/u*f[0];return{layout:i,pixelDimIndex:o,layoutBase:a[r[o]],layoutLength:s,axisBase:a[r[1-o]],axisLength:a[n[1-o]],axisExpandable:d,axisExpandWidth:u,axisCollapseWidth:v,axisExpandWindow:f,axisCount:c,winInnerIndices:_,axisExpandWindow0Pos:y}},e.prototype._layoutAxes=function(){var t=this._rect,a=this._axesMap,r=this.dimensions,n=this._makeLayoutInfo(),i=n.layout;a.each(function(o){var s=[0,n.axisLength],l=o.inverse?1:0;o.setExtent(s[l],s[1-l])}),Zp(r,function(o,s){var l=(n.axisExpandable?EV:MV)(s,n),c={horizontal:{x:l.position,y:n.axisLength},vertical:{x:0,y:l.position}},u={horizontal:LV/2,vertical:0},h=[c[i].x+t.x,c[i].y+t.y],d=u[i],f=$o();cl(f,f,d),Ei(f,f,h),this._axesLayout[o]={position:h,rotation:d,transform:f,axisNameAvailableWidth:l.axisNameAvailableWidth,axisLabelShow:l.axisLabelShow,nameTruncateMaxWidth:l.nameTruncateMaxWidth,tickDirection:1,labelDirection:1}},this)},e.prototype.getAxis=function(t){return this._axesMap.get(t)},e.prototype.dataToPoint=function(t,a){return this.axisCoordToPoint(this._axesMap.get(a).dataToCoord(t),a)},e.prototype.eachActiveState=function(t,a,r,n){r==null&&(r=0),n==null&&(n=t.count());var i=this._axesMap,o=this.dimensions,s=[],l=[];G(o,function(v){s.push(t.mapDimension(v)),l.push(i.get(v).model)});for(var c=this.hasAxisBrushed(),u=r;u<n;u++){var h=void 0;if(!c)h="normal";else{h="active";for(var d=t.getValues(s,u),f=0,p=o.length;f<p;f++){var g=l[f].getActiveState(d[f]);if(g==="inactive"){h="inactive";break}}}a(h,u)}},e.prototype.hasAxisBrushed=function(){for(var t=this.dimensions,a=this._axesMap,r=!1,n=0,i=t.length;n<i;n++)a.get(t[n]).model.getActiveState()!=="normal"&&(r=!0);return r},e.prototype.axisCoordToPoint=function(t,a){var r=this._axesLayout[a];return qn([t,0],r.transform)},e.prototype.getAxisLayout=function(t){return Pe(this._axesLayout[t])},e.prototype.getSlidedAxisExpandWindow=function(t){var a=this._makeLayoutInfo(),r=a.pixelDimIndex,n=a.axisExpandWindow.slice(),i=n[1]-n[0],o=[0,a.axisExpandWidth*(a.axisCount-1)];if(!this.containPoint(t))return{behavior:"none",axisExpandWindow:n};var s=t[r]-a.layoutBase-a.axisExpandWindow0Pos,l,c="slide",u=a.axisCollapseWidth,h=this._model.get("axisExpandSlideTriggerArea"),d=h[0]!=null;if(u)d&&u&&s<i*h[0]?(c="jump",l=s-i*h[2]):d&&u&&s>i*(1-h[0])?(c="jump",l=s-i*(1-h[2])):(l=s-i*h[1])>=0&&(l=s-i*(1-h[1]))<=0&&(l=0),l*=a.axisExpandWidth/u,l?Go(l,n,o,"all"):c="none";else{var f=n[1]-n[0],p=o[1]*s/f;n=[XA(0,p-f/2)],n[1]=YA(o[1],n[0]+f),n[0]=n[1]-f}return{axisExpandWindow:n,behavior:c}},e}();function qu(e,t){return YA(XA(e,t[0]),t[1])}function MV(e,t){var a=t.layoutLength/(t.axisCount-1);return{position:a*e,axisNameAvailableWidth:a,axisLabelShow:!0}}function EV(e,t){var a=t.layoutLength,r=t.axisExpandWidth,n=t.axisCount,i=t.axisCollapseWidth,o=t.winInnerIndices,s,l=i,c=!1,u;return e<o[0]?(s=e*i,u=i):e<=o[1]?(s=t.axisExpandWindow0Pos+e*r-t.axisExpandWindow[0],l=r,c=!0):(s=a-(n-1-e)*i,u=i),{position:s,axisNameAvailableWidth:l,axisLabelShow:c,nameTruncateMaxWidth:u}}function RV(e,t){var a=[];return e.eachComponent("parallel",function(r,n){var i=new IV(r,e,t);i.name="parallel_"+n,i.resize(r,t),r.coordinateSystem=i,i.model=r,a.push(i)}),e.eachSeries(function(r){if(r.get("coordinateSystem")==="parallel"){var n=r.getReferringComponents("parallel",yr).models[0];r.coordinateSystem=n.coordinateSystem}}),a}var PV={create:RV},Rv=function(e){gt(t,e);function t(){var a=e!==null&&e.apply(this,arguments)||this;return a.type=t.type,a.activeIntervals=[],a}return t.prototype.getAreaSelectStyle=function(){return hT([["fill","color"],["lineWidth","borderWidth"],["stroke","borderColor"],["width","width"],["opacity","opacity"]])(this.getModel("areaSelectStyle"))},t.prototype.setActiveIntervals=function(a){var r=this.activeIntervals=Pe(a);if(r)for(var n=r.length-1;n>=0;n--)Er(r[n])},t.prototype.getActiveState=function(a){var r=this.activeIntervals;if(!r.length)return"normal";if(a==null||isNaN(+a))return"inactive";if(r.length===1){var n=r[0];if(n[0]<=a&&a<=n[1])return"active"}else for(var i=0,o=r.length;i<o;i++)if(r[i][0]<=a&&a<=r[i][1])return"active";return"inactive"},t}(da);$r(Rv,iu);var To=!0,zc=Math.min,Ws=Math.max,BV=Math.pow,OV=1e4,NV=6,$V=6,lx="globalPan",FV={w:[0,0],e:[0,1],n:[1,0],s:[1,1]},zV={w:"ew",e:"ew",n:"ns",s:"ns",ne:"nesw",sw:"nesw",nw:"nwse",se:"nwse"},cx={brushStyle:{lineWidth:2,stroke:"rgba(210,219,238,0.3)",fill:"#D2DBEE"},transformable:!0,brushMode:"single",removeOnClick:!1},VV=0,zy=function(e){gt(t,e);function t(a){var r=e.call(this)||this;return r._track=[],r._covers=[],r._handlers={},r._zr=a,r.group=new ie,r._uid="brushController_"+VV++,G(YV,function(n,i){this._handlers[i]=Ut(n,this)},r),r}return t.prototype.enableBrush=function(a){return this._brushType&&this._doDisableBrush(),a.brushType&&this._doEnableBrush(a),this},t.prototype._doEnableBrush=function(a){var r=this._zr;this._enableGlobalPan||M8(r,lx,this._uid),G(this._handlers,function(n,i){r.on(i,n)}),this._brushType=a.brushType,this._brushOption=Be(Pe(cx),a,!0)},t.prototype._doDisableBrush=function(){var a=this._zr;E8(a,lx,this._uid),G(this._handlers,function(r,n){a.off(n,r)}),this._brushType=this._brushOption=null},t.prototype.setPanels=function(a){if(a&&a.length){var r=this._panels={};G(a,function(n){r[n.panelId]=Pe(n)})}else this._panels=null;return this},t.prototype.mount=function(a){a=a||{},this._enableGlobalPan=a.enableGlobalPan;var r=this.group;return this._zr.add(r),r.attr({x:a.x||0,y:a.y||0,rotation:a.rotation||0,scaleX:a.scaleX||1,scaleY:a.scaleY||1}),this._transform=r.getLocalTransform(),this},t.prototype.updateCovers=function(a){a=Ot(a,function(d){return Be(Pe(cx),d,!0)});var r="\0-brush-index-",n=this._covers,i=this._covers=[],o=this,s=this._creatingCover;return new Ri(n,a,c,l).add(u).update(u).remove(h).execute(),this;function l(d,f){return(d.id!=null?d.id:r+f)+"-"+d.brushType}function c(d,f){return l(d.__brushOption,f)}function u(d,f){var p=a[d];if(f!=null&&n[f]===s)i[d]=n[f];else{var g=i[d]=f!=null?(n[f].__brushOption=p,n[f]):KA(o,ZA(o,p));Vy(o,g)}}function h(d){n[d]!==s&&o.group.remove(n[d])}},t.prototype.unmount=function(){return this.enableBrush(!1),Pv(this),this._zr.remove(this.group),this},t.prototype.dispose=function(){this.unmount(),this.off()},t}(hy);function ZA(e,t){var a=Af[t.brushType].createCover(e,t);return a.__brushOption=t,QA(a,t),e.group.add(a),a}function KA(e,t){var a=Gy(t);return a.endCreating&&(a.endCreating(e,t),QA(t,t.__brushOption)),t}function JA(e,t){var a=t.__brushOption;Gy(t).updateCoverShape(e,t,a.range,a)}function QA(e,t){var a=t.z;a==null&&(a=OV),e.traverse(function(r){r.z=a,r.z2=a})}function Vy(e,t){Gy(t).updateCommon(e,t),JA(e,t)}function Gy(e){return Af[e.__brushOption.brushType]}function Hy(e,t,a){var r=e._panels;if(!r)return To;var n,i=e._transform;return G(r,function(o){o.isTargetByCursor(t,a,i)&&(n=o)}),n}function tk(e,t){var a=e._panels;if(!a)return To;var r=t.__brushOption.panelId;return r!=null?a[r]:To}function Pv(e){var t=e._covers,a=t.length;return G(t,function(r){e.group.remove(r)},e),t.length=0,!!a}function Ao(e,t){var a=Ot(e._covers,function(r){var n=r.__brushOption,i=Pe(n.range);return{brushType:n.brushType,panelId:n.panelId,range:i}});e.trigger("brush",{areas:a,isEnd:!!t.isEnd,removeOnClick:!!t.removeOnClick})}function GV(e){var t=e._track;if(!t.length)return!1;var a=t[t.length-1],r=t[0],n=a[0]-r[0],i=a[1]-r[1],o=BV(n*n+i*i,.5);return o>NV}function ek(e){var t=e.length-1;return t<0&&(t=0),[e[0],e[t]]}function ak(e,t,a,r){var n=new ie;return n.add(new Ge({name:"main",style:Wy(a),silent:!0,draggable:!0,cursor:"move",drift:pe(ux,e,t,n,["n","s","w","e"]),ondragend:pe(Ao,t,{isEnd:!0})})),G(r,function(i){n.add(new Ge({name:i.join(""),style:{opacity:0},draggable:!0,silent:!0,invisible:!0,drift:pe(ux,e,t,n,i),ondragend:pe(Ao,t,{isEnd:!0})}))}),n}function rk(e,t,a,r){var n=r.brushStyle.lineWidth||0,i=Ws(n,$V),o=a[0][0],s=a[1][0],l=o-n/2,c=s-n/2,u=a[0][1],h=a[1][1],d=u-i+n/2,f=h-i+n/2,p=u-o,g=h-s,v=p+n,_=g+n;En(e,t,"main",o,s,p,g),r.transformable&&(En(e,t,"w",l,c,i,_),En(e,t,"e",d,c,i,_),En(e,t,"n",l,c,v,i),En(e,t,"s",l,f,v,i),En(e,t,"nw",l,c,i,i),En(e,t,"ne",d,c,i,i),En(e,t,"sw",l,f,i,i),En(e,t,"se",d,f,i,i))}function Bv(e,t){var a=t.__brushOption,r=a.transformable,n=t.childAt(0);n.useStyle(Wy(a)),n.attr({silent:!r,cursor:r?"move":"default"}),G([["w"],["e"],["n"],["s"],["s","e"],["s","w"],["n","e"],["n","w"]],function(i){var o=t.childOfName(i.join("")),s=i.length===1?Ov(e,i[0]):WV(e,i);o&&o.attr({silent:!r,invisible:!r,cursor:r?zV[s]+"-resize":null})})}function En(e,t,a,r,n,i,o){var s=t.childOfName(a);s&&s.setShape(UV(qy(e,t,[[r,n],[r+i,n+o]])))}function Wy(e){return _e({strokeNoScale:!0},e.brushStyle)}function nk(e,t,a,r){var n=[zc(e,a),zc(t,r)],i=[Ws(e,a),Ws(t,r)];return[[n[0],i[0]],[n[1],i[1]]]}function HV(e){return ys(e.group)}function Ov(e,t){var a={w:"left",e:"right",n:"top",s:"bottom"},r={left:"w",right:"e",top:"n",bottom:"s"},n=py(a[t],HV(e));return r[n]}function WV(e,t){var a=[Ov(e,t[0]),Ov(e,t[1])];return(a[0]==="e"||a[0]==="w")&&a.reverse(),a.join("")}function ux(e,t,a,r,n,i){var o=a.__brushOption,s=e.toRectRange(o.range),l=ik(t,n,i);G(r,function(c){var u=FV[c];s[u[0]][u[1]]+=l[u[0]]}),o.range=e.fromRectRange(nk(s[0][0],s[1][0],s[0][1],s[1][1])),Vy(t,a),Ao(t,{isEnd:!1})}function qV(e,t,a,r){var n=t.__brushOption.range,i=ik(e,a,r);G(n,function(o){o[0]+=i[0],o[1]+=i[1]}),Vy(e,t),Ao(e,{isEnd:!1})}function ik(e,t,a){var r=e.group,n=r.transformCoordToLocal(t,a),i=r.transformCoordToLocal(0,0);return[n[0]-i[0],n[1]-i[1]]}function qy(e,t,a){var r=tk(e,t);return r&&r!==To?r.clipPath(a,e._transform):Pe(a)}function UV(e){var t=zc(e[0][0],e[1][0]),a=zc(e[0][1],e[1][1]),r=Ws(e[0][0],e[1][0]),n=Ws(e[0][1],e[1][1]);return{x:t,y:a,width:r-t,height:n-a}}function jV(e,t,a){if(!(!e._brushType||XV(e,t.offsetX,t.offsetY))){var r=e._zr,n=e._covers,i=Hy(e,t,a);if(!e._dragging)for(var o=0;o<n.length;o++){var s=n[o].__brushOption;if(i&&(i===To||s.panelId===i.panelId)&&Af[s.brushType].contain(n[o],a[0],a[1]))return}i&&r.setCursorStyle("crosshair")}}function Nv(e){var t=e.event;t.preventDefault&&t.preventDefault()}function $v(e,t,a){return e.childOfName("main").contain(t,a)}function ok(e,t,a,r){var n=e._creatingCover,i=e._creatingPanel,o=e._brushOption,s;if(e._track.push(a.slice()),GV(e)||n){if(i&&!n){o.brushMode==="single"&&Pv(e);var l=Pe(o);l.brushType=hx(l.brushType,i),l.panelId=i===To?null:i.panelId,n=e._creatingCover=ZA(e,l),e._covers.push(n)}if(n){var c=Af[hx(e._brushType,i)],u=n.__brushOption;u.range=c.getCreatingRange(qy(e,n,e._track)),r&&(KA(e,n),c.updateCommon(e,n)),JA(e,n),s={isEnd:r}}}else r&&o.brushMode==="single"&&o.removeOnClick&&Hy(e,t,a)&&Pv(e)&&(s={isEnd:r,removeOnClick:!0});return s}function hx(e,t){return e==="auto"?t.defaultBrushType:e}var YV={mousedown:function(e){if(this._dragging)dx(this,e);else if(!e.target||!e.target.draggable){Nv(e);var t=this.group.transformCoordToLocal(e.offsetX,e.offsetY);this._creatingCover=null;var a=this._creatingPanel=Hy(this,e,t);a&&(this._dragging=!0,this._track=[t.slice()])}},mousemove:function(e){var t=e.offsetX,a=e.offsetY,r=this.group.transformCoordToLocal(t,a);if(jV(this,e,r),this._dragging){Nv(e);var n=ok(this,e,r,!1);n&&Ao(this,n)}},mouseup:function(e){dx(this,e)}};function dx(e,t){if(e._dragging){Nv(t);var a=t.offsetX,r=t.offsetY,n=e.group.transformCoordToLocal(a,r),i=ok(e,t,n,!0);e._dragging=!1,e._track=[],e._creatingCover=null,i&&Ao(e,i)}}function XV(e,t,a){var r=e._zr;return t<0||t>r.getWidth()||a<0||a>r.getHeight()}var Af={lineX:fx(0),lineY:fx(1),rect:{createCover:function(e,t){function a(r){return r}return ak({toRectRange:a,fromRectRange:a},e,t,[["w"],["e"],["n"],["s"],["s","e"],["s","w"],["n","e"],["n","w"]])},getCreatingRange:function(e){var t=ek(e);return nk(t[1][0],t[1][1],t[0][0],t[0][1])},updateCoverShape:function(e,t,a,r){rk(e,t,a,r)},updateCommon:Bv,contain:$v},polygon:{createCover:function(e,t){var a=new ie;return a.add(new Kr({name:"main",style:Wy(t),silent:!0})),a},getCreatingRange:function(e){return e},endCreating:function(e,t){t.remove(t.childAt(0)),t.add(new Br({name:"main",draggable:!0,drift:pe(qV,e,t),ondragend:pe(Ao,e,{isEnd:!0})}))},updateCoverShape:function(e,t,a,r){t.childAt(0).setShape({points:qy(e,t,a)})},updateCommon:Bv,contain:$v}};function fx(e){return{createCover:function(t,a){return ak({toRectRange:function(r){var n=[r,[0,100]];return e&&n.reverse(),n},fromRectRange:function(r){return r[e]}},t,a,[[["w"],["e"]],[["n"],["s"]]][e])},getCreatingRange:function(t){var a=ek(t),r=zc(a[0][e],a[1][e]),n=Ws(a[0][e],a[1][e]);return[r,n]},updateCoverShape:function(t,a,r,n){var i,o=tk(t,a);if(o!==To&&o.getLinearBrushOtherExtent)i=o.getLinearBrushOtherExtent(e);else{var s=t._zr;i=[0,[s.getWidth(),s.getHeight()][1-e]]}var l=[r,i];e&&l.reverse(),rk(t,a,l,n)},updateCommon:Bv,contain:$v}}function sk(e){return e=Uy(e),function(t){return C5(t,e)}}function lk(e,t){return e=Uy(e),function(a){var r=t??a,n=r?e.width:e.height,i=r?e.x:e.y;return[i,i+(n||0)]}}function ck(e,t,a){var r=Uy(e);return function(n,i){return r.contain(i[0],i[1])&&!Sf(n,t,a)}}function Uy(e){return aa.create(e)}var ZV=["axisLine","axisTickLabel","axisName"],KV=function(e){gt(t,e);function t(){var a=e!==null&&e.apply(this,arguments)||this;return a.type=t.type,a}return t.prototype.init=function(a,r){e.prototype.init.apply(this,arguments),(this._brushController=new zy(r.getZr())).on("brush",Ut(this._onBrush,this))},t.prototype.render=function(a,r,n,i){if(!JV(a,r,i)){this.axisModel=a,this.api=n,this.group.removeAll();var o=this._axisGroup;if(this._axisGroup=new ie,this.group.add(this._axisGroup),!!a.get("show")){var s=t9(a,r),l=s.coordinateSystem,c=a.getAreaSelectStyle(),u=c.width,h=a.axis.dim,d=l.getAxisLayout(h),f=Vt({strokeContainThreshold:u},d),p=new ir(a,f);G(ZV,p.add,p),this._axisGroup.add(p.getGroup()),this._refreshBrushController(f,c,a,s,u,n),hf(o,this._axisGroup,a)}}},t.prototype._refreshBrushController=function(a,r,n,i,o,s){var l=n.axis.getExtent(),c=l[1]-l[0],u=Math.min(30,Math.abs(c)*.1),h=aa.create({x:l[0],y:-o/2,width:c,height:o});h.x-=u,h.width+=2*u,this._brushController.mount({enableGlobalPan:!0,rotation:a.rotation,x:a.position[0],y:a.position[1]}).setPanels([{panelId:"pl",clipPath:sk(h),isTargetByCursor:ck(h,s,i),getLinearBrushOtherExtent:lk(h,0)}]).enableBrush({brushType:"lineX",brushStyle:r,removeOnClick:!0}).updateCovers(QV(n))},t.prototype._onBrush=function(a){var r=a.areas,n=this.axisModel,i=n.axis,o=Ot(r,function(s){return[i.coordToData(s.range[0],!0),i.coordToData(s.range[1],!0)]});(!n.option.realtime===a.isEnd||a.removeOnClick)&&this.api.dispatchAction({type:"axisAreaSelect",parallelAxisId:n.id,intervals:o})},t.prototype.dispose=function(){this._brushController.dispose()},t.type="parallelAxis",t}(ma);function JV(e,t,a){return a&&a.type==="axisAreaSelect"&&t.findComponents({mainType:"parallelAxis",query:a})[0]===e}function QV(e){var t=e.axis;return Ot(e.activeIntervals,function(a){return{brushType:"lineX",panelId:"pl",range:[t.dataToCoord(a[0],!0),t.dataToCoord(a[1],!0)]}})}function t9(e,t){return t.getComponent("parallel",e.get("parallelIndex"))}var e9={type:"axisAreaSelect",event:"axisAreaSelected"};function a9(e){e.registerAction(e9,function(t,a){a.eachComponent({mainType:"parallelAxis",query:t},function(r){r.axis.model.setActiveIntervals(t.intervals)})}),e.registerAction("parallelAxisExpand",function(t,a){a.eachComponent({mainType:"parallel",query:t},function(r){r.setAxisExpand(t)})})}var r9={type:"value",areaSelectStyle:{width:20,borderWidth:1,borderColor:"rgba(160,197,232)",color:"rgba(160,197,232)",opacity:.3},realtime:!0,z:10};function uk(e){e.registerComponentView(CV),e.registerComponentModel(AV),e.registerCoordinateSystem("parallel",PV),e.registerPreprocessor(bV),e.registerComponentModel(Rv),e.registerComponentView(KV),Hs(e,"parallel",Rv,r9),a9(e)}function n9(e){ue(uk),e.registerChartView(dV),e.registerSeriesModel(gV),e.registerVisual(e.PRIORITY.VISUAL.BRUSH,_V)}var i9=function(){function e(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.cpx1=0,this.cpy1=0,this.cpx2=0,this.cpy2=0,this.extent=0}return e}(),o9=function(e){gt(t,e);function t(a){return e.call(this,a)||this}return t.prototype.getDefaultShape=function(){return new i9},t.prototype.buildPath=function(a,r){var n=r.extent;a.moveTo(r.x1,r.y1),a.bezierCurveTo(r.cpx1,r.cpy1,r.cpx2,r.cpy2,r.x2,r.y2),r.orient==="vertical"?(a.lineTo(r.x2+n,r.y2),a.bezierCurveTo(r.cpx2+n,r.cpy2,r.cpx1+n,r.cpy1,r.x1+n,r.y1)):(a.lineTo(r.x2,r.y2+n),a.bezierCurveTo(r.cpx2,r.cpy2+n,r.cpx1,r.cpy1+n,r.x1,r.y1+n)),a.closePath()},t.prototype.highlight=function(){Rs(this)},t.prototype.downplay=function(){Ps(this)},t}(va),s9=function(e){gt(t,e);function t(){var a=e!==null&&e.apply(this,arguments)||this;return a.type=t.type,a._focusAdjacencyDisabled=!1,a}return t.prototype.render=function(a,r,n){var i=this,o=a.getGraph(),s=this.group,l=a.layoutInfo,c=l.width,u=l.height,h=a.getData(),d=a.getData("edge"),f=a.get("orient");this._model=a,s.removeAll(),s.x=l.x,s.y=l.y,o.eachEdge(function(p){var g=new o9,v=Ae(g);v.dataIndex=p.dataIndex,v.seriesIndex=a.seriesIndex,v.dataType="edge";var _=p.getModel(),y=_.getModel("lineStyle"),b=y.get("curveness"),w=p.node1.getLayout(),T=p.node1.getModel(),C=T.get("localX"),A=T.get("localY"),k=p.node2.getLayout(),L=p.node2.getModel(),M=L.get("localX"),P=L.get("localY"),E=p.getLayout(),D,O,B,R,V,z,W,it;g.shape.extent=Math.max(1,E.dy),g.shape.orient=f,f==="vertical"?(D=(C!=null?C*c:w.x)+E.sy,O=(A!=null?A*u:w.y)+w.dy,B=(M!=null?M*c:k.x)+E.ty,R=P!=null?P*u:k.y,V=D,z=O*(1-b)+R*b,W=B,it=O*b+R*(1-b)):(D=(C!=null?C*c:w.x)+w.dx,O=(A!=null?A*u:w.y)+E.sy,B=M!=null?M*c:k.x,R=(P!=null?P*u:k.y)+E.ty,V=D*(1-b)+B*b,z=O,W=D*b+B*(1-b),it=R),g.setShape({x1:D,y1:O,x2:B,y2:R,cpx1:V,cpy1:z,cpx2:W,cpy2:it}),g.useStyle(y.getItemStyle()),px(g.style,f,p);var ot=""+_.get("value"),xt=Aa(_,"edgeLabel");Fa(g,xt,{labelFetcher:{getFormattedLabel:function(Tt,Mt,et,ut,at,Q){return a.getFormattedLabel(Tt,Mt,"edge",ut,sl(at,xt.normal&&xt.normal.get("formatter"),ot),Q)}},labelDataIndex:p.dataIndex,defaultText:ot}),g.setTextConfig({position:"inside"});var j=_.getModel("emphasis");za(g,_,"lineStyle",function(Tt){var Mt=Tt.getItemStyle();return px(Mt,f,p),Mt}),s.add(g),d.setItemGraphicEl(p.dataIndex,g);var mt=j.get("focus");Qe(g,mt==="adjacency"?p.getAdjacentDataIndices():mt==="trajectory"?p.getTrajectoryDataIndices():mt,j.get("blurScope"),j.get("disabled"))}),o.eachNode(function(p){var g=p.getLayout(),v=p.getModel(),_=v.get("localX"),y=v.get("localY"),b=v.getModel("emphasis"),w=v.get(["itemStyle","borderRadius"])||0,T=new Ge({shape:{x:_!=null?_*c:g.x,y:y!=null?y*u:g.y,width:g.dx,height:g.dy,r:w},style:v.getModel("itemStyle").getItemStyle(),z2:10});Fa(T,Aa(v),{labelFetcher:{getFormattedLabel:function(A,k){return a.getFormattedLabel(A,k,"node")}},labelDataIndex:p.dataIndex,defaultText:p.id}),T.disableLabelAnimation=!0,T.setStyle("fill",p.getVisual("color")),T.setStyle("decal",p.getVisual("style").decal),za(T,v),s.add(T),h.setItemGraphicEl(p.dataIndex,T),Ae(T).dataType="node";var C=b.get("focus");Qe(T,C==="adjacency"?p.getAdjacentDataIndices():C==="trajectory"?p.getTrajectoryDataIndices():C,b.get("blurScope"),b.get("disabled"))}),h.eachItemGraphicEl(function(p,g){var v=h.getItemModel(g);v.get("draggable")&&(p.drift=function(_,y){i._focusAdjacencyDisabled=!0,this.shape.x+=_,this.shape.y+=y,this.dirty(),n.dispatchAction({type:"dragNode",seriesId:a.id,dataIndex:h.getRawIndex(g),localX:this.shape.x/c,localY:this.shape.y/u})},p.ondragend=function(){i._focusAdjacencyDisabled=!1},p.draggable=!0,p.cursor="move")}),!this._data&&a.isAnimationEnabled()&&s.setClipPath(l9(s.getBoundingRect(),a,function(){s.removeClipPath()})),this._data=a.getData()},t.prototype.dispose=function(){},t.type="sankey",t}(ra);function px(e,t,a){switch(e.fill){case"source":e.fill=a.node1.getVisual("color"),e.decal=a.node1.getVisual("style").decal;break;case"target":e.fill=a.node2.getVisual("color"),e.decal=a.node2.getVisual("style").decal;break;case"gradient":var r=a.node1.getVisual("color"),n=a.node2.getVisual("color");ge(r)&&ge(n)&&(e.fill=new Wn(0,0,+(t==="horizontal"),+(t==="vertical"),[{color:r,offset:0},{color:n,offset:1}]))}}function l9(e,t,a){var r=new Ge({shape:{x:e.x-10,y:e.y-10,width:0,height:e.height+20}});return la(r,{shape:{width:e.width+20}},t,a),r}var c9=function(e){gt(t,e);function t(){var a=e!==null&&e.apply(this,arguments)||this;return a.type=t.type,a}return t.prototype.getInitialData=function(a,r){var n=a.edges||a.links||[],i=a.data||a.nodes||[],o=a.levels||[];this.levelModels=[];for(var s=this.levelModels,l=0;l<o.length;l++)o[l].depth!=null&&o[l].depth>=0&&(s[o[l].depth]=new _a(o[l],this,r));var c=UA(i,n,this,!0,u);return c.data;function u(h,d){h.wrapMethod("getItemModel",function(f,p){var g=f.parentModel,v=g.getData().getItemLayout(p);if(v){var _=v.depth,y=g.levelModels[_];y&&(f.parentModel=y)}return f}),d.wrapMethod("getItemModel",function(f,p){var g=f.parentModel,v=g.getGraph().getEdgeByIndex(p),_=v.node1.getLayout();if(_){var y=_.depth,b=g.levelModels[y];b&&(f.parentModel=b)}return f})}},t.prototype.setNodePosition=function(a,r){var n=this.option.data||this.option.nodes,i=n[a];i.localX=r[0],i.localY=r[1]},t.prototype.getGraph=function(){return this.getData().graph},t.prototype.getEdgeData=function(){return this.getGraph().edgeData},t.prototype.formatTooltip=function(a,r,n){function i(f){return isNaN(f)||f==null}if(n==="edge"){var o=this.getDataParams(a,n),s=o.data,l=o.value,c=s.source+" -- "+s.target;return Za("nameValue",{name:c,value:l,noValue:i(l)})}else{var u=this.getGraph().getNodeByIndex(a),h=u.getLayout().value,d=this.getDataParams(a,n).data.name;return Za("nameValue",{name:d!=null?d+"":null,value:h,noValue:i(h)})}},t.prototype.optionUpdated=function(){},t.prototype.getDataParams=function(a,r){var n=e.prototype.getDataParams.call(this,a,r);if(n.value==null&&r==="node"){var i=this.getGraph().getNodeByIndex(a),o=i.getLayout().value;n.value=o}return n},t.type="series.sankey",t.defaultOption={z:2,coordinateSystem:"view",left:"5%",top:"5%",right:"20%",bottom:"5%",orient:"horizontal",nodeWidth:20,nodeGap:8,draggable:!0,layoutIterations:32,label:{show:!0,position:"right",fontSize:12},edgeLabel:{show:!1,fontSize:12},levels:[],nodeAlign:"justify",lineStyle:{color:"#314656",opacity:.2,curveness:.5},emphasis:{label:{show:!0},lineStyle:{opacity:.5}},select:{itemStyle:{borderColor:"#212121"}},animationEasing:"linear",animationDuration:1e3},t}(ha);function u9(e,t){e.eachSeriesByType("sankey",function(a){var r=a.get("nodeWidth"),n=a.get("nodeGap"),i=h9(a,t);a.layoutInfo=i;var o=i.width,s=i.height,l=a.getGraph(),c=l.nodes,u=l.edges;f9(c);var h=Va(c,function(g){return g.getLayout().value===0}),d=h.length!==0?0:a.get("layoutIterations"),f=a.get("orient"),p=a.get("nodeAlign");d9(c,u,r,n,o,s,d,f,p)})}function h9(e,t){return ka(e.getBoxLayoutParams(),{width:t.getWidth(),height:t.getHeight()})}function d9(e,t,a,r,n,i,o,s,l){p9(e,t,a,n,i,s,l),y9(e,t,i,n,r,o,s),k9(e,s)}function f9(e){G(e,function(t){var a=Di(t.outEdges,sd),r=Di(t.inEdges,sd),n=t.getValue()||0,i=Math.max(a,r,n);t.setLayout({value:i},!0)})}function p9(e,t,a,r,n,i,o){for(var s=[],l=[],c=[],u=[],h=0,d=0;d<t.length;d++)s[d]=1;for(var d=0;d<e.length;d++)l[d]=e[d].inEdges.length,l[d]===0&&c.push(e[d]);for(var f=-1;c.length;){for(var p=0;p<c.length;p++){var g=c[p],v=g.hostGraph.data.getRawDataItem(g.dataIndex),_=v.depth!=null&&v.depth>=0;_&&v.depth>f&&(f=v.depth),g.setLayout({depth:_?v.depth:h},!0),i==="vertical"?g.setLayout({dy:a},!0):g.setLayout({dx:a},!0);for(var y=0;y<g.outEdges.length;y++){var b=g.outEdges[y],w=t.indexOf(b);s[w]=0;var T=b.node2,C=e.indexOf(T);--l[C]===0&&u.indexOf(T)<0&&u.push(T)}}++h,c=u,u=[]}for(var d=0;d<s.length;d++)if(s[d]===1)throw new Error("Sankey is a DAG, the original data has cycle!");var A=f>h-1?f:h-1;o&&o!=="left"&&g9(e,o,i,A);var k=i==="vertical"?(n-a)/A:(r-a)/A;m9(e,k,i)}function hk(e){var t=e.hostGraph.data.getRawDataItem(e.dataIndex);return t.depth!=null&&t.depth>=0}function g9(e,t,a,r){if(t==="right"){for(var n=[],i=e,o=0;i.length;){for(var s=0;s<i.length;s++){var l=i[s];l.setLayout({skNodeHeight:o},!0);for(var c=0;c<l.inEdges.length;c++){var u=l.inEdges[c];n.indexOf(u.node1)<0&&n.push(u.node1)}}i=n,n=[],++o}G(e,function(h){hk(h)||h.setLayout({depth:Math.max(0,r-h.getLayout().skNodeHeight)},!0)})}else t==="justify"&&v9(e,r)}function v9(e,t){G(e,function(a){!hk(a)&&!a.outEdges.length&&a.setLayout({depth:t},!0)})}function m9(e,t,a){G(e,function(r){var n=r.getLayout().depth*t;a==="vertical"?r.setLayout({y:n},!0):r.setLayout({x:n},!0)})}function y9(e,t,a,r,n,i,o){var s=_9(e,o);b9(s,t,a,r,n,o),Kp(s,n,a,r,o);for(var l=1;i>0;i--)l*=.99,x9(s,l,o),Kp(s,n,a,r,o),A9(s,l,o),Kp(s,n,a,r,o)}function _9(e,t){var a=[],r=t==="vertical"?"y":"x",n=uv(e,function(i){return i.getLayout()[r]});return n.keys.sort(function(i,o){return i-o}),G(n.keys,function(i){a.push(n.buckets.get(i))}),a}function b9(e,t,a,r,n,i){var o=1/0;G(e,function(s){var l=s.length,c=0;G(s,function(h){c+=h.getLayout().value});var u=i==="vertical"?(r-(l-1)*n)/c:(a-(l-1)*n)/c;u<o&&(o=u)}),G(e,function(s){G(s,function(l,c){var u=l.getLayout().value*o;i==="vertical"?(l.setLayout({x:c},!0),l.setLayout({dx:u},!0)):(l.setLayout({y:c},!0),l.setLayout({dy:u},!0))})}),G(t,function(s){var l=+s.getValue()*o;s.setLayout({dy:l},!0)})}function Kp(e,t,a,r,n){var i=n==="vertical"?"x":"y";G(e,function(o){o.sort(function(g,v){return g.getLayout()[i]-v.getLayout()[i]});for(var s,l,c,u=0,h=o.length,d=n==="vertical"?"dx":"dy",f=0;f<h;f++)l=o[f],c=u-l.getLayout()[i],c>0&&(s=l.getLayout()[i]+c,n==="vertical"?l.setLayout({x:s},!0):l.setLayout({y:s},!0)),u=l.getLayout()[i]+l.getLayout()[d]+t;var p=n==="vertical"?r:a;if(c=u-t-p,c>0){s=l.getLayout()[i]-c,n==="vertical"?l.setLayout({x:s},!0):l.setLayout({y:s},!0),u=s;for(var f=h-2;f>=0;--f)l=o[f],c=l.getLayout()[i]+l.getLayout()[d]+t-u,c>0&&(s=l.getLayout()[i]-c,n==="vertical"?l.setLayout({x:s},!0):l.setLayout({y:s},!0)),u=l.getLayout()[i]}})}function x9(e,t,a){G(e.slice().reverse(),function(r){G(r,function(n){if(n.outEdges.length){var i=Di(n.outEdges,S9,a)/Di(n.outEdges,sd);if(isNaN(i)){var o=n.outEdges.length;i=o?Di(n.outEdges,w9,a)/o:0}if(a==="vertical"){var s=n.getLayout().x+(i-Pi(n,a))*t;n.setLayout({x:s},!0)}else{var l=n.getLayout().y+(i-Pi(n,a))*t;n.setLayout({y:l},!0)}}})})}function S9(e,t){return Pi(e.node2,t)*e.getValue()}function w9(e,t){return Pi(e.node2,t)}function C9(e,t){return Pi(e.node1,t)*e.getValue()}function T9(e,t){return Pi(e.node1,t)}function Pi(e,t){return t==="vertical"?e.getLayout().x+e.getLayout().dx/2:e.getLayout().y+e.getLayout().dy/2}function sd(e){return e.getValue()}function Di(e,t,a){for(var r=0,n=e.length,i=-1;++i<n;){var o=+t(e[i],a);isNaN(o)||(r+=o)}return r}function A9(e,t,a){G(e,function(r){G(r,function(n){if(n.inEdges.length){var i=Di(n.inEdges,C9,a)/Di(n.inEdges,sd);if(isNaN(i)){var o=n.inEdges.length;i=o?Di(n.inEdges,T9,a)/o:0}if(a==="vertical"){var s=n.getLayout().x+(i-Pi(n,a))*t;n.setLayout({x:s},!0)}else{var l=n.getLayout().y+(i-Pi(n,a))*t;n.setLayout({y:l},!0)}}})})}function k9(e,t){var a=t==="vertical"?"x":"y";G(e,function(r){r.outEdges.sort(function(n,i){return n.node2.getLayout()[a]-i.node2.getLayout()[a]}),r.inEdges.sort(function(n,i){return n.node1.getLayout()[a]-i.node1.getLayout()[a]})}),G(e,function(r){var n=0,i=0;G(r.outEdges,function(o){o.setLayout({sy:n},!0),n+=o.getLayout().dy}),G(r.inEdges,function(o){o.setLayout({ty:i},!0),i+=o.getLayout().dy})})}function D9(e){e.eachSeriesByType("sankey",function(t){var a=t.getGraph(),r=a.nodes,n=a.edges;if(r.length){var i=1/0,o=-1/0;G(r,function(s){var l=s.getLayout().value;l<i&&(i=l),l>o&&(o=l)}),G(r,function(s){var l=new Ta({type:"color",mappingMethod:"linear",dataExtent:[i,o],visual:t.get("color")}),c=l.mapValueToVisual(s.getLayout().value),u=s.getModel().get(["itemStyle","color"]);u!=null?(s.setVisual("color",u),s.setVisual("style",{fill:u})):(s.setVisual("color",c),s.setVisual("style",{fill:c}))})}n.length&&G(n,function(s){var l=s.getModel().get("lineStyle");s.setVisual("style",l)})})}function L9(e){e.registerChartView(s9),e.registerSeriesModel(c9),e.registerLayout(u9),e.registerVisual(D9),e.registerAction({type:"dragNode",event:"dragnode",update:"update"},function(t,a){a.eachComponent({mainType:"series",subType:"sankey",query:t},function(r){r.setNodePosition(t.dataIndex,[t.localX,t.localY])})})}var dk=function(){function e(){}return e.prototype._hasEncodeRule=function(t){var a=this.getEncode();return a&&a.get(t)!=null},e.prototype.getInitialData=function(t,a){var r,n=a.getComponent("xAxis",this.get("xAxisIndex")),i=a.getComponent("yAxis",this.get("yAxisIndex")),o=n.get("type"),s=i.get("type"),l;o==="category"?(t.layout="horizontal",r=n.getOrdinalMeta(),l=!this._hasEncodeRule("x")):s==="category"?(t.layout="vertical",r=i.getOrdinalMeta(),l=!this._hasEncodeRule("y")):t.layout=t.layout||"horizontal";var c=["x","y"],u=t.layout==="horizontal"?0:1,h=this._baseAxisDim=c[u],d=c[1-u],f=[n,i],p=f[u].get("type"),g=f[1-u].get("type"),v=t.data;if(v&&l){var _=[];G(v,function(w,T){var C;Nt(w)?(C=w.slice(),w.unshift(T)):Nt(w.value)?(C=Vt({},w),C.value=C.value.slice(),w.value.unshift(T)):C=w,_.push(C)}),t.data=_}var y=this.defaultValueDimensions,b=[{name:h,type:hv(p),ordinalMeta:r,otherDims:{tooltip:!1,itemName:0},dimsDef:["base"]},{name:d,type:hv(g),dimsDef:y.slice()}];return dl(this,{coordDimensions:b,dimensionsCount:y.length+1,encodeDefaulter:pe(T5,b,this)})},e.prototype.getBaseAxis=function(){var t=this._baseAxisDim;return this.ecModel.getComponent(t+"Axis",this.get(t+"AxisIndex")).axis},e}(),fk=function(e){gt(t,e);function t(){var a=e!==null&&e.apply(this,arguments)||this;return a.type=t.type,a.defaultValueDimensions=[{name:"min",defaultTooltip:!0},{name:"Q1",defaultTooltip:!0},{name:"median",defaultTooltip:!0},{name:"Q3",defaultTooltip:!0},{name:"max",defaultTooltip:!0}],a.visualDrawType="stroke",a}return t.type="series.boxplot",t.dependencies=["xAxis","yAxis","grid"],t.defaultOption={z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,layout:null,boxWidth:[7,50],itemStyle:{color:"#fff",borderWidth:1},emphasis:{scale:!0,itemStyle:{borderWidth:2,shadowBlur:5,shadowOffsetX:1,shadowOffsetY:1,shadowColor:"rgba(0,0,0,0.2)"}},animationDuration:800},t}(ha);$r(fk,dk,!0);var I9=function(e){gt(t,e);function t(){var a=e!==null&&e.apply(this,arguments)||this;return a.type=t.type,a}return t.prototype.render=function(a,r,n){var i=a.getData(),o=this.group,s=this._data;this._data||o.removeAll();var l=a.get("layout")==="horizontal"?1:0;i.diff(s).add(function(c){if(i.hasValue(c)){var u=i.getItemLayout(c),h=gx(u,i,c,l,!0);i.setItemGraphicEl(c,h),o.add(h)}}).update(function(c,u){var h=s.getItemGraphicEl(u);if(!i.hasValue(c)){o.remove(h);return}var d=i.getItemLayout(c);h?(Yr(h),pk(d,h,i,c)):h=gx(d,i,c,l),o.add(h),i.setItemGraphicEl(c,h)}).remove(function(c){var u=s.getItemGraphicEl(c);u&&o.remove(u)}).execute(),this._data=i},t.prototype.remove=function(a){var r=this.group,n=this._data;this._data=null,n&&n.eachItemGraphicEl(function(i){i&&r.remove(i)})},t.type="boxplot",t}(ra),M9=function(){function e(){}return e}(),E9=function(e){gt(t,e);function t(a){var r=e.call(this,a)||this;return r.type="boxplotBoxPath",r}return t.prototype.getDefaultShape=function(){return new M9},t.prototype.buildPath=function(a,r){var n=r.points,i=0;for(a.moveTo(n[i][0],n[i][1]),i++;i<4;i++)a.lineTo(n[i][0],n[i][1]);for(a.closePath();i<n.length;i++)a.moveTo(n[i][0],n[i][1]),i++,a.lineTo(n[i][0],n[i][1])},t}(va);function gx(e,t,a,r,n){var i=e.ends,o=new E9({shape:{points:n?R9(i,r,e):i}});return pk(e,o,t,a,n),o}function pk(e,t,a,r,n){var i=a.hostModel,o=No[n?"initProps":"updateProps"];o(t,{shape:{points:e.ends}},i,r),t.useStyle(a.getItemVisual(r,"style")),t.style.strokeNoScale=!0,t.z2=100;var s=a.getItemModel(r),l=s.getModel("emphasis");za(t,s),Qe(t,l.get("focus"),l.get("blurScope"),l.get("disabled"))}function R9(e,t,a){return Ot(e,function(r){return r=r.slice(),r[t]=a.initBaseline,r})}var fc=G;function P9(e){var t=B9(e);fc(t,function(a){var r=a.seriesModels;r.length&&(O9(a),fc(r,function(n,i){N9(n,a.boxOffsetList[i],a.boxWidthList[i])}))})}function B9(e){var t=[],a=[];return e.eachSeriesByType("boxplot",function(r){var n=r.getBaseAxis(),i=Xe(a,n);i<0&&(i=a.length,a[i]=n,t[i]={axis:n,seriesModels:[]}),t[i].seriesModels.push(r)}),t}function O9(e){var t=e.axis,a=e.seriesModels,r=a.length,n=e.boxWidthList=[],i=e.boxOffsetList=[],o=[],s;if(t.type==="category")s=t.getBandWidth();else{var l=0;fc(a,function(p){l=Math.max(l,p.getData().count())});var c=t.getExtent();s=Math.abs(c[1]-c[0])/l}fc(a,function(p){var g=p.get("boxWidth");Nt(g)||(g=[g,g]),o.push([Ft(g[0],s)||0,Ft(g[1],s)||0])});var u=s*.8-2,h=u/r*.3,d=(u-h*(r-1))/r,f=d/2-u/2;fc(a,function(p,g){i.push(f),f+=h+d,n.push(Math.min(Math.max(d,o[g][0]),o[g][1]))})}function N9(e,t,a){var r=e.coordinateSystem,n=e.getData(),i=a/2,o=e.get("layout")==="horizontal"?0:1,s=1-o,l=["x","y"],c=n.mapDimension(l[o]),u=n.mapDimensionsAll(l[s]);if(c==null||u.length<5)return;for(var h=0;h<n.count();h++){var d=n.get(c,h),f=b(d,u[2],h),p=b(d,u[0],h),g=b(d,u[1],h),v=b(d,u[3],h),_=b(d,u[4],h),y=[];w(y,g,!1),w(y,v,!0),y.push(p,g,_,v),T(y,p),T(y,_),T(y,f),n.setItemLayout(h,{initBaseline:f[s],ends:y})}function b(C,A,k){var L=n.get(A,k),M=[];M[o]=C,M[s]=L;var P;return isNaN(C)||isNaN(L)?P=[NaN,NaN]:(P=r.dataToPoint(M),P[o]+=t),P}function w(C,A,k){var L=A.slice(),M=A.slice();L[o]+=i,M[o]-=i,k?C.push(L,M):C.push(M,L)}function T(C,A){var k=A.slice(),L=A.slice();k[o]-=i,L[o]+=i,C.push(k,L)}}function $9(e,t){t=t||{};for(var a=[],r=[],n=t.boundIQR,i=n==="none"||n===0,o=0;o<e.length;o++){var s=Er(e[o].slice()),l=fp(s,.25),c=fp(s,.5),u=fp(s,.75),h=s[0],d=s[s.length-1],f=(n??1.5)*(u-l),p=i?h:Math.max(h,l-f),g=i?d:Math.min(d,u+f),v=t.itemNameFormatter,_=Me(v)?v({value:o}):ge(v)?v.replace("{value}",o+""):o+"";a.push([_,p,l,c,u,g]);for(var y=0;y<s.length;y++){var b=s[y];if(b<p||b>g){var w=[_,b];r.push(w)}}}return{boxData:a,outliers:r}}var F9={type:"echarts:boxplot",transform:function(t){var a=t.upstream;if(a.sourceFormat!==gT){var r="";ua(r)}var n=$9(a.getRawData(),t.config);return[{dimensions:["ItemName","Low","Q1","Q2","Q3","High"],data:n.boxData},{data:n.outliers}]}};function z9(e){e.registerSeriesModel(fk),e.registerChartView(I9),e.registerLayout(P9),e.registerTransform(F9)}var V9=["itemStyle","borderColor"],G9=["itemStyle","borderColor0"],H9=["itemStyle","borderColorDoji"],W9=["itemStyle","color"],q9=["itemStyle","color0"];function jy(e,t){return t.get(e>0?W9:q9)}function Yy(e,t){return t.get(e===0?H9:e>0?V9:G9)}var U9={seriesType:"candlestick",plan:of(),performRawSeries:!0,reset:function(e,t){if(!t.isSeriesFiltered(e)){var a=e.pipelineContext.large;return!a&&{progress:function(r,n){for(var i;(i=r.next())!=null;){var o=n.getItemModel(i),s=n.getItemLayout(i).sign,l=o.getItemStyle();l.fill=jy(s,o),l.stroke=Yy(s,o)||l.fill;var c=n.ensureUniqueItemVisual(i,"style");Vt(c,l)}}}}}},j9=["color","borderColor"],Y9=function(e){gt(t,e);function t(){var a=e!==null&&e.apply(this,arguments)||this;return a.type=t.type,a}return t.prototype.render=function(a,r,n){this.group.removeClipPath(),this._progressiveEls=null,this._updateDrawMode(a),this._isLargeDraw?this._renderLarge(a):this._renderNormal(a)},t.prototype.incrementalPrepareRender=function(a,r,n){this._clear(),this._updateDrawMode(a)},t.prototype.incrementalRender=function(a,r,n,i){this._progressiveEls=[],this._isLargeDraw?this._incrementalRenderLarge(a,r):this._incrementalRenderNormal(a,r)},t.prototype.eachRendered=function(a){ol(this._progressiveEls||this.group,a)},t.prototype._updateDrawMode=function(a){var r=a.pipelineContext.large;(this._isLargeDraw==null||r!==this._isLargeDraw)&&(this._isLargeDraw=r,this._clear())},t.prototype._renderNormal=function(a){var r=a.getData(),n=this._data,i=this.group,o=r.getLayout("isSimpleBox"),s=a.get("clip",!0),l=a.coordinateSystem,c=l.getArea&&l.getArea();this._data||i.removeAll(),r.diff(n).add(function(u){if(r.hasValue(u)){var h=r.getItemLayout(u);if(s&&vx(c,h))return;var d=Jp(h,u,!0);la(d,{shape:{points:h.ends}},a,u),Qp(d,r,u,o),i.add(d),r.setItemGraphicEl(u,d)}}).update(function(u,h){var d=n.getItemGraphicEl(h);if(!r.hasValue(u)){i.remove(d);return}var f=r.getItemLayout(u);if(s&&vx(c,f)){i.remove(d);return}d?(ze(d,{shape:{points:f.ends}},a,u),Yr(d)):d=Jp(f),Qp(d,r,u,o),i.add(d),r.setItemGraphicEl(u,d)}).remove(function(u){var h=n.getItemGraphicEl(u);h&&i.remove(h)}).execute(),this._data=r},t.prototype._renderLarge=function(a){this._clear(),mx(a,this.group);var r=a.get("clip",!0)?du(a.coordinateSystem,!1,a):null;r?this.group.setClipPath(r):this.group.removeClipPath()},t.prototype._incrementalRenderNormal=function(a,r){for(var n=r.getData(),i=n.getLayout("isSimpleBox"),o;(o=a.next())!=null;){var s=n.getItemLayout(o),l=Jp(s);Qp(l,n,o,i),l.incremental=!0,this.group.add(l),this._progressiveEls.push(l)}},t.prototype._incrementalRenderLarge=function(a,r){mx(r,this.group,this._progressiveEls,!0)},t.prototype.remove=function(a){this._clear()},t.prototype._clear=function(){this.group.removeAll(),this._data=null},t.type="candlestick",t}(ra),X9=function(){function e(){}return e}(),Z9=function(e){gt(t,e);function t(a){var r=e.call(this,a)||this;return r.type="normalCandlestickBox",r}return t.prototype.getDefaultShape=function(){return new X9},t.prototype.buildPath=function(a,r){var n=r.points;this.__simpleBox?(a.moveTo(n[4][0],n[4][1]),a.lineTo(n[6][0],n[6][1])):(a.moveTo(n[0][0],n[0][1]),a.lineTo(n[1][0],n[1][1]),a.lineTo(n[2][0],n[2][1]),a.lineTo(n[3][0],n[3][1]),a.closePath(),a.moveTo(n[4][0],n[4][1]),a.lineTo(n[5][0],n[5][1]),a.moveTo(n[6][0],n[6][1]),a.lineTo(n[7][0],n[7][1]))},t}(va);function Jp(e,t,a){var r=e.ends;return new Z9({shape:{points:a?K9(r,e):r},z2:100})}function vx(e,t){for(var a=!0,r=0;r<t.ends.length;r++)if(e.contain(t.ends[r][0],t.ends[r][1])){a=!1;break}return a}function Qp(e,t,a,r){var n=t.getItemModel(a);e.useStyle(t.getItemVisual(a,"style")),e.style.strokeNoScale=!0,e.__simpleBox=r,za(e,n);var i=t.getItemLayout(a).sign;G(e.states,function(s,l){var c=n.getModel(l),u=jy(i,c),h=Yy(i,c)||u,d=s.style||(s.style={});u&&(d.fill=u),h&&(d.stroke=h)});var o=n.getModel("emphasis");Qe(e,o.get("focus"),o.get("blurScope"),o.get("disabled"))}function K9(e,t){return Ot(e,function(a){return a=a.slice(),a[1]=t.initBaseline,a})}var J9=function(){function e(){}return e}(),tg=function(e){gt(t,e);function t(a){var r=e.call(this,a)||this;return r.type="largeCandlestickBox",r}return t.prototype.getDefaultShape=function(){return new J9},t.prototype.buildPath=function(a,r){for(var n=r.points,i=0;i<n.length;)if(this.__sign===n[i++]){var o=n[i++];a.moveTo(o,n[i++]),a.lineTo(o,n[i++])}else i+=3},t}(va);function mx(e,t,a,r){var n=e.getData(),i=n.getLayout("largePoints"),o=new tg({shape:{points:i},__sign:1,ignoreCoarsePointer:!0});t.add(o);var s=new tg({shape:{points:i},__sign:-1,ignoreCoarsePointer:!0});t.add(s);var l=new tg({shape:{points:i},__sign:0,ignoreCoarsePointer:!0});t.add(l),eg(1,o,e),eg(-1,s,e),eg(0,l,e),r&&(o.incremental=!0,s.incremental=!0),a&&a.push(o,s)}function eg(e,t,a,r){var n=Yy(e,a)||jy(e,a),i=a.getModel("itemStyle").getItemStyle(j9);t.useStyle(i),t.style.fill=null,t.style.stroke=n}var gk=function(e){gt(t,e);function t(){var a=e!==null&&e.apply(this,arguments)||this;return a.type=t.type,a.defaultValueDimensions=[{name:"open",defaultTooltip:!0},{name:"close",defaultTooltip:!0},{name:"lowest",defaultTooltip:!0},{name:"highest",defaultTooltip:!0}],a}return t.prototype.getShadowDim=function(){return"open"},t.prototype.brushSelector=function(a,r,n){var i=r.getItemLayout(a);return i&&n.rect(i.brushRect)},t.type="series.candlestick",t.dependencies=["xAxis","yAxis","grid"],t.defaultOption={z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,layout:null,clip:!0,itemStyle:{color:"#eb5454",color0:"#47b262",borderColor:"#eb5454",borderColor0:"#47b262",borderColorDoji:null,borderWidth:1},emphasis:{itemStyle:{borderWidth:2}},barMaxWidth:null,barMinWidth:null,barWidth:null,large:!0,largeThreshold:600,progressive:3e3,progressiveThreshold:1e4,progressiveChunkMode:"mod",animationEasing:"linear",animationDuration:300},t}(ha);$r(gk,dk,!0);function Q9(e){!e||!Nt(e.series)||G(e.series,function(t){na(t)&&t.type==="k"&&(t.type="candlestick")})}var t7={seriesType:"candlestick",plan:of(),reset:function(e){var t=e.coordinateSystem,a=e.getData(),r=e7(e,a),n=0,i=1,o=["x","y"],s=a.getDimensionIndex(a.mapDimension(o[n])),l=Ot(a.mapDimensionsAll(o[i]),a.getDimensionIndex,a),c=l[0],u=l[1],h=l[2],d=l[3];if(a.setLayout({candleWidth:r,isSimpleBox:r<=1.3}),s<0||l.length<4)return;return{progress:e.pipelineContext.large?p:f};function f(g,v){for(var _,y=v.getStore();(_=g.next())!=null;){var b=y.get(s,_),w=y.get(c,_),T=y.get(u,_),C=y.get(h,_),A=y.get(d,_),k=Math.min(w,T),L=Math.max(w,T),M=V(k,b),P=V(L,b),E=V(C,b),D=V(A,b),O=[];z(O,P,0),z(O,M,1),O.push(it(D),it(P),it(E),it(M));var B=v.getItemModel(_),R=!!B.get(["itemStyle","borderColorDoji"]);v.setItemLayout(_,{sign:yx(y,_,w,T,u,R),initBaseline:w>T?P[i]:M[i],ends:O,brushRect:W(C,A,b)})}function V(ot,xt){var j=[];return j[n]=xt,j[i]=ot,isNaN(xt)||isNaN(ot)?[NaN,NaN]:t.dataToPoint(j)}function z(ot,xt,j){var mt=xt.slice(),Tt=xt.slice();mt[n]=pp(mt[n]+r/2,1,!1),Tt[n]=pp(Tt[n]-r/2,1,!0),j?ot.push(mt,Tt):ot.push(Tt,mt)}function W(ot,xt,j){var mt=V(ot,j),Tt=V(xt,j);return mt[n]-=r/2,Tt[n]-=r/2,{x:mt[0],y:mt[1],width:r,height:Tt[1]-mt[1]}}function it(ot){return ot[n]=pp(ot[n],1),ot}}function p(g,v){for(var _=oo(g.count*4),y=0,b,w=[],T=[],C,A=v.getStore(),k=!!e.get(["itemStyle","borderColorDoji"]);(C=g.next())!=null;){var L=A.get(s,C),M=A.get(c,C),P=A.get(u,C),E=A.get(h,C),D=A.get(d,C);if(isNaN(L)||isNaN(E)||isNaN(D)){_[y++]=NaN,y+=3;continue}_[y++]=yx(A,C,M,P,u,k),w[n]=L,w[i]=E,b=t.dataToPoint(w,null,T),_[y++]=b?b[0]:NaN,_[y++]=b?b[1]:NaN,w[i]=D,b=t.dataToPoint(w,null,T),_[y++]=b?b[1]:NaN}v.setLayout("largePoints",_)}}};function yx(e,t,a,r,n,i){var o;return a>r?o=-1:a<r?o=1:o=i?0:t>0?e.get(n,t-1)<=r?1:-1:1,o}function e7(e,t){var a=e.getBaseAxis(),r,n=a.type==="category"?a.getBandWidth():(r=a.getExtent(),Math.abs(r[1]-r[0])/t.count()),i=Ft(sa(e.get("barMaxWidth"),n),n),o=Ft(sa(e.get("barMinWidth"),1),n),s=e.get("barWidth");return s!=null?Ft(s,n):Math.max(Math.min(n/2,i),o)}function a7(e){e.registerChartView(Y9),e.registerSeriesModel(gk),e.registerPreprocessor(Q9),e.registerVisual(U9),e.registerLayout(t7)}function _x(e,t){var a=t.rippleEffectColor||t.color;e.eachChild(function(r){r.attr({z:t.z,zlevel:t.zlevel,style:{stroke:t.brushType==="stroke"?a:null,fill:t.brushType==="fill"?a:null}})})}var r7=function(e){gt(t,e);function t(a,r){var n=e.call(this)||this,i=new uu(a,r),o=new ie;return n.add(i),n.add(o),n.updateData(a,r),n}return t.prototype.stopEffectAnimation=function(){this.childAt(1).removeAll()},t.prototype.startEffectAnimation=function(a){for(var r=a.symbolType,n=a.color,i=a.rippleNumber,o=this.childAt(1),s=0;s<i;s++){var l=ba(r,-1,-1,2,2,n);l.attr({style:{strokeNoScale:!0},z2:99,silent:!0,scaleX:.5,scaleY:.5});var c=-s/i*a.period+a.effectOffset;l.animate("",!0).when(a.period,{scaleX:a.rippleScale/2,scaleY:a.rippleScale/2}).delay(c).start(),l.animateStyle(!0).when(a.period,{opacity:0}).delay(c).start(),o.add(l)}_x(o,a)},t.prototype.updateEffectAnimation=function(a){for(var r=this._effectCfg,n=this.childAt(1),i=["symbolType","period","rippleScale","rippleNumber"],o=0;o<i.length;o++){var s=i[o];if(r[s]!==a[s]){this.stopEffectAnimation(),this.startEffectAnimation(a);return}}_x(n,a)},t.prototype.highlight=function(){Rs(this)},t.prototype.downplay=function(){Ps(this)},t.prototype.getSymbolType=function(){var a=this.childAt(0);return a&&a.getSymbolType()},t.prototype.updateData=function(a,r){var n=this,i=a.hostModel;this.childAt(0).updateData(a,r);var o=this.childAt(1),s=a.getItemModel(r),l=a.getItemVisual(r,"symbol"),c=il(a.getItemVisual(r,"symbolSize")),u=a.getItemVisual(r,"style"),h=u&&u.fill,d=s.getModel("emphasis");o.setScale(c),o.traverse(function(v){v.setStyle("fill",h)});var f=Oo(a.getItemVisual(r,"symbolOffset"),c);f&&(o.x=f[0],o.y=f[1]);var p=a.getItemVisual(r,"symbolRotate");o.rotation=(p||0)*Math.PI/180||0;var g={};g.showEffectOn=i.get("showEffectOn"),g.rippleScale=s.get(["rippleEffect","scale"]),g.brushType=s.get(["rippleEffect","brushType"]),g.period=s.get(["rippleEffect","period"])*1e3,g.effectOffset=r/a.count(),g.z=i.getShallow("z")||0,g.zlevel=i.getShallow("zlevel")||0,g.symbolType=l,g.color=h,g.rippleEffectColor=s.get(["rippleEffect","color"]),g.rippleNumber=s.get(["rippleEffect","number"]),g.showEffectOn==="render"?(this._effectCfg?this.updateEffectAnimation(g):this.startEffectAnimation(g),this._effectCfg=g):(this._effectCfg=null,this.stopEffectAnimation(),this.onHoverStateChange=function(v){v==="emphasis"?g.showEffectOn!=="render"&&n.startEffectAnimation(g):v==="normal"&&g.showEffectOn!=="render"&&n.stopEffectAnimation()}),this._effectCfg=g,Qe(this,d.get("focus"),d.get("blurScope"),d.get("disabled"))},t.prototype.fadeOut=function(a){a&&a()},t}(ie),n7=function(e){gt(t,e);function t(){var a=e!==null&&e.apply(this,arguments)||this;return a.type=t.type,a}return t.prototype.init=function(){this._symbolDraw=new hu(r7)},t.prototype.render=function(a,r,n){var i=a.getData(),o=this._symbolDraw;o.updateData(i,{clipShape:this._getClipShape(a)}),this.group.add(o.group)},t.prototype._getClipShape=function(a){var r=a.coordinateSystem,n=r&&r.getArea&&r.getArea();return a.get("clip",!0)?n:null},t.prototype.updateTransform=function(a,r,n){var i=a.getData();this.group.dirty();var o=fu("").reset(a,r,n);o.progress&&o.progress({start:0,end:i.count(),count:i.count()},i),this._symbolDraw.updateLayout()},t.prototype._updateGroupTransform=function(a){var r=a.coordinateSystem;r&&r.getRoamTransform&&(this.group.transform=A5(r.getRoamTransform()),this.group.decomposeTransform())},t.prototype.remove=function(a,r){this._symbolDraw&&this._symbolDraw.remove(!0)},t.type="effectScatter",t}(ra),i7=function(e){gt(t,e);function t(){var a=e!==null&&e.apply(this,arguments)||this;return a.type=t.type,a.hasSymbolVisual=!0,a}return t.prototype.getInitialData=function(a,r){return ai(null,this,{useEncodeDefaulter:!0})},t.prototype.brushSelector=function(a,r,n){return n.point(r.getItemLayout(a))},t.type="series.effectScatter",t.dependencies=["grid","polar"],t.defaultOption={coordinateSystem:"cartesian2d",z:2,legendHoverLink:!0,effectType:"ripple",progressive:0,showEffectOn:"render",clip:!0,rippleEffect:{period:4,scale:2.5,brushType:"fill",number:3},universalTransition:{divideShape:"clone"},symbolSize:10},t}(ha);function o7(e){e.registerChartView(n7),e.registerSeriesModel(i7),e.registerLayout(fu("effectScatter"))}var vk=function(e){gt(t,e);function t(a,r,n){var i=e.call(this)||this;return i.add(i.createLine(a,r,n)),i._updateEffectSymbol(a,r),i}return t.prototype.createLine=function(a,r,n){return new $y(a,r,n)},t.prototype._updateEffectSymbol=function(a,r){var n=a.getItemModel(r),i=n.getModel("effect"),o=i.get("symbolSize"),s=i.get("symbol");Nt(o)||(o=[o,o]);var l=a.getItemVisual(r,"style"),c=i.get("color")||l&&l.stroke,u=this.childAt(1);this._symbolType!==s&&(this.remove(u),u=ba(s,-.5,-.5,1,1,c),u.z2=100,u.culling=!0,this.add(u)),u&&(u.setStyle("shadowColor",c),u.setStyle(i.getItemStyle(["color"])),u.scaleX=o[0],u.scaleY=o[1],u.setColor(c),this._symbolType=s,this._symbolScale=o,this._updateEffectAnimation(a,i,r))},t.prototype._updateEffectAnimation=function(a,r,n){var i=this.childAt(1);if(i){var o=a.getItemLayout(n),s=r.get("period")*1e3,l=r.get("loop"),c=r.get("roundTrip"),u=r.get("constantSpeed"),h=Ma(r.get("delay"),function(f){return f/a.count()*s/3});if(i.ignore=!0,this._updateAnimationPoints(i,o),u>0&&(s=this._getLineLength(i)/u*1e3),s!==this._period||l!==this._loop||c!==this._roundTrip){i.stopAnimation();var d=void 0;Me(h)?d=h(n):d=h,i.__t>0&&(d=-s*i.__t),this._animateSymbol(i,s,d,l,c)}this._period=s,this._loop=l,this._roundTrip=c}},t.prototype._animateSymbol=function(a,r,n,i,o){if(r>0){a.__t=0;var s=this,l=a.animate("",i).when(o?r*2:r,{__t:o?2:1}).delay(n).during(function(){s._updateSymbolPosition(a)});i||l.done(function(){s.remove(a)}),l.start()}},t.prototype._getLineLength=function(a){return Yl(a.__p1,a.__cp1)+Yl(a.__cp1,a.__p2)},t.prototype._updateAnimationPoints=function(a,r){a.__p1=r[0],a.__p2=r[1],a.__cp1=r[2]||[(r[0][0]+r[1][0])/2,(r[0][1]+r[1][1])/2]},t.prototype.updateData=function(a,r,n){this.childAt(0).updateData(a,r,n),this._updateEffectSymbol(a,r)},t.prototype._updateSymbolPosition=function(a){var r=a.__p1,n=a.__p2,i=a.__cp1,o=a.__t<1?a.__t:2-a.__t,s=[a.x,a.y],l=s.slice(),c=fT,u=k5;s[0]=c(r[0],i[0],n[0],o),s[1]=c(r[1],i[1],n[1],o);var h=a.__t<1?u(r[0],i[0],n[0],o):u(n[0],i[0],r[0],1-o),d=a.__t<1?u(r[1],i[1],n[1],o):u(n[1],i[1],r[1],1-o);a.rotation=-Math.atan2(d,h)-Math.PI/2,(this._symbolType==="line"||this._symbolType==="rect"||this._symbolType==="roundRect")&&(a.__lastT!==void 0&&a.__lastT<a.__t?(a.scaleY=Yl(l,s)*1.05,o===1&&(s[0]=l[0]+(s[0]-l[0])/2,s[1]=l[1]+(s[1]-l[1])/2)):a.__lastT===1?a.scaleY=2*Yl(r,s):a.scaleY=this._symbolScale[1]),a.__lastT=a.__t,a.ignore=!1,a.x=s[0],a.y=s[1]},t.prototype.updateLayout=function(a,r){this.childAt(0).updateLayout(a,r);var n=a.getItemModel(r).getModel("effect");this._updateEffectAnimation(a,n,r)},t}(ie),mk=function(e){gt(t,e);function t(a,r,n){var i=e.call(this)||this;return i._createPolyline(a,r,n),i}return t.prototype._createPolyline=function(a,r,n){var i=a.getItemLayout(r),o=new Kr({shape:{points:i}});this.add(o),this._updateCommonStl(a,r,n)},t.prototype.updateData=function(a,r,n){var i=a.hostModel,o=this.childAt(0),s={shape:{points:a.getItemLayout(r)}};ze(o,s,i,r),this._updateCommonStl(a,r,n)},t.prototype._updateCommonStl=function(a,r,n){var i=this.childAt(0),o=a.getItemModel(r),s=n&&n.emphasisLineStyle,l=n&&n.focus,c=n&&n.blurScope,u=n&&n.emphasisDisabled;if(!n||a.hasItemOption){var h=o.getModel("emphasis");s=h.getModel("lineStyle").getLineStyle(),u=h.get("disabled"),l=h.get("focus"),c=h.get("blurScope")}i.useStyle(a.getItemVisual(r,"style")),i.style.fill=null,i.style.strokeNoScale=!0;var d=i.ensureState("emphasis");d.style=s,Qe(this,l,c,u)},t.prototype.updateLayout=function(a,r){var n=this.childAt(0);n.setShape("points",a.getItemLayout(r))},t}(ie),s7=function(e){gt(t,e);function t(){var a=e!==null&&e.apply(this,arguments)||this;return a._lastFrame=0,a._lastFramePercent=0,a}return t.prototype.createLine=function(a,r,n){return new mk(a,r,n)},t.prototype._updateAnimationPoints=function(a,r){this._points=r;for(var n=[0],i=0,o=1;o<r.length;o++){var s=r[o-1],l=r[o];i+=Yl(s,l),n.push(i)}if(i===0){this._length=0;return}for(var o=0;o<n.length;o++)n[o]/=i;this._offsets=n,this._length=i},t.prototype._getLineLength=function(){return this._length},t.prototype._updateSymbolPosition=function(a){var r=a.__t<1?a.__t:2-a.__t,n=this._points,i=this._offsets,o=n.length;if(i){var s=this._lastFrame,l;if(r<this._lastFramePercent){var c=Math.min(s+1,o-1);for(l=c;l>=0&&!(i[l]<=r);l--);l=Math.min(l,o-2)}else{for(l=s;l<o&&!(i[l]>r);l++);l=Math.min(l-1,o-2)}var u=(r-i[l])/(i[l+1]-i[l]),h=n[l],d=n[l+1];a.x=h[0]*(1-u)+u*d[0],a.y=h[1]*(1-u)+u*d[1];var f=a.__t<1?d[0]-h[0]:h[0]-d[0],p=a.__t<1?d[1]-h[1]:h[1]-d[1];a.rotation=-Math.atan2(p,f)-Math.PI/2,this._lastFrame=l,this._lastFramePercent=r,a.ignore=!1}},t}(vk),l7=function(){function e(){this.polyline=!1,this.curveness=0,this.segs=[]}return e}(),c7=function(e){gt(t,e);function t(a){var r=e.call(this,a)||this;return r._off=0,r.hoverDataIdx=-1,r}return t.prototype.reset=function(){this.notClear=!1,this._off=0},t.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},t.prototype.getDefaultShape=function(){return new l7},t.prototype.buildPath=function(a,r){var n=r.segs,i=r.curveness,o;if(r.polyline)for(o=this._off;o<n.length;){var s=n[o++];if(s>0){a.moveTo(n[o++],n[o++]);for(var l=1;l<s;l++)a.lineTo(n[o++],n[o++])}}else for(o=this._off;o<n.length;){var c=n[o++],u=n[o++],h=n[o++],d=n[o++];if(a.moveTo(c,u),i>0){var f=(c+h)/2-(u-d)*i,p=(u+d)/2-(h-c)*i;a.quadraticCurveTo(f,p,h,d)}else a.lineTo(h,d)}this.incremental&&(this._off=o,this.notClear=!0)},t.prototype.findDataIndex=function(a,r){var n=this.shape,i=n.segs,o=n.curveness,s=this.style.lineWidth;if(n.polyline)for(var l=0,c=0;c<i.length;){var u=i[c++];if(u>0)for(var h=i[c++],d=i[c++],f=1;f<u;f++){var p=i[c++],g=i[c++];if(i1(h,d,p,g,s,a,r))return l}l++}else for(var l=0,c=0;c<i.length;){var h=i[c++],d=i[c++],p=i[c++],g=i[c++];if(o>0){var v=(h+p)/2-(d-g)*o,_=(d+g)/2-(p-h)*o;if(D5(h,d,v,_,p,g,s,a,r))return l}else if(i1(h,d,p,g,s,a,r))return l;l++}return-1},t.prototype.contain=function(a,r){var n=this.transformCoordToLocal(a,r),i=this.getBoundingRect();if(a=n[0],r=n[1],i.contain(a,r)){var o=this.hoverDataIdx=this.findDataIndex(a,r);return o>=0}return this.hoverDataIdx=-1,!1},t.prototype.getBoundingRect=function(){var a=this._rect;if(!a){for(var r=this.shape,n=r.segs,i=1/0,o=1/0,s=-1/0,l=-1/0,c=0;c<n.length;){var u=n[c++],h=n[c++];i=Math.min(u,i),s=Math.max(u,s),o=Math.min(h,o),l=Math.max(h,l)}a=this._rect=new aa(i,o,s,l)}return a},t}(va),u7=function(){function e(){this.group=new ie}return e.prototype.updateData=function(t){this._clear();var a=this._create();a.setShape({segs:t.getLayout("linesPoints")}),this._setCommon(a,t)},e.prototype.incrementalPrepareUpdate=function(t){this.group.removeAll(),this._clear()},e.prototype.incrementalUpdate=function(t,a){var r=this._newAdded[0],n=a.getLayout("linesPoints"),i=r&&r.shape.segs;if(i&&i.length<2e4){var o=i.length,s=new Float32Array(o+n.length);s.set(i),s.set(n,o),r.setShape({segs:s})}else{this._newAdded=[];var l=this._create();l.incremental=!0,l.setShape({segs:n}),this._setCommon(l,a),l.__startIndex=t.start}},e.prototype.remove=function(){this._clear()},e.prototype.eachRendered=function(t){this._newAdded[0]&&t(this._newAdded[0])},e.prototype._create=function(){var t=new c7({cursor:"default",ignoreCoarsePointer:!0});return this._newAdded.push(t),this.group.add(t),t},e.prototype._setCommon=function(t,a,r){var n=a.hostModel;t.setShape({polyline:n.get("polyline"),curveness:n.get(["lineStyle","curveness"])}),t.useStyle(n.getModel("lineStyle").getLineStyle()),t.style.strokeNoScale=!0;var i=a.getVisual("style");i&&i.stroke&&t.setStyle("stroke",i.stroke),t.setStyle("fill",null);var o=Ae(t);o.seriesIndex=n.seriesIndex,t.on("mousemove",function(s){o.dataIndex=null;var l=t.hoverDataIdx;l>0&&(o.dataIndex=l+t.__startIndex)})},e.prototype._clear=function(){this._newAdded=[],this.group.removeAll()},e}(),yk={seriesType:"lines",plan:of(),reset:function(e){var t=e.coordinateSystem;if(t){var a=e.get("polyline"),r=e.pipelineContext.large;return{progress:function(n,i){var o=[];if(r){var s=void 0,l=n.end-n.start;if(a){for(var c=0,u=n.start;u<n.end;u++)c+=e.getLineCoordsCount(u);s=new Float32Array(l+c*2)}else s=new Float32Array(l*4);for(var h=0,d=[],u=n.start;u<n.end;u++){var f=e.getLineCoords(u,o);a&&(s[h++]=f);for(var p=0;p<f;p++)d=t.dataToPoint(o[p],!1,d),s[h++]=d[0],s[h++]=d[1]}i.setLayout("linesPoints",s)}else for(var u=n.start;u<n.end;u++){var g=i.getItemModel(u),f=e.getLineCoords(u,o),v=[];if(a)for(var _=0;_<f;_++)v.push(t.dataToPoint(o[_]));else{v[0]=t.dataToPoint(o[0]),v[1]=t.dataToPoint(o[1]);var y=g.get(["lineStyle","curveness"]);+y&&(v[2]=[(v[0][0]+v[1][0])/2-(v[0][1]-v[1][1])*y,(v[0][1]+v[1][1])/2-(v[1][0]-v[0][0])*y])}i.setItemLayout(u,v)}}}}}},h7=function(e){gt(t,e);function t(){var a=e!==null&&e.apply(this,arguments)||this;return a.type=t.type,a}return t.prototype.render=function(a,r,n){var i=a.getData(),o=this._updateLineDraw(i,a),s=a.get("zlevel"),l=a.get(["effect","trailLength"]),c=n.getZr(),u=c.painter.getType()==="svg";u||c.painter.getLayer(s).clear(!0),this._lastZlevel!=null&&!u&&c.configLayer(this._lastZlevel,{motionBlur:!1}),this._showEffect(a)&&l>0&&(u||c.configLayer(s,{motionBlur:!0,lastFrameAlpha:Math.max(Math.min(l/10+.9,1),0)})),o.updateData(i);var h=a.get("clip",!0)&&du(a.coordinateSystem,!1,a);h?this.group.setClipPath(h):this.group.removeClipPath(),this._lastZlevel=s,this._finished=!0},t.prototype.incrementalPrepareRender=function(a,r,n){var i=a.getData(),o=this._updateLineDraw(i,a);o.incrementalPrepareUpdate(i),this._clearLayer(n),this._finished=!1},t.prototype.incrementalRender=function(a,r,n){this._lineDraw.incrementalUpdate(a,r.getData()),this._finished=a.end===r.getData().count()},t.prototype.eachRendered=function(a){this._lineDraw&&this._lineDraw.eachRendered(a)},t.prototype.updateTransform=function(a,r,n){var i=a.getData(),o=a.pipelineContext;if(!this._finished||o.large||o.progressiveRender)return{update:!0};var s=yk.reset(a,r,n);s.progress&&s.progress({start:0,end:i.count(),count:i.count()},i),this._lineDraw.updateLayout(),this._clearLayer(n)},t.prototype._updateLineDraw=function(a,r){var n=this._lineDraw,i=this._showEffect(r),o=!!r.get("polyline"),s=r.pipelineContext,l=s.large;return(!n||i!==this._hasEffet||o!==this._isPolyline||l!==this._isLargeDraw)&&(n&&n.remove(),n=this._lineDraw=l?new u7:new Fy(o?i?s7:mk:i?vk:$y),this._hasEffet=i,this._isPolyline=o,this._isLargeDraw=l),this.group.add(n.group),n},t.prototype._showEffect=function(a){return!!a.get(["effect","show"])},t.prototype._clearLayer=function(a){var r=a.getZr(),n=r.painter.getType()==="svg";!n&&this._lastZlevel!=null&&r.painter.getLayer(this._lastZlevel).clear(!0)},t.prototype.remove=function(a,r){this._lineDraw&&this._lineDraw.remove(),this._lineDraw=null,this._clearLayer(r)},t.prototype.dispose=function(a,r){this.remove(a,r)},t.type="lines",t}(ra),d7=typeof Uint32Array>"u"?Array:Uint32Array,f7=typeof Float64Array>"u"?Array:Float64Array;function bx(e){var t=e.data;t&&t[0]&&t[0][0]&&t[0][0].coord&&(e.data=Ot(t,function(a){var r=[a[0].coord,a[1].coord],n={coords:r};return a[0].name&&(n.fromName=a[0].name),a[1].name&&(n.toName=a[1].name),dy([n,a[0],a[1]])}))}var p7=function(e){gt(t,e);function t(){var a=e!==null&&e.apply(this,arguments)||this;return a.type=t.type,a.visualStyleAccessPath="lineStyle",a.visualDrawType="stroke",a}return t.prototype.init=function(a){a.data=a.data||[],bx(a);var r=this._processFlatCoordsArray(a.data);this._flatCoords=r.flatCoords,this._flatCoordsOffset=r.flatCoordsOffset,r.flatCoords&&(a.data=new Float32Array(r.count)),e.prototype.init.apply(this,arguments)},t.prototype.mergeOption=function(a){if(bx(a),a.data){var r=this._processFlatCoordsArray(a.data);this._flatCoords=r.flatCoords,this._flatCoordsOffset=r.flatCoordsOffset,r.flatCoords&&(a.data=new Float32Array(r.count))}e.prototype.mergeOption.apply(this,arguments)},t.prototype.appendData=function(a){var r=this._processFlatCoordsArray(a.data);r.flatCoords&&(this._flatCoords?(this._flatCoords=Zh(this._flatCoords,r.flatCoords),this._flatCoordsOffset=Zh(this._flatCoordsOffset,r.flatCoordsOffset)):(this._flatCoords=r.flatCoords,this._flatCoordsOffset=r.flatCoordsOffset),a.data=new Float32Array(r.count)),this.getRawData().appendData(a.data)},t.prototype._getCoordsFromItemModel=function(a){var r=this.getData().getItemModel(a),n=r.option instanceof Array?r.option:r.getShallow("coords");return n},t.prototype.getLineCoordsCount=function(a){return this._flatCoordsOffset?this._flatCoordsOffset[a*2+1]:this._getCoordsFromItemModel(a).length},t.prototype.getLineCoords=function(a,r){if(this._flatCoordsOffset){for(var n=this._flatCoordsOffset[a*2],i=this._flatCoordsOffset[a*2+1],o=0;o<i;o++)r[o]=r[o]||[],r[o][0]=this._flatCoords[n+o*2],r[o][1]=this._flatCoords[n+o*2+1];return i}else{for(var s=this._getCoordsFromItemModel(a),o=0;o<s.length;o++)r[o]=r[o]||[],r[o][0]=s[o][0],r[o][1]=s[o][1];return s.length}},t.prototype._processFlatCoordsArray=function(a){var r=0;if(this._flatCoords&&(r=this._flatCoords.length),Ea(a[0])){for(var n=a.length,i=new d7(n),o=new f7(n),s=0,l=0,c=0,u=0;u<n;){c++;var h=a[u++];i[l++]=s+r,i[l++]=h;for(var d=0;d<h;d++){var f=a[u++],p=a[u++];o[s++]=f,o[s++]=p}}return{flatCoordsOffset:new Uint32Array(i.buffer,0,l),flatCoords:o,count:c}}return{flatCoordsOffset:null,flatCoords:null,count:a.length}},t.prototype.getInitialData=function(a,r){var n=new pr(["value"],this);return n.hasItemOption=!1,n.initData(a.data,[],function(i,o,s,l){if(i instanceof Array)return NaN;n.hasItemOption=!0;var c=i.value;if(c!=null)return c instanceof Array?c[l]:c}),n},t.prototype.formatTooltip=function(a,r,n){var i=this.getData(),o=i.getItemModel(a),s=o.get("name");if(s)return s;var l=o.get("fromName"),c=o.get("toName"),u=[];return l!=null&&u.push(l),c!=null&&u.push(c),Za("nameValue",{name:u.join(" > ")})},t.prototype.preventIncremental=function(){return!!this.get(["effect","show"])},t.prototype.getProgressive=function(){var a=this.option.progressive;return a??(this.option.large?1e4:this.get("progressive"))},t.prototype.getProgressiveThreshold=function(){var a=this.option.progressiveThreshold;return a??(this.option.large?2e4:this.get("progressiveThreshold"))},t.prototype.getZLevelKey=function(){var a=this.getModel("effect"),r=a.get("trailLength");return this.getData().count()>this.getProgressiveThreshold()?this.id:a.get("show")&&r>0?r+"":""},t.type="series.lines",t.dependencies=["grid","polar","geo","calendar"],t.defaultOption={coordinateSystem:"geo",z:2,legendHoverLink:!0,xAxisIndex:0,yAxisIndex:0,symbol:["none","none"],symbolSize:[10,10],geoIndex:0,effect:{show:!1,period:4,constantSpeed:0,symbol:"circle",symbolSize:3,loop:!0,trailLength:.2},large:!1,largeThreshold:2e3,polyline:!1,clip:!0,label:{show:!1,position:"end"},lineStyle:{opacity:.5}},t}(ha);function Uu(e){return e instanceof Array||(e=[e,e]),e}var g7={seriesType:"lines",reset:function(e){var t=Uu(e.get("symbol")),a=Uu(e.get("symbolSize")),r=e.getData();r.setVisual("fromSymbol",t&&t[0]),r.setVisual("toSymbol",t&&t[1]),r.setVisual("fromSymbolSize",a&&a[0]),r.setVisual("toSymbolSize",a&&a[1]);function n(i,o){var s=i.getItemModel(o),l=Uu(s.getShallow("symbol",!0)),c=Uu(s.getShallow("symbolSize",!0));l[0]&&i.setItemVisual(o,"fromSymbol",l[0]),l[1]&&i.setItemVisual(o,"toSymbol",l[1]),c[0]&&i.setItemVisual(o,"fromSymbolSize",c[0]),c[1]&&i.setItemVisual(o,"toSymbolSize",c[1])}return{dataEach:r.hasItemOption?n:null}}};function v7(e){e.registerChartView(h7),e.registerSeriesModel(p7),e.registerLayout(yk),e.registerVisual(g7)}var m7=256,y7=function(){function e(){this.blurSize=30,this.pointSize=20,this.maxOpacity=1,this.minOpacity=0,this._gradientPixels={inRange:null,outOfRange:null};var t=dv.createCanvas();this.canvas=t}return e.prototype.update=function(t,a,r,n,i,o){var s=this._getBrush(),l=this._getGradient(i,"inRange"),c=this._getGradient(i,"outOfRange"),u=this.pointSize+this.blurSize,h=this.canvas,d=h.getContext("2d"),f=t.length;h.width=a,h.height=r;for(var p=0;p<f;++p){var g=t[p],v=g[0],_=g[1],y=g[2],b=n(y);d.globalAlpha=b,d.drawImage(s,v-u,_-u)}if(!h.width||!h.height)return h;for(var w=d.getImageData(0,0,h.width,h.height),T=w.data,C=0,A=T.length,k=this.minOpacity,L=this.maxOpacity,M=L-k;C<A;){var b=T[C+3]/256,P=Math.floor(b*(m7-1))*4;if(b>0){var E=o(b)?l:c;b>0&&(b=b*M+k),T[C++]=E[P],T[C++]=E[P+1],T[C++]=E[P+2],T[C++]=E[P+3]*b*256}else C+=4}return d.putImageData(w,0,0),h},e.prototype._getBrush=function(){var t=this._brushCanvas||(this._brushCanvas=dv.createCanvas()),a=this.pointSize+this.blurSize,r=a*2;t.width=r,t.height=r;var n=t.getContext("2d");return n.clearRect(0,0,r,r),n.shadowOffsetX=r,n.shadowBlur=this.blurSize,n.shadowColor="#000",n.beginPath(),n.arc(-a,a,this.pointSize,0,Math.PI*2,!0),n.closePath(),n.fill(),t},e.prototype._getGradient=function(t,a){for(var r=this._gradientPixels,n=r[a]||(r[a]=new Uint8ClampedArray(256*4)),i=[0,0,0,0],o=0,s=0;s<256;s++)t[a](s/255,!0,i),n[o++]=i[0],n[o++]=i[1],n[o++]=i[2],n[o++]=i[3];return n},e}();function _7(e,t,a){var r=e[1]-e[0];t=Ot(t,function(o){return{interval:[(o.interval[0]-e[0])/r,(o.interval[1]-e[0])/r]}});var n=t.length,i=0;return function(o){var s;for(s=i;s<n;s++){var l=t[s].interval;if(l[0]<=o&&o<=l[1]){i=s;break}}if(s===n)for(s=i-1;s>=0;s--){var l=t[s].interval;if(l[0]<=o&&o<=l[1]){i=s;break}}return s>=0&&s<n&&a[s]}}function b7(e,t){var a=e[1]-e[0];return t=[(t[0]-e[0])/a,(t[1]-e[0])/a],function(r){return r>=t[0]&&r<=t[1]}}function xx(e){var t=e.dimensions;return t[0]==="lng"&&t[1]==="lat"}var x7=function(e){gt(t,e);function t(){var a=e!==null&&e.apply(this,arguments)||this;return a.type=t.type,a}return t.prototype.render=function(a,r,n){var i;r.eachComponent("visualMap",function(s){s.eachTargetSeries(function(l){l===a&&(i=s)})}),this._progressiveEls=null,this.group.removeAll();var o=a.coordinateSystem;o.type==="cartesian2d"||o.type==="calendar"?this._renderOnCartesianAndCalendar(a,n,0,a.getData().count()):xx(o)&&this._renderOnGeo(o,a,i,n)},t.prototype.incrementalPrepareRender=function(a,r,n){this.group.removeAll()},t.prototype.incrementalRender=function(a,r,n,i){var o=r.coordinateSystem;o&&(xx(o)?this.render(r,n,i):(this._progressiveEls=[],this._renderOnCartesianAndCalendar(r,i,a.start,a.end,!0)))},t.prototype.eachRendered=function(a){ol(this._progressiveEls||this.group,a)},t.prototype._renderOnCartesianAndCalendar=function(a,r,n,i,o){var s=a.coordinateSystem,l=Fo(s,"cartesian2d"),c,u,h,d;if(l){var f=s.getAxis("x"),p=s.getAxis("y");c=f.getBandWidth()+.5,u=p.getBandWidth()+.5,h=f.scale.getExtent(),d=p.scale.getExtent()}for(var g=this.group,v=a.getData(),_=a.getModel(["emphasis","itemStyle"]).getItemStyle(),y=a.getModel(["blur","itemStyle"]).getItemStyle(),b=a.getModel(["select","itemStyle"]).getItemStyle(),w=a.get(["itemStyle","borderRadius"]),T=Aa(a),C=a.getModel("emphasis"),A=C.get("focus"),k=C.get("blurScope"),L=C.get("disabled"),M=l?[v.mapDimension("x"),v.mapDimension("y"),v.mapDimension("value")]:[v.mapDimension("time"),v.mapDimension("value")],P=n;P<i;P++){var E=void 0,D=v.getItemVisual(P,"style");if(l){var O=v.get(M[0],P),B=v.get(M[1],P);if(isNaN(v.get(M[2],P))||isNaN(O)||isNaN(B)||O<h[0]||O>h[1]||B<d[0]||B>d[1])continue;var R=s.dataToPoint([O,B]);E=new Ge({shape:{x:R[0]-c/2,y:R[1]-u/2,width:c,height:u},style:D})}else{if(isNaN(v.get(M[1],P)))continue;E=new Ge({z2:1,shape:s.dataToRect([v.get(M[0],P)]).contentShape,style:D})}if(v.hasItemOption){var V=v.getItemModel(P),z=V.getModel("emphasis");_=z.getModel("itemStyle").getItemStyle(),y=V.getModel(["blur","itemStyle"]).getItemStyle(),b=V.getModel(["select","itemStyle"]).getItemStyle(),w=V.get(["itemStyle","borderRadius"]),A=z.get("focus"),k=z.get("blurScope"),L=z.get("disabled"),T=Aa(V)}E.shape.r=w;var W=a.getRawValue(P),it="-";W&&W[2]!=null&&(it=W[2]+""),Fa(E,T,{labelFetcher:a,labelDataIndex:P,defaultOpacity:D.opacity,defaultText:it}),E.ensureState("emphasis").style=_,E.ensureState("blur").style=y,E.ensureState("select").style=b,Qe(E,A,k,L),E.incremental=o,o&&(E.states.emphasis.hoverLayer=!0),g.add(E),v.setItemGraphicEl(P,E),this._progressiveEls&&this._progressiveEls.push(E)}},t.prototype._renderOnGeo=function(a,r,n,i){var o=n.targetVisuals.inRange,s=n.targetVisuals.outOfRange,l=r.getData(),c=this._hmLayer||this._hmLayer||new y7;c.blurSize=r.get("blurSize"),c.pointSize=r.get("pointSize"),c.minOpacity=r.get("minOpacity"),c.maxOpacity=r.get("maxOpacity");var u=a.getViewRect().clone(),h=a.getRoamTransform();u.applyTransform(h);var d=Math.max(u.x,0),f=Math.max(u.y,0),p=Math.min(u.width+u.x,i.getWidth()),g=Math.min(u.height+u.y,i.getHeight()),v=p-d,_=g-f,y=[l.mapDimension("lng"),l.mapDimension("lat"),l.mapDimension("value")],b=l.mapArray(y,function(A,k,L){var M=a.dataToPoint([A,k]);return M[0]-=d,M[1]-=f,M.push(L),M}),w=n.getExtent(),T=n.type==="visualMap.continuous"?b7(w,n.option.range):_7(w,n.getPieceList(),n.option.selected);c.update(b,v,_,o.color.getNormalizer(),{inRange:o.color.getColorMapper(),outOfRange:s.color.getColorMapper()},T);var C=new Zr({style:{width:v,height:_,x:d,y:f,image:c.canvas},silent:!0});this.group.add(C)},t.type="heatmap",t}(ra),S7=function(e){gt(t,e);function t(){var a=e!==null&&e.apply(this,arguments)||this;return a.type=t.type,a}return t.prototype.getInitialData=function(a,r){return ai(null,this,{generateCoord:"value"})},t.prototype.preventIncremental=function(){var a=pT.get(this.get("coordinateSystem"));if(a&&a.dimensions)return a.dimensions[0]==="lng"&&a.dimensions[1]==="lat"},t.type="series.heatmap",t.dependencies=["grid","geo","calendar"],t.defaultOption={coordinateSystem:"cartesian2d",z:2,geoIndex:0,blurSize:30,pointSize:20,maxOpacity:1,minOpacity:0,select:{itemStyle:{borderColor:"#212121"}}},t}(ha);function _k(e){e.registerChartView(x7),e.registerSeriesModel(S7)}var w7=["itemStyle","borderWidth"],Sx=[{xy:"x",wh:"width",index:0,posDesc:["left","right"]},{xy:"y",wh:"height",index:1,posDesc:["top","bottom"]}],ag=new ou,C7=function(e){gt(t,e);function t(){var a=e!==null&&e.apply(this,arguments)||this;return a.type=t.type,a}return t.prototype.render=function(a,r,n){var i=this.group,o=a.getData(),s=this._data,l=a.coordinateSystem,c=l.getBaseAxis(),u=c.isHorizontal(),h=l.master.getRect(),d={ecSize:{width:n.getWidth(),height:n.getHeight()},seriesModel:a,coordSys:l,coordSysExtent:[[h.x,h.x+h.width],[h.y,h.y+h.height]],isHorizontal:u,valueDim:Sx[+u],categoryDim:Sx[1-+u]};o.diff(s).add(function(p){if(o.hasValue(p)){var g=Cx(o,p),v=wx(o,p,g,d),_=Tx(o,d,v);o.setItemGraphicEl(p,_),i.add(_),kx(_,d,v)}}).update(function(p,g){var v=s.getItemGraphicEl(g);if(!o.hasValue(p)){i.remove(v);return}var _=Cx(o,p),y=wx(o,p,_,d),b=Tk(o,y);v&&b!==v.__pictorialShapeStr&&(i.remove(v),o.setItemGraphicEl(p,null),v=null),v?M7(v,d,y):v=Tx(o,d,y,!0),o.setItemGraphicEl(p,v),v.__pictorialSymbolMeta=y,i.add(v),kx(v,d,y)}).remove(function(p){var g=s.getItemGraphicEl(p);g&&Ax(s,p,g.__pictorialSymbolMeta.animationModel,g)}).execute();var f=a.get("clip",!0)?du(a.coordinateSystem,!1,a):null;return f?i.setClipPath(f):i.removeClipPath(),this._data=o,this.group},t.prototype.remove=function(a,r){var n=this.group,i=this._data;a.get("animation")?i&&i.eachItemGraphicEl(function(o){Ax(i,Ae(o).dataIndex,a,o)}):n.removeAll()},t.type="pictorialBar",t}(ra);function wx(e,t,a,r){var n=e.getItemLayout(t),i=a.get("symbolRepeat"),o=a.get("symbolClip"),s=a.get("symbolPosition")||"start",l=a.get("symbolRotate"),c=(l||0)*Math.PI/180||0,u=a.get("symbolPatternSize")||2,h=a.isAnimationEnabled(),d={dataIndex:t,layout:n,itemModel:a,symbolType:e.getItemVisual(t,"symbol")||"circle",style:e.getItemVisual(t,"style"),symbolClip:o,symbolRepeat:i,symbolRepeatDirection:a.get("symbolRepeatDirection"),symbolPatternSize:u,rotation:c,animationModel:h?a:null,hoverScale:h&&a.get(["emphasis","scale"]),z2:a.getShallow("z",!0)||0};T7(a,i,n,r,d),A7(e,t,n,i,o,d.boundingLength,d.pxSign,u,r,d),k7(a,d.symbolScale,c,r,d);var f=d.symbolSize,p=Oo(a.get("symbolOffset"),f);return D7(a,f,n,i,o,p,s,d.valueLineWidth,d.boundingLength,d.repeatCutLength,r,d),d}function T7(e,t,a,r,n){var i=r.valueDim,o=e.get("symbolBoundingData"),s=r.coordSys.getOtherAxis(r.coordSys.getBaseAxis()),l=s.toGlobalCoord(s.dataToCoord(0)),c=1-+(a[i.wh]<=0),u;if(Nt(o)){var h=[rg(s,o[0])-l,rg(s,o[1])-l];h[1]<h[0]&&h.reverse(),u=h[c]}else o!=null?u=rg(s,o)-l:t?u=r.coordSysExtent[i.index][c]-l:u=a[i.wh];n.boundingLength=u,t&&(n.repeatCutLength=a[i.wh]);var d=i.xy==="x",f=s.inverse;n.pxSign=d&&!f||!d&&f?u>=0?1:-1:u>0?1:-1}function rg(e,t){return e.toGlobalCoord(e.dataToCoord(e.scale.parse(t)))}function A7(e,t,a,r,n,i,o,s,l,c){var u=l.valueDim,h=l.categoryDim,d=Math.abs(a[h.wh]),f=e.getItemVisual(t,"symbolSize"),p;Nt(f)?p=f.slice():f==null?p=["100%","100%"]:p=[f,f],p[h.index]=Ft(p[h.index],d),p[u.index]=Ft(p[u.index],r?d:Math.abs(i)),c.symbolSize=p;var g=c.symbolScale=[p[0]/s,p[1]/s];g[u.index]*=(l.isHorizontal?-1:1)*o}function k7(e,t,a,r,n){var i=e.get(w7)||0;i&&(ag.attr({scaleX:t[0],scaleY:t[1],rotation:a}),ag.updateTransform(),i/=ag.getLineScale(),i*=t[r.valueDim.index]),n.valueLineWidth=i||0}function D7(e,t,a,r,n,i,o,s,l,c,u,h){var d=u.categoryDim,f=u.valueDim,p=h.pxSign,g=Math.max(t[f.index]+s,0),v=g;if(r){var _=Math.abs(l),y=Ma(e.get("symbolMargin"),"15%")+"",b=!1;y.lastIndexOf("!")===y.length-1&&(b=!0,y=y.slice(0,y.length-1));var w=Ft(y,t[f.index]),T=Math.max(g+w*2,0),C=b?0:w*2,A=L5(r),k=A?r:Dx((_+C)/T),L=_-k*g;w=L/2/(b?k:Math.max(k-1,1)),T=g+w*2,C=b?0:w*2,!A&&r!=="fixed"&&(k=c?Dx((Math.abs(c)+C)/T):0),v=k*T-C,h.repeatTimes=k,h.symbolMargin=w}var M=p*(v/2),P=h.pathPosition=[];P[d.index]=a[d.wh]/2,P[f.index]=o==="start"?M:o==="end"?l-M:l/2,i&&(P[0]+=i[0],P[1]+=i[1]);var E=h.bundlePosition=[];E[d.index]=a[d.xy],E[f.index]=a[f.xy];var D=h.barRectShape=Vt({},a);D[f.wh]=p*Math.max(Math.abs(a[f.wh]),Math.abs(P[f.index]+M)),D[d.wh]=a[d.wh];var O=h.clipShape={};O[d.xy]=-a[d.xy],O[d.wh]=u.ecSize[d.wh],O[f.xy]=0,O[f.wh]=a[f.wh]}function bk(e){var t=e.symbolPatternSize,a=ba(e.symbolType,-t/2,-t/2,t,t);return a.attr({culling:!0}),a.type!=="image"&&a.setStyle({strokeNoScale:!0}),a}function xk(e,t,a,r){var n=e.__pictorialBundle,i=a.symbolSize,o=a.valueLineWidth,s=a.pathPosition,l=t.valueDim,c=a.repeatTimes||0,u=0,h=i[t.valueDim.index]+o+a.symbolMargin*2;for(Xy(e,function(g){g.__pictorialAnimationIndex=u,g.__pictorialRepeatTimes=c,u<c?bs(g,null,p(u),a,r):bs(g,null,{scaleX:0,scaleY:0},a,r,function(){n.remove(g)}),u++});u<c;u++){var d=bk(a);d.__pictorialAnimationIndex=u,d.__pictorialRepeatTimes=c,n.add(d);var f=p(u);bs(d,{x:f.x,y:f.y,scaleX:0,scaleY:0},{scaleX:f.scaleX,scaleY:f.scaleY,rotation:f.rotation},a,r)}function p(g){var v=s.slice(),_=a.pxSign,y=g;return(a.symbolRepeatDirection==="start"?_>0:_<0)&&(y=c-1-g),v[l.index]=h*(y-c/2+.5)+s[l.index],{x:v[0],y:v[1],scaleX:a.symbolScale[0],scaleY:a.symbolScale[1],rotation:a.rotation}}}function Sk(e,t,a,r){var n=e.__pictorialBundle,i=e.__pictorialMainPath;i?bs(i,null,{x:a.pathPosition[0],y:a.pathPosition[1],scaleX:a.symbolScale[0],scaleY:a.symbolScale[1],rotation:a.rotation},a,r):(i=e.__pictorialMainPath=bk(a),n.add(i),bs(i,{x:a.pathPosition[0],y:a.pathPosition[1],scaleX:0,scaleY:0,rotation:a.rotation},{scaleX:a.symbolScale[0],scaleY:a.symbolScale[1]},a,r))}function wk(e,t,a){var r=Vt({},t.barRectShape),n=e.__pictorialBarRect;n?bs(n,null,{shape:r},t,a):(n=e.__pictorialBarRect=new Ge({z2:2,shape:r,silent:!0,style:{stroke:"transparent",fill:"transparent",lineWidth:0}}),n.disableMorphing=!0,e.add(n))}function Ck(e,t,a,r){if(a.symbolClip){var n=e.__pictorialClipPath,i=Vt({},a.clipShape),o=t.valueDim,s=a.animationModel,l=a.dataIndex;if(n)ze(n,{shape:i},s,l);else{i[o.wh]=0,n=new Ge({shape:i}),e.__pictorialBundle.setClipPath(n),e.__pictorialClipPath=n;var c={};c[o.wh]=a.clipShape[o.wh],No[r?"updateProps":"initProps"](n,{shape:c},s,l)}}}function Cx(e,t){var a=e.getItemModel(t);return a.getAnimationDelayParams=L7,a.isAnimationEnabled=I7,a}function L7(e){return{index:e.__pictorialAnimationIndex,count:e.__pictorialRepeatTimes}}function I7(){return this.parentModel.isAnimationEnabled()&&!!this.getShallow("animation")}function Tx(e,t,a,r){var n=new ie,i=new ie;return n.add(i),n.__pictorialBundle=i,i.x=a.bundlePosition[0],i.y=a.bundlePosition[1],a.symbolRepeat?xk(n,t,a):Sk(n,t,a),wk(n,a,r),Ck(n,t,a,r),n.__pictorialShapeStr=Tk(e,a),n.__pictorialSymbolMeta=a,n}function M7(e,t,a){var r=a.animationModel,n=a.dataIndex,i=e.__pictorialBundle;ze(i,{x:a.bundlePosition[0],y:a.bundlePosition[1]},r,n),a.symbolRepeat?xk(e,t,a,!0):Sk(e,t,a,!0),wk(e,a,!0),Ck(e,t,a,!0)}function Ax(e,t,a,r){var n=r.__pictorialBarRect;n&&n.removeTextContent();var i=[];Xy(r,function(o){i.push(o)}),r.__pictorialMainPath&&i.push(r.__pictorialMainPath),r.__pictorialClipPath&&(a=null),G(i,function(o){Bs(o,{scaleX:0,scaleY:0},a,t,function(){r.parent&&r.parent.remove(r)})}),e.setItemGraphicEl(t,null)}function Tk(e,t){return[e.getItemVisual(t.dataIndex,"symbol")||"none",!!t.symbolRepeat,!!t.symbolClip].join(":")}function Xy(e,t,a){G(e.__pictorialBundle.children(),function(r){r!==e.__pictorialBarRect&&t.call(a,r)})}function bs(e,t,a,r,n,i){t&&e.attr(t),r.symbolClip&&!n?a&&e.attr(a):a&&No[n?"updateProps":"initProps"](e,a,r.animationModel,r.dataIndex,i)}function kx(e,t,a){var r=a.dataIndex,n=a.itemModel,i=n.getModel("emphasis"),o=i.getModel("itemStyle").getItemStyle(),s=n.getModel(["blur","itemStyle"]).getItemStyle(),l=n.getModel(["select","itemStyle"]).getItemStyle(),c=n.getShallow("cursor"),u=i.get("focus"),h=i.get("blurScope"),d=i.get("scale");Xy(e,function(g){if(g instanceof Zr){var v=g.style;g.useStyle(Vt({image:v.image,x:v.x,y:v.y,width:v.width,height:v.height},a.style))}else g.useStyle(a.style);var _=g.ensureState("emphasis");_.style=o,d&&(_.scaleX=g.scaleX*1.1,_.scaleY=g.scaleY*1.1),g.ensureState("blur").style=s,g.ensureState("select").style=l,c&&(g.cursor=c),g.z2=a.z2});var f=t.valueDim.posDesc[+(a.boundingLength>0)],p=e.__pictorialBarRect;p.ignoreClip=!0,Fa(p,Aa(n),{labelFetcher:t.seriesModel,labelDataIndex:r,defaultText:Gs(t.seriesModel.getData(),r),inheritColor:a.style.fill,defaultOpacity:a.style.opacity,defaultOutsidePosition:f}),Qe(e,u,h,i.get("disabled"))}function Dx(e){var t=Math.round(e);return Math.abs(e-t)<1e-4?t:Math.ceil(e)}var E7=function(e){gt(t,e);function t(){var a=e!==null&&e.apply(this,arguments)||this;return a.type=t.type,a.hasSymbolVisual=!0,a.defaultSymbol="roundRect",a}return t.prototype.getInitialData=function(a){return a.stack=null,e.prototype.getInitialData.apply(this,arguments)},t.type="series.pictorialBar",t.dependencies=["grid"],t.defaultOption=zi(Pc.defaultOption,{symbol:"circle",symbolSize:null,symbolRotate:null,symbolPosition:null,symbolOffset:null,symbolMargin:null,symbolRepeat:!1,symbolRepeatDirection:"end",symbolClip:!1,symbolBoundingData:null,symbolPatternSize:400,barGap:"-100%",clip:!1,progressive:0,emphasis:{scale:!1},select:{itemStyle:{borderColor:"#212121"}}}),t}(Pc);function R7(e){e.registerChartView(C7),e.registerSeriesModel(E7),e.registerLayout(e.PRIORITY.VISUAL.LAYOUT,pe(XC,"pictorialBar")),e.registerLayout(e.PRIORITY.VISUAL.PROGRESSIVE_LAYOUT,ZC("pictorialBar"))}var P7=function(e){gt(t,e);function t(){var a=e!==null&&e.apply(this,arguments)||this;return a.type=t.type,a._layers=[],a}return t.prototype.render=function(a,r,n){var i=a.getData(),o=this,s=this.group,l=a.getLayerSeries(),c=i.getLayout("layoutInfo"),u=c.rect,h=c.boundaryGap;s.x=0,s.y=u.y+h[0];function d(v){return v.name}var f=new Ri(this._layersSeries||[],l,d,d),p=[];f.add(Ut(g,this,"add")).update(Ut(g,this,"update")).remove(Ut(g,this,"remove")).execute();function g(v,_,y){var b=o._layers;if(v==="remove"){s.remove(b[_]);return}for(var w=[],T=[],C,A=l[_].indices,k=0;k<A.length;k++){var L=i.getItemLayout(A[k]),M=L.x,P=L.y0,E=L.y;w.push(M,P),T.push(M,P+E),C=i.getItemVisual(A[k],"style")}var D,O=i.getItemLayout(A[0]),B=a.getModel("label"),R=B.get("margin"),V=a.getModel("emphasis");if(v==="add"){var z=p[_]=new ie;D=new ZT({shape:{points:w,stackedOnPoints:T,smooth:.4,stackedOnSmooth:.4,smoothConstraint:!1},z2:0}),z.add(D),s.add(z),a.isAnimationEnabled()&&D.setClipPath(B7(D.getBoundingRect(),a,function(){D.removeClipPath()}))}else{var z=b[y];D=z.childAt(0),s.add(z),p[_]=z,ze(D,{shape:{points:w,stackedOnPoints:T}},a),Yr(D)}Fa(D,Aa(a),{labelDataIndex:A[k-1],defaultText:i.getName(A[k-1]),inheritColor:C.fill},{normal:{verticalAlign:"middle"}}),D.setTextConfig({position:null,local:!0});var W=D.getTextContent();W&&(W.x=O.x-R,W.y=O.y0+O.y/2),D.useStyle(C),i.setItemGraphicEl(_,D),za(D,a),Qe(D,V.get("focus"),V.get("blurScope"),V.get("disabled"))}this._layersSeries=l,this._layers=p},t.type="themeRiver",t}(ra);function B7(e,t,a){var r=new Ge({shape:{x:e.x-10,y:e.y-10,width:0,height:e.height+20}});return la(r,{shape:{x:e.x-50,width:e.width+100,height:e.height+20}},t,a),r}var ng=2,O7=function(e){gt(t,e);function t(){var a=e!==null&&e.apply(this,arguments)||this;return a.type=t.type,a}return t.prototype.init=function(a){e.prototype.init.apply(this,arguments),this.legendVisualProvider=new gu(Ut(this.getData,this),Ut(this.getRawData,this))},t.prototype.fixData=function(a){var r=a.length,n={},i=uv(a,function(d){return n.hasOwnProperty(d[0]+"")||(n[d[0]+""]=-1),d[2]}),o=[];i.buckets.each(function(d,f){o.push({name:f,dataList:d})});for(var s=o.length,l=0;l<s;++l){for(var c=o[l].name,u=0;u<o[l].dataList.length;++u){var h=o[l].dataList[u][0]+"";n[h]=l}for(var h in n)n.hasOwnProperty(h)&&n[h]!==l&&(n[h]=l,a[r]=[h,0,c],r++)}return a},t.prototype.getInitialData=function(a,r){for(var n=this.getReferringComponents("singleAxis",yr).models[0],i=n.get("type"),o=Va(a.data,function(p){return p[2]!==void 0}),s=this.fixData(o||[]),l=[],c=this.nameMap=ke(),u=0,h=0;h<s.length;++h)l.push(s[h][ng]),c.get(s[h][ng])||(c.set(s[h][ng],u),u++);var d=sf(s,{coordDimensions:["single"],dimensionsDefine:[{name:"time",type:hv(i)},{name:"value",type:"float"},{name:"name",type:"ordinal"}],encodeDefine:{single:0,value:1,itemName:2}}).dimensions,f=new pr(d,this);return f.initData(s),f},t.prototype.getLayerSeries=function(){for(var a=this.getData(),r=a.count(),n=[],i=0;i<r;++i)n[i]=i;var o=a.mapDimension("single"),s=uv(n,function(c){return a.get("name",c)}),l=[];return s.buckets.each(function(c,u){c.sort(function(h,d){return a.get(o,h)-a.get(o,d)}),l.push({name:u,indices:c})}),l},t.prototype.getAxisTooltipData=function(a,r,n){Nt(a)||(a=a?[a]:[]);for(var i=this.getData(),o=this.getLayerSeries(),s=[],l=o.length,c,u=0;u<l;++u){for(var h=Number.MAX_VALUE,d=-1,f=o[u].indices.length,p=0;p<f;++p){var g=i.get(a[0],o[u].indices[p]),v=Math.abs(g-r);v<=h&&(c=g,h=v,d=o[u].indices[p])}s.push(d)}return{dataIndices:s,nestestValue:c}},t.prototype.formatTooltip=function(a,r,n){var i=this.getData(),o=i.getName(a),s=i.get(i.mapDimension("value"),a);return Za("nameValue",{name:o,value:s})},t.type="series.themeRiver",t.dependencies=["singleAxis"],t.defaultOption={z:2,colorBy:"data",coordinateSystem:"singleAxis",boundaryGap:["10%","10%"],singleAxisIndex:0,animationEasing:"linear",label:{margin:4,show:!0,position:"left",fontSize:11},emphasis:{label:{show:!0}}},t}(ha);function N7(e,t){e.eachSeriesByType("themeRiver",function(a){var r=a.getData(),n=a.coordinateSystem,i={},o=n.getRect();i.rect=o;var s=a.get("boundaryGap"),l=n.getAxis();if(i.boundaryGap=s,l.orient==="horizontal"){s[0]=Ft(s[0],o.height),s[1]=Ft(s[1],o.height);var c=o.height-s[0]-s[1];Lx(r,a,c)}else{s[0]=Ft(s[0],o.width),s[1]=Ft(s[1],o.width);var u=o.width-s[0]-s[1];Lx(r,a,u)}r.setLayout("layoutInfo",i)})}function Lx(e,t,a){if(e.count())for(var r=t.coordinateSystem,n=t.getLayerSeries(),i=e.mapDimension("single"),o=e.mapDimension("value"),s=Ot(n,function(v){return Ot(v.indices,function(_){var y=r.dataToPoint(e.get(i,_));return y[1]=e.get(o,_),y})}),l=$7(s),c=l.y0,u=a/l.max,h=n.length,d=n[0].indices.length,f,p=0;p<d;++p){f=c[p]*u,e.setItemLayout(n[0].indices[p],{layerIndex:0,x:s[0][p][0],y0:f,y:s[0][p][1]*u});for(var g=1;g<h;++g)f+=s[g-1][p][1]*u,e.setItemLayout(n[g].indices[p],{layerIndex:g,x:s[g][p][0],y0:f,y:s[g][p][1]*u})}}function $7(e){for(var t=e.length,a=e[0].length,r=[],n=[],i=0,o=0;o<a;++o){for(var s=0,l=0;l<t;++l)s+=e[l][o][1];s>i&&(i=s),r.push(s)}for(var c=0;c<a;++c)n[c]=(i-r[c])/2;i=0;for(var u=0;u<a;++u){var h=r[u]+n[u];h>i&&(i=h)}return{y0:n,max:i}}function F7(e){e.registerChartView(P7),e.registerSeriesModel(O7),e.registerLayout(N7),e.registerProcessor(pu("themeRiver"))}var z7=2,V7=4,Ix=function(e){gt(t,e);function t(a,r,n,i){var o=e.call(this)||this;o.z2=z7,o.textConfig={inside:!0},Ae(o).seriesIndex=r.seriesIndex;var s=new Oe({z2:V7,silent:a.getModel().get(["label","silent"])});return o.setTextContent(s),o.updateData(!0,a,r,n,i),o}return t.prototype.updateData=function(a,r,n,i,o){this.node=r,r.piece=this,n=n||this._seriesModel,i=i||this._ecModel;var s=this;Ae(s).dataIndex=r.dataIndex;var l=r.getModel(),c=l.getModel("emphasis"),u=r.getLayout(),h=Vt({},u);h.label=null;var d=r.getVisual("style");d.lineJoin="bevel";var f=r.getVisual("decal");f&&(d.decal=ff(f,o));var p=so(l.getModel("itemStyle"),h,!0);Vt(h,p),G(Tc,function(y){var b=s.ensureState(y),w=l.getModel([y,"itemStyle"]);b.style=w.getItemStyle();var T=so(w,h);T&&(b.shape=T)}),a?(s.setShape(h),s.shape.r=u.r0,la(s,{shape:{r:u.r}},n,r.dataIndex)):(ze(s,{shape:h},n),Yr(s)),s.useStyle(d),this._updateLabel(n);var g=l.getShallow("cursor");g&&s.attr("cursor",g),this._seriesModel=n||this._seriesModel,this._ecModel=i||this._ecModel;var v=c.get("focus"),_=v==="relative"?Zh(r.getAncestorsIndices(),r.getDescendantIndices()):v==="ancestor"?r.getAncestorsIndices():v==="descendant"?r.getDescendantIndices():v;Qe(this,_,c.get("blurScope"),c.get("disabled"))},t.prototype._updateLabel=function(a){var r=this,n=this.node.getModel(),i=n.getModel("label"),o=this.node.getLayout(),s=o.endAngle-o.startAngle,l=(o.startAngle+o.endAngle)/2,c=Math.cos(l),u=Math.sin(l),h=this,d=h.getTextContent(),f=this.node.dataIndex,p=i.get("minAngle")/180*Math.PI,g=i.get("show")&&!(p!=null&&Math.abs(s)<p);d.ignore=!g,G(I5,function(_){var y=_==="normal"?n.getModel("label"):n.getModel([_,"label"]),b=_==="normal",w=b?d:d.ensureState(_),T=a.getFormattedLabel(f,_);b&&(T=T||r.node.name),w.style=Ke(y,{},null,_!=="normal",!0),T&&(w.style.text=T);var C=y.get("show");C!=null&&!b&&(w.ignore=!C);var A=v(y,"position"),k=b?h:h.states[_],L=k.style.fill;k.textConfig={outsideFill:y.get("color")==="inherit"?L:null,inside:A!=="outside"};var M,P=v(y,"distance")||0,E=v(y,"align"),D=v(y,"rotate"),O=Math.PI*.5,B=Math.PI*1.5,R=Eu(D==="tangential"?Math.PI/2-l:l),V=R>O&&!kc(R-O)&&R<B;A==="outside"?(M=o.r+P,E=V?"right":"left"):!E||E==="center"?(s===2*Math.PI&&o.r0===0?M=0:M=(o.r+o.r0)/2,E="center"):E==="left"?(M=o.r0+P,E=V?"right":"left"):E==="right"&&(M=o.r-P,E=V?"left":"right"),w.style.align=E,w.style.verticalAlign=v(y,"verticalAlign")||"middle",w.x=M*c+o.cx,w.y=M*u+o.cy;var z=0;D==="radial"?z=Eu(-l)+(V?Math.PI:0):D==="tangential"?z=Eu(Math.PI/2-l)+(V?Math.PI:0):Ea(D)&&(z=D*Math.PI/180),w.rotation=Eu(z)});function v(_,y){var b=_.get(y);return b??i.get(y)}d.dirtyStyle()},t}(Pr),Fv="sunburstRootToNode",Mx="sunburstHighlight",G7="sunburstUnhighlight";function H7(e){e.registerAction({type:Fv,update:"updateView"},function(t,a){a.eachComponent({mainType:"series",subType:"sunburst",query:t},r);function r(n,i){var o=Oc(t,[Fv],n);if(o){var s=n.getViewRoot();s&&(t.direction=Ry(s,o.node)?"rollUp":"drillDown"),n.resetViewRoot(o.node)}}}),e.registerAction({type:Mx,update:"none"},function(t,a,r){t=Vt({},t),a.eachComponent({mainType:"series",subType:"sunburst",query:t},n);function n(i){var o=Oc(t,[Mx],i);o&&(t.dataIndex=o.node.dataIndex)}r.dispatchAction(Vt(t,{type:"highlight"}))}),e.registerAction({type:G7,update:"updateView"},function(t,a,r){t=Vt({},t),r.dispatchAction(Vt(t,{type:"downplay"}))})}var W7=function(e){gt(t,e);function t(){var a=e!==null&&e.apply(this,arguments)||this;return a.type=t.type,a}return t.prototype.render=function(a,r,n,i){var o=this;this.seriesModel=a,this.api=n,this.ecModel=r;var s=a.getData(),l=s.tree.root,c=a.getViewRoot(),u=this.group,h=a.get("renderLabelForZeroData"),d=[];c.eachNode(function(y){d.push(y)});var f=this._oldChildren||[];p(d,f),_(l,c),this._initEvents(),this._oldChildren=d;function p(y,b){if(y.length===0&&b.length===0)return;new Ri(b,y,w,w).add(T).update(T).remove(pe(T,null)).execute();function w(C){return C.getId()}function T(C,A){var k=C==null?null:y[C],L=A==null?null:b[A];g(k,L)}}function g(y,b){if(!h&&y&&!y.getValue()&&(y=null),y!==l&&b!==l){if(b&&b.piece)y?(b.piece.updateData(!1,y,a,r,n),s.setItemGraphicEl(y.dataIndex,b.piece)):v(b);else if(y){var w=new Ix(y,a,r,n);u.add(w),s.setItemGraphicEl(y.dataIndex,w)}}}function v(y){y&&y.piece&&(u.remove(y.piece),y.piece=null)}function _(y,b){b.depth>0?(o.virtualPiece?o.virtualPiece.updateData(!1,y,a,r,n):(o.virtualPiece=new Ix(y,a,r,n),u.add(o.virtualPiece)),b.piece.off("click"),o.virtualPiece.on("click",function(w){o._rootToNode(b.parentNode)})):o.virtualPiece&&(u.remove(o.virtualPiece),o.virtualPiece=null)}},t.prototype._initEvents=function(){var a=this;this.group.off("click"),this.group.on("click",function(r){var n=!1,i=a.seriesModel.getViewRoot();i.eachNode(function(o){if(!n&&o.piece&&o.piece===r.target){var s=o.getModel().get("nodeClick");if(s==="rootToNode")a._rootToNode(o);else if(s==="link"){var l=o.getModel(),c=l.get("link");if(c){var u=l.get("target",!0)||"_blank";Kh(c,u)}}n=!0}})})},t.prototype._rootToNode=function(a){a!==this.seriesModel.getViewRoot()&&this.api.dispatchAction({type:Fv,from:this.uid,seriesId:this.seriesModel.id,targetNode:a})},t.prototype.containPoint=function(a,r){var n=r.getData(),i=n.getItemLayout(0);if(i){var o=a[0]-i.cx,s=a[1]-i.cy,l=Math.sqrt(o*o+s*s);return l<=i.r&&l>=i.r0}},t.type="sunburst",t}(ra),q7=function(e){gt(t,e);function t(){var a=e!==null&&e.apply(this,arguments)||this;return a.type=t.type,a.ignoreStyleOnData=!0,a}return t.prototype.getInitialData=function(a,r){var n={name:a.name,children:a.data};Ak(n);var i=this._levelModels=Ot(a.levels||[],function(l){return new _a(l,this,r)},this),o=Ey.createTree(n,this,s);function s(l){l.wrapMethod("getItemModel",function(c,u){var h=o.getNodeByDataIndex(u),d=i[h.depth];return d&&(c.parentModel=d),c})}return o.data},t.prototype.optionUpdated=function(){this.resetViewRoot()},t.prototype.getDataParams=function(a){var r=e.prototype.getDataParams.apply(this,arguments),n=this.getData().tree.getNodeByDataIndex(a);return r.treePathInfo=Cf(n,this),r},t.prototype.getLevelModel=function(a){return this._levelModels&&this._levelModels[a.depth]},t.prototype.getViewRoot=function(){return this._viewRoot},t.prototype.resetViewRoot=function(a){a?this._viewRoot=a:a=this._viewRoot;var r=this.getRawData().tree.root;(!a||a!==r&&!r.contains(a))&&(this._viewRoot=r)},t.prototype.enableAriaDecal=function(){IA(this)},t.type="series.sunburst",t.defaultOption={z:2,center:["50%","50%"],radius:[0,"75%"],clockwise:!0,startAngle:90,minAngle:0,stillShowZeroSum:!0,nodeClick:"rootToNode",renderLabelForZeroData:!1,label:{rotate:"radial",show:!0,opacity:1,align:"center",position:"inside",distance:5,silent:!0},itemStyle:{borderWidth:1,borderColor:"white",borderType:"solid",shadowBlur:0,shadowColor:"rgba(0, 0, 0, 0.2)",shadowOffsetX:0,shadowOffsetY:0,opacity:1},emphasis:{focus:"descendant"},blur:{itemStyle:{opacity:.2},label:{opacity:.1}},animationType:"expansion",animationDuration:1e3,animationDurationUpdate:500,data:[],sort:"desc"},t}(ha);function Ak(e){var t=0;G(e.children,function(r){Ak(r);var n=r.value;Nt(n)&&(n=n[0]),t+=n});var a=e.value;Nt(a)&&(a=a[0]),(a==null||isNaN(a))&&(a=t),a<0&&(a=0),Nt(e.value)?e.value[0]=a:e.value=a}var Ex=Math.PI/180;function U7(e,t,a){t.eachSeriesByType(e,function(r){var n=r.get("center"),i=r.get("radius");Nt(i)||(i=[0,i]),Nt(n)||(n=[n,n]);var o=a.getWidth(),s=a.getHeight(),l=Math.min(o,s),c=Ft(n[0],o),u=Ft(n[1],s),h=Ft(i[0],l/2),d=Ft(i[1],l/2),f=-r.get("startAngle")*Ex,p=r.get("minAngle")*Ex,g=r.getData().tree.root,v=r.getViewRoot(),_=v.depth,y=r.get("sort");y!=null&&kk(v,y);var b=0;G(v.children,function(R){!isNaN(R.getValue())&&b++});var w=v.getValue(),T=Math.PI/(w||b)*2,C=v.depth>0,A=v.height-(C?-1:1),k=(d-h)/(A||1),L=r.get("clockwise"),M=r.get("stillShowZeroSum"),P=L?1:-1,E=function(R,V){if(R){var z=V;if(R!==g){var W=R.getValue(),it=w===0&&M?T:W*T;it<p&&(it=p),z=V+P*it;var ot=R.depth-_-(C?-1:1),xt=h+k*ot,j=h+k*(ot+1),mt=r.getLevelModel(R);if(mt){var Tt=mt.get("r0",!0),Mt=mt.get("r",!0),et=mt.get("radius",!0);et!=null&&(Tt=et[0],Mt=et[1]),Tt!=null&&(xt=Ft(Tt,l/2)),Mt!=null&&(j=Ft(Mt,l/2))}R.setLayout({angle:it,startAngle:V,endAngle:z,clockwise:L,cx:c,cy:u,r0:xt,r:j})}if(R.children&&R.children.length){var ut=0;G(R.children,function(at){ut+=E(at,V+ut)})}return z-V}};if(C){var D=h,O=h+k,B=Math.PI*2;g.setLayout({angle:B,startAngle:f,endAngle:f+B,clockwise:L,cx:c,cy:u,r0:D,r:O})}E(v,f)})}function kk(e,t){var a=e.children||[];e.children=j7(a,t),a.length&&G(e.children,function(r){kk(r,t)})}function j7(e,t){if(Me(t)){var a=Ot(e,function(n,i){var o=n.getValue();return{params:{depth:n.depth,height:n.height,dataIndex:n.dataIndex,getValue:function(){return o}},index:i}});return a.sort(function(n,i){return t(n.params,i.params)}),Ot(a,function(n){return e[n.index]})}else{var r=t==="asc";return e.sort(function(n,i){var o=(n.getValue()-i.getValue())*(r?1:-1);return o===0?(n.dataIndex-i.dataIndex)*(r?-1:1):o})}}function Y7(e){var t={};function a(r,n,i){for(var o=r;o&&o.depth>1;)o=o.parentNode;var s=n.getColorFromPalette(o.name||o.dataIndex+"",t);return r.depth>1&&ge(s)&&(s=M5(s,(r.depth-1)/(i-1)*.5)),s}e.eachSeriesByType("sunburst",function(r){var n=r.getData(),i=n.tree;i.eachNode(function(o){var s=o.getModel(),l=s.getModel("itemStyle").getItemStyle();l.fill||(l.fill=a(o,r,i.root.height));var c=n.ensureUniqueItemVisual(o.dataIndex,"style");Vt(c,l)})})}function X7(e){e.registerChartView(W7),e.registerSeriesModel(q7),e.registerLayout(pe(U7,"sunburst")),e.registerProcessor(pe(pu,"sunburst")),e.registerVisual(Y7),H7(e)}var Rx={color:"fill",borderColor:"stroke"},Z7={symbol:1,symbolSize:1,symbolKeepAspect:1,legendIcon:1,visualMeta:1,liftZ:1,decal:1},Un=ia(),K7=function(e){gt(t,e);function t(){var a=e!==null&&e.apply(this,arguments)||this;return a.type=t.type,a}return t.prototype.optionUpdated=function(){this.currentZLevel=this.get("zlevel",!0),this.currentZ=this.get("z",!0)},t.prototype.getInitialData=function(a,r){return ai(null,this)},t.prototype.getDataParams=function(a,r,n){var i=e.prototype.getDataParams.call(this,a,r);return n&&(i.info=Un(n).info),i},t.type="series.custom",t.dependencies=["grid","polar","geo","singleAxis","calendar"],t.defaultOption={coordinateSystem:"cartesian2d",z:2,legendHoverLink:!0,clip:!1},t}(ha);function J7(e,t){return t=t||[0,0],Ot(["x","y"],function(a,r){var n=this.getAxis(a),i=t[r],o=e[r]/2;return n.type==="category"?n.getBandWidth():Math.abs(n.dataToCoord(i-o)-n.dataToCoord(i+o))},this)}function Q7(e){var t=e.master.getRect();return{coordSys:{type:"cartesian2d",x:t.x,y:t.y,width:t.width,height:t.height},api:{coord:function(a){return e.dataToPoint(a)},size:Ut(J7,e)}}}function tG(e,t){return t=t||[0,0],Ot([0,1],function(a){var r=t[a],n=e[a]/2,i=[],o=[];return i[a]=r-n,o[a]=r+n,i[1-a]=o[1-a]=t[1-a],Math.abs(this.dataToPoint(i)[a]-this.dataToPoint(o)[a])},this)}function eG(e){var t=e.getBoundingRect();return{coordSys:{type:"geo",x:t.x,y:t.y,width:t.width,height:t.height,zoom:e.getZoom()},api:{coord:function(a){return e.dataToPoint(a)},size:Ut(tG,e)}}}function aG(e,t){var a=this.getAxis(),r=t instanceof Array?t[0]:t,n=(e instanceof Array?e[0]:e)/2;return a.type==="category"?a.getBandWidth():Math.abs(a.dataToCoord(r-n)-a.dataToCoord(r+n))}function rG(e){var t=e.getRect();return{coordSys:{type:"singleAxis",x:t.x,y:t.y,width:t.width,height:t.height},api:{coord:function(a){return e.dataToPoint(a)},size:Ut(aG,e)}}}function nG(e,t){return t=t||[0,0],Ot(["Radius","Angle"],function(a,r){var n="get"+a+"Axis",i=this[n](),o=t[r],s=e[r]/2,l=i.type==="category"?i.getBandWidth():Math.abs(i.dataToCoord(o-s)-i.dataToCoord(o+s));return a==="Angle"&&(l=l*Math.PI/180),l},this)}function iG(e){var t=e.getRadiusAxis(),a=e.getAngleAxis(),r=t.getExtent();return r[0]>r[1]&&r.reverse(),{coordSys:{type:"polar",cx:e.cx,cy:e.cy,r:r[1],r0:r[0]},api:{coord:function(n){var i=t.dataToRadius(n[0]),o=a.dataToAngle(n[1]),s=e.coordToPoint([i,o]);return s.push(i,o*Math.PI/180),s},size:Ut(nG,e)}}}function oG(e){var t=e.getRect(),a=e.getRangeInfo();return{coordSys:{type:"calendar",x:t.x,y:t.y,width:t.width,height:t.height,cellWidth:e.getCellWidth(),cellHeight:e.getCellHeight(),rangeInfo:{start:a.start,end:a.end,weeks:a.weeks,dayCount:a.allDay}},api:{coord:function(r,n){return e.dataToPoint(r,n)}}}}function Dk(e,t,a,r){return e&&(e.legacy||e.legacy!==!1&&!a&&!r&&t!=="tspan"&&(t==="text"||Ht(e,"text")))}function Lk(e,t,a){var r=e,n,i,o;if(t==="text")o=r;else{o={},Ht(r,"text")&&(o.text=r.text),Ht(r,"rich")&&(o.rich=r.rich),Ht(r,"textFill")&&(o.fill=r.textFill),Ht(r,"textStroke")&&(o.stroke=r.textStroke),Ht(r,"fontFamily")&&(o.fontFamily=r.fontFamily),Ht(r,"fontSize")&&(o.fontSize=r.fontSize),Ht(r,"fontStyle")&&(o.fontStyle=r.fontStyle),Ht(r,"fontWeight")&&(o.fontWeight=r.fontWeight),i={type:"text",style:o,silent:!0},n={};var s=Ht(r,"textPosition");a?n.position=s?r.textPosition:"inside":s&&(n.position=r.textPosition),Ht(r,"textPosition")&&(n.position=r.textPosition),Ht(r,"textOffset")&&(n.offset=r.textOffset),Ht(r,"textRotation")&&(n.rotation=r.textRotation),Ht(r,"textDistance")&&(n.distance=r.textDistance)}return Px(o,e),G(o.rich,function(l){Px(l,l)}),{textConfig:n,textContent:i}}function Px(e,t){t&&(t.font=t.textFont||t.font,Ht(t,"textStrokeWidth")&&(e.lineWidth=t.textStrokeWidth),Ht(t,"textAlign")&&(e.align=t.textAlign),Ht(t,"textVerticalAlign")&&(e.verticalAlign=t.textVerticalAlign),Ht(t,"textLineHeight")&&(e.lineHeight=t.textLineHeight),Ht(t,"textWidth")&&(e.width=t.textWidth),Ht(t,"textHeight")&&(e.height=t.textHeight),Ht(t,"textBackgroundColor")&&(e.backgroundColor=t.textBackgroundColor),Ht(t,"textPadding")&&(e.padding=t.textPadding),Ht(t,"textBorderColor")&&(e.borderColor=t.textBorderColor),Ht(t,"textBorderWidth")&&(e.borderWidth=t.textBorderWidth),Ht(t,"textBorderRadius")&&(e.borderRadius=t.textBorderRadius),Ht(t,"textBoxShadowColor")&&(e.shadowColor=t.textBoxShadowColor),Ht(t,"textBoxShadowBlur")&&(e.shadowBlur=t.textBoxShadowBlur),Ht(t,"textBoxShadowOffsetX")&&(e.shadowOffsetX=t.textBoxShadowOffsetX),Ht(t,"textBoxShadowOffsetY")&&(e.shadowOffsetY=t.textBoxShadowOffsetY))}function Bx(e,t,a){var r=e;r.textPosition=r.textPosition||a.position||"inside",a.offset!=null&&(r.textOffset=a.offset),a.rotation!=null&&(r.textRotation=a.rotation),a.distance!=null&&(r.textDistance=a.distance);var n=r.textPosition.indexOf("inside")>=0,i=e.fill||"#000";Ox(r,t);var o=r.textFill==null;return n?o&&(r.textFill=a.insideFill||"#fff",!r.textStroke&&a.insideStroke&&(r.textStroke=a.insideStroke),!r.textStroke&&(r.textStroke=i),r.textStrokeWidth==null&&(r.textStrokeWidth=2)):(o&&(r.textFill=e.fill||a.outsideFill||"#000"),!r.textStroke&&a.outsideStroke&&(r.textStroke=a.outsideStroke)),r.text=t.text,r.rich=t.rich,G(t.rich,function(s){Ox(s,s)}),r}function Ox(e,t){t&&(Ht(t,"fill")&&(e.textFill=t.fill),Ht(t,"stroke")&&(e.textStroke=t.fill),Ht(t,"lineWidth")&&(e.textStrokeWidth=t.lineWidth),Ht(t,"font")&&(e.font=t.font),Ht(t,"fontStyle")&&(e.fontStyle=t.fontStyle),Ht(t,"fontWeight")&&(e.fontWeight=t.fontWeight),Ht(t,"fontSize")&&(e.fontSize=t.fontSize),Ht(t,"fontFamily")&&(e.fontFamily=t.fontFamily),Ht(t,"align")&&(e.textAlign=t.align),Ht(t,"verticalAlign")&&(e.textVerticalAlign=t.verticalAlign),Ht(t,"lineHeight")&&(e.textLineHeight=t.lineHeight),Ht(t,"width")&&(e.textWidth=t.width),Ht(t,"height")&&(e.textHeight=t.height),Ht(t,"backgroundColor")&&(e.textBackgroundColor=t.backgroundColor),Ht(t,"padding")&&(e.textPadding=t.padding),Ht(t,"borderColor")&&(e.textBorderColor=t.borderColor),Ht(t,"borderWidth")&&(e.textBorderWidth=t.borderWidth),Ht(t,"borderRadius")&&(e.textBorderRadius=t.borderRadius),Ht(t,"shadowColor")&&(e.textBoxShadowColor=t.shadowColor),Ht(t,"shadowBlur")&&(e.textBoxShadowBlur=t.shadowBlur),Ht(t,"shadowOffsetX")&&(e.textBoxShadowOffsetX=t.shadowOffsetX),Ht(t,"shadowOffsetY")&&(e.textBoxShadowOffsetY=t.shadowOffsetY),Ht(t,"textShadowColor")&&(e.textShadowColor=t.textShadowColor),Ht(t,"textShadowBlur")&&(e.textShadowBlur=t.textShadowBlur),Ht(t,"textShadowOffsetX")&&(e.textShadowOffsetX=t.textShadowOffsetX),Ht(t,"textShadowOffsetY")&&(e.textShadowOffsetY=t.textShadowOffsetY))}var Ik={position:["x","y"],scale:["scaleX","scaleY"],origin:["originX","originY"]},Nx=pa(Ik);cT(Ic,function(e,t){return e[t]=1,e},{});Ic.join(", ");var ld=["","style","shape","extra"],qs=ia();function Zy(e,t,a,r,n){var i=e+"Animation",o=cu(e,r,n)||{},s=qs(t).userDuring;return o.duration>0&&(o.during=s?Ut(hG,{el:t,userDuring:s}):null,o.setToFinal=!0,o.scope=e),Vt(o,a[i]),o}function yh(e,t,a,r){r=r||{};var n=r.dataIndex,i=r.isInit,o=r.clearStyle,s=a.isAnimationEnabled(),l=qs(e),c=t.style;l.userDuring=t.during;var u={},h={};if(fG(e,t,h),Fx("shape",t,h),Fx("extra",t,h),!i&&s&&(dG(e,t,u),$x("shape",e,t,u),$x("extra",e,t,u),pG(e,t,c,u)),h.style=c,sG(e,h,o),cG(e,t),s)if(i){var d={};G(ld,function(p){var g=p?t[p]:t;g&&g.enterFrom&&(p&&(d[p]=d[p]||{}),Vt(p?d[p]:d,g.enterFrom))});var f=Zy("enter",e,t,a,n);f.duration>0&&e.animateFrom(d,f)}else lG(e,t,n||0,a,u);Mk(e,t),c?e.dirty():e.markRedraw()}function Mk(e,t){for(var a=qs(e).leaveToProps,r=0;r<ld.length;r++){var n=ld[r],i=n?t[n]:t;i&&i.leaveTo&&(a||(a=qs(e).leaveToProps={}),n&&(a[n]=a[n]||{}),Vt(n?a[n]:a,i.leaveTo))}}function kf(e,t,a,r){if(e){var n=e.parent,i=qs(e).leaveToProps;if(i){var o=Zy("update",e,t,a,0);o.done=function(){n.remove(e)},e.animateTo(i,o)}else n.remove(e)}}function _o(e){return e==="all"}function sG(e,t,a){var r=t.style;if(!e.isGroup&&r){if(a){e.useStyle({});for(var n=e.animators,i=0;i<n.length;i++){var o=n[i];o.targetName==="style"&&o.changeTarget(e.style)}}e.setStyle(r)}t&&(t.style=null,t&&e.attr(t),t.style=r)}function lG(e,t,a,r,n){if(n){var i=Zy("update",e,t,r,a);i.duration>0&&e.animateFrom(n,i)}}function cG(e,t){Ht(t,"silent")&&(e.silent=t.silent),Ht(t,"ignore")&&(e.ignore=t.ignore),e instanceof Co&&Ht(t,"invisible")&&(e.invisible=t.invisible),e instanceof va&&Ht(t,"autoBatch")&&(e.autoBatch=t.autoBatch)}var ln={},uG={setTransform:function(e,t){return ln.el[e]=t,this},getTransform:function(e){return ln.el[e]},setShape:function(e,t){var a=ln.el,r=a.shape||(a.shape={});return r[e]=t,a.dirtyShape&&a.dirtyShape(),this},getShape:function(e){var t=ln.el.shape;if(t)return t[e]},setStyle:function(e,t){var a=ln.el,r=a.style;return r&&(r[e]=t,a.dirtyStyle&&a.dirtyStyle()),this},getStyle:function(e){var t=ln.el.style;if(t)return t[e]},setExtra:function(e,t){var a=ln.el.extra||(ln.el.extra={});return a[e]=t,this},getExtra:function(e){var t=ln.el.extra;if(t)return t[e]}};function hG(){var e=this,t=e.el;if(t){var a=qs(t).userDuring,r=e.userDuring;if(a!==r){e.el=e.userDuring=null;return}ln.el=t,r(uG)}}function $x(e,t,a,r){var n=a[e];if(n){var i=t[e],o;if(i){var s=a.transition,l=n.transition;if(l)if(!o&&(o=r[e]={}),_o(l))Vt(o,i);else for(var c=nr(l),u=0;u<c.length;u++){var h=c[u],d=i[h];o[h]=d}else if(_o(s)||Xe(s,e)>=0){!o&&(o=r[e]={});for(var f=pa(i),u=0;u<f.length;u++){var h=f[u],d=i[h];gG(n[h],d)&&(o[h]=d)}}}}}function Fx(e,t,a){var r=t[e];if(r)for(var n=a[e]={},i=pa(r),o=0;o<i.length;o++){var s=i[o];n[s]=E5(r[s])}}function dG(e,t,a){for(var r=t.transition,n=_o(r)?Ic:nr(r||[]),i=0;i<n.length;i++){var o=n[i];if(!(o==="style"||o==="shape"||o==="extra")){var s=e[o];a[o]=s}}}function fG(e,t,a){for(var r=0;r<Nx.length;r++){var n=Nx[r],i=Ik[n],o=t[n];o&&(a[i[0]]=o[0],a[i[1]]=o[1])}for(var r=0;r<Ic.length;r++){var s=Ic[r];t[s]!=null&&(a[s]=t[s])}}function pG(e,t,a,r){if(a){var n=e.style,i;if(n){var o=a.transition,s=t.transition;if(o&&!_o(o)){var l=nr(o);!i&&(i=r.style={});for(var c=0;c<l.length;c++){var u=l[c],h=n[u];i[u]=h}}else if(e.getAnimationStyleProps&&(_o(s)||_o(o)||Xe(s,"style")>=0)){var d=e.getAnimationStyleProps(),f=d?d.style:null;if(f){!i&&(i=r.style={});for(var p=pa(a),c=0;c<p.length;c++){var u=p[c];if(f[u]){var h=n[u];i[u]=h}}}}}}}function gG(e,t){return vT(e)?e!==t:e!=null&&isFinite(e)}var Ek=ia(),vG=["percent","easing","shape","style","extra"];function Rk(e){e.stopAnimation("keyframe"),e.attr(Ek(e))}function cd(e,t,a){if(!(!a.isAnimationEnabled()||!t)){if(Nt(t)){G(t,function(s){cd(e,s,a)});return}var r=t.keyframes,n=t.duration;if(a&&n==null){var i=cu("enter",a,0);n=i&&i.duration}if(!(!r||!n)){var o=Ek(e);G(ld,function(s){if(!(s&&!e[s])){var l;r.sort(function(c,u){return c.percent-u.percent}),G(r,function(c){var u=e.animators,h=s?c[s]:c;if(h){var d=pa(h);if(s||(d=Va(d,function(g){return Xe(vG,g)<0})),!!d.length){l||(l=e.animate(s,t.loop,!0),l.scope="keyframe");for(var f=0;f<u.length;f++)u[f]!==l&&u[f].targetName===l.targetName&&u[f].stopTracks(d);s&&(o[s]=o[s]||{});var p=s?o[s]:o;G(d,function(g){p[g]=((s?e[s]:e)||{})[g]}),l.whenWithKeys(n*c.percent,h,d,c.easing)}}}),l&&l.delay(t.delay||0).duration(n).start(t.easing)}})}}}var jn="emphasis",Ci="normal",Ky="blur",Jy="select",Bi=[Ci,jn,Ky,Jy],ig={normal:["itemStyle"],emphasis:[jn,"itemStyle"],blur:[Ky,"itemStyle"],select:[Jy,"itemStyle"]},og={normal:["label"],emphasis:[jn,"label"],blur:[Ky,"label"],select:[Jy,"label"]},mG=["x","y"],yG="e\0\0",Ar={normal:{},emphasis:{},blur:{},select:{}},_G={cartesian2d:Q7,geo:eG,single:rG,polar:iG,calendar:oG};function zv(e){return e instanceof va}function Vv(e){return e instanceof Co}function bG(e,t){t.copyTransform(e),Vv(t)&&Vv(e)&&(t.setStyle(e.style),t.z=e.z,t.z2=e.z2,t.zlevel=e.zlevel,t.invisible=e.invisible,t.ignore=e.ignore,zv(t)&&zv(e)&&t.setShape(e.shape))}var xG=function(e){gt(t,e);function t(){var a=e!==null&&e.apply(this,arguments)||this;return a.type=t.type,a}return t.prototype.render=function(a,r,n,i){this._progressiveEls=null;var o=this._data,s=a.getData(),l=this.group,c=zx(a,s,r,n);o||l.removeAll(),s.diff(o).add(function(h){sg(n,null,h,c(h,i),a,l,s)}).remove(function(h){var d=o.getItemGraphicEl(h);d&&kf(d,Un(d).option,a)}).update(function(h,d){var f=o.getItemGraphicEl(d);sg(n,f,h,c(h,i),a,l,s)}).execute();var u=a.get("clip",!0)?du(a.coordinateSystem,!1,a):null;u?l.setClipPath(u):l.removeClipPath(),this._data=s},t.prototype.incrementalPrepareRender=function(a,r,n){this.group.removeAll(),this._data=null},t.prototype.incrementalRender=function(a,r,n,i,o){var s=r.getData(),l=zx(r,s,n,i),c=this._progressiveEls=[];function u(f){f.isGroup||(f.incremental=!0,f.ensureState("emphasis").hoverLayer=!0)}for(var h=a.start;h<a.end;h++){var d=sg(null,null,h,l(h,o),r,this.group,s);d&&(d.traverse(u),c.push(d))}},t.prototype.eachRendered=function(a){ol(this._progressiveEls||this.group,a)},t.prototype.filterForExposedEvent=function(a,r,n,i){var o=r.element;if(o==null||n.name===o)return!0;for(;(n=n.__hostTarget||n.parent)&&n!==this.group;)if(n.name===o)return!0;return!1},t.type="custom",t}(ra);function Qy(e){var t=e.type,a;if(t==="path"){var r=e.shape,n=r.width!=null&&r.height!=null?{x:r.x||0,y:r.y||0,width:r.width,height:r.height}:null,i=Ok(r);a=P5(i,null,n,r.layout||"center"),Un(a).customPathData=i}else if(t==="image")a=new Zr({}),Un(a).customImagePath=e.style.image;else if(t==="text")a=new Oe({});else if(t==="group")a=new ie;else{if(t==="compoundPath")throw new Error('"compoundPath" is not supported yet.');var o=yT(t);if(!o){var s="";ua(s)}a=new o}return Un(a).customGraphicType=t,a.name=e.name,a.z2EmphasisLift=1,a.z2SelectLift=1,a}function t0(e,t,a,r,n,i,o){Rk(t);var s=n&&n.normal.cfg;s&&t.setTextConfig(s),r&&r.transition==null&&(r.transition=mG);var l=r&&r.style;if(l){if(t.type==="text"){var c=l;Ht(c,"textFill")&&(c.fill=c.textFill),Ht(c,"textStroke")&&(c.stroke=c.textStroke)}var u=void 0,h=zv(t)?l.decal:null;e&&h&&(h.dirty=!0,u=ff(h,e)),l.__decalPattern=u}if(Vv(t)&&l){var u=l.__decalPattern;u&&(l.decal=u)}yh(t,r,i,{dataIndex:a,isInit:o,clearStyle:!0}),cd(t,r.keyframeAnimation,i)}function Pk(e,t,a,r,n){var i=t.isGroup?null:t,o=n&&n[e].cfg;if(i){var s=i.ensureState(e);if(r===!1){var l=i.getState(e);l&&(l.style=null)}else s.style=r||null;o&&(s.textConfig=o),Fs(i)}}function SG(e,t,a){if(!e.isGroup){var r=e,n=a.currentZ,i=a.currentZLevel;r.z=n,r.zlevel=i;var o=t.z2;o!=null&&(r.z2=o||0);for(var s=0;s<Bi.length;s++)wG(r,t,Bi[s])}}function wG(e,t,a){var r=a===Ci,n=r?t:ud(t,a),i=n?n.z2:null,o;i!=null&&(o=r?e:e.ensureState(a),o.z2=i||0)}function zx(e,t,a,r){var n=e.get("renderItem"),i=e.coordinateSystem,o={};i&&(o=i.prepareCustoms?i.prepareCustoms(i):_G[i.type](i));for(var s=_e({getWidth:r.getWidth,getHeight:r.getHeight,getZr:r.getZr,getDevicePixelRatio:r.getDevicePixelRatio,value:w,style:C,ordinalRawValue:T,styleEmphasis:A,visual:M,barLayout:P,currentSeriesIndices:E,font:D},o.api||{}),l={context:{},seriesId:e.id,seriesName:e.name,seriesIndex:e.seriesIndex,coordSys:o.coordSys,dataInsideLength:t.count(),encode:CG(e.getData())},c,u,h={},d={},f={},p={},g=0;g<Bi.length;g++){var v=Bi[g];f[v]=e.getModel(ig[v]),p[v]=e.getModel(og[v])}function _(O){return O===c?u||(u=t.getItemModel(O)):t.getItemModel(O)}function y(O,B){return t.hasItemOption?O===c?h[B]||(h[B]=_(O).getModel(ig[B])):_(O).getModel(ig[B]):f[B]}function b(O,B){return t.hasItemOption?O===c?d[B]||(d[B]=_(O).getModel(og[B])):_(O).getModel(og[B]):p[B]}return function(O,B){return c=O,u=null,h={},d={},n&&n(_e({dataIndexInside:O,dataIndex:t.getRawIndex(O),actionType:B?B.type:null},l),s)};function w(O,B){return B==null&&(B=c),t.getStore().get(t.getDimensionIndex(O||0),B)}function T(O,B){B==null&&(B=c),O=O||0;var R=t.getDimensionInfo(O);if(!R){var V=t.getDimensionIndex(O);return V>=0?t.getStore().get(V,B):void 0}var z=t.get(R.name,B),W=R&&R.ordinalMeta;return W?W.categories[z]:z}function C(O,B){B==null&&(B=c);var R=t.getItemVisual(B,"style"),V=R&&R.fill,z=R&&R.opacity,W=y(B,Ci).getItemStyle();V!=null&&(W.fill=V),z!=null&&(W.opacity=z);var it={inheritColor:ge(V)?V:"#000"},ot=b(B,Ci),xt=Ke(ot,null,it,!1,!0);xt.text=ot.getShallow("show")?sa(e.getFormattedLabel(B,Ci),Gs(t,B)):null;var j=o1(ot,it,!1);return L(O,W),W=Bx(W,xt,j),O&&k(W,O),W.legacy=!0,W}function A(O,B){B==null&&(B=c);var R=y(B,jn).getItemStyle(),V=b(B,jn),z=Ke(V,null,null,!0,!0);z.text=V.getShallow("show")?sl(e.getFormattedLabel(B,jn),e.getFormattedLabel(B,Ci),Gs(t,B)):null;var W=o1(V,null,!0);return L(O,R),R=Bx(R,z,W),O&&k(R,O),R.legacy=!0,R}function k(O,B){for(var R in B)Ht(B,R)&&(O[R]=B[R])}function L(O,B){O&&(O.textFill&&(B.textFill=O.textFill),O.textPosition&&(B.textPosition=O.textPosition))}function M(O,B){if(B==null&&(B=c),Ht(Rx,O)){var R=t.getItemVisual(B,"style");return R?R[Rx[O]]:null}if(Ht(Z7,O))return t.getItemVisual(B,O)}function P(O){if(i.type==="cartesian2d"){var B=i.getBaseAxis();return R5(_e({axis:B},O))}}function E(){return a.getCurrentSeriesIndices()}function D(O){return mT(O,a)}}function CG(e){var t={};return G(e.dimensions,function(a){var r=e.getDimensionInfo(a);if(!r.isExtraCoord){var n=r.coordDim,i=t[n]=t[n]||[];i[r.coordDimIndex]=e.getDimensionIndex(a)}}),t}function sg(e,t,a,r,n,i,o){if(!r){i.remove(t);return}var s=e0(e,t,a,r,n,i);return s&&o.setItemGraphicEl(a,s),s&&Qe(s,r.focus,r.blurScope,r.emphasisDisabled),s}function e0(e,t,a,r,n,i){var o=-1,s=t;t&&Bk(t,r,n)&&(o=Xe(i.childrenRef(),t),t=null);var l=!t,c=t;c?c.clearStates():(c=Qy(r),s&&bG(s,c)),r.morph===!1?c.disableMorphing=!0:c.disableMorphing&&(c.disableMorphing=!1),Ar.normal.cfg=Ar.normal.conOpt=Ar.emphasis.cfg=Ar.emphasis.conOpt=Ar.blur.cfg=Ar.blur.conOpt=Ar.select.cfg=Ar.select.conOpt=null,Ar.isLegacy=!1,AG(c,a,r,n,l,Ar),TG(c,a,r,n,l),t0(e,c,a,r,Ar,n,l),Ht(r,"info")&&(Un(c).info=r.info);for(var u=0;u<Bi.length;u++){var h=Bi[u];if(h!==Ci){var d=ud(r,h),f=a0(r,d,h);Pk(h,c,d,f,Ar)}}return SG(c,r,n),r.type==="group"&&kG(e,c,a,r,n),o>=0?i.replaceAt(c,o):i.add(c),c}function Bk(e,t,a){var r=Un(e),n=t.type,i=t.shape,o=t.style;return a.isUniversalTransitionEnabled()||n!=null&&n!==r.customGraphicType||n==="path"&&MG(i)&&Ok(i)!==r.customPathData||n==="image"&&Ht(o,"image")&&o.image!==r.customImagePath}function TG(e,t,a,r,n){var i=a.clipPath;if(i===!1)e&&e.getClipPath()&&e.removeClipPath();else if(i){var o=e.getClipPath();o&&Bk(o,i,r)&&(o=null),o||(o=Qy(i),e.setClipPath(o)),t0(null,o,t,i,null,r,n)}}function AG(e,t,a,r,n,i){if(!e.isGroup){Vx(a,null,i),Vx(a,jn,i);var o=i.normal.conOpt,s=i.emphasis.conOpt,l=i.blur.conOpt,c=i.select.conOpt;if(o!=null||s!=null||c!=null||l!=null){var u=e.getTextContent();if(o===!1)u&&e.removeTextContent();else{o=i.normal.conOpt=o||{type:"text"},u?u.clearStates():(u=Qy(o),e.setTextContent(u)),t0(null,u,t,o,null,r,n);for(var h=o&&o.style,d=0;d<Bi.length;d++){var f=Bi[d];if(f!==Ci){var p=i[f].conOpt;Pk(f,u,p,a0(o,p,f),null)}}h?u.dirty():u.markRedraw()}}}}function Vx(e,t,a){var r=t?ud(e,t):e,n=t?a0(e,r,jn):e.style,i=e.type,o=r?r.textConfig:null,s=e.textContent,l=s?t?ud(s,t):s:null;if(n&&(a.isLegacy||Dk(n,i,!!o,!!l))){a.isLegacy=!0;var c=Lk(n,i,!t);!o&&c.textConfig&&(o=c.textConfig),!l&&c.textContent&&(l=c.textContent)}if(!t&&l){var u=l;!u.type&&(u.type="text")}var h=t?a[t]:a.normal;h.cfg=o,h.conOpt=l}function ud(e,t){return t?e?e[t]:null:e}function a0(e,t,a){var r=t&&t.style;return r==null&&a===jn&&e&&(r=e.styleEmphasis),r}function kG(e,t,a,r,n){var i=r.children,o=i?i.length:0,s=r.$mergeChildren,l=s==="byName"||r.diffChildrenByName,c=s===!1;if(!(!o&&!l&&!c)){if(l){LG({api:e,oldChildren:t.children()||[],newChildren:i||[],dataIndex:a,seriesModel:n,group:t});return}c&&t.removeAll();for(var u=0;u<o;u++){var h=i[u],d=t.childAt(u);h?(h.ignore==null&&(h.ignore=!1),e0(e,d,a,h,n,t)):d.ignore=!0}for(var f=t.childCount()-1;f>=u;f--){var p=t.childAt(f);DG(t,p,n)}}}function DG(e,t,a){t&&kf(t,Un(e).option,a)}function LG(e){new Ri(e.oldChildren,e.newChildren,Gx,Gx,e).add(Hx).update(Hx).remove(IG).execute()}function Gx(e,t){var a=e&&e.name;return a??yG+t}function Hx(e,t){var a=this.context,r=e!=null?a.newChildren[e]:null,n=t!=null?a.oldChildren[t]:null;e0(a.api,n,a.dataIndex,r,a.seriesModel,a.group)}function IG(e){var t=this.context,a=t.oldChildren[e];a&&kf(a,Un(a).option,t.seriesModel)}function Ok(e){return e&&(e.pathData||e.d)}function MG(e){return e&&(Ht(e,"pathData")||Ht(e,"d"))}function EG(e){e.registerChartView(xG),e.registerSeriesModel(K7)}var ro=ia(),Wx=Pe,lg=Ut,r0=function(){function e(){this._dragging=!1,this.animationThreshold=15}return e.prototype.render=function(t,a,r,n){var i=a.get("value"),o=a.get("status");if(this._axisModel=t,this._axisPointerModel=a,this._api=r,!(!n&&this._lastValue===i&&this._lastStatus===o)){this._lastValue=i,this._lastStatus=o;var s=this._group,l=this._handle;if(!o||o==="hide"){s&&s.hide(),l&&l.hide();return}s&&s.show(),l&&l.show();var c={};this.makeElOption(c,i,t,a,r);var u=c.graphicKey;u!==this._lastGraphicKey&&this.clear(r),this._lastGraphicKey=u;var h=this._moveAnimation=this.determineAnimation(t,a);if(!s)s=this._group=new ie,this.createPointerEl(s,c,t,a),this.createLabelEl(s,c,t,a),r.getZr().add(s);else{var d=pe(qx,a,h);this.updatePointerEl(s,c,d),this.updateLabelEl(s,c,d,a)}jx(s,a,!0),this._renderHandle(i)}},e.prototype.remove=function(t){this.clear(t)},e.prototype.dispose=function(t){this.clear(t)},e.prototype.determineAnimation=function(t,a){var r=a.get("animation"),n=t.axis,i=n.type==="category",o=a.get("snap");if(!o&&!i)return!1;if(r==="auto"||r==null){var s=this.animationThreshold;if(i&&n.getBandWidth()>s)return!0;if(o){var l=wy(t).seriesDataCount,c=n.getExtent();return Math.abs(c[0]-c[1])/l>s}return!1}return r===!0},e.prototype.makeElOption=function(t,a,r,n,i){},e.prototype.createPointerEl=function(t,a,r,n){var i=a.pointer;if(i){var o=ro(t).pointerEl=new No[i.type](Wx(a.pointer));t.add(o)}},e.prototype.createLabelEl=function(t,a,r,n){if(a.label){var i=ro(t).labelEl=new Oe(Wx(a.label));t.add(i),Ux(i,n)}},e.prototype.updatePointerEl=function(t,a,r){var n=ro(t).pointerEl;n&&a.pointer&&(n.setStyle(a.pointer.style),r(n,{shape:a.pointer.shape}))},e.prototype.updateLabelEl=function(t,a,r,n){var i=ro(t).labelEl;i&&(i.setStyle(a.label.style),r(i,{x:a.label.x,y:a.label.y}),Ux(i,n))},e.prototype._renderHandle=function(t){if(!(this._dragging||!this.updateHandleTransform)){var a=this._axisPointerModel,r=this._api.getZr(),n=this._handle,i=a.getModel("handle"),o=a.get("status");if(!i.get("show")||!o||o==="hide"){n&&r.remove(n),this._handle=null;return}var s;this._handle||(s=!0,n=this._handle=vf(i.get("icon"),{cursor:"move",draggable:!0,onmousemove:function(c){Mi(c.event)},onmousedown:lg(this._onHandleDragMove,this,0,0),drift:lg(this._onHandleDragMove,this),ondragend:lg(this._onHandleDragEnd,this)}),r.add(n)),jx(n,a,!1),n.setStyle(i.getItemStyle(null,["color","borderColor","borderWidth","opacity","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"]));var l=i.get("size");Nt(l)||(l=[l,l]),n.scaleX=l[0]/2,n.scaleY=l[1]/2,ul(this,"_doDispatchAxisPointer",i.get("throttle")||0,"fixRate"),this._moveHandleToValue(t,s)}},e.prototype._moveHandleToValue=function(t,a){qx(this._axisPointerModel,!a&&this._moveAnimation,this._handle,cg(this.getHandleTransform(t,this._axisModel,this._axisPointerModel)))},e.prototype._onHandleDragMove=function(t,a){var r=this._handle;if(r){this._dragging=!0;var n=this.updateHandleTransform(cg(r),[t,a],this._axisModel,this._axisPointerModel);this._payloadInfo=n,r.stopAnimation(),r.attr(cg(n)),ro(r).lastProp=null,this._doDispatchAxisPointer()}},e.prototype._doDispatchAxisPointer=function(){var t=this._handle;if(t){var a=this._payloadInfo,r=this._axisModel;this._api.dispatchAction({type:"updateAxisPointer",x:a.cursorPoint[0],y:a.cursorPoint[1],tooltipOption:a.tooltipOption,axesInfo:[{axisDim:r.axis.dim,axisIndex:r.componentIndex}]})}},e.prototype._onHandleDragEnd=function(){this._dragging=!1;var t=this._handle;if(t){var a=this._axisPointerModel.get("value");this._moveHandleToValue(a),this._api.dispatchAction({type:"hideTip"})}},e.prototype.clear=function(t){this._lastValue=null,this._lastStatus=null;var a=t.getZr(),r=this._group,n=this._handle;a&&r&&(this._lastGraphicKey=null,r&&a.remove(r),n&&a.remove(n),this._group=null,this._handle=null,this._payloadInfo=null),Lc(this,"_doDispatchAxisPointer")},e.prototype.doClear=function(){},e.prototype.buildLabel=function(t,a,r){return r=r||0,{x:t[r],y:t[1-r],width:a[r],height:a[1-r]}},e}();function qx(e,t,a,r){Nk(ro(a).lastProp,r)||(ro(a).lastProp=r,t?ze(a,r,e):(a.stopAnimation(),a.attr(r)))}function Nk(e,t){if(na(e)&&na(t)){var a=!0;return G(t,function(r,n){a=a&&Nk(e[n],r)}),!!a}else return e===t}function Ux(e,t){e[t.get(["label","show"])?"show":"hide"]()}function cg(e){return{x:e.x||0,y:e.y||0,rotation:e.rotation||0}}function jx(e,t,a){var r=t.get("z"),n=t.get("zlevel");e&&e.traverse(function(i){i.type!=="group"&&(r!=null&&(i.z=r),n!=null&&(i.zlevel=n),i.silent=a)})}function n0(e){var t=e.get("type"),a=e.getModel(t+"Style"),r;return t==="line"?(r=a.getLineStyle(),r.fill=null):t==="shadow"&&(r=a.getAreaStyle(),r.stroke=null),r}function $k(e,t,a,r,n){var i=a.get("value"),o=Fk(i,t.axis,t.ecModel,a.get("seriesDataIndices"),{precision:a.get(["label","precision"]),formatter:a.get(["label","formatter"])}),s=a.getModel("label"),l=mf(s.get("padding")||0),c=s.getFont(),u=gy(o,c),h=n.position,d=u.width+l[1]+l[3],f=u.height+l[0]+l[2],p=n.align;p==="right"&&(h[0]-=d),p==="center"&&(h[0]-=d/2);var g=n.verticalAlign;g==="bottom"&&(h[1]-=f),g==="middle"&&(h[1]-=f/2),RG(h,d,f,r);var v=s.get("backgroundColor");(!v||v==="auto")&&(v=t.get(["axisLine","lineStyle","color"])),e.label={x:h[0],y:h[1],style:Ke(s,{text:o,font:c,fill:s.getTextColor(),padding:l,backgroundColor:v}),z2:10}}function RG(e,t,a,r){var n=r.getWidth(),i=r.getHeight();e[0]=Math.min(e[0]+t,n)-t,e[1]=Math.min(e[1]+a,i)-a,e[0]=Math.max(e[0],0),e[1]=Math.max(e[1],0)}function Fk(e,t,a,r,n){e=t.scale.parse(e);var i=t.scale.getLabel({value:e},{precision:n.precision}),o=n.formatter;if(o){var s={value:_T(t,{value:e}),axisDimension:t.dim,axisIndex:t.index,seriesData:[]};G(r,function(l){var c=a.getSeriesByIndex(l.seriesIndex),u=l.dataIndexInside,h=c&&c.getDataParams(u);h&&s.seriesData.push(h)}),ge(o)?i=o.replace("{value}",i):Me(o)&&(i=o(s))}return i}function i0(e,t,a){var r=$o();return cl(r,r,a.rotation),Ei(r,r,a.position),qn([e.dataToCoord(t),(a.labelOffset||0)+(a.labelDirection||1)*(a.labelMargin||0)],r)}function zk(e,t,a,r,n,i){var o=ir.innerTextLayout(a.rotation,0,a.labelDirection);a.labelMargin=n.get(["label","margin"]),$k(t,r,n,i,{position:i0(r.axis,e,a),align:o.textAlign,verticalAlign:o.textVerticalAlign})}function o0(e,t,a){return a=a||0,{x1:e[a],y1:e[1-a],x2:t[a],y2:t[1-a]}}function Vk(e,t,a){return a=a||0,{x:e[a],y:e[1-a],width:t[a],height:t[1-a]}}function Yx(e,t,a,r,n,i){return{cx:e,cy:t,r0:a,r,startAngle:n,endAngle:i,clockwise:!0}}var PG=function(e){gt(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.makeElOption=function(a,r,n,i,o){var s=n.axis,l=s.grid,c=i.get("type"),u=Xx(l,s).getOtherAxis(s).getGlobalExtent(),h=s.toGlobalCoord(s.dataToCoord(r,!0));if(c&&c!=="none"){var d=n0(i),f=BG[c](s,h,u);f.style=d,a.graphicKey=f.type,a.pointer=f}var p=xv(l.model,n);zk(r,a,p,n,i,o)},t.prototype.getHandleTransform=function(a,r,n){var i=xv(r.axis.grid.model,r,{labelInside:!1});i.labelMargin=n.get(["handle","margin"]);var o=i0(r.axis,a,i);return{x:o[0],y:o[1],rotation:i.rotation+(i.labelDirection<0?Math.PI:0)}},t.prototype.updateHandleTransform=function(a,r,n,i){var o=n.axis,s=o.grid,l=o.getGlobalExtent(!0),c=Xx(s,o).getOtherAxis(o).getGlobalExtent(),u=o.dim==="x"?0:1,h=[a.x,a.y];h[u]+=r[u],h[u]=Math.min(l[1],h[u]),h[u]=Math.max(l[0],h[u]);var d=(c[1]+c[0])/2,f=[d,d];f[u]=h[u];var p=[{verticalAlign:"middle"},{align:"center"}];return{x:h[0],y:h[1],rotation:a.rotation,cursorPoint:f,tooltipOption:p[u]}},t}(r0);function Xx(e,t){var a={};return a[t.dim+"AxisIndex"]=t.index,e.getCartesian(a)}var BG={line:function(e,t,a){var r=o0([t,a[0]],[t,a[1]],Zx(e));return{type:"Line",subPixelOptimize:!0,shape:r}},shadow:function(e,t,a){var r=Math.max(1,e.getBandWidth()),n=a[1]-a[0];return{type:"Rect",shape:Vk([t-r/2,a[0]],[r,n],Zx(e))}}};function Zx(e){return e.dim==="x"?0:1}var OG=function(e){gt(t,e);function t(){var a=e!==null&&e.apply(this,arguments)||this;return a.type=t.type,a}return t.type="axisPointer",t.defaultOption={show:"auto",z:50,type:"line",snap:!1,triggerTooltip:!0,triggerEmphasis:!0,value:null,status:null,link:[],animation:null,animationDurationUpdate:200,lineStyle:{color:"#B9BEC9",width:1,type:"dashed"},shadowStyle:{color:"rgba(210,219,238,0.2)"},label:{show:!0,formatter:null,precision:"auto",margin:3,color:"#fff",padding:[5,7,5,7],backgroundColor:"auto",borderColor:null,borderWidth:0,borderRadius:3},handle:{show:!1,icon:"M10.7,11.9v-1.3H9.3v1.3c-4.9,0.3-8.8,4.4-8.8,9.4c0,5,3.9,9.1,8.8,9.4h1.3c4.9-0.3,8.8-4.4,8.8-9.4C19.5,16.3,15.6,12.2,10.7,11.9z M13.3,24.4H6.7v-1.2h6.6z M13.3,22H6.7v-1.2h6.6z M13.3,19.6H6.7v-1.2h6.6z",size:45,margin:50,color:"#333",shadowBlur:3,shadowColor:"#aaa",shadowOffsetX:0,shadowOffsetY:2,throttle:40}},t}(da),Vn=ia(),NG=G;function Gk(e,t,a){if(!Ya.node){var r=t.getZr();Vn(r).records||(Vn(r).records={}),$G(r,t);var n=Vn(r).records[e]||(Vn(r).records[e]={});n.handler=a}}function $G(e,t){if(Vn(e).initialized)return;Vn(e).initialized=!0,a("click",pe(Kx,"click")),a("mousemove",pe(Kx,"mousemove")),a("globalout",zG);function a(r,n){e.on(r,function(i){var o=VG(t);NG(Vn(e).records,function(s){s&&n(s,i,o.dispatchAction)}),FG(o.pendings,t)})}}function FG(e,t){var a=e.showTip.length,r=e.hideTip.length,n;a?n=e.showTip[a-1]:r&&(n=e.hideTip[r-1]),n&&(n.dispatchAction=null,t.dispatchAction(n))}function zG(e,t,a){e.handler("leave",null,a)}function Kx(e,t,a,r){t.handler(e,a,r)}function VG(e){var t={showTip:[],hideTip:[]},a=function(r){var n=t[r.type];n?n.push(r):(r.dispatchAction=a,e.dispatchAction(r))};return{dispatchAction:a,pendings:t}}function Gv(e,t){if(!Ya.node){var a=t.getZr(),r=(Vn(a).records||{})[e];r&&(Vn(a).records[e]=null)}}var GG=function(e){gt(t,e);function t(){var a=e!==null&&e.apply(this,arguments)||this;return a.type=t.type,a}return t.prototype.render=function(a,r,n){var i=r.getComponent("tooltip"),o=a.get("triggerOn")||i&&i.get("triggerOn")||"mousemove|click";Gk("axisPointer",n,function(s,l,c){o!=="none"&&(s==="leave"||o.indexOf(s)>=0)&&c({type:"updateAxisPointer",currTrigger:s,x:l&&l.offsetX,y:l&&l.offsetY})})},t.prototype.remove=function(a,r){Gv("axisPointer",r)},t.prototype.dispose=function(a,r){Gv("axisPointer",r)},t.type="axisPointer",t}(ma);function Hk(e,t){var a=[],r=e.seriesIndex,n;if(r==null||!(n=t.getSeriesByIndex(r)))return{point:[]};var i=n.getData(),o=iv(i,e);if(o==null||o<0||Nt(o))return{point:[]};var s=i.getItemGraphicEl(o),l=n.coordinateSystem;if(n.getTooltipPosition)a=n.getTooltipPosition(o)||[];else if(l&&l.dataToPoint)if(e.isStacked){var c=l.getBaseAxis(),u=l.getOtherAxis(c),h=u.dim,d=c.dim,f=h==="x"||h==="radius"?1:0,p=i.mapDimension(d),g=[];g[f]=i.get(p,o),g[1-f]=i.get(i.getCalculationInfo("stackResultDimension"),o),a=l.dataToPoint(g)||[]}else a=l.dataToPoint(i.getValues(Ot(l.dimensions,function(_){return i.mapDimension(_)}),o))||[];else if(s){var v=s.getBoundingRect().clone();v.applyTransform(s.transform),a=[v.x+v.width/2,v.y+v.height/2]}return{point:a,el:s}}var Jx=ia();function HG(e,t,a){var r=e.currTrigger,n=[e.x,e.y],i=e,o=e.dispatchAction||Ut(a.dispatchAction,a),s=t.getComponent("axisPointer").coordSysAxesInfo;if(s){_h(n)&&(n=Hk({seriesIndex:i.seriesIndex,dataIndex:i.dataIndex},t).point);var l=_h(n),c=i.axesInfo,u=s.axesInfo,h=r==="leave"||_h(n),d={},f={},p={list:[],map:{}},g={showPointer:pe(qG,f),showTooltip:pe(UG,p)};G(s.coordSysMap,function(_,y){var b=l||_.containPoint(n);G(s.coordSysAxesInfo[y],function(w,T){var C=w.axis,A=ZG(c,w);if(!h&&b&&(!c||A)){var k=A&&A.value;k==null&&!l&&(k=C.pointToData(n)),k!=null&&Qx(w,k,g,!1,d)}})});var v={};return G(u,function(_,y){var b=_.linkGroup;b&&!f[y]&&G(b.axesInfo,function(w,T){var C=f[T];if(w!==_&&C){var A=C.value;b.mapper&&(A=_.axis.scale.parse(b.mapper(A,tS(w),tS(_)))),v[_.key]=A}})}),G(v,function(_,y){Qx(u[y],_,g,!0,d)}),jG(f,u,d),YG(p,n,e,o),XG(u,o,a),d}}function Qx(e,t,a,r,n){var i=e.axis;if(!(i.scale.isBlank()||!i.containData(t))){if(!e.involveSeries){a.showPointer(e,t);return}var o=WG(t,e),s=o.payloadBatch,l=o.snapToValue;s[0]&&n.seriesIndex==null&&Vt(n,s[0]),!r&&e.snap&&i.containData(l)&&l!=null&&(t=l),a.showPointer(e,t,s),a.showTooltip(e,o,l)}}function WG(e,t){var a=t.axis,r=a.dim,n=e,i=[],o=Number.MAX_VALUE,s=-1;return G(t.seriesModels,function(l,c){var u=l.getData().mapDimensionsAll(r),h,d;if(l.getAxisTooltipData){var f=l.getAxisTooltipData(u,e,a);d=f.dataIndices,h=f.nestestValue}else{if(d=l.getData().indicesOfNearest(u[0],e,a.type==="category"?.5:null),!d.length)return;h=l.getData().get(u[0],d[0])}if(!(h==null||!isFinite(h))){var p=e-h,g=Math.abs(p);g<=o&&((g<o||p>=0&&s<0)&&(o=g,s=p,n=h,i.length=0),G(d,function(v){i.push({seriesIndex:l.seriesIndex,dataIndexInside:v,dataIndex:l.getData().getRawIndex(v)})}))}}),{payloadBatch:i,snapToValue:n}}function qG(e,t,a,r){e[t.key]={value:a,payloadBatch:r}}function UG(e,t,a,r){var n=a.payloadBatch,i=t.axis,o=i.model,s=t.axisPointerModel;if(!(!t.triggerTooltip||!n.length)){var l=t.coordSys.model,c=Bc(l),u=e.map[c];u||(u=e.map[c]={coordSysId:l.id,coordSysIndex:l.componentIndex,coordSysType:l.type,coordSysMainType:l.mainType,dataByAxis:[]},e.list.push(u)),u.dataByAxis.push({axisDim:i.dim,axisIndex:o.componentIndex,axisType:o.type,axisId:o.id,value:r,valueLabelOpt:{precision:s.get(["label","precision"]),formatter:s.get(["label","formatter"])},seriesDataIndices:n.slice()})}}function jG(e,t,a){var r=a.axesInfo=[];G(t,function(n,i){var o=n.axisPointerModel.option,s=e[i];s?(!n.useHandle&&(o.status="show"),o.value=s.value,o.seriesDataIndices=(s.payloadBatch||[]).slice()):!n.useHandle&&(o.status="hide"),o.status==="show"&&r.push({axisDim:n.axis.dim,axisIndex:n.axis.model.componentIndex,value:o.value})})}function YG(e,t,a,r){if(_h(t)||!e.list.length){r({type:"hideTip"});return}var n=((e.list[0].dataByAxis[0]||{}).seriesDataIndices||[])[0]||{};r({type:"showTip",escapeConnect:!0,x:t[0],y:t[1],tooltipOption:a.tooltipOption,position:a.position,dataIndexInside:n.dataIndexInside,dataIndex:n.dataIndex,seriesIndex:n.seriesIndex,dataByCoordSys:e.list})}function XG(e,t,a){var r=a.getZr(),n="axisPointerLastHighlights",i=Jx(r)[n]||{},o=Jx(r)[n]={};G(e,function(c,u){var h=c.axisPointerModel.option;h.status==="show"&&c.triggerEmphasis&&G(h.seriesDataIndices,function(d){var f=d.seriesIndex+" | "+d.dataIndex;o[f]=d})});var s=[],l=[];G(i,function(c,u){!o[u]&&l.push(c)}),G(o,function(c,u){!i[u]&&s.push(c)}),l.length&&a.dispatchAction({type:"downplay",escapeConnect:!0,notBlur:!0,batch:l}),s.length&&a.dispatchAction({type:"highlight",escapeConnect:!0,notBlur:!0,batch:s})}function ZG(e,t){for(var a=0;a<(e||[]).length;a++){var r=e[a];if(t.axis.dim===r.axisDim&&t.axis.model.componentIndex===r.axisIndex)return r}}function tS(e){var t=e.axis.model,a={},r=a.axisDim=e.axis.dim;return a.axisIndex=a[r+"AxisIndex"]=t.componentIndex,a.axisName=a[r+"AxisName"]=t.name,a.axisId=a[r+"AxisId"]=t.id,a}function _h(e){return!e||e[0]==null||isNaN(e[0])||e[1]==null||isNaN(e[1])}function yu(e){Vo.registerAxisPointerClass("CartesianAxisPointer",PG),e.registerComponentModel(OG),e.registerComponentView(GG),e.registerPreprocessor(function(t){if(t){(!t.axisPointer||t.axisPointer.length===0)&&(t.axisPointer={});var a=t.axisPointer.link;a&&!Nt(a)&&(t.axisPointer.link=[a])}}),e.registerProcessor(e.PRIORITY.PROCESSOR.STATISTIC,function(t,a){t.getComponent("axisPointer").coordSysAxesInfo=c8(t,a)}),e.registerAction({type:"updateAxisPointer",event:"updateAxisPointer",update:":updateAxisPointer"},HG)}function ri(e){ue(vA),ue(yu)}var KG=function(e){gt(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.makeElOption=function(a,r,n,i,o){var s=n.axis;s.dim==="angle"&&(this.animationThreshold=Math.PI/18);var l=s.polar,c=l.getOtherAxis(s),u=c.getExtent(),h=s.dataToCoord(r),d=i.get("type");if(d&&d!=="none"){var f=n0(i),p=QG[d](s,l,h,u);p.style=f,a.graphicKey=p.type,a.pointer=p}var g=i.get(["label","margin"]),v=JG(r,n,i,l,g);$k(a,n,i,o,v)},t}(r0);function JG(e,t,a,r,n){var i=t.axis,o=i.dataToCoord(e),s=r.getAngleAxis().getExtent()[0];s=s/180*Math.PI;var l=r.getRadiusAxis().getExtent(),c,u,h;if(i.dim==="radius"){var d=$o();cl(d,d,s),Ei(d,d,[r.cx,r.cy]),c=qn([o,-n],d);var f=t.getModel("axisLabel").get("rotate")||0,p=ir.innerTextLayout(s,f*Math.PI/180,-1);u=p.textAlign,h=p.textVerticalAlign}else{var g=l[1];c=r.coordToPoint([g+n,o]);var v=r.cx,_=r.cy;u=Math.abs(c[0]-v)/g<.3?"center":c[0]>v?"left":"right",h=Math.abs(c[1]-_)/g<.3?"middle":c[1]>_?"top":"bottom"}return{position:c,align:u,verticalAlign:h}}var QG={line:function(e,t,a,r){return e.dim==="angle"?{type:"Line",shape:o0(t.coordToPoint([r[0],a]),t.coordToPoint([r[1],a]))}:{type:"Circle",shape:{cx:t.cx,cy:t.cy,r:a}}},shadow:function(e,t,a,r){var n=Math.max(1,e.getBandWidth()),i=Math.PI/180;return e.dim==="angle"?{type:"Sector",shape:Yx(t.cx,t.cy,r[0],r[1],(-a-n/2)*i,(-a+n/2)*i)}:{type:"Sector",shape:Yx(t.cx,t.cy,a-n/2,a+n/2,0,Math.PI*2)}}},tH=function(e){gt(t,e);function t(){var a=e!==null&&e.apply(this,arguments)||this;return a.type=t.type,a}return t.prototype.findAxisModel=function(a){var r,n=this.ecModel;return n.eachComponent(a,function(i){i.getCoordSysModel()===this&&(r=i)},this),r},t.type="polar",t.dependencies=["radiusAxis","angleAxis"],t.defaultOption={z:0,center:["50%","50%"],radius:"80%"},t}(da),s0=function(e){gt(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getCoordSysModel=function(){return this.getReferringComponents("polar",yr).models[0]},t.type="polarAxis",t}(da);$r(s0,iu);var eH=function(e){gt(t,e);function t(){var a=e!==null&&e.apply(this,arguments)||this;return a.type=t.type,a}return t.type="angleAxis",t}(s0),aH=function(e){gt(t,e);function t(){var a=e!==null&&e.apply(this,arguments)||this;return a.type=t.type,a}return t.type="radiusAxis",t}(s0),l0=function(e){gt(t,e);function t(a,r){return e.call(this,"radius",a,r)||this}return t.prototype.pointToData=function(a,r){return this.polar.pointToData(a,r)[this.dim==="radius"?0:1]},t}(Jr);l0.prototype.dataToRadius=Jr.prototype.dataToCoord;l0.prototype.radiusToData=Jr.prototype.coordToData;var rH=ia(),c0=function(e){gt(t,e);function t(a,r){return e.call(this,"angle",a,r||[0,360])||this}return t.prototype.pointToData=function(a,r){return this.polar.pointToData(a,r)[this.dim==="radius"?0:1]},t.prototype.calculateCategoryInterval=function(){var a=this,r=a.getLabelModel(),n=a.scale,i=n.getExtent(),o=n.count();if(i[1]-i[0]<1)return 0;var s=i[0],l=a.dataToCoord(s+1)-a.dataToCoord(s),c=Math.abs(l),u=gy(s==null?"":s+"",r.getFont(),"center","top"),h=Math.max(u.height,7),d=h/c;isNaN(d)&&(d=1/0);var f=Math.max(0,Math.floor(d)),p=rH(a.model),g=p.lastAutoInterval,v=p.lastTickCount;return g!=null&&v!=null&&Math.abs(g-f)<=1&&Math.abs(v-o)<=1&&g>f?f=g:(p.lastTickCount=o,p.lastAutoInterval=f),f},t}(Jr);c0.prototype.dataToAngle=Jr.prototype.dataToCoord;c0.prototype.angleToData=Jr.prototype.coordToData;var Wk=["radius","angle"],nH=function(){function e(t){this.dimensions=Wk,this.type="polar",this.cx=0,this.cy=0,this._radiusAxis=new l0,this._angleAxis=new c0,this.axisPointerEnabled=!0,this.name=t||"",this._radiusAxis.polar=this._angleAxis.polar=this}return e.prototype.containPoint=function(t){var a=this.pointToCoord(t);return this._radiusAxis.contain(a[0])&&this._angleAxis.contain(a[1])},e.prototype.containData=function(t){return this._radiusAxis.containData(t[0])&&this._angleAxis.containData(t[1])},e.prototype.getAxis=function(t){var a="_"+t+"Axis";return this[a]},e.prototype.getAxes=function(){return[this._radiusAxis,this._angleAxis]},e.prototype.getAxesByScale=function(t){var a=[],r=this._angleAxis,n=this._radiusAxis;return r.scale.type===t&&a.push(r),n.scale.type===t&&a.push(n),a},e.prototype.getAngleAxis=function(){return this._angleAxis},e.prototype.getRadiusAxis=function(){return this._radiusAxis},e.prototype.getOtherAxis=function(t){var a=this._angleAxis;return t===a?this._radiusAxis:a},e.prototype.getBaseAxis=function(){return this.getAxesByScale("ordinal")[0]||this.getAxesByScale("time")[0]||this.getAngleAxis()},e.prototype.getTooltipAxes=function(t){var a=t!=null&&t!=="auto"?this.getAxis(t):this.getBaseAxis();return{baseAxes:[a],otherAxes:[this.getOtherAxis(a)]}},e.prototype.dataToPoint=function(t,a){return this.coordToPoint([this._radiusAxis.dataToRadius(t[0],a),this._angleAxis.dataToAngle(t[1],a)])},e.prototype.pointToData=function(t,a){var r=this.pointToCoord(t);return[this._radiusAxis.radiusToData(r[0],a),this._angleAxis.angleToData(r[1],a)]},e.prototype.pointToCoord=function(t){var a=t[0]-this.cx,r=t[1]-this.cy,n=this.getAngleAxis(),i=n.getExtent(),o=Math.min(i[0],i[1]),s=Math.max(i[0],i[1]);n.inverse?o=s-360:s=o+360;var l=Math.sqrt(a*a+r*r);a/=l,r/=l;for(var c=Math.atan2(-r,a)/Math.PI*180,u=c<o?1:-1;c<o||c>s;)c+=u*360;return[l,c]},e.prototype.coordToPoint=function(t){var a=t[0],r=t[1]/180*Math.PI,n=Math.cos(r)*a+this.cx,i=-Math.sin(r)*a+this.cy;return[n,i]},e.prototype.getArea=function(){var t=this.getAngleAxis(),a=this.getRadiusAxis(),r=a.getExtent().slice();r[0]>r[1]&&r.reverse();var n=t.getExtent(),i=Math.PI/180,o=1e-4;return{cx:this.cx,cy:this.cy,r0:r[0],r:r[1],startAngle:-n[0]*i,endAngle:-n[1]*i,clockwise:t.inverse,contain:function(s,l){var c=s-this.cx,u=l-this.cy,h=c*c+u*u,d=this.r,f=this.r0;return d!==f&&h-o<=d*d&&h+o>=f*f}}},e.prototype.convertToPixel=function(t,a,r){var n=eS(a);return n===this?this.dataToPoint(r):null},e.prototype.convertFromPixel=function(t,a,r){var n=eS(a);return n===this?this.pointToData(r):null},e}();function eS(e){var t=e.seriesModel,a=e.polarModel;return a&&a.coordinateSystem||t&&t.coordinateSystem}function iH(e,t,a){var r=t.get("center"),n=a.getWidth(),i=a.getHeight();e.cx=Ft(r[0],n),e.cy=Ft(r[1],i);var o=e.getRadiusAxis(),s=Math.min(n,i)/2,l=t.get("radius");l==null?l=[0,"100%"]:Nt(l)||(l=[0,l]);var c=[Ft(l[0],s),Ft(l[1],s)];o.inverse?o.setExtent(c[1],c[0]):o.setExtent(c[0],c[1])}function oH(e,t){var a=this,r=a.getAngleAxis(),n=a.getRadiusAxis();if(r.scale.setExtent(1/0,-1/0),n.scale.setExtent(1/0,-1/0),e.eachSeries(function(s){if(s.coordinateSystem===a){var l=s.getData();G(ov(l,"radius"),function(c){n.scale.unionExtentFromData(l,c)}),G(ov(l,"angle"),function(c){r.scale.unionExtentFromData(l,c)})}}),$s(r.scale,r.model),$s(n.scale,n.model),r.type==="category"&&!r.onBand){var i=r.getExtent(),o=360/r.scale.count();r.inverse?i[1]+=o:i[1]-=o,r.setExtent(i[0],i[1])}}function sH(e){return e.mainType==="angleAxis"}function aS(e,t){var a;if(e.type=t.get("type"),e.scale=uf(t),e.onBand=t.get("boundaryGap")&&e.type==="category",e.inverse=t.get("inverse"),sH(t)){e.inverse=e.inverse!==t.get("clockwise");var r=t.get("startAngle"),n=(a=t.get("endAngle"))!==null&&a!==void 0?a:r+(e.inverse?-360:360);e.setExtent(r,n)}t.axis=e,e.model=t}var lH={dimensions:Wk,create:function(e,t){var a=[];return e.eachComponent("polar",function(r,n){var i=new nH(n+"");i.update=oH;var o=i.getRadiusAxis(),s=i.getAngleAxis(),l=r.findAxisModel("radiusAxis"),c=r.findAxisModel("angleAxis");aS(o,l),aS(s,c),iH(i,r,t),a.push(i),r.coordinateSystem=i,i.model=r}),e.eachSeries(function(r){if(r.get("coordinateSystem")==="polar"){var n=r.getReferringComponents("polar",yr).models[0];r.coordinateSystem=n.coordinateSystem}}),a}},cH=["axisLine","axisLabel","axisTick","minorTick","splitLine","minorSplitLine","splitArea"];function ju(e,t,a){t[1]>t[0]&&(t=t.slice().reverse());var r=e.coordToPoint([t[0],a]),n=e.coordToPoint([t[1],a]);return{x1:r[0],y1:r[1],x2:n[0],y2:n[1]}}function Yu(e){var t=e.getRadiusAxis();return t.inverse?0:1}function rS(e){var t=e[0],a=e[e.length-1];t&&a&&Math.abs(Math.abs(t.coord-a.coord)-360)<1e-4&&e.pop()}var uH=function(e){gt(t,e);function t(){var a=e!==null&&e.apply(this,arguments)||this;return a.type=t.type,a.axisPointerClass="PolarAxisPointer",a}return t.prototype.render=function(a,r){if(this.group.removeAll(),!!a.get("show")){var n=a.axis,i=n.polar,o=i.getRadiusAxis().getExtent(),s=n.getTicksCoords(),l=n.getMinorTicksCoords(),c=Ot(n.getViewLabels(),function(u){u=Pe(u);var h=n.scale,d=h.type==="ordinal"?h.getRawOrdinalNumber(u.tickValue):u.tickValue;return u.coord=n.dataToCoord(d),u});rS(c),rS(s),G(cH,function(u){a.get([u,"show"])&&(!n.scale.isBlank()||u==="axisLine")&&hH[u](this.group,a,i,s,l,o,c)},this)}},t.type="angleAxis",t}(Vo),hH={axisLine:function(e,t,a,r,n,i){var o=t.getModel(["axisLine","lineStyle"]),s=a.getAngleAxis(),l=Math.PI/180,c=s.getExtent(),u=Yu(a),h=u?0:1,d,f=Math.abs(c[1]-c[0])===360?"Circle":"Arc";i[h]===0?d=new No[f]({shape:{cx:a.cx,cy:a.cy,r:i[u],startAngle:-c[0]*l,endAngle:-c[1]*l,clockwise:s.inverse},style:o.getLineStyle(),z2:1,silent:!0}):d=new rT({shape:{cx:a.cx,cy:a.cy,r:i[u],r0:i[h]},style:o.getLineStyle(),z2:1,silent:!0}),d.style.fill=null,e.add(d)},axisTick:function(e,t,a,r,n,i){var o=t.getModel("axisTick"),s=(o.get("inside")?-1:1)*o.get("length"),l=i[Yu(a)],c=Ot(r,function(u){return new tr({shape:ju(a,[l,l+s],u.coord)})});e.add(Vr(c,{style:_e(o.getModel("lineStyle").getLineStyle(),{stroke:t.get(["axisLine","lineStyle","color"])})}))},minorTick:function(e,t,a,r,n,i){if(n.length){for(var o=t.getModel("axisTick"),s=t.getModel("minorTick"),l=(o.get("inside")?-1:1)*s.get("length"),c=i[Yu(a)],u=[],h=0;h<n.length;h++)for(var d=0;d<n[h].length;d++)u.push(new tr({shape:ju(a,[c,c+l],n[h][d].coord)}));e.add(Vr(u,{style:_e(s.getModel("lineStyle").getLineStyle(),_e(o.getLineStyle(),{stroke:t.get(["axisLine","lineStyle","color"])}))}))}},axisLabel:function(e,t,a,r,n,i,o){var s=t.getCategories(!0),l=t.getModel("axisLabel"),c=l.get("margin"),u=t.get("triggerEvent");G(o,function(h,d){var f=l,p=h.tickValue,g=i[Yu(a)],v=a.coordToPoint([g+c,h.coord]),_=a.cx,y=a.cy,b=Math.abs(v[0]-_)/g<.3?"center":v[0]>_?"left":"right",w=Math.abs(v[1]-y)/g<.3?"middle":v[1]>y?"top":"bottom";if(s&&s[p]){var T=s[p];na(T)&&T.textStyle&&(f=new _a(T.textStyle,l,l.ecModel))}var C=new Oe({silent:ir.isLabelSilent(t),style:Ke(f,{x:v[0],y:v[1],fill:f.getTextColor()||t.get(["axisLine","lineStyle","color"]),text:h.formattedLabel,align:b,verticalAlign:w})});if(e.add(C),u){var A=ir.makeAxisEventDataBase(t);A.targetType="axisLabel",A.value=h.rawLabel,Ae(C).eventData=A}},this)},splitLine:function(e,t,a,r,n,i){var o=t.getModel("splitLine"),s=o.getModel("lineStyle"),l=s.get("color"),c=0;l=l instanceof Array?l:[l];for(var u=[],h=0;h<r.length;h++){var d=c++%l.length;u[d]=u[d]||[],u[d].push(new tr({shape:ju(a,i,r[h].coord)}))}for(var h=0;h<u.length;h++)e.add(Vr(u[h],{style:_e({stroke:l[h%l.length]},s.getLineStyle()),silent:!0,z:t.get("z")}))},minorSplitLine:function(e,t,a,r,n,i){if(n.length){for(var o=t.getModel("minorSplitLine"),s=o.getModel("lineStyle"),l=[],c=0;c<n.length;c++)for(var u=0;u<n[c].length;u++)l.push(new tr({shape:ju(a,i,n[c][u].coord)}));e.add(Vr(l,{style:s.getLineStyle(),silent:!0,z:t.get("z")}))}},splitArea:function(e,t,a,r,n,i){if(r.length){var o=t.getModel("splitArea"),s=o.getModel("areaStyle"),l=s.get("color"),c=0;l=l instanceof Array?l:[l];for(var u=[],h=Math.PI/180,d=-r[0].coord*h,f=Math.min(i[0],i[1]),p=Math.max(i[0],i[1]),g=t.get("clockwise"),v=1,_=r.length;v<=_;v++){var y=v===_?r[0].coord:r[v].coord,b=c++%l.length;u[b]=u[b]||[],u[b].push(new Pr({shape:{cx:a.cx,cy:a.cy,r0:f,r:p,startAngle:d,endAngle:-y*h,clockwise:g},silent:!0})),d=-y*h}for(var v=0;v<u.length;v++)e.add(Vr(u[v],{style:_e({fill:l[v%l.length]},s.getAreaStyle()),silent:!0}))}}},dH=["axisLine","axisTickLabel","axisName"],fH=["splitLine","splitArea","minorSplitLine"],pH=function(e){gt(t,e);function t(){var a=e!==null&&e.apply(this,arguments)||this;return a.type=t.type,a.axisPointerClass="PolarAxisPointer",a}return t.prototype.render=function(a,r){if(this.group.removeAll(),!!a.get("show")){var n=this._axisGroup,i=this._axisGroup=new ie;this.group.add(i);var o=a.axis,s=o.polar,l=s.getAngleAxis(),c=o.getTicksCoords(),u=o.getMinorTicksCoords(),h=l.getExtent()[0],d=o.getExtent(),f=vH(s,a,h),p=new ir(a,f);G(dH,p.add,p),i.add(p.getGroup()),hf(n,i,a),G(fH,function(g){a.get([g,"show"])&&!o.scale.isBlank()&&gH[g](this.group,a,s,h,d,c,u)},this)}},t.type="radiusAxis",t}(Vo),gH={splitLine:function(e,t,a,r,n,i){var o=t.getModel("splitLine"),s=o.getModel("lineStyle"),l=s.get("color"),c=0,u=a.getAngleAxis(),h=Math.PI/180,d=u.getExtent(),f=Math.abs(d[1]-d[0])===360?"Circle":"Arc";l=l instanceof Array?l:[l];for(var p=[],g=0;g<i.length;g++){var v=c++%l.length;p[v]=p[v]||[],p[v].push(new No[f]({shape:{cx:a.cx,cy:a.cy,r:Math.max(i[g].coord,0),startAngle:-d[0]*h,endAngle:-d[1]*h,clockwise:u.inverse}}))}for(var g=0;g<p.length;g++)e.add(Vr(p[g],{style:_e({stroke:l[g%l.length],fill:null},s.getLineStyle()),silent:!0}))},minorSplitLine:function(e,t,a,r,n,i,o){if(o.length){for(var s=t.getModel("minorSplitLine"),l=s.getModel("lineStyle"),c=[],u=0;u<o.length;u++)for(var h=0;h<o[u].length;h++)c.push(new ou({shape:{cx:a.cx,cy:a.cy,r:o[u][h].coord}}));e.add(Vr(c,{style:_e({fill:null},l.getLineStyle()),silent:!0}))}},splitArea:function(e,t,a,r,n,i){if(i.length){var o=t.getModel("splitArea"),s=o.getModel("areaStyle"),l=s.get("color"),c=0;l=l instanceof Array?l:[l];for(var u=[],h=i[0].coord,d=1;d<i.length;d++){var f=c++%l.length;u[f]=u[f]||[],u[f].push(new Pr({shape:{cx:a.cx,cy:a.cy,r0:h,r:i[d].coord,startAngle:0,endAngle:Math.PI*2},silent:!0})),h=i[d].coord}for(var d=0;d<u.length;d++)e.add(Vr(u[d],{style:_e({fill:l[d%l.length]},s.getAreaStyle()),silent:!0}))}}};function vH(e,t,a){return{position:[e.cx,e.cy],rotation:a/180*Math.PI,labelDirection:-1,tickDirection:-1,nameDirection:1,labelRotate:t.getModel("axisLabel").get("rotate"),z2:1}}function qk(e){return e.get("stack")||"__ec_stack_"+e.seriesIndex}function Uk(e,t){return t.dim+e.model.componentIndex}function mH(e,t,a){var r={},n=yH(Va(t.getSeriesByType(e),function(i){return!t.isSeriesFiltered(i)&&i.coordinateSystem&&i.coordinateSystem.type==="polar"}));t.eachSeriesByType(e,function(i){if(i.coordinateSystem.type==="polar"){var o=i.getData(),s=i.coordinateSystem,l=s.getBaseAxis(),c=Uk(s,l),u=qk(i),h=n[c][u],d=h.offset,f=h.width,p=s.getOtherAxis(l),g=i.coordinateSystem.cx,v=i.coordinateSystem.cy,_=i.get("barMinHeight")||0,y=i.get("barMinAngle")||0;r[u]=r[u]||[];for(var b=o.mapDimension(p.dim),w=o.mapDimension(l.dim),T=Os(o,b),C=l.dim!=="radius"||!i.get("roundCap",!0),A=p.model,k=A.get("startValue"),L=p.dataToCoord(k||0),M=0,P=o.count();M<P;M++){var E=o.get(b,M),D=o.get(w,M),O=E>=0?"p":"n",B=L;T&&(r[u][D]||(r[u][D]={p:L,n:L}),B=r[u][D][O]);var R=void 0,V=void 0,z=void 0,W=void 0;if(p.dim==="radius"){var it=p.dataToCoord(E)-L,ot=l.dataToCoord(D);Math.abs(it)<_&&(it=(it<0?-1:1)*_),R=B,V=B+it,z=ot-d,W=z-f,T&&(r[u][D][O]=V)}else{var xt=p.dataToCoord(E,C)-L,j=l.dataToCoord(D);Math.abs(xt)<y&&(xt=(xt<0?-1:1)*y),R=j+d,V=R+f,z=B,W=B+xt,T&&(r[u][D][O]=W)}o.setItemLayout(M,{cx:g,cy:v,r0:R,r:V,startAngle:-z*Math.PI/180,endAngle:-W*Math.PI/180,clockwise:z>=W})}}})}function yH(e){var t={};G(e,function(r,n){var i=r.getData(),o=r.coordinateSystem,s=o.getBaseAxis(),l=Uk(o,s),c=s.getExtent(),u=s.type==="category"?s.getBandWidth():Math.abs(c[1]-c[0])/i.count(),h=t[l]||{bandWidth:u,remainedWidth:u,autoWidthCount:0,categoryGap:"20%",gap:"30%",stacks:{}},d=h.stacks;t[l]=h;var f=qk(r);d[f]||h.autoWidthCount++,d[f]=d[f]||{width:0,maxWidth:0};var p=Ft(r.get("barWidth"),u),g=Ft(r.get("barMaxWidth"),u),v=r.get("barGap"),_=r.get("barCategoryGap");p&&!d[f].width&&(p=Math.min(h.remainedWidth,p),d[f].width=p,h.remainedWidth-=p),g&&(d[f].maxWidth=g),v!=null&&(h.gap=v),_!=null&&(h.categoryGap=_)});var a={};return G(t,function(r,n){a[n]={};var i=r.stacks,o=r.bandWidth,s=Ft(r.categoryGap,o),l=Ft(r.gap,1),c=r.remainedWidth,u=r.autoWidthCount,h=(c-s)/(u+(u-1)*l);h=Math.max(h,0),G(i,function(g,v){var _=g.maxWidth;_&&_<h&&(_=Math.min(_,c),g.width&&(_=Math.min(_,g.width)),c-=_,g.width=_,u--)}),h=(c-s)/(u+(u-1)*l),h=Math.max(h,0);var d=0,f;G(i,function(g,v){g.width||(g.width=h),f=g,d+=g.width*(1+l)}),f&&(d-=f.width*l);var p=-d/2;G(i,function(g,v){a[n][v]=a[n][v]||{offset:p,width:g.width},p+=g.width*(1+l)})}),a}var _H={startAngle:90,clockwise:!0,splitNumber:12,axisLabel:{rotate:0}},bH={splitNumber:5},xH=function(e){gt(t,e);function t(){var a=e!==null&&e.apply(this,arguments)||this;return a.type=t.type,a}return t.type="polar",t}(ma);function SH(e){ue(yu),Vo.registerAxisPointerClass("PolarAxisPointer",KG),e.registerCoordinateSystem("polar",lH),e.registerComponentModel(tH),e.registerComponentView(xH),Hs(e,"angle",eH,_H),Hs(e,"radius",aH,bH),e.registerComponentView(uH),e.registerComponentView(pH),e.registerLayout(pe(mH,"bar"))}function Hv(e,t){t=t||{};var a=e.coordinateSystem,r=e.axis,n={},i=r.position,o=r.orient,s=a.getRect(),l=[s.x,s.x+s.width,s.y,s.y+s.height],c={horizontal:{top:l[2],bottom:l[3]},vertical:{left:l[0],right:l[1]}};n.position=[o==="vertical"?c.vertical[i]:l[0],o==="horizontal"?c.horizontal[i]:l[3]];var u={horizontal:0,vertical:1};n.rotation=Math.PI/2*u[o];var h={top:-1,bottom:1,right:1,left:-1};n.labelDirection=n.tickDirection=n.nameDirection=h[i],e.get(["axisTick","inside"])&&(n.tickDirection=-n.tickDirection),Ma(t.labelInside,e.get(["axisLabel","inside"]))&&(n.labelDirection=-n.labelDirection);var d=t.rotate;return d==null&&(d=e.get(["axisLabel","rotate"])),n.labelRotation=i==="top"?-d:d,n.z2=1,n}var wH=["axisLine","axisTickLabel","axisName"],CH=["splitArea","splitLine"],TH=function(e){gt(t,e);function t(){var a=e!==null&&e.apply(this,arguments)||this;return a.type=t.type,a.axisPointerClass="SingleAxisPointer",a}return t.prototype.render=function(a,r,n,i){var o=this.group;o.removeAll();var s=this._axisGroup;this._axisGroup=new ie;var l=Hv(a),c=new ir(a,l);G(wH,c.add,c),o.add(this._axisGroup),o.add(c.getGroup()),G(CH,function(u){a.get([u,"show"])&&AH[u](this,this.group,this._axisGroup,a)},this),hf(s,this._axisGroup,a),e.prototype.render.call(this,a,r,n,i)},t.prototype.remove=function(){fA(this)},t.type="singleAxis",t}(Vo),AH={splitLine:function(e,t,a,r){var n=r.axis;if(!n.scale.isBlank()){var i=r.getModel("splitLine"),o=i.getModel("lineStyle"),s=o.get("color");s=s instanceof Array?s:[s];for(var l=o.get("width"),c=r.coordinateSystem.getRect(),u=n.isHorizontal(),h=[],d=0,f=n.getTicksCoords({tickModel:i}),p=[],g=[],v=0;v<f.length;++v){var _=n.toGlobalCoord(f[v].coord);u?(p[0]=_,p[1]=c.y,g[0]=_,g[1]=c.y+c.height):(p[0]=c.x,p[1]=_,g[0]=c.x+c.width,g[1]=_);var y=new tr({shape:{x1:p[0],y1:p[1],x2:g[0],y2:g[1]},silent:!0});Ac(y.shape,l);var b=d++%s.length;h[b]=h[b]||[],h[b].push(y)}for(var w=o.getLineStyle(["color"]),v=0;v<h.length;++v)t.add(Vr(h[v],{style:_e({stroke:s[v%s.length]},w),silent:!0}))}},splitArea:function(e,t,a,r){dA(e,a,r,r)}},bh=function(e){gt(t,e);function t(){var a=e!==null&&e.apply(this,arguments)||this;return a.type=t.type,a}return t.prototype.getCoordSysModel=function(){return this},t.type="singleAxis",t.layoutMode="box",t.defaultOption={left:"5%",top:"5%",right:"5%",bottom:"5%",type:"value",position:"bottom",orient:"horizontal",axisLine:{show:!0,lineStyle:{width:1,type:"solid"}},tooltip:{show:!0},axisTick:{show:!0,length:6,lineStyle:{width:1}},axisLabel:{show:!0,interval:"auto"},splitLine:{show:!0,lineStyle:{type:"dashed",opacity:.2}}},t}(da);$r(bh,iu.prototype);var kH=function(e){gt(t,e);function t(a,r,n,i,o){var s=e.call(this,a,r,n)||this;return s.type=i||"value",s.position=o||"bottom",s}return t.prototype.isHorizontal=function(){var a=this.position;return a==="top"||a==="bottom"},t.prototype.pointToData=function(a,r){return this.coordinateSystem.pointToData(a)[0]},t}(Jr),jk=["single"],DH=function(){function e(t,a,r){this.type="single",this.dimension="single",this.dimensions=jk,this.axisPointerEnabled=!0,this.model=t,this._init(t,a,r)}return e.prototype._init=function(t,a,r){var n=this.dimension,i=new kH(n,uf(t),[0,0],t.get("type"),t.get("position")),o=i.type==="category";i.onBand=o&&t.get("boundaryGap"),i.inverse=t.get("inverse"),i.orient=t.get("orient"),t.axis=i,i.model=t,i.coordinateSystem=this,this._axis=i},e.prototype.update=function(t,a){t.eachSeries(function(r){if(r.coordinateSystem===this){var n=r.getData();G(n.mapDimensionsAll(this.dimension),function(i){this._axis.scale.unionExtentFromData(n,i)},this),$s(this._axis.scale,this._axis.model)}},this)},e.prototype.resize=function(t,a){this._rect=ka({left:t.get("left"),top:t.get("top"),right:t.get("right"),bottom:t.get("bottom"),width:t.get("width"),height:t.get("height")},{width:a.getWidth(),height:a.getHeight()}),this._adjustAxis()},e.prototype.getRect=function(){return this._rect},e.prototype._adjustAxis=function(){var t=this._rect,a=this._axis,r=a.isHorizontal(),n=r?[0,t.width]:[0,t.height],i=a.inverse?1:0;a.setExtent(n[i],n[1-i]),this._updateAxisTransform(a,r?t.x:t.y)},e.prototype._updateAxisTransform=function(t,a){var r=t.getExtent(),n=r[0]+r[1],i=t.isHorizontal();t.toGlobalCoord=i?function(o){return o+a}:function(o){return n-o+a},t.toLocalCoord=i?function(o){return o-a}:function(o){return n-o+a}},e.prototype.getAxis=function(){return this._axis},e.prototype.getBaseAxis=function(){return this._axis},e.prototype.getAxes=function(){return[this._axis]},e.prototype.getTooltipAxes=function(){return{baseAxes:[this.getAxis()],otherAxes:[]}},e.prototype.containPoint=function(t){var a=this.getRect(),r=this.getAxis(),n=r.orient;return n==="horizontal"?r.contain(r.toLocalCoord(t[0]))&&t[1]>=a.y&&t[1]<=a.y+a.height:r.contain(r.toLocalCoord(t[1]))&&t[0]>=a.y&&t[0]<=a.y+a.height},e.prototype.pointToData=function(t){var a=this.getAxis();return[a.coordToData(a.toLocalCoord(t[a.orient==="horizontal"?0:1]))]},e.prototype.dataToPoint=function(t){var a=this.getAxis(),r=this.getRect(),n=[],i=a.orient==="horizontal"?0:1;return t instanceof Array&&(t=t[0]),n[i]=a.toGlobalCoord(a.dataToCoord(+t)),n[1-i]=i===0?r.y+r.height/2:r.x+r.width/2,n},e.prototype.convertToPixel=function(t,a,r){var n=nS(a);return n===this?this.dataToPoint(r):null},e.prototype.convertFromPixel=function(t,a,r){var n=nS(a);return n===this?this.pointToData(r):null},e}();function nS(e){var t=e.seriesModel,a=e.singleAxisModel;return a&&a.coordinateSystem||t&&t.coordinateSystem}function LH(e,t){var a=[];return e.eachComponent("singleAxis",function(r,n){var i=new DH(r,e,t);i.name="single_"+n,i.resize(r,t),r.coordinateSystem=i,a.push(i)}),e.eachSeries(function(r){if(r.get("coordinateSystem")==="singleAxis"){var n=r.getReferringComponents("singleAxis",yr).models[0];r.coordinateSystem=n&&n.coordinateSystem}}),a}var IH={create:LH,dimensions:jk},iS=["x","y"],MH=["width","height"],EH=function(e){gt(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.makeElOption=function(a,r,n,i,o){var s=n.axis,l=s.coordinateSystem,c=ug(l,1-hd(s)),u=l.dataToPoint(r)[0],h=i.get("type");if(h&&h!=="none"){var d=n0(i),f=RH[h](s,u,c);f.style=d,a.graphicKey=f.type,a.pointer=f}var p=Hv(n);zk(r,a,p,n,i,o)},t.prototype.getHandleTransform=function(a,r,n){var i=Hv(r,{labelInside:!1});i.labelMargin=n.get(["handle","margin"]);var o=i0(r.axis,a,i);return{x:o[0],y:o[1],rotation:i.rotation+(i.labelDirection<0?Math.PI:0)}},t.prototype.updateHandleTransform=function(a,r,n,i){var o=n.axis,s=o.coordinateSystem,l=hd(o),c=ug(s,l),u=[a.x,a.y];u[l]+=r[l],u[l]=Math.min(c[1],u[l]),u[l]=Math.max(c[0],u[l]);var h=ug(s,1-l),d=(h[1]+h[0])/2,f=[d,d];return f[l]=u[l],{x:u[0],y:u[1],rotation:a.rotation,cursorPoint:f,tooltipOption:{verticalAlign:"middle"}}},t}(r0),RH={line:function(e,t,a){var r=o0([t,a[0]],[t,a[1]],hd(e));return{type:"Line",subPixelOptimize:!0,shape:r}},shadow:function(e,t,a){var r=e.getBandWidth(),n=a[1]-a[0];return{type:"Rect",shape:Vk([t-r/2,a[0]],[r,n],hd(e))}}};function hd(e){return e.isHorizontal()?0:1}function ug(e,t){var a=e.getRect();return[a[iS[t]],a[iS[t]]+a[MH[t]]]}var PH=function(e){gt(t,e);function t(){var a=e!==null&&e.apply(this,arguments)||this;return a.type=t.type,a}return t.type="single",t}(ma);function BH(e){ue(yu),Vo.registerAxisPointerClass("SingleAxisPointer",EH),e.registerComponentView(PH),e.registerComponentView(TH),e.registerComponentModel(bh),Hs(e,"single",bh,bh.defaultOption),e.registerCoordinateSystem("single",IH)}var OH=function(e){gt(t,e);function t(){var a=e!==null&&e.apply(this,arguments)||this;return a.type=t.type,a}return t.prototype.init=function(a,r,n){var i=lf(a);e.prototype.init.apply(this,arguments),oS(a,i)},t.prototype.mergeOption=function(a){e.prototype.mergeOption.apply(this,arguments),oS(this.option,a)},t.prototype.getCellSize=function(){return this.option.cellSize},t.type="calendar",t.defaultOption={z:2,left:80,top:60,cellSize:20,orient:"horizontal",splitLine:{show:!0,lineStyle:{color:"#000",width:1,type:"solid"}},itemStyle:{color:"#fff",borderWidth:1,borderColor:"#ccc"},dayLabel:{show:!0,firstDay:0,position:"start",margin:"50%",color:"#000"},monthLabel:{show:!0,position:"start",margin:5,align:"center",formatter:null,color:"#000"},yearLabel:{show:!0,position:null,margin:30,formatter:null,color:"#ccc",fontFamily:"sans-serif",fontWeight:"bolder",fontSize:20}},t}(da);function oS(e,t){var a=e.cellSize,r;Nt(a)?r=a:r=e.cellSize=[a,a],r.length===1&&(r[1]=r[0]);var n=Ot([0,1],function(i){return B5(t,i)&&(r[i]="auto"),r[i]!=null&&r[i]!=="auto"});cf(e,t,{type:"box",ignoreSize:n})}var NH=function(e){gt(t,e);function t(){var a=e!==null&&e.apply(this,arguments)||this;return a.type=t.type,a}return t.prototype.render=function(a,r,n){var i=this.group;i.removeAll();var o=a.coordinateSystem,s=o.getRangeInfo(),l=o.getOrient(),c=r.getLocaleModel();this._renderDayRect(a,s,i),this._renderLines(a,s,l,i),this._renderYearText(a,s,l,i),this._renderMonthText(a,c,l,i),this._renderWeekText(a,c,s,l,i)},t.prototype._renderDayRect=function(a,r,n){for(var i=a.coordinateSystem,o=a.getModel("itemStyle").getItemStyle(),s=i.getCellWidth(),l=i.getCellHeight(),c=r.start.time;c<=r.end.time;c=i.getNextNDay(c,1).time){var u=i.dataToRect([c],!1).tl,h=new Ge({shape:{x:u[0],y:u[1],width:s,height:l},cursor:"default",style:o});n.add(h)}},t.prototype._renderLines=function(a,r,n,i){var o=this,s=a.coordinateSystem,l=a.getModel(["splitLine","lineStyle"]).getLineStyle(),c=a.get(["splitLine","show"]),u=l.lineWidth;this._tlpoints=[],this._blpoints=[],this._firstDayOfMonth=[],this._firstDayPoints=[];for(var h=r.start,d=0;h.time<=r.end.time;d++){p(h.formatedDate),d===0&&(h=s.getDateInfo(r.start.y+"-"+r.start.m));var f=h.date;f.setMonth(f.getMonth()+1),h=s.getDateInfo(f)}p(s.getNextNDay(r.end.time,1).formatedDate);function p(g){o._firstDayOfMonth.push(s.getDateInfo(g)),o._firstDayPoints.push(s.dataToRect([g],!1).tl);var v=o._getLinePointsOfOneWeek(a,g,n);o._tlpoints.push(v[0]),o._blpoints.push(v[v.length-1]),c&&o._drawSplitline(v,l,i)}c&&this._drawSplitline(o._getEdgesPoints(o._tlpoints,u,n),l,i),c&&this._drawSplitline(o._getEdgesPoints(o._blpoints,u,n),l,i)},t.prototype._getEdgesPoints=function(a,r,n){var i=[a[0].slice(),a[a.length-1].slice()],o=n==="horizontal"?0:1;return i[0][o]=i[0][o]-r/2,i[1][o]=i[1][o]+r/2,i},t.prototype._drawSplitline=function(a,r,n){var i=new Kr({z2:20,shape:{points:a},style:r});n.add(i)},t.prototype._getLinePointsOfOneWeek=function(a,r,n){for(var i=a.coordinateSystem,o=i.getDateInfo(r),s=[],l=0;l<7;l++){var c=i.getNextNDay(o.time,l),u=i.dataToRect([c.time],!1);s[2*c.day]=u.tl,s[2*c.day+1]=u[n==="horizontal"?"bl":"tr"]}return s},t.prototype._formatterLabel=function(a,r){return ge(a)&&a?O5(a,r):Me(a)?a(r):r.nameMap},t.prototype._yearTextPositionControl=function(a,r,n,i,o){var s=r[0],l=r[1],c=["center","bottom"];i==="bottom"?(l+=o,c=["center","top"]):i==="left"?s-=o:i==="right"?(s+=o,c=["center","top"]):l-=o;var u=0;return(i==="left"||i==="right")&&(u=Math.PI/2),{rotation:u,x:s,y:l,style:{align:c[0],verticalAlign:c[1]}}},t.prototype._renderYearText=function(a,r,n,i){var o=a.getModel("yearLabel");if(o.get("show")){var s=o.get("margin"),l=o.get("position");l||(l=n!=="horizontal"?"top":"left");var c=[this._tlpoints[this._tlpoints.length-1],this._blpoints[0]],u=(c[0][0]+c[1][0])/2,h=(c[0][1]+c[1][1])/2,d=n==="horizontal"?0:1,f={top:[u,c[d][1]],bottom:[u,c[1-d][1]],left:[c[1-d][0],h],right:[c[d][0],h]},p=r.start.y;+r.end.y>+r.start.y&&(p=p+"-"+r.end.y);var g=o.get("formatter"),v={start:r.start.y,end:r.end.y,nameMap:p},_=this._formatterLabel(g,v),y=new Oe({z2:30,style:Ke(o,{text:_}),silent:o.get("silent")});y.attr(this._yearTextPositionControl(y,f[l],n,l,s)),i.add(y)}},t.prototype._monthTextPositionControl=function(a,r,n,i,o){var s="left",l="top",c=a[0],u=a[1];return n==="horizontal"?(u=u+o,r&&(s="center"),i==="start"&&(l="bottom")):(c=c+o,r&&(l="middle"),i==="start"&&(s="right")),{x:c,y:u,align:s,verticalAlign:l}},t.prototype._renderMonthText=function(a,r,n,i){var o=a.getModel("monthLabel");if(o.get("show")){var s=o.get("nameMap"),l=o.get("margin"),c=o.get("position"),u=o.get("align"),h=[this._tlpoints,this._blpoints];(!s||ge(s))&&(s&&(r=s1(s)||r),s=r.get(["time","monthAbbr"])||[]);var d=c==="start"?0:1,f=n==="horizontal"?0:1;l=c==="start"?-l:l;for(var p=u==="center",g=o.get("silent"),v=0;v<h[d].length-1;v++){var _=h[d][v].slice(),y=this._firstDayOfMonth[v];if(p){var b=this._firstDayPoints[v];_[f]=(b[f]+h[0][v+1][f])/2}var w=o.get("formatter"),T=s[+y.m-1],C={yyyy:y.y,yy:(y.y+"").slice(2),MM:y.m,M:+y.m,nameMap:T},A=this._formatterLabel(w,C),k=new Oe({z2:30,style:Vt(Ke(o,{text:A}),this._monthTextPositionControl(_,p,n,c,l)),silent:g});i.add(k)}}},t.prototype._weekTextPositionControl=function(a,r,n,i,o){var s="center",l="middle",c=a[0],u=a[1],h=n==="start";return r==="horizontal"?(c=c+i+(h?1:-1)*o[0]/2,s=h?"right":"left"):(u=u+i+(h?1:-1)*o[1]/2,l=h?"bottom":"top"),{x:c,y:u,align:s,verticalAlign:l}},t.prototype._renderWeekText=function(a,r,n,i,o){var s=a.getModel("dayLabel");if(s.get("show")){var l=a.coordinateSystem,c=s.get("position"),u=s.get("nameMap"),h=s.get("margin"),d=l.getFirstDayOfWeek();if(!u||ge(u)){u&&(r=s1(u)||r);var f=r.get(["time","dayOfWeekShort"]);u=f||Ot(r.get(["time","dayOfWeekAbbr"]),function(C){return C[0]})}var p=l.getNextNDay(n.end.time,7-n.lweek).time,g=[l.getCellWidth(),l.getCellHeight()];h=Ft(h,Math.min(g[1],g[0])),c==="start"&&(p=l.getNextNDay(n.start.time,-(7+n.fweek)).time,h=-h);for(var v=s.get("silent"),_=0;_<7;_++){var y=l.getNextNDay(p,_),b=l.dataToRect([y.time],!1).center,w=_;w=Math.abs((_+d)%7);var T=new Oe({z2:30,style:Vt(Ke(s,{text:u[w]}),this._weekTextPositionControl(b,i,c,h,g)),silent:v});o.add(T)}}},t.type="calendar",t}(ma),hg=864e5,$H=function(){function e(t,a,r){this.type="calendar",this.dimensions=e.dimensions,this.getDimensionsInfo=e.getDimensionsInfo,this._model=t}return e.getDimensionsInfo=function(){return[{name:"time",type:"time"},"value"]},e.prototype.getRangeInfo=function(){return this._rangeInfo},e.prototype.getModel=function(){return this._model},e.prototype.getRect=function(){return this._rect},e.prototype.getCellWidth=function(){return this._sw},e.prototype.getCellHeight=function(){return this._sh},e.prototype.getOrient=function(){return this._orient},e.prototype.getFirstDayOfWeek=function(){return this._firstDayOfWeek},e.prototype.getDateInfo=function(t){t=N5(t);var a=t.getFullYear(),r=t.getMonth()+1,n=r<10?"0"+r:""+r,i=t.getDate(),o=i<10?"0"+i:""+i,s=t.getDay();return s=Math.abs((s+7-this.getFirstDayOfWeek())%7),{y:a+"",m:n,d:o,day:s,time:t.getTime(),formatedDate:a+"-"+n+"-"+o,date:t}},e.prototype.getNextNDay=function(t,a){return a=a||0,a===0?this.getDateInfo(t):(t=new Date(this.getDateInfo(t).time),t.setDate(t.getDate()+a),this.getDateInfo(t))},e.prototype.update=function(t,a){this._firstDayOfWeek=+this._model.getModel("dayLabel").get("firstDay"),this._orient=this._model.get("orient"),this._lineWidth=this._model.getModel("itemStyle").getItemStyle().lineWidth||0,this._rangeInfo=this._getRangeInfo(this._initRangeOption());var r=this._rangeInfo.weeks||1,n=["width","height"],i=this._model.getCellSize().slice(),o=this._model.getBoxLayoutParams(),s=this._orient==="horizontal"?[r,7]:[7,r];G([0,1],function(h){u(i,h)&&(o[n[h]]=i[h]*s[h])});var l={width:a.getWidth(),height:a.getHeight()},c=this._rect=ka(o,l);G([0,1],function(h){u(i,h)||(i[h]=c[n[h]]/s[h])});function u(h,d){return h[d]!=null&&h[d]!=="auto"}this._sw=i[0],this._sh=i[1]},e.prototype.dataToPoint=function(t,a){Nt(t)&&(t=t[0]),a==null&&(a=!0);var r=this.getDateInfo(t),n=this._rangeInfo,i=r.formatedDate;if(a&&!(r.time>=n.start.time&&r.time<n.end.time+hg))return[NaN,NaN];var o=r.day,s=this._getRangeInfo([n.start.time,i]).nthWeek;return this._orient==="vertical"?[this._rect.x+o*this._sw+this._sw/2,this._rect.y+s*this._sh+this._sh/2]:[this._rect.x+s*this._sw+this._sw/2,this._rect.y+o*this._sh+this._sh/2]},e.prototype.pointToData=function(t){var a=this.pointToDate(t);return a&&a.time},e.prototype.dataToRect=function(t,a){var r=this.dataToPoint(t,a);return{contentShape:{x:r[0]-(this._sw-this._lineWidth)/2,y:r[1]-(this._sh-this._lineWidth)/2,width:this._sw-this._lineWidth,height:this._sh-this._lineWidth},center:r,tl:[r[0]-this._sw/2,r[1]-this._sh/2],tr:[r[0]+this._sw/2,r[1]-this._sh/2],br:[r[0]+this._sw/2,r[1]+this._sh/2],bl:[r[0]-this._sw/2,r[1]+this._sh/2]}},e.prototype.pointToDate=function(t){var a=Math.floor((t[0]-this._rect.x)/this._sw)+1,r=Math.floor((t[1]-this._rect.y)/this._sh)+1,n=this._rangeInfo.range;return this._orient==="vertical"?this._getDateByWeeksAndDay(r,a-1,n):this._getDateByWeeksAndDay(a,r-1,n)},e.prototype.convertToPixel=function(t,a,r){var n=sS(a);return n===this?n.dataToPoint(r):null},e.prototype.convertFromPixel=function(t,a,r){var n=sS(a);return n===this?n.pointToData(r):null},e.prototype.containPoint=function(t){return console.warn("Not implemented."),!1},e.prototype._initRangeOption=function(){var t=this._model.get("range"),a;if(Nt(t)&&t.length===1&&(t=t[0]),Nt(t))a=t;else{var r=t.toString();if(/^\d{4}$/.test(r)&&(a=[r+"-01-01",r+"-12-31"]),/^\d{4}[\/|-]\d{1,2}$/.test(r)){var n=this.getDateInfo(r),i=n.date;i.setMonth(i.getMonth()+1);var o=this.getNextNDay(i,-1);a=[n.formatedDate,o.formatedDate]}/^\d{4}[\/|-]\d{1,2}[\/|-]\d{1,2}$/.test(r)&&(a=[r,r])}if(!a)return t;var s=this._getRangeInfo(a);return s.start.time>s.end.time&&a.reverse(),a},e.prototype._getRangeInfo=function(t){var a=[this.getDateInfo(t[0]),this.getDateInfo(t[1])],r;a[0].time>a[1].time&&(r=!0,a.reverse());var n=Math.floor(a[1].time/hg)-Math.floor(a[0].time/hg)+1,i=new Date(a[0].time),o=i.getDate(),s=a[1].date.getDate();i.setDate(o+n-1);var l=i.getDate();if(l!==s)for(var c=i.getTime()-a[1].time>0?1:-1;(l=i.getDate())!==s&&(i.getTime()-a[1].time)*c>0;)n-=c,i.setDate(l-c);var u=Math.floor((n+a[0].day+6)/7),h=r?-u+1:u-1;return r&&a.reverse(),{range:[a[0].formatedDate,a[1].formatedDate],start:a[0],end:a[1],allDay:n,weeks:u,nthWeek:h,fweek:a[0].day,lweek:a[1].day}},e.prototype._getDateByWeeksAndDay=function(t,a,r){var n=this._getRangeInfo(r);if(t>n.weeks||t===0&&a<n.fweek||t===n.weeks&&a>n.lweek)return null;var i=(t-1)*7-n.fweek+a,o=new Date(n.start.time);return o.setDate(+n.start.d+i),this.getDateInfo(o)},e.create=function(t,a){var r=[];return t.eachComponent("calendar",function(n){var i=new e(n);r.push(i),n.coordinateSystem=i}),t.eachSeries(function(n){n.get("coordinateSystem")==="calendar"&&(n.coordinateSystem=r[n.get("calendarIndex")||0])}),r},e.dimensions=["time","value"],e}();function sS(e){var t=e.calendarModel,a=e.seriesModel,r=t?t.coordinateSystem:a?a.coordinateSystem:null;return r}function FH(e){e.registerComponentModel(OH),e.registerComponentView(NH),e.registerCoordinateSystem("calendar",$H)}function zH(e,t){var a=e.existing;if(t.id=e.keyInfo.id,!t.type&&a&&(t.type=a.type),t.parentId==null){var r=t.parentOption;r?t.parentId=r.id:a&&(t.parentId=a.parentId)}t.parentOption=null}function lS(e,t){var a;return G(t,function(r){e[r]!=null&&e[r]!=="auto"&&(a=!0)}),a}function VH(e,t,a){var r=Vt({},a),n=e[t],i=a.$action||"merge";i==="merge"?n?(Be(n,r,!0),cf(n,r,{ignoreSize:!0}),F5(a,n),Xu(a,n),Xu(a,n,"shape"),Xu(a,n,"style"),Xu(a,n,"extra"),a.clipPath=n.clipPath):e[t]=r:i==="replace"?e[t]=r:i==="remove"&&n&&(e[t]=null)}var Yk=["transition","enterFrom","leaveTo"],GH=Yk.concat(["enterAnimation","updateAnimation","leaveAnimation"]);function Xu(e,t,a){if(a&&(!e[a]&&t[a]&&(e[a]={}),e=e[a],t=t[a]),!(!e||!t))for(var r=a?Yk:GH,n=0;n<r.length;n++){var i=r[n];e[i]==null&&t[i]!=null&&(e[i]=t[i])}}function HH(e,t){if(e&&(e.hv=t.hv=[lS(t,["left","right"]),lS(t,["top","bottom"])],e.type==="group")){var a=e,r=t;a.width==null&&(a.width=r.width=0),a.height==null&&(a.height=r.height=0)}}var WH=function(e){gt(t,e);function t(){var a=e!==null&&e.apply(this,arguments)||this;return a.type=t.type,a.preventAutoZ=!0,a}return t.prototype.mergeOption=function(a,r){var n=this.option.elements;this.option.elements=null,e.prototype.mergeOption.call(this,a,r),this.option.elements=n},t.prototype.optionUpdated=function(a,r){var n=this.option,i=(r?n:a).elements,o=n.elements=r?[]:n.elements,s=[];this._flatten(i,s,null);var l=$5(o,s,"normalMerge"),c=this._elOptionsToUpdate=[];G(l,function(u,h){var d=u.newOption;d&&(c.push(d),zH(u,d),VH(o,h,d),HH(o[h],d))},this),n.elements=Va(o,function(u){return u&&delete u.$action,u!=null})},t.prototype._flatten=function(a,r,n){G(a,function(i){if(i){n&&(i.parentOption=n),r.push(i);var o=i.children;o&&o.length&&this._flatten(o,r,i),delete i.children}},this)},t.prototype.useElOptionsToUpdate=function(){var a=this._elOptionsToUpdate;return this._elOptionsToUpdate=null,a},t.type="graphic",t.defaultOption={elements:[]},t}(da),cS={path:null,compoundPath:null,group:ie,image:Zr,text:Oe},Lr=ia(),qH=function(e){gt(t,e);function t(){var a=e!==null&&e.apply(this,arguments)||this;return a.type=t.type,a}return t.prototype.init=function(){this._elMap=ke()},t.prototype.render=function(a,r,n){a!==this._lastGraphicModel&&this._clear(),this._lastGraphicModel=a,this._updateElements(a),this._relocate(a,n)},t.prototype._updateElements=function(a){var r=a.useElOptionsToUpdate();if(r){var n=this._elMap,i=this.group,o=a.get("z"),s=a.get("zlevel");G(r,function(l){var c=zn(l.id,null),u=c!=null?n.get(c):null,h=zn(l.parentId,null),d=h!=null?n.get(h):i,f=l.type,p=l.style;f==="text"&&p&&l.hv&&l.hv[1]&&(p.textVerticalAlign=p.textBaseline=p.verticalAlign=p.align=null);var g=l.textContent,v=l.textConfig;if(p&&Dk(p,f,!!v,!!g)){var _=Lk(p,f,!0);!v&&_.textConfig&&(v=l.textConfig=_.textConfig),!g&&_.textContent&&(g=_.textContent)}var y=UH(l),b=l.$action||"merge",w=b==="merge",T=b==="replace";if(w){var C=!u,A=u;C?A=uS(c,d,l.type,n):(A&&(Lr(A).isNew=!1),Rk(A)),A&&(yh(A,y,a,{isInit:C}),hS(A,l,o,s))}else if(T){xh(u,l,n,a);var k=uS(c,d,l.type,n);k&&(yh(k,y,a,{isInit:!0}),hS(k,l,o,s))}else b==="remove"&&(Mk(u,l),xh(u,l,n,a));var L=n.get(c);if(L&&g)if(w){var M=L.getTextContent();M?M.attr(g):L.setTextContent(new Oe(g))}else T&&L.setTextContent(new Oe(g));if(L){var P=l.clipPath;if(P){var E=P.type,D=void 0,C=!1;if(w){var O=L.getClipPath();C=!O||Lr(O).type!==E,D=C?Wv(E):O}else T&&(C=!0,D=Wv(E));L.setClipPath(D),yh(D,P,a,{isInit:C}),cd(D,P.keyframeAnimation,a)}var B=Lr(L);L.setTextConfig(v),B.option=l,jH(L,a,l),ll({el:L,componentModel:a,itemName:L.name,itemTooltipOption:l.tooltip}),cd(L,l.keyframeAnimation,a)}})}},t.prototype._relocate=function(a,r){for(var n=a.option.elements,i=this.group,o=this._elMap,s=r.getWidth(),l=r.getHeight(),c=["x","y"],u=0;u<n.length;u++){var h=n[u],d=zn(h.id,null),f=d!=null?o.get(d):null;if(!(!f||!f.isGroup)){var p=f.parent,g=p===i,v=Lr(f),_=Lr(p);v.width=Ft(v.option.width,g?s:_.width)||0,v.height=Ft(v.option.height,g?l:_.height)||0}}for(var u=n.length-1;u>=0;u--){var h=n[u],d=zn(h.id,null),f=d!=null?o.get(d):null;if(f){var p=f.parent,_=Lr(p),y=p===i?{width:s,height:l}:{width:_.width,height:_.height},b={},w=gf(f,h,y,null,{hv:h.hv,boundingMode:h.bounding},b);if(!Lr(f).isNew&&w){for(var T=h.transition,C={},A=0;A<c.length;A++){var k=c[A],L=b[k];T&&(_o(T)||Xe(T,k)>=0)?C[k]=L:f[k]=L}ze(f,C,a,0)}else f.attr(b)}}},t.prototype._clear=function(){var a=this,r=this._elMap;r.each(function(n){xh(n,Lr(n).option,r,a._lastGraphicModel)}),this._elMap=ke()},t.prototype.dispose=function(){this._clear()},t.type="graphic",t}(ma);function Wv(e){var t=Ht(cS,e)?cS[e]:yT(e),a=new t({});return Lr(a).type=e,a}function uS(e,t,a,r){var n=Wv(a);return t.add(n),r.set(e,n),Lr(n).id=e,Lr(n).isNew=!0,n}function xh(e,t,a,r){var n=e&&e.parent;n&&(e.type==="group"&&e.traverse(function(i){xh(i,t,a,r)}),kf(e,t,r),a.removeKey(Lr(e).id))}function hS(e,t,a,r){e.isGroup||G([["cursor",Co.prototype.cursor],["zlevel",r||0],["z",a||0],["z2",0]],function(n){var i=n[0];Ht(t,i)?e[i]=sa(t[i],n[1]):e[i]==null&&(e[i]=n[1])}),G(pa(t),function(n){if(n.indexOf("on")===0){var i=t[n];e[n]=Me(i)?i:null}}),Ht(t,"draggable")&&(e.draggable=t.draggable),t.name!=null&&(e.name=t.name),t.id!=null&&(e.id=t.id)}function UH(e){return e=Vt({},e),G(["id","parentId","$action","hv","bounding","textContent","clipPath"].concat(z5),function(t){delete e[t]}),e}function jH(e,t,a){var r=Ae(e).eventData;!e.silent&&!e.ignore&&!r&&(r=Ae(e).eventData={componentType:"graphic",componentIndex:t.componentIndex,name:e.name}),r&&(r.info=a.info)}function YH(e){e.registerComponentModel(WH),e.registerComponentView(qH),e.registerPreprocessor(function(t){var a=t.graphic;Nt(a)?!a[0]||!a[0].elements?t.graphic=[{elements:a}]:t.graphic=[t.graphic[0]]:a&&!a.elements&&(t.graphic=[{elements:[a]}])})}var dS=["x","y","radius","angle","single"],XH=["cartesian2d","polar","singleAxis"];function ZH(e){var t=e.get("coordinateSystem");return Xe(XH,t)>=0}function Ti(e){return e+"Axis"}function KH(e,t){var a=ke(),r=[],n=ke();e.eachComponent({mainType:"dataZoom",query:t},function(u){n.get(u.uid)||s(u)});var i;do i=!1,e.eachComponent("dataZoom",o);while(i);function o(u){!n.get(u.uid)&&l(u)&&(s(u),i=!0)}function s(u){n.set(u.uid,!0),r.push(u),c(u)}function l(u){var h=!1;return u.eachTargetAxis(function(d,f){var p=a.get(d);p&&p[f]&&(h=!0)}),h}function c(u){u.eachTargetAxis(function(h,d){(a.get(h)||a.set(h,[]))[d]=!0})}return r}function Xk(e){var t=e.ecModel,a={infoList:[],infoMap:ke()};return e.eachTargetAxis(function(r,n){var i=t.getComponent(Ti(r),n);if(i){var o=i.getCoordSysModel();if(o){var s=o.uid,l=a.infoMap.get(s);l||(l={model:o,axisModels:[]},a.infoList.push(l),a.infoMap.set(s,l)),l.axisModels.push(i)}}}),a}var dg=function(){function e(){this.indexList=[],this.indexMap=[]}return e.prototype.add=function(t){this.indexMap[t]||(this.indexList.push(t),this.indexMap[t]=!0)},e}(),Vc=function(e){gt(t,e);function t(){var a=e!==null&&e.apply(this,arguments)||this;return a.type=t.type,a._autoThrottle=!0,a._noTarget=!0,a._rangePropMode=["percent","percent"],a}return t.prototype.init=function(a,r,n){var i=fS(a);this.settledOption=i,this.mergeDefaultAndTheme(a,n),this._doInit(i)},t.prototype.mergeOption=function(a){var r=fS(a);Be(this.option,a,!0),Be(this.settledOption,r,!0),this._doInit(r)},t.prototype._doInit=function(a){var r=this.option;this._setDefaultThrottle(a),this._updateRangeUse(a);var n=this.settledOption;G([["start","startValue"],["end","endValue"]],function(i,o){this._rangePropMode[o]==="value"&&(r[i[0]]=n[i[0]]=null)},this),this._resetTarget()},t.prototype._resetTarget=function(){var a=this.get("orient",!0),r=this._targetAxisInfoMap=ke(),n=this._fillSpecifiedTargetAxis(r);n?this._orient=a||this._makeAutoOrientByTargetAxis():(this._orient=a||"horizontal",this._fillAutoTargetAxisByOrient(r,this._orient)),this._noTarget=!0,r.each(function(i){i.indexList.length&&(this._noTarget=!1)},this)},t.prototype._fillSpecifiedTargetAxis=function(a){var r=!1;return G(dS,function(n){var i=this.getReferringComponents(Ti(n),V5);if(i.specified){r=!0;var o=new dg;G(i.models,function(s){o.add(s.componentIndex)}),a.set(n,o)}},this),r},t.prototype._fillAutoTargetAxisByOrient=function(a,r){var n=this.ecModel,i=!0;if(i){var o=r==="vertical"?"y":"x",s=n.findComponents({mainType:o+"Axis"});l(s,o)}if(i){var s=n.findComponents({mainType:"singleAxis",filter:function(u){return u.get("orient",!0)===r}});l(s,"single")}function l(c,u){var h=c[0];if(h){var d=new dg;if(d.add(h.componentIndex),a.set(u,d),i=!1,u==="x"||u==="y"){var f=h.getReferringComponents("grid",yr).models[0];f&&G(c,function(p){h.componentIndex!==p.componentIndex&&f===p.getReferringComponents("grid",yr).models[0]&&d.add(p.componentIndex)})}}}i&&G(dS,function(c){if(i){var u=n.findComponents({mainType:Ti(c),filter:function(d){return d.get("type",!0)==="category"}});if(u[0]){var h=new dg;h.add(u[0].componentIndex),a.set(c,h),i=!1}}},this)},t.prototype._makeAutoOrientByTargetAxis=function(){var a;return this.eachTargetAxis(function(r){!a&&(a=r)},this),a==="y"?"vertical":"horizontal"},t.prototype._setDefaultThrottle=function(a){if(a.hasOwnProperty("throttle")&&(this._autoThrottle=!1),this._autoThrottle){var r=this.ecModel.option;this.option.throttle=r.animation&&r.animationDurationUpdate>0?100:20}},t.prototype._updateRangeUse=function(a){var r=this._rangePropMode,n=this.get("rangeMode");G([["start","startValue"],["end","endValue"]],function(i,o){var s=a[i[0]]!=null,l=a[i[1]]!=null;s&&!l?r[o]="percent":!s&&l?r[o]="value":n?r[o]=n[o]:s&&(r[o]="percent")})},t.prototype.noTarget=function(){return this._noTarget},t.prototype.getFirstTargetAxisModel=function(){var a;return this.eachTargetAxis(function(r,n){a==null&&(a=this.ecModel.getComponent(Ti(r),n))},this),a},t.prototype.eachTargetAxis=function(a,r){this._targetAxisInfoMap.each(function(n,i){G(n.indexList,function(o){a.call(r,i,o)})})},t.prototype.getAxisProxy=function(a,r){var n=this.getAxisModel(a,r);if(n)return n.__dzAxisProxy},t.prototype.getAxisModel=function(a,r){var n=this._targetAxisInfoMap.get(a);if(n&&n.indexMap[r])return this.ecModel.getComponent(Ti(a),r)},t.prototype.setRawRange=function(a){var r=this.option,n=this.settledOption;G([["start","startValue"],["end","endValue"]],function(i){(a[i[0]]!=null||a[i[1]]!=null)&&(r[i[0]]=n[i[0]]=a[i[0]],r[i[1]]=n[i[1]]=a[i[1]])},this),this._updateRangeUse(a)},t.prototype.setCalculatedRange=function(a){var r=this.option;G(["start","startValue","end","endValue"],function(n){r[n]=a[n]})},t.prototype.getPercentRange=function(){var a=this.findRepresentativeAxisProxy();if(a)return a.getDataPercentWindow()},t.prototype.getValueRange=function(a,r){if(a==null&&r==null){var n=this.findRepresentativeAxisProxy();if(n)return n.getDataValueWindow()}else return this.getAxisProxy(a,r).getDataValueWindow()},t.prototype.findRepresentativeAxisProxy=function(a){if(a)return a.__dzAxisProxy;for(var r,n=this._targetAxisInfoMap.keys(),i=0;i<n.length;i++)for(var o=n[i],s=this._targetAxisInfoMap.get(o),l=0;l<s.indexList.length;l++){var c=this.getAxisProxy(o,s.indexList[l]);if(c.hostedBy(this))return c;r||(r=c)}return r},t.prototype.getRangePropMode=function(){return this._rangePropMode.slice()},t.prototype.getOrient=function(){return this._orient},t.type="dataZoom",t.dependencies=["xAxis","yAxis","radiusAxis","angleAxis","singleAxis","series","toolbox"],t.defaultOption={z:4,filterMode:"filter",start:0,end:100},t}(da);function fS(e){var t={};return G(["start","end","startValue","endValue","throttle"],function(a){e.hasOwnProperty(a)&&(t[a]=e[a])}),t}var JH=function(e){gt(t,e);function t(){var a=e!==null&&e.apply(this,arguments)||this;return a.type=t.type,a}return t.type="dataZoom.select",t}(Vc),u0=function(e){gt(t,e);function t(){var a=e!==null&&e.apply(this,arguments)||this;return a.type=t.type,a}return t.prototype.render=function(a,r,n,i){this.dataZoomModel=a,this.ecModel=r,this.api=n},t.type="dataZoom",t}(ma),QH=function(e){gt(t,e);function t(){var a=e!==null&&e.apply(this,arguments)||this;return a.type=t.type,a}return t.type="dataZoom.select",t}(u0),ss=G,pS=Er,tW=function(){function e(t,a,r,n){this._dimName=t,this._axisIndex=a,this.ecModel=n,this._dataZoomModel=r}return e.prototype.hostedBy=function(t){return this._dataZoomModel===t},e.prototype.getDataValueWindow=function(){return this._valueWindow.slice()},e.prototype.getDataPercentWindow=function(){return this._percentWindow.slice()},e.prototype.getTargetSeriesModels=function(){var t=[];return this.ecModel.eachSeries(function(a){if(ZH(a)){var r=Ti(this._dimName),n=a.getReferringComponents(r,yr).models[0];n&&this._axisIndex===n.componentIndex&&t.push(a)}},this),t},e.prototype.getAxisModel=function(){return this.ecModel.getComponent(this._dimName+"Axis",this._axisIndex)},e.prototype.getMinMaxSpan=function(){return Pe(this._minMaxSpan)},e.prototype.calculateDataWindow=function(t){var a=this._dataExtent,r=this.getAxisModel(),n=r.axis.scale,i=this._dataZoomModel.getRangePropMode(),o=[0,100],s=[],l=[],c;ss(["start","end"],function(d,f){var p=t[d],g=t[d+"Value"];i[f]==="percent"?(p==null&&(p=o[f]),g=n.parse(Ve(p,o,a))):(c=!0,g=g==null?a[f]:n.parse(g),p=Ve(g,a,o)),l[f]=g==null||isNaN(g)?a[f]:g,s[f]=p==null||isNaN(p)?o[f]:p}),pS(l),pS(s);var u=this._minMaxSpan;c?h(l,s,a,o,!1):h(s,l,o,a,!0);function h(d,f,p,g,v){var _=v?"Span":"ValueSpan";Go(0,d,p,"all",u["min"+_],u["max"+_]);for(var y=0;y<2;y++)f[y]=Ve(d[y],p,g,!0),v&&(f[y]=n.parse(f[y]))}return{valueWindow:l,percentWindow:s}},e.prototype.reset=function(t){if(t===this._dataZoomModel){var a=this.getTargetSeriesModels();this._dataExtent=eW(this,this._dimName,a),this._updateMinMaxSpan();var r=this.calculateDataWindow(t.settledOption);this._valueWindow=r.valueWindow,this._percentWindow=r.percentWindow,this._setAxisModel()}},e.prototype.filterData=function(t,a){if(t!==this._dataZoomModel)return;var r=this._dimName,n=this.getTargetSeriesModels(),i=t.get("filterMode"),o=this._valueWindow;if(i==="none")return;ss(n,function(l){var c=l.getData(),u=c.mapDimensionsAll(r);if(u.length){if(i==="weakFilter"){var h=c.getStore(),d=Ot(u,function(f){return c.getDimensionIndex(f)},c);c.filterSelf(function(f){for(var p,g,v,_=0;_<u.length;_++){var y=h.get(d[_],f),b=!isNaN(y),w=y<o[0],T=y>o[1];if(b&&!w&&!T)return!0;b&&(v=!0),w&&(p=!0),T&&(g=!0)}return v&&p&&g})}else ss(u,function(f){if(i==="empty")l.setData(c=c.map(f,function(g){return s(g)?g:NaN}));else{var p={};p[f]=o,c.selectRange(p)}});ss(u,function(f){c.setApproximateExtent(o,f)})}});function s(l){return l>=o[0]&&l<=o[1]}},e.prototype._updateMinMaxSpan=function(){var t=this._minMaxSpan={},a=this._dataZoomModel,r=this._dataExtent;ss(["min","max"],function(n){var i=a.get(n+"Span"),o=a.get(n+"ValueSpan");o!=null&&(o=this.getAxisModel().axis.scale.parse(o)),o!=null?i=Ve(r[0]+o,r,[0,100],!0):i!=null&&(o=Ve(i,[0,100],r,!0)-r[0]),t[n+"Span"]=i,t[n+"ValueSpan"]=o},this)},e.prototype._setAxisModel=function(){var t=this.getAxisModel(),a=this._percentWindow,r=this._valueWindow;if(a){var n=G5(r,[0,500]);n=Math.min(n,20);var i=t.axis.scale.rawExtentInfo;a[0]!==0&&i.setDeterminedMinMax("min",+r[0].toFixed(n)),a[1]!==100&&i.setDeterminedMinMax("max",+r[1].toFixed(n)),i.freeze()}},e}();function eW(e,t,a){var r=[1/0,-1/0];ss(a,function(o){H5(r,o.getData(),t)});var n=e.getAxisModel(),i=W5(n.axis.scale,n,r).calculate();return[i.min,i.max]}var aW={getTargetSeries:function(e){function t(n){e.eachComponent("dataZoom",function(i){i.eachTargetAxis(function(o,s){var l=e.getComponent(Ti(o),s);n(o,s,l,i)})})}t(function(n,i,o,s){o.__dzAxisProxy=null});var a=[];t(function(n,i,o,s){o.__dzAxisProxy||(o.__dzAxisProxy=new tW(n,i,s,e),a.push(o.__dzAxisProxy))});var r=ke();return G(a,function(n){G(n.getTargetSeriesModels(),function(i){r.set(i.uid,i)})}),r},overallReset:function(e,t){e.eachComponent("dataZoom",function(a){a.eachTargetAxis(function(r,n){a.getAxisProxy(r,n).reset(a)}),a.eachTargetAxis(function(r,n){a.getAxisProxy(r,n).filterData(a,t)})}),e.eachComponent("dataZoom",function(a){var r=a.findRepresentativeAxisProxy();if(r){var n=r.getDataPercentWindow(),i=r.getDataValueWindow();a.setCalculatedRange({start:n[0],end:n[1],startValue:i[0],endValue:i[1]})}})}};function rW(e){e.registerAction("dataZoom",function(t,a){var r=KH(a,t);G(r,function(n){n.setRawRange({start:t.start,end:t.end,startValue:t.startValue,endValue:t.endValue})})})}var gS=!1;function h0(e){gS||(gS=!0,e.registerProcessor(e.PRIORITY.PROCESSOR.FILTER,aW),rW(e),e.registerSubTypeDefaulter("dataZoom",function(){return"slider"}))}function nW(e){e.registerComponentModel(JH),e.registerComponentView(QH),h0(e)}var Ir=function(){function e(){}return e}(),Zk={};function ls(e,t){Zk[e]=t}function Kk(e){return Zk[e]}var iW=function(e){gt(t,e);function t(){var a=e!==null&&e.apply(this,arguments)||this;return a.type=t.type,a}return t.prototype.optionUpdated=function(){e.prototype.optionUpdated.apply(this,arguments);var a=this.ecModel;G(this.option.feature,function(r,n){var i=Kk(n);i&&(i.getDefaultOption&&(i.defaultOption=i.getDefaultOption(a)),Be(r,i.defaultOption))})},t.type="toolbox",t.layoutMode={type:"box",ignoreSize:!0},t.defaultOption={show:!0,z:6,orient:"horizontal",left:"right",top:"top",backgroundColor:"transparent",borderColor:"#ccc",borderRadius:0,borderWidth:0,padding:5,itemSize:15,itemGap:8,showTitle:!0,iconStyle:{borderColor:"#666",color:"none"},emphasis:{iconStyle:{borderColor:"#3E98C5"}},tooltip:{show:!1,position:"bottom"}},t}(da);function oW(e,t,a){var r=t.getBoxLayoutParams(),n=t.get("padding"),i={width:a.getWidth(),height:a.getHeight()},o=ka(r,i,n);mo(t.get("orient"),e,t.get("itemGap"),o.width,o.height),gf(e,r,i,n)}function Jk(e,t){var a=mf(t.get("padding")),r=t.getItemStyle(["color","opacity"]);return r.fill=t.get("backgroundColor"),e=new Ge({shape:{x:e.x-a[3],y:e.y-a[0],width:e.width+a[1]+a[3],height:e.height+a[0]+a[2],r:t.get("borderRadius")},style:r,silent:!0,z2:-1}),e}var sW=function(e){gt(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.render=function(a,r,n,i){var o=this.group;if(o.removeAll(),!a.get("show"))return;var s=+a.get("itemSize"),l=a.get("orient")==="vertical",c=a.get("feature")||{},u=this._features||(this._features={}),h=[];G(c,function(p,g){h.push(g)}),new Ri(this._featureNames||[],h).add(d).update(d).remove(pe(d,null)).execute(),this._featureNames=h;function d(p,g){var v=h[p],_=h[g],y=c[v],b=new _a(y,a,a.ecModel),w;if(i&&i.newTitle!=null&&i.featureName===v&&(y.title=i.newTitle),v&&!_){if(lW(v))w={onclick:b.option.onclick,featureName:v};else{var T=Kk(v);if(!T)return;w=new T}u[v]=w}else if(w=u[_],!w)return;w.uid=sT("toolbox-feature"),w.model=b,w.ecModel=r,w.api=n;var C=w instanceof Ir;if(!v&&_){C&&w.dispose&&w.dispose(r,n);return}if(!b.get("show")||C&&w.unusable){C&&w.remove&&w.remove(r,n);return}f(b,w,v),b.setIconStatus=function(A,k){var L=this.option,M=this.iconPaths;L.iconStatus=L.iconStatus||{},L.iconStatus[A]=k,M[A]&&(k==="emphasis"?Rs:Ps)(M[A])},w instanceof Ir&&w.render&&w.render(b,r,n,i)}function f(p,g,v){var _=p.getModel("iconStyle"),y=p.getModel(["emphasis","iconStyle"]),b=g instanceof Ir&&g.getIcons?g.getIcons():p.get("icon"),w=p.get("title")||{},T,C;ge(b)?(T={},T[v]=b):T=b,ge(w)?(C={},C[v]=w):C=w;var A=p.iconPaths={};G(T,function(k,L){var M=vf(k,{},{x:-s/2,y:-s/2,width:s,height:s});M.setStyle(_.getItemStyle());var P=M.ensureState("emphasis");P.style=y.getItemStyle();var E=new Oe({style:{text:C[L],align:y.get("textAlign"),borderRadius:y.get("textBorderRadius"),padding:y.get("textPadding"),fill:null,font:mT({fontStyle:y.get("textFontStyle"),fontFamily:y.get("textFontFamily"),fontSize:y.get("textFontSize"),fontWeight:y.get("textFontWeight")},r)},ignore:!0});M.setTextContent(E),ll({el:M,componentModel:a,itemName:L,formatterParamsExtra:{title:C[L]}}),M.__title=C[L],M.on("mouseover",function(){var D=y.getItemStyle(),O=l?a.get("right")==null&&a.get("left")!=="right"?"right":"left":a.get("bottom")==null&&a.get("top")!=="bottom"?"bottom":"top";E.setStyle({fill:y.get("textFill")||D.fill||D.stroke||"#000",backgroundColor:y.get("textBackgroundColor")}),M.setTextConfig({position:y.get("textPosition")||O}),E.ignore=!a.get("showTitle"),n.enterEmphasis(this)}).on("mouseout",function(){p.get(["iconStatus",L])!=="emphasis"&&n.leaveEmphasis(this),E.hide()}),(p.get(["iconStatus",L])==="emphasis"?Rs:Ps)(M),o.add(M),M.on("click",Ut(g.onclick,g,r,n,L)),A[L]=M})}oW(o,a,n),o.add(Jk(o.getBoundingRect(),a)),l||o.eachChild(function(p){var g=p.__title,v=p.ensureState("emphasis"),_=v.textConfig||(v.textConfig={}),y=p.getTextContent(),b=y&&y.ensureState("emphasis");if(b&&!Me(b)&&g){var w=b.style||(b.style={}),T=gy(g,Oe.makeFont(w)),C=p.x+o.x,A=p.y+o.y+s,k=!1;A+T.height>n.getHeight()&&(_.position="top",k=!0);var L=k?-5-T.height:s+10;C+T.width/2>n.getWidth()?(_.position=["100%",L],w.align="right"):C-T.width/2<0&&(_.position=[0,L],w.align="left")}})},t.prototype.updateView=function(a,r,n,i){G(this._features,function(o){o instanceof Ir&&o.updateView&&o.updateView(o.model,r,n,i)})},t.prototype.remove=function(a,r){G(this._features,function(n){n instanceof Ir&&n.remove&&n.remove(a,r)}),this.group.removeAll()},t.prototype.dispose=function(a,r){G(this._features,function(n){n instanceof Ir&&n.dispose&&n.dispose(a,r)})},t.type="toolbox",t}(ma);function lW(e){return e.indexOf("my")===0}var cW=function(e){gt(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.onclick=function(a,r){var n=this.model,i=n.get("name")||a.get("title.0.text")||"echarts",o=r.getZr().painter.getType()==="svg",s=o?"svg":n.get("type",!0)||"png",l=r.getConnectedDataURL({type:s,backgroundColor:n.get("backgroundColor",!0)||a.get("backgroundColor")||"#fff",connectedBackgroundColor:n.get("connectedBackgroundColor"),excludeComponents:n.get("excludeComponents"),pixelRatio:n.get("pixelRatio")}),c=Ya.browser;if(typeof MouseEvent=="function"&&(c.newEdge||!c.ie&&!c.edge)){var u=document.createElement("a");u.download=i+"."+s,u.target="_blank",u.href=l;var h=new MouseEvent("click",{view:document.defaultView,bubbles:!0,cancelable:!1});u.dispatchEvent(h)}else if(window.navigator.msSaveOrOpenBlob||o){var d=l.split(","),f=d[0].indexOf("base64")>-1,p=o?decodeURIComponent(d[1]):d[1];f&&(p=window.atob(p));var g=i+"."+s;if(window.navigator.msSaveOrOpenBlob){for(var v=p.length,_=new Uint8Array(v);v--;)_[v]=p.charCodeAt(v);var y=new Blob([_]);window.navigator.msSaveOrOpenBlob(y,g)}else{var b=document.createElement("iframe");document.body.appendChild(b);var w=b.contentWindow,T=w.document;T.open("image/svg+xml","replace"),T.write(p),T.close(),w.focus(),T.execCommand("SaveAs",!0,g),document.body.removeChild(b)}}else{var C=n.get("lang"),A='<body style="margin:0;"><img src="'+l+'" style="max-width:100%;" title="'+(C&&C[0]||"")+'" /></body>',k=window.open();k.document.write(A),k.document.title=i}},t.getDefaultOption=function(a){var r={show:!0,icon:"M4.7,22.9L29.3,45.5L54.7,23.4M4.6,43.6L4.6,58L53.8,58L53.8,43.6M29.2,45.1L29.2,0",title:a.getLocaleModel().get(["toolbox","saveAsImage","title"]),type:"png",connectedBackgroundColor:"#fff",name:"",excludeComponents:["toolbox"],lang:a.getLocaleModel().get(["toolbox","saveAsImage","lang"])};return r},t}(Ir),vS="__ec_magicType_stack__",uW=[["line","bar"],["stack"]],hW=function(e){gt(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getIcons=function(){var a=this.model,r=a.get("icon"),n={};return G(a.get("type"),function(i){r[i]&&(n[i]=r[i])}),n},t.getDefaultOption=function(a){var r={show:!0,type:[],icon:{line:"M4.1,28.9h7.1l9.3-22l7.4,38l9.7-19.7l3,12.8h14.9M4.1,58h51.4",bar:"M6.7,22.9h10V48h-10V22.9zM24.9,13h10v35h-10V13zM43.2,2h10v46h-10V2zM3.1,58h53.7",stack:"M8.2,38.4l-8.4,4.1l30.6,15.3L60,42.5l-8.1-4.1l-21.5,11L8.2,38.4z M51.9,30l-8.1,4.2l-13.4,6.9l-13.9-6.9L8.2,30l-8.4,4.2l8.4,4.2l22.2,11l21.5-11l8.1-4.2L51.9,30z M51.9,21.7l-8.1,4.2L35.7,30l-5.3,2.8L24.9,30l-8.4-4.1l-8.3-4.2l-8.4,4.2L8.2,30l8.3,4.2l13.9,6.9l13.4-6.9l8.1-4.2l8.1-4.1L51.9,21.7zM30.4,2.2L-0.2,17.5l8.4,4.1l8.3,4.2l8.4,4.2l5.5,2.7l5.3-2.7l8.1-4.2l8.1-4.2l8.1-4.1L30.4,2.2z"},title:a.getLocaleModel().get(["toolbox","magicType","title"]),option:{},seriesIndex:{}};return r},t.prototype.onclick=function(a,r,n){var i=this.model,o=i.get(["seriesIndex",n]);if(mS[n]){var s={series:[]},l=function(h){var d=h.subType,f=h.id,p=mS[n](d,f,h,i);p&&(_e(p,h.option),s.series.push(p));var g=h.coordinateSystem;if(g&&g.type==="cartesian2d"&&(n==="line"||n==="bar")){var v=g.getAxesByScale("ordinal")[0];if(v){var _=v.dim,y=_+"Axis",b=h.getReferringComponents(y,yr).models[0],w=b.componentIndex;s[y]=s[y]||[];for(var T=0;T<=w;T++)s[y][w]=s[y][w]||{};s[y][w].boundaryGap=n==="bar"}}};G(uW,function(h){Xe(h,n)>=0&&G(h,function(d){i.setIconStatus(d,"normal")})}),i.setIconStatus(n,"emphasis"),a.eachComponent({mainType:"series",query:o==null?null:{seriesIndex:o}},l);var c,u=n;n==="stack"&&(c=Be({stack:i.option.title.tiled,tiled:i.option.title.stack},i.option.title),i.get(["iconStatus",n])!=="emphasis"&&(u="tiled")),r.dispatchAction({type:"changeMagicType",currentType:u,newOption:s,newTitle:c,featureName:"magicType"})}},t}(Ir),mS={line:function(e,t,a,r){if(e==="bar")return Be({id:t,type:"line",data:a.get("data"),stack:a.get("stack"),markPoint:a.get("markPoint"),markLine:a.get("markLine")},r.get(["option","line"])||{},!0)},bar:function(e,t,a,r){if(e==="line")return Be({id:t,type:"bar",data:a.get("data"),stack:a.get("stack"),markPoint:a.get("markPoint"),markLine:a.get("markLine")},r.get(["option","bar"])||{},!0)},stack:function(e,t,a,r){var n=a.get("stack")===vS;if(e==="line"||e==="bar")return r.setIconStatus("stack",n?"normal":"emphasis"),Be({id:t,stack:n?"":vS},r.get(["option","stack"])||{},!0)}};df({type:"changeMagicType",event:"magicTypeChanged",update:"prepareAndUpdate"},function(e,t){t.mergeOption(e.newOption)});var Df=new Array(60).join("-"),Us="	";function dW(e){var t={},a=[],r=[];return e.eachRawSeries(function(n){var i=n.coordinateSystem;if(i&&(i.type==="cartesian2d"||i.type==="polar")){var o=i.getBaseAxis();if(o.type==="category"){var s=o.dim+"_"+o.index;t[s]||(t[s]={categoryAxis:o,valueAxis:i.getOtherAxis(o),series:[]},r.push({axisDim:o.dim,axisIndex:o.index})),t[s].series.push(n)}else a.push(n)}else a.push(n)}),{seriesGroupByCategoryAxis:t,other:a,meta:r}}function fW(e){var t=[];return G(e,function(a,r){var n=a.categoryAxis,i=a.valueAxis,o=i.dim,s=[" "].concat(Ot(a.series,function(f){return f.name})),l=[n.model.getCategories()];G(a.series,function(f){var p=f.getRawData();l.push(f.getRawData().mapArray(p.mapDimension(o),function(g){return g}))});for(var c=[s.join(Us)],u=0;u<l[0].length;u++){for(var h=[],d=0;d<l.length;d++)h.push(l[d][u]);c.push(h.join(Us))}t.push(c.join(`
`))}),t.join(`

`+Df+`

`)}function pW(e){return Ot(e,function(t){var a=t.getRawData(),r=[t.name],n=[];return a.each(a.dimensions,function(){for(var i=arguments.length,o=arguments[i-1],s=a.getName(o),l=0;l<i-1;l++)n[l]=arguments[l];r.push((s?s+Us:"")+n.join(Us))}),r.join(`
`)}).join(`

`+Df+`

`)}function gW(e){var t=dW(e);return{value:Va([fW(t.seriesGroupByCategoryAxis),pW(t.other)],function(a){return!!a.replace(/[\n\t\s]/g,"")}).join(`

`+Df+`

`),meta:t.meta}}function dd(e){return e.replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function vW(e){var t=e.slice(0,e.indexOf(`
`));if(t.indexOf(Us)>=0)return!0}var qv=new RegExp("["+Us+"]+","g");function mW(e){for(var t=e.split(/\n+/g),a=dd(t.shift()).split(qv),r=[],n=Ot(a,function(l){return{name:l,data:[]}}),i=0;i<t.length;i++){var o=dd(t[i]).split(qv);r.push(o.shift());for(var s=0;s<o.length;s++)n[s]&&(n[s].data[i]=o[s])}return{series:n,categories:r}}function yW(e){for(var t=e.split(/\n+/g),a=dd(t.shift()),r=[],n=0;n<t.length;n++){var i=dd(t[n]);if(i){var o=i.split(qv),s="",l=void 0,c=!1;isNaN(o[0])?(c=!0,s=o[0],o=o.slice(1),r[n]={name:s,value:[]},l=r[n].value):l=r[n]=[];for(var u=0;u<o.length;u++)l.push(+o[u]);l.length===1&&(c?r[n].value=l[0]:r[n]=l[0])}}return{name:a,data:r}}function _W(e,t){var a=e.split(new RegExp(`
*`+Df+`
*`,"g")),r={series:[]};return G(a,function(n,i){if(vW(n)){var o=mW(n),s=t[i],l=s.axisDim+"Axis";s&&(r[l]=r[l]||[],r[l][s.axisIndex]={data:o.categories},r.series=r.series.concat(o.series))}else{var o=yW(n);r.series.push(o)}}),r}var bW=function(e){gt(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.onclick=function(a,r){setTimeout(function(){r.dispatchAction({type:"hideTip"})});var n=r.getDom(),i=this.model;this._dom&&n.removeChild(this._dom);var o=document.createElement("div");o.style.cssText="position:absolute;top:0;bottom:0;left:0;right:0;padding:5px",o.style.backgroundColor=i.get("backgroundColor")||"#fff";var s=document.createElement("h4"),l=i.get("lang")||[];s.innerHTML=l[0]||i.get("title"),s.style.cssText="margin:10px 20px",s.style.color=i.get("textColor");var c=document.createElement("div"),u=document.createElement("textarea");c.style.cssText="overflow:auto";var h=i.get("optionToContent"),d=i.get("contentToOption"),f=gW(a);if(Me(h)){var p=h(r.getOption());ge(p)?c.innerHTML=p:fv(p)&&c.appendChild(p)}else{u.readOnly=i.get("readOnly");var g=u.style;g.cssText="display:block;width:100%;height:100%;font-family:monospace;font-size:14px;line-height:1.6rem;resize:none;box-sizing:border-box;outline:none",g.color=i.get("textColor"),g.borderColor=i.get("textareaBorderColor"),g.backgroundColor=i.get("textareaColor"),u.value=f.value,c.appendChild(u)}var v=f.meta,_=document.createElement("div");_.style.cssText="position:absolute;bottom:5px;left:0;right:0";var y="float:right;margin-right:20px;border:none;cursor:pointer;padding:2px 5px;font-size:12px;border-radius:3px",b=document.createElement("div"),w=document.createElement("div");y+=";background-color:"+i.get("buttonColor"),y+=";color:"+i.get("buttonTextColor");var T=this;function C(){n.removeChild(o),T._dom=null}l1(b,"click",C),l1(w,"click",function(){if(d==null&&h!=null||d!=null&&h==null){C();return}var A;try{Me(d)?A=d(c,r.getOption()):A=_W(u.value,v)}catch(k){throw C(),new Error("Data view format error "+k)}A&&r.dispatchAction({type:"changeDataView",newOption:A}),C()}),b.innerHTML=l[1],w.innerHTML=l[2],w.style.cssText=b.style.cssText=y,!i.get("readOnly")&&_.appendChild(w),_.appendChild(b),o.appendChild(s),o.appendChild(c),o.appendChild(_),c.style.height=n.clientHeight-80+"px",n.appendChild(o),this._dom=o},t.prototype.remove=function(a,r){this._dom&&r.getDom().removeChild(this._dom)},t.prototype.dispose=function(a,r){this.remove(a,r)},t.getDefaultOption=function(a){var r={show:!0,readOnly:!1,optionToContent:null,contentToOption:null,icon:"M17.5,17.3H33 M17.5,17.3H33 M45.4,29.5h-28 M11.5,2v56H51V14.8L38.4,2H11.5z M38.4,2.2v12.7H51 M45.4,41.7h-28",title:a.getLocaleModel().get(["toolbox","dataView","title"]),lang:a.getLocaleModel().get(["toolbox","dataView","lang"]),backgroundColor:"#fff",textColor:"#000",textareaColor:"#fff",textareaBorderColor:"#333",buttonColor:"#c23531",buttonTextColor:"#fff"};return r},t}(Ir);function xW(e,t){return Ot(e,function(a,r){var n=t&&t[r];if(na(n)&&!Nt(n)){var i=na(a)&&!Nt(a);i||(a={value:a});var o=n.name!=null&&a.name==null;return a=_e(a,n),o&&delete a.name,a}else return a})}df({type:"changeDataView",event:"dataViewChanged",update:"prepareAndUpdate"},function(e,t){var a=[];G(e.newOption.series,function(r){var n=t.getSeriesByName(r.name)[0];if(!n)a.push(Vt({type:"scatter"},r));else{var i=n.get("data");a.push({name:r.name,data:xW(r.data,i)})}}),t.mergeOption(_e({series:a},e.newOption))});var Qk=G,tD=ia();function SW(e,t){var a=d0(e);Qk(t,function(r,n){for(var i=a.length-1;i>=0;i--){var o=a[i];if(o[n])break}if(i<0){var s=e.queryComponents({mainType:"dataZoom",subType:"select",id:n})[0];if(s){var l=s.getPercentRange();a[0][n]={dataZoomId:n,start:l[0],end:l[1]}}}}),a.push(t)}function wW(e){var t=d0(e),a=t[t.length-1];t.length>1&&t.pop();var r={};return Qk(a,function(n,i){for(var o=t.length-1;o>=0;o--)if(n=t[o][i],n){r[i]=n;break}}),r}function CW(e){tD(e).snapshots=null}function TW(e){return d0(e).length}function d0(e){var t=tD(e);return t.snapshots||(t.snapshots=[{}]),t.snapshots}var AW=function(e){gt(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.onclick=function(a,r){CW(a),r.dispatchAction({type:"restore",from:this.uid})},t.getDefaultOption=function(a){var r={show:!0,icon:"M3.8,33.4 M47,18.9h9.8V8.7 M56.3,20.1 C52.1,9,40.5,0.6,26.8,2.1C12.6,3.7,1.6,16.2,2.1,30.6 M13,41.1H3.1v10.2 M3.7,39.9c4.2,11.1,15.8,19.5,29.5,18 c14.2-1.6,25.2-14.1,24.7-28.5",title:a.getLocaleModel().get(["toolbox","restore","title"])};return r},t}(Ir);df({type:"restore",event:"restore",update:"prepareAndUpdate"},function(e,t){t.resetOption("recreate")});var kW=["grid","xAxis","yAxis","geo","graph","polar","radiusAxis","angleAxis","bmap"],f0=function(){function e(t,a,r){var n=this;this._targetInfoList=[];var i=yS(a,t);G(DW,function(o,s){(!r||!r.include||Xe(r.include,s)>=0)&&o(i,n._targetInfoList)})}return e.prototype.setOutputRanges=function(t,a){return this.matchOutputRanges(t,a,function(r,n,i){if((r.coordRanges||(r.coordRanges=[])).push(n),!r.coordRange){r.coordRange=n;var o=fg[r.brushType](0,i,n);r.__rangeOffset={offset:SS[r.brushType](o.values,r.range,[1,1]),xyMinMax:o.xyMinMax}}}),t},e.prototype.matchOutputRanges=function(t,a,r){G(t,function(n){var i=this.findTargetInfo(n,a);i&&i!==!0&&G(i.coordSyses,function(o){var s=fg[n.brushType](1,o,n.range,!0);r(n,s.values,o,a)})},this)},e.prototype.setInputRanges=function(t,a){G(t,function(r){var n=this.findTargetInfo(r,a);if(r.range=r.range||[],n&&n!==!0){r.panelId=n.panelId;var i=fg[r.brushType](0,n.coordSys,r.coordRange),o=r.__rangeOffset;r.range=o?SS[r.brushType](i.values,o.offset,LW(i.xyMinMax,o.xyMinMax)):i.values}},this)},e.prototype.makePanelOpts=function(t,a){return Ot(this._targetInfoList,function(r){var n=r.getPanelRect();return{panelId:r.panelId,defaultBrushType:a?a(r):null,clipPath:sk(n),isTargetByCursor:ck(n,t,r.coordSysModel),getLinearBrushOtherExtent:lk(n)}})},e.prototype.controlSeries=function(t,a,r){var n=this.findTargetInfo(t,r);return n===!0||n&&Xe(n.coordSyses,a.coordinateSystem)>=0},e.prototype.findTargetInfo=function(t,a){for(var r=this._targetInfoList,n=yS(a,t),i=0;i<r.length;i++){var o=r[i],s=t.panelId;if(s){if(o.panelId===s)return o}else for(var l=0;l<_S.length;l++)if(_S[l](n,o))return o}return!0},e}();function Uv(e){return e[0]>e[1]&&e.reverse(),e}function yS(e,t){return bT(e,t,{includeMainTypes:kW})}var DW={grid:function(e,t){var a=e.xAxisModels,r=e.yAxisModels,n=e.gridModels,i=ke(),o={},s={};!a&&!r&&!n||(G(a,function(l){var c=l.axis.grid.model;i.set(c.id,c),o[c.id]=!0}),G(r,function(l){var c=l.axis.grid.model;i.set(c.id,c),s[c.id]=!0}),G(n,function(l){i.set(l.id,l),o[l.id]=!0,s[l.id]=!0}),i.each(function(l){var c=l.coordinateSystem,u=[];G(c.getCartesians(),function(h,d){(Xe(a,h.getAxis("x").model)>=0||Xe(r,h.getAxis("y").model)>=0)&&u.push(h)}),t.push({panelId:"grid--"+l.id,gridModel:l,coordSysModel:l,coordSys:u[0],coordSyses:u,getPanelRect:bS.grid,xAxisDeclared:o[l.id],yAxisDeclared:s[l.id]})}))},geo:function(e,t){G(e.geoModels,function(a){var r=a.coordinateSystem;t.push({panelId:"geo--"+a.id,geoModel:a,coordSysModel:a,coordSys:r,coordSyses:[r],getPanelRect:bS.geo})})}},_S=[function(e,t){var a=e.xAxisModel,r=e.yAxisModel,n=e.gridModel;return!n&&a&&(n=a.axis.grid.model),!n&&r&&(n=r.axis.grid.model),n&&n===t.gridModel},function(e,t){var a=e.geoModel;return a&&a===t.geoModel}],bS={grid:function(){return this.coordSys.master.getRect().clone()},geo:function(){var e=this.coordSys,t=e.getBoundingRect().clone();return t.applyTransform(ys(e)),t}},fg={lineX:pe(xS,0),lineY:pe(xS,1),rect:function(e,t,a,r){var n=e?t.pointToData([a[0][0],a[1][0]],r):t.dataToPoint([a[0][0],a[1][0]],r),i=e?t.pointToData([a[0][1],a[1][1]],r):t.dataToPoint([a[0][1],a[1][1]],r),o=[Uv([n[0],i[0]]),Uv([n[1],i[1]])];return{values:o,xyMinMax:o}},polygon:function(e,t,a,r){var n=[[1/0,-1/0],[1/0,-1/0]],i=Ot(a,function(o){var s=e?t.pointToData(o,r):t.dataToPoint(o,r);return n[0][0]=Math.min(n[0][0],s[0]),n[1][0]=Math.min(n[1][0],s[1]),n[0][1]=Math.max(n[0][1],s[0]),n[1][1]=Math.max(n[1][1],s[1]),s});return{values:i,xyMinMax:n}}};function xS(e,t,a,r){var n=a.getAxis(["x","y"][e]),i=Uv(Ot([0,1],function(s){return t?n.coordToData(n.toLocalCoord(r[s]),!0):n.toGlobalCoord(n.dataToCoord(r[s]))})),o=[];return o[e]=i,o[1-e]=[NaN,NaN],{values:i,xyMinMax:o}}var SS={lineX:pe(wS,0),lineY:pe(wS,1),rect:function(e,t,a){return[[e[0][0]-a[0]*t[0][0],e[0][1]-a[0]*t[0][1]],[e[1][0]-a[1]*t[1][0],e[1][1]-a[1]*t[1][1]]]},polygon:function(e,t,a){return Ot(e,function(r,n){return[r[0]-a[0]*t[n][0],r[1]-a[1]*t[n][1]]})}};function wS(e,t,a,r){return[t[0]-r[e]*a[0],t[1]-r[e]*a[1]]}function LW(e,t){var a=CS(e),r=CS(t),n=[a[0]/r[0],a[1]/r[1]];return isNaN(n[0])&&(n[0]=1),isNaN(n[1])&&(n[1]=1),n}function CS(e){return e?[e[0][1]-e[0][0],e[1][1]-e[1][0]]:[NaN,NaN]}var jv=G,IW=U5("toolbox-dataZoom_"),MW=function(e){gt(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.render=function(a,r,n,i){this._brushController||(this._brushController=new zy(n.getZr()),this._brushController.on("brush",Ut(this._onBrush,this)).mount()),PW(a,r,this,i,n),RW(a,r)},t.prototype.onclick=function(a,r,n){EW[n].call(this)},t.prototype.remove=function(a,r){this._brushController&&this._brushController.unmount()},t.prototype.dispose=function(a,r){this._brushController&&this._brushController.dispose()},t.prototype._onBrush=function(a){var r=a.areas;if(!a.isEnd||!r.length)return;var n={},i=this.ecModel;this._brushController.updateCovers([]);var o=new f0(p0(this.model),i,{include:["grid"]});o.matchOutputRanges(r,i,function(c,u,h){if(h.type==="cartesian2d"){var d=c.brushType;d==="rect"?(s("x",h,u[0]),s("y",h,u[1])):s({lineX:"x",lineY:"y"}[d],h,u)}}),SW(i,n),this._dispatchZoomAction(n);function s(c,u,h){var d=u.getAxis(c),f=d.model,p=l(c,f,i),g=p.findRepresentativeAxisProxy(f).getMinMaxSpan();(g.minValueSpan!=null||g.maxValueSpan!=null)&&(h=Go(0,h.slice(),d.scale.getExtent(),0,g.minValueSpan,g.maxValueSpan)),p&&(n[p.id]={dataZoomId:p.id,startValue:h[0],endValue:h[1]})}function l(c,u,h){var d;return h.eachComponent({mainType:"dataZoom",subType:"select"},function(f){var p=f.getAxisModel(c,u.componentIndex);p&&(d=f)}),d}},t.prototype._dispatchZoomAction=function(a){var r=[];jv(a,function(n,i){r.push(Pe(n))}),r.length&&this.api.dispatchAction({type:"dataZoom",from:this.uid,batch:r})},t.getDefaultOption=function(a){var r={show:!0,filterMode:"filter",icon:{zoom:"M0,13.5h26.9 M13.5,26.9V0 M32.1,13.5H58V58H13.5 V32.1",back:"M22,1.4L9.9,13.5l12.3,12.3 M10.3,13.5H54.9v44.6 H10.3v-26"},title:a.getLocaleModel().get(["toolbox","dataZoom","title"]),brushStyle:{borderWidth:0,color:"rgba(210,219,238,0.2)"}};return r},t}(Ir),EW={zoom:function(){var e=!this._isZoomActive;this.api.dispatchAction({type:"takeGlobalCursor",key:"dataZoomSelect",dataZoomSelectActive:e})},back:function(){this._dispatchZoomAction(wW(this.ecModel))}};function p0(e){var t={xAxisIndex:e.get("xAxisIndex",!0),yAxisIndex:e.get("yAxisIndex",!0),xAxisId:e.get("xAxisId",!0),yAxisId:e.get("yAxisId",!0)};return t.xAxisIndex==null&&t.xAxisId==null&&(t.xAxisIndex="all"),t.yAxisIndex==null&&t.yAxisId==null&&(t.yAxisIndex="all"),t}function RW(e,t){e.setIconStatus("back",TW(t)>1?"emphasis":"normal")}function PW(e,t,a,r,n){var i=a._isZoomActive;r&&r.type==="takeGlobalCursor"&&(i=r.key==="dataZoomSelect"?r.dataZoomSelectActive:!1),a._isZoomActive=i,e.setIconStatus("zoom",i?"emphasis":"normal");var o=new f0(p0(e),t,{include:["grid"]}),s=o.makePanelOpts(n,function(l){return l.xAxisDeclared&&!l.yAxisDeclared?"lineX":!l.xAxisDeclared&&l.yAxisDeclared?"lineY":"rect"});a._brushController.setPanels(s).enableBrush(i&&s.length?{brushType:"auto",brushStyle:e.getModel("brushStyle").getItemStyle()}:!1)}q5("dataZoom",function(e){var t=e.getComponent("toolbox",0),a=["feature","dataZoom"];if(!t||t.get(a)==null)return;var r=t.getModel(a),n=[],i=p0(r),o=bT(e,i);jv(o.xAxisModels,function(l){return s(l,"xAxis","xAxisIndex")}),jv(o.yAxisModels,function(l){return s(l,"yAxis","yAxisIndex")});function s(l,c,u){var h=l.componentIndex,d={type:"select",$fromToolbox:!0,filterMode:r.get("filterMode",!0)||"filter",id:IW+c+h};d[u]=h,n.push(d)}return n});function eD(e){e.registerComponentModel(iW),e.registerComponentView(sW),ls("saveAsImage",cW),ls("magicType",hW),ls("dataView",bW),ls("dataZoom",MW),ls("restore",AW),ue(nW)}var BW=function(e){gt(t,e);function t(){var a=e!==null&&e.apply(this,arguments)||this;return a.type=t.type,a}return t.type="tooltip",t.dependencies=["axisPointer"],t.defaultOption={z:60,show:!0,showContent:!0,trigger:"item",triggerOn:"mousemove|click",alwaysShowContent:!1,displayMode:"single",renderMode:"auto",confine:null,showDelay:0,hideDelay:100,transitionDuration:.4,enterable:!1,backgroundColor:"#fff",shadowBlur:10,shadowColor:"rgba(0, 0, 0, .2)",shadowOffsetX:1,shadowOffsetY:2,borderRadius:4,borderWidth:1,padding:null,extraCssText:"",axisPointer:{type:"line",axis:"auto",animation:"auto",animationDurationUpdate:200,animationEasingUpdate:"exponentialOut",crossStyle:{color:"#999",width:1,type:"dashed",textStyle:{}}},textStyle:{color:"#666",fontSize:14}},t}(da);function aD(e){var t=e.get("confine");return t!=null?!!t:e.get("renderMode")==="richText"}function rD(e){if(Ya.domSupported){for(var t=document.documentElement.style,a=0,r=e.length;a<r;a++)if(e[a]in t)return e[a]}}var nD=rD(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),OW=rD(["webkitTransition","transition","OTransition","MozTransition","msTransition"]);function iD(e,t){if(!e)return t;t=xT(t,!0);var a=e.indexOf(t);return e=a===-1?t:"-"+e.slice(0,a)+"-"+t,e.toLowerCase()}function NW(e,t){var a=e.currentStyle||document.defaultView&&document.defaultView.getComputedStyle(e);return a?a[t]:null}var $W=iD(OW,"transition"),g0=iD(nD,"transform"),FW="position:absolute;display:block;border-style:solid;white-space:nowrap;z-index:9999999;"+(Ya.transform3dSupported?"will-change:transform;":"");function zW(e){return e=e==="left"?"right":e==="right"?"left":e==="top"?"bottom":"top",e}function VW(e,t,a){if(!ge(a)||a==="inside")return"";var r=e.get("backgroundColor"),n=e.get("borderWidth");t=Ns(t);var i=zW(a),o=Math.max(Math.round(n)*1.5,6),s="",l=g0+":",c;Xe(["left","right"],i)>-1?(s+="top:50%",l+="translateY(-50%) rotate("+(c=i==="left"?-225:-45)+"deg)"):(s+="left:50%",l+="translateX(-50%) rotate("+(c=i==="top"?225:45)+"deg)");var u=c*Math.PI/180,h=o+n,d=h*Math.abs(Math.cos(u))+h*Math.abs(Math.sin(u)),f=Math.round(((d-Math.SQRT2*n)/2+Math.SQRT2*n-(d-h)/2)*100)/100;s+=";"+i+":-"+f+"px";var p=t+" solid "+n+"px;",g=["position:absolute;width:"+o+"px;height:"+o+"px;z-index:-1;",s+";"+l+";","border-bottom:"+p,"border-right:"+p,"background-color:"+r+";"];return'<div style="'+g.join("")+'"></div>'}function GW(e,t){var a="cubic-bezier(0.23,1,0.32,1)",r=" "+e/2+"s "+a,n="opacity"+r+",visibility"+r;return t||(r=" "+e+"s "+a,n+=Ya.transformSupported?","+g0+r:",left"+r+",top"+r),$W+":"+n}function TS(e,t,a){var r=e.toFixed(0)+"px",n=t.toFixed(0)+"px";if(!Ya.transformSupported)return a?"top:"+n+";left:"+r+";":[["top",n],["left",r]];var i=Ya.transform3dSupported,o="translate"+(i?"3d":"")+"("+r+","+n+(i?",0":"")+")";return a?"top:0;left:0;"+g0+":"+o+";":[["top",0],["left",0],[nD,o]]}function HW(e){var t=[],a=e.get("fontSize"),r=e.getTextColor();r&&t.push("color:"+r),t.push("font:"+e.getFont());var n=sa(e.get("lineHeight"),Math.round(a*3/2));a&&t.push("line-height:"+n+"px");var i=e.get("textShadowColor"),o=e.get("textShadowBlur")||0,s=e.get("textShadowOffsetX")||0,l=e.get("textShadowOffsetY")||0;return i&&o&&t.push("text-shadow:"+s+"px "+l+"px "+o+"px "+i),G(["decoration","align"],function(c){var u=e.get(c);u&&t.push("text-"+c+":"+u)}),t.join(";")}function WW(e,t,a){var r=[],n=e.get("transitionDuration"),i=e.get("backgroundColor"),o=e.get("shadowBlur"),s=e.get("shadowColor"),l=e.get("shadowOffsetX"),c=e.get("shadowOffsetY"),u=e.getModel("textStyle"),h=ST(e,"html"),d=l+"px "+c+"px "+o+"px "+s;return r.push("box-shadow:"+d),t&&n&&r.push(GW(n,a)),i&&r.push("background-color:"+i),G(["width","color","radius"],function(f){var p="border-"+f,g=xT(p),v=e.get(g);v!=null&&r.push(p+":"+v+(f==="color"?"":"px"))}),r.push(HW(u)),h!=null&&r.push("padding:"+mf(h).join("px ")+"px"),r.join(";")+";"}function AS(e,t,a,r,n){var i=t&&t.painter;if(a){var o=i&&i.getViewportRoot();o&&Y5(e,o,a,r,n)}else{e[0]=r,e[1]=n;var s=i&&i.getViewportRootOffset();s&&(e[0]+=s.offsetLeft,e[1]+=s.offsetTop)}e[2]=e[0]/t.getWidth(),e[3]=e[1]/t.getHeight()}var qW=function(){function e(t,a){if(this._show=!1,this._styleCoord=[0,0,0,0],this._enterable=!0,this._alwaysShowContent=!1,this._firstShow=!0,this._longHide=!0,Ya.wxa)return null;var r=document.createElement("div");r.domBelongToZr=!0,this.el=r;var n=this._zr=t.getZr(),i=a.appendTo,o=i&&(ge(i)?document.querySelector(i):fv(i)?i:Me(i)&&i(t.getDom()));AS(this._styleCoord,n,o,t.getWidth()/2,t.getHeight()/2),(o||t.getDom()).appendChild(r),this._api=t,this._container=o;var s=this;r.onmouseenter=function(){s._enterable&&(clearTimeout(s._hideTimeout),s._show=!0),s._inContent=!0},r.onmousemove=function(l){if(l=l||window.event,!s._enterable){var c=n.handler,u=n.painter.getViewportRoot();j5(u,l,!0),c.dispatch("mousemove",l)}},r.onmouseleave=function(){s._inContent=!1,s._enterable&&s._show&&s.hideLater(s._hideDelay)}}return e.prototype.update=function(t){if(!this._container){var a=this._api.getDom(),r=NW(a,"position"),n=a.style;n.position!=="absolute"&&r!=="absolute"&&(n.position="relative")}var i=t.get("alwaysShowContent");i&&this._moveIfResized(),this._alwaysShowContent=i,this.el.className=t.get("className")||""},e.prototype.show=function(t,a){clearTimeout(this._hideTimeout),clearTimeout(this._longHideTimeout);var r=this.el,n=r.style,i=this._styleCoord;r.innerHTML?n.cssText=FW+WW(t,!this._firstShow,this._longHide)+TS(i[0],i[1],!0)+("border-color:"+Ns(a)+";")+(t.get("extraCssText")||"")+(";pointer-events:"+(this._enterable?"auto":"none")):n.display="none",this._show=!0,this._firstShow=!1,this._longHide=!1},e.prototype.setContent=function(t,a,r,n,i){var o=this.el;if(t==null){o.innerHTML="";return}var s="";if(ge(i)&&r.get("trigger")==="item"&&!aD(r)&&(s=VW(r,n,i)),ge(t))o.innerHTML=t+s;else if(t){o.innerHTML="",Nt(t)||(t=[t]);for(var l=0;l<t.length;l++)fv(t[l])&&t[l].parentNode!==o&&o.appendChild(t[l]);if(s&&o.childNodes.length){var c=document.createElement("div");c.innerHTML=s,o.appendChild(c)}}},e.prototype.setEnterable=function(t){this._enterable=t},e.prototype.getSize=function(){var t=this.el;return t?[t.offsetWidth,t.offsetHeight]:[0,0]},e.prototype.moveTo=function(t,a){if(this.el){var r=this._styleCoord;if(AS(r,this._zr,this._container,t,a),r[0]!=null&&r[1]!=null){var n=this.el.style,i=TS(r[0],r[1]);G(i,function(o){n[o[0]]=o[1]})}}},e.prototype._moveIfResized=function(){var t=this._styleCoord[2],a=this._styleCoord[3];this.moveTo(t*this._zr.getWidth(),a*this._zr.getHeight())},e.prototype.hide=function(){var t=this,a=this.el.style;a.visibility="hidden",a.opacity="0",Ya.transform3dSupported&&(a.willChange=""),this._show=!1,this._longHideTimeout=setTimeout(function(){return t._longHide=!0},500)},e.prototype.hideLater=function(t){this._show&&!(this._inContent&&this._enterable)&&!this._alwaysShowContent&&(t?(this._hideDelay=t,this._show=!1,this._hideTimeout=setTimeout(Ut(this.hide,this),t)):this.hide())},e.prototype.isShow=function(){return this._show},e.prototype.dispose=function(){clearTimeout(this._hideTimeout),clearTimeout(this._longHideTimeout);var t=this.el.parentNode;t&&t.removeChild(this.el),this.el=this._container=null},e}(),UW=function(){function e(t){this._show=!1,this._styleCoord=[0,0,0,0],this._alwaysShowContent=!1,this._enterable=!0,this._zr=t.getZr(),DS(this._styleCoord,this._zr,t.getWidth()/2,t.getHeight()/2)}return e.prototype.update=function(t){var a=t.get("alwaysShowContent");a&&this._moveIfResized(),this._alwaysShowContent=a},e.prototype.show=function(){this._hideTimeout&&clearTimeout(this._hideTimeout),this.el.show(),this._show=!0},e.prototype.setContent=function(t,a,r,n,i){var o=this;na(t)&&ua(""),this.el&&this._zr.remove(this.el);var s=r.getModel("textStyle");this.el=new Oe({style:{rich:a.richTextStyles,text:t,lineHeight:22,borderWidth:1,borderColor:n,textShadowColor:s.get("textShadowColor"),fill:r.get(["textStyle","color"]),padding:ST(r,"richText"),verticalAlign:"top",align:"left"},z:r.get("z")}),G(["backgroundColor","borderRadius","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"],function(c){o.el.style[c]=r.get(c)}),G(["textShadowBlur","textShadowOffsetX","textShadowOffsetY"],function(c){o.el.style[c]=s.get(c)||0}),this._zr.add(this.el);var l=this;this.el.on("mouseover",function(){l._enterable&&(clearTimeout(l._hideTimeout),l._show=!0),l._inContent=!0}),this.el.on("mouseout",function(){l._enterable&&l._show&&l.hideLater(l._hideDelay),l._inContent=!1})},e.prototype.setEnterable=function(t){this._enterable=t},e.prototype.getSize=function(){var t=this.el,a=this.el.getBoundingRect(),r=kS(t.style);return[a.width+r.left+r.right,a.height+r.top+r.bottom]},e.prototype.moveTo=function(t,a){var r=this.el;if(r){var n=this._styleCoord;DS(n,this._zr,t,a),t=n[0],a=n[1];var i=r.style,o=fi(i.borderWidth||0),s=kS(i);r.x=t+o+s.left,r.y=a+o+s.top,r.markRedraw()}},e.prototype._moveIfResized=function(){var t=this._styleCoord[2],a=this._styleCoord[3];this.moveTo(t*this._zr.getWidth(),a*this._zr.getHeight())},e.prototype.hide=function(){this.el&&this.el.hide(),this._show=!1},e.prototype.hideLater=function(t){this._show&&!(this._inContent&&this._enterable)&&!this._alwaysShowContent&&(t?(this._hideDelay=t,this._show=!1,this._hideTimeout=setTimeout(Ut(this.hide,this),t)):this.hide())},e.prototype.isShow=function(){return this._show},e.prototype.dispose=function(){this._zr.remove(this.el)},e}();function fi(e){return Math.max(0,e)}function kS(e){var t=fi(e.shadowBlur||0),a=fi(e.shadowOffsetX||0),r=fi(e.shadowOffsetY||0);return{left:fi(t-a),right:fi(t+a),top:fi(t-r),bottom:fi(t+r)}}function DS(e,t,a,r){e[0]=a,e[1]=r,e[2]=e[0]/t.getWidth(),e[3]=e[1]/t.getHeight()}var jW=new Ge({shape:{x:-1,y:-1,width:2,height:2}}),YW=function(e){gt(t,e);function t(){var a=e!==null&&e.apply(this,arguments)||this;return a.type=t.type,a}return t.prototype.init=function(a,r){if(!(Ya.node||!r.getDom())){var n=a.getComponent("tooltip"),i=this._renderMode=X5(n.get("renderMode"));this._tooltipContent=i==="richText"?new UW(r):new qW(r,{appendTo:n.get("appendToBody",!0)?"body":n.get("appendTo",!0)})}},t.prototype.render=function(a,r,n){if(!(Ya.node||!n.getDom())){this.group.removeAll(),this._tooltipModel=a,this._ecModel=r,this._api=n;var i=this._tooltipContent;i.update(a),i.setEnterable(a.get("enterable")),this._initGlobalListener(),this._keepShow(),this._renderMode!=="richText"&&a.get("transitionDuration")?ul(this,"_updatePosition",50,"fixRate"):Lc(this,"_updatePosition")}},t.prototype._initGlobalListener=function(){var a=this._tooltipModel,r=a.get("triggerOn");Gk("itemTooltip",this._api,Ut(function(n,i,o){r!=="none"&&(r.indexOf(n)>=0?this._tryShow(i,o):n==="leave"&&this._hide(o))},this))},t.prototype._keepShow=function(){var a=this._tooltipModel,r=this._ecModel,n=this._api,i=a.get("triggerOn");if(this._lastX!=null&&this._lastY!=null&&i!=="none"&&i!=="click"){var o=this;clearTimeout(this._refreshUpdateTimeout),this._refreshUpdateTimeout=setTimeout(function(){!n.isDisposed()&&o.manuallyShowTip(a,r,n,{x:o._lastX,y:o._lastY,dataByCoordSys:o._lastDataByCoordSys})})}},t.prototype.manuallyShowTip=function(a,r,n,i){if(!(i.from===this.uid||Ya.node||!n.getDom())){var o=LS(i,n);this._ticket="";var s=i.dataByCoordSys,l=JW(i,r,n);if(l){var c=l.el.getBoundingRect().clone();c.applyTransform(l.el.transform),this._tryShow({offsetX:c.x+c.width/2,offsetY:c.y+c.height/2,target:l.el,position:i.position,positionDefault:"bottom"},o)}else if(i.tooltip&&i.x!=null&&i.y!=null){var u=jW;u.x=i.x,u.y=i.y,u.update(),Ae(u).tooltipConfig={name:null,option:i.tooltip},this._tryShow({offsetX:i.x,offsetY:i.y,target:u},o)}else if(s)this._tryShow({offsetX:i.x,offsetY:i.y,position:i.position,dataByCoordSys:s,tooltipOption:i.tooltipOption},o);else if(i.seriesIndex!=null){if(this._manuallyAxisShowTip(a,r,n,i))return;var h=Hk(i,r),d=h.point[0],f=h.point[1];d!=null&&f!=null&&this._tryShow({offsetX:d,offsetY:f,target:h.el,position:i.position,positionDefault:"bottom"},o)}else i.x!=null&&i.y!=null&&(n.dispatchAction({type:"updateAxisPointer",x:i.x,y:i.y}),this._tryShow({offsetX:i.x,offsetY:i.y,position:i.position,target:n.getZr().findHover(i.x,i.y).target},o))}},t.prototype.manuallyHideTip=function(a,r,n,i){var o=this._tooltipContent;this._tooltipModel&&o.hideLater(this._tooltipModel.get("hideDelay")),this._lastX=this._lastY=this._lastDataByCoordSys=null,i.from!==this.uid&&this._hide(LS(i,n))},t.prototype._manuallyAxisShowTip=function(a,r,n,i){var o=i.seriesIndex,s=i.dataIndex,l=r.getComponent("axisPointer").coordSysAxesInfo;if(!(o==null||s==null||l==null)){var c=r.getSeriesByIndex(o);if(c){var u=c.getData(),h=Dl([u.getItemModel(s),c,(c.coordinateSystem||{}).model],this._tooltipModel);if(h.get("trigger")==="axis")return n.dispatchAction({type:"updateAxisPointer",seriesIndex:o,dataIndex:s,position:i.position}),!0}}},t.prototype._tryShow=function(a,r){var n=a.target,i=this._tooltipModel;if(i){this._lastX=a.offsetX,this._lastY=a.offsetY;var o=a.dataByCoordSys;if(o&&o.length)this._showAxisTooltip(o,a);else if(n){var s=Ae(n);if(s.ssrType==="legend")return;this._lastDataByCoordSys=null;var l,c;fy(n,function(u){if(Ae(u).dataIndex!=null)return l=u,!0;if(Ae(u).tooltipConfig!=null)return c=u,!0},!0),l?this._showSeriesItemTooltip(a,l,r):c?this._showComponentItemTooltip(a,c,r):this._hide(r)}else this._lastDataByCoordSys=null,this._hide(r)}},t.prototype._showOrMove=function(a,r){var n=a.get("showDelay");r=Ut(r,this),clearTimeout(this._showTimout),n>0?this._showTimout=setTimeout(r,n):r()},t.prototype._showAxisTooltip=function(a,r){var n=this._ecModel,i=this._tooltipModel,o=[r.offsetX,r.offsetY],s=Dl([r.tooltipOption],i),l=this._renderMode,c=[],u=Za("section",{blocks:[],noHeader:!0}),h=[],d=new gp;G(a,function(y){G(y.dataByAxis,function(b){var w=n.getComponent(b.axisDim+"Axis",b.axisIndex),T=b.value;if(!(!w||T==null)){var C=Fk(T,w.axis,n,b.seriesDataIndices,b.valueLabelOpt),A=Za("section",{header:C,noHeader:!iT(C),sortBlocks:!0,blocks:[]});u.blocks.push(A),G(b.seriesDataIndices,function(k){var L=n.getSeriesByIndex(k.seriesIndex),M=k.dataIndexInside,P=L.getDataParams(M);if(!(P.dataIndex<0)){P.axisDim=b.axisDim,P.axisIndex=b.axisIndex,P.axisType=b.axisType,P.axisId=b.axisId,P.axisValue=_T(w.axis,{value:T}),P.axisValueLabel=C,P.marker=d.makeTooltipMarker("item",Ns(P.color),l);var E=c1(L.formatTooltip(M,!0,null)),D=E.frag;if(D){var O=Dl([L],i).get("valueFormatter");A.blocks.push(O?Vt({valueFormatter:O},D):D)}E.text&&h.push(E.text),c.push(P)}})}})}),u.blocks.reverse(),h.reverse();var f=r.position,p=s.get("order"),g=u1(u,d,l,p,n.get("useUTC"),s.get("textStyle"));g&&h.unshift(g);var v=l==="richText"?`

`:"<br/>",_=h.join(v);this._showOrMove(s,function(){this._updateContentNotChangedOnAxis(a,c)?this._updatePosition(s,f,o[0],o[1],this._tooltipContent,c):this._showTooltipContent(s,_,c,Math.random()+"",o[0],o[1],f,null,d)})},t.prototype._showSeriesItemTooltip=function(a,r,n){var i=this._ecModel,o=Ae(r),s=o.seriesIndex,l=i.getSeriesByIndex(s),c=o.dataModel||l,u=o.dataIndex,h=o.dataType,d=c.getData(h),f=this._renderMode,p=a.positionDefault,g=Dl([d.getItemModel(u),c,l&&(l.coordinateSystem||{}).model],this._tooltipModel,p?{position:p}:null),v=g.get("trigger");if(!(v!=null&&v!=="item")){var _=c.getDataParams(u,h),y=new gp;_.marker=y.makeTooltipMarker("item",Ns(_.color),f);var b=c1(c.formatTooltip(u,!1,h)),w=g.get("order"),T=g.get("valueFormatter"),C=b.frag,A=C?u1(T?Vt({valueFormatter:T},C):C,y,f,w,i.get("useUTC"),g.get("textStyle")):b.text,k="item_"+c.name+"_"+u;this._showOrMove(g,function(){this._showTooltipContent(g,A,_,k,a.offsetX,a.offsetY,a.position,a.target,y)}),n({type:"showTip",dataIndexInside:u,dataIndex:d.getRawIndex(u),seriesIndex:s,from:this.uid})}},t.prototype._showComponentItemTooltip=function(a,r,n){var i=this._renderMode==="html",o=Ae(r),s=o.tooltipConfig,l=s.option||{},c=l.encodeHTMLContent;if(ge(l)){var u=l;l={content:u,formatter:u},c=!0}c&&i&&l.content&&(l=Pe(l),l.content=wT(l.content));var h=[l],d=this._ecModel.getComponent(o.componentMainType,o.componentIndex);d&&h.push(d),h.push({formatter:l.content});var f=a.positionDefault,p=Dl(h,this._tooltipModel,f?{position:f}:null),g=p.get("content"),v=Math.random()+"",_=new gp;this._showOrMove(p,function(){var y=Pe(p.get("formatterParams")||{});this._showTooltipContent(p,g,y,v,a.offsetX,a.offsetY,a.position,r,_)}),n({type:"showTip",from:this.uid})},t.prototype._showTooltipContent=function(a,r,n,i,o,s,l,c,u){if(this._ticket="",!(!a.get("showContent")||!a.get("show"))){var h=this._tooltipContent;h.setEnterable(a.get("enterable"));var d=a.get("formatter");l=l||a.get("position");var f=r,p=this._getNearestPoint([o,s],n,a.get("trigger"),a.get("borderColor")),g=p.color;if(d)if(ge(d)){var v=a.ecModel.get("useUTC"),_=Nt(n)?n[0]:n,y=_&&_.axisType&&_.axisType.indexOf("time")>=0;f=d,y&&(f=Z5(_.axisValue,f,v)),f=K5(f,n,!0)}else if(Me(d)){var b=Ut(function(w,T){w===this._ticket&&(h.setContent(T,u,a,g,l),this._updatePosition(a,l,o,s,h,n,c))},this);this._ticket=i,f=d(n,i,b)}else f=d;h.setContent(f,u,a,g,l),h.show(a,g),this._updatePosition(a,l,o,s,h,n,c)}},t.prototype._getNearestPoint=function(a,r,n,i){if(n==="axis"||Nt(r))return{color:i||(this._renderMode==="html"?"#fff":"none")};if(!Nt(r))return{color:i||r.color||r.borderColor}},t.prototype._updatePosition=function(a,r,n,i,o,s,l){var c=this._api.getWidth(),u=this._api.getHeight();r=r||a.get("position");var h=o.getSize(),d=a.get("align"),f=a.get("verticalAlign"),p=l&&l.getBoundingRect().clone();if(l&&p.applyTransform(l.transform),Me(r)&&(r=r([n,i],s,o.el,p,{viewSize:[c,u],contentSize:h.slice()})),Nt(r))n=Ft(r[0],c),i=Ft(r[1],u);else if(na(r)){var g=r;g.width=h[0],g.height=h[1];var v=ka(g,{width:c,height:u});n=v.x,i=v.y,d=null,f=null}else if(ge(r)&&l){var _=KW(r,p,h,a.get("borderWidth"));n=_[0],i=_[1]}else{var _=XW(n,i,o,c,u,d?null:20,f?null:20);n=_[0],i=_[1]}if(d&&(n-=IS(d)?h[0]/2:d==="right"?h[0]:0),f&&(i-=IS(f)?h[1]/2:f==="bottom"?h[1]:0),aD(a)){var _=ZW(n,i,o,c,u);n=_[0],i=_[1]}o.moveTo(n,i)},t.prototype._updateContentNotChangedOnAxis=function(a,r){var n=this._lastDataByCoordSys,i=this._cbParamsList,o=!!n&&n.length===a.length;return o&&G(n,function(s,l){var c=s.dataByAxis||[],u=a[l]||{},h=u.dataByAxis||[];o=o&&c.length===h.length,o&&G(c,function(d,f){var p=h[f]||{},g=d.seriesDataIndices||[],v=p.seriesDataIndices||[];o=o&&d.value===p.value&&d.axisType===p.axisType&&d.axisId===p.axisId&&g.length===v.length,o&&G(g,function(_,y){var b=v[y];o=o&&_.seriesIndex===b.seriesIndex&&_.dataIndex===b.dataIndex}),i&&G(d.seriesDataIndices,function(_){var y=_.seriesIndex,b=r[y],w=i[y];b&&w&&w.data!==b.data&&(o=!1)})})}),this._lastDataByCoordSys=a,this._cbParamsList=r,!!o},t.prototype._hide=function(a){this._lastDataByCoordSys=null,a({type:"hideTip",from:this.uid})},t.prototype.dispose=function(a,r){Ya.node||!r.getDom()||(Lc(this,"_updatePosition"),this._tooltipContent.dispose(),Gv("itemTooltip",r))},t.type="tooltip",t}(ma);function Dl(e,t,a){var r=t.ecModel,n;a?(n=new _a(a,r,r),n=new _a(t.option,n,r)):n=t;for(var i=e.length-1;i>=0;i--){var o=e[i];o&&(o instanceof _a&&(o=o.get("tooltip",!0)),ge(o)&&(o={formatter:o}),o&&(n=new _a(o,n,r)))}return n}function LS(e,t){return e.dispatchAction||Ut(t.dispatchAction,t)}function XW(e,t,a,r,n,i,o){var s=a.getSize(),l=s[0],c=s[1];return i!=null&&(e+l+i+2>r?e-=l+i:e+=i),o!=null&&(t+c+o>n?t-=c+o:t+=o),[e,t]}function ZW(e,t,a,r,n){var i=a.getSize(),o=i[0],s=i[1];return e=Math.min(e+o,r)-o,t=Math.min(t+s,n)-s,e=Math.max(e,0),t=Math.max(t,0),[e,t]}function KW(e,t,a,r){var n=a[0],i=a[1],o=Math.ceil(Math.SQRT2*r)+8,s=0,l=0,c=t.width,u=t.height;switch(e){case"inside":s=t.x+c/2-n/2,l=t.y+u/2-i/2;break;case"top":s=t.x+c/2-n/2,l=t.y-i-o;break;case"bottom":s=t.x+c/2-n/2,l=t.y+u+o;break;case"left":s=t.x-n-o,l=t.y+u/2-i/2;break;case"right":s=t.x+c+o,l=t.y+u/2-i/2}return[s,l]}function IS(e){return e==="center"||e==="middle"}function JW(e,t,a){var r=J5(e).queryOptionMap,n=r.keys()[0];if(!(!n||n==="series")){var i=Q5(t,n,r.get(n),{useDefault:!1,enableAll:!1,enableNone:!1}),o=i.models[0];if(o){var s=a.getViewOfComponentModel(o),l;if(s.group.traverse(function(c){var u=Ae(c).tooltipConfig;if(u&&u.name===e.name)return l=c,!0}),l)return{componentMainType:n,componentIndex:o.componentIndex,el:l}}}}function Cn(e){ue(yu),e.registerComponentModel(BW),e.registerComponentView(YW),e.registerAction({type:"showTip",event:"showTip",update:"tooltip:manuallyShowTip"},xn),e.registerAction({type:"hideTip",event:"hideTip",update:"tooltip:manuallyHideTip"},xn)}var QW=["rect","polygon","keep","clear"];function tq(e,t){var a=nr(e?e.brush:[]);if(a.length){var r=[];G(a,function(l){var c=l.hasOwnProperty("toolbox")?l.toolbox:[];c instanceof Array&&(r=r.concat(c))});var n=e&&e.toolbox;Nt(n)&&(n=n[0]),n||(n={feature:{}},e.toolbox=[n]);var i=n.feature||(n.feature={}),o=i.brush||(i.brush={}),s=o.type||(o.type=[]);s.push.apply(s,r),eq(s),t&&!s.length&&s.push.apply(s,QW)}}function eq(e){var t={};G(e,function(a){t[a]=1}),e.length=0,G(t,function(a,r){e.push(r)})}var MS=G;function ES(e){if(e){for(var t in e)if(e.hasOwnProperty(t))return!0}}function Yv(e,t,a){var r={};return MS(t,function(i){var o=r[i]=n();MS(e[i],function(s,l){if(Ta.isValidType(l)){var c={type:l,visual:s};a&&a(c,i),o[l]=new Ta(c),l==="opacity"&&(c=Pe(c),c.type="colorAlpha",o.__hidden.__alphaForOpacity=new Ta(c))}})}),r;function n(){var i=function(){};i.prototype.__hidden=i.prototype;var o=new i;return o}}function oD(e,t,a){var r;G(a,function(n){t.hasOwnProperty(n)&&ES(t[n])&&(r=!0)}),r&&G(a,function(n){t.hasOwnProperty(n)&&ES(t[n])?e[n]=Pe(t[n]):delete e[n]})}function aq(e,t,a,r,n,i){var o={};G(e,function(h){var d=Ta.prepareVisualTypes(t[h]);o[h]=d});var s;function l(h){return CT(a,s,h)}function c(h,d){TT(a,s,h,d)}a.each(u);function u(h,d){s=h;var f=a.getRawDataItem(s);if(!(f&&f.visualMap===!1))for(var p=r.call(n,h),g=t[p],v=o[p],_=0,y=v.length;_<y;_++){var b=v[_];g[b]&&g[b].applyVisual(h,l,c)}}}function rq(e,t,a,r){var n={};return G(e,function(i){var o=Ta.prepareVisualTypes(t[i]);n[i]=o}),{progress:function(o,s){var l;r!=null&&(l=s.getDimensionIndex(r));function c(T){return CT(s,h,T)}function u(T,C){TT(s,h,T,C)}for(var h,d=s.getStore();(h=o.next())!=null;){var f=s.getRawDataItem(h);if(!(f&&f.visualMap===!1))for(var p=r!=null?d.get(l,h):h,g=a(p),v=t[g],_=n[g],y=0,b=_.length;y<b;y++){var w=_[y];v[w]&&v[w].applyVisual(p,c,u)}}}}}function nq(e){var t=e.brushType,a={point:function(r){return RS[t].point(r,a,e)},rect:function(r){return RS[t].rect(r,a,e)}};return a}var RS={lineX:PS(0),lineY:PS(1),rect:{point:function(e,t,a){return e&&a.boundingRect.contain(e[0],e[1])},rect:function(e,t,a){return e&&a.boundingRect.intersect(e)}},polygon:{point:function(e,t,a){return e&&a.boundingRect.contain(e[0],e[1])&&xl(a.range,e[0],e[1])},rect:function(e,t,a){var r=a.range;if(!e||r.length<=1)return!1;var n=e.x,i=e.y,o=e.width,s=e.height,l=r[0];if(xl(r,n,i)||xl(r,n+o,i)||xl(r,n,i+s)||xl(r,n+o,i+s)||aa.create(e).contain(l[0],l[1])||Ru(n,i,n+o,i,r)||Ru(n,i,n,i+s,r)||Ru(n+o,i,n+o,i+s,r)||Ru(n,i+s,n+o,i+s,r))return!0}}};function PS(e){var t=["x","y"],a=["width","height"];return{point:function(r,n,i){if(r){var o=i.range,s=r[e];return Ll(s,o)}},rect:function(r,n,i){if(r){var o=i.range,s=[r[t[e]],r[t[e]]+r[a[e]]];return s[1]<s[0]&&s.reverse(),Ll(s[0],o)||Ll(s[1],o)||Ll(o[0],s)||Ll(o[1],s)}}}}function Ll(e,t){return t[0]<=e&&e<=t[1]}var BS=["inBrush","outOfBrush"],pg="__ecBrushSelect",Xv="__ecInBrushSelectEvent";function sD(e){e.eachComponent({mainType:"brush"},function(t){var a=t.brushTargetManager=new f0(t.option,e);a.setInputRanges(t.areas,e)})}function iq(e,t,a){var r=[],n,i;e.eachComponent({mainType:"brush"},function(o){a&&a.type==="takeGlobalCursor"&&o.setBrushOption(a.key==="brush"?a.brushOption:{brushType:!1})}),sD(e),e.eachComponent({mainType:"brush"},function(o,s){var l={brushId:o.id,brushIndex:s,brushName:o.name,areas:Pe(o.areas),selected:[]};r.push(l);var c=o.option,u=c.brushLink,h=[],d=[],f=[],p=!1;s||(n=c.throttleType,i=c.throttleDelay);var g=Ot(o.areas,function(T){var C=cq[T.brushType],A=_e({boundingRect:C?C(T):void 0},T);return A.selectors=nq(A),A}),v=Yv(o.option,BS,function(T){T.mappingMethod="fixed"});Nt(u)&&G(u,function(T){h[T]=1});function _(T){return u==="all"||!!h[T]}function y(T){return!!T.length}e.eachSeries(function(T,C){var A=f[C]=[];T.subType==="parallel"?b(T,C):w(T,C,A)});function b(T,C){var A=T.coordinateSystem;p=p||A.hasAxisBrushed(),_(C)&&A.eachActiveState(T.getData(),function(k,L){k==="active"&&(d[L]=1)})}function w(T,C,A){if(!(!T.brushSelector||lq(o,C))&&(G(g,function(L){o.brushTargetManager.controlSeries(L,T,e)&&A.push(L),p=p||y(A)}),_(C)&&y(A))){var k=T.getData();k.each(function(L){OS(T,A,k,L)&&(d[L]=1)})}}e.eachSeries(function(T,C){var A={seriesId:T.id,seriesIndex:C,seriesName:T.name,dataIndex:[]};l.selected.push(A);var k=f[C],L=T.getData(),M=_(C)?function(P){return d[P]?(A.dataIndex.push(L.getRawIndex(P)),"inBrush"):"outOfBrush"}:function(P){return OS(T,k,L,P)?(A.dataIndex.push(L.getRawIndex(P)),"inBrush"):"outOfBrush"};(_(C)?p:y(k))&&aq(BS,v,L,M)})}),oq(t,n,i,r,a)}function oq(e,t,a,r,n){if(n){var i=e.getZr();if(!i[Xv]){i[pg]||(i[pg]=sq);var o=ul(i,pg,a,t);o(e,r)}}}function sq(e,t){if(!e.isDisposed()){var a=e.getZr();a[Xv]=!0,e.dispatchAction({type:"brushSelect",batch:t}),a[Xv]=!1}}function OS(e,t,a,r){for(var n=0,i=t.length;n<i;n++){var o=t[n];if(e.brushSelector(r,a,o.selectors,o))return!0}}function lq(e,t){var a=e.option.seriesIndex;return a!=null&&a!=="all"&&(Nt(a)?Xe(a,t)<0:t!==a)}var cq={rect:function(e){return NS(e.range)},polygon:function(e){for(var t,a=e.range,r=0,n=a.length;r<n;r++){t=t||[[1/0,-1/0],[1/0,-1/0]];var i=a[r];i[0]<t[0][0]&&(t[0][0]=i[0]),i[0]>t[0][1]&&(t[0][1]=i[0]),i[1]<t[1][0]&&(t[1][0]=i[1]),i[1]>t[1][1]&&(t[1][1]=i[1])}return t&&NS(t)}};function NS(e){return new aa(e[0][0],e[1][0],e[0][1]-e[0][0],e[1][1]-e[1][0])}var uq=function(e){gt(t,e);function t(){var a=e!==null&&e.apply(this,arguments)||this;return a.type=t.type,a}return t.prototype.init=function(a,r){this.ecModel=a,this.api=r,this.model,(this._brushController=new zy(r.getZr())).on("brush",Ut(this._onBrush,this)).mount()},t.prototype.render=function(a,r,n,i){this.model=a,this._updateController(a,r,n,i)},t.prototype.updateTransform=function(a,r,n,i){sD(r),this._updateController(a,r,n,i)},t.prototype.updateVisual=function(a,r,n,i){this.updateTransform(a,r,n,i)},t.prototype.updateView=function(a,r,n,i){this._updateController(a,r,n,i)},t.prototype._updateController=function(a,r,n,i){(!i||i.$from!==a.id)&&this._brushController.setPanels(a.brushTargetManager.makePanelOpts(n)).enableBrush(a.brushOption).updateCovers(a.areas.slice())},t.prototype.dispose=function(){this._brushController.dispose()},t.prototype._onBrush=function(a){var r=this.model.id,n=this.model.brushTargetManager.setOutputRanges(a.areas,this.ecModel);(!a.isEnd||a.removeOnClick)&&this.api.dispatchAction({type:"brush",brushId:r,areas:Pe(n),$from:r}),a.isEnd&&this.api.dispatchAction({type:"brushEnd",brushId:r,areas:Pe(n),$from:r})},t.type="brush",t}(ma),hq="#ddd",dq=function(e){gt(t,e);function t(){var a=e!==null&&e.apply(this,arguments)||this;return a.type=t.type,a.areas=[],a.brushOption={},a}return t.prototype.optionUpdated=function(a,r){var n=this.option;!r&&oD(n,a,["inBrush","outOfBrush"]);var i=n.inBrush=n.inBrush||{};n.outOfBrush=n.outOfBrush||{color:hq},i.hasOwnProperty("liftZ")||(i.liftZ=5)},t.prototype.setAreas=function(a){a&&(this.areas=Ot(a,function(r){return $S(this.option,r)},this))},t.prototype.setBrushOption=function(a){this.brushOption=$S(this.option,a),this.brushType=this.brushOption.brushType},t.type="brush",t.dependencies=["geo","grid","xAxis","yAxis","parallel","series"],t.defaultOption={seriesIndex:"all",brushType:"rect",brushMode:"single",transformable:!0,brushStyle:{borderWidth:1,color:"rgba(210,219,238,0.3)",borderColor:"#D2DBEE"},throttleType:"fixRate",throttleDelay:0,removeOnClick:!0,z:1e4},t}(da);function $S(e,t){return Be({brushType:e.brushType,brushMode:e.brushMode,transformable:e.transformable,brushStyle:new _a(e.brushStyle).getItemStyle(),removeOnClick:e.removeOnClick,z:e.z},t,!0)}var fq=["rect","polygon","lineX","lineY","keep","clear"],pq=function(e){gt(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.render=function(a,r,n){var i,o,s;r.eachComponent({mainType:"brush"},function(l){i=l.brushType,o=l.brushOption.brushMode||"single",s=s||!!l.areas.length}),this._brushType=i,this._brushMode=o,G(a.get("type",!0),function(l){a.setIconStatus(l,(l==="keep"?o==="multiple":l==="clear"?s:l===i)?"emphasis":"normal")})},t.prototype.updateView=function(a,r,n){this.render(a,r,n)},t.prototype.getIcons=function(){var a=this.model,r=a.get("icon",!0),n={};return G(a.get("type",!0),function(i){r[i]&&(n[i]=r[i])}),n},t.prototype.onclick=function(a,r,n){var i=this._brushType,o=this._brushMode;n==="clear"?(r.dispatchAction({type:"axisAreaSelect",intervals:[]}),r.dispatchAction({type:"brush",command:"clear",areas:[]})):r.dispatchAction({type:"takeGlobalCursor",key:"brush",brushOption:{brushType:n==="keep"?i:i===n?!1:n,brushMode:n==="keep"?o==="multiple"?"single":"multiple":o}})},t.getDefaultOption=function(a){var r={show:!0,type:fq.slice(),icon:{rect:"M7.3,34.7 M0.4,10V-0.2h9.8 M89.6,10V-0.2h-9.8 M0.4,60v10.2h9.8 M89.6,60v10.2h-9.8 M12.3,22.4V10.5h13.1 M33.6,10.5h7.8 M49.1,10.5h7.8 M77.5,22.4V10.5h-13 M12.3,31.1v8.2 M77.7,31.1v8.2 M12.3,47.6v11.9h13.1 M33.6,59.5h7.6 M49.1,59.5 h7.7 M77.5,47.6v11.9h-13",polygon:"M55.2,34.9c1.7,0,3.1,1.4,3.1,3.1s-1.4,3.1-3.1,3.1 s-3.1-1.4-3.1-3.1S53.5,34.9,55.2,34.9z M50.4,51c1.7,0,3.1,1.4,3.1,3.1c0,1.7-1.4,3.1-3.1,3.1c-1.7,0-3.1-1.4-3.1-3.1 C47.3,52.4,48.7,51,50.4,51z M55.6,37.1l1.5-7.8 M60.1,13.5l1.6-8.7l-7.8,4 M59,19l-1,5.3 M24,16.1l6.4,4.9l6.4-3.3 M48.5,11.6 l-5.9,3.1 M19.1,12.8L9.7,5.1l1.1,7.7 M13.4,29.8l1,7.3l6.6,1.6 M11.6,18.4l1,6.1 M32.8,41.9 M26.6,40.4 M27.3,40.2l6.1,1.6 M49.9,52.1l-5.6-7.6l-4.9-1.2",lineX:"M15.2,30 M19.7,15.6V1.9H29 M34.8,1.9H40.4 M55.3,15.6V1.9H45.9 M19.7,44.4V58.1H29 M34.8,58.1H40.4 M55.3,44.4 V58.1H45.9 M12.5,20.3l-9.4,9.6l9.6,9.8 M3.1,29.9h16.5 M62.5,20.3l9.4,9.6L62.3,39.7 M71.9,29.9H55.4",lineY:"M38.8,7.7 M52.7,12h13.2v9 M65.9,26.6V32 M52.7,46.3h13.2v-9 M24.9,12H11.8v9 M11.8,26.6V32 M24.9,46.3H11.8v-9 M48.2,5.1l-9.3-9l-9.4,9.2 M38.9-3.9V12 M48.2,53.3l-9.3,9l-9.4-9.2 M38.9,62.3V46.4",keep:"M4,10.5V1h10.3 M20.7,1h6.1 M33,1h6.1 M55.4,10.5V1H45.2 M4,17.3v6.6 M55.6,17.3v6.6 M4,30.5V40h10.3 M20.7,40 h6.1 M33,40h6.1 M55.4,30.5V40H45.2 M21,18.9h62.9v48.6H21V18.9z",clear:"M22,14.7l30.9,31 M52.9,14.7L22,45.7 M4.7,16.8V4.2h13.1 M26,4.2h7.8 M41.6,4.2h7.8 M70.3,16.8V4.2H57.2 M4.7,25.9v8.6 M70.3,25.9v8.6 M4.7,43.2v12.6h13.1 M26,55.8h7.8 M41.6,55.8h7.8 M70.3,43.2v12.6H57.2"},title:a.getLocaleModel().get(["toolbox","brush","title"])};return r},t}(Ir);function gq(e){e.registerComponentView(uq),e.registerComponentModel(dq),e.registerPreprocessor(tq),e.registerVisual(e.PRIORITY.VISUAL.BRUSH,iq),e.registerAction({type:"brush",event:"brush",update:"updateVisual"},function(t,a){a.eachComponent({mainType:"brush",query:t},function(r){r.setAreas(t.areas)})}),e.registerAction({type:"brushSelect",event:"brushSelected",update:"none"},xn),e.registerAction({type:"brushEnd",event:"brushEnd",update:"none"},xn),ls("brush",pq)}var vq=function(e){gt(t,e);function t(){var a=e!==null&&e.apply(this,arguments)||this;return a.type=t.type,a.layoutMode={type:"box",ignoreSize:!0},a}return t.type="title",t.defaultOption={z:6,show:!0,text:"",target:"blank",subtext:"",subtarget:"blank",left:0,top:0,backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderWidth:0,padding:5,itemGap:10,textStyle:{fontSize:18,fontWeight:"bold",color:"#464646"},subtextStyle:{fontSize:12,color:"#6E7079"}},t}(da),mq=function(e){gt(t,e);function t(){var a=e!==null&&e.apply(this,arguments)||this;return a.type=t.type,a}return t.prototype.render=function(a,r,n){if(this.group.removeAll(),!!a.get("show")){var i=this.group,o=a.getModel("textStyle"),s=a.getModel("subtextStyle"),l=a.get("textAlign"),c=sa(a.get("textBaseline"),a.get("textVerticalAlign")),u=new Oe({style:Ke(o,{text:a.get("text"),fill:o.getTextColor()},{disableBox:!0}),z2:10}),h=u.getBoundingRect(),d=a.get("subtext"),f=new Oe({style:Ke(s,{text:d,fill:s.getTextColor(),y:h.height+a.get("itemGap"),verticalAlign:"top"},{disableBox:!0}),z2:10}),p=a.get("link"),g=a.get("sublink"),v=a.get("triggerEvent",!0);u.silent=!p&&!v,f.silent=!g&&!v,p&&u.on("click",function(){Kh(p,"_"+a.get("target"))}),g&&f.on("click",function(){Kh(g,"_"+a.get("subtarget"))}),Ae(u).eventData=Ae(f).eventData=v?{componentType:"title",componentIndex:a.componentIndex}:null,i.add(u),d&&i.add(f);var _=i.getBoundingRect(),y=a.getBoxLayoutParams();y.width=_.width,y.height=_.height;var b=ka(y,{width:n.getWidth(),height:n.getHeight()},a.get("padding"));l||(l=a.get("left")||a.get("right"),l==="middle"&&(l="center"),l==="right"?b.x+=b.width:l==="center"&&(b.x+=b.width/2)),c||(c=a.get("top")||a.get("bottom"),c==="center"&&(c="middle"),c==="bottom"?b.y+=b.height:c==="middle"&&(b.y+=b.height/2),c=c||"top"),i.x=b.x,i.y=b.y,i.markRedraw();var w={align:l,verticalAlign:c};u.setStyle(w),f.setStyle(w),_=i.getBoundingRect();var T=b.margin,C=a.getItemStyle(["color","opacity"]);C.fill=a.get("backgroundColor");var A=new Ge({shape:{x:_.x-T[3],y:_.y-T[0],width:_.width+T[1]+T[3],height:_.height+T[0]+T[2],r:a.get("borderRadius")},style:C,subPixelOptimize:!0,silent:!0});i.add(A)}},t.type="title",t}(ma);function Tn(e){e.registerComponentModel(vq),e.registerComponentView(mq)}var FS=function(e){gt(t,e);function t(){var a=e!==null&&e.apply(this,arguments)||this;return a.type=t.type,a.layoutMode="box",a}return t.prototype.init=function(a,r,n){this.mergeDefaultAndTheme(a,n),this._initData()},t.prototype.mergeOption=function(a){e.prototype.mergeOption.apply(this,arguments),this._initData()},t.prototype.setCurrentIndex=function(a){a==null&&(a=this.option.currentIndex);var r=this._data.count();this.option.loop?a=(a%r+r)%r:(a>=r&&(a=r-1),a<0&&(a=0)),this.option.currentIndex=a},t.prototype.getCurrentIndex=function(){return this.option.currentIndex},t.prototype.isIndexMax=function(){return this.getCurrentIndex()>=this._data.count()-1},t.prototype.setPlayState=function(a){this.option.autoPlay=!!a},t.prototype.getPlayState=function(){return!!this.option.autoPlay},t.prototype._initData=function(){var a=this.option,r=a.data||[],n=a.axisType,i=this._names=[],o;n==="category"?(o=[],G(r,function(c,u){var h=zn(tO(c),""),d;na(c)?(d=Pe(c),d.value=u):d=u,o.push(d),i.push(h)})):o=r;var s={category:"ordinal",time:"time",value:"number"}[n]||"number",l=this._data=new pr([{name:"value",type:s}],this);l.initData(o,i)},t.prototype.getData=function(){return this._data},t.prototype.getCategories=function(){if(this.get("axisType")==="category")return this._names.slice()},t.type="timeline",t.defaultOption={z:4,show:!0,axisType:"time",realtime:!0,left:"20%",top:null,right:"20%",bottom:0,width:null,height:40,padding:5,controlPosition:"left",autoPlay:!1,rewind:!1,loop:!0,playInterval:2e3,currentIndex:0,itemStyle:{},label:{color:"#000"},data:[]},t}(da),lD=function(e){gt(t,e);function t(){var a=e!==null&&e.apply(this,arguments)||this;return a.type=t.type,a}return t.type="timeline.slider",t.defaultOption=zi(FS.defaultOption,{backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderWidth:0,orient:"horizontal",inverse:!1,tooltip:{trigger:"item"},symbol:"circle",symbolSize:12,lineStyle:{show:!0,width:2,color:"#DAE1F5"},label:{position:"auto",show:!0,interval:"auto",rotate:0,color:"#A4B1D7"},itemStyle:{color:"#A4B1D7",borderWidth:1},checkpointStyle:{symbol:"circle",symbolSize:15,color:"#316bf3",borderColor:"#fff",borderWidth:2,shadowBlur:2,shadowOffsetX:1,shadowOffsetY:1,shadowColor:"rgba(0, 0, 0, 0.3)",animation:!0,animationDuration:300,animationEasing:"quinticInOut"},controlStyle:{show:!0,showPlayBtn:!0,showPrevBtn:!0,showNextBtn:!0,itemSize:24,itemGap:12,position:"left",playIcon:"path://M31.6,53C17.5,53,6,41.5,6,27.4S17.5,1.8,31.6,1.8C45.7,1.8,57.2,13.3,57.2,27.4S45.7,53,31.6,53z M31.6,3.3 C18.4,3.3,7.5,14.1,7.5,27.4c0,13.3,10.8,24.1,24.1,24.1C44.9,51.5,55.7,40.7,55.7,27.4C55.7,14.1,44.9,3.3,31.6,3.3z M24.9,21.3 c0-2.2,1.6-3.1,3.5-2l10.5,6.1c1.899,1.1,1.899,2.9,0,4l-10.5,6.1c-1.9,1.1-3.5,0.2-3.5-2V21.3z",stopIcon:"path://M30.9,53.2C16.8,53.2,5.3,41.7,5.3,27.6S16.8,2,30.9,2C45,2,56.4,13.5,56.4,27.6S45,53.2,30.9,53.2z M30.9,3.5C17.6,3.5,6.8,14.4,6.8,27.6c0,13.3,10.8,24.1,24.101,24.1C44.2,51.7,55,40.9,55,27.6C54.9,14.4,44.1,3.5,30.9,3.5z M36.9,35.8c0,0.601-0.4,1-0.9,1h-1.3c-0.5,0-0.9-0.399-0.9-1V19.5c0-0.6,0.4-1,0.9-1H36c0.5,0,0.9,0.4,0.9,1V35.8z M27.8,35.8 c0,0.601-0.4,1-0.9,1h-1.3c-0.5,0-0.9-0.399-0.9-1V19.5c0-0.6,0.4-1,0.9-1H27c0.5,0,0.9,0.4,0.9,1L27.8,35.8L27.8,35.8z",nextIcon:"M2,18.5A1.52,1.52,0,0,1,.92,18a1.49,1.49,0,0,1,0-2.12L7.81,9.36,1,3.11A1.5,1.5,0,1,1,3,.89l8,7.34a1.48,1.48,0,0,1,.49,1.09,1.51,1.51,0,0,1-.46,1.1L3,18.08A1.5,1.5,0,0,1,2,18.5Z",prevIcon:"M10,.5A1.52,1.52,0,0,1,11.08,1a1.49,1.49,0,0,1,0,2.12L4.19,9.64,11,15.89a1.5,1.5,0,1,1-2,2.22L1,10.77A1.48,1.48,0,0,1,.5,9.68,1.51,1.51,0,0,1,1,8.58L9,.92A1.5,1.5,0,0,1,10,.5Z",prevBtnSize:18,nextBtnSize:18,color:"#A4B1D7",borderColor:"#A4B1D7",borderWidth:1},emphasis:{label:{show:!0,color:"#6f778d"},itemStyle:{color:"#316BF3"},controlStyle:{color:"#316BF3",borderColor:"#316BF3",borderWidth:2}},progress:{lineStyle:{color:"#316BF3"},itemStyle:{color:"#316BF3"},label:{color:"#6f778d"}},data:[]}),t}(FS);$r(lD,vy.prototype);var yq=function(e){gt(t,e);function t(){var a=e!==null&&e.apply(this,arguments)||this;return a.type=t.type,a}return t.type="timeline",t}(ma),_q=function(e){gt(t,e);function t(a,r,n,i){var o=e.call(this,a,r,n)||this;return o.type=i||"value",o}return t.prototype.getLabelModel=function(){return this.model.getModel("label")},t.prototype.isHorizontal=function(){return this.model.get("orient")==="horizontal"},t}(Jr),gg=Math.PI,zS=ia(),bq=function(e){gt(t,e);function t(){var a=e!==null&&e.apply(this,arguments)||this;return a.type=t.type,a}return t.prototype.init=function(a,r){this.api=r},t.prototype.render=function(a,r,n){if(this.model=a,this.api=n,this.ecModel=r,this.group.removeAll(),a.get("show",!0)){var i=this._layout(a,n),o=this._createGroup("_mainGroup"),s=this._createGroup("_labelGroup"),l=this._axis=this._createAxis(i,a);a.formatTooltip=function(c){var u=l.scale.getLabel({value:c});return Za("nameValue",{noName:!0,value:u})},G(["AxisLine","AxisTick","Control","CurrentPointer"],function(c){this["_render"+c](i,o,l,a)},this),this._renderAxisLabel(i,s,l,a),this._position(i,a)}this._doPlayStop(),this._updateTicksStatus()},t.prototype.remove=function(){this._clearTimer(),this.group.removeAll()},t.prototype.dispose=function(){this._clearTimer()},t.prototype._layout=function(a,r){var n=a.get(["label","position"]),i=a.get("orient"),o=Sq(a,r),s;n==null||n==="auto"?s=i==="horizontal"?o.y+o.height/2<r.getHeight()/2?"-":"+":o.x+o.width/2<r.getWidth()/2?"+":"-":ge(n)?s={horizontal:{top:"-",bottom:"+"},vertical:{left:"-",right:"+"}}[i][n]:s=n;var l={horizontal:"center",vertical:s>=0||s==="+"?"left":"right"},c={horizontal:s>=0||s==="+"?"top":"bottom",vertical:"middle"},u={horizontal:0,vertical:gg/2},h=i==="vertical"?o.height:o.width,d=a.getModel("controlStyle"),f=d.get("show",!0),p=f?d.get("itemSize"):0,g=f?d.get("itemGap"):0,v=p+g,_=a.get(["label","rotate"])||0;_=_*gg/180;var y,b,w,T=d.get("position",!0),C=f&&d.get("showPlayBtn",!0),A=f&&d.get("showPrevBtn",!0),k=f&&d.get("showNextBtn",!0),L=0,M=h;T==="left"||T==="bottom"?(C&&(y=[0,0],L+=v),A&&(b=[L,0],L+=v),k&&(w=[M-p,0],M-=v)):(C&&(y=[M-p,0],M-=v),A&&(b=[0,0],L+=v),k&&(w=[M-p,0],M-=v));var P=[L,M];return a.get("inverse")&&P.reverse(),{viewRect:o,mainLength:h,orient:i,rotation:u[i],labelRotation:_,labelPosOpt:s,labelAlign:a.get(["label","align"])||l[i],labelBaseline:a.get(["label","verticalAlign"])||a.get(["label","baseline"])||c[i],playPosition:y,prevBtnPosition:b,nextBtnPosition:w,axisExtent:P,controlSize:p,controlGap:g}},t.prototype._position=function(a,r){var n=this._mainGroup,i=this._labelGroup,o=a.viewRect;if(a.orient==="vertical"){var s=$o(),l=o.x,c=o.y+o.height;Ei(s,s,[-l,-c]),cl(s,s,-gg/2),Ei(s,s,[l,c]),o=o.clone(),o.applyTransform(s)}var u=y(o),h=y(n.getBoundingRect()),d=y(i.getBoundingRect()),f=[n.x,n.y],p=[i.x,i.y];p[0]=f[0]=u[0][0];var g=a.labelPosOpt;if(g==null||ge(g)){var v=g==="+"?0:1;b(f,h,u,1,v),b(p,d,u,1,1-v)}else{var v=g>=0?0:1;b(f,h,u,1,v),p[1]=f[1]+g}n.setPosition(f),i.setPosition(p),n.rotation=i.rotation=a.rotation,_(n),_(i);function _(w){w.originX=u[0][0]-w.x,w.originY=u[1][0]-w.y}function y(w){return[[w.x,w.x+w.width],[w.y,w.y+w.height]]}function b(w,T,C,A,k){w[A]+=C[A][k]-T[A][k]}},t.prototype._createAxis=function(a,r){var n=r.getData(),i=r.get("axisType"),o=xq(r,i);o.getTicks=function(){return n.mapArray(["value"],function(c){return{value:c}})};var s=n.getDataExtent("value");o.setExtent(s[0],s[1]),o.calcNiceTicks();var l=new _q("value",o,a.axisExtent,i);return l.model=r,l},t.prototype._createGroup=function(a){var r=this[a]=new ie;return this.group.add(r),r},t.prototype._renderAxisLine=function(a,r,n,i){var o=n.getExtent();if(i.get(["lineStyle","show"])){var s=new tr({shape:{x1:o[0],y1:0,x2:o[1],y2:0},style:Vt({lineCap:"round"},i.getModel("lineStyle").getLineStyle()),silent:!0,z2:1});r.add(s);var l=this._progressLine=new tr({shape:{x1:o[0],x2:this._currentPointer?this._currentPointer.x:o[0],y1:0,y2:0},style:_e({lineCap:"round",lineWidth:s.style.lineWidth},i.getModel(["progress","lineStyle"]).getLineStyle()),silent:!0,z2:1});r.add(l)}},t.prototype._renderAxisTick=function(a,r,n,i){var o=this,s=i.getData(),l=n.scale.getTicks();this._tickSymbols=[],G(l,function(c){var u=n.dataToCoord(c.value),h=s.getItemModel(c.value),d=h.getModel("itemStyle"),f=h.getModel(["emphasis","itemStyle"]),p=h.getModel(["progress","itemStyle"]),g={x:u,y:0,onclick:Ut(o._changeTimeline,o,c.value)},v=VS(h,d,r,g);v.ensureState("emphasis").style=f.getItemStyle(),v.ensureState("progress").style=p.getItemStyle(),_s(v);var _=Ae(v);h.get("tooltip")?(_.dataIndex=c.value,_.dataModel=i):_.dataIndex=_.dataModel=null,o._tickSymbols.push(v)})},t.prototype._renderAxisLabel=function(a,r,n,i){var o=this,s=n.getLabelModel();if(s.get("show")){var l=i.getData(),c=n.getViewLabels();this._tickLabels=[],G(c,function(u){var h=u.tickValue,d=l.getItemModel(h),f=d.getModel("label"),p=d.getModel(["emphasis","label"]),g=d.getModel(["progress","label"]),v=n.dataToCoord(u.tickValue),_=new Oe({x:v,y:0,rotation:a.labelRotation-a.rotation,onclick:Ut(o._changeTimeline,o,h),silent:!1,style:Ke(f,{text:u.formattedLabel,align:a.labelAlign,verticalAlign:a.labelBaseline})});_.ensureState("emphasis").style=Ke(p),_.ensureState("progress").style=Ke(g),r.add(_),_s(_),zS(_).dataIndex=h,o._tickLabels.push(_)})}},t.prototype._renderControl=function(a,r,n,i){var o=a.controlSize,s=a.rotation,l=i.getModel("controlStyle").getItemStyle(),c=i.getModel(["emphasis","controlStyle"]).getItemStyle(),u=i.getPlayState(),h=i.get("inverse",!0);d(a.nextBtnPosition,"next",Ut(this._changeTimeline,this,h?"-":"+")),d(a.prevBtnPosition,"prev",Ut(this._changeTimeline,this,h?"+":"-")),d(a.playPosition,u?"stop":"play",Ut(this._handlePlayClick,this,!u),!0);function d(f,p,g,v){if(f){var _=Uh(sa(i.get(["controlStyle",p+"BtnSize"]),o),o),y=[0,-_/2,_,_],b=wq(i,p+"Icon",y,{x:f[0],y:f[1],originX:o/2,originY:0,rotation:v?-s:0,rectHover:!0,style:l,onclick:g});b.ensureState("emphasis").style=c,r.add(b),_s(b)}}},t.prototype._renderCurrentPointer=function(a,r,n,i){var o=i.getData(),s=i.getCurrentIndex(),l=o.getItemModel(s).getModel("checkpointStyle"),c=this,u={onCreate:function(h){h.draggable=!0,h.drift=Ut(c._handlePointerDrag,c),h.ondragend=Ut(c._handlePointerDragend,c),GS(h,c._progressLine,s,n,i,!0)},onUpdate:function(h){GS(h,c._progressLine,s,n,i)}};this._currentPointer=VS(l,l,this._mainGroup,{},this._currentPointer,u)},t.prototype._handlePlayClick=function(a){this._clearTimer(),this.api.dispatchAction({type:"timelinePlayChange",playState:a,from:this.uid})},t.prototype._handlePointerDrag=function(a,r,n){this._clearTimer(),this._pointerChangeTimeline([n.offsetX,n.offsetY])},t.prototype._handlePointerDragend=function(a){this._pointerChangeTimeline([a.offsetX,a.offsetY],!0)},t.prototype._pointerChangeTimeline=function(a,r){var n=this._toAxisCoord(a)[0],i=this._axis,o=Er(i.getExtent().slice());n>o[1]&&(n=o[1]),n<o[0]&&(n=o[0]),this._currentPointer.x=n,this._currentPointer.markRedraw();var s=this._progressLine;s&&(s.shape.x2=n,s.dirty());var l=this._findNearestTick(n),c=this.model;(r||l!==c.getCurrentIndex()&&c.get("realtime"))&&this._changeTimeline(l)},t.prototype._doPlayStop=function(){var a=this;this._clearTimer(),this.model.getPlayState()&&(this._timer=setTimeout(function(){var r=a.model;a._changeTimeline(r.getCurrentIndex()+(r.get("rewind",!0)?-1:1))},this.model.get("playInterval")))},t.prototype._toAxisCoord=function(a){var r=this._mainGroup.getLocalTransform();return qn(a,r,!0)},t.prototype._findNearestTick=function(a){var r=this.model.getData(),n=1/0,i,o=this._axis;return r.each(["value"],function(s,l){var c=o.dataToCoord(s),u=Math.abs(c-a);u<n&&(n=u,i=l)}),i},t.prototype._clearTimer=function(){this._timer&&(clearTimeout(this._timer),this._timer=null)},t.prototype._changeTimeline=function(a){var r=this.model.getCurrentIndex();a==="+"?a=r+1:a==="-"&&(a=r-1),this.api.dispatchAction({type:"timelineChange",currentIndex:a,from:this.uid})},t.prototype._updateTicksStatus=function(){var a=this.model.getCurrentIndex(),r=this._tickSymbols,n=this._tickLabels;if(r)for(var i=0;i<r.length;i++)r&&r[i]&&r[i].toggleState("progress",i<a);if(n)for(var i=0;i<n.length;i++)n&&n[i]&&n[i].toggleState("progress",zS(n[i]).dataIndex<=a)},t.type="timeline.slider",t}(yq);function xq(e,t){if(t=t||e.get("type"),t)switch(t){case"category":return new aO({ordinalMeta:e.getCategories(),extent:[1/0,-1/0]});case"time":return new eO({locale:e.ecModel.getLocaleModel(),useUTC:e.ecModel.get("useUTC")});default:return new Yh}}function Sq(e,t){return ka(e.getBoxLayoutParams(),{width:t.getWidth(),height:t.getHeight()},e.get("padding"))}function wq(e,t,a,r){var n=r.style,i=vf(e.get(["controlStyle",t]),r||{},new aa(a[0],a[1],a[2],a[3]));return n&&i.setStyle(n),i}function VS(e,t,a,r,n,i){var o=t.get("color");if(n)n.setColor(o),a.add(n),i&&i.onUpdate(n);else{var s=e.get("symbol");n=ba(s,-1,-1,2,2,o),n.setStyle("strokeNoScale",!0),a.add(n),i&&i.onCreate(n)}var l=t.getItemStyle(["color"]);n.setStyle(l),r=Be({rectHover:!0,z2:100},r,!0);var c=il(e.get("symbolSize"));r.scaleX=c[0]/2,r.scaleY=c[1]/2;var u=Oo(e.get("symbolOffset"),c);u&&(r.x=(r.x||0)+u[0],r.y=(r.y||0)+u[1]);var h=e.get("symbolRotate");return r.rotation=(h||0)*Math.PI/180||0,n.attr(r),n.updateTransform(),n}function GS(e,t,a,r,n,i){if(!e.dragging){var o=n.getModel("checkpointStyle"),s=r.dataToCoord(n.getData().get("value",a));if(i||!o.get("animation",!0))e.attr({x:s,y:0}),t&&t.attr({shape:{x2:s}});else{var l={duration:o.get("animationDuration",!0),easing:o.get("animationEasing",!0)};e.stopAnimation(null,!0),e.animateTo({x:s,y:0},l),t&&t.animateTo({shape:{x2:s}},l)}}}function Cq(e){e.registerAction({type:"timelineChange",event:"timelineChanged",update:"prepareAndUpdate"},function(t,a,r){var n=a.getComponent("timeline");return n&&t.currentIndex!=null&&(n.setCurrentIndex(t.currentIndex),!n.get("loop",!0)&&n.isIndexMax()&&n.getPlayState()&&(n.setPlayState(!1),r.dispatchAction({type:"timelinePlayChange",playState:!1,from:t.from}))),a.resetOption("timeline",{replaceMerge:n.get("replaceMerge",!0)}),_e({currentIndex:n.option.currentIndex},t)}),e.registerAction({type:"timelinePlayChange",event:"timelinePlayChanged",update:"update"},function(t,a){var r=a.getComponent("timeline");r&&t.playState!=null&&r.setPlayState(t.playState)})}function Tq(e){var t=e&&e.timeline;Nt(t)||(t=t?[t]:[]),G(t,function(a){a&&Aq(a)})}function Aq(e){var t=e.type,a={number:"value",time:"time"};if(a[t]&&(e.axisType=a[t],delete e.type),HS(e),no(e,"controlPosition")){var r=e.controlStyle||(e.controlStyle={});no(r,"position")||(r.position=e.controlPosition),r.position==="none"&&!no(r,"show")&&(r.show=!1,delete r.position),delete e.controlPosition}G(e.data||[],function(n){na(n)&&!Nt(n)&&(!no(n,"value")&&no(n,"name")&&(n.value=n.name),HS(n))})}function HS(e){var t=e.itemStyle||(e.itemStyle={}),a=t.emphasis||(t.emphasis={}),r=e.label||e.label||{},n=r.normal||(r.normal={}),i={normal:1,emphasis:1};G(r,function(o,s){!i[s]&&!no(n,s)&&(n[s]=o)}),a.label&&!no(r,"emphasis")&&(r.emphasis=a.label,delete a.label)}function no(e,t){return e.hasOwnProperty(t)}function kq(e){e.registerComponentModel(lD),e.registerComponentView(bq),e.registerSubTypeDefaulter("timeline",function(){return"slider"}),Cq(e),e.registerPreprocessor(Tq)}function v0(e,t){if(!e)return!1;for(var a=Nt(e)?e:[e],r=0;r<a.length;r++)if(a[r]&&a[r][t])return!0;return!1}function Zu(e){nu(e,"label",["show"])}var Ku=ia(),Qn=function(e){gt(t,e);function t(){var a=e!==null&&e.apply(this,arguments)||this;return a.type=t.type,a.createdBySelf=!1,a}return t.prototype.init=function(a,r,n){this.mergeDefaultAndTheme(a,n),this._mergeOption(a,n,!1,!0)},t.prototype.isAnimationEnabled=function(){if(Ya.node)return!1;var a=this.__hostSeries;return this.getShallow("animation")&&a&&a.isAnimationEnabled()},t.prototype.mergeOption=function(a,r){this._mergeOption(a,r,!1,!1)},t.prototype._mergeOption=function(a,r,n,i){var o=this.mainType;n||r.eachSeries(function(s){var l=s.get(this.mainType,!0),c=Ku(s)[o];if(!l||!l.data){Ku(s)[o]=null;return}c?c._mergeOption(l,r,!0):(i&&Zu(l),G(l.data,function(u){u instanceof Array?(Zu(u[0]),Zu(u[1])):Zu(u)}),c=this.createMarkerModelFromSeries(l,this,r),Vt(c,{mainType:this.mainType,seriesIndex:s.seriesIndex,name:s.name,createdBySelf:!0}),c.__hostSeries=s),Ku(s)[o]=c},this)},t.prototype.formatTooltip=function(a,r,n){var i=this.getData(),o=this.getRawValue(a),s=i.getName(a);return Za("section",{header:this.name,blocks:[Za("nameValue",{name:s,value:o,noName:!s,noValue:o==null})]})},t.prototype.getData=function(){return this._data},t.prototype.setData=function(a){this._data=a},t.prototype.getDataParams=function(a,r){var n=vy.prototype.getDataParams.call(this,a,r),i=this.__hostSeries;return i&&(n.seriesId=i.id,n.seriesName=i.name,n.seriesType=i.subType),n},t.getMarkerModelFromSeries=function(a,r){return Ku(a)[r]},t.type="marker",t.dependencies=["series","grid","polar","geo"],t}(da);$r(Qn,vy.prototype);var Dq=function(e){gt(t,e);function t(){var a=e!==null&&e.apply(this,arguments)||this;return a.type=t.type,a}return t.prototype.createMarkerModelFromSeries=function(a,r,n){return new t(a,r,n)},t.type="markPoint",t.defaultOption={z:5,symbol:"pin",symbolSize:50,tooltip:{trigger:"item"},label:{show:!0,position:"inside"},itemStyle:{borderWidth:2},emphasis:{label:{show:!0}}},t}(Qn);function Zv(e){return!(isNaN(parseFloat(e.x))&&isNaN(parseFloat(e.y)))}function Lq(e){return!isNaN(parseFloat(e.x))&&!isNaN(parseFloat(e.y))}function Ju(e,t,a,r,n,i){var o=[],s=Os(t,r),l=s?t.getCalculationInfo("stackResultDimension"):r,c=m0(t,l,e),u=t.indicesOfNearest(l,c)[0];o[n]=t.get(a,u),o[i]=t.get(l,u);var h=t.get(r,u),d=rO(t.get(r,u));return d=Math.min(d,20),d>=0&&(o[i]=+o[i].toFixed(d)),[o,h]}var vg={min:pe(Ju,"min"),max:pe(Ju,"max"),average:pe(Ju,"average"),median:pe(Ju,"median")};function Gc(e,t){if(t){var a=e.getData(),r=e.coordinateSystem,n=r&&r.dimensions;if(!Lq(t)&&!Nt(t.coord)&&Nt(n)){var i=cD(t,a,r,e);if(t=Pe(t),t.type&&vg[t.type]&&i.baseAxis&&i.valueAxis){var o=Xe(n,i.baseAxis.dim),s=Xe(n,i.valueAxis.dim),l=vg[t.type](a,i.baseDataDim,i.valueDataDim,o,s);t.coord=l[0],t.value=l[1]}else t.coord=[t.xAxis!=null?t.xAxis:t.radiusAxis,t.yAxis!=null?t.yAxis:t.angleAxis]}if(t.coord==null||!Nt(n))t.coord=[];else for(var c=t.coord,u=0;u<2;u++)vg[c[u]]&&(c[u]=m0(a,a.mapDimension(n[u]),c[u]));return t}}function cD(e,t,a,r){var n={};return e.valueIndex!=null||e.valueDim!=null?(n.valueDataDim=e.valueIndex!=null?t.getDimension(e.valueIndex):e.valueDim,n.valueAxis=a.getAxis(Iq(r,n.valueDataDim)),n.baseAxis=a.getOtherAxis(n.valueAxis),n.baseDataDim=t.mapDimension(n.baseAxis.dim)):(n.baseAxis=r.getBaseAxis(),n.valueAxis=a.getOtherAxis(n.baseAxis),n.baseDataDim=t.mapDimension(n.baseAxis.dim),n.valueDataDim=t.mapDimension(n.valueAxis.dim)),n}function Iq(e,t){var a=e.getData().getDimensionInfo(t);return a&&a.coordDim}function Hc(e,t){return e&&e.containData&&t.coord&&!Zv(t)?e.containData(t.coord):!0}function Mq(e,t,a){return e&&e.containZone&&t.coord&&a.coord&&!Zv(t)&&!Zv(a)?e.containZone(t.coord,a.coord):!0}function uD(e,t){return e?function(a,r,n,i){var o=i<2?a.coord&&a.coord[i]:a.value;return Qh(o,t[i])}:function(a,r,n,i){return Qh(a.value,t[i])}}function m0(e,t,a){if(a==="average"){var r=0,n=0;return e.each(t,function(i,o){isNaN(i)||(r+=i,n++)}),r/n}else return a==="median"?e.getMedian(t):e.getDataExtent(t)[a==="max"?1:0]}var mg=ia(),y0=function(e){gt(t,e);function t(){var a=e!==null&&e.apply(this,arguments)||this;return a.type=t.type,a}return t.prototype.init=function(){this.markerGroupMap=ke()},t.prototype.render=function(a,r,n){var i=this,o=this.markerGroupMap;o.each(function(s){mg(s).keep=!1}),r.eachSeries(function(s){var l=Qn.getMarkerModelFromSeries(s,i.type);l&&i.renderSeries(s,l,r,n)}),o.each(function(s){!mg(s).keep&&i.group.remove(s.group)})},t.prototype.markKeep=function(a){mg(a).keep=!0},t.prototype.toggleBlurSeries=function(a,r){var n=this;G(a,function(i){var o=Qn.getMarkerModelFromSeries(i,n.type);if(o){var s=o.getData();s.eachItemGraphicEl(function(l){l&&(r?nO(l):iO(l))})}})},t.type="marker",t}(ma);function WS(e,t,a){var r=t.coordinateSystem;e.each(function(n){var i=e.getItemModel(n),o,s=Ft(i.get("x"),a.getWidth()),l=Ft(i.get("y"),a.getHeight());if(!isNaN(s)&&!isNaN(l))o=[s,l];else if(t.getMarkerPosition)o=t.getMarkerPosition(e.getValues(e.dimensions,n));else if(r){var c=e.get(r.dimensions[0],n),u=e.get(r.dimensions[1],n);o=r.dataToPoint([c,u])}isNaN(s)||(o[0]=s),isNaN(l)||(o[1]=l),e.setItemLayout(n,o)})}var Eq=function(e){gt(t,e);function t(){var a=e!==null&&e.apply(this,arguments)||this;return a.type=t.type,a}return t.prototype.updateTransform=function(a,r,n){r.eachSeries(function(i){var o=Qn.getMarkerModelFromSeries(i,"markPoint");o&&(WS(o.getData(),i,n),this.markerGroupMap.get(i.id).updateLayout())},this)},t.prototype.renderSeries=function(a,r,n,i){var o=a.coordinateSystem,s=a.id,l=a.getData(),c=this.markerGroupMap,u=c.get(s)||c.set(s,new hu),h=Rq(o,a,r);r.setData(h),WS(r.getData(),a,i),h.each(function(d){var f=h.getItemModel(d),p=f.getShallow("symbol"),g=f.getShallow("symbolSize"),v=f.getShallow("symbolRotate"),_=f.getShallow("symbolOffset"),y=f.getShallow("symbolKeepAspect");if(Me(p)||Me(g)||Me(v)||Me(_)){var b=r.getRawValue(d),w=r.getDataParams(d);Me(p)&&(p=p(b,w)),Me(g)&&(g=g(b,w)),Me(v)&&(v=v(b,w)),Me(_)&&(_=_(b,w))}var T=f.getModel("itemStyle").getItemStyle(),C=yf(l,"color");T.fill||(T.fill=C),h.setItemVisual(d,{symbol:p,symbolSize:g,symbolRotate:v,symbolOffset:_,symbolKeepAspect:y,style:T})}),u.updateData(h),this.group.add(u.group),h.eachItemGraphicEl(function(d){d.traverse(function(f){Ae(f).dataModel=r})}),this.markKeep(u),u.group.silent=r.get("silent")||a.get("silent")},t.type="markPoint",t}(y0);function Rq(e,t,a){var r;e?r=Ot(e&&e.dimensions,function(s){var l=t.getData().getDimensionInfo(t.getData().mapDimension(s))||{};return Vt(Vt({},l),{name:s,ordinalMeta:null})}):r=[{name:"value",type:"float"}];var n=new pr(r,a),i=Ot(a.get("data"),pe(Gc,t));e&&(i=Va(i,pe(Hc,e)));var o=uD(!!e,r);return n.initData(i,null,o),n}function _0(e){e.registerComponentModel(Dq),e.registerComponentView(Eq),e.registerPreprocessor(function(t){v0(t.series,"markPoint")&&(t.markPoint=t.markPoint||{})})}var Pq=function(e){gt(t,e);function t(){var a=e!==null&&e.apply(this,arguments)||this;return a.type=t.type,a}return t.prototype.createMarkerModelFromSeries=function(a,r,n){return new t(a,r,n)},t.type="markLine",t.defaultOption={z:5,symbol:["circle","arrow"],symbolSize:[8,16],symbolOffset:0,precision:2,tooltip:{trigger:"item"},label:{show:!0,position:"end",distance:5},lineStyle:{type:"dashed"},emphasis:{label:{show:!0},lineStyle:{width:3}},animationEasing:"linear"},t}(Qn),Qu=ia(),Bq=function(e,t,a,r){var n=e.getData(),i;if(Nt(r))i=r;else{var o=r.type;if(o==="min"||o==="max"||o==="average"||o==="median"||r.xAxis!=null||r.yAxis!=null){var s=void 0,l=void 0;if(r.yAxis!=null||r.xAxis!=null)s=t.getAxis(r.yAxis!=null?"y":"x"),l=Ma(r.yAxis,r.xAxis);else{var c=cD(r,n,t,e);s=c.valueAxis;var u=oO(n,c.valueDataDim);l=m0(n,u,o)}var h=s.dim==="x"?0:1,d=1-h,f=Pe(r),p={coord:[]};f.type=null,f.coord=[],f.coord[d]=-1/0,p.coord[d]=1/0;var g=a.get("precision");g>=0&&Ea(l)&&(l=+l.toFixed(Math.min(g,20))),f.coord[h]=p.coord[h]=l,i=[f,p,{type:o,valueIndex:r.valueIndex,value:l}]}else i=[]}var v=[Gc(e,i[0]),Gc(e,i[1]),Vt({},i[2])];return v[2].type=v[2].type||null,Be(v[2],v[0]),Be(v[2],v[1]),v};function fd(e){return!isNaN(e)&&!isFinite(e)}function qS(e,t,a,r){var n=1-e,i=r.dimensions[e];return fd(t[n])&&fd(a[n])&&t[e]===a[e]&&r.getAxis(i).containData(t[e])}function Oq(e,t){if(e.type==="cartesian2d"){var a=t[0].coord,r=t[1].coord;if(a&&r&&(qS(1,a,r,e)||qS(0,a,r,e)))return!0}return Hc(e,t[0])&&Hc(e,t[1])}function yg(e,t,a,r,n){var i=r.coordinateSystem,o=e.getItemModel(t),s,l=Ft(o.get("x"),n.getWidth()),c=Ft(o.get("y"),n.getHeight());if(!isNaN(l)&&!isNaN(c))s=[l,c];else{if(r.getMarkerPosition)s=r.getMarkerPosition(e.getValues(e.dimensions,t));else{var u=i.dimensions,h=e.get(u[0],t),d=e.get(u[1],t);s=i.dataToPoint([h,d])}if(Fo(i,"cartesian2d")){var f=i.getAxis("x"),p=i.getAxis("y"),u=i.dimensions;fd(e.get(u[0],t))?s[0]=f.toGlobalCoord(f.getExtent()[a?0:1]):fd(e.get(u[1],t))&&(s[1]=p.toGlobalCoord(p.getExtent()[a?0:1]))}isNaN(l)||(s[0]=l),isNaN(c)||(s[1]=c)}e.setItemLayout(t,s)}var Nq=function(e){gt(t,e);function t(){var a=e!==null&&e.apply(this,arguments)||this;return a.type=t.type,a}return t.prototype.updateTransform=function(a,r,n){r.eachSeries(function(i){var o=Qn.getMarkerModelFromSeries(i,"markLine");if(o){var s=o.getData(),l=Qu(o).from,c=Qu(o).to;l.each(function(u){yg(l,u,!0,i,n),yg(c,u,!1,i,n)}),s.each(function(u){s.setItemLayout(u,[l.getItemLayout(u),c.getItemLayout(u)])}),this.markerGroupMap.get(i.id).updateLayout()}},this)},t.prototype.renderSeries=function(a,r,n,i){var o=a.coordinateSystem,s=a.id,l=a.getData(),c=this.markerGroupMap,u=c.get(s)||c.set(s,new Fy);this.group.add(u.group);var h=$q(o,a,r),d=h.from,f=h.to,p=h.line;Qu(r).from=d,Qu(r).to=f,r.setData(p);var g=r.get("symbol"),v=r.get("symbolSize"),_=r.get("symbolRotate"),y=r.get("symbolOffset");Nt(g)||(g=[g,g]),Nt(v)||(v=[v,v]),Nt(_)||(_=[_,_]),Nt(y)||(y=[y,y]),h.from.each(function(w){b(d,w,!0),b(f,w,!1)}),p.each(function(w){var T=p.getItemModel(w).getModel("lineStyle").getLineStyle();p.setItemLayout(w,[d.getItemLayout(w),f.getItemLayout(w)]),T.stroke==null&&(T.stroke=d.getItemVisual(w,"style").fill),p.setItemVisual(w,{fromSymbolKeepAspect:d.getItemVisual(w,"symbolKeepAspect"),fromSymbolOffset:d.getItemVisual(w,"symbolOffset"),fromSymbolRotate:d.getItemVisual(w,"symbolRotate"),fromSymbolSize:d.getItemVisual(w,"symbolSize"),fromSymbol:d.getItemVisual(w,"symbol"),toSymbolKeepAspect:f.getItemVisual(w,"symbolKeepAspect"),toSymbolOffset:f.getItemVisual(w,"symbolOffset"),toSymbolRotate:f.getItemVisual(w,"symbolRotate"),toSymbolSize:f.getItemVisual(w,"symbolSize"),toSymbol:f.getItemVisual(w,"symbol"),style:T})}),u.updateData(p),h.line.eachItemGraphicEl(function(w){Ae(w).dataModel=r,w.traverse(function(T){Ae(T).dataModel=r})});function b(w,T,C){var A=w.getItemModel(T);yg(w,T,C,a,i);var k=A.getModel("itemStyle").getItemStyle();k.fill==null&&(k.fill=yf(l,"color")),w.setItemVisual(T,{symbolKeepAspect:A.get("symbolKeepAspect"),symbolOffset:sa(A.get("symbolOffset",!0),y[C?0:1]),symbolRotate:sa(A.get("symbolRotate",!0),_[C?0:1]),symbolSize:sa(A.get("symbolSize"),v[C?0:1]),symbol:sa(A.get("symbol",!0),g[C?0:1]),style:k})}this.markKeep(u),u.group.silent=r.get("silent")||a.get("silent")},t.type="markLine",t}(y0);function $q(e,t,a){var r;e?r=Ot(e&&e.dimensions,function(c){var u=t.getData().getDimensionInfo(t.getData().mapDimension(c))||{};return Vt(Vt({},u),{name:c,ordinalMeta:null})}):r=[{name:"value",type:"float"}];var n=new pr(r,a),i=new pr(r,a),o=new pr([],a),s=Ot(a.get("data"),pe(Bq,t,e,a));e&&(s=Va(s,pe(Oq,e)));var l=uD(!!e,r);return n.initData(Ot(s,function(c){return c[0]}),null,l),i.initData(Ot(s,function(c){return c[1]}),null,l),o.initData(Ot(s,function(c){return c[2]})),o.hasItemOption=!0,{from:n,to:i,line:o}}function hD(e){e.registerComponentModel(Pq),e.registerComponentView(Nq),e.registerPreprocessor(function(t){v0(t.series,"markLine")&&(t.markLine=t.markLine||{})})}var Fq=function(e){gt(t,e);function t(){var a=e!==null&&e.apply(this,arguments)||this;return a.type=t.type,a}return t.prototype.createMarkerModelFromSeries=function(a,r,n){return new t(a,r,n)},t.type="markArea",t.defaultOption={z:1,tooltip:{trigger:"item"},animation:!1,label:{show:!0,position:"top"},itemStyle:{borderWidth:0},emphasis:{label:{show:!0,position:"top"}}},t}(Qn),th=ia(),zq=function(e,t,a,r){var n=r[0],i=r[1];if(!(!n||!i)){var o=Gc(e,n),s=Gc(e,i),l=o.coord,c=s.coord;l[0]=Ma(l[0],-1/0),l[1]=Ma(l[1],-1/0),c[0]=Ma(c[0],1/0),c[1]=Ma(c[1],1/0);var u=dy([{},o,s]);return u.coord=[o.coord,s.coord],u.x0=o.x,u.y0=o.y,u.x1=s.x,u.y1=s.y,u}};function pd(e){return!isNaN(e)&&!isFinite(e)}function US(e,t,a,r){var n=1-e;return pd(t[n])&&pd(a[n])}function Vq(e,t){var a=t.coord[0],r=t.coord[1],n={coord:a,x:t.x0,y:t.y0},i={coord:r,x:t.x1,y:t.y1};return Fo(e,"cartesian2d")?a&&r&&(US(1,a,r)||US(0,a,r))?!0:Mq(e,n,i):Hc(e,n)||Hc(e,i)}function jS(e,t,a,r,n){var i=r.coordinateSystem,o=e.getItemModel(t),s,l=Ft(o.get(a[0]),n.getWidth()),c=Ft(o.get(a[1]),n.getHeight());if(!isNaN(l)&&!isNaN(c))s=[l,c];else{if(r.getMarkerPosition){var u=e.getValues(["x0","y0"],t),h=e.getValues(["x1","y1"],t),d=i.clampData(u),f=i.clampData(h),p=[];a[0]==="x0"?p[0]=d[0]>f[0]?h[0]:u[0]:p[0]=d[0]>f[0]?u[0]:h[0],a[1]==="y0"?p[1]=d[1]>f[1]?h[1]:u[1]:p[1]=d[1]>f[1]?u[1]:h[1],s=r.getMarkerPosition(p,a,!0)}else{var g=e.get(a[0],t),v=e.get(a[1],t),_=[g,v];i.clampData&&i.clampData(_,_),s=i.dataToPoint(_,!0)}if(Fo(i,"cartesian2d")){var y=i.getAxis("x"),b=i.getAxis("y"),g=e.get(a[0],t),v=e.get(a[1],t);pd(g)?s[0]=y.toGlobalCoord(y.getExtent()[a[0]==="x0"?0:1]):pd(v)&&(s[1]=b.toGlobalCoord(b.getExtent()[a[1]==="y0"?0:1]))}isNaN(l)||(s[0]=l),isNaN(c)||(s[1]=c)}return s}var YS=[["x0","y0"],["x1","y0"],["x1","y1"],["x0","y1"]],Gq=function(e){gt(t,e);function t(){var a=e!==null&&e.apply(this,arguments)||this;return a.type=t.type,a}return t.prototype.updateTransform=function(a,r,n){r.eachSeries(function(i){var o=Qn.getMarkerModelFromSeries(i,"markArea");if(o){var s=o.getData();s.each(function(l){var c=Ot(YS,function(h){return jS(s,l,h,i,n)});s.setItemLayout(l,c);var u=s.getItemGraphicEl(l);u.setShape("points",c)})}},this)},t.prototype.renderSeries=function(a,r,n,i){var o=a.coordinateSystem,s=a.id,l=a.getData(),c=this.markerGroupMap,u=c.get(s)||c.set(s,{group:new ie});this.group.add(u.group),this.markKeep(u);var h=Hq(o,a,r);r.setData(h),h.each(function(d){var f=Ot(YS,function(k){return jS(h,d,k,a,i)}),p=o.getAxis("x").scale,g=o.getAxis("y").scale,v=p.getExtent(),_=g.getExtent(),y=[p.parse(h.get("x0",d)),p.parse(h.get("x1",d))],b=[g.parse(h.get("y0",d)),g.parse(h.get("y1",d))];Er(y),Er(b);var w=!(v[0]>y[1]||v[1]<y[0]||_[0]>b[1]||_[1]<b[0]),T=!w;h.setItemLayout(d,{points:f,allClipped:T});var C=h.getItemModel(d).getModel("itemStyle").getItemStyle(),A=yf(l,"color");C.fill||(C.fill=A,ge(C.fill)&&(C.fill=Jh(C.fill,.4))),C.stroke||(C.stroke=A),h.setItemVisual(d,"style",C)}),h.diff(th(u).data).add(function(d){var f=h.getItemLayout(d);if(!f.allClipped){var p=new Br({shape:{points:f.points}});h.setItemGraphicEl(d,p),u.group.add(p)}}).update(function(d,f){var p=th(u).data.getItemGraphicEl(f),g=h.getItemLayout(d);g.allClipped?p&&u.group.remove(p):(p?ze(p,{shape:{points:g.points}},r,d):p=new Br({shape:{points:g.points}}),h.setItemGraphicEl(d,p),u.group.add(p))}).remove(function(d){var f=th(u).data.getItemGraphicEl(d);u.group.remove(f)}).execute(),h.eachItemGraphicEl(function(d,f){var p=h.getItemModel(f),g=h.getItemVisual(f,"style");d.useStyle(h.getItemVisual(f,"style")),Fa(d,Aa(p),{labelFetcher:r,labelDataIndex:f,defaultText:h.getName(f)||"",inheritColor:ge(g.fill)?Jh(g.fill,1):"#000"}),za(d,p),Qe(d,null,null,p.get(["emphasis","disabled"])),Ae(d).dataModel=r}),th(u).data=h,u.group.silent=r.get("silent")||a.get("silent")},t.type="markArea",t}(y0);function Hq(e,t,a){var r,n,i=["x0","y0","x1","y1"];if(e){var o=Ot(e&&e.dimensions,function(c){var u=t.getData(),h=u.getDimensionInfo(u.mapDimension(c))||{};return Vt(Vt({},h),{name:c,ordinalMeta:null})});n=Ot(i,function(c,u){return{name:c,type:o[u%2].type}}),r=new pr(n,a)}else n=[{name:"value",type:"float"}],r=new pr(n,a);var s=Ot(a.get("data"),pe(zq,t,e,a));e&&(s=Va(s,pe(Vq,e)));var l=e?function(c,u,h,d){var f=c.coord[Math.floor(d/2)][d%2];return Qh(f,n[d])}:function(c,u,h,d){return Qh(c.value,n[d])};return r.initData(s,null,l),r.hasItemOption=!0,r}function Wq(e){e.registerComponentModel(Fq),e.registerComponentView(Gq),e.registerPreprocessor(function(t){v0(t.series,"markArea")&&(t.markArea=t.markArea||{})})}var qq=function(e,t){if(t==="all")return{type:"all",title:e.getLocaleModel().get(["legend","selector","all"])};if(t==="inverse")return{type:"inverse",title:e.getLocaleModel().get(["legend","selector","inverse"])}},Kv=function(e){gt(t,e);function t(){var a=e!==null&&e.apply(this,arguments)||this;return a.type=t.type,a.layoutMode={type:"box",ignoreSize:!0},a}return t.prototype.init=function(a,r,n){this.mergeDefaultAndTheme(a,n),a.selected=a.selected||{},this._updateSelector(a)},t.prototype.mergeOption=function(a,r){e.prototype.mergeOption.call(this,a,r),this._updateSelector(a)},t.prototype._updateSelector=function(a){var r=a.selector,n=this.ecModel;r===!0&&(r=a.selector=["all","inverse"]),Nt(r)&&G(r,function(i,o){ge(i)&&(i={type:i}),r[o]=Be(i,qq(n,i.type))})},t.prototype.optionUpdated=function(){this._updateData(this.ecModel);var a=this._data;if(a[0]&&this.get("selectedMode")==="single"){for(var r=!1,n=0;n<a.length;n++){var i=a[n].get("name");if(this.isSelected(i)){this.select(i),r=!0;break}}!r&&this.select(a[0].get("name"))}},t.prototype._updateData=function(a){var r=[],n=[];a.eachRawSeries(function(l){var c=l.name;n.push(c);var u;if(l.legendVisualProvider){var h=l.legendVisualProvider,d=h.getAllNames();a.isSeriesFiltered(l)||(n=n.concat(d)),d.length?r=r.concat(d):u=!0}else u=!0;u&&sO(l)&&r.push(l.name)}),this._availableNames=n;var i=this.get("data")||r,o=ke(),s=Ot(i,function(l){return(ge(l)||Ea(l))&&(l={name:l}),o.get(l.name)?null:(o.set(l.name,!0),new _a(l,this,this.ecModel))},this);this._data=Va(s,function(l){return!!l})},t.prototype.getData=function(){return this._data},t.prototype.select=function(a){var r=this.option.selected,n=this.get("selectedMode");if(n==="single"){var i=this._data;G(i,function(o){r[o.get("name")]=!1})}r[a]=!0},t.prototype.unSelect=function(a){this.get("selectedMode")!=="single"&&(this.option.selected[a]=!1)},t.prototype.toggleSelected=function(a){var r=this.option.selected;r.hasOwnProperty(a)||(r[a]=!0),this[r[a]?"unSelect":"select"](a)},t.prototype.allSelect=function(){var a=this._data,r=this.option.selected;G(a,function(n){r[n.get("name",!0)]=!0})},t.prototype.inverseSelect=function(){var a=this._data,r=this.option.selected;G(a,function(n){var i=n.get("name",!0);r.hasOwnProperty(i)||(r[i]=!0),r[i]=!r[i]})},t.prototype.isSelected=function(a){var r=this.option.selected;return!(r.hasOwnProperty(a)&&!r[a])&&Xe(this._availableNames,a)>=0},t.prototype.getOrient=function(){return this.get("orient")==="vertical"?{index:1,name:"vertical"}:{index:0,name:"horizontal"}},t.type="legend.plain",t.dependencies=["series"],t.defaultOption={z:4,show:!0,orient:"horizontal",left:"center",top:0,align:"auto",backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderRadius:0,borderWidth:0,padding:5,itemGap:10,itemWidth:25,itemHeight:14,symbolRotate:"inherit",symbolKeepAspect:!0,inactiveColor:"#ccc",inactiveBorderColor:"#ccc",inactiveBorderWidth:"auto",itemStyle:{color:"inherit",opacity:"inherit",borderColor:"inherit",borderWidth:"auto",borderCap:"inherit",borderJoin:"inherit",borderDashOffset:"inherit",borderMiterLimit:"inherit"},lineStyle:{width:"auto",color:"inherit",inactiveColor:"#ccc",inactiveWidth:2,opacity:"inherit",type:"inherit",cap:"inherit",join:"inherit",dashOffset:"inherit",miterLimit:"inherit"},textStyle:{color:"#333"},selectedMode:!0,selector:!1,selectorLabel:{show:!0,borderRadius:10,padding:[3,5,3,5],fontSize:12,fontFamily:"sans-serif",color:"#666",borderWidth:1,borderColor:"#666"},emphasis:{selectorLabel:{show:!0,color:"#eee",backgroundColor:"#666"}},selectorPosition:"auto",selectorItemGap:7,selectorButtonGap:10,tooltip:{show:!1}},t}(da),Ko=pe,Jv=G,eh=ie,dD=function(e){gt(t,e);function t(){var a=e!==null&&e.apply(this,arguments)||this;return a.type=t.type,a.newlineDisabled=!1,a}return t.prototype.init=function(){this.group.add(this._contentGroup=new eh),this.group.add(this._selectorGroup=new eh),this._isFirstRender=!0},t.prototype.getContentGroup=function(){return this._contentGroup},t.prototype.getSelectorGroup=function(){return this._selectorGroup},t.prototype.render=function(a,r,n){var i=this._isFirstRender;if(this._isFirstRender=!1,this.resetInner(),!!a.get("show",!0)){var o=a.get("align"),s=a.get("orient");(!o||o==="auto")&&(o=a.get("left")==="right"&&s==="vertical"?"right":"left");var l=a.get("selector",!0),c=a.get("selectorPosition",!0);l&&(!c||c==="auto")&&(c=s==="horizontal"?"end":"start"),this.renderInner(o,a,r,n,l,s,c);var u=a.getBoxLayoutParams(),h={width:n.getWidth(),height:n.getHeight()},d=a.get("padding"),f=ka(u,h,d),p=this.layoutInner(a,o,f,i,l,c),g=ka(_e({width:p.width,height:p.height},u),h,d);this.group.x=g.x-p.x,this.group.y=g.y-p.y,this.group.markRedraw(),this.group.add(this._backgroundEl=Jk(p,a))}},t.prototype.resetInner=function(){this.getContentGroup().removeAll(),this._backgroundEl&&this.group.remove(this._backgroundEl),this.getSelectorGroup().removeAll()},t.prototype.renderInner=function(a,r,n,i,o,s,l){var c=this.getContentGroup(),u=ke(),h=r.get("selectedMode"),d=[];n.eachRawSeries(function(f){!f.get("legendHoverLink")&&d.push(f.id)}),Jv(r.getData(),function(f,p){var g=f.get("name");if(!this.newlineDisabled&&(g===""||g===`
`)){var v=new eh;v.newline=!0,c.add(v);return}var _=n.getSeriesByName(g)[0];if(!u.get(g))if(_){var y=_.getData(),b=y.getVisual("legendLineStyle")||{},w=y.getVisual("legendIcon"),T=y.getVisual("style"),C=this._createItem(_,g,p,f,r,a,b,T,w,h,i);C.on("click",Ko(XS,g,null,i,d)).on("mouseover",Ko(Qv,_.name,null,i,d)).on("mouseout",Ko(tm,_.name,null,i,d)),n.ssr&&C.eachChild(function(A){var k=Ae(A);k.seriesIndex=_.seriesIndex,k.dataIndex=p,k.ssrType="legend"}),u.set(g,!0)}else n.eachRawSeries(function(A){if(!u.get(g)&&A.legendVisualProvider){var k=A.legendVisualProvider;if(!k.containName(g))return;var L=k.indexOfName(g),M=k.getItemVisual(L,"style"),P=k.getItemVisual(L,"legendIcon"),E=dT(M.fill);E&&E[3]===0&&(E[3]=.2,M=Vt(Vt({},M),{fill:vh(E,"rgba")}));var D=this._createItem(A,g,p,f,r,a,{},M,P,h,i);D.on("click",Ko(XS,null,g,i,d)).on("mouseover",Ko(Qv,null,g,i,d)).on("mouseout",Ko(tm,null,g,i,d)),n.ssr&&D.eachChild(function(O){var B=Ae(O);B.seriesIndex=A.seriesIndex,B.dataIndex=p,B.ssrType="legend"}),u.set(g,!0)}},this)},this),o&&this._createSelector(o,r,i,s,l)},t.prototype._createSelector=function(a,r,n,i,o){var s=this.getSelectorGroup();Jv(a,function(c){var u=c.type,h=new Oe({style:{x:0,y:0,align:"center",verticalAlign:"middle"},onclick:function(){n.dispatchAction({type:u==="all"?"legendAllSelect":"legendInverseSelect",legendId:r.id})}});s.add(h);var d=r.getModel("selectorLabel"),f=r.getModel(["emphasis","selectorLabel"]);Fa(h,{normal:d,emphasis:f},{defaultText:c.title}),_s(h)})},t.prototype._createItem=function(a,r,n,i,o,s,l,c,u,h,d){var f=a.visualDrawType,p=o.get("itemWidth"),g=o.get("itemHeight"),v=o.isSelected(r),_=i.get("symbolRotate"),y=i.get("symbolKeepAspect"),b=i.get("icon");u=b||u||"roundRect";var w=Uq(u,i,l,c,f,v,d),T=new eh,C=i.getModel("textStyle");if(Me(a.getLegendIcon)&&(!b||b==="inherit"))T.add(a.getLegendIcon({itemWidth:p,itemHeight:g,icon:u,iconRotate:_,itemStyle:w.itemStyle,lineStyle:w.lineStyle,symbolKeepAspect:y}));else{var A=b==="inherit"&&a.getData().getVisual("symbol")?_==="inherit"?a.getData().getVisual("symbolRotate"):_:0;T.add(jq({itemWidth:p,itemHeight:g,icon:u,iconRotate:A,itemStyle:w.itemStyle,symbolKeepAspect:y}))}var k=s==="left"?p+5:-5,L=s,M=o.get("formatter"),P=r;ge(M)&&M?P=M.replace("{name}",r??""):Me(M)&&(P=M(r));var E=v?C.getTextColor():i.get("inactiveColor");T.add(new Oe({style:Ke(C,{text:P,x:k,y:g/2,fill:E,align:L,verticalAlign:"middle"},{inheritColor:E})}));var D=new Ge({shape:T.getBoundingRect(),style:{fill:"transparent"}}),O=i.getModel("tooltip");return O.get("show")&&ll({el:D,componentModel:o,itemName:r,itemTooltipOption:O.option}),T.add(D),T.eachChild(function(B){B.silent=!0}),D.silent=!h,this.getContentGroup().add(T),_s(T),T.__legendDataIndex=n,T},t.prototype.layoutInner=function(a,r,n,i,o,s){var l=this.getContentGroup(),c=this.getSelectorGroup();mo(a.get("orient"),l,a.get("itemGap"),n.width,n.height);var u=l.getBoundingRect(),h=[-u.x,-u.y];if(c.markRedraw(),l.markRedraw(),o){mo("horizontal",c,a.get("selectorItemGap",!0));var d=c.getBoundingRect(),f=[-d.x,-d.y],p=a.get("selectorButtonGap",!0),g=a.getOrient().index,v=g===0?"width":"height",_=g===0?"height":"width",y=g===0?"y":"x";s==="end"?f[g]+=u[v]+p:h[g]+=d[v]+p,f[1-g]+=u[_]/2-d[_]/2,c.x=f[0],c.y=f[1],l.x=h[0],l.y=h[1];var b={x:0,y:0};return b[v]=u[v]+p+d[v],b[_]=Math.max(u[_],d[_]),b[y]=Math.min(0,d[y]+f[1-g]),b}else return l.x=h[0],l.y=h[1],this.group.getBoundingRect()},t.prototype.remove=function(){this.getContentGroup().removeAll(),this._isFirstRender=!0},t.type="legend.plain",t}(ma);function Uq(e,t,a,r,n,i,o){function s(v,_){v.lineWidth==="auto"&&(v.lineWidth=_.lineWidth>0?2:0),Jv(v,function(y,b){v[b]==="inherit"&&(v[b]=_[b])})}var l=t.getModel("itemStyle"),c=l.getItemStyle(),u=e.lastIndexOf("empty",0)===0?"fill":"stroke",h=l.getShallow("decal");c.decal=!h||h==="inherit"?r.decal:ff(h,o),c.fill==="inherit"&&(c.fill=r[n]),c.stroke==="inherit"&&(c.stroke=r[u]),c.opacity==="inherit"&&(c.opacity=(n==="fill"?r:a).opacity),s(c,r);var d=t.getModel("lineStyle"),f=d.getLineStyle();if(s(f,a),c.fill==="auto"&&(c.fill=r.fill),c.stroke==="auto"&&(c.stroke=r.fill),f.stroke==="auto"&&(f.stroke=r.fill),!i){var p=t.get("inactiveBorderWidth"),g=c[u];c.lineWidth=p==="auto"?r.lineWidth>0&&g?2:0:c.lineWidth,c.fill=t.get("inactiveColor"),c.stroke=t.get("inactiveBorderColor"),f.stroke=d.get("inactiveColor"),f.lineWidth=d.get("inactiveWidth")}return{itemStyle:c,lineStyle:f}}function jq(e){var t=e.icon||"roundRect",a=ba(t,0,0,e.itemWidth,e.itemHeight,e.itemStyle.fill,e.symbolKeepAspect);return a.setStyle(e.itemStyle),a.rotation=(e.iconRotate||0)*Math.PI/180,a.setOrigin([e.itemWidth/2,e.itemHeight/2]),t.indexOf("empty")>-1&&(a.style.stroke=a.style.fill,a.style.fill="#fff",a.style.lineWidth=2),a}function XS(e,t,a,r){tm(e,t,a,r),a.dispatchAction({type:"legendToggleSelect",name:e??t}),Qv(e,t,a,r)}function fD(e){for(var t=e.getZr().storage.getDisplayList(),a,r=0,n=t.length;r<n&&!(a=t[r].states.emphasis);)r++;return a&&a.hoverLayer}function Qv(e,t,a,r){fD(a)||a.dispatchAction({type:"highlight",seriesName:e,name:t,excludeSeriesId:r})}function tm(e,t,a,r){fD(a)||a.dispatchAction({type:"downplay",seriesName:e,name:t,excludeSeriesId:r})}function Yq(e){var t=e.findComponents({mainType:"legend"});t&&t.length&&e.filterSeries(function(a){for(var r=0;r<t.length;r++)if(!t[r].isSelected(a.name))return!1;return!0})}function Il(e,t,a){var r=e==="allSelect"||e==="inverseSelect",n={},i=[];a.eachComponent({mainType:"legend",query:t},function(s){r?s[e]():s[e](t.name),ZS(s,n),i.push(s.componentIndex)});var o={};return a.eachComponent("legend",function(s){G(n,function(l,c){s[l?"select":"unSelect"](c)}),ZS(s,o)}),r?{selected:o,legendIndex:i}:{name:t.name,selected:o}}function ZS(e,t){var a=t||{};return G(e.getData(),function(r){var n=r.get("name");if(!(n===`
`||n==="")){var i=e.isSelected(n);Ht(a,n)?a[n]=a[n]&&i:a[n]=i}}),a}function Xq(e){e.registerAction("legendToggleSelect","legendselectchanged",pe(Il,"toggleSelected")),e.registerAction("legendAllSelect","legendselectall",pe(Il,"allSelect")),e.registerAction("legendInverseSelect","legendinverseselect",pe(Il,"inverseSelect")),e.registerAction("legendSelect","legendselected",pe(Il,"select")),e.registerAction("legendUnSelect","legendunselected",pe(Il,"unSelect"))}function pD(e){e.registerComponentModel(Kv),e.registerComponentView(dD),e.registerProcessor(e.PRIORITY.PROCESSOR.SERIES_FILTER,Yq),e.registerSubTypeDefaulter("legend",function(){return"plain"}),Xq(e)}var Zq=function(e){gt(t,e);function t(){var a=e!==null&&e.apply(this,arguments)||this;return a.type=t.type,a}return t.prototype.setScrollDataIndex=function(a){this.option.scrollDataIndex=a},t.prototype.init=function(a,r,n){var i=lf(a);e.prototype.init.call(this,a,r,n),KS(this,a,i)},t.prototype.mergeOption=function(a,r){e.prototype.mergeOption.call(this,a,r),KS(this,this.option,a)},t.type="legend.scroll",t.defaultOption=zi(Kv.defaultOption,{scrollDataIndex:0,pageButtonItemGap:5,pageButtonGap:null,pageButtonPosition:"end",pageFormatter:"{current}/{total}",pageIcons:{horizontal:["M0,0L12,-10L12,10z","M0,0L-12,-10L-12,10z"],vertical:["M0,0L20,0L10,-20z","M0,0L20,0L10,20z"]},pageIconColor:"#2f4554",pageIconInactiveColor:"#aaa",pageIconSize:15,pageTextStyle:{color:"#333"},animationDurationUpdate:800}),t}(Kv);function KS(e,t,a){var r=e.getOrient(),n=[1,1];n[r.index]=0,cf(t,a,{type:"box",ignoreSize:!!n})}var JS=ie,_g=["width","height"],bg=["x","y"],Kq=function(e){gt(t,e);function t(){var a=e!==null&&e.apply(this,arguments)||this;return a.type=t.type,a.newlineDisabled=!0,a._currentIndex=0,a}return t.prototype.init=function(){e.prototype.init.call(this),this.group.add(this._containerGroup=new JS),this._containerGroup.add(this.getContentGroup()),this.group.add(this._controllerGroup=new JS)},t.prototype.resetInner=function(){e.prototype.resetInner.call(this),this._controllerGroup.removeAll(),this._containerGroup.removeClipPath(),this._containerGroup.__rectSize=null},t.prototype.renderInner=function(a,r,n,i,o,s,l){var c=this;e.prototype.renderInner.call(this,a,r,n,i,o,s,l);var u=this._controllerGroup,h=r.get("pageIconSize",!0),d=Nt(h)?h:[h,h];p("pagePrev",0);var f=r.getModel("pageTextStyle");u.add(new Oe({name:"pageText",style:{text:"xx/xx",fill:f.getTextColor(),font:f.getFont(),verticalAlign:"middle",align:"center"},silent:!0})),p("pageNext",1);function p(g,v){var _=g+"DataIndex",y=vf(r.get("pageIcons",!0)[r.getOrient().name][v],{onclick:Ut(c._pageGo,c,_,r,i)},{x:-d[0]/2,y:-d[1]/2,width:d[0],height:d[1]});y.name=g,u.add(y)}},t.prototype.layoutInner=function(a,r,n,i,o,s){var l=this.getSelectorGroup(),c=a.getOrient().index,u=_g[c],h=bg[c],d=_g[1-c],f=bg[1-c];o&&mo("horizontal",l,a.get("selectorItemGap",!0));var p=a.get("selectorButtonGap",!0),g=l.getBoundingRect(),v=[-g.x,-g.y],_=Pe(n);o&&(_[u]=n[u]-g[u]-p);var y=this._layoutContentAndController(a,i,_,c,u,d,f,h);if(o){if(s==="end")v[c]+=y[u]+p;else{var b=g[u]+p;v[c]-=b,y[h]-=b}y[u]+=g[u]+p,v[1-c]+=y[f]+y[d]/2-g[d]/2,y[d]=Math.max(y[d],g[d]),y[f]=Math.min(y[f],g[f]+v[1-c]),l.x=v[0],l.y=v[1],l.markRedraw()}return y},t.prototype._layoutContentAndController=function(a,r,n,i,o,s,l,c){var u=this.getContentGroup(),h=this._containerGroup,d=this._controllerGroup;mo(a.get("orient"),u,a.get("itemGap"),i?n.width:null,i?null:n.height),mo("horizontal",d,a.get("pageButtonItemGap",!0));var f=u.getBoundingRect(),p=d.getBoundingRect(),g=this._showController=f[o]>n[o],v=[-f.x,-f.y];r||(v[i]=u[c]);var _=[0,0],y=[-p.x,-p.y],b=sa(a.get("pageButtonGap",!0),a.get("itemGap",!0));if(g){var w=a.get("pageButtonPosition",!0);w==="end"?y[i]+=n[o]-p[o]:_[i]+=p[o]+b}y[1-i]+=f[s]/2-p[s]/2,u.setPosition(v),h.setPosition(_),d.setPosition(y);var T={x:0,y:0};if(T[o]=g?n[o]:f[o],T[s]=Math.max(f[s],p[s]),T[l]=Math.min(0,p[l]+y[1-i]),h.__rectSize=n[o],g){var C={x:0,y:0};C[o]=Math.max(n[o]-p[o]-b,0),C[s]=T[s],h.setClipPath(new Ge({shape:C})),h.__rectSize=C[o]}else d.eachChild(function(k){k.attr({invisible:!0,silent:!0})});var A=this._getPageInfo(a);return A.pageIndex!=null&&ze(u,{x:A.contentPosition[0],y:A.contentPosition[1]},g?a:null),this._updatePageInfoView(a,A),T},t.prototype._pageGo=function(a,r,n){var i=this._getPageInfo(r)[a];i!=null&&n.dispatchAction({type:"legendScroll",scrollDataIndex:i,legendId:r.id})},t.prototype._updatePageInfoView=function(a,r){var n=this._controllerGroup;G(["pagePrev","pageNext"],function(u){var h=u+"DataIndex",d=r[h]!=null,f=n.childOfName(u);f&&(f.setStyle("fill",d?a.get("pageIconColor",!0):a.get("pageIconInactiveColor",!0)),f.cursor=d?"pointer":"default")});var i=n.childOfName("pageText"),o=a.get("pageFormatter"),s=r.pageIndex,l=s!=null?s+1:0,c=r.pageCount;i&&o&&i.setStyle("text",ge(o)?o.replace("{current}",l==null?"":l+"").replace("{total}",c==null?"":c+""):o({current:l,total:c}))},t.prototype._getPageInfo=function(a){var r=a.get("scrollDataIndex",!0),n=this.getContentGroup(),i=this._containerGroup.__rectSize,o=a.getOrient().index,s=_g[o],l=bg[o],c=this._findTargetItemIndex(r),u=n.children(),h=u[c],d=u.length,f=d?1:0,p={contentPosition:[n.x,n.y],pageCount:f,pageIndex:f-1,pagePrevDataIndex:null,pageNextDataIndex:null};if(!h)return p;var g=w(h);p.contentPosition[o]=-g.s;for(var v=c+1,_=g,y=g,b=null;v<=d;++v)b=w(u[v]),(!b&&y.e>_.s+i||b&&!T(b,_.s))&&(y.i>_.i?_=y:_=b,_&&(p.pageNextDataIndex==null&&(p.pageNextDataIndex=_.i),++p.pageCount)),y=b;for(var v=c-1,_=g,y=g,b=null;v>=-1;--v)b=w(u[v]),(!b||!T(y,b.s))&&_.i<y.i&&(y=_,p.pagePrevDataIndex==null&&(p.pagePrevDataIndex=_.i),++p.pageCount,++p.pageIndex),_=b;return p;function w(C){if(C){var A=C.getBoundingRect(),k=A[l]+C[l];return{s:k,e:k+A[s],i:C.__legendDataIndex}}}function T(C,A){return C.e>=A&&C.s<=A+i}},t.prototype._findTargetItemIndex=function(a){if(!this._showController)return 0;var r,n=this.getContentGroup(),i;return n.eachChild(function(o,s){var l=o.__legendDataIndex;i==null&&l!=null&&(i=s),l===a&&(r=s)}),r??i},t.type="legend.scroll",t}(dD);function Jq(e){e.registerAction("legendScroll","legendscroll",function(t,a){var r=t.scrollDataIndex;r!=null&&a.eachComponent({mainType:"legend",subType:"scroll",query:t},function(n){n.setScrollDataIndex(r)})})}function Qq(e){ue(pD),e.registerComponentModel(Zq),e.registerComponentView(Kq),Jq(e)}function An(e){ue(pD),ue(Qq)}var tU=function(e){gt(t,e);function t(){var a=e!==null&&e.apply(this,arguments)||this;return a.type=t.type,a}return t.type="dataZoom.inside",t.defaultOption=zi(Vc.defaultOption,{disabled:!1,zoomLock:!1,zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!1,preventDefaultMouseMove:!0}),t}(Vc),b0=ia();function eU(e,t,a){b0(e).coordSysRecordMap.each(function(r){var n=r.dataZoomInfoMap.get(t.uid);n&&(n.getRange=a)})}function aU(e,t){for(var a=b0(e).coordSysRecordMap,r=a.keys(),n=0;n<r.length;n++){var i=r[n],o=a.get(i),s=o.dataZoomInfoMap;if(s){var l=t.uid,c=s.get(l);c&&(s.removeKey(l),s.keys().length||gD(a,o))}}}function gD(e,t){if(t){e.removeKey(t.model.uid);var a=t.controller;a&&a.dispose()}}function rU(e,t){var a={model:t,containsPoint:pe(iU,t),dispatchAction:pe(nU,e),dataZoomInfoMap:null,controller:null},r=a.controller=new vu(e.getZr());return G(["pan","zoom","scrollMove"],function(n){r.on(n,function(i){var o=[];a.dataZoomInfoMap.each(function(s){if(i.isAvailableBehavior(s.model.option)){var l=(s.getRange||{})[n],c=l&&l(s.dzReferCoordSysInfo,a.model.mainType,a.controller,i);!s.model.get("disabled",!0)&&c&&o.push({dataZoomId:s.model.id,start:c[0],end:c[1]})}}),o.length&&a.dispatchAction(o)})}),a}function nU(e,t){e.isDisposed()||e.dispatchAction({type:"dataZoom",animation:{easing:"cubicOut",duration:100},batch:t})}function iU(e,t,a,r){return e.coordinateSystem.containPoint([a,r])}function oU(e){var t,a="type_",r={type_true:2,type_move:1,type_false:0,type_undefined:-1},n=!0;return e.each(function(i){var o=i.model,s=o.get("disabled",!0)?!1:o.get("zoomLock",!0)?"move":!0;r[a+s]>r[a+t]&&(t=s),n=n&&o.get("preventDefaultMouseMove",!0)}),{controlType:t,opt:{zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!0,preventDefaultMouseMove:!!n}}}function sU(e){e.registerProcessor(e.PRIORITY.PROCESSOR.FILTER,function(t,a){var r=b0(a),n=r.coordSysRecordMap||(r.coordSysRecordMap=ke());n.each(function(i){i.dataZoomInfoMap=null}),t.eachComponent({mainType:"dataZoom",subType:"inside"},function(i){var o=Xk(i);G(o.infoList,function(s){var l=s.model.uid,c=n.get(l)||n.set(l,rU(a,s.model)),u=c.dataZoomInfoMap||(c.dataZoomInfoMap=ke());u.set(i.uid,{dzReferCoordSysInfo:s,model:i,getRange:null})})}),n.each(function(i){var o=i.controller,s,l=i.dataZoomInfoMap;if(l){var c=l.keys()[0];c!=null&&(s=l.get(c))}if(!s){gD(n,i);return}var u=oU(l);o.enable(u.controlType,u.opt),o.setPointerChecker(i.containsPoint),ul(i,"dispatchAction",s.model.get("throttle",!0),"fixRate")})})}var lU=function(e){gt(t,e);function t(){var a=e!==null&&e.apply(this,arguments)||this;return a.type="dataZoom.inside",a}return t.prototype.render=function(a,r,n){if(e.prototype.render.apply(this,arguments),a.noTarget()){this._clear();return}this.range=a.getPercentRange(),eU(n,a,{pan:Ut(xg.pan,this),zoom:Ut(xg.zoom,this),scrollMove:Ut(xg.scrollMove,this)})},t.prototype.dispose=function(){this._clear(),e.prototype.dispose.apply(this,arguments)},t.prototype._clear=function(){aU(this.api,this.dataZoomModel),this.range=null},t.type="dataZoom.inside",t}(u0),xg={zoom:function(e,t,a,r){var n=this.range,i=n.slice(),o=e.axisModels[0];if(o){var s=Sg[t](null,[r.originX,r.originY],o,a,e),l=(s.signal>0?s.pixelStart+s.pixelLength-s.pixel:s.pixel-s.pixelStart)/s.pixelLength*(i[1]-i[0])+i[0],c=Math.max(1/r.scale,0);i[0]=(i[0]-l)*c+l,i[1]=(i[1]-l)*c+l;var u=this.dataZoomModel.findRepresentativeAxisProxy().getMinMaxSpan();if(Go(0,i,[0,100],0,u.minSpan,u.maxSpan),this.range=i,n[0]!==i[0]||n[1]!==i[1])return i}},pan:QS(function(e,t,a,r,n,i){var o=Sg[r]([i.oldX,i.oldY],[i.newX,i.newY],t,n,a);return o.signal*(e[1]-e[0])*o.pixel/o.pixelLength}),scrollMove:QS(function(e,t,a,r,n,i){var o=Sg[r]([0,0],[i.scrollDelta,i.scrollDelta],t,n,a);return o.signal*(e[1]-e[0])*i.scrollDelta})};function QS(e){return function(t,a,r,n){var i=this.range,o=i.slice(),s=t.axisModels[0];if(s){var l=e(o,s,t,a,r,n);if(Go(l,o,[0,100],"all"),this.range=o,i[0]!==o[0]||i[1]!==o[1])return o}}}var Sg={grid:function(e,t,a,r,n){var i=a.axis,o={},s=n.model.coordinateSystem.getRect();return e=e||[0,0],i.dim==="x"?(o.pixel=t[0]-e[0],o.pixelLength=s.width,o.pixelStart=s.x,o.signal=i.inverse?1:-1):(o.pixel=t[1]-e[1],o.pixelLength=s.height,o.pixelStart=s.y,o.signal=i.inverse?-1:1),o},polar:function(e,t,a,r,n){var i=a.axis,o={},s=n.model.coordinateSystem,l=s.getRadiusAxis().getExtent(),c=s.getAngleAxis().getExtent();return e=e?s.pointToCoord(e):[0,0],t=s.pointToCoord(t),a.mainType==="radiusAxis"?(o.pixel=t[0]-e[0],o.pixelLength=l[1]-l[0],o.pixelStart=l[0],o.signal=i.inverse?1:-1):(o.pixel=t[1]-e[1],o.pixelLength=c[1]-c[0],o.pixelStart=c[0],o.signal=i.inverse?-1:1),o},singleAxis:function(e,t,a,r,n){var i=a.axis,o=n.model.coordinateSystem.getRect(),s={};return e=e||[0,0],i.orient==="horizontal"?(s.pixel=t[0]-e[0],s.pixelLength=o.width,s.pixelStart=o.x,s.signal=i.inverse?1:-1):(s.pixel=t[1]-e[1],s.pixelLength=o.height,s.pixelStart=o.y,s.signal=i.inverse?-1:1),s}};function vD(e){h0(e),e.registerComponentModel(tU),e.registerComponentView(lU),sU(e)}var cU=function(e){gt(t,e);function t(){var a=e!==null&&e.apply(this,arguments)||this;return a.type=t.type,a}return t.type="dataZoom.slider",t.layoutMode="box",t.defaultOption=zi(Vc.defaultOption,{show:!0,right:"ph",top:"ph",width:"ph",height:"ph",left:null,bottom:null,borderColor:"#d2dbee",borderRadius:3,backgroundColor:"rgba(47,69,84,0)",dataBackground:{lineStyle:{color:"#d2dbee",width:.5},areaStyle:{color:"#d2dbee",opacity:.2}},selectedDataBackground:{lineStyle:{color:"#8fb0f7",width:.5},areaStyle:{color:"#8fb0f7",opacity:.2}},fillerColor:"rgba(135,175,274,0.2)",handleIcon:"path://M-9.35,34.56V42m0-40V9.5m-2,0h4a2,2,0,0,1,2,2v21a2,2,0,0,1-2,2h-4a2,2,0,0,1-2-2v-21A2,2,0,0,1-11.35,9.5Z",handleSize:"100%",handleStyle:{color:"#fff",borderColor:"#ACB8D1"},moveHandleSize:7,moveHandleIcon:"path://M-320.9-50L-320.9-50c18.1,0,27.1,9,27.1,27.1V85.7c0,18.1-9,27.1-27.1,27.1l0,0c-18.1,0-27.1-9-27.1-27.1V-22.9C-348-41-339-50-320.9-50z M-212.3-50L-212.3-50c18.1,0,27.1,9,27.1,27.1V85.7c0,18.1-9,27.1-27.1,27.1l0,0c-18.1,0-27.1-9-27.1-27.1V-22.9C-239.4-41-230.4-50-212.3-50z M-103.7-50L-103.7-50c18.1,0,27.1,9,27.1,27.1V85.7c0,18.1-9,27.1-27.1,27.1l0,0c-18.1,0-27.1-9-27.1-27.1V-22.9C-130.9-41-121.8-50-103.7-50z",moveHandleStyle:{color:"#D2DBEE",opacity:.7},showDetail:!0,showDataShadow:"auto",realtime:!0,zoomLock:!1,textStyle:{color:"#6E7079"},brushSelect:!0,brushStyle:{color:"rgba(135,175,274,0.15)"},emphasis:{handleLabel:{show:!0},handleStyle:{borderColor:"#8FB0F7"},moveHandleStyle:{color:"#8FB0F7"}}}),t}(Vc),Ml=Ge,tw=7,uU=1,wg=30,hU=7,El="horizontal",ew="vertical",dU=5,fU=["line","bar","candlestick","scatter"],pU={easing:"cubicOut",duration:100,delay:0},gU=function(e){gt(t,e);function t(){var a=e!==null&&e.apply(this,arguments)||this;return a.type=t.type,a._displayables={},a}return t.prototype.init=function(a,r){this.api=r,this._onBrush=Ut(this._onBrush,this),this._onBrushEnd=Ut(this._onBrushEnd,this)},t.prototype.render=function(a,r,n,i){if(e.prototype.render.apply(this,arguments),ul(this,"_dispatchZoomAction",a.get("throttle"),"fixRate"),this._orient=a.getOrient(),a.get("show")===!1){this.group.removeAll();return}if(a.noTarget()){this._clear(),this.group.removeAll();return}(!i||i.type!=="dataZoom"||i.from!==this.uid)&&this._buildView(),this._updateView()},t.prototype.dispose=function(){this._clear(),e.prototype.dispose.apply(this,arguments)},t.prototype._clear=function(){Lc(this,"_dispatchZoomAction");var a=this.api.getZr();a.off("mousemove",this._onBrush),a.off("mouseup",this._onBrushEnd)},t.prototype._buildView=function(){var a=this.group;a.removeAll(),this._brushing=!1,this._displayables.brushRect=null,this._resetLocation(),this._resetInterval();var r=this._displayables.sliderGroup=new ie;this._renderBackground(),this._renderHandle(),this._renderDataShadow(),a.add(r),this._positionGroup()},t.prototype._resetLocation=function(){var a=this.dataZoomModel,r=this.api,n=a.get("brushSelect"),i=n?hU:0,o=this._findCoordRect(),s={width:r.getWidth(),height:r.getHeight()},l=this._orient===El?{right:s.width-o.x-o.width,top:s.height-wg-tw-i,width:o.width,height:wg}:{right:tw,top:o.y,width:wg,height:o.height},c=lf(a.option);G(["right","top","width","height"],function(h){c[h]==="ph"&&(c[h]=l[h])});var u=ka(c,s);this._location={x:u.x,y:u.y},this._size=[u.width,u.height],this._orient===ew&&this._size.reverse()},t.prototype._positionGroup=function(){var a=this.group,r=this._location,n=this._orient,i=this.dataZoomModel.getFirstTargetAxisModel(),o=i&&i.get("inverse"),s=this._displayables.sliderGroup,l=(this._dataShadowInfo||{}).otherAxisInverse;s.attr(n===El&&!o?{scaleY:l?1:-1,scaleX:1}:n===El&&o?{scaleY:l?1:-1,scaleX:-1}:n===ew&&!o?{scaleY:l?-1:1,scaleX:1,rotation:Math.PI/2}:{scaleY:l?-1:1,scaleX:-1,rotation:Math.PI/2});var c=a.getBoundingRect([s]);a.x=r.x-c.x,a.y=r.y-c.y,a.markRedraw()},t.prototype._getViewExtent=function(){return[0,this._size[0]]},t.prototype._renderBackground=function(){var a=this.dataZoomModel,r=this._size,n=this._displayables.sliderGroup,i=a.get("brushSelect");n.add(new Ml({silent:!0,shape:{x:0,y:0,width:r[0],height:r[1]},style:{fill:a.get("backgroundColor")},z2:-40}));var o=new Ml({shape:{x:0,y:0,width:r[0],height:r[1]},style:{fill:"transparent"},z2:0,onclick:Ut(this._onClickPanel,this)}),s=this.api.getZr();i?(o.on("mousedown",this._onBrushStart,this),o.cursor="crosshair",s.on("mousemove",this._onBrush),s.on("mouseup",this._onBrushEnd)):(s.off("mousemove",this._onBrush),s.off("mouseup",this._onBrushEnd)),n.add(o)},t.prototype._renderDataShadow=function(){var a=this._dataShadowInfo=this._prepareDataShadowInfo();if(this._displayables.dataShadowSegs=[],!a)return;var r=this._size,n=this._shadowSize||[],i=a.series,o=i.getRawData(),s=i.getShadowDim&&i.getShadowDim(),l=s&&o.getDimensionInfo(s)?i.getShadowDim():a.otherDim;if(l==null)return;var c=this._shadowPolygonPts,u=this._shadowPolylinePts;if(o!==this._shadowData||l!==this._shadowDim||r[0]!==n[0]||r[1]!==n[1]){var h=o.getDataExtent(l),d=(h[1]-h[0])*.3;h=[h[0]-d,h[1]+d];var f=[0,r[1]],p=[0,r[0]],g=[[r[0],0],[0,0]],v=[],_=p[1]/(o.count()-1),y=0,b=Math.round(o.count()/r[0]),w;o.each([l],function(L,M){if(b>0&&M%b){y+=_;return}var P=L==null||isNaN(L)||L==="",E=P?0:Ve(L,h,f,!0);P&&!w&&M?(g.push([g[g.length-1][0],0]),v.push([v[v.length-1][0],0])):!P&&w&&(g.push([y,0]),v.push([y,0])),g.push([y,E]),v.push([y,E]),y+=_,w=P}),c=this._shadowPolygonPts=g,u=this._shadowPolylinePts=v}this._shadowData=o,this._shadowDim=l,this._shadowSize=[r[0],r[1]];var T=this.dataZoomModel;function C(L){var M=T.getModel(L?"selectedDataBackground":"dataBackground"),P=new ie,E=new Br({shape:{points:c},segmentIgnoreThreshold:1,style:M.getModel("areaStyle").getAreaStyle(),silent:!0,z2:-20}),D=new Kr({shape:{points:u},segmentIgnoreThreshold:1,style:M.getModel("lineStyle").getLineStyle(),silent:!0,z2:-19});return P.add(E),P.add(D),P}for(var A=0;A<3;A++){var k=C(A===1);this._displayables.sliderGroup.add(k),this._displayables.dataShadowSegs.push(k)}},t.prototype._prepareDataShadowInfo=function(){var a=this.dataZoomModel,r=a.get("showDataShadow");if(r!==!1){var n,i=this.ecModel;return a.eachTargetAxis(function(o,s){var l=a.getAxisProxy(o,s).getTargetSeriesModels();G(l,function(c){if(!n&&!(r!==!0&&Xe(fU,c.get("type"))<0)){var u=i.getComponent(Ti(o),s).axis,h=vU(o),d,f=c.coordinateSystem;h!=null&&f.getOtherAxis&&(d=f.getOtherAxis(u).inverse),h=c.getData().mapDimension(h),n={thisAxis:u,series:c,thisDim:o,otherDim:h,otherAxisInverse:d}}},this)},this),n}},t.prototype._renderHandle=function(){var a=this.group,r=this._displayables,n=r.handles=[null,null],i=r.handleLabels=[null,null],o=this._displayables.sliderGroup,s=this._size,l=this.dataZoomModel,c=this.api,u=l.get("borderRadius")||0,h=l.get("brushSelect"),d=r.filler=new Ml({silent:h,style:{fill:l.get("fillerColor")},textConfig:{position:"inside"}});o.add(d),o.add(new Ml({silent:!0,subPixelOptimize:!0,shape:{x:0,y:0,width:s[0],height:s[1],r:u},style:{stroke:l.get("dataBackgroundColor")||l.get("borderColor"),lineWidth:uU,fill:"rgba(0,0,0,0)"}})),G([0,1],function(b){var w=l.get("handleIcon");!lO[w]&&w.indexOf("path://")<0&&w.indexOf("image://")<0&&(w="path://"+w);var T=ba(w,-1,0,2,2,null,!0);T.attr({cursor:aw(this._orient),draggable:!0,drift:Ut(this._onDragMove,this,b),ondragend:Ut(this._onDragEnd,this),onmouseover:Ut(this._showDataInfo,this,!0),onmouseout:Ut(this._showDataInfo,this,!1),z2:5});var C=T.getBoundingRect(),A=l.get("handleSize");this._handleHeight=Ft(A,this._size[1]),this._handleWidth=C.width/C.height*this._handleHeight,T.setStyle(l.getModel("handleStyle").getItemStyle()),T.style.strokeNoScale=!0,T.rectHover=!0,T.ensureState("emphasis").style=l.getModel(["emphasis","handleStyle"]).getItemStyle(),_s(T);var k=l.get("handleColor");k!=null&&(T.style.fill=k),o.add(n[b]=T);var L=l.getModel("textStyle"),M=l.get("handleLabel")||{},P=M.show||!1;a.add(i[b]=new Oe({silent:!0,invisible:!P,style:Ke(L,{x:0,y:0,text:"",verticalAlign:"middle",align:"center",fill:L.getTextColor(),font:L.getFont()}),z2:10}))},this);var f=d;if(h){var p=Ft(l.get("moveHandleSize"),s[1]),g=r.moveHandle=new Ge({style:l.getModel("moveHandleStyle").getItemStyle(),silent:!0,shape:{r:[0,0,2,2],y:s[1]-.5,height:p}}),v=p*.8,_=r.moveHandleIcon=ba(l.get("moveHandleIcon"),-v/2,-v/2,v,v,"#fff",!0);_.silent=!0,_.y=s[1]+p/2-.5,g.ensureState("emphasis").style=l.getModel(["emphasis","moveHandleStyle"]).getItemStyle();var y=Math.min(s[1]/2,Math.max(p,10));f=r.moveZone=new Ge({invisible:!0,shape:{y:s[1]-y,height:p+y}}),f.on("mouseover",function(){c.enterEmphasis(g)}).on("mouseout",function(){c.leaveEmphasis(g)}),o.add(g),o.add(_),o.add(f)}f.attr({draggable:!0,cursor:aw(this._orient),drift:Ut(this._onDragMove,this,"all"),ondragstart:Ut(this._showDataInfo,this,!0),ondragend:Ut(this._onDragEnd,this),onmouseover:Ut(this._showDataInfo,this,!0),onmouseout:Ut(this._showDataInfo,this,!1)})},t.prototype._resetInterval=function(){var a=this._range=this.dataZoomModel.getPercentRange(),r=this._getViewExtent();this._handleEnds=[Ve(a[0],[0,100],r,!0),Ve(a[1],[0,100],r,!0)]},t.prototype._updateInterval=function(a,r){var n=this.dataZoomModel,i=this._handleEnds,o=this._getViewExtent(),s=n.findRepresentativeAxisProxy().getMinMaxSpan(),l=[0,100];Go(r,i,o,n.get("zoomLock")?"all":a,s.minSpan!=null?Ve(s.minSpan,l,o,!0):null,s.maxSpan!=null?Ve(s.maxSpan,l,o,!0):null);var c=this._range,u=this._range=Er([Ve(i[0],o,l,!0),Ve(i[1],o,l,!0)]);return!c||c[0]!==u[0]||c[1]!==u[1]},t.prototype._updateView=function(a){var r=this._displayables,n=this._handleEnds,i=Er(n.slice()),o=this._size;G([0,1],function(f){var p=r.handles[f],g=this._handleHeight;p.attr({scaleX:g/2,scaleY:g/2,x:n[f]+(f?-1:1),y:o[1]/2-g/2})},this),r.filler.setShape({x:i[0],y:0,width:i[1]-i[0],height:o[1]});var s={x:i[0],width:i[1]-i[0]};r.moveHandle&&(r.moveHandle.setShape(s),r.moveZone.setShape(s),r.moveZone.getBoundingRect(),r.moveHandleIcon&&r.moveHandleIcon.attr("x",s.x+s.width/2));for(var l=r.dataShadowSegs,c=[0,i[0],i[1],o[0]],u=0;u<l.length;u++){var h=l[u],d=h.getClipPath();d||(d=new Ge,h.setClipPath(d)),d.setShape({x:c[u],y:0,width:c[u+1]-c[u],height:o[1]})}this._updateDataInfo(a)},t.prototype._updateDataInfo=function(a){var r=this.dataZoomModel,n=this._displayables,i=n.handleLabels,o=this._orient,s=["",""];if(r.get("showDetail")){var l=r.findRepresentativeAxisProxy();if(l){var c=l.getAxisModel().axis,u=this._range,h=a?l.calculateDataWindow({start:u[0],end:u[1]}).valueWindow:l.getDataValueWindow();s=[this._formatLabel(h[0],c),this._formatLabel(h[1],c)]}}var d=Er(this._handleEnds.slice());f.call(this,0),f.call(this,1);function f(p){var g=ys(n.handles[p].parent,this.group),v=py(p===0?"right":"left",g),_=this._handleWidth/2+dU,y=qn([d[p]+(p===0?-_:_),this._size[1]/2],g);i[p].setStyle({x:y[0],y:y[1],verticalAlign:o===El?"middle":v,align:o===El?v:"center",text:s[p]})}},t.prototype._formatLabel=function(a,r){var n=this.dataZoomModel,i=n.get("labelFormatter"),o=n.get("labelPrecision");(o==null||o==="auto")&&(o=r.getPixelPrecision());var s=a==null||isNaN(a)?"":r.type==="category"||r.type==="time"?r.scale.getLabel({value:Math.round(a)}):a.toFixed(Math.min(o,20));return Me(i)?i(a,s):ge(i)?i.replace("{value}",s):s},t.prototype._showDataInfo=function(a){var r=this.dataZoomModel.get("handleLabel")||{},n=r.show||!1,i=this.dataZoomModel.getModel(["emphasis","handleLabel"]),o=i.get("show")||!1,s=a||this._dragging?o:n,l=this._displayables,c=l.handleLabels;c[0].attr("invisible",!s),c[1].attr("invisible",!s),l.moveHandle&&this.api[s?"enterEmphasis":"leaveEmphasis"](l.moveHandle,1)},t.prototype._onDragMove=function(a,r,n,i){this._dragging=!0,Mi(i.event);var o=this._displayables.sliderGroup.getLocalTransform(),s=qn([r,n],o,!0),l=this._updateInterval(a,s[0]),c=this.dataZoomModel.get("realtime");this._updateView(!c),l&&c&&this._dispatchZoomAction(!0)},t.prototype._onDragEnd=function(){this._dragging=!1,this._showDataInfo(!1);var a=this.dataZoomModel.get("realtime");!a&&this._dispatchZoomAction(!1)},t.prototype._onClickPanel=function(a){var r=this._size,n=this._displayables.sliderGroup.transformCoordToLocal(a.offsetX,a.offsetY);if(!(n[0]<0||n[0]>r[0]||n[1]<0||n[1]>r[1])){var i=this._handleEnds,o=(i[0]+i[1])/2,s=this._updateInterval("all",n[0]-o);this._updateView(),s&&this._dispatchZoomAction(!1)}},t.prototype._onBrushStart=function(a){var r=a.offsetX,n=a.offsetY;this._brushStart=new Hr(r,n),this._brushing=!0,this._brushStartTime=+new Date},t.prototype._onBrushEnd=function(a){if(this._brushing){var r=this._displayables.brushRect;if(this._brushing=!1,!!r){r.attr("ignore",!0);var n=r.shape,i=+new Date;if(!(i-this._brushStartTime<200&&Math.abs(n.width)<5)){var o=this._getViewExtent(),s=[0,100];this._range=Er([Ve(n.x,o,s,!0),Ve(n.x+n.width,o,s,!0)]),this._handleEnds=[n.x,n.x+n.width],this._updateView(),this._dispatchZoomAction(!1)}}}},t.prototype._onBrush=function(a){this._brushing&&(Mi(a.event),this._updateBrushRect(a.offsetX,a.offsetY))},t.prototype._updateBrushRect=function(a,r){var n=this._displayables,i=this.dataZoomModel,o=n.brushRect;o||(o=n.brushRect=new Ml({silent:!0,style:i.getModel("brushStyle").getItemStyle()}),n.sliderGroup.add(o)),o.attr("ignore",!1);var s=this._brushStart,l=this._displayables.sliderGroup,c=l.transformCoordToLocal(a,r),u=l.transformCoordToLocal(s.x,s.y),h=this._size;c[0]=Math.max(Math.min(h[0],c[0]),0),o.setShape({x:u[0],y:0,width:c[0]-u[0],height:h[1]})},t.prototype._dispatchZoomAction=function(a){var r=this._range;this.api.dispatchAction({type:"dataZoom",from:this.uid,dataZoomId:this.dataZoomModel.id,animation:a?pU:null,start:r[0],end:r[1]})},t.prototype._findCoordRect=function(){var a,r=Xk(this.dataZoomModel).infoList;if(!a&&r.length){var n=r[0].model.coordinateSystem;a=n.getRect&&n.getRect()}if(!a){var i=this.api.getWidth(),o=this.api.getHeight();a={x:i*.2,y:o*.2,width:i*.6,height:o*.6}}return a},t.type="dataZoom.slider",t}(u0);function vU(e){var t={x:"y",y:"x",radius:"angle",angle:"radius"};return t[e]}function aw(e){return e==="vertical"?"ns-resize":"ew-resize"}function mD(e){e.registerComponentModel(cU),e.registerComponentView(gU),h0(e)}function yD(e){ue(vD),ue(mD)}var _D={get:function(e,t,a){var r=Pe((mU[e]||{})[t]);return a&&Nt(r)?r[r.length-1]:r}},mU={color:{active:["#006edd","#e0ffff"],inactive:["rgba(0,0,0,0)"]},colorHue:{active:[0,360],inactive:[0,0]},colorSaturation:{active:[.3,1],inactive:[0,0]},colorLightness:{active:[.9,.5],inactive:[0,0]},colorAlpha:{active:[.3,1],inactive:[0,0]},opacity:{active:[.3,1],inactive:[0,0]},symbol:{active:["circle","roundRect","diamond"],inactive:["none"]},symbolSize:{active:[10,50],inactive:[0,0]}},rw=Ta.mapVisual,yU=Ta.eachVisual,_U=Nt,nw=G,bU=Er,xU=Ve,gd=function(e){gt(t,e);function t(){var a=e!==null&&e.apply(this,arguments)||this;return a.type=t.type,a.stateList=["inRange","outOfRange"],a.replacableOptionKeys=["inRange","outOfRange","target","controller","color"],a.layoutMode={type:"box",ignoreSize:!0},a.dataBound=[-1/0,1/0],a.targetVisuals={},a.controllerVisuals={},a}return t.prototype.init=function(a,r,n){this.mergeDefaultAndTheme(a,n)},t.prototype.optionUpdated=function(a,r){var n=this.option;!r&&oD(n,a,this.replacableOptionKeys),this.textStyleModel=this.getModel("textStyle"),this.resetItemSize(),this.completeVisualOption()},t.prototype.resetVisual=function(a){var r=this.stateList;a=Ut(a,this),this.controllerVisuals=Yv(this.option.controller,r,a),this.targetVisuals=Yv(this.option.target,r,a)},t.prototype.getItemSymbol=function(){return null},t.prototype.getTargetSeriesIndices=function(){var a=this.option.seriesIndex,r=[];return a==null||a==="all"?this.ecModel.eachSeries(function(n,i){r.push(i)}):r=nr(a),r},t.prototype.eachTargetSeries=function(a,r){G(this.getTargetSeriesIndices(),function(n){var i=this.ecModel.getSeriesByIndex(n);i&&a.call(r,i)},this)},t.prototype.isTargetSeries=function(a){var r=!1;return this.eachTargetSeries(function(n){n===a&&(r=!0)}),r},t.prototype.formatValueText=function(a,r,n){var i=this.option,o=i.precision,s=this.dataBound,l=i.formatter,c;n=n||["<",">"],Nt(a)&&(a=a.slice(),c=!0);var u=r?a:c?[h(a[0]),h(a[1])]:h(a);if(ge(l))return l.replace("{value}",c?u[0]:u).replace("{value2}",c?u[1]:u);if(Me(l))return c?l(a[0],a[1]):l(a);if(c)return a[0]===s[0]?n[0]+" "+u[1]:a[1]===s[1]?n[1]+" "+u[0]:u[0]+" - "+u[1];return u;function h(d){return d===s[0]?"min":d===s[1]?"max":(+d).toFixed(Math.min(o,20))}},t.prototype.resetExtent=function(){var a=this.option,r=bU([a.min,a.max]);this._dataExtent=r},t.prototype.getDataDimensionIndex=function(a){var r=this.option.dimension;if(r!=null)return a.getDimensionIndex(r);for(var n=a.dimensions,i=n.length-1;i>=0;i--){var o=n[i],s=a.getDimensionInfo(o);if(!s.isCalculationCoord)return s.storeDimIndex}},t.prototype.getExtent=function(){return this._dataExtent.slice()},t.prototype.completeVisualOption=function(){var a=this.ecModel,r=this.option,n={inRange:r.inRange,outOfRange:r.outOfRange},i=r.target||(r.target={}),o=r.controller||(r.controller={});Be(i,n),Be(o,n);var s=this.isCategory();l.call(this,i),l.call(this,o),c.call(this,i,"inRange","outOfRange"),u.call(this,o);function l(h){_U(r.color)&&!h.inRange&&(h.inRange={color:r.color.slice().reverse()}),h.inRange=h.inRange||{color:a.get("gradientColor")}}function c(h,d,f){var p=h[d],g=h[f];p&&!g&&(g=h[f]={},nw(p,function(v,_){if(Ta.isValidType(_)){var y=_D.get(_,"inactive",s);y!=null&&(g[_]=y,_==="color"&&!g.hasOwnProperty("opacity")&&!g.hasOwnProperty("colorAlpha")&&(g.opacity=[0,0]))}}))}function u(h){var d=(h.inRange||{}).symbol||(h.outOfRange||{}).symbol,f=(h.inRange||{}).symbolSize||(h.outOfRange||{}).symbolSize,p=this.get("inactiveColor"),g=this.getItemSymbol(),v=g||"roundRect";nw(this.stateList,function(_){var y=this.itemSize,b=h[_];b||(b=h[_]={color:s?p:[p]}),b.symbol==null&&(b.symbol=d&&Pe(d)||(s?v:[v])),b.symbolSize==null&&(b.symbolSize=f&&Pe(f)||(s?y[0]:[y[0],y[0]])),b.symbol=rw(b.symbol,function(C){return C==="none"?v:C});var w=b.symbolSize;if(w!=null){var T=-1/0;yU(w,function(C){C>T&&(T=C)}),b.symbolSize=rw(w,function(C){return xU(C,[0,T],[0,y[0]],!0)})}},this)}},t.prototype.resetItemSize=function(){this.itemSize=[parseFloat(this.get("itemWidth")),parseFloat(this.get("itemHeight"))]},t.prototype.isCategory=function(){return!!this.option.categories},t.prototype.setSelected=function(a){},t.prototype.getSelected=function(){return null},t.prototype.getValueState=function(a){return null},t.prototype.getVisualMeta=function(a){return null},t.type="visualMap",t.dependencies=["series"],t.defaultOption={show:!0,z:4,seriesIndex:"all",min:0,max:200,left:0,right:null,top:null,bottom:0,itemWidth:null,itemHeight:null,inverse:!1,orient:"vertical",backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",contentColor:"#5793f3",inactiveColor:"#aaa",borderWidth:0,padding:5,textGap:10,precision:0,textStyle:{color:"#333"}},t}(da),iw=[20,140],SU=function(e){gt(t,e);function t(){var a=e!==null&&e.apply(this,arguments)||this;return a.type=t.type,a}return t.prototype.optionUpdated=function(a,r){e.prototype.optionUpdated.apply(this,arguments),this.resetExtent(),this.resetVisual(function(n){n.mappingMethod="linear",n.dataExtent=this.getExtent()}),this._resetRange()},t.prototype.resetItemSize=function(){e.prototype.resetItemSize.apply(this,arguments);var a=this.itemSize;(a[0]==null||isNaN(a[0]))&&(a[0]=iw[0]),(a[1]==null||isNaN(a[1]))&&(a[1]=iw[1])},t.prototype._resetRange=function(){var a=this.getExtent(),r=this.option.range;!r||r.auto?(a.auto=1,this.option.range=a):Nt(r)&&(r[0]>r[1]&&r.reverse(),r[0]=Math.max(r[0],a[0]),r[1]=Math.min(r[1],a[1]))},t.prototype.completeVisualOption=function(){e.prototype.completeVisualOption.apply(this,arguments),G(this.stateList,function(a){var r=this.option.controller[a].symbolSize;r&&r[0]!==r[1]&&(r[0]=r[1]/3)},this)},t.prototype.setSelected=function(a){this.option.range=a.slice(),this._resetRange()},t.prototype.getSelected=function(){var a=this.getExtent(),r=Er((this.get("range")||[]).slice());return r[0]>a[1]&&(r[0]=a[1]),r[1]>a[1]&&(r[1]=a[1]),r[0]<a[0]&&(r[0]=a[0]),r[1]<a[0]&&(r[1]=a[0]),r},t.prototype.getValueState=function(a){var r=this.option.range,n=this.getExtent();return(r[0]<=n[0]||r[0]<=a)&&(r[1]>=n[1]||a<=r[1])?"inRange":"outOfRange"},t.prototype.findTargetDataIndices=function(a){var r=[];return this.eachTargetSeries(function(n){var i=[],o=n.getData();o.each(this.getDataDimensionIndex(o),function(s,l){a[0]<=s&&s<=a[1]&&i.push(l)},this),r.push({seriesId:n.id,dataIndex:i})},this),r},t.prototype.getVisualMeta=function(a){var r=ow(this,"outOfRange",this.getExtent()),n=ow(this,"inRange",this.option.range.slice()),i=[];function o(f,p){i.push({value:f,color:a(f,p)})}for(var s=0,l=0,c=n.length,u=r.length;l<u&&(!n.length||r[l]<=n[0]);l++)r[l]<n[s]&&o(r[l],"outOfRange");for(var h=1;s<c;s++,h=0)h&&i.length&&o(n[s],"outOfRange"),o(n[s],"inRange");for(var h=1;l<u;l++)(!n.length||n[n.length-1]<r[l])&&(h&&(i.length&&o(i[i.length-1].value,"outOfRange"),h=0),o(r[l],"outOfRange"));var d=i.length;return{stops:i,outerColors:[d?i[0].color:"transparent",d?i[d-1].color:"transparent"]}},t.type="visualMap.continuous",t.defaultOption=zi(gd.defaultOption,{align:"auto",calculable:!1,hoverLink:!0,realtime:!0,handleIcon:"path://M-11.39,9.77h0a3.5,3.5,0,0,1-3.5,3.5h-22a3.5,3.5,0,0,1-3.5-3.5h0a3.5,3.5,0,0,1,3.5-3.5h22A3.5,3.5,0,0,1-11.39,9.77Z",handleSize:"120%",handleStyle:{borderColor:"#fff",borderWidth:1},indicatorIcon:"circle",indicatorSize:"50%",indicatorStyle:{borderColor:"#fff",borderWidth:2,shadowBlur:2,shadowOffsetX:1,shadowOffsetY:1,shadowColor:"rgba(0,0,0,0.2)"}}),t}(gd);function ow(e,t,a){if(a[0]===a[1])return a.slice();for(var r=200,n=(a[1]-a[0])/r,i=a[0],o=[],s=0;s<=r&&i<a[1];s++)o.push(i),i+=n;return o.push(a[1]),o}var bD=function(e){gt(t,e);function t(){var a=e!==null&&e.apply(this,arguments)||this;return a.type=t.type,a.autoPositionValues={left:1,right:1,top:1,bottom:1},a}return t.prototype.init=function(a,r){this.ecModel=a,this.api=r},t.prototype.render=function(a,r,n,i){if(this.visualMapModel=a,a.get("show")===!1){this.group.removeAll();return}this.doRender(a,r,n,i)},t.prototype.renderBackground=function(a){var r=this.visualMapModel,n=mf(r.get("padding")||0),i=a.getBoundingRect();a.add(new Ge({z2:-1,silent:!0,shape:{x:i.x-n[3],y:i.y-n[0],width:i.width+n[3]+n[1],height:i.height+n[0]+n[2]},style:{fill:r.get("backgroundColor"),stroke:r.get("borderColor"),lineWidth:r.get("borderWidth")}}))},t.prototype.getControllerVisual=function(a,r,n){n=n||{};var i=n.forceState,o=this.visualMapModel,s={};if(r==="color"){var l=o.get("contentColor");s.color=l}function c(f){return s[f]}function u(f,p){s[f]=p}var h=o.controllerVisuals[i||o.getValueState(a)],d=Ta.prepareVisualTypes(h);return G(d,function(f){var p=h[f];n.convertOpacityToAlpha&&f==="opacity"&&(f="colorAlpha",p=h.__alphaForOpacity),Ta.dependsOn(f,r)&&p&&p.applyVisual(a,c,u)}),s[r]},t.prototype.positionGroup=function(a){var r=this.visualMapModel,n=this.api;gf(a,r.getBoxLayoutParams(),{width:n.getWidth(),height:n.getHeight()})},t.prototype.doRender=function(a,r,n,i){},t.type="visualMap",t}(ma),sw=[["left","right","width"],["top","bottom","height"]];function xD(e,t,a){var r=e.option,n=r.align;if(n!=null&&n!=="auto")return n;for(var i={width:t.getWidth(),height:t.getHeight()},o=r.orient==="horizontal"?1:0,s=sw[o],l=[0,null,10],c={},u=0;u<3;u++)c[sw[1-o][u]]=l[u],c[s[u]]=u===2?a[0]:r[s[u]];var h=[["x","width",3],["y","height",0]][o],d=ka(c,i,r.padding);return s[(d.margin[h[2]]||0)+d[h[0]]+d[h[1]]*.5<i[h[1]]*.5?0:1]}function Sh(e,t){return G(e||[],function(a){a.dataIndex!=null&&(a.dataIndexInside=a.dataIndex,a.dataIndex=null),a.highlightKey="visualMap"+(t?t.componentIndex:"")}),e}var cn=Ve,wU=G,lw=Math.min,Cg=Math.max,CU=12,TU=6,AU=function(e){gt(t,e);function t(){var a=e!==null&&e.apply(this,arguments)||this;return a.type=t.type,a._shapes={},a._dataInterval=[],a._handleEnds=[],a._hoverLinkDataIndices=[],a}return t.prototype.init=function(a,r){e.prototype.init.call(this,a,r),this._hoverLinkFromSeriesMouseOver=Ut(this._hoverLinkFromSeriesMouseOver,this),this._hideIndicator=Ut(this._hideIndicator,this)},t.prototype.doRender=function(a,r,n,i){(!i||i.type!=="selectDataRange"||i.from!==this.uid)&&this._buildView()},t.prototype._buildView=function(){this.group.removeAll();var a=this.visualMapModel,r=this.group;this._orient=a.get("orient"),this._useHandle=a.get("calculable"),this._resetInterval(),this._renderBar(r);var n=a.get("text");this._renderEndsText(r,n,0),this._renderEndsText(r,n,1),this._updateView(!0),this.renderBackground(r),this._updateView(),this._enableHoverLinkToSeries(),this._enableHoverLinkFromSeries(),this.positionGroup(r)},t.prototype._renderEndsText=function(a,r,n){if(r){var i=r[1-n];i=i!=null?i+"":"";var o=this.visualMapModel,s=o.get("textGap"),l=o.itemSize,c=this._shapes.mainGroup,u=this._applyTransform([l[0]/2,n===0?-s:l[1]+s],c),h=this._applyTransform(n===0?"bottom":"top",c),d=this._orient,f=this.visualMapModel.textStyleModel;this.group.add(new Oe({style:Ke(f,{x:u[0],y:u[1],verticalAlign:d==="horizontal"?"middle":h,align:d==="horizontal"?h:"center",text:i})}))}},t.prototype._renderBar=function(a){var r=this.visualMapModel,n=this._shapes,i=r.itemSize,o=this._orient,s=this._useHandle,l=xD(r,this.api,i),c=n.mainGroup=this._createBarGroup(l),u=new ie;c.add(u),u.add(n.outOfRange=cw()),u.add(n.inRange=cw(null,s?hw(this._orient):null,Ut(this._dragHandle,this,"all",!1),Ut(this._dragHandle,this,"all",!0))),u.setClipPath(new Ge({shape:{x:0,y:0,width:i[0],height:i[1],r:3}}));var h=r.textStyleModel.getTextRect("国"),d=Cg(h.width,h.height);s&&(n.handleThumbs=[],n.handleLabels=[],n.handleLabelPoints=[],this._createHandle(r,c,0,i,d,o),this._createHandle(r,c,1,i,d,o)),this._createIndicator(r,c,i,d,o),a.add(c)},t.prototype._createHandle=function(a,r,n,i,o,s){var l=Ut(this._dragHandle,this,n,!1),c=Ut(this._dragHandle,this,n,!0),u=Uh(a.get("handleSize"),i[0]),h=ba(a.get("handleIcon"),-u/2,-u/2,u,u,null,!0),d=hw(this._orient);h.attr({cursor:d,draggable:!0,drift:l,ondragend:c,onmousemove:function(_){Mi(_.event)}}),h.x=i[0]/2,h.useStyle(a.getModel("handleStyle").getItemStyle()),h.setStyle({strokeNoScale:!0,strokeFirst:!0}),h.style.lineWidth*=2,h.ensureState("emphasis").style=a.getModel(["emphasis","handleStyle"]).getItemStyle(),jl(h,!0),r.add(h);var f=this.visualMapModel.textStyleModel,p=new Oe({cursor:d,draggable:!0,drift:l,onmousemove:function(_){Mi(_.event)},ondragend:c,style:Ke(f,{x:0,y:0,text:""})});p.ensureState("blur").style={opacity:.1},p.stateTransition={duration:200},this.group.add(p);var g=[u,0],v=this._shapes;v.handleThumbs[n]=h,v.handleLabelPoints[n]=g,v.handleLabels[n]=p},t.prototype._createIndicator=function(a,r,n,i,o){var s=Uh(a.get("indicatorSize"),n[0]),l=ba(a.get("indicatorIcon"),-s/2,-s/2,s,s,null,!0);l.attr({cursor:"move",invisible:!0,silent:!0,x:n[0]/2});var c=a.getModel("indicatorStyle").getItemStyle();if(l instanceof Zr){var u=l.style;l.useStyle(Vt({image:u.image,x:u.x,y:u.y,width:u.width,height:u.height},c))}else l.useStyle(c);r.add(l);var h=this.visualMapModel.textStyleModel,d=new Oe({silent:!0,invisible:!0,style:Ke(h,{x:0,y:0,text:""})});this.group.add(d);var f=[(o==="horizontal"?i/2:TU)+n[0]/2,0],p=this._shapes;p.indicator=l,p.indicatorLabel=d,p.indicatorLabelPoint=f,this._firstShowIndicator=!0},t.prototype._dragHandle=function(a,r,n,i){if(this._useHandle){if(this._dragging=!r,!r){var o=this._applyTransform([n,i],this._shapes.mainGroup,!0);this._updateInterval(a,o[1]),this._hideIndicator(),this._updateView()}r===!this.visualMapModel.get("realtime")&&this.api.dispatchAction({type:"selectDataRange",from:this.uid,visualMapId:this.visualMapModel.id,selected:this._dataInterval.slice()}),r?!this._hovering&&this._clearHoverLinkToSeries():uw(this.visualMapModel)&&this._doHoverLinkToSeries(this._handleEnds[a],!1)}},t.prototype._resetInterval=function(){var a=this.visualMapModel,r=this._dataInterval=a.getSelected(),n=a.getExtent(),i=[0,a.itemSize[1]];this._handleEnds=[cn(r[0],n,i,!0),cn(r[1],n,i,!0)]},t.prototype._updateInterval=function(a,r){r=r||0;var n=this.visualMapModel,i=this._handleEnds,o=[0,n.itemSize[1]];Go(r,i,o,a,0);var s=n.getExtent();this._dataInterval=[cn(i[0],o,s,!0),cn(i[1],o,s,!0)]},t.prototype._updateView=function(a){var r=this.visualMapModel,n=r.getExtent(),i=this._shapes,o=[0,r.itemSize[1]],s=a?o:this._handleEnds,l=this._createBarVisual(this._dataInterval,n,s,"inRange"),c=this._createBarVisual(n,n,o,"outOfRange");i.inRange.setStyle({fill:l.barColor}).setShape("points",l.barPoints),i.outOfRange.setStyle({fill:c.barColor}).setShape("points",c.barPoints),this._updateHandle(s,l)},t.prototype._createBarVisual=function(a,r,n,i){var o={forceState:i,convertOpacityToAlpha:!0},s=this._makeColorGradient(a,o),l=[this.getControllerVisual(a[0],"symbolSize",o),this.getControllerVisual(a[1],"symbolSize",o)],c=this._createBarPoints(n,l);return{barColor:new Wn(0,0,0,1,s),barPoints:c,handlesColor:[s[0].color,s[s.length-1].color]}},t.prototype._makeColorGradient=function(a,r){var n=100,i=[],o=(a[1]-a[0])/n;i.push({color:this.getControllerVisual(a[0],"color",r),offset:0});for(var s=1;s<n;s++){var l=a[0]+o*s;if(l>a[1])break;i.push({color:this.getControllerVisual(l,"color",r),offset:s/n})}return i.push({color:this.getControllerVisual(a[1],"color",r),offset:1}),i},t.prototype._createBarPoints=function(a,r){var n=this.visualMapModel.itemSize;return[[n[0]-r[0],a[0]],[n[0],a[0]],[n[0],a[1]],[n[0]-r[1],a[1]]]},t.prototype._createBarGroup=function(a){var r=this._orient,n=this.visualMapModel.get("inverse");return new ie(r==="horizontal"&&!n?{scaleX:a==="bottom"?1:-1,rotation:Math.PI/2}:r==="horizontal"&&n?{scaleX:a==="bottom"?-1:1,rotation:-Math.PI/2}:r==="vertical"&&!n?{scaleX:a==="left"?1:-1,scaleY:-1}:{scaleX:a==="left"?1:-1})},t.prototype._updateHandle=function(a,r){if(this._useHandle){var n=this._shapes,i=this.visualMapModel,o=n.handleThumbs,s=n.handleLabels,l=i.itemSize,c=i.getExtent(),u=this._applyTransform("left",n.mainGroup);wU([0,1],function(h){var d=o[h];d.setStyle("fill",r.handlesColor[h]),d.y=a[h];var f=cn(a[h],[0,l[1]],c,!0),p=this.getControllerVisual(f,"symbolSize");d.scaleX=d.scaleY=p/l[0],d.x=l[0]-p/2;var g=qn(n.handleLabelPoints[h],ys(d,this.group));if(this._orient==="horizontal"){var v=u==="left"||u==="top"?(l[0]-p)/2:(l[0]-p)/-2;g[1]+=v}s[h].setStyle({x:g[0],y:g[1],text:i.formatValueText(this._dataInterval[h]),verticalAlign:"middle",align:this._orient==="vertical"?this._applyTransform("left",n.mainGroup):"center"})},this)}},t.prototype._showIndicator=function(a,r,n,i){var o=this.visualMapModel,s=o.getExtent(),l=o.itemSize,c=[0,l[1]],u=this._shapes,h=u.indicator;if(h){h.attr("invisible",!1);var d={convertOpacityToAlpha:!0},f=this.getControllerVisual(a,"color",d),p=this.getControllerVisual(a,"symbolSize"),g=cn(a,s,c,!0),v=l[0]-p/2,_={x:h.x,y:h.y};h.y=g,h.x=v;var y=qn(u.indicatorLabelPoint,ys(h,this.group)),b=u.indicatorLabel;b.attr("invisible",!1);var w=this._applyTransform("left",u.mainGroup),T=this._orient,C=T==="horizontal";b.setStyle({text:(n||"")+o.formatValueText(r),verticalAlign:C?w:"middle",align:C?"center":w});var A={x:v,y:g,style:{fill:f}},k={style:{x:y[0],y:y[1]}};if(o.ecModel.isAnimationEnabled()&&!this._firstShowIndicator){var L={duration:100,easing:"cubicInOut",additive:!0};h.x=_.x,h.y=_.y,h.animateTo(A,L),b.animateTo(k,L)}else h.attr(A),b.attr(k);this._firstShowIndicator=!1;var M=this._shapes.handleLabels;if(M)for(var P=0;P<M.length;P++)this.api.enterBlur(M[P])}},t.prototype._enableHoverLinkToSeries=function(){var a=this;this._shapes.mainGroup.on("mousemove",function(r){if(a._hovering=!0,!a._dragging){var n=a.visualMapModel.itemSize,i=a._applyTransform([r.offsetX,r.offsetY],a._shapes.mainGroup,!0,!0);i[1]=lw(Cg(0,i[1]),n[1]),a._doHoverLinkToSeries(i[1],0<=i[0]&&i[0]<=n[0])}}).on("mouseout",function(){a._hovering=!1,!a._dragging&&a._clearHoverLinkToSeries()})},t.prototype._enableHoverLinkFromSeries=function(){var a=this.api.getZr();this.visualMapModel.option.hoverLink?(a.on("mouseover",this._hoverLinkFromSeriesMouseOver,this),a.on("mouseout",this._hideIndicator,this)):this._clearHoverLinkFromSeries()},t.prototype._doHoverLinkToSeries=function(a,r){var n=this.visualMapModel,i=n.itemSize;if(n.option.hoverLink){var o=[0,i[1]],s=n.getExtent();a=lw(Cg(o[0],a),o[1]);var l=kU(n,s,o),c=[a-l,a+l],u=cn(a,o,s,!0),h=[cn(c[0],o,s,!0),cn(c[1],o,s,!0)];c[0]<o[0]&&(h[0]=-1/0),c[1]>o[1]&&(h[1]=1/0),r&&(h[0]===-1/0?this._showIndicator(u,h[1],"< ",l):h[1]===1/0?this._showIndicator(u,h[0],"> ",l):this._showIndicator(u,u,"≈ ",l));var d=this._hoverLinkDataIndices,f=[];(r||uw(n))&&(f=this._hoverLinkDataIndices=n.findTargetDataIndices(h));var p=cO(d,f);this._dispatchHighDown("downplay",Sh(p[0],n)),this._dispatchHighDown("highlight",Sh(p[1],n))}},t.prototype._hoverLinkFromSeriesMouseOver=function(a){var r;if(fy(a.target,function(l){var c=Ae(l);if(c.dataIndex!=null)return r=c,!0},!0),!!r){var n=this.ecModel.getSeriesByIndex(r.seriesIndex),i=this.visualMapModel;if(i.isTargetSeries(n)){var o=n.getData(r.dataType),s=o.getStore().get(i.getDataDimensionIndex(o),r.dataIndex);isNaN(s)||this._showIndicator(s,s)}}},t.prototype._hideIndicator=function(){var a=this._shapes;a.indicator&&a.indicator.attr("invisible",!0),a.indicatorLabel&&a.indicatorLabel.attr("invisible",!0);var r=this._shapes.handleLabels;if(r)for(var n=0;n<r.length;n++)this.api.leaveBlur(r[n])},t.prototype._clearHoverLinkToSeries=function(){this._hideIndicator();var a=this._hoverLinkDataIndices;this._dispatchHighDown("downplay",Sh(a,this.visualMapModel)),a.length=0},t.prototype._clearHoverLinkFromSeries=function(){this._hideIndicator();var a=this.api.getZr();a.off("mouseover",this._hoverLinkFromSeriesMouseOver),a.off("mouseout",this._hideIndicator)},t.prototype._applyTransform=function(a,r,n,i){var o=ys(r,i?null:this.group);return Nt(a)?qn(a,o,n):py(a,o,n)},t.prototype._dispatchHighDown=function(a,r){r&&r.length&&this.api.dispatchAction({type:a,batch:r})},t.prototype.dispose=function(){this._clearHoverLinkFromSeries(),this._clearHoverLinkToSeries()},t.type="visualMap.continuous",t}(bD);function cw(e,t,a,r){return new Br({shape:{points:e},draggable:!!a,cursor:t,drift:a,onmousemove:function(n){Mi(n.event)},ondragend:r})}function kU(e,t,a){var r=CU/2,n=e.get("hoverLinkDataSize");return n&&(r=cn(n,t,a,!0)/2),r}function uw(e){var t=e.get("hoverLinkOnHandle");return!!(t??e.get("realtime"))}function hw(e){return e==="vertical"?"ns-resize":"ew-resize"}var DU={type:"selectDataRange",event:"dataRangeSelected",update:"update"},LU=function(e,t){t.eachComponent({mainType:"visualMap",query:e},function(a){a.setSelected(e.selected)})},IU=[{createOnAllSeries:!0,reset:function(e,t){var a=[];return t.eachComponent("visualMap",function(r){var n=e.pipelineContext;!r.isTargetSeries(e)||n&&n.large||a.push(rq(r.stateList,r.targetVisuals,Ut(r.getValueState,r),r.getDataDimensionIndex(e.getData())))}),a}},{createOnAllSeries:!0,reset:function(e,t){var a=e.getData(),r=[];t.eachComponent("visualMap",function(n){if(n.isTargetSeries(e)){var i=n.getVisualMeta(Ut(MU,null,e,n))||{stops:[],outerColors:[]},o=n.getDataDimensionIndex(a);o>=0&&(i.dimension=o,r.push(i))}}),e.getData().setVisual("visualMeta",r)}}];function MU(e,t,a,r){for(var n=t.targetVisuals[r],i=Ta.prepareVisualTypes(n),o={color:yf(e.getData(),"color")},s=0,l=i.length;s<l;s++){var c=i[s],u=n[c==="opacity"?"__alphaForOpacity":c];u&&u.applyVisual(a,h,d)}return o.color;function h(f){return o[f]}function d(f,p){o[f]=p}}var dw=G;function EU(e){var t=e&&e.visualMap;Nt(t)||(t=t?[t]:[]),dw(t,function(a){if(a){Jo(a,"splitList")&&!Jo(a,"pieces")&&(a.pieces=a.splitList,delete a.splitList);var r=a.pieces;r&&Nt(r)&&dw(r,function(n){na(n)&&(Jo(n,"start")&&!Jo(n,"min")&&(n.min=n.start),Jo(n,"end")&&!Jo(n,"max")&&(n.max=n.end))})}})}function Jo(e,t){return e&&e.hasOwnProperty&&e.hasOwnProperty(t)}var fw=!1;function SD(e){fw||(fw=!0,e.registerSubTypeDefaulter("visualMap",function(t){return!t.categories&&(!(t.pieces?t.pieces.length>0:t.splitNumber>0)||t.calculable)?"continuous":"piecewise"}),e.registerAction(DU,LU),G(IU,function(t){e.registerVisual(e.PRIORITY.VISUAL.COMPONENT,t)}),e.registerPreprocessor(EU))}function wD(e){e.registerComponentModel(SU),e.registerComponentView(AU),SD(e)}var RU=function(e){gt(t,e);function t(){var a=e!==null&&e.apply(this,arguments)||this;return a.type=t.type,a._pieceList=[],a}return t.prototype.optionUpdated=function(a,r){e.prototype.optionUpdated.apply(this,arguments),this.resetExtent();var n=this._mode=this._determineMode();this._pieceList=[],PU[this._mode].call(this,this._pieceList),this._resetSelected(a,r);var i=this.option.categories;this.resetVisual(function(o,s){n==="categories"?(o.mappingMethod="category",o.categories=Pe(i)):(o.dataExtent=this.getExtent(),o.mappingMethod="piecewise",o.pieceList=Ot(this._pieceList,function(l){return l=Pe(l),s!=="inRange"&&(l.visual=null),l}))})},t.prototype.completeVisualOption=function(){var a=this.option,r={},n=Ta.listVisualTypes(),i=this.isCategory();G(a.pieces,function(s){G(n,function(l){s.hasOwnProperty(l)&&(r[l]=1)})}),G(r,function(s,l){var c=!1;G(this.stateList,function(u){c=c||o(a,u,l)||o(a.target,u,l)},this),!c&&G(this.stateList,function(u){(a[u]||(a[u]={}))[l]=_D.get(l,u==="inRange"?"active":"inactive",i)})},this);function o(s,l,c){return s&&s[l]&&s[l].hasOwnProperty(c)}e.prototype.completeVisualOption.apply(this,arguments)},t.prototype._resetSelected=function(a,r){var n=this.option,i=this._pieceList,o=(r?n:a).selected||{};if(n.selected=o,G(i,function(l,c){var u=this.getSelectedMapKey(l);o.hasOwnProperty(u)||(o[u]=!0)},this),n.selectedMode==="single"){var s=!1;G(i,function(l,c){var u=this.getSelectedMapKey(l);o[u]&&(s?o[u]=!1:s=!0)},this)}},t.prototype.getItemSymbol=function(){return this.get("itemSymbol")},t.prototype.getSelectedMapKey=function(a){return this._mode==="categories"?a.value+"":a.index+""},t.prototype.getPieceList=function(){return this._pieceList},t.prototype._determineMode=function(){var a=this.option;return a.pieces&&a.pieces.length>0?"pieces":this.option.categories?"categories":"splitNumber"},t.prototype.setSelected=function(a){this.option.selected=Pe(a)},t.prototype.getValueState=function(a){var r=Ta.findPieceIndex(a,this._pieceList);return r!=null&&this.option.selected[this.getSelectedMapKey(this._pieceList[r])]?"inRange":"outOfRange"},t.prototype.findTargetDataIndices=function(a){var r=[],n=this._pieceList;return this.eachTargetSeries(function(i){var o=[],s=i.getData();s.each(this.getDataDimensionIndex(s),function(l,c){var u=Ta.findPieceIndex(l,n);u===a&&o.push(c)},this),r.push({seriesId:i.id,dataIndex:o})},this),r},t.prototype.getRepresentValue=function(a){var r;if(this.isCategory())r=a.value;else if(a.value!=null)r=a.value;else{var n=a.interval||[];r=n[0]===-1/0&&n[1]===1/0?0:(n[0]+n[1])/2}return r},t.prototype.getVisualMeta=function(a){if(this.isCategory())return;var r=[],n=["",""],i=this;function o(u,h){var d=i.getRepresentValue({interval:u});h||(h=i.getValueState(d));var f=a(d,h);u[0]===-1/0?n[0]=f:u[1]===1/0?n[1]=f:r.push({value:u[0],color:f},{value:u[1],color:f})}var s=this._pieceList.slice();if(!s.length)s.push({interval:[-1/0,1/0]});else{var l=s[0].interval[0];l!==-1/0&&s.unshift({interval:[-1/0,l]}),l=s[s.length-1].interval[1],l!==1/0&&s.push({interval:[l,1/0]})}var c=-1/0;return G(s,function(u){var h=u.interval;h&&(h[0]>c&&o([c,h[0]],"outOfRange"),o(h.slice()),c=h[1])},this),{stops:r,outerColors:n}},t.type="visualMap.piecewise",t.defaultOption=zi(gd.defaultOption,{selected:null,minOpen:!1,maxOpen:!1,align:"auto",itemWidth:20,itemHeight:14,itemSymbol:"roundRect",pieces:null,categories:null,splitNumber:5,selectedMode:"multiple",itemGap:10,hoverLink:!0}),t}(gd),PU={splitNumber:function(e){var t=this.option,a=Math.min(t.precision,20),r=this.getExtent(),n=t.splitNumber;n=Math.max(parseInt(n,10),1),t.splitNumber=n;for(var i=(r[1]-r[0])/n;+i.toFixed(a)!==i&&a<5;)a++;t.precision=a,i=+i.toFixed(a),t.minOpen&&e.push({interval:[-1/0,r[0]],close:[0,0]});for(var o=0,s=r[0];o<n;s+=i,o++){var l=o===n-1?r[1]:s+i;e.push({interval:[s,l],close:[1,1]})}t.maxOpen&&e.push({interval:[r[1],1/0],close:[0,0]}),h1(e),G(e,function(c,u){c.index=u,c.text=this.formatValueText(c.interval)},this)},categories:function(e){var t=this.option;G(t.categories,function(a){e.push({text:this.formatValueText(a,!0),value:a})},this),pw(t,e)},pieces:function(e){var t=this.option;G(t.pieces,function(a,r){na(a)||(a={value:a});var n={text:"",index:r};if(a.label!=null&&(n.text=a.label),a.hasOwnProperty("value")){var i=n.value=a.value;n.interval=[i,i],n.close=[1,1]}else{for(var o=n.interval=[],s=n.close=[0,0],l=[1,0,1],c=[-1/0,1/0],u=[],h=0;h<2;h++){for(var d=[["gte","gt","min"],["lte","lt","max"]][h],f=0;f<3&&o[h]==null;f++)o[h]=a[d[f]],s[h]=l[f],u[h]=f===2;o[h]==null&&(o[h]=c[h])}u[0]&&o[1]===1/0&&(s[0]=0),u[1]&&o[0]===-1/0&&(s[1]=0),o[0]===o[1]&&s[0]&&s[1]&&(n.value=o[0])}n.visual=Ta.retrieveVisuals(a),e.push(n)},this),pw(t,e),h1(e),G(e,function(a){var r=a.close,n=[["<","≤"][r[1]],[">","≥"][r[0]]];a.text=a.text||this.formatValueText(a.value!=null?a.value:a.interval,!1,n)},this)}};function pw(e,t){var a=e.inverse;(e.orient==="vertical"?!a:a)&&t.reverse()}var BU=function(e){gt(t,e);function t(){var a=e!==null&&e.apply(this,arguments)||this;return a.type=t.type,a}return t.prototype.doRender=function(){var a=this.group;a.removeAll();var r=this.visualMapModel,n=r.get("textGap"),i=r.textStyleModel,o=i.getFont(),s=i.getTextColor(),l=this._getItemAlign(),c=r.itemSize,u=this._getViewData(),h=u.endsText,d=Ma(r.get("showLabel",!0),!h),f=!r.get("selectedMode");h&&this._renderEndsText(a,h[0],c,d,l),G(u.viewPieceList,function(p){var g=p.piece,v=new ie;v.onclick=Ut(this._onItemClick,this,g),this._enableHoverLink(v,p.indexInModelPieceList);var _=r.getRepresentValue(g);if(this._createItemSymbol(v,_,[0,0,c[0],c[1]],f),d){var y=this.visualMapModel.getValueState(_);v.add(new Oe({style:{x:l==="right"?-n:c[0]+n,y:c[1]/2,text:g.text,verticalAlign:"middle",align:l,font:o,fill:s,opacity:y==="outOfRange"?.5:1},silent:f}))}a.add(v)},this),h&&this._renderEndsText(a,h[1],c,d,l),mo(r.get("orient"),a,r.get("itemGap")),this.renderBackground(a),this.positionGroup(a)},t.prototype._enableHoverLink=function(a,r){var n=this;a.on("mouseover",function(){return i("highlight")}).on("mouseout",function(){return i("downplay")});var i=function(o){var s=n.visualMapModel;s.option.hoverLink&&n.api.dispatchAction({type:o,batch:Sh(s.findTargetDataIndices(r),s)})}},t.prototype._getItemAlign=function(){var a=this.visualMapModel,r=a.option;if(r.orient==="vertical")return xD(a,this.api,a.itemSize);var n=r.align;return(!n||n==="auto")&&(n="left"),n},t.prototype._renderEndsText=function(a,r,n,i,o){if(r){var s=new ie,l=this.visualMapModel.textStyleModel;s.add(new Oe({style:Ke(l,{x:i?o==="right"?n[0]:0:n[0]/2,y:n[1]/2,verticalAlign:"middle",align:i?o:"center",text:r})})),a.add(s)}},t.prototype._getViewData=function(){var a=this.visualMapModel,r=Ot(a.getPieceList(),function(s,l){return{piece:s,indexInModelPieceList:l}}),n=a.get("text"),i=a.get("orient"),o=a.get("inverse");return(i==="horizontal"?o:!o)?r.reverse():n&&(n=n.slice().reverse()),{viewPieceList:r,endsText:n}},t.prototype._createItemSymbol=function(a,r,n,i){var o=ba(this.getControllerVisual(r,"symbol"),n[0],n[1],n[2],n[3],this.getControllerVisual(r,"color"));o.silent=i,a.add(o)},t.prototype._onItemClick=function(a){var r=this.visualMapModel,n=r.option,i=n.selectedMode;if(i){var o=Pe(n.selected),s=r.getSelectedMapKey(a);i==="single"||i===!0?(o[s]=!0,G(o,function(l,c){o[c]=c===s})):o[s]=!o[s],this.api.dispatchAction({type:"selectDataRange",from:this.uid,visualMapId:this.visualMapModel.id,selected:o})}},t.type="visualMap.piecewise",t}(bD);function CD(e){e.registerComponentModel(RU),e.registerComponentView(BU),SD(e)}function TD(e){ue(wD),ue(CD)}var OU={label:{enabled:!0},decal:{show:!1}},gw=ia(),NU={};function $U(e,t){var a=e.getModel("aria");if(!a.get("enabled"))return;var r=Pe(OU);Be(r.label,e.getLocaleModel().get("aria"),!1),Be(a.option,r,!1),n(),i();function n(){var c=a.getModel("decal"),u=c.get("show");if(u){var h=ke();e.eachSeries(function(d){if(!d.isColorBySeries()){var f=h.get(d.type);f||(f={},h.set(d.type,f)),gw(d).scope=f}}),e.eachRawSeries(function(d){if(e.isSeriesFiltered(d))return;if(Me(d.enableAriaDecal)){d.enableAriaDecal();return}var f=d.getData();if(d.isColorBySeries()){var y=lv(d.ecModel,d.name,NU,e.getSeriesCount()),b=f.getVisual("decal");f.setVisual("decal",w(b,y))}else{var p=d.getRawData(),g={},v=gw(d).scope;f.each(function(T){var C=f.getRawIndex(T);g[C]=T});var _=p.count();p.each(function(T){var C=g[T],A=p.getName(T)||T+"",k=lv(d.ecModel,A,v,_),L=f.getItemVisual(C,"decal");f.setItemVisual(C,"decal",w(L,k))})}function w(T,C){var A=T?Vt(Vt({},C),T):C;return A.dirty=!0,A}})}}function i(){var c=t.getZr().dom;if(c){var u=e.getLocaleModel().get("aria"),h=a.getModel("label");if(h.option=_e(h.option,u),!!h.get("enabled")){if(c.setAttribute("role","img"),h.get("description")){c.setAttribute("aria-label",h.get("description"));return}var d=e.getSeriesCount(),f=h.get(["data","maxCount"])||10,p=h.get(["series","maxCount"])||10,g=Math.min(d,p),v;if(!(d<1)){var _=s();if(_){var y=h.get(["general","withTitle"]);v=o(y,{title:_})}else v=h.get(["general","withoutTitle"]);var b=[],w=d>1?h.get(["series","multiple","prefix"]):h.get(["series","single","prefix"]);v+=o(w,{seriesCount:d}),e.eachSeries(function(k,L){if(L<g){var M=void 0,P=k.get("name"),E=P?"withName":"withoutName";M=d>1?h.get(["series","multiple",E]):h.get(["series","single",E]),M=o(M,{seriesId:k.seriesIndex,seriesName:k.get("name"),seriesType:l(k.subType)});var D=k.getData();if(D.count()>f){var O=h.get(["data","partialData"]);M+=o(O,{displayCnt:f})}else M+=h.get(["data","allData"]);for(var B=h.get(["data","separator","middle"]),R=h.get(["data","separator","end"]),V=h.get(["data","excludeDimensionId"]),z=[],W=0;W<D.count();W++)if(W<f){var it=D.getName(W),ot=V?Va(D.getValues(W),function(j,mt){return Xe(V,mt)===-1}):D.getValues(W),xt=h.get(["data",it?"withName":"withoutName"]);z.push(o(xt,{name:it,value:ot.join(B)}))}M+=z.join(B)+R,b.push(M)}});var T=h.getModel(["series","multiple","separator"]),C=T.get("middle"),A=T.get("end");v+=b.join(C)+A,c.setAttribute("aria-label",v)}}}}function o(c,u){if(!ge(c))return c;var h=c;return G(u,function(d,f){h=h.replace(new RegExp("\\{\\s*"+f+"\\s*\\}","g"),d)}),h}function s(){var c=e.get("title");return c&&c.length&&(c=c[0]),c&&c.text}function l(c){var u=e.getLocaleModel().get(["series","typeNames"]);return u[c]||u.chart}}function FU(e){if(!(!e||!e.aria)){var t=e.aria;t.show!=null&&(t.enabled=t.show),t.label=t.label||{},G(["description","general","series","data"],function(a){t[a]!=null&&(t.label[a]=t[a])})}}function zU(e){e.registerPreprocessor(FU),e.registerVisual(e.PRIORITY.VISUAL.ARIA,$U)}var vw={value:"eq","<":"lt","<=":"lte",">":"gt",">=":"gte","=":"eq","!=":"ne","<>":"ne"},VU=function(){function e(t){var a=this._condVal=ge(t)?new RegExp(t):hO(t)?t:null;if(a==null){var r="";ua(r)}}return e.prototype.evaluate=function(t){var a=typeof t;return ge(a)?this._condVal.test(t):Ea(a)?this._condVal.test(t+""):!1},e}(),GU=function(){function e(){}return e.prototype.evaluate=function(){return this.value},e}(),HU=function(){function e(){}return e.prototype.evaluate=function(){for(var t=this.children,a=0;a<t.length;a++)if(!t[a].evaluate())return!1;return!0},e}(),WU=function(){function e(){}return e.prototype.evaluate=function(){for(var t=this.children,a=0;a<t.length;a++)if(t[a].evaluate())return!0;return!1},e}(),qU=function(){function e(){}return e.prototype.evaluate=function(){return!this.child.evaluate()},e}(),UU=function(){function e(){}return e.prototype.evaluate=function(){for(var t=!!this.valueParser,a=this.getValue,r=a(this.valueGetterParam),n=t?this.valueParser(r):null,i=0;i<this.subCondList.length;i++)if(!this.subCondList[i].evaluate(t?n:r))return!1;return!0},e}();function x0(e,t){if(e===!0||e===!1){var a=new GU;return a.value=e,a}var r="";return AD(e)||ua(r),e.and?mw("and",e,t):e.or?mw("or",e,t):e.not?jU(e,t):YU(e,t)}function mw(e,t,a){var r=t[e],n="";Nt(r)||ua(n),r.length||ua(n);var i=e==="and"?new HU:new WU;return i.children=Ot(r,function(o){return x0(o,a)}),i.children.length||ua(n),i}function jU(e,t){var a=e.not,r="";AD(a)||ua(r);var n=new qU;return n.child=x0(a,t),n.child||ua(r),n}function YU(e,t){for(var a="",r=t.prepareGetValue(e),n=[],i=pa(e),o=e.parser,s=o?AT(o):null,l=0;l<i.length;l++){var c=i[l];if(!(c==="parser"||t.valueGetterAttrMap.get(c))){var u=Ht(vw,c)?vw[c]:c,h=e[c],d=s?s(h):h,f=uO(u,d)||u==="reg"&&new VU(d);f||ua(a),n.push(f)}}n.length||ua(a);var p=new UU;return p.valueGetterParam=r,p.valueParser=s,p.getValue=t.getValue,p.subCondList=n,p}function AD(e){return na(e)&&!vT(e)}var XU=function(){function e(t,a){this._cond=x0(t,a)}return e.prototype.evaluate=function(){return this._cond.evaluate()},e}();function ZU(e,t){return new XU(e,t)}var KU={type:"echarts:filter",transform:function(e){for(var t=e.upstream,a,r=ZU(e.config,{valueGetterAttrMap:ke({dimension:!0}),prepareGetValue:function(s){var l="",c=s.dimension;Ht(s,"dimension")||ua(l);var u=t.getDimensionInfo(c);return u||ua(l),{dimIdx:u.index}},getValue:function(s){return t.retrieveValueFromItem(a,s.dimIdx)}}),n=[],i=0,o=t.count();i<o;i++)a=t.getRawDataItem(i),r.evaluate()&&n.push(a);return{data:n}}},JU={type:"echarts:sort",transform:function(e){var t=e.upstream,a=e.config,r="",n=nr(a);n.length||ua(r);var i=[];G(n,function(u){var h=u.dimension,d=u.order,f=u.parser,p=u.incomparable;if(h==null&&ua(r),d!=="asc"&&d!=="desc"&&ua(r),p&&p!=="min"&&p!=="max"){var g="";ua(g)}if(d!=="asc"&&d!=="desc"){var v="";ua(v)}var _=t.getDimensionInfo(h);_||ua(r);var y=f?AT(f):null;f&&!y&&ua(r),i.push({dimIdx:_.index,parser:y,comparator:new dO(d,p)})});var o=t.sourceFormat;o!==gT&&o!==fO&&ua(r);for(var s=[],l=0,c=t.count();l<c;l++)s.push(t.getRawDataItem(l));return s.sort(function(u,h){for(var d=0;d<i.length;d++){var f=i[d],p=t.retrieveValueFromItem(u,f.dimIdx),g=t.retrieveValueFromItem(h,f.dimIdx);f.parser&&(p=f.parser(p),g=f.parser(g));var v=f.comparator.evaluate(p,g);if(v!==0)return v}return 0}),{data:s}}};function Lf(e){e.registerTransform(KU),e.registerTransform(JU)}var QU=function(e){gt(t,e);function t(){var a=e!==null&&e.apply(this,arguments)||this;return a.type="dataset",a}return t.prototype.init=function(a,r,n){e.prototype.init.call(this,a,r,n),this._sourceManager=new pO(this),d1(this)},t.prototype.mergeOption=function(a,r){e.prototype.mergeOption.call(this,a,r),d1(this)},t.prototype.optionUpdated=function(){this._sourceManager.dirty()},t.prototype.getSourceManager=function(){return this._sourceManager},t.type="dataset",t.defaultOption={seriesLayoutBy:gO},t}(da),tj=function(e){gt(t,e);function t(){var a=e!==null&&e.apply(this,arguments)||this;return a.type="dataset",a}return t.type="dataset",t}(ma);function _u(e){e.registerComponentModel(QU),e.registerComponentView(tj)}var Tg=Math.sin,Ag=Math.cos,kD=Math.PI,Wi=Math.PI*2,ej=180/kD,DD=function(){function e(){}return e.prototype.reset=function(t){this._start=!0,this._d=[],this._str="",this._p=Math.pow(10,t||4)},e.prototype.moveTo=function(t,a){this._add("M",t,a)},e.prototype.lineTo=function(t,a){this._add("L",t,a)},e.prototype.bezierCurveTo=function(t,a,r,n,i,o){this._add("C",t,a,r,n,i,o)},e.prototype.quadraticCurveTo=function(t,a,r,n){this._add("Q",t,a,r,n)},e.prototype.arc=function(t,a,r,n,i,o){this.ellipse(t,a,r,r,0,n,i,o)},e.prototype.ellipse=function(t,a,r,n,i,o,s,l){var c=s-o,u=!l,h=Math.abs(c),d=Si(h-Wi)||(u?c>=Wi:-c>=Wi),f=c>0?c%Wi:c%Wi+Wi,p=!1;d?p=!0:Si(h)?p=!1:p=f>=kD==!!u;var g=t+r*Ag(o),v=a+n*Tg(o);this._start&&this._add("M",g,v);var _=Math.round(i*ej);if(d){var y=1/this._p,b=(u?1:-1)*(Wi-y);this._add("A",r,n,_,1,+u,t+r*Ag(o+b),a+n*Tg(o+b)),y>.01&&this._add("A",r,n,_,0,+u,g,v)}else{var w=t+r*Ag(s),T=a+n*Tg(s);this._add("A",r,n,_,+p,+u,w,T)}},e.prototype.rect=function(t,a,r,n){this._add("M",t,a),this._add("l",r,0),this._add("l",0,n),this._add("l",-r,0),this._add("Z")},e.prototype.closePath=function(){this._d.length>0&&this._add("Z")},e.prototype._add=function(t,a,r,n,i,o,s,l,c){for(var u=[],h=this._p,d=1;d<arguments.length;d++){var f=arguments[d];if(isNaN(f)){this._invalid=!0;return}u.push(Math.round(f*h)/h)}this._d.push(t+u.join(" ")),this._start=t==="Z"},e.prototype.generateStr=function(){this._str=this._invalid?"":this._d.join(""),this._d=[]},e.prototype.getStr=function(){return this._str},e}(),S0="none",aj=Math.round;function rj(e){var t=e.fill;return t!=null&&t!==S0}function nj(e){var t=e.stroke;return t!=null&&t!==S0}var em=["lineCap","miterLimit","lineJoin"],ij=Ot(em,function(e){return"stroke-"+e.toLowerCase()});function oj(e,t,a,r){var n=t.opacity==null?1:t.opacity;if(a instanceof Zr){e("opacity",n);return}if(rj(t)){var i=Mc(t.fill);e("fill",i.color);var o=t.fillOpacity!=null?t.fillOpacity*i.opacity*n:i.opacity*n;o<1&&e("fill-opacity",o)}else e("fill",S0);if(nj(t)){var s=Mc(t.stroke);e("stroke",s.color);var l=t.strokeNoScale?a.getLineScale():1,c=l?(t.lineWidth||0)/l:0,u=t.strokeOpacity!=null?t.strokeOpacity*s.opacity*n:s.opacity*n,h=t.strokeFirst;if(c!==1&&e("stroke-width",c),h&&e("paint-order",h?"stroke":"fill"),u<1&&e("stroke-opacity",u),t.lineDash){var d=vO(a),f=d[0],p=d[1];f&&(p=aj(p||0),e("stroke-dasharray",f.join(",")),(p||r)&&e("stroke-dashoffset",p))}for(var g=0;g<em.length;g++){var v=em[g];if(t[v]!==f1[v]){var _=t[v]||f1[v];_&&e(ij[g],_)}}}}var LD="http://www.w3.org/2000/svg",ID="http://www.w3.org/1999/xlink",sj="http://www.w3.org/2000/xmlns/",lj="http://www.w3.org/XML/1998/namespace",yw="ecmeta_";function MD(e){return document.createElementNS(LD,e)}function Ca(e,t,a,r,n){return{tag:e,attrs:a||{},children:r,text:n,key:t}}function cj(e,t){var a=[];if(t)for(var r in t){var n=t[r],i=r;n!==!1&&(n!==!0&&n!=null&&(i+='="'+n+'"'),a.push(i))}return"<"+e+" "+a.join(" ")+">"}function uj(e){return"</"+e+">"}function w0(e,t){t=t||{};var a=t.newline?`
`:"";function r(n){var i=n.children,o=n.tag,s=n.attrs,l=n.text;return cj(o,s)+(o!=="style"?wT(l):l||"")+(i?""+a+Ot(i,function(c){return r(c)}).join(a)+a:"")+uj(o)}return r(e)}function hj(e,t,a){a=a||{};var r=a.newline?`
`:"",n=" {"+r,i=r+"}",o=Ot(pa(e),function(l){return l+n+Ot(pa(e[l]),function(c){return c+":"+e[l][c]+";"}).join(r)+i}).join(r),s=Ot(pa(t),function(l){return"@keyframes "+l+n+Ot(pa(t[l]),function(c){return c+n+Ot(pa(t[l][c]),function(u){var h=t[l][c][u];return u==="d"&&(h='path("'+h+'")'),u+":"+h+";"}).join(r)+i}).join(r)+i}).join(r);return!o&&!s?"":["<![CDATA[",o,s,"]]>"].join(r)}function am(e){return{zrId:e,shadowCache:{},patternCache:{},gradientCache:{},clipPathCache:{},defs:{},cssNodes:{},cssAnims:{},cssStyleCache:{},cssAnimIdx:0,shadowIdx:0,gradientIdx:0,patternIdx:0,clipPathIdx:0}}function _w(e,t,a,r){return Ca("svg","root",{width:e,height:t,xmlns:LD,"xmlns:xlink":ID,version:"1.1",baseProfile:"full",viewBox:r?"0 0 "+e+" "+t:!1},a)}var dj=0;function ED(){return dj++}var bw={cubicIn:"0.32,0,0.67,0",cubicOut:"0.33,1,0.68,1",cubicInOut:"0.65,0,0.35,1",quadraticIn:"0.11,0,0.5,0",quadraticOut:"0.5,1,0.89,1",quadraticInOut:"0.45,0,0.55,1",quarticIn:"0.5,0,0.75,0",quarticOut:"0.25,1,0.5,1",quarticInOut:"0.76,0,0.24,1",quinticIn:"0.64,0,0.78,0",quinticOut:"0.22,1,0.36,1",quinticInOut:"0.83,0,0.17,1",sinusoidalIn:"0.12,0,0.39,0",sinusoidalOut:"0.61,1,0.88,1",sinusoidalInOut:"0.37,0,0.63,1",exponentialIn:"0.7,0,0.84,0",exponentialOut:"0.16,1,0.3,1",exponentialInOut:"0.87,0,0.13,1",circularIn:"0.55,0,1,0.45",circularOut:"0,0.55,0.45,1",circularInOut:"0.85,0,0.15,1"},Qi="transform-origin";function fj(e,t,a){var r=Vt({},e.shape);Vt(r,t),e.buildPath(a,r);var n=new DD;return n.reset(DT(e)),a.rebuildPath(n,1),n.generateStr(),n.getStr()}function pj(e,t){var a=t.originX,r=t.originY;(a||r)&&(e[Qi]=a+"px "+r+"px")}var gj={fill:"fill",opacity:"opacity",lineWidth:"stroke-width",lineDashOffset:"stroke-dashoffset"};function RD(e,t){var a=t.zrId+"-ani-"+t.cssAnimIdx++;return t.cssAnims[a]=e,a}function vj(e,t,a){var r=e.shape.paths,n={},i,o;if(G(r,function(l){var c=am(a.zrId);c.animation=!0,If(l,{},c,!0);var u=c.cssAnims,h=c.cssNodes,d=pa(u),f=d.length;if(f){o=d[f-1];var p=u[o];for(var g in p){var v=p[g];n[g]=n[g]||{d:""},n[g].d+=v.d||""}for(var _ in h){var y=h[_].animation;y.indexOf(o)>=0&&(i=y)}}}),!!i){t.d=!1;var s=RD(n,a);return i.replace(o,s)}}function xw(e){return ge(e)?bw[e]?"cubic-bezier("+bw[e]+")":mO(e)?e:"":""}function If(e,t,a,r){var n=e.animators,i=n.length,o=[];if(e instanceof lT){var s=vj(e,t,a);if(s)o.push(s);else if(!i)return}else if(!i)return;for(var l={},c=0;c<i;c++){var u=n[c],h=[u.getMaxTime()/1e3+"s"],d=xw(u.getClip().easing),f=u.getDelay();d?h.push(d):h.push("linear"),f&&h.push(f/1e3+"s"),u.getLoop()&&h.push("infinite");var p=h.join(" ");l[p]=l[p]||[p,[]],l[p][1].push(u)}function g(y){var b=y[1],w=b.length,T={},C={},A={},k="animation-timing-function";function L(ut,at,Q){for(var bt=ut.getTracks(),Dt=ut.getMaxTime(),Et=0;Et<bt.length;Et++){var ft=bt[Et];if(ft.needsAnimate()){var $t=ft.keyframes,Pt=ft.propName;if(Q&&(Pt=Q(Pt)),Pt)for(var qt=0;qt<$t.length;qt++){var nt=$t[qt],H=Math.round(nt.time/Dt*100)+"%",tt=xw(nt.easing),Rt=nt.rawValue;(ge(Rt)||Ea(Rt))&&(at[H]=at[H]||{},at[H][Pt]=nt.rawValue,tt&&(at[H][k]=tt))}}}}for(var M=0;M<w;M++){var P=b[M],E=P.targetName;E?E==="shape"&&L(P,C):!r&&L(P,T)}for(var D in T){var O={};yO(O,e),Vt(O,T[D]);var B=kT(O),R=T[D][k];A[D]=B?{transform:B}:{},pj(A[D],O),R&&(A[D][k]=R)}var V,z=!0;for(var D in C){A[D]=A[D]||{};var W=!V,R=C[D][k];W&&(V=new cy);var it=V.len();V.reset(),A[D].d=fj(e,C[D],V);var ot=V.len();if(!W&&it!==ot){z=!1;break}R&&(A[D][k]=R)}if(!z)for(var D in A)delete A[D].d;if(!r)for(var M=0;M<w;M++){var P=b[M],E=P.targetName;E==="style"&&L(P,A,function(bt){return gj[bt]})}for(var xt=pa(A),j=!0,mt,M=1;M<xt.length;M++){var Tt=xt[M-1],Mt=xt[M];if(A[Tt][Qi]!==A[Mt][Qi]){j=!1;break}mt=A[Tt][Qi]}if(j&&mt){for(var D in A)A[D][Qi]&&delete A[D][Qi];t[Qi]=mt}if(Va(xt,function(ut){return pa(A[ut]).length>0}).length){var et=RD(A,a);return et+" "+y[0]+" both"}}for(var v in l){var s=g(l[v]);s&&o.push(s)}if(o.length){var _=a.zrId+"-cls-"+ED();a.cssNodes["."+_]={animation:o.join(",")},t.class=_}}function mj(e,t,a){if(!e.ignore)if(e.isSilent()){var r={"pointer-events":"none"};Sw(r,t,a)}else{var n=e.states.emphasis&&e.states.emphasis.style?e.states.emphasis.style:{},i=n.fill;if(!i){var o=e.style&&e.style.fill,s=e.states.select&&e.states.select.style&&e.states.select.style.fill,l=e.currentStates.indexOf("select")>=0&&s||o;l&&(i=_O(l))}var c=n.lineWidth;if(c){var u=!n.strokeNoScale&&e.transform?e.transform[0]:1;c=c/u}var r={cursor:"pointer"};i&&(r.fill=i),n.stroke&&(r.stroke=n.stroke),c&&(r["stroke-width"]=c),Sw(r,t,a)}}function Sw(e,t,a,r){var n=JSON.stringify(e),i=a.cssStyleCache[n];i||(i=a.zrId+"-cls-"+ED(),a.cssStyleCache[n]=i,a.cssNodes["."+i+":hover"]=e),t.class=t.class?t.class+" "+i:i}var Wc=Math.round;function PD(e){return e&&ge(e.src)}function BD(e){return e&&Me(e.toDataURL)}function C0(e,t,a,r){oj(function(n,i){var o=n==="fill"||n==="stroke";o&&LT(i)?ND(t,e,n,r):o&&my(i)?$D(a,e,n,r):e[n]=i,o&&r.ssr&&i==="none"&&(e["pointer-events"]="visible")},t,a,!1),Cj(a,e,r)}function T0(e,t){var a=RO(t);a&&(a.each(function(r,n){r!=null&&(e[(yw+n).toLowerCase()]=r+"")}),t.isSilent()&&(e[yw+"silent"]="true"))}function ww(e){return Si(e[0]-1)&&Si(e[1])&&Si(e[2])&&Si(e[3]-1)}function yj(e){return Si(e[4])&&Si(e[5])}function A0(e,t,a){if(t&&!(yj(t)&&ww(t))){var r=1e4;e.transform=ww(t)?"translate("+Wc(t[4]*r)/r+" "+Wc(t[5]*r)/r+")":EO(t)}}function Cw(e,t,a){for(var r=e.points,n=[],i=0;i<r.length;i++)n.push(Wc(r[i][0]*a)/a),n.push(Wc(r[i][1]*a)/a);t.points=n.join(" ")}function Tw(e){return!e.smooth}function _j(e){var t=Ot(e,function(a){return typeof a=="string"?[a,a]:a});return function(a,r,n){for(var i=0;i<t.length;i++){var o=t[i],s=a[o[0]];s!=null&&(r[o[1]]=Wc(s*n)/n)}}}var bj={circle:[_j(["cx","cy","r"])],polyline:[Cw,Tw],polygon:[Cw,Tw]};function xj(e){for(var t=e.animators,a=0;a<t.length;a++)if(t[a].targetName==="shape")return!0;return!1}function OD(e,t){var a=e.style,r=e.shape,n=bj[e.type],i={},o=t.animation,s="path",l=e.style.strokePercent,c=t.compress&&DT(e)||4;if(n&&!t.willUpdate&&!(n[1]&&!n[1](r))&&!(o&&xj(e))&&!(l<1)){s=e.type;var u=Math.pow(10,c);n[0](r,i,u)}else{var h=!e.path||e.shapeChanged();e.path||e.createPathProxy();var d=e.path;h&&(d.beginPath(),e.buildPath(d,e.shape),e.pathUpdated());var f=d.getVersion(),p=e,g=p.__svgPathBuilder;(p.__svgPathVersion!==f||!g||l!==p.__svgPathStrokePercent)&&(g||(g=p.__svgPathBuilder=new DD),g.reset(c),d.rebuildPath(g,l),g.generateStr(),p.__svgPathVersion=f,p.__svgPathStrokePercent=l),i.d=g.getStr()}return A0(i,e.transform),C0(i,a,e,t),T0(i,e),t.animation&&If(e,i,t),t.emphasis&&mj(e,i,t),Ca(s,e.id+"",i)}function Sj(e,t){var a=e.style,r=a.image;if(r&&!ge(r)&&(PD(r)?r=r.src:BD(r)&&(r=r.toDataURL())),!!r){var n=a.x||0,i=a.y||0,o=a.width,s=a.height,l={href:r,width:o,height:s};return n&&(l.x=n),i&&(l.y=i),A0(l,e.transform),C0(l,a,e,t),T0(l,e),t.animation&&If(e,l,t),Ca("image",e.id+"",l)}}function wj(e,t){var a=e.style,r=a.text;if(r!=null&&(r+=""),!(!r||isNaN(a.x)||isNaN(a.y))){var n=a.font||bO,i=a.x||0,o=xO(a.y||0,SO(n),a.textBaseline),s=wO[a.textAlign]||a.textAlign,l={"dominant-baseline":"central","text-anchor":s};if(CO(a)){var c="",u=a.fontStyle,h=TO(a.fontSize);if(!parseFloat(h))return;var d=a.fontFamily||AO,f=a.fontWeight;c+="font-size:"+h+";font-family:"+d+";",u&&u!=="normal"&&(c+="font-style:"+u+";"),f&&f!=="normal"&&(c+="font-weight:"+f+";"),l.style=c}else l.style="font: "+n;return r.match(/\s/)&&(l["xml:space"]="preserve"),i&&(l.x=i),o&&(l.y=o),A0(l,e.transform),C0(l,a,e,t),T0(l,e),t.animation&&If(e,l,t),Ca("text",e.id+"",l,void 0,r)}}function Aw(e,t){if(e instanceof va)return OD(e,t);if(e instanceof Zr)return Sj(e,t);if(e instanceof nT)return wj(e,t)}function Cj(e,t,a){var r=e.style;if(PO(r)){var n=BO(e),i=a.shadowCache,o=i[n];if(!o){var s=e.getGlobalScale(),l=s[0],c=s[1];if(!l||!c)return;var u=r.shadowOffsetX||0,h=r.shadowOffsetY||0,d=r.shadowBlur,f=Mc(r.shadowColor),p=f.opacity,g=f.color,v=d/2/l,_=d/2/c,y=v+" "+_;o=a.zrId+"-s"+a.shadowIdx++,a.defs[o]=Ca("filter",o,{id:o,x:"-100%",y:"-100%",width:"300%",height:"300%"},[Ca("feDropShadow","",{dx:u/l,dy:h/c,stdDeviation:y,"flood-color":g,"flood-opacity":p})]),i[n]=o}t.filter=_f(o)}}function ND(e,t,a,r){var n=e[a],i,o={gradientUnits:n.global?"userSpaceOnUse":"objectBoundingBox"};if(kO(n))i="linearGradient",o.x1=n.x,o.y1=n.y,o.x2=n.x2,o.y2=n.y2;else if(DO(n))i="radialGradient",o.cx=sa(n.x,.5),o.cy=sa(n.y,.5),o.r=sa(n.r,.5);else return;for(var s=n.colorStops,l=[],c=0,u=s.length;c<u;++c){var h=LO(s[c].offset)*100+"%",d=s[c].color,f=Mc(d),p=f.color,g=f.opacity,v={offset:h};v["stop-color"]=p,g<1&&(v["stop-opacity"]=g),l.push(Ca("stop",c+"",v))}var _=Ca(i,"",o,l),y=w0(_),b=r.gradientCache,w=b[y];w||(w=r.zrId+"-g"+r.gradientIdx++,b[y]=w,o.id=w,r.defs[w]=Ca(i,w,o,l)),t[a]=_f(w)}function $D(e,t,a,r){var n=e.style[a],i=e.getBoundingRect(),o={},s=n.repeat,l=s==="no-repeat",c=s==="repeat-x",u=s==="repeat-y",h;if(IO(n)){var d=n.imageWidth,f=n.imageHeight,p=void 0,g=n.image;if(ge(g)?p=g:PD(g)?p=g.src:BD(g)&&(p=g.toDataURL()),typeof Image>"u"){var v="Image width/height must been given explictly in svg-ssr renderer.";Dc(d,v),Dc(f,v)}else if(d==null||f==null){var _=function(M,P){if(M){var E=M.elm,D=d||P.width,O=f||P.height;M.tag==="pattern"&&(c?(O=1,D/=i.width):u&&(D=1,O/=i.height)),M.attrs.width=D,M.attrs.height=O,E&&(E.setAttribute("width",D),E.setAttribute("height",O))}},y=MO(p,null,e,function(M){l||_(C,M),_(h,M)});y&&y.width&&y.height&&(d=d||y.width,f=f||y.height)}h=Ca("image","img",{href:p,width:d,height:f}),o.width=d,o.height=f}else n.svgElement&&(h=Pe(n.svgElement),o.width=n.svgWidth,o.height=n.svgHeight);if(h){var b,w;l?b=w=1:c?(w=1,b=o.width/i.width):u?(b=1,w=o.height/i.height):o.patternUnits="userSpaceOnUse",b!=null&&!isNaN(b)&&(o.width=b),w!=null&&!isNaN(w)&&(o.height=w);var T=kT(n);T&&(o.patternTransform=T);var C=Ca("pattern","",o,[h]),A=w0(C),k=r.patternCache,L=k[A];L||(L=r.zrId+"-p"+r.patternIdx++,k[A]=L,o.id=L,C=r.defs[L]=Ca("pattern",L,o,[h])),t[a]=_f(L)}}function Tj(e,t,a){var r=a.clipPathCache,n=a.defs,i=r[e.id];if(!i){i=a.zrId+"-c"+a.clipPathIdx++;var o={id:i};r[e.id]=i,n[i]=Ca("clipPath",i,o,[OD(e,a)])}t["clip-path"]=_f(i)}function kw(e){return document.createTextNode(e)}function io(e,t,a){e.insertBefore(t,a)}function Dw(e,t){e.removeChild(t)}function Lw(e,t){e.appendChild(t)}function FD(e){return e.parentNode}function zD(e){return e.nextSibling}function kg(e,t){e.textContent=t}var Iw=58,Aj=120,kj=Ca("","");function rm(e){return e===void 0}function pn(e){return e!==void 0}function Dj(e,t,a){for(var r={},n=t;n<=a;++n){var i=e[n].key;i!==void 0&&(r[i]=n)}return r}function Ql(e,t){var a=e.key===t.key,r=e.tag===t.tag;return r&&a}function qc(e){var t,a=e.children,r=e.tag;if(pn(r)){var n=e.elm=MD(r);if(k0(kj,e),Nt(a))for(t=0;t<a.length;++t){var i=a[t];i!=null&&Lw(n,qc(i))}else pn(e.text)&&!na(e.text)&&Lw(n,kw(e.text))}else e.elm=kw(e.text);return e.elm}function VD(e,t,a,r,n){for(;r<=n;++r){var i=a[r];i!=null&&io(e,qc(i),t)}}function vd(e,t,a,r){for(;a<=r;++a){var n=t[a];if(n!=null)if(pn(n.tag)){var i=FD(n.elm);Dw(i,n.elm)}else Dw(e,n.elm)}}function k0(e,t){var a,r=t.elm,n=e&&e.attrs||{},i=t.attrs||{};if(n!==i){for(a in i){var o=i[a],s=n[a];s!==o&&(o===!0?r.setAttribute(a,""):o===!1?r.removeAttribute(a):a==="style"?r.style.cssText=o:a.charCodeAt(0)!==Aj?r.setAttribute(a,o):a==="xmlns:xlink"||a==="xmlns"?r.setAttributeNS(sj,a,o):a.charCodeAt(3)===Iw?r.setAttributeNS(lj,a,o):a.charCodeAt(5)===Iw?r.setAttributeNS(ID,a,o):r.setAttribute(a,o))}for(a in n)a in i||r.removeAttribute(a)}}function Lj(e,t,a){for(var r=0,n=0,i=t.length-1,o=t[0],s=t[i],l=a.length-1,c=a[0],u=a[l],h,d,f,p;r<=i&&n<=l;)o==null?o=t[++r]:s==null?s=t[--i]:c==null?c=a[++n]:u==null?u=a[--l]:Ql(o,c)?(cs(o,c),o=t[++r],c=a[++n]):Ql(s,u)?(cs(s,u),s=t[--i],u=a[--l]):Ql(o,u)?(cs(o,u),io(e,o.elm,zD(s.elm)),o=t[++r],u=a[--l]):Ql(s,c)?(cs(s,c),io(e,s.elm,o.elm),s=t[--i],c=a[++n]):(rm(h)&&(h=Dj(t,r,i)),d=h[c.key],rm(d)?io(e,qc(c),o.elm):(f=t[d],f.tag!==c.tag?io(e,qc(c),o.elm):(cs(f,c),t[d]=void 0,io(e,f.elm,o.elm))),c=a[++n]);(r<=i||n<=l)&&(r>i?(p=a[l+1]==null?null:a[l+1].elm,VD(e,p,a,n,l)):vd(e,t,r,i))}function cs(e,t){var a=t.elm=e.elm,r=e.children,n=t.children;e!==t&&(k0(e,t),rm(t.text)?pn(r)&&pn(n)?r!==n&&Lj(a,r,n):pn(n)?(pn(e.text)&&kg(a,""),VD(a,null,n,0,n.length-1)):pn(r)?vd(a,r,0,r.length-1):pn(e.text)&&kg(a,""):e.text!==t.text&&(pn(r)&&vd(a,r,0,r.length-1),kg(a,t.text)))}function Ij(e,t){if(Ql(e,t))cs(e,t);else{var a=e.elm,r=FD(a);qc(t),r!==null&&(io(r,t.elm,zD(a)),vd(r,[e],0,0))}return t}var Mj=0,Ej=function(){function e(t,a,r){if(this.type="svg",this.refreshHover=Mw(),this.configLayer=Mw(),this.storage=a,this._opts=r=Vt({},r),this.root=t,this._id="zr"+Mj++,this._oldVNode=_w(r.width,r.height),t&&!r.ssr){var n=this._viewport=document.createElement("div");n.style.cssText="position:relative;overflow:hidden";var i=this._svgDom=this._oldVNode.elm=MD("svg");k0(null,this._oldVNode),n.appendChild(i),t.appendChild(n)}this.resize(r.width,r.height)}return e.prototype.getType=function(){return this.type},e.prototype.getViewportRoot=function(){return this._viewport},e.prototype.getViewportRootOffset=function(){var t=this.getViewportRoot();if(t)return{offsetLeft:t.offsetLeft||0,offsetTop:t.offsetTop||0}},e.prototype.getSvgDom=function(){return this._svgDom},e.prototype.refresh=function(){if(this.root){var t=this.renderToVNode({willUpdate:!0});t.attrs.style="position:absolute;left:0;top:0;user-select:none",Ij(this._oldVNode,t),this._oldVNode=t}},e.prototype.renderOneToVNode=function(t){return Aw(t,am(this._id))},e.prototype.renderToVNode=function(t){t=t||{};var a=this.storage.getDisplayList(!0),r=this._width,n=this._height,i=am(this._id);i.animation=t.animation,i.willUpdate=t.willUpdate,i.compress=t.compress,i.emphasis=t.emphasis,i.ssr=this._opts.ssr;var o=[],s=this._bgVNode=Rj(r,n,this._backgroundColor,i);s&&o.push(s);var l=t.compress?null:this._mainVNode=Ca("g","main",{},[]);this._paintList(a,i,l?l.children:o),l&&o.push(l);var c=Ot(pa(i.defs),function(d){return i.defs[d]});if(c.length&&o.push(Ca("defs","defs",{},c)),t.animation){var u=hj(i.cssNodes,i.cssAnims,{newline:!0});if(u){var h=Ca("style","stl",{},[],u);o.push(h)}}return _w(r,n,o,t.useViewBox)},e.prototype.renderToString=function(t){return t=t||{},w0(this.renderToVNode({animation:sa(t.cssAnimation,!0),emphasis:sa(t.cssEmphasis,!0),willUpdate:!1,compress:!0,useViewBox:sa(t.useViewBox,!0)}),{newline:!0})},e.prototype.setBackgroundColor=function(t){this._backgroundColor=t},e.prototype.getSvgRoot=function(){return this._mainVNode&&this._mainVNode.elm},e.prototype._paintList=function(t,a,r){for(var n=t.length,i=[],o=0,s,l,c=0,u=0;u<n;u++){var h=t[u];if(!h.invisible){var d=h.__clipPaths,f=d&&d.length||0,p=l&&l.length||0,g=void 0;for(g=Math.max(f-1,p-1);g>=0&&!(d&&l&&d[g]===l[g]);g--);for(var v=p-1;v>g;v--)o--,s=i[o-1];for(var _=g+1;_<f;_++){var y={};Tj(d[_],y,a);var b=Ca("g","clip-g-"+c++,y,[]);(s?s.children:r).push(b),i[o++]=b,s=b}l=d;var w=Aw(h,a);w&&(s?s.children:r).push(w)}}},e.prototype.resize=function(t,a){var r=this._opts,n=this.root,i=this._viewport;if(t!=null&&(r.width=t),a!=null&&(r.height=a),n&&i&&(i.style.display="none",t=ps(n,0,r),a=ps(n,1,r),i.style.display=""),this._width!==t||this._height!==a){if(this._width=t,this._height=a,i){var o=i.style;o.width=t+"px",o.height=a+"px"}if(my(this._backgroundColor))this.refresh();else{var s=this._svgDom;s&&(s.setAttribute("width",t),s.setAttribute("height",a));var l=this._bgVNode&&this._bgVNode.elm;l&&(l.setAttribute("width",t),l.setAttribute("height",a))}}},e.prototype.getWidth=function(){return this._width},e.prototype.getHeight=function(){return this._height},e.prototype.dispose=function(){this.root&&(this.root.innerHTML=""),this._svgDom=this._viewport=this.storage=this._oldVNode=this._bgVNode=this._mainVNode=null},e.prototype.clear=function(){this._svgDom&&(this._svgDom.innerHTML=null),this._oldVNode=null},e.prototype.toDataURL=function(t){var a=this.renderToString(),r="data:image/svg+xml;";return t?(a=OO(a),a&&r+"base64,"+a):r+"charset=UTF-8,"+encodeURIComponent(a)},e}();function Mw(e){return function(){}}function Rj(e,t,a,r){var n;if(a&&a!=="none")if(n=Ca("rect","bg",{width:e,height:t,x:"0",y:"0"}),LT(a))ND({fill:a},n.attrs,"fill",r);else if(my(a))$D({style:{fill:a},dirty:xn,getBoundingRect:function(){return{width:e,height:t}}},n.attrs,"fill",r);else{var i=Mc(a),o=i.color,s=i.opacity;n.attrs.fill=o,s<1&&(n.attrs["fill-opacity"]=s)}return n}function Pj(e){e.registerPainter("svg",Ej)}function Ew(e,t,a){var r=dv.createCanvas(),n=t.getWidth(),i=t.getHeight(),o=r.style;return o&&(o.position="absolute",o.left="0",o.top="0",o.width=n+"px",o.height=i+"px",r.setAttribute("data-zr-dom-id",e)),r.width=n*a,r.height=i*a,r}var Dg=function(e){gt(t,e);function t(a,r,n){var i=e.call(this)||this;i.motionBlur=!1,i.lastFrameAlpha=.7,i.dpr=1,i.virtual=!1,i.config={},i.incremental=!1,i.zlevel=0,i.maxRepaintRectCount=5,i.__dirty=!0,i.__firstTimePaint=!0,i.__used=!1,i.__drawIndex=0,i.__startIndex=0,i.__endIndex=0,i.__prevStartIndex=null,i.__prevEndIndex=null;var o;n=n||MT,typeof a=="string"?o=Ew(a,r,n):na(a)&&(o=a,a=o.id),i.id=a,i.dom=o;var s=o.style;return s&&(IT(o),o.onselectstart=function(){return!1},s.padding="0",s.margin="0",s.borderWidth="0"),i.painter=r,i.dpr=n,i}return t.prototype.getElementCount=function(){return this.__endIndex-this.__startIndex},t.prototype.afterBrush=function(){this.__prevStartIndex=this.__startIndex,this.__prevEndIndex=this.__endIndex},t.prototype.initContext=function(){this.ctx=this.dom.getContext("2d"),this.ctx.dpr=this.dpr},t.prototype.setUnpainted=function(){this.__firstTimePaint=!0},t.prototype.createBackBuffer=function(){var a=this.dpr;this.domBack=Ew("back-"+this.id,this.painter,a),this.ctxBack=this.domBack.getContext("2d"),a!==1&&this.ctxBack.scale(a,a)},t.prototype.createRepaintRects=function(a,r,n,i){if(this.__firstTimePaint)return this.__firstTimePaint=!1,null;var o=[],s=this.maxRepaintRectCount,l=!1,c=new aa(0,0,0,0);function u(y){if(!(!y.isFinite()||y.isZero()))if(o.length===0){var b=new aa(0,0,0,0);b.copy(y),o.push(b)}else{for(var w=!1,T=1/0,C=0,A=0;A<o.length;++A){var k=o[A];if(k.intersect(y)){var L=new aa(0,0,0,0);L.copy(k),L.union(y),o[A]=L,w=!0;break}else if(l){c.copy(y),c.union(k);var M=y.width*y.height,P=k.width*k.height,E=c.width*c.height,D=E-M-P;D<T&&(T=D,C=A)}}if(l&&(o[C].union(y),w=!0),!w){var b=new aa(0,0,0,0);b.copy(y),o.push(b)}l||(l=o.length>=s)}}for(var h=this.__startIndex;h<this.__endIndex;++h){var d=a[h];if(d){var f=d.shouldBePainted(n,i,!0,!0),p=d.__isRendered&&(d.__dirty&pv||!f)?d.getPrevPaintRect():null;p&&u(p);var g=f&&(d.__dirty&pv||!d.__isRendered)?d.getPaintRect():null;g&&u(g)}}for(var h=this.__prevStartIndex;h<this.__prevEndIndex;++h){var d=r[h],f=d&&d.shouldBePainted(n,i,!0,!0);if(d&&(!f||!d.__zr)&&d.__isRendered){var p=d.getPrevPaintRect();p&&u(p)}}var v;do{v=!1;for(var h=0;h<o.length;){if(o[h].isZero()){o.splice(h,1);continue}for(var _=h+1;_<o.length;)o[h].intersect(o[_])?(v=!0,o[h].union(o[_]),o.splice(_,1)):_++;h++}}while(v);return this._paintRects=o,o},t.prototype.debugGetPaintRects=function(){return(this._paintRects||[]).slice()},t.prototype.resize=function(a,r){var n=this.dpr,i=this.dom,o=i.style,s=this.domBack;o&&(o.width=a+"px",o.height=r+"px"),i.width=a*n,i.height=r*n,s&&(s.width=a*n,s.height=r*n,n!==1&&this.ctxBack.scale(n,n))},t.prototype.clear=function(a,r,n){var i=this.dom,o=this.ctx,s=i.width,l=i.height;r=r||this.clearColor;var c=this.motionBlur&&!a,u=this.lastFrameAlpha,h=this.dpr,d=this;c&&(this.domBack||this.createBackBuffer(),this.ctxBack.globalCompositeOperation="copy",this.ctxBack.drawImage(i,0,0,s/h,l/h));var f=this.domBack;function p(g,v,_,y){if(o.clearRect(g,v,_,y),r&&r!=="transparent"){var b=void 0;if(NO(r)){var w=r.global||r.__width===_&&r.__height===y;b=w&&r.__canvasGradient||$O(o,r,{x:0,y:0,width:_,height:y}),r.__canvasGradient=b,r.__width=_,r.__height=y}else FO(r)&&(r.scaleX=r.scaleX||h,r.scaleY=r.scaleY||h,b=zO(o,r,{dirty:function(){d.setUnpainted(),d.painter.refresh()}}));o.save(),o.fillStyle=b||r,o.fillRect(g,v,_,y),o.restore()}c&&(o.save(),o.globalAlpha=u,o.drawImage(f,g,v,_,y),o.restore())}!n||c?p(0,0,s,l):n.length&&G(n,function(g){p(g.x*h,g.y*h,g.width*h,g.height*h)})},t}(hy),Rw=1e5,qi=314159,ah=.01,Bj=.001;function Oj(e){return e?e.__builtin__?!0:!(typeof e.resize!="function"||typeof e.refresh!="function"):!1}function Nj(e,t){var a=document.createElement("div");return a.style.cssText=["position:relative","width:"+e+"px","height:"+t+"px","padding:0","margin:0","border-width:0"].join(";")+";",a}var $j=function(){function e(t,a,r,n){this.type="canvas",this._zlevelList=[],this._prevDisplayList=[],this._layers={},this._layerConfig={},this._needsManuallyCompositing=!1,this.type="canvas";var i=!t.nodeName||t.nodeName.toUpperCase()==="CANVAS";this._opts=r=Vt({},r||{}),this.dpr=r.devicePixelRatio||MT,this._singleCanvas=i,this.root=t;var o=t.style;o&&(IT(t),t.innerHTML=""),this.storage=a;var s=this._zlevelList;this._prevDisplayList=[];var l=this._layers;if(i){var u=t,h=u.width,d=u.height;r.width!=null&&(h=r.width),r.height!=null&&(d=r.height),this.dpr=r.devicePixelRatio||1,u.width=h*this.dpr,u.height=d*this.dpr,this._width=h,this._height=d;var f=new Dg(u,this,this.dpr);f.__builtin__=!0,f.initContext(),l[qi]=f,f.zlevel=qi,s.push(qi),this._domRoot=t}else{this._width=ps(t,0,r),this._height=ps(t,1,r);var c=this._domRoot=Nj(this._width,this._height);t.appendChild(c)}}return e.prototype.getType=function(){return"canvas"},e.prototype.isSingleCanvas=function(){return this._singleCanvas},e.prototype.getViewportRoot=function(){return this._domRoot},e.prototype.getViewportRootOffset=function(){var t=this.getViewportRoot();if(t)return{offsetLeft:t.offsetLeft||0,offsetTop:t.offsetTop||0}},e.prototype.refresh=function(t){var a=this.storage.getDisplayList(!0),r=this._prevDisplayList,n=this._zlevelList;this._redrawId=Math.random(),this._paintList(a,r,t,this._redrawId);for(var i=0;i<n.length;i++){var o=n[i],s=this._layers[o];if(!s.__builtin__&&s.refresh){var l=i===0?this._backgroundColor:null;s.refresh(l)}}return this._opts.useDirtyRect&&(this._prevDisplayList=a.slice()),this},e.prototype.refreshHover=function(){this._paintHoverList(this.storage.getDisplayList(!1))},e.prototype._paintHoverList=function(t){var a=t.length,r=this._hoverlayer;if(r&&r.clear(),!!a){for(var n={inHover:!0,viewWidth:this._width,viewHeight:this._height},i,o=0;o<a;o++){var s=t[o];s.__inHover&&(r||(r=this._hoverlayer=this.getLayer(Rw)),i||(i=r.ctx,i.save()),Pu(i,s,n,o===a-1))}i&&i.restore()}},e.prototype.getHoverLayer=function(){return this.getLayer(Rw)},e.prototype.paintOne=function(t,a){VO(t,a)},e.prototype._paintList=function(t,a,r,n){if(this._redrawId===n){r=r||!1,this._updateLayerStatus(t);var i=this._doPaintList(t,a,r),o=i.finished,s=i.needsRefreshHover;if(this._needsManuallyCompositing&&this._compositeManually(),s&&this._paintHoverList(t),o)this.eachLayer(function(c){c.afterBrush&&c.afterBrush()});else{var l=this;GO(function(){l._paintList(t,a,r,n)})}}},e.prototype._compositeManually=function(){var t=this.getLayer(qi).ctx,a=this._domRoot.width,r=this._domRoot.height;t.clearRect(0,0,a,r),this.eachBuiltinLayer(function(n){n.virtual&&t.drawImage(n.dom,0,0,a,r)})},e.prototype._doPaintList=function(t,a,r){for(var n=this,i=[],o=this._opts.useDirtyRect,s=0;s<this._zlevelList.length;s++){var l=this._zlevelList[s],c=this._layers[l];c.__builtin__&&c!==this._hoverlayer&&(c.__dirty||r)&&i.push(c)}for(var u=!0,h=!1,d=function(g){var v=i[g],_=v.ctx,y=o&&v.createRepaintRects(t,a,f._width,f._height),b=r?v.__startIndex:v.__drawIndex,w=!r&&v.incremental&&Date.now,T=w&&Date.now(),C=v.zlevel===f._zlevelList[0]?f._backgroundColor:null;if(v.__startIndex===v.__endIndex)v.clear(!1,C,y);else if(b===v.__startIndex){var A=t[b];(!A.incremental||!A.notClear||r)&&v.clear(!1,C,y)}b===-1&&(console.error("For some unknown reason. drawIndex is -1"),b=v.__startIndex);var k,L=function(D){var O={inHover:!1,allClipped:!1,prevEl:null,viewWidth:n._width,viewHeight:n._height};for(k=b;k<v.__endIndex;k++){var B=t[k];if(B.__inHover&&(h=!0),n._doPaintEl(B,v,o,D,O,k===v.__endIndex-1),w){var R=Date.now()-T;if(R>15)break}}O.prevElClipPaths&&_.restore()};if(y)if(y.length===0)k=v.__endIndex;else for(var M=f.dpr,P=0;P<y.length;++P){var E=y[P];_.save(),_.beginPath(),_.rect(E.x*M,E.y*M,E.width*M,E.height*M),_.clip(),L(E),_.restore()}else _.save(),L(),_.restore();v.__drawIndex=k,v.__drawIndex<v.__endIndex&&(u=!1)},f=this,p=0;p<i.length;p++)d(p);return Ya.wxa&&G(this._layers,function(g){g&&g.ctx&&g.ctx.draw&&g.ctx.draw()}),{finished:u,needsRefreshHover:h}},e.prototype._doPaintEl=function(t,a,r,n,i,o){var s=a.ctx;if(r){var l=t.getPaintRect();(!n||l&&l.intersect(n))&&(Pu(s,t,i,o),t.setPrevPaintRect(l))}else Pu(s,t,i,o)},e.prototype.getLayer=function(t,a){this._singleCanvas&&!this._needsManuallyCompositing&&(t=qi);var r=this._layers[t];return r||(r=new Dg("zr_"+t,this,this.dpr),r.zlevel=t,r.__builtin__=!0,this._layerConfig[t]?Be(r,this._layerConfig[t],!0):this._layerConfig[t-ah]&&Be(r,this._layerConfig[t-ah],!0),a&&(r.virtual=a),this.insertLayer(t,r),r.initContext()),r},e.prototype.insertLayer=function(t,a){var r=this._layers,n=this._zlevelList,i=n.length,o=this._domRoot,s=null,l=-1;if(!r[t]&&Oj(a)){if(i>0&&t>n[0]){for(l=0;l<i-1&&!(n[l]<t&&n[l+1]>t);l++);s=r[n[l]]}if(n.splice(l+1,0,t),r[t]=a,!a.virtual)if(s){var c=s.dom;c.nextSibling?o.insertBefore(a.dom,c.nextSibling):o.appendChild(a.dom)}else o.firstChild?o.insertBefore(a.dom,o.firstChild):o.appendChild(a.dom);a.painter||(a.painter=this)}},e.prototype.eachLayer=function(t,a){for(var r=this._zlevelList,n=0;n<r.length;n++){var i=r[n];t.call(a,this._layers[i],i)}},e.prototype.eachBuiltinLayer=function(t,a){for(var r=this._zlevelList,n=0;n<r.length;n++){var i=r[n],o=this._layers[i];o.__builtin__&&t.call(a,o,i)}},e.prototype.eachOtherLayer=function(t,a){for(var r=this._zlevelList,n=0;n<r.length;n++){var i=r[n],o=this._layers[i];o.__builtin__||t.call(a,o,i)}},e.prototype.getLayers=function(){return this._layers},e.prototype._updateLayerStatus=function(t){this.eachBuiltinLayer(function(h,d){h.__dirty=h.__used=!1});function a(h){i&&(i.__endIndex!==h&&(i.__dirty=!0),i.__endIndex=h)}if(this._singleCanvas)for(var r=1;r<t.length;r++){var n=t[r];if(n.zlevel!==t[r-1].zlevel||n.incremental){this._needsManuallyCompositing=!0;break}}var i=null,o=0,s,l;for(l=0;l<t.length;l++){var n=t[l],c=n.zlevel,u=void 0;s!==c&&(s=c,o=0),n.incremental?(u=this.getLayer(c+Bj,this._needsManuallyCompositing),u.incremental=!0,o=1):u=this.getLayer(c+(o>0?ah:0),this._needsManuallyCompositing),u.__builtin__||HO("ZLevel "+c+" has been used by unkown layer "+u.id),u!==i&&(u.__used=!0,u.__startIndex!==l&&(u.__dirty=!0),u.__startIndex=l,u.incremental?u.__drawIndex=-1:u.__drawIndex=l,a(l),i=u),n.__dirty&pv&&!n.__inHover&&(u.__dirty=!0,u.incremental&&u.__drawIndex<0&&(u.__drawIndex=l))}a(l),this.eachBuiltinLayer(function(h,d){!h.__used&&h.getElementCount()>0&&(h.__dirty=!0,h.__startIndex=h.__endIndex=h.__drawIndex=0),h.__dirty&&h.__drawIndex<0&&(h.__drawIndex=h.__startIndex)})},e.prototype.clear=function(){return this.eachBuiltinLayer(this._clearLayer),this},e.prototype._clearLayer=function(t){t.clear()},e.prototype.setBackgroundColor=function(t){this._backgroundColor=t,G(this._layers,function(a){a.setUnpainted()})},e.prototype.configLayer=function(t,a){if(a){var r=this._layerConfig;r[t]?Be(r[t],a,!0):r[t]=a;for(var n=0;n<this._zlevelList.length;n++){var i=this._zlevelList[n];if(i===t||i===t+ah){var o=this._layers[i];Be(o,r[t],!0)}}}},e.prototype.delLayer=function(t){var a=this._layers,r=this._zlevelList,n=a[t];n&&(n.dom.parentNode.removeChild(n.dom),delete a[t],r.splice(Xe(r,t),1))},e.prototype.resize=function(t,a){if(this._domRoot.style){var r=this._domRoot;r.style.display="none";var n=this._opts,i=this.root;if(t!=null&&(n.width=t),a!=null&&(n.height=a),t=ps(i,0,n),a=ps(i,1,n),r.style.display="",this._width!==t||a!==this._height){r.style.width=t+"px",r.style.height=a+"px";for(var o in this._layers)this._layers.hasOwnProperty(o)&&this._layers[o].resize(t,a);this.refresh(!0)}this._width=t,this._height=a}else{if(t==null||a==null)return;this._width=t,this._height=a,this.getLayer(qi).resize(t,a)}return this},e.prototype.clearLayer=function(t){var a=this._layers[t];a&&a.clear()},e.prototype.dispose=function(){this.root.innerHTML="",this.root=this.storage=this._domRoot=this._layers=null},e.prototype.getRenderedCanvas=function(t){if(t=t||{},this._singleCanvas&&!this._compositeManually)return this._layers[qi].dom;var a=new Dg("image",this,t.pixelRatio||this.dpr);a.initContext(),a.clear(!1,t.backgroundColor||this._backgroundColor);var r=a.ctx;if(t.pixelRatio<=this.dpr){this.refresh();var n=a.dom.width,i=a.dom.height;this.eachLayer(function(h){h.__builtin__?r.drawImage(h.dom,0,0,n,i):h.renderToCanvas&&(r.save(),h.renderToCanvas(r),r.restore())})}else for(var o={inHover:!1,viewWidth:this._width,viewHeight:this._height},s=this.storage.getDisplayList(!0),l=0,c=s.length;l<c;l++){var u=s[l];Pu(r,u,o,l===c-1)}return a.dom},e.prototype.getWidth=function(){return this._width},e.prototype.getHeight=function(){return this._height},e}();function kn(e){e.registerPainter("canvas",$j)}const Qo={INVENTORY:"unified_inventory_data",LAB:"unified_lab_data",FACTORY:"unified_factory_data",HISTORICAL_INVENTORY:"historical_inventory_data",HISTORICAL_LAB:"historical_test_data",HISTORICAL_FACTORY:"historical_online_data"},oa={INVENTORY:Qo.INVENTORY,LAB:Qo.LAB,FACTORY:Qo.FACTORY,HISTORICAL_INVENTORY:Qo.HISTORICAL_INVENTORY,HISTORICAL_LAB:Qo.HISTORICAL_LAB,HISTORICAL_FACTORY:Qo.HISTORICAL_FACTORY,ALIASES:{online_data:"unified_factory_data",factory_data:"unified_factory_data",inventory_data:"unified_inventory_data",lab_data:"unified_lab_data",lab_test_data:"unified_lab_data"}};function Lg(e){return oa.ALIASES[e]||e}function rh(e){const t=e.filter(n=>Array.isArray(n)&&n.length>0);if(t.length===0)return[];if(t.length===1)return t[0];const a=[].concat(...t),r=new Map;return a.forEach(n=>{const i=n.id||n.materialCode||n.batchNo||JSON.stringify({code:n.materialCode,batch:n.batchNo});(!r.has(i)||n.timestamp&&r.get(i).timestamp&&new Date(n.timestamp)>new Date(r.get(i).timestamp))&&r.set(i,n)}),Array.from(r.values())}const le={STORAGE_KEYS:oa,getInventoryData(){try{const e=localStorage.getItem(oa.INVENTORY)||localStorage.getItem("inventory_data")||"[]";return JSON.parse(e)}catch(e){return console.error("获取库存数据失败:",e),[]}},getLabData(){try{console.log("开始获取实验室数据...");const e=localStorage.getItem(oa.LAB)||"[]";let t=JSON.parse(e);return t=t.map(a=>{if((a.result==="待定"||a.result===void 0||a.result===null||a.result==="")&&(a.result=Math.random()>.2?"OK":"NG"),a.result==="NG"&&(!a.defectDesc||a.defectDesc==="")){const r=["外观不良","尺寸超差","材质问题","标识错误","划伤","变形","破裂","起鼓","色差","焊点虚焊","元件缺失","短路","开路"];a.defectDesc=r[Math.floor(Math.random()*r.length)]}return a}),console.log(`合并后的实验室数据总数: ${t.length}条`),t}catch(e){return console.error("获取实验室数据失败:",e),[]}},async getFactoryData(){try{console.log("开始获取工厂上线数据..."),console.log("跳过API调用，直接使用localStorage数据");const e=localStorage.getItem(oa.FACTORY)||"[]",t=JSON.parse(e);return console.log(`从localStorage获取工厂上线数据总数: ${t.length}条`),t}catch(e){return console.error("获取工厂上线数据失败:",e),[]}},getOnlineData(){try{const e=localStorage.getItem(oa.FACTORY)||"[]",t=JSON.parse(e);return console.log(`从localStorage获取工厂上线数据总数: ${t.length}条`),t}catch(e){return console.error("获取工厂上线数据失败:",e),[]}},saveOnlineData(e,t=!1){return this.saveFactoryData(e,t)},saveInventoryData(e,t=!1){try{if(!Array.isArray(e))return console.error("保存库存数据失败: 数据必须是数组"),!1;let a=e;if(!t){const n=[...this.getInventoryData(),...e];a=rh([n])}return localStorage.setItem(oa.INVENTORY,JSON.stringify(a)),localStorage.setItem("inventory_data",JSON.stringify(a)),localStorage.setItem("inventory_data_timestamp",new Date().toISOString()),console.log(`成功保存${a.length}条库存数据到localStorage`),!0}catch(a){return console.error("保存库存数据失败:",a),!1}},saveLabData(e,t=!1){try{if(!Array.isArray(e))return console.error("保存实验室数据失败: 数据必须是数组"),!1;let a=e;if(!t){const n=[...this.getLabData(),...e];a=rh([n])}return localStorage.setItem(oa.LAB,JSON.stringify(a)),localStorage.setItem("lab_data",JSON.stringify(a)),localStorage.setItem("lab_test_data",JSON.stringify(a)),localStorage.setItem("lab_data_timestamp",new Date().toISOString()),console.log(`成功保存${a.length}条实验室数据到localStorage`),!0}catch(a){return console.error("保存实验室数据失败:",a),!1}},saveFactoryData(e,t=!1){try{if(!Array.isArray(e))return console.error("保存工厂上线数据失败: 数据必须是数组"),!1;const a=e.map(i=>(!i.baseline&&(i.baseline_id||i.baselineId||i.baseline_name||i.baselineName)&&(i.baseline=i.baseline_id||i.baselineId||""),!i.project&&(i.project_id||i.projectId||i.project_name||i.projectName)&&(i.project=i.project_id||i.projectId||""),!i.baseline_display&&(i.baseline_name||i.baselineName||i.baseline_id||i.baselineId)&&(i.baseline_display=i.baseline_name||i.baselineName||i.baseline_id||i.baselineId||""),!i.project_display&&(i.project_name||i.projectName||i.project_id||i.projectId)&&(i.project_display=i.project_name||i.projectName||i.project_id||i.projectId||""),i));let r=a;if(!t){const o=[...this.getOnlineData(),...a];r=rh([o])}const n=JSON.stringify(r);return localStorage.setItem(oa.FACTORY,n),localStorage.setItem("factory_data",n),localStorage.setItem("online_data",n),localStorage.setItem("factory_data_timestamp",new Date().toISOString()),console.log(`成功保存${r.length}条工厂上线数据到localStorage`),!0}catch(a){return console.error("保存工厂上线数据失败:",a),!1}},getData(e){try{const t=Lg(e),a=localStorage.getItem(t)||"[]";return JSON.parse(a)}catch(t){return console.error(`获取数据(${e})失败:`,t),[]}},saveData(e,t,a=!1){try{const r=Lg(e);if(a){const n=this.getData(r);if(Array.isArray(n)&&Array.isArray(t)){const i=rh([n,t]);localStorage.setItem(r,JSON.stringify(i))}else if(typeof n=="object"&&typeof t=="object"){const i={...n,...t};localStorage.setItem(r,JSON.stringify(i))}else localStorage.setItem(r,JSON.stringify(t))}else localStorage.setItem(r,JSON.stringify(t));return!0}catch(r){return console.error(`保存数据(${e})失败:`,r),!1}},clearData(e){try{const t=Lg(e);return localStorage.removeItem(t),t===oa.INVENTORY?localStorage.removeItem("inventory_data"):t===oa.LAB?(localStorage.removeItem("lab_data"),localStorage.removeItem("lab_test_data")):t===oa.FACTORY&&(localStorage.removeItem("factory_data"),localStorage.removeItem("online_data")),!0}catch(t){return console.error(`清除数据(${e})失败:`,t),!1}},clearAllData(){try{return Object.values(oa).forEach(e=>{typeof e=="string"&&localStorage.removeItem(e)}),Object.keys(oa.ALIASES).forEach(e=>{localStorage.removeItem(e)}),console.log("所有数据已清除"),!0}catch(e){return console.error("清除所有数据失败:",e),!1}},migrateOldData(){try{const e=localStorage.getItem("inventory_data");e&&!localStorage.getItem(oa.INVENTORY)&&(localStorage.setItem(oa.INVENTORY,e),console.log("库存数据迁移成功"));const t=localStorage.getItem("lab_test_data")||localStorage.getItem("lab_data");t&&!localStorage.getItem(oa.LAB)&&(localStorage.setItem(oa.LAB,t),console.log("实验室数据迁移成功"));const a=localStorage.getItem("online_data")||localStorage.getItem("factory_data");return a&&!localStorage.getItem(oa.FACTORY)&&(localStorage.setItem(oa.FACTORY,a),console.log("上线数据迁移成功")),!0}catch(e){return console.error("数据迁移失败:",e),!1}},cleanupOldData(e=100){try{console.log(`开始清理旧数据，每种数据保留最新的${e}条...`);const t=this.getInventoryData();if(t.length>e){const i=t.sort((o,s)=>{const l=new Date(o.updatedTime||o.inboundTime||0);return new Date(s.updatedTime||s.inboundTime||0)-l}).slice(0,e);this.saveInventoryData(i,!0),console.log(`库存数据已清理: ${t.length} -> ${i.length}`)}const a=this.getLabData();if(a.length>e){const i=a.sort((o,s)=>{const l=new Date(o.test_date||0);return new Date(s.test_date||0)-l}).slice(0,e);this.saveLabData(i,!0),console.log(`实验室数据已清理: ${a.length} -> ${i.length}`)}const r=this.getOnlineData();if(r.length>e){const i=r.sort((o,s)=>{const l=new Date(o.online_time||0);return new Date(s.online_time||0)-l}).slice(0,e);this.saveFactoryData(i,!0),console.log(`工厂数据已清理: ${r.length} -> ${i.length}`)}return console.log("数据清理完成"),!0}catch(t){return console.error("清理旧数据失败:",t),!1}},getStorageUsage(){try{let e=0,t=0;const a={};for(let r in localStorage)if(localStorage.hasOwnProperty(r)){const n=localStorage[r].length*2/1024;e+=n,t++,r===oa.INVENTORY||r==="inventory_data"?a.inventory=n.toFixed(2):r===oa.LAB||r==="lab_test_data"||r==="lab_data"?a.lab=n.toFixed(2):(r===oa.FACTORY||r==="online_data"||r==="factory_data")&&(a.factory=n.toFixed(2))}return{totalSize:e.toFixed(2),keyCount:t,details:a,limit:"5000KB",usagePercentage:(e/5e3*100).toFixed(2)+"%"}}catch(e){return console.error("获取存储使用情况失败:",e),{error:e.message,totalSize:"unknown",keyCount:0,details:{},limit:"5000KB",usagePercentage:"unknown"}}},getStats(){try{const e=this.getInventoryData().length,t=this.getLabData().length,a=this.getOnlineData().length,r=localStorage.getItem("inventory_data_timestamp")||null,n=localStorage.getItem("lab_data_timestamp")||null,i=localStorage.getItem("factory_data_timestamp")||null,o=this.getStorageUsage();return{inventoryCount:e,labCount:t,factoryCount:a,inventoryTimestamp:r,labTimestamp:n,onlineTimestamp:i,totalCount:e+t+a,storageUsage:o}}catch(e){return console.error("获取统计信息失败:",e),{inventoryCount:0,labCount:0,factoryCount:0,totalCount:0,error:e.message}}},generateAndSaveInventoryData(e=50){try{console.log(`开始生成${e}条库存模拟数据...`);const t=["广正","国泰","华威","精密电子元件厂","先锋科技"],a=["电阻","电容","芯片","传感器","连接器"],r=["A区-01","B区-02","C区-03","D区-04","E区-05"],n=["pending","passed","rejected","used"],i=["low","medium","high"],o=[];for(let s=0;s<e;s++){const l=`CS-M-${Math.floor(1e4+Math.random()*9e4)}`,c=a[Math.floor(Math.random()*a.length)],u=`${c}-${Math.floor(100+Math.random()*900)}`,h=t[Math.floor(Math.random()*t.length)],d=Math.floor(100+Math.random()*900),f=Math.floor(1e5+Math.random()*9e5).toString(),p=new Date;p.setDate(p.getDate()-Math.floor(Math.random()*30)),o.push({id:`INV-${s+1}`,materialCode:l,materialName:u,materialType:c,supplier:h,quantity:d,batchId:f,batchNo:f,storageDate:p.toISOString().split("T")[0],inboundTime:p.toISOString(),location:r[Math.floor(Math.random()*r.length)],status:n[Math.floor(Math.random()*n.length)],riskLevel:i[Math.floor(Math.random()*i.length)],inspector:`检验员${Math.floor(1+Math.random()*5)}`,notes:`批次${f}的库存记录`})}return this.saveInventoryData(o,!0),console.log(`成功生成并保存${o.length}条库存模拟数据`),o}catch(t){return console.error("生成库存模拟数据失败:",t),[]}},generateAndSaveLabData(e=100,t=[]){try{console.log(`开始生成${e}条实验室测试模拟数据...`),(!t||t.length===0)&&(t=this.getInventoryData());const a=["外观检查","性能测试","尺寸测量","可靠性测试","电气特性"],r=["OK","NG"],n=["外观不良","尺寸超差","材质问题","标识错误","划伤","变形"],i=[];for(let o=0;o<e;o++){const s=t.length>0?t[Math.floor(Math.random()*t.length)]:null,l=new Date;l.setDate(l.getDate()-Math.floor(Math.random()*20));const c=r[Math.floor(Math.random()*r.length)];i.push({id:`TEST-${o+1}`,testId:`T${Math.floor(1e4+Math.random()*9e4)}`,materialCode:s?s.materialCode:`CS-M-${Math.floor(1e4+Math.random()*9e4)}`,materialName:s?s.materialName:`测试物料-${o}`,supplier:s?s.supplier:"未知供应商",batchId:s?s.batchId:Math.floor(1e5+Math.random()*9e5).toString(),batchNo:s?s.batchNo:Math.floor(1e5+Math.random()*9e5).toString(),testDate:l.toISOString().split("T")[0],testItem:a[Math.floor(Math.random()*a.length)],result:c,defectDesc:c==="NG"?n[Math.floor(Math.random()*n.length)]:"",tester:`测试员${Math.floor(1+Math.random()*5)}`,reviewer:`审核员${Math.floor(1+Math.random()*3)}`})}return this.saveLabData(i,!0),console.log(`成功生成并保存${i.length}条实验室测试模拟数据`),i}catch(a){return console.error("生成实验室测试模拟数据失败:",a),[]}},generateAndSaveFactoryData(e=80,t=[]){try{console.log(`开始生成${e}条工厂上线模拟数据...`),(!t||t.length===0)&&(t=this.getInventoryData());const a=["A工厂","B工厂","C工厂"],r=["SMT-01","SMT-02","PCBA-01","PCBA-02","ASSY-01"],n=["项目A","项目B","项目C","项目D","项目E"],i=[];for(let o=0;o<e;o++){const s=t.length>0?t[Math.floor(Math.random()*t.length)]:null,l=new Date;l.setDate(l.getDate()-Math.floor(Math.random()*15));const c=Math.random()<.3,u=c?(Math.random()*.05).toFixed(4):"0.0000",h=a[Math.floor(Math.random()*a.length)],d=r[Math.floor(Math.random()*r.length)],f=n[Math.floor(Math.random()*n.length)];i.push({id:`ONLINE-${o+1}`,materialCode:s?s.materialCode:`CS-M-${Math.floor(1e4+Math.random()*9e4)}`,materialName:s?s.materialName:`上线物料-${o}`,supplier:s?s.supplier:"未知供应商",batchId:s?s.batchId:Math.floor(1e5+Math.random()*9e5).toString(),batchNo:s?s.batchNo:Math.floor(1e5+Math.random()*9e5).toString(),onlineDate:l.toISOString().split("T")[0],useTime:l.toISOString(),factory:h,line:d,workshop:`${h}-车间${Math.floor(1+Math.random()*3)}`,project:f,project_display:f,defectRate:u,exceptionCount:c?Math.floor(1+Math.random()*3):0,operator:`操作员${Math.floor(1+Math.random()*10)}`})}return this.saveFactoryData(i,!0),console.log(`成功生成并保存${i.length}条工厂上线模拟数据`),i}catch(a){return console.error("生成工厂上线模拟数据失败:",a),[]}}},wh=le,w_t=Object.freeze(Object.defineProperty({__proto__:null,default:le,unifiedDataService:wh},Symbol.toStringTag,{value:"Module"})),D0=[{baseline_id:"I6789",baseline_name:"I6789基线",baseline_version:"v1.0",design_date:"2024-01-15",design_owner:"张工",description:"通用测试基线I6789",status:"活跃"},{baseline_id:"I6788",baseline_name:"I6788基线",baseline_version:"v1.0",design_date:"2024-02-20",design_owner:"李工",description:"通用测试基线I6788",status:"活跃"},{baseline_id:"I6787",baseline_name:"I6787基线",baseline_version:"v1.0",design_date:"2024-03-10",design_owner:"王工",description:"通用测试基线I6787",status:"活跃"}],L0=[{project_id:"X6827",project_name:"X6827项目",baseline_id:"I6789",creation_date:"2024-01-20",owner:"张工",status:"活跃",factory:"重庆工厂"},{project_id:"S665LN",project_name:"S665LN项目",baseline_id:"I6789",creation_date:"2024-01-25",owner:"李工",status:"活跃",factory:"深圳工厂"},{project_id:"KI4K",project_name:"KI4K项目",baseline_id:"I6789",creation_date:"2024-02-28",owner:"王工",status:"活跃",factory:"南昌工厂"},{project_id:"X6828",project_name:"X6828项目",baseline_id:"I6789",creation_date:"2024-03-05",owner:"赵工",status:"活跃",factory:"宜宾工厂"},{project_id:"X6831",project_name:"X6831项目",baseline_id:"I6788",creation_date:"2024-03-15",owner:"孙工",status:"活跃",factory:"重庆工厂"},{project_id:"KI5K",project_name:"KI5K项目",baseline_id:"I6788",creation_date:"2024-03-20",owner:"钱工",status:"活跃",factory:"深圳工厂"},{project_id:"S662LN",project_name:"S662LN项目",baseline_id:"I6787",creation_date:"2024-04-10",owner:"周工",status:"活跃",factory:"南昌工厂"},{project_id:"S663LN",project_name:"S663LN项目",baseline_id:"I6787",creation_date:"2024-04-15",owner:"吴工",status:"活跃",factory:"宜宾工厂"},{project_id:"S664LN",project_name:"S664LN项目",baseline_id:"I6787",creation_date:"2024-05-20",owner:"郑工",status:"活跃",factory:"重庆工厂"}],GD={X6827:["电池盖","中框","手机卡托","侧键"],S665LN:["电池盖","中框","手机卡托","OLED显示屏"],KI4K:["电池","电池盖","喇叭","听筒"],X6828:["电池盖","中框","手机卡托","侧键"],X6831:["摄像头(CAM)","LCD显示屏","标签"],KI5K:["LCD显示屏","OLED显示屏","充电器"],S662LN:["摄像头(CAM)","标签","保护套"],S663LN:["电池盖","装饰件","包装盒"],S664LN:["中框","侧键","包装盒"]};function HD(){const e=new Map;return L0.forEach(t=>{e.set(t.project_id,t.baseline_id)}),e}function Fj(e){const t=L0.find(a=>a.project_id===e);return t?D0.find(a=>a.baseline_id===t.baseline_id):null}function WD(){try{const e=HD(),t=Array.from(e.entries());return localStorage.setItem("project_baseline_relation",JSON.stringify(t)),localStorage.setItem("baseline_data",JSON.stringify(D0)),localStorage.setItem("project_material_relation",JSON.stringify(GD)),!0}catch(e){return console.error("初始化项目基线关系失败:",e),!1}}class zj{constructor(){this.projectBaselineMap=Z(new Map),this.projects=Z([]),this.baselines=Z([]),this.BASELINE_STORAGE_KEY="baseline_data",this.RELATION_STORAGE_KEY="project_baseline_relation",this.PROJECT_STORAGE_KEY="project_data",this.PROJECT_MATERIAL_KEY="project_material_relation",this.initialized=!1}async initialize(){if(this.initialized)return!0;try{return await this.loadRelations(),await this.loadProjectData(),await this.loadBaselineData(),(this.projectBaselineMap.value.size===0||this.projects.value.length===0||this.baselines.value.length===0)&&await this.initializeFromDefault(),this.initialized=!0,!0}catch(t){return console.error("初始化项目基线服务失败:",t),!1}}async initializeFromDefault(){return console.log("从默认数据初始化项目基线关系..."),await WD(),await this.loadRelations(),await this.loadProjectData(),await this.loadBaselineData(),!0}async loadRelations(){try{const t=localStorage.getItem(this.RELATION_STORAGE_KEY);if(t){const a=JSON.parse(t);this.projectBaselineMap.value=new Map(a),console.log(`已加载 ${this.projectBaselineMap.value.size} 个项目基线关系`)}else this.projectBaselineMap.value=HD(),this.saveRelations();return!0}catch(t){return console.error("加载项目基线关系失败:",t),!1}}async loadProjectData(){try{const t=localStorage.getItem(this.PROJECT_STORAGE_KEY);return t?(this.projects.value=JSON.parse(t),console.log(`已加载 ${this.projects.value.length} 个项目数据`)):(this.projects.value=[...L0],this.saveProjectData()),!0}catch(t){return console.error("加载项目数据失败:",t),!1}}async loadBaselineData(){try{const t=localStorage.getItem(this.BASELINE_STORAGE_KEY);return t?(this.baselines.value=JSON.parse(t),console.log(`已加载 ${this.baselines.value.length} 个基线数据`)):(this.baselines.value=[...D0],this.saveBaselineData()),!0}catch(t){return console.error("加载基线数据失败:",t),!1}}saveRelations(){try{const t=Array.from(this.projectBaselineMap.value.entries());return localStorage.setItem(this.RELATION_STORAGE_KEY,JSON.stringify(t)),!0}catch(t){return console.error("保存项目基线关系失败:",t),!1}}saveProjectData(){try{return localStorage.setItem(this.PROJECT_STORAGE_KEY,JSON.stringify(this.projects.value)),!0}catch(t){return console.error("保存项目数据失败:",t),!1}}saveBaselineData(t,a=!1){try{return t&&(a?this.baselines.value=t:this.baselines.value=[...this.baselines.value,...t]),localStorage.setItem(this.BASELINE_STORAGE_KEY,JSON.stringify(this.baselines.value)),!0}catch(r){return console.error("保存基线数据失败:",r),!1}}getBaselineData(){return this.baselines.value}getProjectData(){return this.projects.value}getProjectMaterials(t){return GD[t]||[]}validateProjectId(t){return/^[XSK][0-9A-Z]{4,5}$/.test(t)}validateBaselineId(t){return/^I\d{4}$/.test(t)}createBaseline(t,a={}){if(!this.validateBaselineId(t))return{success:!1,message:"基线ID格式无效，必须为I加4位数字，如I6789"};if(this.baselines.value.some(n=>n.baseline_id===t))return{success:!1,message:"基线ID已存在"};const r={baseline_id:t,baseline_name:a.name||`基线${t}`,baseline_version:a.version||"v1.0",design_date:a.date||new Date().toISOString().split("T")[0],design_owner:a.owner||"系统管理员",description:a.description||`基线${t}的描述`,status:a.status||"活跃"};return this.baselines.value.push(r),this.saveBaselineData(),{success:!0,baseline:r}}createProject(t,a,r={}){if(!this.validateProjectId(t))return{success:!1,message:"项目ID格式无效，必须为X、S或K开头，后面跟随4-5位字符"};if(!this.validateBaselineId(a))return{success:!1,message:"基线ID格式无效"};if(!this.baselines.value.find(s=>s.baseline_id===a))return{success:!1,message:"指定的基线不存在"};if(this.projects.value.some(s=>s.project_id===t))return{success:!1,message:"项目ID已存在"};if(this.getProjectsByBaseline(a).length>=6)return{success:!1,message:"该基线已关联6个项目，已达到上限"};const o={project_id:t,project_name:r.name||`项目${t}`,baseline_id:a,creation_date:r.date||new Date().toISOString().split("T")[0],owner:r.owner||"系统管理员",status:r.status||"活跃",factory:r.factory||"重庆工厂"};return this.projects.value.push(o),this.saveProjectData(),this.projectBaselineMap.value.set(t,a),this.saveRelations(),{success:!0,project:o}}getProjectsByBaseline(t){return this.projects.value.filter(a=>a.baseline_id===t)}getBaselineByProject(t){const a=this.projectBaselineMap.value.get(t);return a?this.baselines.value.find(r=>r.baseline_id===a):null}getProject(t){return this.projects.value.find(a=>a.project_id===t)||null}getBaseline(t){return this.baselines.value.find(a=>a.baseline_id===t)||null}getProjectsByFactory(t){return this.projects.value.filter(a=>a.factory===t)}}const pi=new zj,I0=[{name:"电池盖",category:"结构件类",code_prefix:"CS-B",unit:"片",suppliers:["聚龙","欣冠","广正"],defectTypes:["划伤","变形","破裂","起鼓","色差","尺寸异常"]},{name:"中框",category:"结构件类",code_prefix:"CS-M",unit:"个",suppliers:["聚龙","欣冠","广正"],defectTypes:["变形","破裂","掉漆","尺寸异常"]},{name:"手机卡托",category:"结构件类",code_prefix:"SIM",unit:"个",suppliers:["聚龙","欣冠","广正"],defectTypes:["注塑不良","尺寸异常","断裂","毛刺"]},{name:"侧键",category:"结构件类",code_prefix:"KEY",unit:"个",suppliers:["聚龙","欣冠","广正"],defectTypes:["脱落","卡键","尺寸异常","松动"]},{name:"装饰件",category:"结构件类",code_prefix:"DEC",unit:"个",suppliers:["聚龙","欣冠","广正"],defectTypes:["掉色","偏位","脱落"]},{name:"LCD显示屏",category:"光学类",code_prefix:"DS-L",unit:"片",suppliers:["天马","BOE"],defectTypes:["漏光","暗点","偏色","亮晶"]},{name:"OLED显示屏",category:"光学类",code_prefix:"DS-O",unit:"片",suppliers:["BOE","天马","华星"],defectTypes:["闪屏","mura","亮点","亮线"]},{name:"摄像头(CAM)",category:"光学类",code_prefix:"CAM",unit:"个",suppliers:["盛泰","天实","深奥"],defectTypes:["刮花","底座破裂","脏污","无法拍照"]},{name:"电池",category:"充电类",code_prefix:"BAT",unit:"块",suppliers:["百佳达","奥海","辉阳"],defectTypes:["起鼓","鼓包","漏液","电压不稳定"]},{name:"充电器",category:"充电类",code_prefix:"CHG",unit:"个",suppliers:["理威","风华","维科"],defectTypes:["无法充电","外壳破裂","输出功率异常","发热异常"]},{name:"喇叭",category:"声学类",code_prefix:"SPK",unit:"个",suppliers:["东声","瑞声","歌尔"],defectTypes:["无声","杂音","音量小","破裂"]},{name:"听筒",category:"声学类",code_prefix:"REC",unit:"个",suppliers:["东声","瑞声","歌尔"],defectTypes:["无声","杂音","音量小","破裂"]},{name:"保护套",category:"包材类",code_prefix:"CASE",unit:"个",suppliers:["丽德宝","怡同","富群"],defectTypes:["尺寸偏差","发黄","开孔错位","模具压痕"]},{name:"标签",category:"包材类",code_prefix:"LABEL",unit:"个",suppliers:["丽德宝","怡同","富群"],defectTypes:["脱落","错印","logo错误","尺寸异常"]},{name:"包装盒",category:"包材类",code_prefix:"BOX",unit:"个",suppliers:["丽德宝","怡同","富群"],defectTypes:["破损","logo错误","错印"]}];function js(){return I0}function C_t(e){const t=I0.find(a=>a.name===e);return!t||!t.suppliers||t.suppliers.length===0?"未知供应商":t.suppliers[Math.floor(Math.random()*t.suppliers.length)]}function Pw(e){const t=I0.find(a=>a.name===e);return!t||!t.suppliers?[]:t.suppliers}function Bw(e,t=new Date){const r=(e instanceof Date?e:new Date(e)).getTime()-t.getTime();return Math.ceil(r/(1e3*60*60*24))}const Pa=[];for(let e=0;e<256;++e)Pa.push((e+256).toString(16).slice(1));function Vj(e,t=0){return(Pa[e[t+0]]+Pa[e[t+1]]+Pa[e[t+2]]+Pa[e[t+3]]+"-"+Pa[e[t+4]]+Pa[e[t+5]]+"-"+Pa[e[t+6]]+Pa[e[t+7]]+"-"+Pa[e[t+8]]+Pa[e[t+9]]+"-"+Pa[e[t+10]]+Pa[e[t+11]]+Pa[e[t+12]]+Pa[e[t+13]]+Pa[e[t+14]]+Pa[e[t+15]]).toLowerCase()}let Ig;const Gj=new Uint8Array(16);function Hj(){if(!Ig){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");Ig=crypto.getRandomValues.bind(crypto)}return Ig(Gj)}const Wj=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Ow={randomUUID:Wj};function qj(e,t,a){var n;if(Ow.randomUUID&&!e)return Ow.randomUUID();e=e||{};const r=e.random??((n=e.rng)==null?void 0:n.call(e))??Hj();if(r.length<16)throw new Error("Random bytes length must be >= 16");return r[6]=r[6]&15|64,r[8]=r[8]&63|128,Vj(r)}function qD(e,t){return function(){return e.apply(t,arguments)}}const{toString:Uj}=Object.prototype,{getPrototypeOf:M0}=Object,{iterator:Mf,toStringTag:UD}=Symbol,Ef=(e=>t=>{const a=Uj.call(t);return e[a]||(e[a]=a.slice(8,-1).toLowerCase())})(Object.create(null)),Qr=e=>(e=e.toLowerCase(),t=>Ef(t)===e),Rf=e=>t=>typeof t===e,{isArray:pl}=Array,Uc=Rf("undefined");function jj(e){return e!==null&&!Uc(e)&&e.constructor!==null&&!Uc(e.constructor)&&gr(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const jD=Qr("ArrayBuffer");function Yj(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&jD(e.buffer),t}const Xj=Rf("string"),gr=Rf("function"),YD=Rf("number"),Pf=e=>e!==null&&typeof e=="object",Zj=e=>e===!0||e===!1,Ch=e=>{if(Ef(e)!=="object")return!1;const t=M0(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(UD in e)&&!(Mf in e)},Kj=Qr("Date"),Jj=Qr("File"),Qj=Qr("Blob"),tY=Qr("FileList"),eY=e=>Pf(e)&&gr(e.pipe),aY=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||gr(e.append)&&((t=Ef(e))==="formdata"||t==="object"&&gr(e.toString)&&e.toString()==="[object FormData]"))},rY=Qr("URLSearchParams"),[nY,iY,oY,sY]=["ReadableStream","Request","Response","Headers"].map(Qr),lY=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function bu(e,t,{allOwnKeys:a=!1}={}){if(e===null||typeof e>"u")return;let r,n;if(typeof e!="object"&&(e=[e]),pl(e))for(r=0,n=e.length;r<n;r++)t.call(null,e[r],r,e);else{const i=a?Object.getOwnPropertyNames(e):Object.keys(e),o=i.length;let s;for(r=0;r<o;r++)s=i[r],t.call(null,e[s],s,e)}}function XD(e,t){t=t.toLowerCase();const a=Object.keys(e);let r=a.length,n;for(;r-- >0;)if(n=a[r],t===n.toLowerCase())return n;return null}const lo=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,ZD=e=>!Uc(e)&&e!==lo;function nm(){const{caseless:e}=ZD(this)&&this||{},t={},a=(r,n)=>{const i=e&&XD(t,n)||n;Ch(t[i])&&Ch(r)?t[i]=nm(t[i],r):Ch(r)?t[i]=nm({},r):pl(r)?t[i]=r.slice():t[i]=r};for(let r=0,n=arguments.length;r<n;r++)arguments[r]&&bu(arguments[r],a);return t}const cY=(e,t,a,{allOwnKeys:r}={})=>(bu(t,(n,i)=>{a&&gr(n)?e[i]=qD(n,a):e[i]=n},{allOwnKeys:r}),e),uY=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),hY=(e,t,a,r)=>{e.prototype=Object.create(t.prototype,r),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),a&&Object.assign(e.prototype,a)},dY=(e,t,a,r)=>{let n,i,o;const s={};if(t=t||{},e==null)return t;do{for(n=Object.getOwnPropertyNames(e),i=n.length;i-- >0;)o=n[i],(!r||r(o,e,t))&&!s[o]&&(t[o]=e[o],s[o]=!0);e=a!==!1&&M0(e)}while(e&&(!a||a(e,t))&&e!==Object.prototype);return t},fY=(e,t,a)=>{e=String(e),(a===void 0||a>e.length)&&(a=e.length),a-=t.length;const r=e.indexOf(t,a);return r!==-1&&r===a},pY=e=>{if(!e)return null;if(pl(e))return e;let t=e.length;if(!YD(t))return null;const a=new Array(t);for(;t-- >0;)a[t]=e[t];return a},gY=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&M0(Uint8Array)),vY=(e,t)=>{const r=(e&&e[Mf]).call(e);let n;for(;(n=r.next())&&!n.done;){const i=n.value;t.call(e,i[0],i[1])}},mY=(e,t)=>{let a;const r=[];for(;(a=e.exec(t))!==null;)r.push(a);return r},yY=Qr("HTMLFormElement"),_Y=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(a,r,n){return r.toUpperCase()+n}),Nw=(({hasOwnProperty:e})=>(t,a)=>e.call(t,a))(Object.prototype),bY=Qr("RegExp"),KD=(e,t)=>{const a=Object.getOwnPropertyDescriptors(e),r={};bu(a,(n,i)=>{let o;(o=t(n,i,e))!==!1&&(r[i]=o||n)}),Object.defineProperties(e,r)},xY=e=>{KD(e,(t,a)=>{if(gr(e)&&["arguments","caller","callee"].indexOf(a)!==-1)return!1;const r=e[a];if(gr(r)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+a+"'")})}})},SY=(e,t)=>{const a={},r=n=>{n.forEach(i=>{a[i]=!0})};return pl(e)?r(e):r(String(e).split(t)),a},wY=()=>{},CY=(e,t)=>e!=null&&Number.isFinite(e=+e)?e:t;function TY(e){return!!(e&&gr(e.append)&&e[UD]==="FormData"&&e[Mf])}const AY=e=>{const t=new Array(10),a=(r,n)=>{if(Pf(r)){if(t.indexOf(r)>=0)return;if(!("toJSON"in r)){t[n]=r;const i=pl(r)?[]:{};return bu(r,(o,s)=>{const l=a(o,n+1);!Uc(l)&&(i[s]=l)}),t[n]=void 0,i}}return r};return a(e,0)},kY=Qr("AsyncFunction"),DY=e=>e&&(Pf(e)||gr(e))&&gr(e.then)&&gr(e.catch),JD=((e,t)=>e?setImmediate:t?((a,r)=>(lo.addEventListener("message",({source:n,data:i})=>{n===lo&&i===a&&r.length&&r.shift()()},!1),n=>{r.push(n),lo.postMessage(a,"*")}))(`axios@${Math.random()}`,[]):a=>setTimeout(a))(typeof setImmediate=="function",gr(lo.postMessage)),LY=typeof queueMicrotask<"u"?queueMicrotask.bind(lo):typeof process<"u"&&process.nextTick||JD,IY=e=>e!=null&&gr(e[Mf]),wt={isArray:pl,isArrayBuffer:jD,isBuffer:jj,isFormData:aY,isArrayBufferView:Yj,isString:Xj,isNumber:YD,isBoolean:Zj,isObject:Pf,isPlainObject:Ch,isReadableStream:nY,isRequest:iY,isResponse:oY,isHeaders:sY,isUndefined:Uc,isDate:Kj,isFile:Jj,isBlob:Qj,isRegExp:bY,isFunction:gr,isStream:eY,isURLSearchParams:rY,isTypedArray:gY,isFileList:tY,forEach:bu,merge:nm,extend:cY,trim:lY,stripBOM:uY,inherits:hY,toFlatObject:dY,kindOf:Ef,kindOfTest:Qr,endsWith:fY,toArray:pY,forEachEntry:vY,matchAll:mY,isHTMLForm:yY,hasOwnProperty:Nw,hasOwnProp:Nw,reduceDescriptors:KD,freezeMethods:xY,toObjectSet:SY,toCamelCase:_Y,noop:wY,toFiniteNumber:CY,findKey:XD,global:lo,isContextDefined:ZD,isSpecCompliantForm:TY,toJSONObject:AY,isAsyncFn:kY,isThenable:DY,setImmediate:JD,asap:LY,isIterable:IY};function Le(e,t,a,r,n){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),a&&(this.config=a),r&&(this.request=r),n&&(this.response=n,this.status=n.status?n.status:null)}wt.inherits(Le,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:wt.toJSONObject(this.config),code:this.code,status:this.status}}});const QD=Le.prototype,tL={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{tL[e]={value:e}});Object.defineProperties(Le,tL);Object.defineProperty(QD,"isAxiosError",{value:!0});Le.from=(e,t,a,r,n,i)=>{const o=Object.create(QD);return wt.toFlatObject(e,o,function(l){return l!==Error.prototype},s=>s!=="isAxiosError"),Le.call(o,e.message,t,a,r,n),o.cause=e,o.name=e.name,i&&Object.assign(o,i),o};const MY=null;function im(e){return wt.isPlainObject(e)||wt.isArray(e)}function eL(e){return wt.endsWith(e,"[]")?e.slice(0,-2):e}function $w(e,t,a){return e?e.concat(t).map(function(n,i){return n=eL(n),!a&&i?"["+n+"]":n}).join(a?".":""):t}function EY(e){return wt.isArray(e)&&!e.some(im)}const RY=wt.toFlatObject(wt,{},null,function(t){return/^is[A-Z]/.test(t)});function Bf(e,t,a){if(!wt.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,a=wt.toFlatObject(a,{metaTokens:!0,dots:!1,indexes:!1},!1,function(g,v){return!wt.isUndefined(v[g])});const r=a.metaTokens,n=a.visitor||u,i=a.dots,o=a.indexes,l=(a.Blob||typeof Blob<"u"&&Blob)&&wt.isSpecCompliantForm(t);if(!wt.isFunction(n))throw new TypeError("visitor must be a function");function c(p){if(p===null)return"";if(wt.isDate(p))return p.toISOString();if(wt.isBoolean(p))return p.toString();if(!l&&wt.isBlob(p))throw new Le("Blob is not supported. Use a Buffer instead.");return wt.isArrayBuffer(p)||wt.isTypedArray(p)?l&&typeof Blob=="function"?new Blob([p]):Buffer.from(p):p}function u(p,g,v){let _=p;if(p&&!v&&typeof p=="object"){if(wt.endsWith(g,"{}"))g=r?g:g.slice(0,-2),p=JSON.stringify(p);else if(wt.isArray(p)&&EY(p)||(wt.isFileList(p)||wt.endsWith(g,"[]"))&&(_=wt.toArray(p)))return g=eL(g),_.forEach(function(b,w){!(wt.isUndefined(b)||b===null)&&t.append(o===!0?$w([g],w,i):o===null?g:g+"[]",c(b))}),!1}return im(p)?!0:(t.append($w(v,g,i),c(p)),!1)}const h=[],d=Object.assign(RY,{defaultVisitor:u,convertValue:c,isVisitable:im});function f(p,g){if(!wt.isUndefined(p)){if(h.indexOf(p)!==-1)throw Error("Circular reference detected in "+g.join("."));h.push(p),wt.forEach(p,function(_,y){(!(wt.isUndefined(_)||_===null)&&n.call(t,_,wt.isString(y)?y.trim():y,g,d))===!0&&f(_,g?g.concat(y):[y])}),h.pop()}}if(!wt.isObject(e))throw new TypeError("data must be an object");return f(e),t}function Fw(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(r){return t[r]})}function E0(e,t){this._pairs=[],e&&Bf(e,this,t)}const aL=E0.prototype;aL.append=function(t,a){this._pairs.push([t,a])};aL.toString=function(t){const a=t?function(r){return t.call(this,r,Fw)}:Fw;return this._pairs.map(function(n){return a(n[0])+"="+a(n[1])},"").join("&")};function PY(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function rL(e,t,a){if(!t)return e;const r=a&&a.encode||PY;wt.isFunction(a)&&(a={serialize:a});const n=a&&a.serialize;let i;if(n?i=n(t,a):i=wt.isURLSearchParams(t)?t.toString():new E0(t,a).toString(r),i){const o=e.indexOf("#");o!==-1&&(e=e.slice(0,o)),e+=(e.indexOf("?")===-1?"?":"&")+i}return e}class zw{constructor(){this.handlers=[]}use(t,a,r){return this.handlers.push({fulfilled:t,rejected:a,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){wt.forEach(this.handlers,function(r){r!==null&&t(r)})}}const nL={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},BY=typeof URLSearchParams<"u"?URLSearchParams:E0,OY=typeof FormData<"u"?FormData:null,NY=typeof Blob<"u"?Blob:null,$Y={isBrowser:!0,classes:{URLSearchParams:BY,FormData:OY,Blob:NY},protocols:["http","https","file","blob","url","data"]},R0=typeof window<"u"&&typeof document<"u",om=typeof navigator=="object"&&navigator||void 0,FY=R0&&(!om||["ReactNative","NativeScript","NS"].indexOf(om.product)<0),zY=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",VY=R0&&window.location.href||"http://localhost",GY=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:R0,hasStandardBrowserEnv:FY,hasStandardBrowserWebWorkerEnv:zY,navigator:om,origin:VY},Symbol.toStringTag,{value:"Module"})),ja={...GY,...$Y};function HY(e,t){return Bf(e,new ja.classes.URLSearchParams,Object.assign({visitor:function(a,r,n,i){return ja.isNode&&wt.isBuffer(a)?(this.append(r,a.toString("base64")),!1):i.defaultVisitor.apply(this,arguments)}},t))}function WY(e){return wt.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function qY(e){const t={},a=Object.keys(e);let r;const n=a.length;let i;for(r=0;r<n;r++)i=a[r],t[i]=e[i];return t}function iL(e){function t(a,r,n,i){let o=a[i++];if(o==="__proto__")return!0;const s=Number.isFinite(+o),l=i>=a.length;return o=!o&&wt.isArray(n)?n.length:o,l?(wt.hasOwnProp(n,o)?n[o]=[n[o],r]:n[o]=r,!s):((!n[o]||!wt.isObject(n[o]))&&(n[o]=[]),t(a,r,n[o],i)&&wt.isArray(n[o])&&(n[o]=qY(n[o])),!s)}if(wt.isFormData(e)&&wt.isFunction(e.entries)){const a={};return wt.forEachEntry(e,(r,n)=>{t(WY(r),n,a,0)}),a}return null}function UY(e,t,a){if(wt.isString(e))try{return(t||JSON.parse)(e),wt.trim(e)}catch(r){if(r.name!=="SyntaxError")throw r}return(a||JSON.stringify)(e)}const xu={transitional:nL,adapter:["xhr","http","fetch"],transformRequest:[function(t,a){const r=a.getContentType()||"",n=r.indexOf("application/json")>-1,i=wt.isObject(t);if(i&&wt.isHTMLForm(t)&&(t=new FormData(t)),wt.isFormData(t))return n?JSON.stringify(iL(t)):t;if(wt.isArrayBuffer(t)||wt.isBuffer(t)||wt.isStream(t)||wt.isFile(t)||wt.isBlob(t)||wt.isReadableStream(t))return t;if(wt.isArrayBufferView(t))return t.buffer;if(wt.isURLSearchParams(t))return a.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let s;if(i){if(r.indexOf("application/x-www-form-urlencoded")>-1)return HY(t,this.formSerializer).toString();if((s=wt.isFileList(t))||r.indexOf("multipart/form-data")>-1){const l=this.env&&this.env.FormData;return Bf(s?{"files[]":t}:t,l&&new l,this.formSerializer)}}return i||n?(a.setContentType("application/json",!1),UY(t)):t}],transformResponse:[function(t){const a=this.transitional||xu.transitional,r=a&&a.forcedJSONParsing,n=this.responseType==="json";if(wt.isResponse(t)||wt.isReadableStream(t))return t;if(t&&wt.isString(t)&&(r&&!this.responseType||n)){const o=!(a&&a.silentJSONParsing)&&n;try{return JSON.parse(t)}catch(s){if(o)throw s.name==="SyntaxError"?Le.from(s,Le.ERR_BAD_RESPONSE,this,null,this.response):s}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:ja.classes.FormData,Blob:ja.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};wt.forEach(["delete","get","head","post","put","patch"],e=>{xu.headers[e]={}});const jY=wt.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),YY=e=>{const t={};let a,r,n;return e&&e.split(`
`).forEach(function(o){n=o.indexOf(":"),a=o.substring(0,n).trim().toLowerCase(),r=o.substring(n+1).trim(),!(!a||t[a]&&jY[a])&&(a==="set-cookie"?t[a]?t[a].push(r):t[a]=[r]:t[a]=t[a]?t[a]+", "+r:r)}),t},Vw=Symbol("internals");function Rl(e){return e&&String(e).trim().toLowerCase()}function Th(e){return e===!1||e==null?e:wt.isArray(e)?e.map(Th):String(e)}function XY(e){const t=Object.create(null),a=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=a.exec(e);)t[r[1]]=r[2];return t}const ZY=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function Mg(e,t,a,r,n){if(wt.isFunction(r))return r.call(this,t,a);if(n&&(t=a),!!wt.isString(t)){if(wt.isString(r))return t.indexOf(r)!==-1;if(wt.isRegExp(r))return r.test(t)}}function KY(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,a,r)=>a.toUpperCase()+r)}function JY(e,t){const a=wt.toCamelCase(" "+t);["get","set","has"].forEach(r=>{Object.defineProperty(e,r+a,{value:function(n,i,o){return this[r].call(this,t,n,i,o)},configurable:!0})})}let vr=class{constructor(t){t&&this.set(t)}set(t,a,r){const n=this;function i(s,l,c){const u=Rl(l);if(!u)throw new Error("header name must be a non-empty string");const h=wt.findKey(n,u);(!h||n[h]===void 0||c===!0||c===void 0&&n[h]!==!1)&&(n[h||l]=Th(s))}const o=(s,l)=>wt.forEach(s,(c,u)=>i(c,u,l));if(wt.isPlainObject(t)||t instanceof this.constructor)o(t,a);else if(wt.isString(t)&&(t=t.trim())&&!ZY(t))o(YY(t),a);else if(wt.isObject(t)&&wt.isIterable(t)){let s={},l,c;for(const u of t){if(!wt.isArray(u))throw TypeError("Object iterator must return a key-value pair");s[c=u[0]]=(l=s[c])?wt.isArray(l)?[...l,u[1]]:[l,u[1]]:u[1]}o(s,a)}else t!=null&&i(a,t,r);return this}get(t,a){if(t=Rl(t),t){const r=wt.findKey(this,t);if(r){const n=this[r];if(!a)return n;if(a===!0)return XY(n);if(wt.isFunction(a))return a.call(this,n,r);if(wt.isRegExp(a))return a.exec(n);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,a){if(t=Rl(t),t){const r=wt.findKey(this,t);return!!(r&&this[r]!==void 0&&(!a||Mg(this,this[r],r,a)))}return!1}delete(t,a){const r=this;let n=!1;function i(o){if(o=Rl(o),o){const s=wt.findKey(r,o);s&&(!a||Mg(r,r[s],s,a))&&(delete r[s],n=!0)}}return wt.isArray(t)?t.forEach(i):i(t),n}clear(t){const a=Object.keys(this);let r=a.length,n=!1;for(;r--;){const i=a[r];(!t||Mg(this,this[i],i,t,!0))&&(delete this[i],n=!0)}return n}normalize(t){const a=this,r={};return wt.forEach(this,(n,i)=>{const o=wt.findKey(r,i);if(o){a[o]=Th(n),delete a[i];return}const s=t?KY(i):String(i).trim();s!==i&&delete a[i],a[s]=Th(n),r[s]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const a=Object.create(null);return wt.forEach(this,(r,n)=>{r!=null&&r!==!1&&(a[n]=t&&wt.isArray(r)?r.join(", "):r)}),a}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,a])=>t+": "+a).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...a){const r=new this(t);return a.forEach(n=>r.set(n)),r}static accessor(t){const r=(this[Vw]=this[Vw]={accessors:{}}).accessors,n=this.prototype;function i(o){const s=Rl(o);r[s]||(JY(n,o),r[s]=!0)}return wt.isArray(t)?t.forEach(i):i(t),this}};vr.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);wt.reduceDescriptors(vr.prototype,({value:e},t)=>{let a=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(r){this[a]=r}}});wt.freezeMethods(vr);function Eg(e,t){const a=this||xu,r=t||a,n=vr.from(r.headers);let i=r.data;return wt.forEach(e,function(s){i=s.call(a,i,n.normalize(),t?t.status:void 0)}),n.normalize(),i}function oL(e){return!!(e&&e.__CANCEL__)}function gl(e,t,a){Le.call(this,e??"canceled",Le.ERR_CANCELED,t,a),this.name="CanceledError"}wt.inherits(gl,Le,{__CANCEL__:!0});function sL(e,t,a){const r=a.config.validateStatus;!a.status||!r||r(a.status)?e(a):t(new Le("Request failed with status code "+a.status,[Le.ERR_BAD_REQUEST,Le.ERR_BAD_RESPONSE][Math.floor(a.status/100)-4],a.config,a.request,a))}function QY(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function tX(e,t){e=e||10;const a=new Array(e),r=new Array(e);let n=0,i=0,o;return t=t!==void 0?t:1e3,function(l){const c=Date.now(),u=r[i];o||(o=c),a[n]=l,r[n]=c;let h=i,d=0;for(;h!==n;)d+=a[h++],h=h%e;if(n=(n+1)%e,n===i&&(i=(i+1)%e),c-o<t)return;const f=u&&c-u;return f?Math.round(d*1e3/f):void 0}}function eX(e,t){let a=0,r=1e3/t,n,i;const o=(c,u=Date.now())=>{a=u,n=null,i&&(clearTimeout(i),i=null),e.apply(null,c)};return[(...c)=>{const u=Date.now(),h=u-a;h>=r?o(c,u):(n=c,i||(i=setTimeout(()=>{i=null,o(n)},r-h)))},()=>n&&o(n)]}const md=(e,t,a=3)=>{let r=0;const n=tX(50,250);return eX(i=>{const o=i.loaded,s=i.lengthComputable?i.total:void 0,l=o-r,c=n(l),u=o<=s;r=o;const h={loaded:o,total:s,progress:s?o/s:void 0,bytes:l,rate:c||void 0,estimated:c&&s&&u?(s-o)/c:void 0,event:i,lengthComputable:s!=null,[t?"download":"upload"]:!0};e(h)},a)},Gw=(e,t)=>{const a=e!=null;return[r=>t[0]({lengthComputable:a,total:e,loaded:r}),t[1]]},Hw=e=>(...t)=>wt.asap(()=>e(...t)),aX=ja.hasStandardBrowserEnv?((e,t)=>a=>(a=new URL(a,ja.origin),e.protocol===a.protocol&&e.host===a.host&&(t||e.port===a.port)))(new URL(ja.origin),ja.navigator&&/(msie|trident)/i.test(ja.navigator.userAgent)):()=>!0,rX=ja.hasStandardBrowserEnv?{write(e,t,a,r,n,i){const o=[e+"="+encodeURIComponent(t)];wt.isNumber(a)&&o.push("expires="+new Date(a).toGMTString()),wt.isString(r)&&o.push("path="+r),wt.isString(n)&&o.push("domain="+n),i===!0&&o.push("secure"),document.cookie=o.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function nX(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function iX(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function lL(e,t,a){let r=!nX(t);return e&&(r||a==!1)?iX(e,t):t}const Ww=e=>e instanceof vr?{...e}:e;function ko(e,t){t=t||{};const a={};function r(c,u,h,d){return wt.isPlainObject(c)&&wt.isPlainObject(u)?wt.merge.call({caseless:d},c,u):wt.isPlainObject(u)?wt.merge({},u):wt.isArray(u)?u.slice():u}function n(c,u,h,d){if(wt.isUndefined(u)){if(!wt.isUndefined(c))return r(void 0,c,h,d)}else return r(c,u,h,d)}function i(c,u){if(!wt.isUndefined(u))return r(void 0,u)}function o(c,u){if(wt.isUndefined(u)){if(!wt.isUndefined(c))return r(void 0,c)}else return r(void 0,u)}function s(c,u,h){if(h in t)return r(c,u);if(h in e)return r(void 0,c)}const l={url:i,method:i,data:i,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:s,headers:(c,u,h)=>n(Ww(c),Ww(u),h,!0)};return wt.forEach(Object.keys(Object.assign({},e,t)),function(u){const h=l[u]||n,d=h(e[u],t[u],u);wt.isUndefined(d)&&h!==s||(a[u]=d)}),a}const cL=e=>{const t=ko({},e);let{data:a,withXSRFToken:r,xsrfHeaderName:n,xsrfCookieName:i,headers:o,auth:s}=t;t.headers=o=vr.from(o),t.url=rL(lL(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),s&&o.set("Authorization","Basic "+btoa((s.username||"")+":"+(s.password?unescape(encodeURIComponent(s.password)):"")));let l;if(wt.isFormData(a)){if(ja.hasStandardBrowserEnv||ja.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if((l=o.getContentType())!==!1){const[c,...u]=l?l.split(";").map(h=>h.trim()).filter(Boolean):[];o.setContentType([c||"multipart/form-data",...u].join("; "))}}if(ja.hasStandardBrowserEnv&&(r&&wt.isFunction(r)&&(r=r(t)),r||r!==!1&&aX(t.url))){const c=n&&i&&rX.read(i);c&&o.set(n,c)}return t},oX=typeof XMLHttpRequest<"u",sX=oX&&function(e){return new Promise(function(a,r){const n=cL(e);let i=n.data;const o=vr.from(n.headers).normalize();let{responseType:s,onUploadProgress:l,onDownloadProgress:c}=n,u,h,d,f,p;function g(){f&&f(),p&&p(),n.cancelToken&&n.cancelToken.unsubscribe(u),n.signal&&n.signal.removeEventListener("abort",u)}let v=new XMLHttpRequest;v.open(n.method.toUpperCase(),n.url,!0),v.timeout=n.timeout;function _(){if(!v)return;const b=vr.from("getAllResponseHeaders"in v&&v.getAllResponseHeaders()),T={data:!s||s==="text"||s==="json"?v.responseText:v.response,status:v.status,statusText:v.statusText,headers:b,config:e,request:v};sL(function(A){a(A),g()},function(A){r(A),g()},T),v=null}"onloadend"in v?v.onloadend=_:v.onreadystatechange=function(){!v||v.readyState!==4||v.status===0&&!(v.responseURL&&v.responseURL.indexOf("file:")===0)||setTimeout(_)},v.onabort=function(){v&&(r(new Le("Request aborted",Le.ECONNABORTED,e,v)),v=null)},v.onerror=function(){r(new Le("Network Error",Le.ERR_NETWORK,e,v)),v=null},v.ontimeout=function(){let w=n.timeout?"timeout of "+n.timeout+"ms exceeded":"timeout exceeded";const T=n.transitional||nL;n.timeoutErrorMessage&&(w=n.timeoutErrorMessage),r(new Le(w,T.clarifyTimeoutError?Le.ETIMEDOUT:Le.ECONNABORTED,e,v)),v=null},i===void 0&&o.setContentType(null),"setRequestHeader"in v&&wt.forEach(o.toJSON(),function(w,T){v.setRequestHeader(T,w)}),wt.isUndefined(n.withCredentials)||(v.withCredentials=!!n.withCredentials),s&&s!=="json"&&(v.responseType=n.responseType),c&&([d,p]=md(c,!0),v.addEventListener("progress",d)),l&&v.upload&&([h,f]=md(l),v.upload.addEventListener("progress",h),v.upload.addEventListener("loadend",f)),(n.cancelToken||n.signal)&&(u=b=>{v&&(r(!b||b.type?new gl(null,e,v):b),v.abort(),v=null)},n.cancelToken&&n.cancelToken.subscribe(u),n.signal&&(n.signal.aborted?u():n.signal.addEventListener("abort",u)));const y=QY(n.url);if(y&&ja.protocols.indexOf(y)===-1){r(new Le("Unsupported protocol "+y+":",Le.ERR_BAD_REQUEST,e));return}v.send(i||null)})},lX=(e,t)=>{const{length:a}=e=e?e.filter(Boolean):[];if(t||a){let r=new AbortController,n;const i=function(c){if(!n){n=!0,s();const u=c instanceof Error?c:this.reason;r.abort(u instanceof Le?u:new gl(u instanceof Error?u.message:u))}};let o=t&&setTimeout(()=>{o=null,i(new Le(`timeout ${t} of ms exceeded`,Le.ETIMEDOUT))},t);const s=()=>{e&&(o&&clearTimeout(o),o=null,e.forEach(c=>{c.unsubscribe?c.unsubscribe(i):c.removeEventListener("abort",i)}),e=null)};e.forEach(c=>c.addEventListener("abort",i));const{signal:l}=r;return l.unsubscribe=()=>wt.asap(s),l}},cX=function*(e,t){let a=e.byteLength;if(a<t){yield e;return}let r=0,n;for(;r<a;)n=r+t,yield e.slice(r,n),r=n},uX=async function*(e,t){for await(const a of hX(e))yield*cX(a,t)},hX=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const t=e.getReader();try{for(;;){const{done:a,value:r}=await t.read();if(a)break;yield r}}finally{await t.cancel()}},qw=(e,t,a,r)=>{const n=uX(e,t);let i=0,o,s=l=>{o||(o=!0,r&&r(l))};return new ReadableStream({async pull(l){try{const{done:c,value:u}=await n.next();if(c){s(),l.close();return}let h=u.byteLength;if(a){let d=i+=h;a(d)}l.enqueue(new Uint8Array(u))}catch(c){throw s(c),c}},cancel(l){return s(l),n.return()}},{highWaterMark:2})},Of=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",uL=Of&&typeof ReadableStream=="function",dX=Of&&(typeof TextEncoder=="function"?(e=>t=>e.encode(t))(new TextEncoder):async e=>new Uint8Array(await new Response(e).arrayBuffer())),hL=(e,...t)=>{try{return!!e(...t)}catch{return!1}},fX=uL&&hL(()=>{let e=!1;const t=new Request(ja.origin,{body:new ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t}),Uw=64*1024,sm=uL&&hL(()=>wt.isReadableStream(new Response("").body)),yd={stream:sm&&(e=>e.body)};Of&&(e=>{["text","arrayBuffer","blob","formData","stream"].forEach(t=>{!yd[t]&&(yd[t]=wt.isFunction(e[t])?a=>a[t]():(a,r)=>{throw new Le(`Response type '${t}' is not supported`,Le.ERR_NOT_SUPPORT,r)})})})(new Response);const pX=async e=>{if(e==null)return 0;if(wt.isBlob(e))return e.size;if(wt.isSpecCompliantForm(e))return(await new Request(ja.origin,{method:"POST",body:e}).arrayBuffer()).byteLength;if(wt.isArrayBufferView(e)||wt.isArrayBuffer(e))return e.byteLength;if(wt.isURLSearchParams(e)&&(e=e+""),wt.isString(e))return(await dX(e)).byteLength},gX=async(e,t)=>{const a=wt.toFiniteNumber(e.getContentLength());return a??pX(t)},vX=Of&&(async e=>{let{url:t,method:a,data:r,signal:n,cancelToken:i,timeout:o,onDownloadProgress:s,onUploadProgress:l,responseType:c,headers:u,withCredentials:h="same-origin",fetchOptions:d}=cL(e);c=c?(c+"").toLowerCase():"text";let f=lX([n,i&&i.toAbortSignal()],o),p;const g=f&&f.unsubscribe&&(()=>{f.unsubscribe()});let v;try{if(l&&fX&&a!=="get"&&a!=="head"&&(v=await gX(u,r))!==0){let T=new Request(t,{method:"POST",body:r,duplex:"half"}),C;if(wt.isFormData(r)&&(C=T.headers.get("content-type"))&&u.setContentType(C),T.body){const[A,k]=Gw(v,md(Hw(l)));r=qw(T.body,Uw,A,k)}}wt.isString(h)||(h=h?"include":"omit");const _="credentials"in Request.prototype;p=new Request(t,{...d,signal:f,method:a.toUpperCase(),headers:u.normalize().toJSON(),body:r,duplex:"half",credentials:_?h:void 0});let y=await fetch(p,d);const b=sm&&(c==="stream"||c==="response");if(sm&&(s||b&&g)){const T={};["status","statusText","headers"].forEach(L=>{T[L]=y[L]});const C=wt.toFiniteNumber(y.headers.get("content-length")),[A,k]=s&&Gw(C,md(Hw(s),!0))||[];y=new Response(qw(y.body,Uw,A,()=>{k&&k(),g&&g()}),T)}c=c||"text";let w=await yd[wt.findKey(yd,c)||"text"](y,e);return!b&&g&&g(),await new Promise((T,C)=>{sL(T,C,{data:w,headers:vr.from(y.headers),status:y.status,statusText:y.statusText,config:e,request:p})})}catch(_){throw g&&g(),_&&_.name==="TypeError"&&/Load failed|fetch/i.test(_.message)?Object.assign(new Le("Network Error",Le.ERR_NETWORK,e,p),{cause:_.cause||_}):Le.from(_,_&&_.code,e,p)}}),lm={http:MY,xhr:sX,fetch:vX};wt.forEach(lm,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const jw=e=>`- ${e}`,mX=e=>wt.isFunction(e)||e===null||e===!1,dL={getAdapter:e=>{e=wt.isArray(e)?e:[e];const{length:t}=e;let a,r;const n={};for(let i=0;i<t;i++){a=e[i];let o;if(r=a,!mX(a)&&(r=lm[(o=String(a)).toLowerCase()],r===void 0))throw new Le(`Unknown adapter '${o}'`);if(r)break;n[o||"#"+i]=r}if(!r){const i=Object.entries(n).map(([s,l])=>`adapter ${s} `+(l===!1?"is not supported by the environment":"is not available in the build"));let o=t?i.length>1?`since :
`+i.map(jw).join(`
`):" "+jw(i[0]):"as no adapter specified";throw new Le("There is no suitable adapter to dispatch the request "+o,"ERR_NOT_SUPPORT")}return r},adapters:lm};function Rg(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new gl(null,e)}function Yw(e){return Rg(e),e.headers=vr.from(e.headers),e.data=Eg.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),dL.getAdapter(e.adapter||xu.adapter)(e).then(function(r){return Rg(e),r.data=Eg.call(e,e.transformResponse,r),r.headers=vr.from(r.headers),r},function(r){return oL(r)||(Rg(e),r&&r.response&&(r.response.data=Eg.call(e,e.transformResponse,r.response),r.response.headers=vr.from(r.response.headers))),Promise.reject(r)})}const fL="1.10.0",Nf={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{Nf[e]=function(r){return typeof r===e||"a"+(t<1?"n ":" ")+e}});const Xw={};Nf.transitional=function(t,a,r){function n(i,o){return"[Axios v"+fL+"] Transitional option '"+i+"'"+o+(r?". "+r:"")}return(i,o,s)=>{if(t===!1)throw new Le(n(o," has been removed"+(a?" in "+a:"")),Le.ERR_DEPRECATED);return a&&!Xw[o]&&(Xw[o]=!0,console.warn(n(o," has been deprecated since v"+a+" and will be removed in the near future"))),t?t(i,o,s):!0}};Nf.spelling=function(t){return(a,r)=>(console.warn(`${r} is likely a misspelling of ${t}`),!0)};function yX(e,t,a){if(typeof e!="object")throw new Le("options must be an object",Le.ERR_BAD_OPTION_VALUE);const r=Object.keys(e);let n=r.length;for(;n-- >0;){const i=r[n],o=t[i];if(o){const s=e[i],l=s===void 0||o(s,i,e);if(l!==!0)throw new Le("option "+i+" must be "+l,Le.ERR_BAD_OPTION_VALUE);continue}if(a!==!0)throw new Le("Unknown option "+i,Le.ERR_BAD_OPTION)}}const Ah={assertOptions:yX,validators:Nf},an=Ah.validators;let bo=class{constructor(t){this.defaults=t||{},this.interceptors={request:new zw,response:new zw}}async request(t,a){try{return await this._request(t,a)}catch(r){if(r instanceof Error){let n={};Error.captureStackTrace?Error.captureStackTrace(n):n=new Error;const i=n.stack?n.stack.replace(/^.+\n/,""):"";try{r.stack?i&&!String(r.stack).endsWith(i.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+i):r.stack=i}catch{}}throw r}}_request(t,a){typeof t=="string"?(a=a||{},a.url=t):a=t||{},a=ko(this.defaults,a);const{transitional:r,paramsSerializer:n,headers:i}=a;r!==void 0&&Ah.assertOptions(r,{silentJSONParsing:an.transitional(an.boolean),forcedJSONParsing:an.transitional(an.boolean),clarifyTimeoutError:an.transitional(an.boolean)},!1),n!=null&&(wt.isFunction(n)?a.paramsSerializer={serialize:n}:Ah.assertOptions(n,{encode:an.function,serialize:an.function},!0)),a.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?a.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:a.allowAbsoluteUrls=!0),Ah.assertOptions(a,{baseUrl:an.spelling("baseURL"),withXsrfToken:an.spelling("withXSRFToken")},!0),a.method=(a.method||this.defaults.method||"get").toLowerCase();let o=i&&wt.merge(i.common,i[a.method]);i&&wt.forEach(["delete","get","head","post","put","patch","common"],p=>{delete i[p]}),a.headers=vr.concat(o,i);const s=[];let l=!0;this.interceptors.request.forEach(function(g){typeof g.runWhen=="function"&&g.runWhen(a)===!1||(l=l&&g.synchronous,s.unshift(g.fulfilled,g.rejected))});const c=[];this.interceptors.response.forEach(function(g){c.push(g.fulfilled,g.rejected)});let u,h=0,d;if(!l){const p=[Yw.bind(this),void 0];for(p.unshift.apply(p,s),p.push.apply(p,c),d=p.length,u=Promise.resolve(a);h<d;)u=u.then(p[h++],p[h++]);return u}d=s.length;let f=a;for(h=0;h<d;){const p=s[h++],g=s[h++];try{f=p(f)}catch(v){g.call(this,v);break}}try{u=Yw.call(this,f)}catch(p){return Promise.reject(p)}for(h=0,d=c.length;h<d;)u=u.then(c[h++],c[h++]);return u}getUri(t){t=ko(this.defaults,t);const a=lL(t.baseURL,t.url,t.allowAbsoluteUrls);return rL(a,t.params,t.paramsSerializer)}};wt.forEach(["delete","get","head","options"],function(t){bo.prototype[t]=function(a,r){return this.request(ko(r||{},{method:t,url:a,data:(r||{}).data}))}});wt.forEach(["post","put","patch"],function(t){function a(r){return function(i,o,s){return this.request(ko(s||{},{method:t,headers:r?{"Content-Type":"multipart/form-data"}:{},url:i,data:o}))}}bo.prototype[t]=a(),bo.prototype[t+"Form"]=a(!0)});let _X=class pL{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let a;this.promise=new Promise(function(i){a=i});const r=this;this.promise.then(n=>{if(!r._listeners)return;let i=r._listeners.length;for(;i-- >0;)r._listeners[i](n);r._listeners=null}),this.promise.then=n=>{let i;const o=new Promise(s=>{r.subscribe(s),i=s}).then(n);return o.cancel=function(){r.unsubscribe(i)},o},t(function(i,o,s){r.reason||(r.reason=new gl(i,o,s),a(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const a=this._listeners.indexOf(t);a!==-1&&this._listeners.splice(a,1)}toAbortSignal(){const t=new AbortController,a=r=>{t.abort(r)};return this.subscribe(a),t.signal.unsubscribe=()=>this.unsubscribe(a),t.signal}static source(){let t;return{token:new pL(function(n){t=n}),cancel:t}}};function bX(e){return function(a){return e.apply(null,a)}}function xX(e){return wt.isObject(e)&&e.isAxiosError===!0}const cm={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(cm).forEach(([e,t])=>{cm[t]=e});function gL(e){const t=new bo(e),a=qD(bo.prototype.request,t);return wt.extend(a,bo.prototype,t,{allOwnKeys:!0}),wt.extend(a,t,null,{allOwnKeys:!0}),a.create=function(n){return gL(ko(e,n))},a}const Je=gL(xu);Je.Axios=bo;Je.CanceledError=gl;Je.CancelToken=_X;Je.isCancel=oL;Je.VERSION=fL;Je.toFormData=Bf;Je.AxiosError=Le;Je.Cancel=Je.CanceledError;Je.all=function(t){return Promise.all(t)};Je.spread=bX;Je.isAxiosError=xX;Je.mergeConfig=ko;Je.AxiosHeaders=vr;Je.formToJSON=e=>iL(wt.isHTMLForm(e)?new FormData(e):e);Je.getAdapter=dL.getAdapter;Je.HttpStatusCode=cm;Je.default=Je;const{Axios:SX,AxiosError:wX,CanceledError:CX,isCancel:TX,CancelToken:AX,VERSION:kX,all:DX,Cancel:LX,isAxiosError:IX,spread:MX,toFormData:EX,AxiosHeaders:RX,HttpStatusCode:PX,formToJSON:BX,getAdapter:OX,mergeConfig:NX}=Je,$X=Object.freeze(Object.defineProperty({__proto__:null,Axios:SX,AxiosError:wX,AxiosHeaders:RX,Cancel:LX,CancelToken:AX,CanceledError:CX,HttpStatusCode:PX,VERSION:kX,all:DX,default:Je,formToJSON:BX,getAdapter:OX,isAxiosError:IX,isCancel:TX,mergeConfig:NX,spread:MX,toFormData:EX},Symbol.toStringTag,{value:"Module"})),xo=new Map,_d=Z(!1);function $f(e,t){const a=`${e}|${t}`;if(xo.has(a))return xo.get(a);const r=js().find(i=>i.name===e);let n;if(r&&r.code_prefix){const i=t?t.charAt(0):"X",o=Math.floor(1e3+Math.random()*9e3);n=`${r.code_prefix}-${i}${o}`}else{const i="M",o=Math.floor(1e4+Math.random()*9e4);n=`${i}${o}`}return xo.set(a,n),FX(n,e,t,r==null?void 0:r.code_prefix,r==null?void 0:r.category),n}async function FX(e,t,a,r,n){try{const i=await Je.post("/api/material-code-mappings",{material_code:e,material_name:t,supplier_name:a,code_prefix:r||"",category:n||""});return console.log("物料编码映射保存成功:",i.data),i.data}catch(i){return console.error("保存物料编码映射失败:",i),null}}async function vL(){try{const e=await Je.get("/api/material-code-mappings");return xo.clear(),e.data.forEach(t=>{const a=`${t.material_name}|${t.supplier_name}`;xo.set(a,t.material_code)}),_d.value=!0,console.log("物料编码映射加载成功，共",xo.size,"条记录"),!0}catch(e){return console.error("加载物料编码映射失败:",e),!1}}function mL(e){for(const[t,a]of xo.entries())if(a===e){const[r,n]=t.split("|");return{materialName:r,supplier:n}}return null}async function yL(){if(_d.value){console.log("物料编码映射已初始化，跳过");return}await vL()||(js().forEach(a=>{a.suppliers&&a.suppliers.length>0&&a.suppliers.forEach(r=>{$f(a.name,r)})}),_d.value=!0)}function _L(){return _d.value}const zX=Object.freeze(Object.defineProperty({__proto__:null,getMaterialCode:$f,getMaterialInfoByCode:mL,initializeMaterialCodeMap:yL,isCodeMapInitialized:_L,loadMaterialCodeMappings:vL},Symbol.toStringTag,{value:"Module"}));class VX{constructor(){this.initialized=!1,this.batchMappings=new Map,this.materialCodeMappings=new Map,this.BATCHES_PER_COMBINATION=3,this.allBatches=[]}initialize(){console.log("初始化批次管理器...");const t=js();console.log(`物料总数: ${t.length}`);let a=0;return t.forEach(r=>{const n=r.name,i=r.suppliers||[];i.length,a+=i.length,console.log(`物料 [${n}] 有 ${i.length} 个供应商`),i.forEach(o=>{const s=`${n}_${o}`,l=[];for(let c=0;c<this.BATCHES_PER_COMBINATION;c++){const u=this.generateConsistentBatchNo(n,o,c),h=this.generateConsistentMaterialCode(n,o),d={batchNo:u,materialCode:h,materialName:n,supplier:o,createdAt:new Date().toISOString(),index:c};l.push(d),this.allBatches.push(d)}this.batchMappings.set(s,l),this.materialCodeMappings.set(s,this.generateConsistentMaterialCode(n,o))})}),console.log(`物料-供应商组合总数: ${a}`),console.log(`批次管理器初始化完成，共生成${this.allBatches.length}个批次`),console.log(`每个物料-供应商组合的批次数: ${this.BATCHES_PER_COMBINATION}`),console.log(`理论总批次数: ${a*this.BATCHES_PER_COMBINATION}`),this.initialized=!0,this.getAllBatchCount()}getAllBatchCount(){return this.allBatches.length}getAllBatches(){return this.allBatches}getBatchesForMaterialAndSupplier(t,a){const r=`${t}_${a}`;return this.batchMappings.get(r)||[]}getBatchMapping(t,a,r,n=null){const i=`${a}_${r}`;if(this.batchMappings.has(i)){const u=this.batchMappings.get(i);if(u&&u.length>0)return n!==null&&n>=0&&n<u.length?u[n]:u[Math.floor(Math.random()*u.length)]}console.warn(`未找到物料${a}和供应商${r}的批次映射，创建新批次`);const o=this.generateConsistentBatchNo(a,r,0),s=this.generateConsistentMaterialCode(a,r),l={batchNo:o,materialCode:s,projectId:t,materialName:a,supplier:r,createdAt:new Date().toISOString()},c=[l];return this.batchMappings.set(i,c),this.materialCodeMappings.set(i,s),this.allBatches.push(l),l}generateConsistentBatchNo(t,a,r){const n=this.getChineseFirstLetters(t).substring(0,2).toUpperCase(),i=this.getChineseFirstLetters(a).substring(0,1).toUpperCase(),o=(100+Math.floor(Math.random()*900)).toString();return`${n}${i}${r+1}${o}`}generateConsistentMaterialCode(t,a){const n=js().find(c=>c.name===t);let i="M";n&&n.code_prefix&&(i=n.code_prefix);const o=this.getChineseFirstLetters(a).substring(0,1).toUpperCase(),s=this.simpleStringHash(t)%1e3,l=this.simpleStringHash(a)%100;return`${i}-${o}${s}${l}`}getChineseFirstLetters(t){const a={电:"D",池:"C",盖:"G",中:"Z",框:"K",手:"S",机:"J",卡:"K",托:"T",侧:"C",键:"J",装:"Z",饰:"S",件:"J",L:"L",C:"C",D:"D",显:"X",示:"S",屏:"P",O:"O",L:"L",E:"E",摄:"S",像:"X",头:"T",充:"C",电:"D",器:"Q",喇:"L",叭:"B",听:"T",筒:"T",保:"B",护:"H",套:"T",标:"B",签:"Q",包:"B",装:"Z",盒:"H",聚:"J",龙:"L",欣:"X",冠:"G",广:"G",正:"Z",天:"T",马:"M",B:"B",O:"O",E:"E",华:"H",星:"X",盛:"S",泰:"T",实:"S",深:"S",奥:"A",百:"B",佳:"J",达:"D",奥:"A",海:"H",辉:"H",阳:"Y",理:"L",威:"W",风:"F",华:"H",维:"W",科:"K",东:"D",声:"S",瑞:"R",歌:"G",尔:"E",丽:"L",德:"D",宝:"B",怡:"Y",同:"T",富:"F",群:"Q"};let r="";for(let n=0;n<t.length&&n<4;n++){const i=t[n];r+=a[i]||i}return r}simpleStringHash(t){let a=0;for(let r=0;r<t.length;r++)a=(a<<5)-a+t.charCodeAt(r),a=a&a;return Math.abs(a)}addBatchInfo(t,a,r,n){const i=`${a}_${r}`,o={batchNo:t,materialCode:n,materialName:a,supplier:r,createdAt:new Date().toISOString()};this.batchMappings.has(i)||this.batchMappings.set(i,[]);const s=this.batchMappings.get(i);return s.find(c=>c.batchNo===t)?console.log(`批次号 ${t} 已存在，不重复添加`):(s.push(o),this.allBatches.push(o),this.materialCodeMappings.set(i,n),console.log(`添加批次信息: 批次号=${t}, 物料=${a}, 供应商=${r}, 物料编码=${n}`)),o}}const Ui=new VX;var bL={exports:{}};const GX=u3($X);var HX=function e(t,a){if(t===a)return!0;if(t&&a&&typeof t=="object"&&typeof a=="object"){if(t.constructor!==a.constructor)return!1;var r,n,i;if(Array.isArray(t)){if(r=t.length,r!=a.length)return!1;for(n=r;n--!==0;)if(!e(t[n],a[n]))return!1;return!0}if(t.constructor===RegExp)return t.source===a.source&&t.flags===a.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===a.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===a.toString();if(i=Object.keys(t),r=i.length,r!==Object.keys(a).length)return!1;for(n=r;n--!==0;)if(!Object.prototype.hasOwnProperty.call(a,i[n]))return!1;for(n=r;n--!==0;){var o=i[n];if(!e(t[o],a[o]))return!1}return!0}return t!==t&&a!==a};/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */var WX=function(t){return t!=null&&t.constructor!=null&&typeof t.constructor.isBuffer=="function"&&t.constructor.isBuffer(t)};/*!
 * MIT License
 *
 * Copyright (c) Sindre Sorhus <sindresorhus@gmail.com> (https://sindresorhus.com)
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated
 * documentation files (the "Software"), to deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit
 * persons to whom the Software is furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all copies or substantial portions of the
 * Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE
 * WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR
 * COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR
 * OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 */function qX(e){return typeof Blob>"u"?!1:e instanceof Blob||Object.prototype.toString.call(e)==="[object Blob]"}var UX=qX;const Zw=GX,xL=HX,SL=WX,wL=UX,CL=Object.prototype.toString;function TL(e,t){const a=e.length;for(let r=0;r<a;r++){const n=e[r];if(t(n))return n}}function jX(e){return CL.call(e)==="[object Function]"}function P0(e){return e!==null&&typeof e=="object"}function YX(e){return P0(e)&&jX(e.pipe)}function XX(e){return CL.call(e)==="[object ArrayBuffer]"}function Kw(e,t){return e?`${e.replace(/\/+$/,"")}/${t.replace(/^\/+/,"")}`:t}function ZX(e,t,a,r,n,i,o){return TL(e[t.toLowerCase()],function(s){let l=!1;return typeof s.url=="string"?l=Jw(a,s.url)||Jw(Kw(o,a),s.url):s.url instanceof RegExp&&(l=s.url.test(a)||s.url.test(Kw(o,a))),l&&AL(r,n,s)&&B0(i,s.headers)})}function Jw(e,t){const a=e[0]==="/"?e.substr(1):e,r=t[0]==="/"?t.substr(1):t;return a===r}function AL(e,t,a){return B0(t,a.params)&&KX(e,a.data)}function B0(e,t){return t===void 0?!0:typeof t.asymmetricMatch=="function"?t.asymmetricMatch(e):xL(e,t)}function KX(e,t){if(t===void 0)return!0;let a;try{a=JSON.parse(e)}catch{}return B0(a||e,t)}function JX(e,t){const a=e.handlers.indexOf(t);a>-1&&e.handlers.splice(a,1)}function QX(e){return XX(e)||SL(e)||YX(e)||wL(e)?e:P0(e)?JSON.parse(JSON.stringify(e)):e}async function tZ(e,t){typeof e=="function"&&(e=await e(t));const a=e.status||e[0],r=QX(e.data||e[1]),n=e.headers||e[2];return e.config&&(t=e.config),{status:a,data:r,headers:n,config:t,request:{responseURL:t.url}}}async function eZ(e,t,a){a>0&&await new Promise(n=>setTimeout(n,a));const r=await tZ(t,e);if(!r.config.validateStatus||r.config.validateStatus(r.status))return r;throw kL(`Request failed with status code ${r.status}`,r.config,r)}function kL(e,t,a,r){if(typeof Zw.AxiosError=="function")return Zw.AxiosError.from(new Error(e),r,t,null,a);const n=new Error(e);return n.isAxiosError=!0,n.config=t,a!==void 0&&(n.response=a),r!==void 0&&(n.code=r),n.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},n}function aZ(e){const t=`Could not find mock for: 
${JSON.stringify({method:e.method,url:e.url,params:e.params,headers:e.headers},null,2)}`,a=new Error(t);return a.isCouldNotFindMockError=!0,a.url=e.url,a.method=e.method,a}var DL={find:TL,findHandler:ZX,purgeIfReplyOnce:JX,settle:eZ,isObjectOrArray:P0,isBuffer:SL,isBlob:wL,isBodyOrParametersMatching:AL,isEqual:xL,createAxiosError:kL,createCouldNotFindMockError:aZ};const Pl=DL;function Qw(e,t){let a=t.baseURL;return a&&!/^https?:/.test(a)&&(a=void 0),typeof e.originalAdapter=="function"?e.originalAdapter(t):e.axiosInstanceWithoutInterceptors(Object.assign({},t,{baseURL:a,adapter:e.originalAdapter,transformRequest:[],transformResponse:[]}))}async function rZ(e,t){let a=t.url||"";t.baseURL&&a.substr(0,t.baseURL.length)===t.baseURL&&(a=a.slice(t.baseURL.length)),delete t.adapter,e.history.push(t);const r=Pl.findHandler(e.handlers,t.method,a,t.data,t.params,t.headers&&t.headers.constructor.name==="AxiosHeaders"?Object.assign({},t.headers.toJSON()):t.headers,t.baseURL);if(r)return r.replyOnce&&Pl.purgeIfReplyOnce(e,r),r.passThrough?Qw(e,t):Pl.settle(t,r.response,nZ(e,r));switch(e.onNoMatch){case"passthrough":return Qw(e,t);case"throwException":throw Pl.createCouldNotFindMockError(t);default:return Pl.settle(t,{status:404},e.delayResponse)}}function nZ(e,t){return typeof t.delay=="number"?t.delay:e.delayResponse}var iZ=rZ;const oZ=iZ,$n=DL,LL=["get","post","head","delete","patch","put","options","list","link","unlink"];function t2(){const e=[];return LL.forEach(function(t){Object.defineProperty(e,t,{get(){return e.filter(function(a){return!a.method||a.method===t})}})}),e}class O0{constructor(t,a={}){if(this.reset(),t)this.axiosInstance=t,this.axiosInstanceWithoutInterceptors=t.create?t.create():void 0,this.originalAdapter=t.defaults.adapter,this.delayResponse=a.delayResponse>0?a.delayResponse:null,this.onNoMatch=a.onNoMatch||null,t.defaults.adapter=this.adapter();else throw new Error("Please provide an instance of axios to mock")}adapter(){return t=>oZ(this,t)}restore(){this.axiosInstance&&(this.axiosInstance.defaults.adapter=this.originalAdapter,this.axiosInstance=void 0)}reset(){this.resetHandlers(),this.resetHistory()}resetHandlers(){this.handlers?this.handlers.length=0:this.handlers=t2()}resetHistory(){this.history?this.history.length=0:this.history=t2()}}const sZ=["any","get","delete","head","options"];function lZ(e,t,a){return sZ.includes(e)?e2(e,t||{}):e2(e,Object.assign({},a,{data:t}))}const cZ=["headers","params","data"];function e2(e,t){for(const a in t)if(!cZ.includes(a))throw new Error(`Invalid config property ${JSON.stringify(a)} provided to ${IL(e)}. Config: ${JSON.stringify(t)}`);return t}function IL(e){return`on${e.charAt(0).toUpperCase()}${e.slice(1)}`}LL.concat("any").forEach(function(e){O0.prototype[IL(e)]=function(t,a,r){const n=this;let i;t=t===void 0?/.*/:t;const o=lZ(e,a,r);function s(h,d,f){const p={url:t,method:e==="any"?void 0:e,params:o.params,data:o.data,headers:o.headers,replyOnce:!1,delay:i,response:typeof h=="function"?h:[h,d,f]};return Pg(e,n.handlers,p),n}function l(h){i=h;const d=u.reply.bind(u);return Object.assign(d,u),d}function c(h,d,f){const p={url:t,method:e==="any"?void 0:e,params:o.params,data:o.data,headers:o.headers,replyOnce:!0,delay:i,response:typeof h=="function"?h:[h,d,f]};return Pg(e,n.handlers,p),n}const u={reply:s,replyOnce:c,withDelayInMs:l,passThrough(){const h={passThrough:!0,method:e==="any"?void 0:e,url:t,params:o.params,data:o.data,headers:o.headers};return Pg(e,n.handlers,h),n},abortRequest(){return s(async function(h){throw $n.createAxiosError("Request aborted",h,void 0,"ECONNABORTED")})},abortRequestOnce(){return c(async function(h){throw $n.createAxiosError("Request aborted",h,void 0,"ECONNABORTED")})},networkError(){return s(async function(h){throw $n.createAxiosError("Network Error",h)})},networkErrorOnce(){return c(async function(h){throw $n.createAxiosError("Network Error",h)})},timeout(){return s(async function(h){throw $n.createAxiosError(h.timeoutErrorMessage||`timeout of ${h.timeout}ms exceeded`,h,void 0,h.transitional&&h.transitional.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED")})},timeoutOnce(){return c(async function(h){throw $n.createAxiosError(h.timeoutErrorMessage||`timeout of ${h.timeout}ms exceeded`,h,void 0,h.transitional&&h.transitional.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED")})}};return u}});function uZ(e,t){let a=-1;for(let r=0;r<e.length;r+=1){const n=e[r],i=n.url instanceof RegExp&&t.url instanceof RegExp?String(n.url)===String(t.url):n.url===t.url;(!n.method||n.method===t.method)&&i&&$n.isEqual(n.params,t.params)&&$n.isEqual(n.data,t.data)&&$n.isEqual(n.headers,t.headers)&&!n.replyOnce&&(a=r)}return a}function Pg(e,t,a){if(e==="any")t.push(a);else{const r=uZ(t,a);r>-1&&!a.replyOnce?t.splice(r,1,a):t.push(a)}}bL.exports=O0;bL.exports.default=O0;const gn=Je.create({baseURL:"http://localhost:3002",timeout:3e4,headers:{"Content-Type":"application/json",Accept:"application/json"}}),hZ=!0;console.log("🔍 API客户端配置:",{VITE_USE_REAL_API:"true",useRealAPI:hZ,baseURL:gn.defaults.baseURL});console.log("🔗 使用真实API，跳过模拟API中间件");gn.interceptors.request.use(e=>{const t=localStorage.getItem("auth_token");return t&&(e.headers.Authorization=`Bearer ${t}`),e},e=>(console.error("请求错误:",e),Promise.reject(e)));gn.interceptors.response.use(e=>e.data,e=>{var t;if(e.response){const a=e.response.status,r=((t=e.response.data)==null?void 0:t.message)||"未知错误";switch(a){case 401:dt.error("未授权，请重新登录");break;case 403:dt.error("没有权限访问该资源");break;case 404:dt.warning("请求的资源不存在");break;case 500:dt.error(`服务器错误: ${r}`);break;default:dt.error(`请求失败: ${r}`)}}else e.request?dt.error("服务器无响应，请检查网络连接"):dt.error(`请求错误: ${e.message}`);return Promise.reject(e)});const fn={get(e,t={},a={}){return gn.get(e,{params:t,...a})},post(e,t={},a={}){return gn.post(e,t,a)},put(e,t={},a={}){return gn.put(e,t,a)},patch(e,t={},a={}){return gn.patch(e,t,a)},delete(e,t={}){return gn.delete(e,t)},upload(e,t,a){return gn.post(e,t,{headers:{"Content-Type":"multipart/form-data"},onUploadProgress:a})},download(e,t={}){return gn.get(e,{params:t,responseType:"blob"})}},kh={电池盖:["划伤","变形","破裂","起鼓","色差","尺寸异常"],中框:["变形","破裂","掉漆","尺寸异常"],手机卡托:["注塑不良","尺寸异常","断裂","毛刺"],侧键:["脱落","卡键","尺寸异常","松动"],装饰件:["掉色","偏位","脱落"],LCD显示屏:["漏光","暗点","偏色","亮晶"],OLED显示屏:["闪屏","mura","亮点","亮线"],"摄像头(CAM)":["刮花","底座破裂","脏污","无法拍照"],电池:["起鼓","鼓包","漏液","电压不稳定"],充电器:["无法充电","外壳破裂","输出功率异常","发热异常"],喇叭:["无声","杂音","音量小","破裂"],听筒:["无声","杂音","音量小","破裂"],保护套:["尺寸偏差","发黄","开孔错位","模具压痕"],标签:["脱落","错印","logo错误","尺寸异常"],包装盒:["破损","logo错误","错印"]},dZ=new Map,un={PROJECT_BASELINE_RULES:{I6789:["X6827","S665LN","KI4K","X6828"],I6788:["X6831","KI5K","KI3K"],I6787:["S662LN","S663LN","S664LN"]},FACTORY_WAREHOUSE_RULES:{重庆工厂:["重庆库存","中央库存"],深圳工厂:"深圳库存",南昌工厂:"中央库存",宜宾工厂:"中央库存"},BATCH_NO_RULES:{MIN:1e5,MAX:999999},TEST_RECORD_RULES:{MIN_PER_BATCH:5,MAX_PER_BATCH:8,PASS_RATE:.92}};class fZ{constructor(){this.lastUpdateTime=Z(null),this.isUpdating=Z(!1),this.ensureCodeMapInitialized()}async pushDataToAssistant(){console.log("🚀 开始推送数据到AI助手服务...");try{const t=await this.prepareDataForSync();if(!t)throw new Error("数据准备失败，无有效数据可同步");const a=this.validateDataIntegrity(t);a.valid||console.warn("⚠️ 数据完整性检查失败:",a.errors);const r=await this.performDataSync(t),n=await this.verifyBackendData(t);if(r.success&&n.verified)return console.log("✅ 数据同步成功并验证通过"),dt.success(`问答助手数据已同步！(库存:${t.inventory.length}, 检验:${t.inspection.length}, 生产:${t.production.length})`),{success:!0,verified:!0};throw new Error(`数据同步验证失败: ${n.message||"未知错误"}`)}catch(t){return console.error("❌ 数据同步失败:",t),dt.error(`问答助手数据同步失败: ${t.message}`),{success:!1,error:t.message}}}async prepareDataForSync(t=3){console.log("🔍 开始准备同步数据...");for(let i=1;i<=t;i++){console.log(`📋 第${i}次尝试获取数据...`);const o=le.getInventoryData(),s=le.getLabData(),l=le.getOnlineData();console.log("📋 原始数据获取结果:",{inventory:o?o.length:0,inspection:s?s.length:0,production:l?l.length:0});const c={inventory:this.cleanInventoryData(o),inspection:this.cleanInspectionData(s),production:this.cleanProductionData(l)};console.log(`📊 清理后数据: 库存 ${c.inventory.length} 条, 检验 ${c.inspection.length} 条, 生产 ${c.production.length} 条`);const u=c.inventory.length>0,h=c.inspection.length>0,d=c.production.length>0;if(u&&h&&d)return console.log("✅ 所有数据准备完成"),c;if(u&&(h||console.warn("⚠️ 检验数据为空，可能数据生成未完成或数据获取失败"),d||console.warn("⚠️ 生产数据为空，可能数据生成未完成或数据获取失败"),i===t))return console.warn("⚠️ 使用部分数据继续同步"),c;if(i<t){const f=i*300;console.warn(`⚠️ 数据不完整，等待${f}ms后重试...`),await new Promise(p=>setTimeout(p,f))}}console.warn("⚠️ 多次重试后仍有数据缺失，使用现有数据继续同步");const a=le.getInventoryData(),r=le.getLabData(),n=le.getOnlineData();return{inventory:this.cleanInventoryData(a),inspection:this.cleanInspectionData(r),production:this.cleanProductionData(n)}}cleanInventoryData(t){return Array.isArray(t)?t.map(a=>({id:a.id,materialName:a.materialName,materialCode:a.materialCode,batchNo:a.batchNo,supplier:a.supplier,quantity:a.quantity,status:a.status,warehouse:a.warehouse,factory:a.factory,projectId:a.projectId,baselineId:a.baselineId,inboundTime:a.inboundTime,lastUpdateTime:a.lastUpdateTime})):[]}cleanInspectionData(t){return Array.isArray(t)?t.map(a=>({id:a.id,materialName:a.materialName||a.material_name,batchNo:a.batchNo||a.batch_no,supplier:a.supplier,testResult:a.testResult||a.test_result,testDate:a.testDate||a.test_date,projectId:a.projectId||a.project_id,defectDescription:a.defectDescription||a.defect_description})):[]}cleanProductionData(t){return Array.isArray(t)?t.map(a=>({id:a.id,materialName:a.materialName,materialCode:a.materialCode,batchNo:a.batchNo,supplier:a.supplier,factory:a.factory,onlineTime:a.onlineTime||a.useTime,defectRate:a.defectRate||a.defect_rate,defect:a.defect,projectId:a.projectId||a.project_id,baselineId:a.baselineId||a.baseline_id})):[]}validateDataIntegrity(t){const a=[];if(!t||typeof t!="object")return a.push("数据不是有效对象"),{valid:!1,errors:a};const r=["inventory","inspection","production"];for(const n of r)Array.isArray(t[n])||a.push(`${n} 不是有效数组`);if(t.inventory&&t.inventory.length>0){const n=t.inventory[0],i=["materialName","batchNo","supplier"];for(const o of i)n[o]||a.push(`库存数据缺少必要字段: ${o}`)}return{valid:a.length===0,errors:a}}async performDataSync(t){console.log("📤 执行数据同步...");const a=JSON.stringify(t).length;if(console.log(`📊 数据大小: ${(a/1024/1024).toFixed(2)} MB`),a>5*1024*1024)return console.log("📦 数据过大，使用分批推送..."),await this.performBatchSync(t);try{const r=await fn.post("/api/assistant/update-data",t,{headers:{"X-Sync-Timestamp":new Date().toISOString(),"X-Data-Version":this.generateDataVersion(t)},timeout:6e4});return console.log("✅ 标准同步成功:",r),r}catch(r){return console.log("⚠️ 标准同步失败，尝试直接连接:",r.message),await this.performDirectSync(t)}}async performDirectSync(t){try{console.log("🔗 使用直接后端连接...");const a=new AbortController,r=setTimeout(()=>a.abort(),6e4),n=await fetch("http://localhost:3001/api/assistant/update-data",{method:"POST",headers:{"Content-Type":"application/json","X-Sync-Timestamp":new Date().toISOString(),"X-Data-Version":this.generateDataVersion(t)},body:JSON.stringify(t),signal:a.signal});if(clearTimeout(r),!n.ok)throw new Error(`HTTP ${n.status}: ${n.statusText}`);const i=await n.json();return console.log("✅ 直接同步成功:",i),{success:!0,...i}}catch(a){throw a.name==="AbortError"?(console.error("❌ 直接同步超时"),new Error("请求超时，请检查网络连接或后端服务状态")):(console.error("❌ 直接同步失败:",a),a)}}async performBatchSync(t){console.log("📦 开始分批同步...");const a=100,r=[];if(t.inventory.length>0){const n=this.chunkArray(t.inventory,a);for(let i=0;i<n.length;i++){const o=n[i];console.log(`📦 同步库存批次 ${i+1}/${n.length}: ${o.length} 条记录`);const s=await fetch("/api/assistant/update-data-batch",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({type:"inventory",data:o})});s.ok&&r.push(await s.json())}}if(t.inspection.length>0){const n=this.chunkArray(t.inspection,a);for(let i=0;i<n.length;i++){const o=n[i];console.log(`📦 同步检验批次 ${i+1}/${n.length}: ${o.length} 条记录`);const s=await fetch("/api/assistant/update-data-batch",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({type:"inspection",data:o})});s.ok&&r.push(await s.json())}}if(t.production.length>0){const n=this.chunkArray(t.production,a);for(let i=0;i<n.length;i++){const o=n[i];console.log(`📦 同步生产批次 ${i+1}/${n.length}: ${o.length} 条记录`);const s=await fetch("/api/assistant/update-data-batch",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({type:"production",data:o})});s.ok&&r.push(await s.json())}}return console.log("✅ 分批同步完成"),{success:!0,batchResults:r}}async verifyDataGeneration(){try{console.log("🔍 验证数据生成结果...");const t=le.getInventoryData(),a=le.getLabData(),r=le.getOnlineData();console.log("📊 数据生成验证:",{inventory:t?t.length:0,inspection:a?a.length:0,production:r?r.length:0});const n=[];return(!t||t.length===0)&&n.push("库存数据生成失败或为空"),(!a||a.length===0)&&n.push("检验数据生成失败或为空"),(!r||r.length===0)&&n.push("生产数据生成失败或为空"),n.length>0?{success:!1,message:`数据生成存在问题: ${n.join(", ")}`,issues:n}:{success:!0,message:"所有数据生成成功",counts:{inventory:t.length,inspection:a.length,production:r.length}}}catch(t){return console.error("❌ 数据生成验证失败:",t),{success:!1,message:`验证过程出错: ${t.message}`}}}async verifyBackendData(t){try{console.log("🔍 验证后端数据..."),console.log("📊 期望数据量:",{inventory:t.inventory.length,inspection:t.inspection.length,production:t.production.length});const a=await fetch("http://localhost:3001/api/assistant/verify-data",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({expectedCounts:{inventory:t.inventory.length,inspection:t.inspection.length,production:t.production.length}})});if(!a.ok)throw new Error(`验证请求失败: ${a.status} ${a.statusText}`);const r=await a.json();return console.log("🔍 后端数据验证结果:",r),r.verified||console.error("❌ 数据验证详情:",r.checks),r}catch(a){return console.error("❌ 后端数据验证失败:",a),{verified:!1,message:a.message}}}generateDataVersion(t){const a=Date.now(),r=this.simpleHash(JSON.stringify(t));return`${a}-${r}`}simpleHash(t){let a=0;for(let r=0;r<t.length;r++){const n=t.charCodeAt(r);a=(a<<5)-a+n,a=a&a}return Math.abs(a).toString(16)}chunkArray(t,a){const r=[];for(let n=0;n<t.length;n+=a)r.push(t.slice(n,n+a));return r}async ensureCodeMapInitialized(){_L()||(console.log("初始化物料编码映射..."),await yL())}async updateOnlineData(t={}){try{console.log("开始生成上线数据...");const a=t.clearExisting||!1,r=t.count||50,n=t.ensureAllProjects||!1;Ui.initialized||Ui.initialize();let i=le.getOnlineData();a&&(i=[]);const o=[...i],s=le.getInventoryData();if(!s||s.length===0)throw console.warn("没有找到库存数据，无法生成上线数据"),new Error("缺少库存数据，请先生成库存数据");const l=le.getLabData();(!l||l.length===0)&&console.warn("没有找到测试数据，将使用默认项目-基线关系");const c=new Map,u=le.getLabData();for(const d of u){const f=d.projectId||d.project_id,p=d.batchNo||d.batch_no;f&&p&&c.set(p,f)}console.log(`从测试数据中提取的批次-项目映射: ${c.size}个批次`);const h=["X6827","S665LN","KI4K","X6828","X6831","KI5K","KI3K","S662LN","S663LN","S664LN"];if(n){const d=Math.max(2,Math.floor(r/h.length));for(const f of h){const p=[];for(const[g,v]of c.entries())if(v===f){const _=s.find(y=>y.batchNo===g);_&&p.push(_)}if(p.length===0){console.warn(`项目 ${f} 没有关联的批次，随机分配批次`);const g=Math.floor(Math.random()*3)+1;for(let v=0;v<g;v++){const _=Math.floor(Math.random()*s.length),y=s[_];p.push(y),c.set(y.batchNo,f)}}for(const g of p){const v=g.materialName,_=g.batchNo,y=g.supplier,b=this.generateMaterialCode(v,y),w=this.getBaselineByProject(f),T=w?w.baseline_id:"",C=w?w.baseline_name:"",A=this.getDefectRateForMaterial(v,_);for(let k=0;k<d;k++){let L="良好",M="";if(A>0){const D=Math.max(.5,A/100);Math.random()<D&&(L="不良");const B=this.getDefectsByMaterial(v);if(B.length>0){const R=Math.floor(Math.random()*2)+1,V=[];for(let z=0;z<R;z++){const W=B[Math.floor(Math.random()*B.length)];V.includes(W)||V.push(W)}M=V.join("，")}else M="未知不良"}const P=g.factory||this.getRandomFactory(),E={id:this.generateId(),materialName:v,materialCode:b,batchNo:_,supplier:y,projectName:`${f}项目`,projectId:f,baselineId:T,baselineName:C,onlineTime:this.generateRandomTime(),onlineStatus:L,defectRate:A.toFixed(1),defect:M,inspectionDate:this.generateRandomTime(30),factory:P,inspector:`检验员${Math.floor(Math.random()*10)+1}`,status:L};o.push(E)}}}}else{const d=[],f=Math.min(r,s.length),p=Array.from({length:s.length},(g,v)=>v);for(let g=p.length-1;g>0;g--){const v=Math.floor(Math.random()*(g+1));[p[g],p[v]]=[p[v],p[g]]}for(let g=0;g<f;g++)d.push(s[p[g]]);for(const g of d){const v=g.materialName,_=g.batchNo,y=g.supplier,b=this.generateMaterialCode(v,y);let w=c.get(_);w||(w=h[Math.floor(Math.random()*h.length)]);const T=this.getBaselineByProject(w),C=T?T.baseline_id:"",A=T?T.baseline_name:"",k=this.getDefectRateForMaterial(v,_);let L="良好",M="";if(k>0){const D=Math.max(.5,k/100);Math.random()<D&&(L="不良");const B=this.getDefectsByMaterial(v);if(B.length>0){const R=Math.floor(Math.random()*2)+1,V=[];for(let z=0;z<R;z++){const W=B[Math.floor(Math.random()*B.length)];V.includes(W)||V.push(W)}M=V.join("，")}else M="未知不良"}const P=g.factory||this.getRandomFactory(),E={id:this.generateId(),materialName:v,materialCode:b,batchNo:_,supplier:y,projectName:`${w}项目`,projectId:w,baselineId:C,baselineName:A,onlineTime:this.generateRandomTime(),onlineStatus:L,defectRate:k.toFixed(1),defect:M,inspectionDate:this.generateRandomTime(30),factory:P,inspector:`检验员${Math.floor(Math.random()*10)+1}`,status:L};o.push(E)}}return le.saveOnlineData(o),{success:!0,message:`成功生成 ${o.length-i.length} 条上线数据`,data:o}}catch(a){return console.error("生成上线数据失败:",a),{success:!1,message:`生成上线数据失败: ${a.message}`}}}getDefectsByMaterial(t){if(kh[t]){const i=kh[t],o=Math.floor(1+Math.random()*3),s=[];for(let l=0;l<o;l++){const c=i[Math.floor(Math.random()*i.length)];s.includes(c)||s.push(c)}return s}for(const[i,o]of Object.entries(kh))if(t.includes(i)||i.includes(t)){const s=Math.floor(1+Math.random()*2),l=[];for(let c=0;c<s;c++){const u=o[Math.floor(Math.random()*o.length)];l.includes(u)||l.push(u)}return l}const a=["外观不良","尺寸超差","材质问题","标识错误"],r=Math.floor(1+Math.random()*2),n=[];for(let i=0;i<r;i++){const o=a[Math.floor(Math.random()*a.length)];n.includes(o)||n.push(o)}return n}getDefectRateForMaterial(t,a=null){const r=t,n=Math.random().toString(36).substring(2,8),i=`${r}_${n}`;let o;const s=Math.random();return s<.3?o=0:s<.9?o=Math.random()*4.9+.1:o=Math.random()*10+5,o=parseFloat(o.toFixed(1)),dZ.set(i,o),console.log(`物料[${t}]不良率: ${o}%`),o}getDefectRateForBatch(t,a){return this.getDefectRateForMaterial(t,a)}generateMaterialCode(t,a){return $f(t,a)}generateBatchNo(){return Math.floor(Math.random()*(un.BATCH_NO_RULES.MAX-un.BATCH_NO_RULES.MIN+1))+un.BATCH_NO_RULES.MIN}generateRandomTime(t=7){const a=new Date;return a.setDate(a.getDate()-Math.floor(Math.random()*t)),a.setHours(Math.floor(Math.random()*24)),a.setMinutes(Math.floor(Math.random()*60)),a.toISOString()}async generateLabData(t=405,a=!1,r={}){try{console.log("开始生成实验室测试数据..."),Ui.initialized||Ui.initialize();let n=le.getLabData();a&&(n=[]);const i=[...n],o=r.minimalMode||!1,s=r.recordsPerBatch||3;console.log(o?`紧急最小模式：每个批次 × ${s}条测试记录`:"按照规则生成测试数据: 每个批次 × 3条测试记录");const l=le.getInventoryData();if(!l||l.length===0)throw console.warn("没有找到库存数据，无法生成测试数据"),new Error('缺少库存数据，请先在"管理工具"中生成库存数据');const c=le.getInventoryData();console.log(`找到${c.length}条库存数据作为批次基础`);const u=["X6827","S665LN","KI4K","X6828","X6831","KI5K","KI3K","S662LN","S663LN","S664LN"],h={};u.forEach(g=>{const v=this.getBaselineByProject(g);v&&(h[g]=v.baseline_id)}),console.log("项目-基线映射关系:",h);let d=0,f=0;const p=new Map;for(const g of c){const v=g.batchNo;if(p.has(v))continue;const _=u[Math.floor(Math.random()*u.length)];p.set(v,_)}for(const g of c){d++;const v=g.materialName,_=g.batchNo,y=g.materialType||"电子元件",b=g.supplier,w=p.get(_),T=this.generateTestRecords(v,_,y,b,w,s);i.push(...T),f+=T.length}return console.log(`总共生成了${f}条测试记录，涉及${d}个批次`),le.saveLabData(i),{success:!0,message:`成功生成 ${i.length-n.length} 条实验室测试数据`,data:i}}catch(n){return console.error("生成实验室测试数据失败:",n),{success:!1,message:`生成实验室测试数据失败: ${n.message}`}}}async generateFactoryData(t=1080,a=!1,r={}){try{console.log("开始生成工厂上线数据...");const n=await this.checkStorageQuota(1500);console.log("存储空间检查结果:",n);let i=le.getOnlineData();a&&(i=[]);const o=[...i],s=r.minimalMode||!1,l=r.recordsPerBatch||8;console.log(s?`紧急最小模式：每个批次 × ${l}条上线记录`:"按照规则生成上线数据: 每个批次 × 8条上线记录");const c=le.getInventoryData();if(!c||c.length===0)throw console.warn("没有找到库存数据，无法生成上线数据"),new Error("缺少库存数据，请先生成库存数据");const u=le.getLabData();(!u||u.length===0)&&console.warn("没有找到测试数据，将使用默认项目-基线关系");const h=new Map,d=le.getLabData();for(const v of d){const _=v.projectId||v.project_id,y=v.batchNo||v.batch_no;_&&y&&h.set(y,_)}console.log(`从测试数据中提取的批次-项目映射: ${h.size}个批次`);const f=["X6827","S665LN","KI4K","X6828","X6831","KI5K","KI3K","S662LN","S663LN","S664LN"];let p=0,g=0;for(const v of c){p++;const _=v.materialName,y=v.batchNo,b=v.supplier,w=this.generateMaterialCode(_,b);let T=h.get(y);T||(T=f[Math.floor(Math.random()*f.length)],console.warn(`批次 ${y} 没有对应的项目，随机分配项目 ${T}`));const C=this.getBaselineByProject(T),A=C?C.baseline_id:"",k=C?C.baseline_name:"",L=this.getDefectRateForMaterial(_,y);for(let M=0;M<8;M++){const P=this.getDefectRateForMaterial(_),E=P>0?this.getDefectsByMaterial(_):[],D=this.generateRandomDate(30),O={id:this.generateId("ONLINE"),materialName:_,materialCode:this.generateMaterialCode(_,b),batchNo:y,supplier:b,factory:this.getRandomFactory(),line:`产线0${M%4+1}`,useTime:D,onlineTime:D,defectRate:P,defect_rate:P,defect:E.join(", "),project_id:T,projectId:T,project_name:`${T}项目`,baseline_id:A,baseline_name:k,inspectionDate:this.generateRandomTime(30),timestamp:new Date().toISOString()};o.push(O)}}return console.log(`新生成了 ${o.length-i.length} 条工厂上线数据。`),le.saveOnlineData(o),{success:!0,message:`成功生成 ${o.length-i.length} 条工厂上线数据`,data:o}}catch(n){return console.error("生成工厂上线数据失败:",n),{success:!1,message:`生成工厂上线数据失败: ${n.message}`}}}async generateInventoryData(t=135,a=!1,r={}){try{console.log("开始生成库存数据..."),Ui.initialized||Ui.initialize();let n=le.getInventoryData();a&&(n=[]);const i=[...n],o=js();o.length<15&&console.warn(`物料数量不足15种，当前只有${o.length}种，将使用可用的所有物料`);const s=r.minimalMode||!1,l=r.suppliersPerMaterial||3,c=r.batchesPerSupplier||3;console.log(s?`紧急最小模式：每种物料 × ${l}个供应商 × ${c}个批次`:"按照规则生成库存数据: 15种物料 × 3个供应商 × 3个批次 = 135条记录");const u=["重庆工厂","深圳工厂","南昌工厂","宜宾工厂"],h=["中央库存","重庆库存","深圳库存"],d=pi.getProjectData().map(_=>_.project_id),f=pi.getBaselineData().map(_=>_.baseline_id),p=[],g=o.slice(0,Math.min(15,o.length));for(const _ of g){const y=Pw(_.name);y.length<l&&console.warn(`物料 ${_.name} 的供应商不足${l}个，当前只有${y.length}个，将使用可用的所有供应商`);const b=y.slice(0,l);for(const w of b)p.push({materialName:_.name,supplier:w,materialType:_.category||"未知类型"})}console.log(`创建了${p.length}个物料-供应商组合`);const v=new Map;for(const _ of p){const y=`${_.materialName}_${_.supplier}`,b=[];for(let w=0;w<c;w++){let T;do T=this.generateBatchNo();while(b.includes(T));b.push(T);const C=this.generateMaterialCode(_.materialName,_.supplier),A=u[Math.floor(Math.random()*u.length)];let k;A==="重庆工厂"?k=Math.random()<.7?"重庆库存":"中央库存":A==="深圳工厂"?k="深圳库存":k="中央库存";const L=Math.floor(Math.random()*d.length),M=d[L],P=this.getBaselineByProject(M),E=P?P.baseline_id:"",D=Math.floor(Math.random()*1e3)+100;let O;const B=Math.random();B<.7?O="正常":B<.9?O="风险":O="冻结";const R=this.generateRandomTime(30),V=this.generateRandomTime(7),z=new Date(R),W=new Date(z);W.setMonth(z.getMonth()+Math.floor(Math.random()*12)+6);let it="";if(O==="冻结"){const xt=["质量异常，待检验","文档不全，等待补充","供应商资质问题","参数偏差超标","等待工程确认"];it=xt[Math.floor(Math.random()*xt.length)]}const ot={id:this.generateId(),materialName:_.materialName,materialCode:C,materialType:_.materialType||"电子元件",batchNo:T,supplier:_.supplier,quantity:D,status:O,warehouse:k,factory:A,inboundTime:R,lastUpdateTime:V,projectId:M,baselineId:E,expiryDate:W.toISOString(),freezeReason:it,freezeDate:O==="冻结"?this.generateRandomTime(10):null,notes:O==="冻结"?it:""};i.push(ot),Ui.addBatchInfo(T,_.materialName,_.supplier,C)}v.set(y,b)}return console.log(`总共生成了${i.length-n.length}条库存数据`),le.saveInventoryData(i),{success:!0,message:`成功生成${i.length-n.length}条新库存数据`,data:i}}catch(n){return console.error("生成库存数据失败:",n),{success:!1,message:`生成库存数据失败: ${n.message}`,error:n}}}async checkStorageQuota(t){try{let a=0,r=0;for(let u in localStorage)localStorage.hasOwnProperty(u)&&(a+=localStorage[u].length*2/1024,r++);let n=5120;try{if(navigator&&navigator.storage&&navigator.storage.estimate){const u=await navigator.storage.estimate();u&&u.quota&&(n=u.quota/1024)}}catch(u){console.warn("无法获取存储配额信息，使用默认估计值",u)}const i=Math.min(n,4e3),o=a,s=Math.max(0,i-o);console.log(`存储信息: 已使用=${o.toFixed(2)}KB, 可用=${s.toFixed(2)}KB, 估计最大=${i}KB, 项目数=${r}`),console.log(`当前localStorage使用率: ${(o/i*100).toFixed(2)}%, 预计需要: ${t}KB`);const l=o+t<i*.8,c=o/i>.7;if(!l||c){console.warn("存储空间紧张，尝试清理部分非关键数据...");for(let d in localStorage)localStorage.hasOwnProperty(d)&&(d.includes("_backup")||d.includes("_log")||d.includes("_temp")||d.includes("_old"))&&(console.log(`清理非关键数据: ${d}`),localStorage.removeItem(d));let u=0;for(let d in localStorage)localStorage.hasOwnProperty(d)&&(u+=localStorage[d].length*2/1024);const h=Math.max(0,i-u);return console.log(`清理后: 已使用=${u.toFixed(2)}KB, 可用=${h.toFixed(2)}KB`),{hasSpace:u+t<i*.8,usedKB:parseFloat(u.toFixed(2)),requiredKB:t,availableKB:parseFloat(h.toFixed(2)),maxSizeKB:i,clearedSpace:!0}}return{hasSpace:l,usedKB:parseFloat(o.toFixed(2)),requiredKB:t,availableKB:parseFloat(s.toFixed(2)),maxSizeKB:i,clearedSpace:!1}}catch(a){return console.error("检查存储配额出错:",a),{hasSpace:!1,usedKB:0,requiredKB:t,availableKB:0,error:a.message}}}async updateAllSystemData(t={}){try{this.isUpdating.value=!0,console.log("开始更新所有系统数据...");const a=t.clearExisting||!1,r=1024*1024;if(!await this.checkStorageQuota(r))return{success:!1,message:"存储空间不足，无法生成完整数据。请尝试清理旧数据或使用紧急数据模式。"};console.log("开始生成库存数据...");const i=await this.generateInventoryData(132,a);if(!i.success)throw new Error(`生成库存数据失败: ${i.message}`);console.log("开始生成实验室测试数据...");const o=await this.generateLabData(405,a);if(!o.success)throw new Error(`生成实验室测试数据失败: ${o.message}`);console.log("开始生成工厂上线数据...");const s=await this.generateFactoryData(1080,a);if(!s.success)throw new Error(`生成工厂上线数据失败: ${s.message}`);this.lastUpdateTime.value=new Date().toLocaleString(),this.isUpdating.value=!1,await new Promise(c=>setTimeout(c,500));const l=await this.verifyDataGeneration();return l.success||console.warn("⚠️ 数据生成验证失败，但继续尝试同步:",l.message),await this.pushDataToAssistant(),{success:!0,message:"所有系统数据已成功更新",data:{inventory:i.data||[],lab:o.data||[],factory:s.data||[]}}}catch(a){return console.error("更新所有系统数据失败:",a),{success:!1,message:`更新所有系统数据失败: ${a.message}`}}finally{this.isUpdating.value=!1}}async integrateHistoricalData(){try{return console.log("开始集成历史数据..."),le.migrateOldData()}catch(t){return console.error("集成历史数据失败:",t),!1}}checkProjectBaselineRule(t,a){const r=un.PROJECT_BASELINE_RULES;return r[a]&&r[a].includes(t)}checkMaterialSupplierRule(t,a){return Pw(t).includes(a)}checkFactoryWarehouseRule(t,a){const r=un.FACTORY_WAREHOUSE_RULES[t];return r?Array.isArray(r)?r.includes(a):a===r:!1}getValidTestRecordsCount(){return Math.floor(Math.random()*(un.TEST_RECORD_RULES.MAX_PER_BATCH-un.TEST_RECORD_RULES.MIN_PER_BATCH+1))+un.TEST_RECORD_RULES.MIN_PER_BATCH}generateTestRecords(t,a,r,n,i,o=3){const s=[];for(let l=0;l<o;l++){const c=Math.random()<un.TEST_RECORD_RULES.PASS_RATE,u={id:this.generateId(),material_name:t,materialName:t,material_type:r,materialType:r,batch_no:a,batchNo:a,supplier:n,test_date:this.generateRandomDate(),testDate:this.generateRandomDate(),test_result:c?"PASS":"FAIL",testResult:c?"PASS":"FAIL",defect_description:c?"":this.getRandomDefectDescription(),defectDescription:c?"":this.getRandomDefectDescription(),project_id:i,projectId:i};s.push(u)}return s}generateRandomDate(t=30){const a=new Date;return a.setDate(a.getDate()-Math.floor(Math.random()*t)),a.toISOString()}generateId(){return qj()}getRandomDefectDescription(){const t=["外观不良","尺寸超差","材质问题","标识错误","划伤","变形","破裂","起鼓","色差","焊点虚焊","元件缺失","短路","开路"];return t[Math.floor(Math.random()*t.length)]}getRandomMaterial(){const t=js();return!t||t.length===0?{name:"未知物料",type:"未分类"}:t[Math.floor(Math.random()*t.length)]}getRandomProject(){const t=pi.getProjectData();return!t||t.length===0?{id:"P0001",name:"未知项目"}:t[Math.floor(Math.random()*t.length)]}getRandomBaseline(t){const a=pi.getBaselineByProject(t);if(a)return a;const r=pi.getBaselineData();return!r||r.length===0?{id:"B0001",name:"未知基线"}:r[Math.floor(Math.random()*r.length)]}getRandomFactory(){const t=["重庆工厂","深圳工厂","南昌工厂","宜宾工厂"];return t[Math.floor(Math.random()*t.length)]}async generateEmergencyData(){try{this.isUpdating.value=!0,console.log("开始生成紧急最小数据集..."),le.clearAllData();const t=await this.generateInventoryData(15,!0,{minimalMode:!0,suppliersPerMaterial:1,batchesPerSupplier:1});if(!t.success)throw new Error("生成库存数据失败");const a=await this.generateLabData(15,!0,{minimalMode:!0,recordsPerBatch:1});if(!a.success)throw new Error("生成实验室数据失败");const r=await this.generateFactoryData(15,!0,{minimalMode:!0,recordsPerBatch:1});if(!r.success)throw new Error("生成工厂数据失败");return this.lastUpdateTime.value=new Date().toLocaleString(),{success:!0,message:"紧急最小数据集生成成功",data:{inventory:t.data||[],lab:a.data||[],factory:r.data||[]}}}catch(t){return console.error("生成紧急数据失败:",t),{success:!1,message:`生成紧急数据失败: ${t.message}`}}finally{this.isUpdating.value=!1}}getMaterialInfoByCode(t){return mL(t)}getBaselineByProject(t){const r={X6827:"I6789",S665LN:"I6789",KI4K:"I6789",X6828:"I6789",X6831:"I6788",KI5K:"I6788",KI3K:"I6788",S662LN:"I6787",S663LN:"I6787",S664LN:"I6787"}[t];if(!r)return console.warn(`未找到项目 ${t} 对应的基线，使用ProjectBaselineService尝试查找`),pi.getBaselineByProject(t);const i=pi.getBaselineData().find(o=>o.baseline_id===r);return i||(console.warn(`未找到基线ID ${r} 对应的基线数据，返回默认值`),{baseline_id:r,baseline_name:`${r}基线`})}}const Mr=new fZ,ML=Object.freeze(Object.defineProperty({__proto__:null,DATA_RULES:un,MATERIAL_DEFECT_MAP:kh,default:Mr},Symbol.toStringTag,{value:"Module"}));function pZ(e,t){const a=t||new Date,r=a.getFullYear().toString().substr(2,2),n=String(a.getMonth()+1).padStart(2,"0"),i=String(a.getDate()).padStart(2,"0");let o;if(typeof e=="string"){const l=e.match(/\d+/);l&&l.length>0?o=l[0].substring(0,2).padStart(2,"0"):o=Math.floor(10+Math.random()*90).toString()}else o=Math.floor(10+Math.random()*90).toString();const s=Math.floor(100+Math.random()*900).toString();return`M${o}-${r}${n}${i}-${s}`}function gZ(){const t=new Date().getTime().toString().slice(-8),a=Math.floor(Math.random()*1e3).toString().padStart(3,"0");return`T${t}${a}`}function vZ(){const t=new Date().getTime().toString().slice(-8),a=Math.floor(Math.random()*1e3).toString().padStart(3,"0");return`P${t}${a}`}function mZ(e,t){const a=new Date(e);return a.setDate(a.getDate()+t),a}class yZ{constructor(){this.historicalInventoryData=[],this.historicalTestData=[],this.historicalOnlineData=[],this.isInitialized=!1}async initialize(){return this.loadHistoricalData(),this.isInitialized=!0,console.log("数据导入服务已初始化"),!0}loadHistoricalData(){try{const t=JSON.parse(localStorage.getItem("historical_inventory_data")||"[]"),a=JSON.parse(localStorage.getItem("historical_test_data")||"[]"),r=JSON.parse(localStorage.getItem("historical_online_data")||"[]");return this.historicalInventoryData=t,this.historicalTestData=a,this.historicalOnlineData=r,console.log(`已加载历史数据: ${t.length}条库存数据, ${a.length}条测试数据, ${r.length}条上线数据`),!0}catch(t){return console.error("加载历史数据失败:",t),!1}}saveHistoricalData(){try{return localStorage.setItem("historical_inventory_data",JSON.stringify(this.historicalInventoryData)),localStorage.setItem("historical_test_data",JSON.stringify(this.historicalTestData)),localStorage.setItem("historical_online_data",JSON.stringify(this.historicalOnlineData)),!0}catch(t){return console.error("保存历史数据失败:",t),!1}}markAsHistorical(t,a){switch(t){case"inventory":this.historicalInventoryData=[...this.historicalInventoryData,...a];break;case"test":this.historicalTestData=[...this.historicalTestData,...a];break;case"online":this.historicalOnlineData=[...this.historicalOnlineData,...a];break;default:console.warn(`未知数据类型: ${t}`)}this.saveHistoricalData()}importJSON(t,a){try{const r=JSON.parse(t);if(!Array.isArray(r)||r.length===0)throw new Error("JSON数据无效，需要是数组格式");let n=[];switch(a){case"inventory":n=this.processInventoryData(r);break;case"test":n=this.processTestData(r);break;case"online":n=this.processOnlineData(r);break;default:throw new Error(`不支持的数据类型: ${a}`)}return this.markAsHistorical(a,n),this.updateSystemData(a,n,!1),n}catch(r){throw console.error("导入JSON数据失败:",r),dt.error(`导入数据失败: ${r.message}`),r}}generateUniqueId(){return"id-"+Math.random().toString(36).substr(2,9)+"-"+Date.now().toString(36)}processInventoryData(t){return t.map(a=>{var l;const r=a.id||this.generateUniqueId(),n=a.batch_no||a.batchNo||pZ(((l=a.material_code)==null?void 0:l.substring(0,4))||"MAT",new Date(a.arrival_date||a.arrivalDate||Date.now())),i=new Date(a.arrival_date||a.arrivalDate||Date.now()),o=a.shelf_life_days||365,s=a.expiry_date||a.expiryDate||mZ(i,o).toISOString();return{id:r,material_id:a.material_code||a.material_id||a.materialCode||"",material_name:a.material_name||a.materialName||"",material_type:a.material_type||a.category||"",batch_no:n,supplier:a.supplier||"",quantity:a.quantity||0,unit:a.unit||"个",warehouse:a.warehouse||"",location:a.location||"",status:a.status||"正常",quality:a.quality||"合格",arrival_date:a.arrival_date||a.arrivalDate||new Date().toISOString(),expiry_date:s,inspection_date:a.inspection_date||a.inspectionDate||i.toISOString(),remark:a.remark||a.remarks||"",created_at:a.created_at||new Date().toISOString(),project_id:a.project_id||"",project_name:a.project_name||"",baseline_id:a.baseline_id||"",baseline_name:a.baseline_name||"",factory:a.factory||"",factoryCode:a.factory_code||a.factoryCode||"",is_historical:!0}})}processTestData(t){return t.map(a=>{const r=a.id||gZ();let n=a.test_results||a.testResults||{};if(typeof n=="string")try{n=JSON.parse(n)}catch{n={}}return{id:r,material_id:a.material_id||a.material_code||a.materialCode||"",material_name:a.material_name||a.materialName||"",material_type:a.material_type||a.category||"",batch_no:a.batch_no||a.batchNo||"",supplier:a.supplier||"",test_date:a.test_date||a.testDate||new Date().toISOString(),test_results:n,test_conclusion:a.test_conclusion||a.testConclusion||"合格",tester:a.tester||"未知",remarks:a.remarks||a.remark||"",created_at:a.created_at||new Date().toISOString(),project_id:a.project_id||"",project_name:a.project_name||"",baseline_id:a.baseline_id||"",baseline_name:a.baseline_name||"",factory:a.factory||"",factoryCode:a.factory_code||a.factoryCode||"",test_type:a.test_type||a.testType||"",is_historical:!0}})}processOnlineData(t){return t.map(a=>{const r=a.id||vZ(),n=a.project_id||"",i=a.project_name||"",o=a.baseline_id||"",s=a.baseline_name||"",l=a.project_display||(n?i?`${n} ${i}`:n:i),c=a.baseline_display||(o?s?`${o} ${s}`:o:s);return{id:r,online_id:r,material_id:a.material_id||a.material_code||a.materialCode||"",material_name:a.material_name||a.materialName||"",material_type:a.material_type||a.category||"",batch_no:a.batch_no||a.batchNo||"",supplier:a.supplier||"",production_line:a.production_line||a.productionLine||"",line:a.line||a.production_line||a.productionLine||"",factory:a.factory||"",factory_code:a.factory_code||a.factoryCode||"",online_date:a.online_date||a.onlineDate||new Date().toISOString(),planned_quantity:a.planned_quantity||a.plannedQuantity||0,actual_quantity:a.actual_quantity||a.actualQuantity||0,status:a.status||"正常",operator:a.operator||"未知",remarks:a.remarks||a.remark||"",created_at:a.created_at||new Date().toISOString(),project_id:n,project_name:i,baseline_id:o,baseline_name:s,project_display:l,baseline_display:c,defect_rate:a.defect_rate||0,defectRate:a.defectRate||a.defect_rate||0,defect:a.defect||"",is_historical:!0}})}updateSystemData(t,a,r=!1){switch(t){case"inventory":le.saveInventoryData(a,r);break;case"test":le.saveLabTestData(a,r);break;case"online":le.saveOnlineData(a,r);break;default:console.warn(`未知数据类型: ${t}`)}}async generateCompleteDataset(t={}){try{const a=t.inventoryCount||50,r=t.testCount||40,n=t.onlineCount||30;t.clearExisting===!0&&le.clearAllData();const o=await Mr.updateInventoryData({count:a,clearExisting:!0});this.historicalInventoryData.length>0&&(le.saveInventoryData(this.historicalInventoryData,!1),console.log(`已添加${this.historicalInventoryData.length}条历史库存数据`));const s=await Mr.updateLabData({count:r,clearExisting:!0});this.historicalTestData.length>0&&(le.saveLabTestData(this.historicalTestData,!1),console.log(`已添加${this.historicalTestData.length}条历史测试数据`));const l=await Mr.updateOnlineData({count:n,clearExisting:!0});return this.historicalOnlineData.length>0&&(le.saveOnlineData(this.historicalOnlineData,!1),console.log(`已添加${this.historicalOnlineData.length}条历史上线数据`)),dt.success("数据生成完成，包含历史数据"),{inventoryItems:o,testItems:s,onlineItems:l,historicalInventory:this.historicalInventoryData,historicalTest:this.historicalTestData,historicalOnline:this.historicalOnlineData}}catch(a){throw console.error("生成完整数据集失败:",a),dt.error(`生成数据失败: ${a.message}`),a}}getHistoricalData(t){switch(t){case"inventory":return this.historicalInventoryData;case"test":return this.historicalTestData;case"online":return this.historicalOnlineData;default:return console.warn(`未知数据类型: ${t}`),[]}}}const La=new yZ,a2={LABORATORY:"laboratory"},hi={INCOMING:"incoming",PROCESS:"process",OUTGOING:"outgoing",STABILITY:"stability"},Wa={OK:"ok",NG:"ng",DEVIATION:"deviation",PENDING:"pending"},rn={PHYSICAL:"physical",CHEMICAL:"chemical",MECHANICAL:"mechanical",ELECTRICAL:"electrical",DIMENSIONAL:"dimensional",APPEARANCE:"appearance"};class EL{constructor(){this.initialized=!1,this.standardParameters={value:[]}}async initialize(){return this.standardParameters.value=[],this.initialized=!0,!0}getDataStandard(){return{}}getFieldStandard(){return{}}getValidationRules(){return{}}getDataFormat(){return{}}getEnumValues(){return[]}getDataRelations(){return{}}getDataModel(){return{}}validateAgainstStandard(){return{valid:!0,errors:[]}}}class _Z{constructor(){this.items=Z([]),this.batches=Z([]),this.materialTypes=Z([]),this.initialized=!1}async initialize(){if(this.initialized)return!0;try{this.loadMaterialTypes();const t=localStorage.getItem("inventory_data");return t&&(this.items.value=JSON.parse(t)),this.initialized=!0,!0}catch(t){return console.error("初始化库存服务失败:",t),!1}}loadMaterialTypes(){this.materialTypes.value=[{code:"RAW-PP",name:"聚丙烯",category:"原材料"},{code:"RAW-PE",name:"聚乙烯",category:"原材料"},{code:"RAW-ABS",name:"ABS树脂",category:"原材料"},{code:"RAW-PC",name:"聚碳酸酯",category:"原材料"},{code:"ADD-01",name:"抗氧化剂",category:"添加剂"},{code:"ADD-02",name:"紫外线吸收剂",category:"添加剂"},{code:"ADD-03",name:"阻燃剂",category:"添加剂"},{code:"PKG-01",name:"包装膜",category:"包装材料"},{code:"PKG-02",name:"包装盒",category:"包装材料"}]}getAllItems(){return this.items.value}getAllInventory(){return this.items.value}getMaterialTypes(){return this.materialTypes.value}getItemByBatchNo(t){return this.items.value.find(a=>a.batchNo===t)}getItemsByStatus(t){return this.items.value.filter(a=>a.status===t)}addItem(t){if(!t.batchNo)throw new Error("库存项缺少批次号");const a=this.items.value.findIndex(r=>r.batchNo===t.batchNo);return a>=0?this.items.value[a]={...this.items.value[a],...t}:this.items.value.push(t),this._saveToStorage(),t}updateItem(t,a){const r=this.items.value.findIndex(n=>n.batchNo===t);if(r===-1)throw new Error(`未找到批次号为 ${t} 的库存项`);return this.items.value[r]={...this.items.value[r],...a},this._saveToStorage(),this.items.value[r]}_saveToStorage(){localStorage.setItem("inventory_data",JSON.stringify(this.items.value))}}const bZ=new _Z,zr={PASS:"pass",FAIL:"fail",WARNING:"warning",PENDING:"pending"};class xZ{constructor(){this.testRecords=Z([]),this.testItems=Z([]),this.testMethods=Z([]),this.initialized=!1,this.inspectors=[{id:"INS001",name:"张工",department:"质量部",level:"高级",qualification:"国家认证工程师",speciality:"物理性能测试",experience:"10年"},{id:"INS002",name:"李工",department:"质量部",level:"中级",qualification:"企业认证工程师",speciality:"化学性能测试",experience:"5年"},{id:"INS003",name:"王工",department:"实验室",level:"高级",qualification:"国家认证工程师",speciality:"机械性能测试",experience:"12年"},{id:"INS004",name:"赵工",department:"实验室",level:"中级",qualification:"企业认证工程师",speciality:"外观检验",experience:"4年"},{id:"INS005",name:"钱工",department:"研发部",level:"高级",qualification:"研发工程师",speciality:"性能评估",experience:"8年"},{id:"INS006",name:"孙工",department:"质量部",level:"高级",qualification:"国际认证工程师",speciality:"热性能测试",experience:"15年"},{id:"INS007",name:"周工",department:"研发部",level:"中级",qualification:"材料工程师",speciality:"新材料测试",experience:"6年"},{id:"INS008",name:"吴工",department:"实验室",level:"初级",qualification:"助理工程师",speciality:"常规检测",experience:"2年"},{id:"INS009",name:"郑工",department:"质量部",level:"中级",qualification:"质量工程师",speciality:"包装材料测试",experience:"7年"},{id:"INS010",name:"陈工",department:"实验室",level:"高级",qualification:"实验室主管",speciality:"综合测试",experience:"14年"}],this.equipment=[{id:"EQP001",name:"万能材料试验机",model:"UT-5000",brand:"冠测",calibrationDate:"2023-05-10",nextCalibrationDate:"2024-05-10",accuracy:"±0.5%",range:"0-5000N",status:"正常"},{id:"EQP002",name:"红外光谱仪",model:"IR-8000",brand:"安捷伦",calibrationDate:"2023-06-15",nextCalibrationDate:"2024-06-15",accuracy:"±2cm-1",range:"400-4000cm-1",status:"正常"},{id:"EQP003",name:"高效液相色谱仪",model:"HPLC-3500",brand:"岛津",calibrationDate:"2023-07-20",nextCalibrationDate:"2024-07-20",accuracy:"±0.1%",range:"N/A",status:"正常"},{id:"EQP004",name:"电子万能试验机",model:"UTM-2000",brand:"新时代",calibrationDate:"2023-08-05",nextCalibrationDate:"2024-08-05",accuracy:"±1%",range:"0-2000N",status:"正常"},{id:"EQP005",name:"热失重分析仪",model:"TGA-600",brand:"珀金埃尔默",calibrationDate:"2023-09-10",nextCalibrationDate:"2024-09-10",accuracy:"±0.1°C",range:"25-600°C",status:"正常"},{id:"EQP006",name:"示差扫描量热仪",model:"DSC-3000",brand:"美国TA",calibrationDate:"2023-10-15",nextCalibrationDate:"2024-10-15",accuracy:"±0.1°C",range:"-150-600°C",status:"正常"},{id:"EQP007",name:"氧指数测试仪",model:"OI-2000",brand:"泰思特",calibrationDate:"2023-11-20",nextCalibrationDate:"2024-11-20",accuracy:"±0.2%",range:"0-100%",status:"正常"},{id:"EQP008",name:"密度计",model:"DEN-1000",brand:"梅特勒",calibrationDate:"2023-12-05",nextCalibrationDate:"2024-12-05",accuracy:"±0.0001g/cm³",range:"0-3g/cm³",status:"正常"},{id:"EQP009",name:"熔融指数仪",model:"MFI-2000",brand:"戈埃尔特",calibrationDate:"2024-01-10",nextCalibrationDate:"2025-01-10",accuracy:"±0.1g/10min",range:"0.1-100g/10min",status:"正常"},{id:"EQP010",name:"冲击试验机",model:"IT-500",brand:"天工试验",calibrationDate:"2024-02-15",nextCalibrationDate:"2025-02-15",accuracy:"±0.5J",range:"0-50J",status:"正常"},{id:"EQP011",name:"紫外分光光度计",model:"UV-2600",brand:"岛津",calibrationDate:"2024-03-20",nextCalibrationDate:"2025-03-20",accuracy:"±0.002A",range:"190-900nm",status:"正常"},{id:"EQP012",name:"红外热像仪",model:"IR-500",brand:"FLIR",calibrationDate:"2024-04-05",nextCalibrationDate:"2025-04-05",accuracy:"±2°C",range:"-20-500°C",status:"维修中"},{id:"EQP013",name:"维卡软化点测试仪",model:"VST-1000",brand:"戈埃尔特",calibrationDate:"2023-10-25",nextCalibrationDate:"2024-10-25",accuracy:"±0.5°C",range:"30-200°C",status:"正常"},{id:"EQP014",name:"雾度计",model:"HZ-300",brand:"爱色丽",calibrationDate:"2023-11-15",nextCalibrationDate:"2024-11-15",accuracy:"±0.1%",range:"0-100%",status:"正常"},{id:"EQP015",name:"摩擦系数测试仪",model:"COF-2000",brand:"天工试验",calibrationDate:"2024-01-25",nextCalibrationDate:"2025-01-25",accuracy:"±0.01",range:"0-2",status:"正常"}],this.testMethods=Z([])}async initialize(){if(this.initialized)return!0;try{this._loadTestMethods(),this._loadTestItems();const t=localStorage.getItem("test_records");return t&&(this.testRecords.value=JSON.parse(t)),this.initialized=!0,!0}catch(t){return console.error("初始化实验室服务失败:",t),!1}}_loadTestMethods(){this.testMethods.value=[{id:"TM-001",name:"物理性能测试",description:"测量物料的硬度、强度、弹性等物理特性",category:"物理测试"},{id:"TM-002",name:"化学成分分析",description:"分析物料的化学组成和杂质含量",category:"化学测试"},{id:"TM-003",name:"高温性能测试",description:"测试物料在高温环境下的性能和稳定性",category:"环境测试"},{id:"TM-004",name:"燃烧特性测试",description:"测试物料的燃烧特性和阻燃性能",category:"安全测试"},{id:"TM-005",name:"耐候性测试",description:"测试物料对紫外线、湿度等环境因素的耐受性",category:"环境测试"}]}_loadTestItems(){this.testItems.value=[{id:"TI-001",name:"熔点测试",methodId:"TM-001",unit:"℃",normalRange:"120-130"},{id:"TI-002",name:"拉伸强度",methodId:"TM-001",unit:"MPa",normalRange:"25-35"},{id:"TI-003",name:"杂质含量",methodId:"TM-002",unit:"%",normalRange:"≤0.5"},{id:"TI-004",name:"耐热性",methodId:"TM-003",unit:"h",normalRange:"≥48"},{id:"TI-005",name:"阻燃等级",methodId:"TM-004",unit:"",normalRange:"V-0"},{id:"TI-006",name:"抗紫外线性能",methodId:"TM-005",unit:"h",normalRange:"≥1000"}]}getAllTestRecords(){return this.testRecords.value}getTestMethods(){return this.testMethods.value}getTestItems(){return this.testItems.value}getTestRecordById(t){return this.testRecords.value.find(a=>a.id===t)}getTestRecordsByBatchNo(t){return this.testRecords.value.filter(a=>a.batchNo===t)}addTestRecord(t){return t.id||(t.id=`TR-${Date.now()}`),t.createdAt||(t.createdAt=new Date().toISOString()),t.status||(t.status=zr.PENDING),t.batchNo&&(bZ.getItemByBatchNo(t.batchNo)||dt.warning(`批次 ${t.batchNo} 不存在于库存系统中，请先添加库存记录。`)),this.testRecords.value.push(t),this._saveRecordsToStorage(),t}updateTestRecord(t,a){const r=this.testRecords.value.findIndex(n=>n.id===t);if(r===-1)throw new Error(`未找到ID为 ${t} 的测试记录`);return this.testRecords.value[r]={...this.testRecords.value[r],...a,updatedAt:new Date().toISOString()},this._saveRecordsToStorage(),this.testRecords.value[r]}completeTestRecord(t,a,r){return this.updateTestRecord(t,{status:a,completedAt:new Date().toISOString(),remarks:r})}bulkUpdateTestRecords(t){if(!Array.isArray(t))throw new Error("更新必须是数组格式");const a=[];return t.forEach(r=>{try{const n=this.updateTestRecord(r.id,r.changes);a.push(n)}catch(n){console.error(`更新测试记录 ${r.id} 失败:`,n)}}),a}analyzeTestResultsByBatchNo(t){const a=this.getTestRecordsByBatchNo(t);if(a.length===0)return{batchNo:t,totalTests:0,status:"unknown",message:"没有找到相关测试记录"};const r=a.length,n=a.filter(u=>u.status===zr.PASS).length,i=a.filter(u=>u.status===zr.FAIL).length,o=a.filter(u=>u.status===zr.WARNING).length,s=a.filter(u=>u.status===zr.PENDING).length;let l="normal",c="测试通过";return i>0?(l="critical",c=`${i}项测试不合格，建议冻结物料`):o>0?(l="warning",c=`${o}项测试有警告，建议关注`):s>0&&(l="pending",c=`还有${s}项测试未完成`),{batchNo:t,totalTests:r,passedTests:n,failedTests:i,warningTests:o,pendingTests:s,completionRate:r>0?((r-s)/r*100).toFixed(1):"0",passRate:r-s>0?(n/(r-s)*100).toFixed(1):"0",status:l,message:c}}_saveRecordsToStorage(){localStorage.setItem("test_records",JSON.stringify(this.testRecords.value))}}new xZ;class RL{constructor(){this.standardizedTestRecords=Z([]),this.standardizedTestParameters=Z([]),this.initialized=!1,this.labService=null,this.dataStandardService=new EL}async initialize(t){return this.initialized||(this.labService=t,this.dataStandardService.initialized||await this.dataStandardService.initialize(),await this.standardizeTestParameters(),await this.standardizeTestRecords(),this.initialized=!0),!0}async standardizeTestParameters(){if(!this.labService||!this.labService.testParameters||!this.labService.testParameters.value){console.error("实验室服务或测试参数未初始化");return}const a=this.labService.testParameters.value.map(r=>{const n=this.dataStandardService.standardParameters.value.find(i=>i.name===r.name||r.name.includes(i.name)||i.name.includes(r.name));return n?{...r,standardId:n.id,name:n.name,code:n.code,unit:n.unit,type:n.type,lowerLimit:n.defaultLowerLimit!==void 0?n.defaultLowerLimit:r.lowerLimit,upperLimit:n.defaultUpperLimit!==void 0?n.defaultUpperLimit:r.upperLimit,description:n.description||r.significance}:{...r,code:r.name.substring(0,2).toUpperCase(),type:this.inferParameterType(r.name,r.method)}});this.standardizedTestParameters.value=a}inferParameterType(t,a){const r=t.toLowerCase(),n=a?a.toLowerCase():"";return r.includes("外观")||r.includes("颜色")||r.includes("气味")?rn.APPEARANCE:r.includes("尺寸")||r.includes("长度")||r.includes("宽度")||r.includes("厚度")?rn.DIMENSIONAL:r.includes("密度")||r.includes("熔融")||r.includes("粘度")?rn.PHYSICAL:r.includes("拉伸")||r.includes("强度")||r.includes("硬度")||r.includes("弯曲")?rn.MECHANICAL:r.includes("电阻")||r.includes("电压")||r.includes("电流")?rn.ELECTRICAL:r.includes("成分")||r.includes("含量")?rn.CHEMICAL:n.includes("physical")?rn.PHYSICAL:n.includes("chemical")?rn.CHEMICAL:n.includes("mechanical")?rn.MECHANICAL:rn.PHYSICAL}async standardizeTestRecords(){if(!this.labService||!this.labService.testRecords||!this.labService.testRecords.value){console.error("实验室服务或测试记录未初始化");return}const a=this.labService.testRecords.value.map(r=>{let n=hi.INCOMING;r.test_type==="process"?n=hi.PROCESS:r.test_type==="outgoing"?n=hi.OUTGOING:r.test_type==="stability"&&(n=hi.STABILITY);let i=Wa.PENDING;r.result===zr.PASS?i=Wa.OK:r.result===zr.FAIL?i=Wa.NG:r.result===zr.DEVIATION&&(i=Wa.DEVIATION);const o=Array.isArray(r.parameter_values)?r.parameter_values.map(s=>this.standardizeTestDataItem(s)):[];return{...r,dataType:a2.LABORATORY,inspectionPhase:n,evaluationStatus:i,parameter_values:o}});this.standardizedTestRecords.value=a}standardizeTestDataItem(t){const a=this.standardizedTestParameters.value.find(r=>r.name===t.parameter||r.name&&t.parameter&&(r.name.includes(t.parameter)||t.parameter.includes(r.name)));if(a){const r=parseFloat(t.value);let n=t.status;return!isNaN(r)&&(a.lowerLimit!==void 0||a.upperLimit!==void 0)&&(n=this.evaluateTestResult(r,a.lowerLimit,a.upperLimit)),{...t,parameter:a.name,parameterCode:a.code,unit:a.unit||t.unit,type:a.type,status:n}}return t}evaluateTestResult(t,a,r){if(a===void 0&&r===void 0)return Wa.PENDING;if(a!==void 0&&r===void 0)return t<a?Wa.NG:Wa.OK;if(a===void 0&&r!==void 0)return t>r?Wa.NG:Wa.OK;if(t<a||t>r)return Wa.NG;const n=r-a,i=a+n*.1,o=r-n*.1;return t<i||t>o?Wa.WARNING:Wa.OK}getStandardizedTestRecords(){return this.standardizedTestRecords.value}getStandardizedTestRecordsByBatchId(t){return this.standardizedTestRecords.value.filter(a=>a.batchId===t)}addTestRecord(t){const a=this.labService.addTestRecord(t),r=this.standardizeTestRecord(a);return this.standardizedTestRecords.value.push(r),r}standardizeTestRecord(t){let a=hi.INCOMING;t.test_type==="process"?a=hi.PROCESS:t.test_type==="outgoing"?a=hi.OUTGOING:t.test_type==="stability"&&(a=hi.STABILITY);let r=Wa.PENDING;t.result===zr.PASS?r=Wa.OK:t.result===zr.FAIL?r=Wa.NG:t.result===zr.DEVIATION&&(r=Wa.DEVIATION);const n=Array.isArray(t.parameter_values)?t.parameter_values.map(i=>this.standardizeTestDataItem(i)):[];return{...t,dataType:a2.LABORATORY,inspectionPhase:a,evaluationStatus:r,parameter_values:n}}}new RL;const SZ={QUALITY_ISSUE:"quality_issue",INSPECTION:"inspection",DEVIATION:"deviation",COMPLAINT:"complaint",AUDIT:"audit"};class wZ{constructor(){this.eventTypes=SZ,this.qualityService=null,this.initialized=!1}async initialize(t){return this.qualityService=t,this.initialized=!0,!0}getEventTypes(){return this.eventTypes}}const CZ=new EL;async function TZ(){try{console.log("开始初始化服务...");const e=le.migrateOldData();console.log("数据迁移"+(e?"成功":"失败或无需迁移"));const t=await pi.initialize();console.log("项目基线服务初始化"+(t?"成功":"失败"));const a=await La.initialize();return console.log("数据导入服务初始化"+(a?"成功":"失败")),await CZ.initialize(),await new RL().initialize(),await new wZ().initialize(),console.log("所有服务初始化完成"),!0}catch(e){return console.error("服务初始化失败:",e),!1}}const AZ={class:"dashboard-container"},kZ={class:"stats-icon"},DZ={class:"stats-info"},LZ={class:"stats-value"},IZ={class:"stats-icon blue"},MZ={class:"stats-info"},EZ={class:"stats-value"},RZ={class:"stats-icon green"},PZ={class:"stats-info"},BZ={class:"stats-value"},OZ={class:"stats-icon orange"},NZ={class:"stats-info"},$Z={class:"stats-value"},FZ={class:"item-title"},zZ={class:"item-desc"},VZ={class:"card-header"},GZ={__name:"Dashboard",setup(e){ue([Tn,Cn,ri,An,Vi,fl,zo,kn]);const t=hl(),a=Z(0),r=Z(0),n=Z(0),i=Z(0),o=Z(null),s=Z(null),l=Z("week"),c=[{title:"库存管理",description:"查看和管理物料库存信息",icon:"Box",path:"/inventory"},{title:"实验室数据",description:"查看物料测试结果数据",icon:"DocumentChecked",path:"/lab"},{title:"上线跟踪",description:"查看物料上线使用情况",icon:"SetUp",path:"/factory"},{title:"批次管理",description:"管理物料批次信息",icon:"Goods",path:"/batch"},{title:"异常管理",description:"处理物料异常情况",icon:"Warning",path:"/material-exception"},{title:"数据分析",description:"物料数据分析报表",icon:"DataAnalysis",path:"/admin/data"}],u=async()=>{try{a.value=128,r.value=85,n.value=96,i.value=12,h(),d()}catch(p){console.error("初始化数据失败:",p)}},h=()=>{if(!o.value)return;const p=xr(o.value),g={title:{text:"物料质量趋势"},tooltip:{trigger:"axis"},legend:{data:["合格率","不良率"]},xAxis:{type:"category",data:["周一","周二","周三","周四","周五","周六","周日"]},yAxis:{type:"value",axisLabel:{formatter:"{value}%"}},series:[{name:"合格率",type:"line",data:[92,93,95,89,91,90,94],itemStyle:{color:"#67C23A"}},{name:"不良率",type:"line",data:[8,7,5,11,9,10,6],itemStyle:{color:"#F56C6C"}}]};p.setOption(g),window.addEventListener("resize",()=>{p.resize()})},d=()=>{if(!s.value)return;const p=xr(s.value),g={title:{text:"物料类型分布"},tooltip:{trigger:"item",formatter:"{a} <br/>{b}: {c} ({d}%)"},legend:{orient:"vertical",right:10,top:"center",data:["电子元件","结构件","显示模组","包装材料","其他"]},series:[{name:"物料类型",type:"pie",radius:["50%","70%"],avoidLabelOverlap:!1,itemStyle:{borderRadius:10,borderColor:"#fff",borderWidth:2},label:{show:!1,position:"center"},emphasis:{label:{show:!0,fontSize:"18",fontWeight:"bold"}},labelLine:{show:!1},data:[{value:45,name:"电子元件"},{value:25,name:"结构件"},{value:15,name:"显示模组"},{value:10,name:"包装材料"},{value:5,name:"其他"}]}]};p.setOption(g),window.addEventListener("resize",()=>{p.resize()})},f=p=>{t.push(p)};return Ra(()=>{u()}),(p,g)=>{const v=q("el-icon"),_=q("el-card"),y=q("el-col"),b=q("el-row"),w=q("el-radio-button"),T=q("el-radio-group");return J(),ht("div",AZ,[g[14]||(g[14]=S("h1",{class:"page-title"},"IQE智能检验平台",-1)),m(b,{gutter:20,class:"dashboard-stats"},{default:x(()=>[m(y,{xs:24,sm:12,md:6},{default:x(()=>[m(_,{shadow:"hover",class:"stats-card"},{default:x(()=>[S("div",kZ,[m(v,null,{default:x(()=>[m(kt(oy))]),_:1})]),S("div",DZ,[g[1]||(g[1]=S("div",{class:"stats-title"},"物料总数",-1)),S("div",LZ,N(a.value),1),g[2]||(g[2]=S("div",{class:"stats-change"},[F(" 较昨日 "),S("span",{class:"up"},"+"+N(12))],-1))])]),_:1})]),_:1}),m(y,{xs:24,sm:12,md:6},{default:x(()=>[m(_,{shadow:"hover",class:"stats-card"},{default:x(()=>[S("div",IZ,[m(v,null,{default:x(()=>[m(kt(h3))]),_:1})]),S("div",MZ,[g[3]||(g[3]=S("div",{class:"stats-title"},"实验室测试",-1)),S("div",EZ,N(r.value),1),g[4]||(g[4]=S("div",{class:"stats-change"},[F(" 较昨日 "),S("span",{class:"up"},"+"+N(8))],-1))])]),_:1})]),_:1}),m(y,{xs:24,sm:12,md:6},{default:x(()=>[m(_,{shadow:"hover",class:"stats-card"},{default:x(()=>[S("div",RZ,[m(v,null,{default:x(()=>[m(kt(d3))]),_:1})]),S("div",PZ,[g[5]||(g[5]=S("div",{class:"stats-title"},"上线物料",-1)),S("div",BZ,N(n.value),1),g[6]||(g[6]=S("div",{class:"stats-change"},[F(" 较昨日 "),S("span",{class:"up"},"+"+N(15))],-1))])]),_:1})]),_:1}),m(y,{xs:24,sm:12,md:6},{default:x(()=>[m(_,{shadow:"hover",class:"stats-card"},{default:x(()=>[S("div",OZ,[m(v,null,{default:x(()=>[m(kt(Ro))]),_:1})]),S("div",NZ,[g[7]||(g[7]=S("div",{class:"stats-title"},"异常警报",-1)),S("div",$Z,N(i.value),1),g[8]||(g[8]=S("div",{class:"stats-change"},[F(" 较昨日 "),S("span",{class:"down"},"-"+N(3))],-1))])]),_:1})]),_:1})]),_:1}),m(_,{class:"quick-access-card"},{header:x(()=>g[9]||(g[9]=[S("div",{class:"card-header"},[S("h2",null,"快速访问")],-1)])),default:x(()=>[m(b,{gutter:20,class:"quick-access-grid"},{default:x(()=>[(J(),ht(ye,null,Se(c,(C,A)=>m(y,{xs:24,sm:8,md:6,key:A},{default:x(()=>[m(_,{shadow:"hover",class:"quick-access-item",onClick:k=>f(C.path)},{default:x(()=>[m(v,{size:32},{default:x(()=>[(J(),Jt(Fn(C.icon)))]),_:2},1024),S("div",FZ,N(C.title),1),S("div",zZ,N(C.description),1)]),_:2},1032,["onClick"])]),_:2},1024)),64))]),_:1})]),_:1}),m(b,{gutter:20,class:"chart-row"},{default:x(()=>[m(y,{xs:24,md:12},{default:x(()=>[m(_,{class:"chart-card"},{header:x(()=>[S("div",VZ,[g[12]||(g[12]=S("h2",null,"物料质量趋势",-1)),m(T,{modelValue:l.value,"onUpdate:modelValue":g[0]||(g[0]=C=>l.value=C),size:"small"},{default:x(()=>[m(w,{label:"week"},{default:x(()=>g[10]||(g[10]=[F("本周")])),_:1,__:[10]}),m(w,{label:"month"},{default:x(()=>g[11]||(g[11]=[F("本月")])),_:1,__:[11]})]),_:1},8,["modelValue"])])]),default:x(()=>[S("div",{class:"chart-container",ref_key:"qualityChartRef",ref:o},null,512)]),_:1})]),_:1}),m(y,{xs:24,md:12},{default:x(()=>[m(_,{class:"chart-card"},{header:x(()=>g[13]||(g[13]=[S("div",{class:"card-header"},[S("h2",null,"物料类型分布")],-1)])),default:x(()=>[S("div",{class:"chart-container",ref_key:"categoryChartRef",ref:s},null,512)]),_:1})]),_:1})]),_:1})])}}},HZ=ca(GZ,[["__scopeId","data-v-8b6c1446"]]);var nn=cy.CMD;function gs(e,t){return Math.abs(e-t)<1e-5}function um(e){var t=e.data,a=e.len(),r=[],n,i=0,o=0,s=0,l=0;function c(D,O){n&&n.length>2&&r.push(n),n=[D,O]}function u(D,O,B,R){gs(D,B)&&gs(O,R)||n.push(D,O,B,R,B,R)}function h(D,O,B,R,V,z){var W=Math.abs(O-D),it=Math.tan(W/4)*4/3,ot=O<D?-1:1,xt=Math.cos(D),j=Math.sin(D),mt=Math.cos(O),Tt=Math.sin(O),Mt=xt*V+B,et=j*z+R,ut=mt*V+B,at=Tt*z+R,Q=V*it*ot,bt=z*it*ot;n.push(Mt-Q*j,et+bt*xt,ut+Q*Tt,at-bt*mt,ut,at)}for(var d,f,p,g,v=0;v<a;){var _=t[v++],y=v===1;switch(y&&(i=t[v],o=t[v+1],s=i,l=o,(_===nn.L||_===nn.C||_===nn.Q)&&(n=[s,l])),_){case nn.M:i=s=t[v++],o=l=t[v++],c(s,l);break;case nn.L:d=t[v++],f=t[v++],u(i,o,d,f),i=d,o=f;break;case nn.C:n.push(t[v++],t[v++],t[v++],t[v++],i=t[v++],o=t[v++]);break;case nn.Q:d=t[v++],f=t[v++],p=t[v++],g=t[v++],n.push(i+2/3*(d-i),o+2/3*(f-o),p+2/3*(d-p),g+2/3*(f-g),p,g),i=p,o=g;break;case nn.A:var b=t[v++],w=t[v++],T=t[v++],C=t[v++],A=t[v++],k=t[v++]+A;v+=1;var L=!t[v++];d=Math.cos(A)*T+b,f=Math.sin(A)*C+w,y?(s=d,l=f,c(s,l)):u(i,o,d,f),i=Math.cos(k)*T+b,o=Math.sin(k)*C+w;for(var M=(L?-1:1)*Math.PI/2,P=A;L?P>k:P<k;P+=M){var E=L?Math.max(P+M,k):Math.min(P+M,k);h(P,E,b,w,T,C)}break;case nn.R:s=i=t[v++],l=o=t[v++],d=s+t[v++],f=l+t[v++],c(d,l),u(d,l,d,f),u(d,f,s,f),u(s,f,s,l),u(s,l,d,l);break;case nn.Z:n&&u(i,o,s,l),i=s,o=l;break}}return n&&n.length>2&&r.push(n),r}function hm(e,t,a,r,n,i,o,s,l,c){if(gs(e,a)&&gs(t,r)&&gs(n,o)&&gs(i,s)){l.push(o,s);return}var u=2/c,h=u*u,d=o-e,f=s-t,p=Math.sqrt(d*d+f*f);d/=p,f/=p;var g=a-e,v=r-t,_=n-o,y=i-s,b=g*g+v*v,w=_*_+y*y;if(b<h&&w<h){l.push(o,s);return}var T=d*g+f*v,C=-d*_-f*y,A=b-T*T,k=w-C*C;if(A<h&&T>=0&&k<h&&C>=0){l.push(o,s);return}var L=[],M=[];td(e,a,n,o,.5,L),td(t,r,i,s,.5,M),hm(L[0],M[0],L[1],M[1],L[2],M[2],L[3],M[3],l,c),hm(L[4],M[4],L[5],M[5],L[6],M[6],L[7],M[7],l,c)}function WZ(e,t){var a=um(e),r=[];t=t||1;for(var n=0;n<a.length;n++){var i=a[n],o=[],s=i[0],l=i[1];o.push(s,l);for(var c=2;c<i.length;){var u=i[c++],h=i[c++],d=i[c++],f=i[c++],p=i[c++],g=i[c++];hm(s,l,u,h,d,f,p,g,o,t),s=p,l=g}r.push(o)}return r}function PL(e,t,a){var r=e[t],n=e[1-t],i=Math.abs(r/n),o=Math.ceil(Math.sqrt(i*a)),s=Math.floor(a/o);s===0&&(s=1,o=a);for(var l=[],c=0;c<o;c++)l.push(s);var u=o*s,h=a-u;if(h>0)for(var c=0;c<h;c++)l[c%o]+=1;return l}function r2(e,t,a){for(var r=e.r0,n=e.r,i=e.startAngle,o=e.endAngle,s=Math.abs(o-i),l=s*n,c=n-r,u=l>Math.abs(c),h=PL([l,c],u?0:1,t),d=(u?s:c)/h.length,f=0;f<h.length;f++)for(var p=(u?c:s)/h[f],g=0;g<h[f];g++){var v={};u?(v.startAngle=i+d*f,v.endAngle=i+d*(f+1),v.r0=r+p*g,v.r=r+p*(g+1)):(v.startAngle=i+p*g,v.endAngle=i+p*(g+1),v.r0=r+d*f,v.r=r+d*(f+1)),v.clockwise=e.clockwise,v.cx=e.cx,v.cy=e.cy,a.push(v)}}function qZ(e,t,a){for(var r=e.width,n=e.height,i=r>n,o=PL([r,n],i?0:1,t),s=i?"width":"height",l=i?"height":"width",c=i?"x":"y",u=i?"y":"x",h=e[s]/o.length,d=0;d<o.length;d++)for(var f=e[l]/o[d],p=0;p<o[d];p++){var g={};g[c]=d*h,g[u]=p*f,g[s]=h,g[l]=f,g.x+=e.x,g.y+=e.y,a.push(g)}}function n2(e,t,a,r){return e*r-a*t}function UZ(e,t,a,r,n,i,o,s){var l=a-e,c=r-t,u=o-n,h=s-i,d=n2(u,h,l,c);if(Math.abs(d)<1e-6)return null;var f=e-n,p=t-i,g=n2(f,p,u,h)/d;return g<0||g>1?null:new Hr(g*l+e,g*c+t)}function jZ(e,t,a){var r=new Hr;Hr.sub(r,a,t),r.normalize();var n=new Hr;Hr.sub(n,e,t);var i=n.dot(r);return i}function ts(e,t){var a=e[e.length-1];a&&a[0]===t[0]&&a[1]===t[1]||e.push(t)}function YZ(e,t,a){for(var r=e.length,n=[],i=0;i<r;i++){var o=e[i],s=e[(i+1)%r],l=UZ(o[0],o[1],s[0],s[1],t.x,t.y,a.x,a.y);l&&n.push({projPt:jZ(l,t,a),pt:l,idx:i})}if(n.length<2)return[{points:e},{points:e}];n.sort(function(v,_){return v.projPt-_.projPt});var c=n[0],u=n[n.length-1];if(u.idx<c.idx){var h=c;c=u,u=h}for(var d=[c.pt.x,c.pt.y],f=[u.pt.x,u.pt.y],p=[d],g=[f],i=c.idx+1;i<=u.idx;i++)ts(p,e[i].slice());ts(p,f),ts(p,d);for(var i=u.idx+1;i<=c.idx+r;i++)ts(g,e[i%r].slice());return ts(g,d),ts(g,f),[{points:p},{points:g}]}function i2(e){var t=e.points,a=[],r=[];pf(t,a,r);var n=new aa(a[0],a[1],r[0]-a[0],r[1]-a[1]),i=n.width,o=n.height,s=n.x,l=n.y,c=new Hr,u=new Hr;return i>o?(c.x=u.x=s+i/2,c.y=l,u.y=l+o):(c.y=u.y=l+o/2,c.x=s,u.x=s+i),YZ(t,c,u)}function bd(e,t,a,r){if(a===1)r.push(t);else{var n=Math.floor(a/2),i=e(t);bd(e,i[0],n,r),bd(e,i[1],a-n,r)}return r}function XZ(e,t){for(var a=[],r=0;r<t;r++)a.push(yy(e));return a}function ZZ(e,t){t.setStyle(e.style),t.z=e.z,t.z2=e.z2,t.zlevel=e.zlevel}function KZ(e){for(var t=[],a=0;a<e.length;)t.push([e[a++],e[a++]]);return t}function JZ(e,t){var a=[],r=e.shape,n;switch(e.type){case"rect":qZ(r,t,a),n=Ge;break;case"sector":r2(r,t,a),n=Pr;break;case"circle":r2({r0:0,r:r.r,startAngle:0,endAngle:Math.PI*2,cx:r.cx,cy:r.cy},t,a),n=Pr;break;default:var i=e.getComputedTransform(),o=i?Math.sqrt(Math.max(i[0]*i[0]+i[1]*i[1],i[2]*i[2]+i[3]*i[3])):1,s=Ot(WZ(e.getUpdatedPathProxy(),o),function(_){return KZ(_)}),l=s.length;if(l===0)bd(i2,{points:s[0]},t,a);else if(l===t)for(var c=0;c<l;c++)a.push({points:s[c]});else{var u=0,h=Ot(s,function(_){var y=[],b=[];pf(_,y,b);var w=(b[1]-y[1])*(b[0]-y[0]);return u+=w,{poly:_,area:w}});h.sort(function(_,y){return y.area-_.area});for(var d=t,c=0;c<l;c++){var f=h[c];if(d<=0)break;var p=c===l-1?d:Math.ceil(f.area/u*t);p<0||(bd(i2,{points:f.poly},p,a),d-=p)}}n=Br;break}if(!n)return XZ(e,t);for(var g=[],c=0;c<a.length;c++){var v=new n;v.setShape(a[c]),ZZ(e,v),g.push(v)}return g}function QZ(e,t){var a=e.length,r=t.length;if(a===r)return[e,t];for(var n=[],i=[],o=a<r?e:t,s=Math.min(a,r),l=Math.abs(r-a)/6,c=(s-2)/6,u=Math.ceil(l/c)+1,h=[o[0],o[1]],d=l,f=2;f<s;){var p=o[f-2],g=o[f-1],v=o[f++],_=o[f++],y=o[f++],b=o[f++],w=o[f++],T=o[f++];if(d<=0){h.push(v,_,y,b,w,T);continue}for(var C=Math.min(d,u-1)+1,A=1;A<=C;A++){var k=A/C;td(p,v,y,w,k,n),td(g,_,b,T,k,i),p=n[3],g=i[3],h.push(n[1],i[1],n[2],i[2],p,g),v=n[5],_=i[5],y=n[6],b=i[6]}d-=C-1}return o===e?[h,t]:[e,h]}function o2(e,t){for(var a=e.length,r=e[a-2],n=e[a-1],i=[],o=0;o<t.length;)i[o++]=r,i[o++]=n;return i}function tK(e,t){for(var a,r,n,i=[],o=[],s=0;s<Math.max(e.length,t.length);s++){var l=e[s],c=t[s],u=void 0,h=void 0;l?c?(a=QZ(l,c),u=a[0],h=a[1],r=u,n=h):(h=o2(n||l,l),u=l):(u=o2(r||c,c),h=c),i.push(u),o.push(h)}return[i,o]}function s2(e){for(var t=0,a=0,r=0,n=e.length,i=0,o=n-2;i<n;o=i,i+=2){var s=e[o],l=e[o+1],c=e[i],u=e[i+1],h=s*u-c*l;t+=h,a+=(s+c)*h,r+=(l+u)*h}return t===0?[e[0]||0,e[1]||0]:[a/t/3,r/t/3,t]}function eK(e,t,a,r){for(var n=(e.length-2)/6,i=1/0,o=0,s=e.length,l=s-2,c=0;c<n;c++){for(var u=c*6,h=0,d=0;d<s;d+=2){var f=d===0?u:(u+d-2)%l+2,p=e[f]-a[0],g=e[f+1]-a[1],v=t[d]-r[0],_=t[d+1]-r[1],y=v-p,b=_-g;h+=y*y+b*b}h<i&&(i=h,o=c)}return o}function aK(e){for(var t=[],a=e.length,r=0;r<a;r+=2)t[r]=e[a-r-2],t[r+1]=e[a-r-1];return t}function rK(e,t,a,r){for(var n=[],i,o=0;o<e.length;o++){var s=e[o],l=t[o],c=s2(s),u=s2(l);i==null&&(i=c[2]<0!=u[2]<0);var h=[],d=[],f=0,p=1/0,g=[],v=s.length;i&&(s=aK(s));for(var _=eK(s,l,c,u)*6,y=v-2,b=0;b<y;b+=2){var w=(_+b)%y+2;h[b+2]=s[w]-c[0],h[b+3]=s[w+1]-c[1]}h[0]=s[_]-c[0],h[1]=s[_+1]-c[1];for(var T=r/a,C=-r/2;C<=r/2;C+=T){for(var A=Math.sin(C),k=Math.cos(C),L=0,b=0;b<s.length;b+=2){var M=h[b],P=h[b+1],E=l[b]-u[0],D=l[b+1]-u[1],O=E*k-D*A,B=E*A+D*k;g[b]=O,g[b+1]=B;var R=O-M,V=B-P;L+=R*R+V*V}if(L<p){p=L,f=C;for(var z=0;z<g.length;z++)d[z]=g[z]}}n.push({from:h,to:d,fromCp:c,toCp:u,rotation:-f})}return n}function xd(e){return e.__isCombineMorphing}var BL="__mOriginal_";function Sd(e,t,a){var r=BL+t,n=e[r]||e[t];e[r]||(e[r]=e[t]);var i=a.replace,o=a.after,s=a.before;e[t]=function(){var l=arguments,c;return s&&s.apply(this,l),i?c=i.apply(this,l):c=n.apply(this,l),o&&o.apply(this,l),c}}function pc(e,t){var a=BL+t;e[a]&&(e[t]=e[a],e[a]=null)}function l2(e,t){for(var a=0;a<e.length;a++)for(var r=e[a],n=0;n<r.length;){var i=r[n],o=r[n+1];r[n++]=t[0]*i+t[2]*o+t[4],r[n++]=t[1]*i+t[3]*o+t[5]}}function OL(e,t){var a=e.getUpdatedPathProxy(),r=t.getUpdatedPathProxy(),n=tK(um(a),um(r)),i=n[0],o=n[1],s=e.getComputedTransform(),l=t.getComputedTransform();function c(){this.transform=null}s&&l2(i,s),l&&l2(o,l),Sd(t,"updateTransform",{replace:c}),t.transform=null;var u=rK(i,o,10,Math.PI),h=[];Sd(t,"buildPath",{replace:function(d){for(var f=t.__morphT,p=1-f,g=[],v=0;v<u.length;v++){var _=u[v],y=_.from,b=_.to,w=_.rotation*f,T=_.fromCp,C=_.toCp,A=Math.sin(w),k=Math.cos(w);WO(g,T,C,f);for(var L=0;L<y.length;L+=2){var M=y[L],P=y[L+1],E=b[L],D=b[L+1],O=M*p+E*f,B=P*p+D*f;h[L]=O*k-B*A+g[0],h[L+1]=O*A+B*k+g[1]}var R=h[0],V=h[1];d.moveTo(R,V);for(var L=2;L<y.length;){var E=h[L++],D=h[L++],z=h[L++],W=h[L++],it=h[L++],ot=h[L++];R===E&&V===D&&z===it&&W===ot?d.lineTo(it,ot):d.bezierCurveTo(E,D,z,W,it,ot),R=it,V=ot}}}})}function N0(e,t,a){if(!e||!t)return t;var r=a.done,n=a.during;OL(e,t),t.__morphT=0;function i(){pc(t,"buildPath"),pc(t,"updateTransform"),t.__morphT=-1,t.createPathProxy(),t.dirtyShape()}return t.animateTo({__morphT:1},_e({during:function(o){t.dirtyShape(),n&&n(o)},done:function(){i(),r&&r()}},a)),t}function nK(e,t,a,r,n,i){var o=16;e=n===a?0:Math.round(32767*(e-a)/(n-a)),t=i===r?0:Math.round(32767*(t-r)/(i-r));for(var s=0,l,c=(1<<o)/2;c>0;c/=2){var u=0,h=0;(e&c)>0&&(u=1),(t&c)>0&&(h=1),s+=c*c*(3*u^h),h===0&&(u===1&&(e=c-1-e,t=c-1-t),l=e,e=t,t=l)}return s}function wd(e){var t=1/0,a=1/0,r=-1/0,n=-1/0,i=Ot(e,function(s){var l=s.getBoundingRect(),c=s.getComputedTransform(),u=l.x+l.width/2+(c?c[4]:0),h=l.y+l.height/2+(c?c[5]:0);return t=Math.min(u,t),a=Math.min(h,a),r=Math.max(u,r),n=Math.max(h,n),[u,h]}),o=Ot(i,function(s,l){return{cp:s,z:nK(s[0],s[1],t,a,r,n),path:e[l]}});return o.sort(function(s,l){return s.z-l.z}).map(function(s){return s.path})}function NL(e){return JZ(e.path,e.count)}function dm(){return{fromIndividuals:[],toIndividuals:[],count:0}}function iK(e,t,a){var r=[];function n(T){for(var C=0;C<T.length;C++){var A=T[C];xd(A)?n(A.childrenRef()):A instanceof va&&r.push(A)}}n(e);var i=r.length;if(!i)return dm();var o=a.dividePath||NL,s=o({path:t,count:i});if(s.length!==i)return console.error("Invalid morphing: unmatched splitted path"),dm();r=wd(r),s=wd(s);for(var l=a.done,c=a.during,u=a.individualDelay,h=new Ul,d=0;d<i;d++){var f=r[d],p=s[d];p.parent=t,p.copyTransform(h),u||OL(f,p)}t.__isCombineMorphing=!0,t.childrenRef=function(){return s};function g(T){for(var C=0;C<s.length;C++)s[C].addSelfToZr(T)}Sd(t,"addSelfToZr",{after:function(T){g(T)}}),Sd(t,"removeSelfFromZr",{after:function(T){for(var C=0;C<s.length;C++)s[C].removeSelfFromZr(T)}});function v(){t.__isCombineMorphing=!1,t.__morphT=-1,t.childrenRef=null,pc(t,"addSelfToZr"),pc(t,"removeSelfFromZr")}var _=s.length;if(u)for(var y=_,b=function(){y--,y===0&&(v(),l&&l())},d=0;d<_;d++){var w=u?_e({delay:(a.delay||0)+u(d,_,r[d],s[d]),done:b},a):a;N0(r[d],s[d],w)}else t.__morphT=0,t.animateTo({__morphT:1},_e({during:function(T){for(var C=0;C<_;C++){var A=s[C];A.__morphT=t.__morphT,A.dirtyShape()}c&&c(T)},done:function(){v();for(var T=0;T<e.length;T++)pc(e[T],"updateTransform");l&&l()}},a));return t.__zr&&g(t.__zr),{fromIndividuals:r,toIndividuals:s,count:_}}function oK(e,t,a){var r=t.length,n=[],i=a.dividePath||NL;function o(f){for(var p=0;p<f.length;p++){var g=f[p];xd(g)?o(g.childrenRef()):g instanceof va&&n.push(g)}}if(xd(e)){o(e.childrenRef());var s=n.length;if(s<r)for(var l=0,c=s;c<r;c++)n.push(yy(n[l++%s]));n.length=r}else{n=i({path:e,count:r});for(var u=e.getComputedTransform(),c=0;c<n.length;c++)n[c].setLocalTransform(u);if(n.length!==r)return console.error("Invalid morphing: unmatched splitted path"),dm()}n=wd(n),t=wd(t);for(var h=a.individualDelay,c=0;c<r;c++){var d=h?_e({delay:(a.delay||0)+h(c,r,n[c],t[c])},a):a;N0(n[c],t[c],d)}return{fromIndividuals:n,toIndividuals:t,count:t.length}}function c2(e){return Nt(e[0])}function u2(e,t){for(var a=[],r=e.length,n=0;n<r;n++)a.push({one:e[n],many:[]});for(var n=0;n<t.length;n++){var i=t[n].length,o=void 0;for(o=0;o<i;o++)a[o%r].many.push(t[n][o])}for(var s=0,n=r-1;n>=0;n--)if(!a[n].many.length){var l=a[s].many;if(l.length<=1)if(s)s=0;else return a;var i=l.length,c=Math.ceil(i/2);a[n].many=l.slice(c,i),a[s].many=l.slice(0,c),s++}return a}var sK={clone:function(e){for(var t=[],a=1-Math.pow(1-e.path.style.opacity,1/e.count),r=0;r<e.count;r++){var n=yy(e.path);n.setStyle("opacity",a),t.push(n)}return t},split:null};function Bg(e,t,a,r,n,i){if(!e.length||!t.length)return;var o=cu("update",r,n);if(!(o&&o.duration>0))return;var s=r.getModel("universalTransition").get("delay"),l=Object.assign({setToFinal:!0},o),c,u;c2(e)&&(c=e,u=t),c2(t)&&(c=t,u=e);function h(_,y,b,w,T){var C=_.many,A=_.one;if(C.length===1&&!T){var k=y?C[0]:A,L=y?A:C[0];if(xd(k))h({many:[k],one:L},!0,b,w,!0);else{var M=s?_e({delay:s(b,w)},l):l;N0(k,L,M),i(k,L,k,L,M)}}else for(var P=_e({dividePath:sK[a],individualDelay:s&&function(V,z,W,it){return s(V+b,w)}},l),E=y?iK(C,A,P):oK(A,C,P),D=E.fromIndividuals,O=E.toIndividuals,B=D.length,R=0;R<B;R++){var M=s?_e({delay:s(R,B)},l):l;i(D[R],O[R],y?C[R]:_.one,y?_.one:C[R],M)}}for(var d=c?c===e:e.length>t.length,f=c?u2(u,c):u2(d?t:e,[d?e:t]),p=0,g=0;g<f.length;g++)p+=f[g].many.length;for(var v=0,g=0;g<f.length;g++)h(f[g],d,v,p),v+=f[g].many.length}function to(e){if(!e)return[];if(Nt(e)){for(var t=[],a=0;a<e.length;a++)t.push(to(e[a]));return t}var r=[];return e.traverse(function(n){n instanceof va&&!n.disableMorphing&&!n.invisible&&!n.ignore&&r.push(n)}),r}var $L=1e4,lK=0,h2=1,d2=2,cK=ia();function uK(e,t){for(var a=e.dimensions,r=0;r<a.length;r++){var n=e.getDimensionInfo(a[r]);if(n&&n.otherDims[t]===0)return a[r]}}function hK(e,t,a){var r=e.getDimensionInfo(a),n=r&&r.ordinalMeta;if(r){var i=e.get(r.name,t);return n&&n.categories[i]||i+""}}function f2(e,t,a,r){var n=r?"itemChildGroupId":"itemGroupId",i=uK(e,n);if(i){var o=hK(e,t,i);return o}var s=e.getRawDataItem(t),l=r?"childGroupId":"groupId";if(s&&s[l])return s[l]+"";if(!r)return a||e.getId(t)}function p2(e){var t=[];return G(e,function(a){var r=a.data,n=a.dataGroupId;if(!(r.count()>$L))for(var i=r.getIndices(),o=0;o<i.length;o++)t.push({data:r,groupId:f2(r,o,n,!1),childGroupId:f2(r,o,n,!0),divide:a.divide,dataIndex:o})}),t}function Og(e,t,a){e.traverse(function(r){r instanceof va&&la(r,{style:{opacity:0}},t,{dataIndex:a,isFrom:!0})})}function Ng(e){if(e.parent){var t=e.getComputedTransform();e.setLocalTransform(t),e.parent.remove(e)}}function es(e){e.stopAnimation(),e.isGroup&&e.traverse(function(t){t.stopAnimation()})}function dK(e,t,a){var r=cu("update",a,t);r&&e.traverse(function(n){if(n instanceof Co){var i=qO(n);i&&n.animateFrom({style:i},r)}})}function fK(e,t){var a=e.length;if(a!==t.length)return!1;for(var r=0;r<a;r++){var n=e[r],i=t[r];if(n.data.getId(n.dataIndex)!==i.data.getId(i.dataIndex))return!1}return!0}function FL(e,t,a){var r=p2(e),n=p2(t);function i(b,w,T,C,A){(T||b)&&w.animateFrom({style:T&&T!==b?Vt(Vt({},T.style),b.style):b.style},A)}var o=!1,s=lK,l=ke(),c=ke();r.forEach(function(b){b.groupId&&l.set(b.groupId,!0),b.childGroupId&&c.set(b.childGroupId,!0)});for(var u=0;u<n.length;u++){var h=n[u].groupId;if(c.get(h)){s=h2;break}var d=n[u].childGroupId;if(d&&l.get(d)){s=d2;break}}function f(b,w){return function(T){var C=T.data,A=T.dataIndex;return w?C.getId(A):b?s===h2?T.childGroupId:T.groupId:s===d2?T.childGroupId:T.groupId}}var p=fK(r,n),g={};if(!p)for(var u=0;u<n.length;u++){var v=n[u],_=v.data.getItemGraphicEl(v.dataIndex);_&&(g[_.id]=!0)}function y(b,w){var T=r[w],C=n[b],A=C.data.hostModel,k=T.data.getItemGraphicEl(T.dataIndex),L=C.data.getItemGraphicEl(C.dataIndex);if(k===L){L&&dK(L,C.dataIndex,A);return}k&&g[k.id]||L&&(es(L),k?(es(k),Ng(k),o=!0,Bg(to(k),to(L),C.divide,A,b,i)):Og(L,A,b))}new Ri(r,n,f(!0,p),f(!1,p),null,"multiple").update(y).updateManyToOne(function(b,w){var T=n[b],C=T.data,A=C.hostModel,k=C.getItemGraphicEl(T.dataIndex),L=Va(Ot(w,function(M){return r[M].data.getItemGraphicEl(r[M].dataIndex)}),function(M){return M&&M!==k&&!g[M.id]});k&&(es(k),L.length?(G(L,function(M){es(M),Ng(M)}),o=!0,Bg(to(L),to(k),T.divide,A,b,i)):Og(k,A,T.dataIndex))}).updateOneToMany(function(b,w){var T=r[w],C=T.data.getItemGraphicEl(T.dataIndex);if(!(C&&g[C.id])){var A=Va(Ot(b,function(L){return n[L].data.getItemGraphicEl(n[L].dataIndex)}),function(L){return L&&L!==C}),k=n[b[0]].data.hostModel;A.length&&(G(A,function(L){return es(L)}),C?(es(C),Ng(C),o=!0,Bg(to(C),to(A),T.divide,k,b[0],i)):G(A,function(L){return Og(L,k,b[0])}))}}).updateManyToMany(function(b,w){new Ri(w,b,function(T){return r[T].data.getId(r[T].dataIndex)},function(T){return n[T].data.getId(n[T].dataIndex)}).update(function(T,C){y(b[T],w[C])}).execute()}).execute(),o&&G(t,function(b){var w=b.data,T=w.hostModel,C=T&&a.getViewOfSeriesModel(T),A=cu("update",T,0);C&&T.isAnimationEnabled()&&A&&A.duration>0&&C.group.traverse(function(k){k instanceof va&&!k.animators.length&&k.animateFrom({style:{opacity:0}},A)})})}function g2(e){var t=e.getModel("universalTransition").get("seriesKey");return t||e.id}function v2(e){return Nt(e)?e.sort().join(","):e}function _i(e){if(e.hostModel)return e.hostModel.getModel("universalTransition").get("divideShape")}function pK(e,t){var a=ke(),r=ke(),n=ke();return G(e.oldSeries,function(i,o){var s=e.oldDataGroupIds[o],l=e.oldData[o],c=g2(i),u=v2(c);r.set(u,{dataGroupId:s,data:l}),Nt(c)&&G(c,function(h){n.set(h,{key:u,dataGroupId:s,data:l})})}),G(t.updatedSeries,function(i){if(i.isUniversalTransitionEnabled()&&i.isAnimationEnabled()){var o=i.get("dataGroupId"),s=i.getData(),l=g2(i),c=v2(l),u=r.get(c);if(u)a.set(c,{oldSeries:[{dataGroupId:u.dataGroupId,divide:_i(u.data),data:u.data}],newSeries:[{dataGroupId:o,divide:_i(s),data:s}]});else if(Nt(l)){var h=[];G(l,function(p){var g=r.get(p);g.data&&h.push({dataGroupId:g.dataGroupId,divide:_i(g.data),data:g.data})}),h.length&&a.set(c,{oldSeries:h,newSeries:[{dataGroupId:o,data:s,divide:_i(s)}]})}else{var d=n.get(l);if(d){var f=a.get(d.key);f||(f={oldSeries:[{dataGroupId:d.dataGroupId,data:d.data,divide:_i(d.data)}],newSeries:[]},a.set(d.key,f)),f.newSeries.push({dataGroupId:o,data:s,divide:_i(s)})}}}}),a}function m2(e,t){for(var a=0;a<e.length;a++){var r=t.seriesIndex!=null&&t.seriesIndex===e[a].seriesIndex||t.seriesId!=null&&t.seriesId===e[a].id;if(r)return a}}function gK(e,t,a,r){var n=[],i=[];G(nr(e.from),function(o){var s=m2(t.oldSeries,o);s>=0&&n.push({dataGroupId:t.oldDataGroupIds[s],data:t.oldData[s],divide:_i(t.oldData[s]),groupIdDim:o.dimension})}),G(nr(e.to),function(o){var s=m2(a.updatedSeries,o);if(s>=0){var l=a.updatedSeries[s].getData();i.push({dataGroupId:t.oldDataGroupIds[s],data:l,divide:_i(l),groupIdDim:o.dimension})}}),n.length>0&&i.length>0&&FL(n,i,r)}function $0(e){e.registerUpdateLifecycle("series:beforeupdate",function(t,a,r){G(nr(r.seriesTransition),function(n){G(nr(n.to),function(i){for(var o=r.updatedSeries,s=0;s<o.length;s++)(i.seriesIndex!=null&&i.seriesIndex===o[s].seriesIndex||i.seriesId!=null&&i.seriesId===o[s].id)&&(o[s][vp]=!0)})})}),e.registerUpdateLifecycle("series:transition",function(t,a,r){var n=cK(a);if(n.oldSeries&&r.updatedSeries&&r.optionChanged){var i=r.seriesTransition;if(i)G(nr(i),function(f){gK(f,n,r,a)});else{var o=pK(n,r);G(o.keys(),function(f){var p=o.get(f);FL(p.oldSeries,p.newSeries,a)})}G(r.updatedSeries,function(f){f[vp]&&(f[vp]=!1)})}for(var s=t.getSeries(),l=n.oldSeries=[],c=n.oldDataGroupIds=[],u=n.oldData=[],h=0;h<s.length;h++){var d=s[h].getData();d.count()<$L&&(l.push(s[h]),c.push(s[h].get("dataGroupId")),u.push(d))}})}async function co(e,t,a=3,r=100){let n=null,i=0;const o=()=>new Promise(s=>{setTimeout(()=>{try{if(!e){console.warn("图表容器不存在，无法初始化图表"),s(null);return}if(!window.echarts){console.error("echarts未加载: 无法初始化图表"),console.log(`echarts加载尝试 ${i+1}/${a}`),s(null);return}(e.offsetWidth<=0||e.offsetHeight<=0)&&(console.warn(`图表容器尺寸为0，设置默认尺寸: ${i+1}/${a} 尝试`),e.style.width="100%",e.style.minHeight="300px",e.style.height="300px");const l=window.echarts.init(e),c=vK(t);l.setOption(c),console.log("图表初始化成功"),s(l)}catch(l){console.error("图表初始化失败:",l),s(null)}},r*(i+1))});for(;i<a&&!n;)i++,console.log(`图表初始化尝试 ${i}/${a}`),n=await o(),n||console.warn(`echarts未加载: 无法初始化图表 ${i}/${a} 失败，将重试...`);if(!n&&e)try{const s=document.createElement("div");s.style.padding="20px",s.style.textAlign="center",s.style.color="#F56C6C",s.style.border="1px solid #F56C6C",s.style.borderRadius="4px",s.style.margin="10px 0",s.innerHTML="图表加载失败，请刷新页面重试",e.innerHTML="",e.appendChild(s)}catch(s){console.error("添加图表错误消息失败:",s)}return n}function vK(e){const t=JSON.parse(JSON.stringify(e));try{t.series&&(t.series=t.series.map(a=>(a.markLine&&!a.markLine.data&&(a.markLine.data=[]),a.markPoint&&!a.markPoint.data&&(a.markPoint.data=[]),a))),["xAxis","yAxis"].forEach(a=>{t[a]&&(Array.isArray(t[a])?t[a]=t[a].map(r=>(r.type==="category"&&!r.data&&(r.data=[]),r)):typeof t[a]=="object"&&t[a].type==="category"&&!t[a].data&&(t[a].data=[]))})}catch(a){console.warn("图表选项验证修复过程中出错:",a)}return t}function on(e){if(e)try{e.dispose()}catch(t){console.error("销毁图表实例失败:",t)}}function uo(e,t){if(!e)return;const a=()=>{if(e&&t)try{e.resize()}catch(r){console.error("调整图表大小失败:",r)}};return window.removeEventListener("resize",a),window.addEventListener("resize",a),()=>{window.removeEventListener("resize",a)}}ue([Tn,Cn,An,ri,_u,Lf,fl,zo,_y,$0,kn]);const mK={name:"InventoryPage",components:{Refresh:nf,Download:Ii,Goods:oy,Warning:Ro,CircleCloseFilled:GC,Lock:y3,Search:af,CaretTop:m3,CaretBottom:NC,Timer:v3,SuccessFilled:nv,Filter:VC,Unlock:g3,CircleClose:zC,Checked:p3,Delete:Cc,TrendCharts:xc,AlarmClock:FC,Connection:Sc,CircleCheck:wc,InfoFilled:ds,ChatDotSquare:f3,Plus:mi},setup(){const e=fa({totalItems:1258,totalItemsTrend:5.2,frozenItems:10,frozenTrend:7.5,pendingFrozenItems:35,pendingFrozenTrend:5.2,riskItems:40,riskTrend:-8.3,qualityProblemItems:3,qualityProblemTrend:18.5,unfrozenItems:8,unfrozenTrend:18.5});Z("30days"),Z("30days"),Z("all"),Z("30days"),Z("30days");const t=Z("distribution");Z("30days");const a=Z("quality"),r=Z(!1),n=Z(!1),i=Z(!1),o=Z(!1),s=Z([]),l=Z(!1),c=Z([]),u=Yt(()=>{const $=(R.value-1)*V.value,rt=$+V.value;return c.value.slice($,rt)}),h=Yt(()=>s.value.filter($=>$.status==="正常").length),d=Yt(()=>s.value.filter($=>$.status==="风险").length);Yt(()=>s.value.filter($=>$.status==="不合格"||$.quality&&$.quality==="不合格").length);const f=Yt(()=>s.value.filter($=>$.status==="冻结").length),p=Yt(()=>{const $={};s.value.forEach(yt=>{yt.status==="正常"&&yt.warehouse&&($[yt.warehouse]=($[yt.warehouse]||0)+1)});let rt=0,K="主仓库";for(const[yt,Y]of Object.entries($))Y>rt&&(rt=Y,K=yt);return K}),g=Yt(()=>{const $={};s.value.forEach(yt=>{yt.status==="冻结"&&yt.warehouse&&($[yt.warehouse]=($[yt.warehouse]||0)+1)});let rt=0,K="隔离仓";for(const[yt,Y]of Object.entries($))Y>rt&&(rt=Y,K=yt);return K});Yt(()=>{const $={};s.value.forEach(yt=>{(yt.status==="不合格"||yt.quality&&yt.quality==="不合格")&&yt.productionLine&&($[yt.productionLine]=($[yt.productionLine]||0)+1)});let rt=0,K="-";for(const[yt,Y]of Object.entries($))Y>rt&&(rt=Y,K=yt);return K||"主产线"});const v=Yt(()=>{const $={};s.value.forEach(yt=>{yt.status==="风险"&&yt.supplier&&($[yt.supplier]=($[yt.supplier]||0)+1)});let rt=0,K="电子科技";for(const[yt,Y]of Object.entries($))Y>rt&&(rt=Y,K=yt);return K}),_=Yt(()=>{const $=d.value;return $>=100?"Level-A":$>=50?"Level-B":$>=20?"Level-C":"Level-D"}),y=Yt(()=>{switch(_.value){case"Level-A":return"高风险 - 需立即干预";case"Level-B":return"中高风险 - 需优先处理";case"Level-C":return"中等风险 - 需密切监控";case"Level-D":return"低风险 - 定期检查";default:return"未知风险"}}),b=$=>{switch($){case"处理中":case"已冻结":return"high-risk-icon";case"待处理":return"medium-risk-icon";case"已解决":return"success-icon";default:return"low-risk-icon"}},w=$=>{switch($){case"处理中":return"Warning";case"已冻结":return"Lock";case"待处理":return"InfoFilled";case"已解决":return"CircleCheck";default:return"InfoFilled"}},T=$=>{switch($){case"处理中":return"warning";case"已冻结":return"danger";case"待处理":return"info";case"已解决":return"success";default:return""}},C=Yt(()=>{const $={};s.value.forEach(K=>{K.supplier&&($[K.supplier]||($[K.supplier]={name:K.supplier,issues:0,totalItems:0,riskScore:0}),$[K.supplier].totalItems++,(K.status==="风险"||K.status==="冻结"||K.quality&&(K.quality==="不合格"||K.quality.includes("风险")))&&$[K.supplier].issues++)});const rt=Object.values($);return rt.forEach(K=>{K.totalItems>0&&(K.riskScore=Math.round(K.issues/K.totalItems*100)),K.riskScore>=80?K.score="D":K.riskScore>=70?K.score="C+":K.riskScore>=60?K.score="C":K.riskScore>=50?K.score="B-":K.riskScore>=40?K.score="B":K.riskScore>=30?K.score="B+":K.riskScore>=20?K.score="A-":K.score="A"}),rt.sort((K,yt)=>yt.riskScore-K.riskScore).slice(0,5)}),A=Yt(()=>{const $={};s.value.forEach(K=>{if(!K.supplier)return;$[K.supplier]||($[K.supplier]={name:K.supplier,defects:0,batchCount:0,defectRate:0});const yt=K.batchNo||K.materialCode||Math.random().toString();$[K.supplier][yt]||($[K.supplier][yt]=!0,$[K.supplier].batchCount++,(K.status==="冻结"||K.quality&&(K.quality==="不合格"||K.quality.includes("不合格")))&&$[K.supplier].defects++)});const rt=Object.values($).filter(K=>K.batchCount>=3);return rt.forEach(K=>{K.batchCount>0?K.defectRate=Math.round(K.defects/K.batchCount*100):K.defectRate=0,K.defectRate>=5?K.qualityLevel="较差":K.defectRate>=2?K.qualityLevel="一般":K.defectRate>0?K.qualityLevel="良好":K.qualityLevel="优秀"}),rt.sort((K,yt)=>yt.defectRate-K.defectRate).slice(0,5)}),k=$=>{switch($){case"极差":case"较差":return"poor-quality";case"一般":return"average-quality";case"良好":case"优秀":return"good-quality";default:return""}},L=$=>$==="D"||$==="C+"||$==="C"?"high-risk":$==="B-"||$==="B"?"medium-risk":"low-risk",M=$=>{switch($){case"极差":case"较差":return"danger";case"一般":return"warning";case"良好":return"success";case"优秀":return"success";default:return"info"}},P=$=>$==="D"||$==="C+"||$==="C"?"danger":$==="B-"||$==="B"?"warning":"success",E=Yt(()=>{console.log("计算风险物料，当前库存数据数量:",s.value.length);const $=s.value.filter(K=>{var Y;return K.status==="风险"||K.status==="冻结"||K.quality&&(K.quality==="不合格"||((Y=K.quality)==null?void 0:Y.includes("风险")))}).sort((K,yt)=>{const Y=new Date(K.receiveDate||K.arrivalDate||0);return new Date(yt.receiveDate||yt.arrivalDate||0)-Y}).slice(0,3);console.log("筛选出的风险物料数量:",$.length);const rt=$.map(K=>{let yt="物料";K.materialType?yt=K.materialType:K.materialCode&&(K.materialCode.startsWith("EC")?yt="电子元件":K.materialCode.startsWith("BAT")?yt="电池组":K.materialCode.startsWith("CMS")&&(yt="CMOS图像传感器"));let Y="质量异常";K.quality==="不合格"?Y="不合格":K.status==="冻结"?Y="已冻结":K.status==="风险"&&(Y="存在风险");let Zt="待处理";K.status==="冻结"&&(Zt="已冻结");let Ye="";if(K.batchNo&&(Ye+=`出厂批次: ${K.batchNo} | `),K.productionLine&&(Ye+=`移送产线: ${K.productionLine} | `),K.inspectionDate&&(Ye+=`检验日期: ${X(K.inspectionDate)} | `),K.quantity&&K.price){const De=Math.round(K.quantity*K.price);De>0&&(Ye+=`价值: ¥${De.toLocaleString()} | `)}return Ye=Ye.replace(/\|\s*$/,""),{type:yt,code:K.materialCode||"",materialName:K.materialName||"",supplier:K.supplier||"",batchNo:K.batchNo||"",warehouse:K.warehouse||K.storageLocation||"",issue:Y,status:Zt,details:Ye||"暂无详细信息",freezeReason:K.freezeReason||K.notes||""}});return console.log("转换后的风险物料数据:",rt),rt}),D=Yt(()=>E.value.filter($=>$.status!=="已冻结"&&$.status!=="冻结").slice(0,4)),O=Yt(()=>s.value.filter(K=>K.status==="冻结"||K.status==="已冻结").sort((K,yt)=>{const Y=new Date(K.freezeDate||K.receiveDate||K.arrivalDate||0);return new Date(yt.freezeDate||yt.receiveDate||yt.arrivalDate||0)-Y}).slice(0,4).map(K=>{let yt="冻结物料";K.materialType?yt=K.materialType:K.materialCode&&(K.materialCode.startsWith("EC")?yt="电子元件":K.materialCode.startsWith("BAT")?yt="电池组":K.materialCode.startsWith("CMS")?yt="CMOS图像传感器":yt="物料");let Y="";if(K.productionLine&&(Y+=`移送产线: ${K.productionLine} | `),K.freezeDate?Y+=`冻结日期: ${X(K.freezeDate)} | `:K.inspectionDate&&(Y+=`检验日期: ${X(K.inspectionDate)} | `),K.quality&&(Y+=`质检结果: ${K.quality} | `),K.quantity&&K.price){const Zt=Math.round(K.quantity*K.price);Zt>0&&(Y+=`价值: ¥${Zt.toLocaleString()} | `)}return Y=Y.replace(/\|\s*$/,""),{type:yt,code:K.materialCode||"",materialName:K.materialName||"",supplier:K.supplier||"",batchNo:K.batchNo||"",warehouse:K.warehouse||K.storageLocation||"检验区",issue:"已冻结",status:"已冻结",details:Y||"冻结待处理",freezeReason:K.freezeReason||K.notes||"质量异常，待进一步检验"}})),B=Yt(()=>{const $=new Date;return`${$.getFullYear()}年${$.getMonth()+1}月${$.getDate()}日`}),R=Z(1),V=Z(20),z=Z(0),W=Z(""),it=Z(""),ot=Z(""),xt=Z(!1),j=fa({dateRange:[],suppliers:[],category:[],qualityStatus:[],batchNo:""}),mt=Z([]),Tt=Z([]),Mt=Z([]),et=Z(!1),ut=Z(null),at=fa({targetWarehouse:"",targetLocation:"",reason:""}),Q=fa({质量问题:{count:0,subReasons:{不良率超标:0,安规不合格:0,外观不良:0,性能测试异常:0}},供应商问题:{count:0,subReasons:{供应商资质审核不通过:0,批次混乱:0,交期延误:0}},技术参数:{count:0,subReasons:{材料参数偏差:0,性能不稳定:0,兼容性问题:0}},包装问题:{count:0,subReasons:{包装破损:0,标签错误:0,防护不足:0}},其他:{count:0,subReasons:{文档不全:0,内部流程问题:0,未知原因:0}}}),bt=fa({退回处理:0,现场返工:0,工艺调整:0,特采放行:0,降级使用:0,自然降解:0}),Dt=async()=>{l.value=!0,console.log("开始获取库存数据...");try{const $=await le.getInventoryData();if(console.log(`从UnifiedDataService获取到${$?$.length:0}条库存数据`),Array.isArray($)&&$.length>0)s.value=$,console.log(`成功获取到${$.length}条库存数据`);else{console.warn("获取到的库存数据为空或格式无效"),s.value=[];try{const rt=localStorage.getItem("inventory_data");if(rt){const K=JSON.parse(rt);Array.isArray(K)&&K.length>0&&(console.log(`从localStorage直接获取到${K.length}条库存数据`),s.value=K)}}catch(rt){console.error("从localStorage获取库存数据失败:",rt)}}s.value.length>0?console.log("库存数据示例:",s.value.slice(0,3)):console.warn("未能获取到任何库存数据"),Et(),ft(),$t(),tt(),H(),console.log(`成功加载并处理${s.value.length}条库存数据`)}catch($){console.error("获取库存数据失败:",$),dt.error("获取库存数据失败: "+$.message),s.value=[]}finally{l.value=!1}},Et=()=>{!s.value||s.value.length===0||(e.totalItems=s.value.length,e.frozenItems=s.value.filter($=>$.status==="冻结").length,e.riskItems=s.value.filter($=>$.status==="风险").length,e.qualityProblemItems=s.value.filter($=>{var rt;return $.quality==="不合格"||((rt=$.quality)==null?void 0:rt.includes("风险物料"))}).length)},ft=()=>{if(!s.value||s.value.length===0){mt.value=[];return}const $=new Set;s.value.forEach(rt=>{rt.supplier&&$.add(rt.supplier)}),mt.value=Array.from($)},$t=()=>{if(!s.value||s.value.length===0){Tt.value=[];return}const $=new Set;s.value.forEach(rt=>{(rt.materialType||rt.category)&&$.add(rt.materialType||rt.category)}),Tt.value=Array.from($).map(rt=>({value:rt,label:rt,children:[]}))};Ra(async()=>{await Dt(),$a(()=>{Pt(),qt(),nt(),xa()}),Wr(()=>at.targetWarehouse,$=>{$&&(Mt.value=Xt($))}),he(),console.log("库存页面初始化完成，数据加载成功")});const Pt=async()=>{r.value=!1;try{const $=document.getElementById("reasonDistChart");if(!$){console.warn("找不到reasonDistChart DOM元素");return}const rt=await co($);if(!rt){console.error("初始化reasonDistChart失败");return}const K={tooltip:{trigger:"item",formatter:"{a} <br/>{b}: {c} ({d}%)"},legend:{orient:"vertical",left:10,data:["质量问题","技术参数","供应商问题","文档不全","其他"]},series:[{name:"冻结原因",type:"pie",radius:["40%","70%"],avoidLabelOverlap:!1,itemStyle:{borderRadius:10,borderColor:"#fff",borderWidth:2},label:{show:!1,position:"center"},emphasis:{label:{show:!0,fontSize:"18",fontWeight:"bold"}},labelLine:{show:!1},data:[{value:42,name:"质量问题"},{value:28,name:"技术参数"},{value:15,name:"供应商问题"},{value:10,name:"文档不全"},{value:5,name:"其他"}]}]};rt.setOption(K),uo(rt),r.value=!0}catch($){console.error("渲染冻结原因分布图表失败:",$),r.value=!0}},qt=async()=>{n.value=!1;try{const $=document.getElementById("reasonTrendChart");if(!$){console.warn("找不到reasonTrendChart DOM元素");return}const rt=await co($);if(!rt){console.error("初始化reasonTrendChart失败");return}const K={tooltip:{trigger:"axis"},legend:{data:["质量问题","技术参数","供应商问题","文档不全","其他"]},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:{type:"category",boundaryGap:!1,data:["周一","周二","周三","周四","周五","周六","周日"]},yAxis:{type:"value"},series:[{name:"质量问题",type:"line",stack:"Total",data:[12,13,10,13,18,21,24]},{name:"技术参数",type:"line",stack:"Total",data:[5,7,6,9,10,12,15]},{name:"供应商问题",type:"line",stack:"Total",data:[3,4,5,4,6,5,7]},{name:"文档不全",type:"line",stack:"Total",data:[2,3,2,3,2,4,3]},{name:"其他",type:"line",stack:"Total",data:[1,1,2,1,2,1,2]}]};rt.setOption(K),uo(rt),n.value=!0}catch($){console.error("渲染冻结原因趋势图表失败:",$),n.value=!0}},nt=async()=>{i.value=!1;try{const $=document.getElementById("solutionsChart");if(!$){console.warn("找不到solutionsChart DOM元素");return}const rt=await co($);if(!rt){console.error("初始化solutionsChart失败");return}let K;t.value==="distribution"?K={tooltip:{trigger:"item",formatter:"{a} <br/>{b}: {c} ({d}%)"},legend:{orient:"vertical",left:10,data:["特采放行","退回处理","现场返工","降级使用","报废处理"]},series:[{name:"处置方案",type:"pie",radius:["40%","70%"],avoidLabelOverlap:!1,itemStyle:{borderRadius:10,borderColor:"#fff",borderWidth:2},label:{show:!1,position:"center"},emphasis:{label:{show:!0,fontSize:"18",fontWeight:"bold"}},labelLine:{show:!1},data:[{value:35,name:"特采放行"},{value:25,name:"退回处理"},{value:20,name:"现场返工"},{value:15,name:"降级使用"},{value:5,name:"报废处理"}]}]}:K={tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},legend:{},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:{type:"category",data:["特采放行","退回处理","现场返工","降级使用","报废处理"]},yAxis:{type:"value",name:"平均处理天数"},series:[{name:"处理时长",type:"bar",data:[2.5,5.8,4.2,3.1,1.5]}]},rt.setOption(K),uo(rt),i.value=!0}catch($){console.error("渲染解决方案图表失败:",$),i.value=!0}},H=()=>{Object.keys(Q).forEach($=>{Q[$].count=0,Object.keys(Q[$].subReasons).forEach(rt=>{Q[$].subReasons[rt]=0})}),Object.keys(bt).forEach($=>{bt[$]=0}),s.value.forEach($=>{if($.status==="冻结"||$.quality&&$.quality.includes("风险物料")||$.quality==="不合格"){const rt=$.batchNo?String($.batchNo):"",K=parseInt(rt.replace(/\D/g,"")||"0")||0;$.quality==="不合格"||$.quality&&$.quality.includes("风险物料")?(Q.质量问题.count++,K%4===0?Q.质量问题.subReasons.不良率超标++:K%4===1?Q.质量问题.subReasons.安规不合格++:K%4===2?Q.质量问题.subReasons.外观不良++:Q.质量问题.subReasons.性能测试异常++):$.supplier&&$.supplier.includes("科技")?(Q.技术参数.count++,K%3===0?Q.技术参数.subReasons.材料参数偏差++:K%3===1?Q.技术参数.subReasons.性能不稳定++:Q.技术参数.subReasons.兼容性问题++):$.supplier&&$.supplier.includes("电池")||$.supplier&&$.supplier.includes("电子")?(Q.供应商问题.count++,K%3===0?Q.供应商问题.subReasons.供应商资质审核不通过++:K%3===1?Q.供应商问题.subReasons.批次混乱++:Q.供应商问题.subReasons.交期延误++):K%10===0?(Q.包装问题.count++,K%3===0?Q.包装问题.subReasons.包装破损++:K%3===1?Q.包装问题.subReasons.标签错误++:Q.包装问题.subReasons.防护不足++):(Q.其他.count++,K%3===0?Q.其他.subReasons.文档不全++:K%3===1?Q.其他.subReasons.内部流程问题++:Q.其他.subReasons.未知原因++)}if($.status==="正常"&&$.shelfLife)try{let rt;if(typeof $.shelfLife=="string")rt=$.shelfLife.split(" ")[0];else if($.shelfLife instanceof Date)rt=$.shelfLife.toISOString().split("T")[0];else if($.expiryDate)rt=typeof $.expiryDate=="string"?$.expiryDate.split("T")[0]:$.expiryDate.toISOString().split("T")[0];else return;const K=new Date(rt);if(isNaN(K.getTime())){console.warn("无效的日期格式:",rt);return}const Y=Math.ceil((K-new Date)/(1e3*60*60*24));if(Y>0&&Y<60){const Zt=$.batchNo?String($.batchNo):"",Ye=parseInt(Zt.replace(/\D/g,"")||"0")||0;Ye%6===0?bt.退回处理++:Ye%6===1?bt.现场返工++:Ye%6===2?bt.工艺调整++:Ye%6===3?bt.特采放行++:Ye%6===4?bt.降级使用++:bt.自然降解++}}catch(rt){console.warn("处理物料保质期数据出错:",rt)}}),Object.keys(Q).forEach($=>{Q[$].count===0&&(Q[$].count=Math.floor(Math.random()*10)+1,Object.keys(Q[$].subReasons).forEach(rt=>{Q[$].subReasons[rt]===0&&(Q[$].subReasons[rt]=Math.floor(Math.random()*5)+1)}))}),Object.keys(bt).forEach($=>{bt[$]===0&&(bt[$]=Math.floor(Math.random()*8)+1)})},tt=()=>{let $=[...s.value];if(W.value){const rt=W.value.toLowerCase();$=$.filter(K=>K.materialCode&&typeof K.materialCode=="string"&&K.materialCode.toLowerCase().includes(rt)||K.materialName&&typeof K.materialName=="string"&&K.materialName.toLowerCase().includes(rt)||K.batchNo&&typeof K.batchNo=="string"&&K.batchNo.toLowerCase().includes(rt)||K.supplier&&typeof K.supplier=="string"&&K.supplier.toLowerCase().includes(rt))}it.value&&(it.value==="正常"?$=$.filter(rt=>rt.status==="正常"):it.value==="风险"?$=$.filter(rt=>rt.status==="风险"):it.value==="冻结"?$=$.filter(rt=>rt.status==="冻结"):it.value==="不合格"&&($=$.filter(rt=>rt.quality==="不合格"||rt.quality&&rt.quality.includes("不合格")))),ot.value&&($=$.filter(rt=>rt.warehouse===ot.value)),console.log(`过滤条件: 搜索=${W.value}, 状态=${it.value}, 仓库=${ot.value}`),console.log(`过滤后数据数量: ${$.length}`),c.value=$,z.value=$.length,R.value>Math.ceil(z.value/V.value)&&z.value>0&&(R.value=1),console.log(`过滤后数据: ${$.length}条，当前页: ${R.value}，每页: ${V.value}`)};Wr([W,it,ot,s],()=>{let $=[...s.value];if(it.value&&($=$.filter(rt=>rt.status===it.value)),ot.value&&($=$.filter(rt=>rt.warehouse===ot.value)),W.value){const rt=W.value.toLowerCase();$=$.filter(K=>K.materialCode&&String(K.materialCode).toLowerCase().includes(rt)||K.materialName&&String(K.materialName).toLowerCase().includes(rt)||K.supplier&&String(K.supplier).toLowerCase().includes(rt)||K.batchNo&&String(K.batchNo).toLowerCase().includes(rt))}c.value=$,z.value=$.length,R.value=1},{deep:!0});const Rt=({row:$})=>$.status==="冻结"?"frozen-row":$.status==="风险"?"risk-row":"",lt=$=>$==="正常"?"success":$==="风险"?"warning":$==="冻结"?"danger":"info",X=$=>{if(!$)return"-";const rt=new Date($);return isNaN(rt.getTime())?$:`${rt.getFullYear()}-${String(rt.getMonth()+1).padStart(2,"0")}-${String(rt.getDate()).padStart(2,"0")}`},At=$=>$.replace(/[^\d]/g,""),U=()=>{console.log("执行搜索：",W.value,it.value,ot.value),R.value=1,tt()},st=$=>{V.value=$,console.log(`每页条数变更为: ${$}, 显示数据: ${u.value.length}条`),R.value>Math.ceil(z.value/V.value)&&(R.value=1)},_t=$=>{R.value=$,console.log(`页码变更为: ${$}, 显示数据: ${u.value.length}条`)},vt=$=>{if(console.log("触发冻结/解冻操作，row:",$),!$){dt({type:"info",message:"这是一个示例操作，实际环境中请选择真实物料进行操作"});return}let rt=$;if(console.log("物料初始数据:",rt),!$.id&&($.code||$.materialCode)){const Y=$.code||$.materialCode,Zt=$.batchNo;if(console.log("尝试根据编码和批次查找物料:",Y,Zt),rt=s.value.find(Ye=>(Ye.materialCode===Y||Ye.code===Y)&&(!Zt&&!Ye.batchNo||Zt&&Ye.batchNo&&Ye.batchNo.includes(Zt))),console.log("查找到的目标物料:",rt),!rt){dt({type:"warning",message:`未找到物料 ${$.materialName||Y}，请刷新数据后重试`});return}}if(!rt||!rt.materialName){console.error("无效的物料对象:",rt),dt.error("物料数据无效，无法执行操作");return}const K=rt.status==="冻结"||rt.status==="已冻结"?"解冻":"冻结",yt=rt.batchNo?typeof rt.batchNo=="string"?rt.batchNo.replace(/[^\w-]/g,""):rt.batchNo:"未知批次";console.log("执行操作:",K,"物料:",rt.materialName,"批次:",yt),yn.confirm(`确定要${K}物料 ${rt.materialName}（批次: ${yt}）吗？`,`${K}物料确认`,{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{if(console.log("用户确认执行操作:",K),K==="解冻"){rt.status="正常",rt.freezeReason="",rt.freezeDate=null,rt.notes=rt.notes?rt.notes+" | 已解冻":"已解冻",console.log("物料已解冻:",rt);const Y=le.saveInventoryData(s.value,!0);console.log("解冻数据保存结果:",Y),dt({type:"success",message:`物料已${K}成功`}),St()}else{rt.status="冻结",rt.freezeDate=new Date().toISOString(),console.log("物料状态已更新为冻结，准备获取冻结原因"),yn.prompt("请输入冻结原因","冻结原因",{confirmButtonText:"确定",cancelButtonText:"取消",inputPlaceholder:"例如：质检不合格、参数异常等"}).then(({value:Y})=>{console.log("用户输入的冻结原因:",Y),rt.freezeReason=Y||"质量异常，待检验",rt.notes=rt.notes?rt.notes+" | "+rt.freezeReason:rt.freezeReason,console.log("更新后的物料数据:",rt);const Zt=le.saveInventoryData(s.value,!0);console.log("冻结数据保存结果:",Zt),dt({type:"success",message:`物料已${K}成功: ${rt.freezeReason}`}),St()}).catch(Y=>{console.log("用户取消输入冻结原因:",Y),rt.status=rt.status==="冻结"?"正常":rt.status,dt({type:"info",message:"已取消冻结操作"})});return}}).catch(Y=>{console.log("用户取消操作:",Y),dt({type:"info",message:"已取消操作"})})},Ct=$=>{ut.value=$;let rt="";if($.expiryDate){const K=new Date($.expiryDate),yt=Bw(K);yt<0?rt=`<span style="color: red">已过期 ${Math.abs(yt)} 天</span>`:yt<=30?rt=`<span style="color: orange">剩余 ${yt} 天</span>`:rt=`<span style="color: green">剩余 ${yt} 天</span>`}yn.alert(`<div style="text-align: left;">
          <p><strong>物料编号:</strong> ${$.materialCode}</p>
          <p><strong>物料名称:</strong> ${$.materialName}</p>
          <p><strong>批次号:</strong> ${$.batchNo}</p>
          <p><strong>供应商:</strong> ${$.supplier}</p>
          <p><strong>仓库:</strong> ${$.warehouse}</p>
          <p><strong>数量:</strong> ${$.quantity}</p>
          <p><strong>状态:</strong> ${$.status}${$.status==="冻结"?" (冻结原因: "+($.freezeReason||"未知")+")":""}</p>
          <p><strong>入库时间:</strong> ${X($.receiveDate||$.arrivalDate||$.inboundTime)}</p>
          <p><strong>到期日期:</strong> ${X($.expiryDate)} ${rt}</p>
          ${$.freezeDate?`<p><strong>冻结时间:</strong> ${X($.freezeDate)}</p>`:""}
          <p><strong>备注:</strong> ${$.notes||"-"}</p>
        </div>`,"物料详情",{dangerouslyUseHTMLString:!0,confirmButtonText:"关闭"})},St=async()=>{l.value=!0;try{await Dt(),he(),dt.success("数据已刷新")}catch($){console.error("刷新数据失败:",$),dt.error("刷新数据失败: "+$.message)}finally{l.value=!1}},Gt=async()=>{l.value=!0,dt.info("正在生成库存数据，请稍候...");try{const $=(await jt(async()=>{const{default:yt}=await Promise.resolve().then(()=>ML);return{default:yt}},void 0)).default,K=await new $().generateInventoryData(132,!0);K.success?(dt.success(`成功生成${K.data.length}条库存数据`),await Dt(),he()):dt.error(`生成数据失败: ${K.message}`)}catch($){console.error("生成数据失败:",$),dt.error("生成数据失败: "+$.message)}finally{l.value=!1}},Xt=$=>{const rt=[],K=$==="主仓库"?"A":$==="原材料仓"?"R":$==="半成品仓"?"S":$==="成品仓"?"F":"X";for(let yt=1;yt<=10;yt++)rt.push(`${K}区-${String(yt).padStart(2,"0")}`);return rt},zt=()=>{const $=ut.value;if(!$)return;const rt=s.value.findIndex(K=>K.id===$.id);rt!==-1&&(s.value[rt].warehouse=at.targetWarehouse,s.value[rt].location=at.targetLocation,s.value[rt].lastModified=new Date().toISOString(),s.value[rt].notes=at.reason,le.saveInventoryData(s.value,!0),tt(),dt.success(`成功将物料 ${$.materialCode} 转移到 ${at.targetWarehouse} ${at.targetLocation}`)),et.value=!1},xe=()=>{dt({message:"正在生成风险物料报表，请稍候...",type:"info"}),setTimeout(()=>{dt({message:"风险物料报表已导出到系统，您可以在报表中心查看",type:"success"})},1500)},Kt=()=>{yn.alert(`<div style="text-align: left;">
          <h3>IQE智能助手</h3>
          <p>您好，我是IQE物料风险管控智能助手。我可以帮助您：</p>
          <ul>
            <li>分析风险物料的处理方案</li>
            <li>预测可能出现的供应链风险</li>
            <li>提供物料冻结解决方案建议</li>
            <li>追踪风险物料的处理进度</li>
          </ul>
          <p>请问您需要什么帮助？</p>
        </div>`,"智能助手",{dangerouslyUseHTMLString:!0,confirmButtonText:"关闭",cancelButtonText:"开始对话",showCancelButton:!0,callback:$=>{$==="cancel"&&dt({message:"智能对话功能即将上线，敬请期待",type:"info"})}})},Ie=()=>{j.dateRange=[],j.suppliers=[],j.category=[],j.qualityStatus=[],j.batchNo=""},Ne=()=>{R.value=1;let $=[...s.value];if(j.dateRange&&j.dateRange.length===2){const rt=new Date(j.dateRange[0]),K=new Date(j.dateRange[1]);K.setHours(23,59,59),$=$.filter(yt=>{const Y=new Date(yt.receiveDate||yt.arrivalDate);return Y>=rt&&Y<=K})}if(j.suppliers&&j.suppliers.length>0&&($=$.filter(rt=>j.suppliers.includes(rt.supplier))),j.category&&j.category.length>0){const rt=j.category.map(K=>K[K.length-1]);$=$.filter(K=>rt.includes(K.category))}if(j.qualityStatus&&j.qualityStatus.length>0&&($=$.filter(rt=>j.qualityStatus.includes(rt.quality))),j.batchNo){const rt=j.batchNo.toLowerCase();$=$.filter(K=>K.batchNo.toLowerCase().includes(rt))}c.value=$,z.value=$.length,xt.value=!1,dt.success("已应用筛选条件，共过滤出 "+$.length+" 条记录")},xa=async()=>{o.value=!1;try{const $=document.getElementById("supplierQualityChart");if(!$){console.warn("找不到supplierQualityChart DOM元素");return}const rt=await co($);if(!rt){console.error("初始化supplierQualityChart失败");return}const K=A.value,yt={tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},legend:{data:["不合格率","样本数"]},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:{type:"category",data:K.map(Y=>Y.name)},yAxis:[{type:"value",name:"不合格率(%)",min:0,max:20,interval:5,axisLabel:{formatter:"{value}%"}},{type:"value",name:"样本数",min:0,axisLabel:{formatter:"{value}"}}],series:[{name:"不合格率",type:"bar",data:K.map(Y=>Y.defectRate)},{name:"样本数",type:"line",yAxisIndex:1,data:K.map(Y=>Y.sampleCount)}]};rt.setOption(yt),uo(rt),o.value=!0}catch($){console.error("渲染供应商质量图表失败:",$),o.value=!0}};Wr(a,()=>{a.value==="quality"&&$a(()=>{xa()})});const we=()=>{const $=["重庆工厂","深圳工厂","南昌工厂","宜宾工厂"];return $[Math.floor(Math.random()*$.length)]},Ee=()=>{const $=["主仓库","原材料仓","半成品仓","成品仓","退货仓"];return $[Math.floor(Math.random()*$.length)]},Lt=()=>{const $=new Date;return $.setDate($.getDate()-Math.floor(Math.random()*30)),$.toISOString()},he=()=>{je(),s.value=s.value.map(rt=>({...rt,factory:rt.factory||we(),warehouse:rt.warehouse||rt.storageLocation||Ee(),materialCode:rt.materialCode||rt.material_id||`M${Math.floor(Math.random()*9e4)+1e4}`,receiveDate:rt.receiveDate||rt.arrivalDate||rt.inboundTime||Lt()})),tt();const $={正常:0,风险:0,冻结:0,其他:0};s.value.forEach(rt=>{rt.status==="正常"?$.正常++:rt.status==="风险"?$.风险++:rt.status==="冻结"?$.冻结++:$.其他++}),statusDistribution.value=Object.keys($).map(rt=>({name:rt,value:$[rt]})).filter(rt=>rt.value>0)},je=()=>{s.value.forEach($=>{if($.expiryDate){const rt=new Date($.expiryDate),K=Bw(rt);K<0&&$.status==="正常"&&($.status="风险",$.notes=$.notes?`${$.notes} | 已过期`:"已过期"),K>0&&K<=30&&$.status==="正常"&&($.status="风险",$.notes=$.notes?`${$.notes} | 即将过期(${K}天)`:`即将过期(${K}天)`)}})};return{inventoryData:s,tableLoading:l,dashboardData:e,normalItemsCount:h,riskItemsCount:d,frozenItemsCount:f,topRiskSupplier:v,riskLevel:_,riskLevelDescription:y,mainStorageArea:p,frozenItemsWarehouse:g,supplierAnalysisType:a,topQualitySuppliers:A,topRiskSuppliers:C,recentRiskMaterials:E,riskOnlyMaterials:D,frozenOnlyMaterials:O,currentDate:B,currentPage:R,pageSize:V,total:z,searchQuery:W,statusFilter:it,warehouseFilter:ot,showAdvancedSearch:xt,advancedFilter:j,supplierOptions:mt,materialCategoryOptions:Tt,pagedInventoryData:u,showMoveLocationDialog:et,selectedItem:ut,moveLocationForm:at,availableLocations:Mt,refreshData:St,generateData:Gt,exportRiskReport:xe,showAIAssistant:Kt,handleSearch:U,handleSizeChange:st,handleCurrentChange:_t,resetAdvancedFilter:Ie,applyAdvancedFilter:Ne,viewDetails:Ct,handleFreezeToggle:vt,confirmMoveLocation:zt,formatDate:X,getRandomFactory:we,getRandomWarehouse:Ee,getRandomDate:Lt,formatBatchNumber:At,tableRowClassName:Rt,getStatusTagType:lt,getQualityLevelClass:k,getQualityTagType:M,getRiskLevelClass:L,getRiskTagType:P,getActionIconClass:b,getActionIcon:w,getTagType:T}}},yK={class:"inventory-page"},_K={class:"page-header"},bK={class:"header-actions"},xK={class:"card-header"},SK={class:"card-value-container"},wK={class:"card-value"},CK={class:"card-info"},TK={class:"info-item"},AK={class:"info-value"},kK={class:"card-header"},DK={class:"card-value-container"},LK={class:"card-value"},IK={class:"card-info"},MK={class:"info-item"},EK={class:"info-value warning-text"},RK={class:"info-item"},PK={class:"info-value warning-text"},BK={class:"card-header"},OK={class:"card-value-container"},NK={class:"card-value"},$K={class:"card-info"},FK={class:"info-item"},zK={class:"info-value"},VK={class:"info-item"},GK={class:"card-header"},HK={class:"header-controls"},WK={class:"supplier-analysis"},qK={key:0,class:"supplier-list-container"},UK={class:"supplier-rank"},jK={class:"supplier-info"},YK={class:"supplier-name"},XK={class:"supplier-stats"},ZK={class:"supplier-tag"},KK={key:1,class:"supplier-list-container"},JK={class:"supplier-rank"},QK={class:"supplier-info"},tJ={class:"supplier-name"},eJ={class:"supplier-stats"},aJ={class:"supplier-tag"},rJ={class:"card-header"},nJ={class:"header-date"},iJ={class:"risk-control-container"},oJ={class:"risk-section"},sJ={class:"section-title"},lJ={class:"action-list"},cJ={class:"action-content"},uJ={class:"action-title"},hJ={class:"action-supplier"},dJ={class:"action-batch"},fJ={class:"action-details"},pJ={key:0,class:"action-item"},gJ={class:"action-icon medium-risk-icon"},vJ={class:"frozen-section"},mJ={class:"section-title"},yJ={class:"action-list"},_J={class:"action-icon high-risk-icon"},bJ={class:"action-content"},xJ={class:"action-title"},SJ={class:"action-supplier"},wJ={class:"action-batch"},CJ={class:"action-warehouse"},TJ={class:"action-details"},AJ={key:0,class:"action-freeze-reason"},kJ={class:"action-status"},DJ={key:0,class:"action-item"},LJ={class:"action-icon high-risk-icon"},IJ={class:"action-status"},MJ={class:"card-header"},EJ={class:"table-actions"},RJ={class:"pagination-container"},PJ={class:"dialog-footer"},BJ={key:0},OJ={class:"dialog-footer"};function NJ(e,t,a,r,n,i){const o=q("Refresh"),s=q("el-icon"),l=q("el-button"),c=q("Plus"),u=q("Download"),h=q("ChatDotSquare"),d=q("CircleCheck"),f=q("el-card"),p=q("el-col"),g=q("Warning"),v=q("InfoFilled"),_=q("el-tooltip"),y=q("Lock"),b=q("el-row"),w=q("el-radio-button"),T=q("el-radio-group"),C=q("el-tag"),A=q("CircleClose"),k=q("el-input"),L=q("el-option"),M=q("el-select"),P=q("Filter"),E=q("el-table-column"),D=q("el-table"),O=q("el-pagination"),B=q("el-date-picker"),R=q("el-form-item"),V=q("el-cascader"),z=q("el-checkbox"),W=q("el-checkbox-group"),it=q("el-form"),ot=q("el-dialog"),xt=Po("loading");return J(),ht("div",yK,[S("div",_K,[t[23]||(t[23]=S("h1",null,"IQE物料流动风险管控平台",-1)),S("div",bK,[m(l,{type:"primary",onClick:r.refreshData},{default:x(()=>[m(s,null,{default:x(()=>[m(o)]),_:1}),t[19]||(t[19]=F("刷新数据 "))]),_:1,__:[19]},8,["onClick"]),m(l,{type:"success",onClick:r.generateData},{default:x(()=>[m(s,null,{default:x(()=>[m(c)]),_:1}),t[20]||(t[20]=F("生成数据 "))]),_:1,__:[20]},8,["onClick"]),m(l,{type:"warning",onClick:r.exportRiskReport},{default:x(()=>[m(s,null,{default:x(()=>[m(u)]),_:1}),t[21]||(t[21]=F("导出风险报表 "))]),_:1,__:[21]},8,["onClick"]),m(l,{type:"info",onClick:r.showAIAssistant},{default:x(()=>[m(s,null,{default:x(()=>[m(h)]),_:1}),t[22]||(t[22]=F("智能助手 "))]),_:1,__:[22]},8,["onClick"])])]),m(b,{gutter:20,class:"dashboard-cards"},{default:x(()=>[m(p,{span:8},{default:x(()=>[m(f,{shadow:"hover",class:"dashboard-card normal-items"},{header:x(()=>[S("div",xK,[t[24]||(t[24]=S("h3",null,"正常物料批次",-1)),m(s,null,{default:x(()=>[m(d)]),_:1})])]),default:x(()=>[S("div",SK,[S("div",wK,N(r.normalItemsCount),1),S("div",CK,[S("div",TK,[t[25]||(t[25]=S("span",{class:"info-label"},"主要区域",-1)),S("span",AK,N(r.mainStorageArea),1)]),t[26]||(t[26]=S("div",{class:"info-item"},[S("span",{class:"info-label"},"仓库物料"),S("span",{class:"info-value success-text"},"原料仓物料")],-1))])])]),_:1})]),_:1}),m(p,{span:8},{default:x(()=>[m(f,{shadow:"hover",class:"dashboard-card risk-items"},{header:x(()=>[S("div",kK,[t[27]||(t[27]=S("h3",null,"风险物料批次",-1)),m(s,null,{default:x(()=>[m(g)]),_:1})])]),default:x(()=>[S("div",DK,[S("div",LK,N(r.riskItemsCount),1),S("div",IK,[S("div",MK,[t[28]||(t[28]=S("span",{class:"info-label"},"风险厂商",-1)),S("span",EK,N(r.topRiskSupplier),1)]),S("div",RK,[t[29]||(t[29]=S("span",{class:"info-label"},"预警等级",-1)),S("span",PK,[F(N(r.riskLevel)+" ",1),m(_,{content:r.riskLevelDescription,placement:"top"},{default:x(()=>[m(s,null,{default:x(()=>[m(v)]),_:1})]),_:1},8,["content"])])])])])]),_:1})]),_:1}),m(p,{span:8},{default:x(()=>[m(f,{shadow:"hover",class:"dashboard-card problem-items"},{header:x(()=>[S("div",BK,[t[30]||(t[30]=S("h3",null,"冻结物料批次",-1)),m(s,null,{default:x(()=>[m(y)]),_:1})])]),default:x(()=>[S("div",OK,[S("div",NK,N(r.frozenItemsCount),1),S("div",$K,[S("div",FK,[t[31]||(t[31]=S("span",{class:"info-label"},"所在仓库",-1)),S("span",zK,N(r.frozenItemsCount>0?r.frozenItemsWarehouse:"-"),1)]),S("div",VK,[t[32]||(t[32]=S("span",{class:"info-label"},"处理方针",-1)),S("span",{class:ve(["info-value",r.frozenItemsCount>0?"warning-text":"neutral-text"])},N(r.frozenItemsCount>0?"等待解冻":"暂无操作"),3)])])])]),_:1})]),_:1})]),_:1}),m(b,{gutter:20,class:"dashboard-cards"},{default:x(()=>[m(p,{span:24},{default:x(()=>[m(f,{shadow:"hover",class:"supplier-card"},{header:x(()=>[S("div",GK,[t[35]||(t[35]=S("h3",null,"物料风险供应商分析",-1)),S("div",HK,[m(T,{modelValue:r.supplierAnalysisType,"onUpdate:modelValue":t[0]||(t[0]=j=>r.supplierAnalysisType=j),size:"small"},{default:x(()=>[m(w,{label:"quality"},{default:x(()=>t[33]||(t[33]=[F("质量状况")])),_:1,__:[33]}),m(w,{label:"risk"},{default:x(()=>t[34]||(t[34]=[F("风险指数")])),_:1,__:[34]})]),_:1},8,["modelValue"])])])]),default:x(()=>[S("div",WK,[r.supplierAnalysisType==="quality"?(J(),ht("div",qK,[(J(!0),ht(ye,null,Se(r.topQualitySuppliers,(j,mt)=>(J(),ht("div",{key:mt,class:ve(["supplier-item",r.getQualityLevelClass(j.qualityLevel)])},[S("div",UK,N(mt+1),1),S("div",jK,[S("div",YK,N(j.name),1),S("div",XK,[S("span",null,"不合格率: "+N(j.defectRate)+"%",1),S("span",null,"样本批次: "+N(j.batchCount),1)])]),S("div",ZK,[m(C,{type:r.getQualityTagType(j.qualityLevel),effect:"light"},{default:x(()=>[F(N(j.qualityLevel),1)]),_:2},1032,["type"])])],2))),128))])):te("",!0),r.supplierAnalysisType==="risk"?(J(),ht("div",KK,[(J(!0),ht(ye,null,Se(r.topRiskSuppliers,(j,mt)=>(J(),ht("div",{key:mt,class:ve(["supplier-item",r.getRiskLevelClass(j.score)])},[S("div",JK,N(mt+1),1),S("div",QK,[S("div",tJ,N(j.name),1),S("div",eJ,[S("span",null,"风险批次: "+N(j.issues),1),S("span",null,"总批次数: "+N(j.totalItems),1)])]),S("div",aJ,[m(C,{type:r.getRiskTagType(j.score),effect:"light"},{default:x(()=>[F(N(j.riskScore)+"%",1)]),_:2},1032,["type"])])],2))),128))])):te("",!0)])]),_:1})]),_:1})]),_:1}),m(b,{gutter:20,class:"action-section"},{default:x(()=>[m(p,{span:24},{default:x(()=>[m(f,{shadow:"hover",class:"action-card"},{header:x(()=>[S("div",rJ,[t[36]||(t[36]=S("h3",null,"近期物料风险管控",-1)),S("div",nJ,N(r.currentDate)+" 更新 ",1)])]),default:x(()=>[S("div",iJ,[S("div",oJ,[S("h4",sJ,[m(s,null,{default:x(()=>[m(g)]),_:1}),t[37]||(t[37]=F(" 风险物料 "))]),S("div",lJ,[(J(!0),ht(ye,null,Se(r.riskOnlyMaterials,(j,mt)=>(J(),ht("div",{key:`risk-${mt}`,class:"action-item"},[S("div",{class:ve(["action-icon",r.getActionIconClass(j.status)])},[m(s,null,{default:x(()=>[(J(),Jt(Fn(r.getActionIcon(j.status))))]),_:2},1024)],2),S("div",cJ,[S("div",uJ,[F(N(j.type)+": ",1),S("strong",null,N(j.materialName),1),F(" ("+N(j.code)+") "+N(j.issue),1)]),S("div",hJ,[t[38]||(t[38]=F("供应商: ")),S("strong",null,N(j.supplier),1)]),S("div",dJ,[t[39]||(t[39]=F("批次号: ")),S("strong",null,N(j.batchNo||"-"),1)]),S("div",fJ,N(j.details),1)]),m(C,{type:r.getTagType(j.status)},{default:x(()=>[F(N(j.status),1)]),_:2},1032,["type"])]))),128)),r.riskOnlyMaterials.length===0?(J(),ht("div",pJ,[S("div",gJ,[m(s,null,{default:x(()=>[m(v)]),_:1})]),t[41]||(t[41]=S("div",{class:"action-content"},[S("div",{class:"action-title"},[F("到期预警: "),S("strong",null,"高精度电阻器"),F(" (RD-129-A) 保质期将至")]),S("div",{class:"action-supplier"},[F("供应商: "),S("strong",null,"精密电子元件厂")]),S("div",{class:"action-batch"},[F("批次号: "),S("strong",null,"EC-2023-0516")]),S("div",{class:"action-details"},"移送产线: 待定 | 到期日期: 2023-07-15 | 预警原因: 仅剩30天有效期")],-1)),m(C,{type:"warning"},{default:x(()=>t[40]||(t[40]=[F("风险")])),_:1,__:[40]})])):te("",!0)])]),S("div",vJ,[S("h4",mJ,[m(s,null,{default:x(()=>[m(y)]),_:1}),t[42]||(t[42]=F(" 冻结物料 "))]),S("div",yJ,[(J(!0),ht(ye,null,Se(r.frozenOnlyMaterials,(j,mt)=>(J(),ht("div",{key:`frozen-${mt}`,class:"action-item"},[S("div",_J,[m(s,null,{default:x(()=>[(J(),Jt(Fn(r.getActionIcon(j.status))))]),_:2},1024)]),S("div",bJ,[S("div",xJ,[F(N(j.type)+": ",1),S("strong",null,N(j.materialName),1),F(" ("+N(j.code)+") "+N(j.issue),1)]),S("div",SJ,[t[43]||(t[43]=F("供应商: ")),S("strong",null,N(j.supplier),1)]),S("div",wJ,[t[44]||(t[44]=F("批次号: ")),S("strong",null,N(j.batchNo||"-"),1)]),S("div",CJ,[t[45]||(t[45]=F("当前仓库: ")),S("strong",null,N(j.warehouse||"检验区"),1)]),S("div",TJ,N(j.details),1),j.freezeReason?(J(),ht("div",AJ,[t[46]||(t[46]=S("span",{class:"reason-label"},"冻结原因:",-1)),F(" "+N(j.freezeReason),1)])):te("",!0)]),S("div",kJ,[m(C,{type:"danger"},{default:x(()=>[F(N(j.status),1)]),_:2},1024),m(l,{size:"small",type:"primary",onClick:Tt=>r.handleFreezeToggle(j),class:"unfreeze-btn"},{default:x(()=>t[47]||(t[47]=[F(" 解冻处理 ")])),_:2,__:[47]},1032,["onClick"])])]))),128)),r.frozenOnlyMaterials.length===0?(J(),ht("div",DJ,[S("div",LJ,[m(s,null,{default:x(()=>[m(A)]),_:1})]),t[50]||(t[50]=S("div",{class:"action-content"},[S("div",{class:"action-title"},[F("质检不合格: "),S("strong",null,"高精度温度传感器"),F(" (TS-567-F) 参数异常")]),S("div",{class:"action-supplier"},[F("供应商: "),S("strong",null,"元器件制造公司")]),S("div",{class:"action-batch"},[F("批次号: "),S("strong",null,"TS-2023-0412")]),S("div",{class:"action-warehouse"},[F("当前仓库: "),S("strong",null,"检验区")]),S("div",{class:"action-details"},"问题: 电性能测试不合格 | 冻结日期: 2023-06-15"),S("div",{class:"action-freeze-reason"},[S("span",{class:"reason-label"},"冻结原因:"),F(" 电阻值超出规格范围，偏差23% ")])],-1)),S("div",IJ,[m(C,{type:"danger"},{default:x(()=>t[48]||(t[48]=[F("已冻结")])),_:1,__:[48]}),m(l,{size:"small",type:"primary",onClick:t[1]||(t[1]=j=>r.handleFreezeToggle(null)),class:"unfreeze-btn"},{default:x(()=>t[49]||(t[49]=[F(" 解冻处理 ")])),_:1,__:[49]})])])):te("",!0)])])])]),_:1})]),_:1})]),_:1}),m(f,{shadow:"hover",class:"table-card"},{header:x(()=>[S("div",MJ,[t[52]||(t[52]=S("h3",null,"库存批次管理",-1)),S("div",EJ,[m(k,{modelValue:r.searchQuery,"onUpdate:modelValue":t[2]||(t[2]=j=>r.searchQuery=j),placeholder:"搜索物料编码、批次或供应商","prefix-icon":"Search",clearable:"",onChange:r.handleSearch,style:{width:"300px"}},null,8,["modelValue","onChange"]),m(M,{modelValue:r.statusFilter,"onUpdate:modelValue":t[3]||(t[3]=j=>r.statusFilter=j),placeholder:"物料状态",onChange:r.handleSearch,style:{width:"120px"}},{default:x(()=>[m(L,{label:"全部批次",value:""}),m(L,{label:"正常物料",value:"正常"}),m(L,{label:"风险物料",value:"风险"}),m(L,{label:"已冻结",value:"冻结"})]),_:1},8,["modelValue","onChange"]),m(M,{modelValue:r.warehouseFilter,"onUpdate:modelValue":t[4]||(t[4]=j=>r.warehouseFilter=j),placeholder:"仓库",onChange:r.handleSearch,style:{width:"120px"}},{default:x(()=>[m(L,{label:"全部仓库",value:""}),m(L,{label:"主仓库",value:"主仓库"}),m(L,{label:"原材料仓",value:"原材料仓"}),m(L,{label:"半成品仓",value:"半成品仓"}),m(L,{label:"成品仓",value:"成品仓"}),m(L,{label:"退货仓",value:"退货仓"})]),_:1},8,["modelValue","onChange"]),m(l,{type:"primary",size:"small",onClick:t[5]||(t[5]=j=>r.showAdvancedSearch=!0)},{default:x(()=>[t[51]||(t[51]=F(" 高级筛选 ")),m(s,null,{default:x(()=>[m(P)]),_:1})]),_:1,__:[51]})])])]),default:x(()=>[Bo((J(),Jt(D,{data:r.pagedInventoryData,style:{width:"100%"},height:"450",stripe:"","row-class-name":r.tableRowClassName},{default:x(()=>[m(E,{prop:"factory",label:"工厂",width:"100",sortable:""},{default:x(j=>[F(N(j.row.factory||r.getRandomFactory()),1)]),_:1}),m(E,{prop:"warehouse",label:"仓库",width:"100",sortable:""},{default:x(j=>[F(N(j.row.warehouse||j.row.storageLocation||r.getRandomWarehouse()),1)]),_:1}),m(E,{prop:"materialCode",label:"物料编号",width:"140",sortable:""},{default:x(j=>[F(N(j.row.materialCode||j.row.material_id||`M${Math.floor(Math.random()*9e4)+1e4}`),1)]),_:1}),m(E,{prop:"materialName",label:"物料名称",width:"180"}),m(E,{prop:"supplier",label:"供应商",width:"150",sortable:""}),m(E,{prop:"batchNo",label:"批次",width:"150",sortable:""}),m(E,{prop:"quantity",label:"数量",sortable:"",width:"80"}),m(E,{label:"状态",width:"110",sortable:"",prop:"status"},{default:x(j=>[m(C,{type:r.getStatusTagType(j.row.status)},{default:x(()=>[F(N(j.row.status),1)]),_:2},1032,["type"])]),_:1}),m(E,{label:"入库时间",width:"120",sortable:"",prop:"receiveDate"},{default:x(j=>[F(N(r.formatDate(j.row.receiveDate||j.row.arrivalDate||j.row.inboundTime||r.getRandomDate())),1)]),_:1}),m(E,{label:"到期日期",width:"120",sortable:"",prop:"expiryDate"},{default:x(j=>[F(N(r.formatDate(j.row.expiryDate)),1)]),_:1}),m(E,{prop:"notes",label:"备注",width:"150"},{default:x(j=>[F(N(j.row.notes||"-"),1)]),_:1}),m(E,{label:"操作",width:"180",fixed:"right"},{default:x(j=>[m(l,{type:"primary",size:"small",onClick:mt=>r.viewDetails(j.row)},{default:x(()=>t[53]||(t[53]=[F("详情")])),_:2,__:[53]},1032,["onClick"]),m(l,{type:j.row.status==="冻结"?"success":"warning",size:"small",onClick:mt=>r.handleFreezeToggle(j.row)},{default:x(()=>[F(N(j.row.status==="冻结"?"解冻":"冻结"),1)]),_:2},1032,["type","onClick"])]),_:1})]),_:1},8,["data","row-class-name"])),[[xt,r.tableLoading]]),S("div",RJ,[m(O,{"current-page":r.currentPage,"onUpdate:currentPage":t[6]||(t[6]=j=>r.currentPage=j),"page-size":r.pageSize,"onUpdate:pageSize":t[7]||(t[7]=j=>r.pageSize=j),"page-sizes":[10,20,50,100],layout:"total, sizes, prev, pager, next, jumper",total:r.total,onSizeChange:r.handleSizeChange,onCurrentChange:r.handleCurrentChange},null,8,["current-page","page-size","total","onSizeChange","onCurrentChange"])])]),_:1}),m(ot,{title:"高级筛选",modelValue:r.showAdvancedSearch,"onUpdate:modelValue":t[13]||(t[13]=j=>r.showAdvancedSearch=j),width:"700px","destroy-on-close":""},{footer:x(()=>[S("div",PJ,[m(l,{onClick:r.resetAdvancedFilter},{default:x(()=>t[57]||(t[57]=[F("重置")])),_:1,__:[57]},8,["onClick"]),m(l,{type:"primary",onClick:r.applyAdvancedFilter},{default:x(()=>t[58]||(t[58]=[F("应用筛选")])),_:1,__:[58]},8,["onClick"])])]),default:x(()=>[m(it,{model:r.advancedFilter,"label-width":"100px"},{default:x(()=>[m(b,{gutter:20},{default:x(()=>[m(p,{span:12},{default:x(()=>[m(R,{label:"入库日期"},{default:x(()=>[m(B,{modelValue:r.advancedFilter.dateRange,"onUpdate:modelValue":t[8]||(t[8]=j=>r.advancedFilter.dateRange=j),type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",style:{width:"100%"}},null,8,["modelValue"])]),_:1})]),_:1}),m(p,{span:12},{default:x(()=>[m(R,{label:"供应商"},{default:x(()=>[m(M,{modelValue:r.advancedFilter.suppliers,"onUpdate:modelValue":t[9]||(t[9]=j=>r.advancedFilter.suppliers=j),multiple:"",placeholder:"选择供应商",style:{width:"100%"}},{default:x(()=>[(J(!0),ht(ye,null,Se(r.supplierOptions,j=>(J(),Jt(L,{key:j,label:j,value:j},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),m(b,{gutter:20},{default:x(()=>[m(p,{span:12},{default:x(()=>[m(R,{label:"物料分类"},{default:x(()=>[m(V,{modelValue:r.advancedFilter.category,"onUpdate:modelValue":t[10]||(t[10]=j=>r.advancedFilter.category=j),options:r.materialCategoryOptions,props:{multiple:!0,checkStrictly:!0},placeholder:"选择物料分类",style:{width:"100%"}},null,8,["modelValue","options"])]),_:1})]),_:1}),m(p,{span:12},{default:x(()=>[m(R,{label:"质检状态"},{default:x(()=>[m(W,{modelValue:r.advancedFilter.qualityStatus,"onUpdate:modelValue":t[11]||(t[11]=j=>r.advancedFilter.qualityStatus=j)},{default:x(()=>[m(z,{label:"正常"},{default:x(()=>t[54]||(t[54]=[F("正常")])),_:1,__:[54]}),m(z,{label:"风险"},{default:x(()=>t[55]||(t[55]=[F("风险")])),_:1,__:[55]}),m(z,{label:"冻结"},{default:x(()=>t[56]||(t[56]=[F("冻结")])),_:1,__:[56]})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),m(b,{gutter:20},{default:x(()=>[m(p,{span:12},{default:x(()=>[m(R,{label:"批次号"},{default:x(()=>[m(k,{modelValue:r.advancedFilter.batchNo,"onUpdate:modelValue":t[12]||(t[12]=j=>r.advancedFilter.batchNo=j),placeholder:"输入批次号"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"]),m(ot,{title:"库位转移",modelValue:r.showMoveLocationDialog,"onUpdate:modelValue":t[18]||(t[18]=j=>r.showMoveLocationDialog=j),width:"500px","destroy-on-close":""},{footer:x(()=>[S("div",OJ,[m(l,{onClick:t[17]||(t[17]=j=>r.showMoveLocationDialog=!1)},{default:x(()=>t[59]||(t[59]=[F("取消")])),_:1,__:[59]}),m(l,{type:"primary",onClick:r.confirmMoveLocation},{default:x(()=>t[60]||(t[60]=[F("确认转移")])),_:1,__:[60]},8,["onClick"])])]),default:x(()=>[r.selectedItem?(J(),ht("div",BJ,[S("p",null,"物料: "+N(r.selectedItem.materialName)+" ("+N(r.selectedItem.materialCode)+")",1),S("p",null,"批次: "+N(r.formatBatchNumber(r.selectedItem.batchNo)),1),S("p",null,"当前仓库: "+N(r.selectedItem.warehouse),1),S("p",null,"当前库位: "+N(r.selectedItem.location),1),m(it,{model:r.moveLocationForm,"label-width":"100px",style:{"margin-top":"20px"}},{default:x(()=>[m(R,{label:"目标仓库"},{default:x(()=>[m(M,{modelValue:r.moveLocationForm.targetWarehouse,"onUpdate:modelValue":t[14]||(t[14]=j=>r.moveLocationForm.targetWarehouse=j),placeholder:"选择仓库",style:{width:"100%"}},{default:x(()=>[m(L,{label:"主仓库",value:"主仓库"}),m(L,{label:"原材料仓",value:"原材料仓"}),m(L,{label:"半成品仓",value:"半成品仓"}),m(L,{label:"成品仓",value:"成品仓"}),m(L,{label:"退货仓",value:"退货仓"})]),_:1},8,["modelValue"])]),_:1}),m(R,{label:"目标库位"},{default:x(()=>[m(M,{modelValue:r.moveLocationForm.targetLocation,"onUpdate:modelValue":t[15]||(t[15]=j=>r.moveLocationForm.targetLocation=j),placeholder:"选择库位",style:{width:"100%"}},{default:x(()=>[(J(!0),ht(ye,null,Se(r.availableLocations,j=>(J(),Jt(L,{key:j,label:j,value:j},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),m(R,{label:"转移原因"},{default:x(()=>[m(k,{type:"textarea",modelValue:r.moveLocationForm.reason,"onUpdate:modelValue":t[16]||(t[16]=j=>r.moveLocationForm.reason=j),rows:"3",placeholder:"请输入库位转移原因"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])])):te("",!0)]),_:1},8,["modelValue"])])}const $J=ca(mK,[["render",NJ],["__scopeId","data-v-8e15123f"]]),FJ={class:"batch-comparison-radar"},zJ={class:"chart-header"},VJ={class:"batch-selection"},GJ={class:"chart-legend"},HJ={class:"legend-label"},WJ={key:0,class:"chart-analysis"},qJ={key:0,class:"insights"},UJ={__name:"BatchComparisonRadar",props:{title:{type:String,default:"批次质量参数对比"},batchData:{type:Object,required:!0},availableBatches:{type:Array,default:()=>[]},analysisText:{type:String,default:""},insights:{type:Array,default:()=>[]},height:{type:String,default:"400px"}},setup(e){HC(l=>({e5eb846e:t.height})),ue([Ty,kn,Tn,Cn,An]);const t=e,a={standard:"#409EFF","#03, #04":"#F56C6C","#B12, #B13":"#E6A23C","#C09":"#67C23A","#A22, #A23":"#F56C6C","#B15, #B16":"#E6A23C","#C12":"#67C23A"},r=Z(null),n=Z(null),i=Z(["standard"]),o=()=>{r.value&&(n.value&&n.value.dispose(),n.value=xr(r.value),s())},s=()=>{if(!n.value||!t.batchData)return;const l=[],c=t.batchData.standard||{};Object.keys(c).forEach(d=>{l.push({name:d,max:100})});const u=[{type:"radar",data:[]}];i.value.forEach(d=>{if(t.batchData[d]){const f=Object.keys(c).map(p=>t.batchData[d][p]||0);u[0].data.push({value:f,name:d,areaStyle:{opacity:d==="standard"?.1:.3},lineStyle:{width:d==="standard"?2:1.5,type:"solid"},itemStyle:{color:a[d]||"#409EFF"},symbolSize:6})}});const h={tooltip:{trigger:"item"},radar:{indicator:l,center:["50%","50%"],radius:"65%",splitNumber:5,shape:"circle",axisName:{color:"#666",fontSize:12},splitArea:{areaStyle:{color:["rgba(250,250,250,0.3)","rgba(200,200,200,0.1)"]}},splitLine:{lineStyle:{color:["#ddd"]}},axisLine:{lineStyle:{color:"#ddd"}}},series:u};n.value.setOption(h)};return window.addEventListener("resize",()=>{n.value&&n.value.resize()}),Wr(i,()=>{$a(()=>{s()})}),Wr(()=>t.batchData,()=>{$a(()=>{s()})},{deep:!0}),Ra(()=>{$a(()=>{o()})}),(l,c)=>{const u=q("el-checkbox"),h=q("el-checkbox-group");return J(),ht("div",FJ,[S("div",zJ,[S("h3",null,N(e.title),1),S("div",VJ,[m(h,{modelValue:i.value,"onUpdate:modelValue":c[0]||(c[0]=d=>i.value=d)},{default:x(()=>[(J(!0),ht(ye,null,Se(e.availableBatches,d=>(J(),Jt(u,{key:d,label:d},{default:x(()=>[F(N(d),1)]),_:2},1032,["label"]))),128))]),_:1},8,["modelValue"])])]),S("div",{class:"chart-container",ref_key:"chartContainer",ref:r},null,512),S("div",GJ,[(J(),ht(ye,null,Se(a,(d,f)=>S("div",{class:"legend-item",key:f},[S("span",{class:"color-dot",style:sy({backgroundColor:d})},null,4),S("span",HJ,N(f),1)])),64))]),e.analysisText?(J(),ht("div",WJ,[c[2]||(c[2]=S("h4",null,"批次分析:",-1)),S("p",null,N(e.analysisText),1),e.insights&&e.insights.length?(J(),ht("div",qJ,[c[1]||(c[1]=S("h4",null,"关键发现:",-1)),S("ul",null,[(J(!0),ht(ye,null,Se(e.insights,(d,f)=>(J(),ht("li",{key:f},N(d),1))),128))])])):te("",!0)])):te("",!0)])}}},jJ=ca(UJ,[["__scopeId","data-v-82ec03b5"]]),YJ={class:"risk-factor-chart"},XJ={class:"chart-header"},ZJ={class:"risk-score"},KJ={key:0,class:"risk-recommendations"},JJ={class:"recommendations-list"},QJ={class:"recommendation-header"},tQ={class:"priority-tag"},eQ={class:"recommendation-title"},aQ={class:"recommendation-description"},rQ={__name:"RiskFactorChart",props:{title:{type:String,default:"风险因子分析"},riskData:{type:Object,required:!0},height:{type:String,default:"300px"}},setup(e){HC(d=>({e5b14c8e:t.height})),ue([Vi,kn,Tn,Cn,ri,An]);const t=e,a=Z(null),r=Z(null),n=Yt(()=>!t.riskData||!t.riskData.riskFactors?[]:t.riskData.riskFactors),i=Yt(()=>!t.riskData||!t.riskData.recommendations?[]:t.riskData.recommendations),o=Yt(()=>!t.riskData||!t.riskData.riskScore?"无":t.riskData.riskScore),s=Yt(()=>{const d=Number(o.value);return isNaN(d)?"":d>=85?"score-high":d>=70?"score-medium":"score-low"}),l=()=>{if(!a.value){console.warn("Chart container not found");return}r.value&&(r.value.dispose(),r.value=null),a.value.style.width="100%",a.value.style.height=t.height;try{$a(()=>{a.value&&(r.value=xr(a.value),n.value&&n.value.length>0&&c())})}catch(d){console.error("初始化图表失败:",d)}},c=()=>{if(!(!r.value||!n.value||n.value.length===0))try{const d=n.value.map(_=>_.name||"未命名"),f=n.value.map(_=>_.value||0),p=n.value.map(_=>_.color||"#409EFF"),g=n.value.map(_=>_.description||""),v={tooltip:{trigger:"axis",axisPointer:{type:"shadow"},formatter:function(_){if(!_||_.length===0||_[0].dataIndex===void 0)return"";const y=_[0].dataIndex;return y<0||y>=d.length?"":`<div>
            <strong>${d[y]}</strong><br/>
            风险值: ${f[y]}<br/>
            ${g[y]||""}
          </div>`}},grid:{left:"3%",right:"4%",bottom:"3%",top:"8%",containLabel:!0},xAxis:{type:"value",name:"风险值",max:100,axisLabel:{formatter:"{value}"}},yAxis:{type:"category",data:d,axisLabel:{formatter:function(_){return _&&_.length>10?_.substring(0,10)+"...":_||""}}},series:[{name:"风险值",type:"bar",data:f.map((_,y)=>({value:_,itemStyle:{color:p[y]}})),label:{show:!0,position:"right",formatter:"{c}"},barWidth:"60%"}]};r.value.setOption(v)}catch(d){console.error("更新图表失败:",d)}},u=()=>{if(r.value)try{r.value.resize()}catch(d){console.error("调整图表大小失败:",d)}},h=()=>{u()};return Ra(()=>{window.addEventListener("resize",h),$a(()=>{setTimeout(()=>{l()},300)})}),rf(()=>{if(window.removeEventListener("resize",h),r.value)try{r.value.dispose(),r.value=null}catch(d){console.error("销毁图表失败:",d)}}),Wr(()=>t.riskData,()=>{$a(()=>{r.value?c():l()})},{deep:!0}),(d,f)=>(J(),ht("div",YJ,[S("div",XJ,[S("h3",null,N(e.title),1),S("div",ZJ,[f[0]||(f[0]=F(" 风险评分: ")),S("span",{class:ve(["score",s.value])},N(o.value),3)])]),S("div",{class:"chart-container",ref_key:"chartContainer",ref:a,style:sy({height:e.height})},null,4),i.value&&i.value.length?(J(),ht("div",KJ,[f[1]||(f[1]=S("h4",null,"风险缓解建议",-1)),S("div",JJ,[(J(!0),ht(ye,null,Se(i.value,(p,g)=>(J(),ht("div",{key:g,class:ve(["recommendation-item","priority-"+p.priority.toLowerCase()])},[S("div",QJ,[S("div",tQ,N(p.priority),1),S("div",eQ,N(p.title),1)]),S("div",aQ,N(p.description),1)],2))),128))])])):te("",!0)]))}},nQ=ca(rQ,[["__scopeId","data-v-6fddf752"]]);/*!
 * pinia v3.0.3
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */let zL;const Ff=e=>zL=e,VL=Symbol();function fm(e){return e&&typeof e=="object"&&Object.prototype.toString.call(e)==="[object Object]"&&typeof e.toJSON!="function"}var gc;(function(e){e.direct="direct",e.patchObject="patch object",e.patchFunction="patch function"})(gc||(gc={}));function GL(){const e=WC(!0),t=e.run(()=>Z({}));let a=[],r=[];const n=qC({install(i){Ff(n),n._a=i,i.provide(VL,n),i.config.globalProperties.$pinia=n,r.forEach(o=>a.push(o)),r=[]},use(i){return this._a?a.push(i):r.push(i),this},_p:a,_a:null,_e:e,_s:new Map,state:t});return n}const HL=()=>{};function y2(e,t,a,r=HL){e.push(t);const n=()=>{const i=e.indexOf(t);i>-1&&(e.splice(i,1),r())};return!a&&x3()&&S3(n),n}function as(e,...t){e.slice().forEach(a=>{a(...t)})}const iQ=e=>e(),_2=Symbol(),$g=Symbol();function pm(e,t){e instanceof Map&&t instanceof Map?t.forEach((a,r)=>e.set(r,a)):e instanceof Set&&t instanceof Set&&t.forEach(e.add,e);for(const a in t){if(!t.hasOwnProperty(a))continue;const r=t[a],n=e[a];fm(n)&&fm(r)&&e.hasOwnProperty(a)&&!Hh(r)&&!UC(r)?e[a]=pm(n,r):e[a]=r}return e}const oQ=Symbol();function sQ(e){return!fm(e)||!Object.prototype.hasOwnProperty.call(e,oQ)}const{assign:gi}=Object;function lQ(e){return!!(Hh(e)&&e.effect)}function cQ(e,t,a,r){const{state:n,actions:i,getters:o}=t,s=a.state.value[e];let l;function c(){s||(a.state.value[e]=n?n():{});const u=w3(a.state.value[e]);return gi(u,i,Object.keys(o||{}).reduce((h,d)=>(h[d]=qC(Yt(()=>{Ff(a);const f=a._s.get(e);return o[d].call(f,f)})),h),{}))}return l=WL(e,c,t,a,r,!0),l}function WL(e,t,a={},r,n,i){let o;const s=gi({actions:{}},a),l={deep:!0};let c,u,h=[],d=[],f;const p=r.state.value[e];!i&&!p&&(r.state.value[e]={}),Z({});let g;function v(k){let L;c=u=!1,typeof k=="function"?(k(r.state.value[e]),L={type:gc.patchFunction,storeId:e,events:f}):(pm(r.state.value[e],k),L={type:gc.patchObject,payload:k,storeId:e,events:f});const M=g=Symbol();$a().then(()=>{g===M&&(c=!0)}),u=!0,as(h,L,r.state.value[e])}const _=i?function(){const{state:L}=a,M=L?L():{};this.$patch(P=>{gi(P,M)})}:HL;function y(){o.stop(),h=[],d=[],r._s.delete(e)}const b=(k,L="")=>{if(_2 in k)return k[$g]=L,k;const M=function(){Ff(r);const P=Array.from(arguments),E=[],D=[];function O(V){E.push(V)}function B(V){D.push(V)}as(d,{args:P,name:M[$g],store:T,after:O,onError:B});let R;try{R=k.apply(this&&this.$id===e?this:T,P)}catch(V){throw as(D,V),V}return R instanceof Promise?R.then(V=>(as(E,V),V)).catch(V=>(as(D,V),Promise.reject(V))):(as(E,R),R)};return M[_2]=!0,M[$g]=L,M},w={_p:r,$id:e,$onAction:y2.bind(null,d),$patch:v,$reset:_,$subscribe(k,L={}){const M=y2(h,k,L.detached,()=>P()),P=o.run(()=>Wr(()=>r.state.value[e],E=>{(L.flush==="sync"?u:c)&&k({storeId:e,type:gc.direct,events:f},E)},gi({},l,L)));return M},$dispose:y},T=fa(w);r._s.set(e,T);const A=(r._a&&r._a.runWithContext||iQ)(()=>r._e.run(()=>(o=WC()).run(()=>t({action:b}))));for(const k in A){const L=A[k];if(Hh(L)&&!lQ(L)||UC(L))i||(p&&sQ(L)&&(Hh(L)?L.value=p[k]:pm(L,p[k])),r.state.value[e][k]=L);else if(typeof L=="function"){const M=b(L,k);A[k]=M,s.actions[k]=L}}return gi(T,A),gi(b3(T),A),Object.defineProperty(T,"$state",{get:()=>r.state.value[e],set:k=>{v(L=>{gi(L,k)})}}),r._p.forEach(k=>{gi(T,o.run(()=>k({store:T,app:r._a,pinia:r,options:s})))}),p&&i&&a.hydrate&&a.hydrate(T.$state,p),c=!0,u=!0,T}/*! #__NO_SIDE_EFFECTS__ */function uQ(e,t,a){let r;const n=typeof t=="function";r=n?a:t;function i(o,s){const l=_3();return o=o||(l?Zn(VL,null):null),o&&Ff(o),o=zL,o._s.has(e)||(n?WL(e,t,r,o):cQ(e,r,o)),o._s.get(e)}return i.$id=e,i}GL();const hQ=uQ("iqe",()=>{const e=Z([]),t=Z([]),a=Z([]),r=Z([]),n=Z({}),i=Z({}),o=Z({}),s=Z({}),l=Z([]),c=Z(!1);function u(C){e.value.push(C)}function h(C){t.value.push(C)}function d(C){a.value.push(C)}function f(C){return e.value.find(A=>A.id===C)}function p(C){return t.value.find(A=>A.id===C)}function g(C){return a.value.find(A=>A.id===C)}function v(C={}){return r.value.filter(A=>{let k=!0;if(C.materialCode&&!A.materialCode.includes(C.materialCode)&&(k=!1),C.materialName&&!A.materialName.includes(C.materialName)&&(k=!1),C.supplier&&A.supplier!==C.supplier&&(k=!1),C.result&&A.result!==C.result&&(k=!1),C.project&&A.project!==C.project&&(k=!1),C.dateRange&&C.dateRange.length===2){const L=new Date(A.testDate),M=new Date(C.dateRange[0]),P=new Date(C.dateRange[1]);P.setHours(23,59,59,999),(L<M||L>P)&&(k=!1)}return k})}function _(C){return Array.isArray(C)?e.value=C:console.warn("无效的库存数据格式，应为数组"),!0}function y(C){return Array.isArray(C)?r.value=C:console.warn("无效的实验室测试数据格式，应为数组"),!0}function b(C){return Array.isArray(C)?a.value=C:console.warn("无效的质量问题数据格式，应为数组"),!0}async function w(){return await new Promise(C=>setTimeout(C,1500)),{success:!0,message:"数据已更新"}}function T(C="monitoring"){return s.value[C]||[]}return{materials:e,batches:t,inspectionResults:a,labTestData:r,trendAnalysisData:n,batchComparisonData:i,riskAnalysisData:o,statCardsData:s,qualityPredictionData:l,loading:c,addMaterial:u,addBatch:h,addInspectionResult:d,getMaterial:f,getBatch:p,getInspectionResult:g,filterLabTests:v,refreshData:w,getStatCardsData:T,updateInventoryData:_,updateLabTestData:y,updateQualityIssueData:b}}),dQ={class:"lab-view"},fQ={class:"page-header"},pQ={class:"header-actions"},gQ={class:"filter-container"},vQ={class:"card-header"},mQ={class:"card-actions"},yQ={class:"stat-box"},_Q={class:"stat-value primary-stat"},bQ={class:"stat-box"},xQ={class:"stat-value danger-stat"},SQ={class:"stat-box"},wQ={class:"stat-value warning-stat"},CQ={key:0,class:"stat-trend trend-up"},TQ={class:"stat-box"},AQ={class:"stat-value info-stat"},kQ={key:0,class:"stat-trend trend-up"},DQ={class:"chart-actions"},LQ={class:"table-container"},IQ={key:0},MQ={key:1},EQ={key:2},RQ={class:"pagination-container"},PQ={key:0,class:"test-details"},BQ={key:0,class:"related-records"},OQ={key:1,class:"test-images"},NQ={class:"image-grid"},$Q={key:0,class:"image-caption"},FQ={key:2,class:"test-procedure"},zQ={key:0,class:"image-preview"},VQ={class:"image-carousel"},GQ={class:"carousel-image-container"},HQ=["src"],WQ={key:0,class:"carousel-caption"},qQ={class:"image-thumbnails"},UQ=["onClick"],jQ={class:"risk-analysis-container"},YQ={class:"risk-actions"},XQ={__name:"LabView",setup(e){ue([zo,Vi,Cy,_k,kn,Tn,Cn,ri,An,TD]);const{STORAGE_KEYS:t}=le,a=hl(),r=hQ(),n=Z(!1),i=Z([]),o=Yt(()=>r.getStatCardsData("lab")),s=Yt(()=>r.batchComparisonData),l=Yt(()=>r.riskAnalysisData);Z([{type:"warning",content:"该物料近3批次测试结果波动较大，稳定性存在问题"},{type:"error",content:"电气性能参数超出标准范围 3.5%"},{type:"success",content:"物理尺寸和外观检测结果符合要求"}]),Z([{title:"增加进料抽检比例",content:"建议将该物料的进料抽检比例从当前的5%提高到8%，重点关注电气性能参数"},{title:"与供应商沟通改进",content:"与供应商共享测试数据，要求针对电气性能参数的稳定性提供改进方案"}]);const c=fa({materialCode:"",materialName:"",testItem:"",result:"",dateRange:[]}),u=fa({currentPage:1,pageSize:10}),h=Yt(()=>f.value.length),d=Yt(()=>{const H=(u.currentPage-1)*u.pageSize,tt=H+u.pageSize;return f.value.slice(H,tt)}),f=Yt(()=>{let H=[...i.value];if(c.materialCode&&(H=H.filter(tt=>tt.materialCode&&tt.materialCode.includes(c.materialCode))),c.materialName&&(H=H.filter(tt=>tt.materialName&&tt.materialName.includes(c.materialName))),c.testItem&&(H=H.filter(tt=>tt.testItem===c.testItem)),c.result){const tt=c.result;H=H.filter(Rt=>Rt.result===tt)}if(c.dateRange&&c.dateRange.length===2){const tt=new Date(c.dateRange[0]),Rt=new Date(c.dateRange[1]);Rt.setHours(23,59,59),H=H.filter(lt=>{if(!lt.testDate)return!1;const X=new Date(lt.testDate);return X>=tt&&X<=Rt})}return H}),p=H=>{u.currentPage=H,console.log(`页码变更为: ${H}, 显示数据: ${d.value.length}条`)},g=H=>{u.pageSize=H,console.log(`每页条数变更为: ${H}, 显示数据: ${d.value.length}条`),u.currentPage>Math.ceil(h.value/u.pageSize)&&h.value>0&&(u.currentPage=1)},v=()=>{u.currentPage=1,console.log("应用筛选条件:",c),console.log(`筛选后数据: ${f.value.length}条`)},_=()=>{Object.keys(c).forEach(H=>{c[H]=H==="dateRange"?[]:""}),u.currentPage=1};Yt(()=>{const H=new Set;return i.value.forEach(tt=>{tt.testItem&&H.add(tt.testItem)}),Array.from(H).map(tt=>({label:tt,value:tt}))});const y=Z(!1),b=Z(null),w=Z(!1),T=Z(0),C=Z(!1),A=Z("batchComparison"),k=Z(null),L=Z(null),M=Yt(()=>!k.value||!k.value.materialCode?{}:s.value[k.value.materialCode]||{}),P=Z([]);Yt(()=>!M.value||!M.value.batches?["standard"]:["standard",...M.value.batches]);const E=Yt(()=>!k.value||!k.value.materialCode?{}:l.value[k.value.materialCode]||{}),D=Yt(()=>!L.value||!L.value.materialCode?{}:s.value[L.value.materialCode]||{}),O=Yt(()=>!D.value||!D.value.batches?["standard"]:["standard",...D.value.batches]),B=({row:H})=>H.result==="NG"?"error-row":H.result==="有条件接收"?"warning-row":"",R=H=>H==="NG"?"danger":H==="有条件接收"?"warning":H==="OK"?"success":"info",V=H=>H?H>=85?"high-risk":H>=70?"medium-risk":"low-risk":"",z=H=>{b.value=H,y.value=!0},W=H=>{b.value=H,T.value=0,w.value=!0},it=H=>{dt({type:"success",message:`已${H==="excel"?"导出Excel文件":"生成PDF报告"}`})},ot=()=>{yn.confirm("系统将自动创建处理措施工单并通知相关责任人，是否继续？","风险处理确认",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{dt({type:"success",message:"已创建处理工单并推送给相关责任人"}),C.value=!1}).catch(()=>{})},xt=()=>{var H;dt({type:"success",message:"已将风险分析数据发送至AI助手进行深度分析"}),a.push({path:"/ai-assistant",query:{materialCode:(H=L.value)==null?void 0:H.materialCode,action:"risk-analysis"}})},j=()=>{dt({type:"success",message:"风险分析报告生成中，完成后将发送至您的邮箱"})},mt=H=>{k.value={...H,aiScore:78,consistencyScore:82,stabilityScore:65,reliabilityScore:87},A.value="batchComparison"},Tt=Z("all");Z("count"),Z(null);const Mt=Z(null),et=fa({totalBatchCount:0,totalBatchPercentage:"0%",ngMaterialCount:0,ngMaterialPercentage:"0%",avgTestCycle:"0",avgTestCycleChange:"0",pendingBatchCount:0,pendingBatchChange:"0",worstSupplier:"",worstSupplierRate:0,topDefect:"",topDefectPercentage:"0%"}),ut=()=>{at(),Q(),qt()},at=()=>{if(!Mt.value)return;const H=xr(Mt.value);let tt=i.value.filter(vt=>vt.result==="NG"||vt.result==="不合格"||vt.testResult==="NG"||vt.testResult==="不合格"||vt.test_result==="NG"||vt.test_result==="不合格");if(console.log(`筛选出${tt.length}条不良记录用于物料NG数量分析`),tt.length<3&&console.warn(`NG测试记录数量不足: ${tt.length}条，图表可能不够直观`),Tt.value==="month"){const vt=new Date,Ct=new Date(vt.getFullYear(),vt.getMonth(),1);tt=tt.filter(St=>St.testDate?new Date(St.testDate)>=Ct:!1)}else if(Tt.value==="quarter"){const vt=new Date,Ct=Math.floor(vt.getMonth()/3),St=new Date(vt.getFullYear(),Ct*3,1);tt=tt.filter(Gt=>Gt.testDate?new Date(Gt.testDate)>=St:!1)}else if(Tt.value==="year"){const vt=new Date,Ct=new Date(vt.getFullYear(),0,1);tt=tt.filter(St=>St.testDate?new Date(St.testDate)>=Ct:!1)}const Rt={};tt.forEach(vt=>{const Ct=vt.materialName||"未知物料",St=vt.supplier||"未知供应商",Gt=vt.defectDesc||"未知不良";Rt[Ct]||(Rt[Ct]={name:Ct,totalCount:0,suppliers:{},defects:{}}),Rt[Ct].totalCount++,Rt[Ct].suppliers[St]||(Rt[Ct].suppliers[St]=0),Rt[Ct].suppliers[St]++,Rt[Ct].defects[Gt]||(Rt[Ct].defects[Gt]=0),Rt[Ct].defects[Gt]++});const lt=Object.values(Rt).sort((vt,Ct)=>Ct.totalCount-vt.totalCount).slice(0,10),X=new Set;lt.forEach(vt=>{Object.keys(vt.suppliers).forEach(Ct=>{X.add(Ct)})});const At=Array.from(X),U=lt.map(vt=>vt.name),st=At.map(vt=>{const Ct=lt.map(St=>St.suppliers[vt]||0);return{name:vt,type:"bar",stack:"total",barMaxWidth:50,label:{show:!0,position:"inside",formatter:function(St){return St.value>0?St.value:""},fontSize:12,color:"#fff"},emphasis:{focus:"series",itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}},data:Ct}}),_t={title:{text:"不良物料供应商分布",left:"center",top:0,textStyle:{fontSize:16,fontWeight:"bold"}},tooltip:{trigger:"axis",axisPointer:{type:"shadow"},formatter:function(vt){const Ct=vt[0].axisValue,St=lt.find(xe=>xe.name===Ct);if(!St)return"";let Gt=`<div style="font-weight:bold;font-size:14px;margin-bottom:5px">${Ct}</div>`;return Gt+=`<div style="margin-bottom:5px">不良总数: <b>${St.totalCount}</b></div>`,Gt+='<div style="font-weight:bold;margin-top:5px;border-bottom:1px solid #ccc;padding-bottom:3px">供应商分布:</div>',Object.entries(St.suppliers).sort((xe,Kt)=>Kt[1]-xe[1]).forEach(([xe,Kt])=>{const Ie=(Kt/St.totalCount*100).toFixed(1);Gt+=`<div>${xe}: ${Kt}件 (${Ie}%)</div>`}),Gt+='<div style="font-weight:bold;margin-top:8px;border-bottom:1px solid #ccc;padding-bottom:3px">常见不良现象:</div>',Object.entries(St.defects).sort((xe,Kt)=>Kt[1]-xe[1]).slice(0,3).forEach(([xe,Kt])=>{const Ie=(Kt/St.totalCount*100).toFixed(1);Gt+=`<div>${xe}: ${Kt}件 (${Ie}%)</div>`}),Gt}},legend:{data:At,top:30,type:"scroll",width:"80%",textStyle:{fontSize:12}},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0,top:70},xAxis:[{type:"category",data:U,axisLabel:{interval:0,rotate:30,fontSize:12,formatter:function(vt){return vt.length>10?vt.substring(0,10)+"...":vt}}}],yAxis:[{type:"value",name:"不良数量",nameTextStyle:{fontSize:12},splitLine:{show:!0,lineStyle:{type:"dashed",opacity:.7}}}],series:st,color:["#5470c6","#91cc75","#fac858","#ee6666","#73c0de","#3ba272","#fc8452","#9a60b4","#ea7ccc","#0096b6"]};H.setOption(_t),window.addEventListener("resize",()=>{H.resize()})},Q=()=>{const H=new Date,tt=new Date(H.getFullYear(),H.getMonth(),1),Rt=i.value.filter(Lt=>Lt.testDate?new Date(Lt.testDate)>=tt:!1),lt=new Set(Rt.map(Lt=>Lt.batchId||Lt.batchNo||""));et.totalBatchCount=lt.size||0;const X=new Date(H.getFullYear(),H.getMonth()-1,1),At=new Date(H.getFullYear(),H.getMonth(),0),U=i.value.filter(Lt=>{if(!Lt.testDate)return!1;const he=new Date(Lt.testDate);return he>=X&&he<=At}),_t=new Set(U.map(Lt=>Lt.batchId||Lt.batchNo||"")).size||0;if(_t>0){const Lt=((et.totalBatchCount-_t)/_t*100).toFixed(1);et.totalBatchPercentage=`${Lt}%`}else et.totalBatchPercentage="0%";const vt=Rt.filter(Lt=>Lt.result==="NG"||Lt.result==="不合格"||Lt.testResult==="NG"||Lt.testResult==="不合格"||Lt.test_result==="NG"||Lt.test_result==="不合格");et.ngMaterialCount=vt.length;const Ct={};if(vt.forEach(Lt=>{const he=Lt.testItem||"未知测试项目";Ct[he]||(Ct[he]=0),Ct[he]++}),Object.entries(Ct).forEach(([Lt,he])=>{}),Rt.length>0){const Lt=(vt.length/Rt.length*100).toFixed(1);et.ngMaterialPercentage=`${Lt}%`}else et.ngMaterialPercentage="0%";const St={};i.value.forEach(Lt=>{if(!Lt.testDate||!Lt.batchId)return;const he=Lt.batchId||Lt.batchNo||"",je=new Date(Lt.testDate);St[he]?(je<St[he].firstTest&&(St[he].firstTest=je),je>St[he].lastTest&&(St[he].lastTest=je)):St[he]={firstTest:je,lastTest:je}});let Gt=0,Xt=0;Object.values(St).forEach(Lt=>{const he=(Lt.lastTest-Lt.firstTest)/864e5;he>0&&(Gt+=he,Xt++)}),Xt>0?et.avgTestCycle=(Gt/Xt).toFixed(1):et.avgTestCycle="0",et.avgTestCycleChange="0.5天";const zt=i.value.filter(Lt=>Lt.result==="有条件接收"||Lt.result==="待定"||Lt.testResult==="有条件接收"||Lt.testResult==="待定"||Lt.test_result==="有条件接收"||Lt.test_result==="待定"),xe=new Set(zt.map(Lt=>Lt.batchId||Lt.batchNo||""));et.pendingBatchCount=xe.size||0,et.pendingBatchChange="2批";const Kt={};vt.forEach(Lt=>{const he=Lt.supplier||"未知供应商";Kt[he]||(Kt[he]={count:0,total:0}),Kt[he].count++}),Rt.forEach(Lt=>{const he=Lt.supplier||"未知供应商";Kt[he]&&Kt[he].total++});let Ie=0,Ne="";Object.entries(Kt).forEach(([Lt,he])=>{if(he.total>0){const je=he.count/he.total;je>Ie&&(Ie=je,Ne=Lt)}}),et.worstSupplier=Ne||"N/A",et.worstSupplierRate=Ie>0?(Ie*100).toFixed(1):0;const xa={};vt.forEach(Lt=>{Lt.defectDesc&&(xa[Lt.defectDesc]||(xa[Lt.defectDesc]=0),xa[Lt.defectDesc]++)});let we=0,Ee="";Object.entries(xa).forEach(([Lt,he])=>{he>we&&(we=he,Ee=Lt)}),et.topDefect=Ee||"N/A",et.topDefectPercentage=vt.length>0?(we/vt.length*100).toFixed(1):"0",console.log("统计卡片数据已更新:",et)};Ra(async()=>{console.log("LabView页面已加载，开始获取测试数据..."),n.value=!0;try{await bt(),Dt(),ut(),nt(),initBatchComparisonData(),initQualityAlertData(),console.log(`LabView页面初始化完成，共加载${i.value.length}条测试数据`)}catch(H){console.error("初始化LabView页面失败:",H),dt.error("加载数据失败，请刷新页面重试")}finally{n.value=!1}});const bt=async()=>{try{const H=le.getLabData();console.log(`获取到${H.length}条测试数据，正在处理...`),i.value=H.map(tt=>{var Rt;return{id:tt.id||tt.testId||tt.test_id||`TEST-${Math.floor(Math.random()*1e4)}`,materialCode:$f(tt.materialName,tt.supplier)||tt.materialCode||tt.material_id||"未知编码",materialName:tt.materialName||tt.material_name||"未知物料",batchId:tt.batchNo||tt.batch_no||tt.batchId||"未知批次",testDate:tt.testDate||tt.test_date||new Date().toISOString(),testItem:tt.testItem||tt.test_type||"常规检测",result:tt.result||tt.test_result||"待定",supplier:tt.supplier||"未知供应商",project:tt.project_name||tt.project_display||tt.projectName||tt.projectId||tt.project_id||"未关联项目",baseline:((Rt=Fj(tt.project_id))==null?void 0:Rt.baseline_name)||tt.baseline_name||tt.baseline_display||tt.baselineName||tt.baselineId||tt.baseline_id||"未关联基线",defectDesc:tt.defect||tt.defectDesc||"",tester:tt.tester||"系统",details:tt.parameters||tt.test_details||"",notes:tt.notes||""}}),console.log(`已成功加载${i.value.length}条测试数据`),i.value.length>0&&console.log("测试数据样本:",i.value[0])}catch(H){console.error("处理测试数据失败:",H),dt.error("处理测试数据失败，请刷新页面重试"),i.value=[]}};function Dt(){const H=i.value.length;let tt=0,Rt=0;i.value.forEach(lt=>{lt.result==="OK"||lt.result==="合格"?tt++:(lt.result==="NG"||lt.result==="不合格")&&Rt++}),o.value=[{label:"测试总数",value:H,icon:"document",type:"",trend:"up",change:"较昨日 +"+Math.floor(Math.random()*10)},{label:"合格率",value:H>0?Math.round(tt/H*100)+"%":"0%",icon:"check",type:"primary",trend:"up",change:"较上周 +"+(Math.random()*2).toFixed(1)+"%"},{label:"不合格数",value:Rt,icon:"close",type:"danger",trend:Rt>5?"up":"down",change:Rt>5?"较昨日 +"+(Math.random()*3).toFixed(1):"较昨日 -"+(Math.random()*2).toFixed(1)},{label:"待处理异常",value:P.value.length,icon:"warning",type:"warning",trend:P.value.length>3?"up":"down",change:P.value.length>3?"较昨日 +2":"较昨日 -1"}]}function Et(){}function ft(){bt(),Dt(),ut(),Q(),dt.success("数据已刷新")}const $t=()=>{dt({type:"success",message:"不良分析报告已生成，正在下载..."}),setTimeout(()=>{dt({type:"success",message:"报告已下载到您的电脑"})},2e3)},Pt=()=>{yn.alert(`<div class="ng-detail-message-box">
      <h4>不良数据详细分析</h4>
      <p>本月测试批次: <strong>${et.totalBatchCount}</strong> 批</p>
      <p>不合格物料: <strong>${et.ngMaterialCount}</strong> 件，不良率: <strong>${et.ngMaterialPercentage}</strong></p>
      <p>不良率最高供应商: <strong>${et.worstSupplier}</strong> (${et.worstSupplierRate}%)</p>
      <p>最常见不良现象: <strong>${et.topDefect}</strong> (${et.topDefectPercentage}%)</p>
      <p>平均测试周期: <strong>${et.avgTestCycle}</strong> 天</p>
      <p>待确认批次: <strong>${et.pendingBatchCount}</strong> 批</p>
      <div style="margin-top:10px;">
        <strong>建议措施:</strong>
        <ul>
          <li>针对 ${et.worstSupplier} 供应商进行专项质量改进</li>
          <li>重点关注 ${et.topDefect} 不良现象的根本原因分析</li>
          <li>加强进料检验标准，提高抽检比例</li>
        </ul>
      </div>
    </div>`,"不良数据详细分析",{dangerouslyUseHTMLString:!0,confirmButtonText:"确定"})},qt=()=>{console.log("不良现象分析已整合到物料供应商分布图表中")},nt=()=>{try{if(console.log("开始初始化风险分析数据..."),!i.value||i.value.length===0){console.warn("测试数据为空，无法初始化风险分析数据");return}const H=i.value.filter(tt=>tt.result==="NG"||tt.result==="不合格"||tt.testResult==="NG"||tt.testResult==="不合格");console.log(`找到${H.length}条不良记录用于风险分析`),E.value={factors:[{name:"批次一致性",value:Math.random()*80+20},{name:"供应商历史",value:Math.random()*80+20},{name:"材料稳定性",value:Math.random()*80+20},{name:"工艺适应性",value:Math.random()*80+20},{name:"环境敏感度",value:Math.random()*80+20}],insights:["批次间一致性较好，但个别批次有波动","供应商历史记录良好，近期质量略有下降","建议加强进货检验和供应商质量管理"]},console.log("风险分析数据初始化完成")}catch(H){console.error("初始化风险分析数据失败:",H)}};return(H,tt)=>{const Rt=q("el-icon"),lt=q("el-button"),X=q("el-input"),At=q("el-form-item"),U=q("el-option"),st=q("el-select"),_t=q("el-date-picker"),vt=q("el-dropdown-item"),Ct=q("el-dropdown-menu"),St=q("el-dropdown"),Gt=q("el-form"),Xt=q("el-col"),zt=q("el-row"),xe=q("el-card"),Kt=q("el-table-column"),Ie=q("el-tag"),Ne=q("el-table"),xa=q("el-pagination"),we=q("el-descriptions-item"),Ee=q("el-descriptions"),Lt=q("el-image"),he=q("el-dialog"),je=q("el-carousel-item"),$=q("el-carousel"),rt=q("el-tab-pane"),K=q("el-tabs");return J(),ht("div",dQ,[S("div",fQ,[tt[9]||(tt[9]=S("h2",{class:"page-title"},"物料测试跟踪",-1)),S("div",pQ,[m(lt,{type:"primary",onClick:ft},{default:x(()=>[m(Rt,null,{default:x(()=>[m(kt(nf))]),_:1}),tt[8]||(tt[8]=F(" 刷新数据 "))]),_:1,__:[8]})])]),S("div",gQ,[m(Gt,{inline:!0,model:c,class:"filter-form"},{default:x(()=>[m(At,{label:"物料代码"},{default:x(()=>[m(X,{modelValue:c.materialCode,"onUpdate:modelValue":tt[0]||(tt[0]=yt=>c.materialCode=yt),placeholder:"输入物料代码",clearable:""},null,8,["modelValue"])]),_:1}),m(At,{label:"物料名称"},{default:x(()=>[m(X,{modelValue:c.materialName,"onUpdate:modelValue":tt[1]||(tt[1]=yt=>c.materialName=yt),placeholder:"输入物料名称",clearable:""},null,8,["modelValue"])]),_:1}),m(At,{label:"检测结果"},{default:x(()=>[m(st,{modelValue:c.result,"onUpdate:modelValue":tt[2]||(tt[2]=yt=>c.result=yt),placeholder:"选择结果",clearable:""},{default:x(()=>[m(U,{label:"合格",value:"OK"}),m(U,{label:"不合格",value:"NG"}),m(U,{label:"有条件接收",value:"有条件接收"})]),_:1},8,["modelValue"])]),_:1}),m(At,{label:"日期范围"},{default:x(()=>[m(_t,{modelValue:c.dateRange,"onUpdate:modelValue":tt[3]||(tt[3]=yt=>c.dateRange=yt),type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",format:"YYYY/MM/DD","value-format":"YYYY/MM/DD"},null,8,["modelValue"])]),_:1}),m(At,null,{default:x(()=>[m(lt,{type:"primary",onClick:v},{default:x(()=>tt[10]||(tt[10]=[F("筛选")])),_:1,__:[10]}),m(lt,{onClick:_},{default:x(()=>tt[11]||(tt[11]=[F("重置")])),_:1,__:[11]}),m(St,{onCommand:it},{dropdown:x(()=>[m(Ct,null,{default:x(()=>[m(vt,{command:"excel"},{default:x(()=>tt[13]||(tt[13]=[F("导出Excel")])),_:1,__:[13]}),m(vt,{command:"pdf"},{default:x(()=>tt[14]||(tt[14]=[F("导出PDF报告")])),_:1,__:[14]})]),_:1})]),default:x(()=>[m(lt,{type:"success"},{default:x(()=>tt[12]||(tt[12]=[F(" 导出数据"),S("i",{class:"el-icon-arrow-down el-icon--right"},null,-1)])),_:1,__:[12]})]),_:1})]),_:1})]),_:1},8,["model"])]),m(zt,{gutter:20,class:"charts-container"},{default:x(()=>[m(Xt,{span:24},{default:x(()=>[m(xe,{shadow:"hover",class:"material-ng-chart-card"},{header:x(()=>[S("div",vQ,[tt[15]||(tt[15]=S("h3",null,"测试不良记录分析",-1)),S("div",mQ,[m(st,{modelValue:Tt.value,"onUpdate:modelValue":tt[4]||(tt[4]=yt=>Tt.value=yt),size:"small",onChange:ut,placeholder:"选择时间范围"},{default:x(()=>[m(U,{label:"全部",value:"all"}),m(U,{label:"本月",value:"month"}),m(U,{label:"本季度",value:"quarter"}),m(U,{label:"本年",value:"year"})]),_:1},8,["modelValue"])])])]),default:x(()=>[m(zt,{gutter:20,class:"ng-statistics-summary"},{default:x(()=>[m(Xt,{xs:12,sm:6},{default:x(()=>[S("div",yQ,[tt[16]||(tt[16]=S("div",{class:"stat-title"},"总批次数",-1)),S("div",_Q,N(et.totalBatchCount),1),S("div",{class:ve(["stat-trend",{"trend-up":parseFloat(et.totalBatchPercentage)>0,"trend-down":parseFloat(et.totalBatchPercentage)<0}])},N(parseFloat(et.totalBatchPercentage)>0?"↑":"↓")+" "+N(et.totalBatchPercentage),3)])]),_:1}),m(Xt,{xs:12,sm:6},{default:x(()=>[S("div",bQ,[tt[17]||(tt[17]=S("div",{class:"stat-title"},"不良数量",-1)),S("div",xQ,N(et.ngMaterialCount),1),S("div",{class:ve(["stat-trend",{"trend-up":parseFloat(et.ngMaterialPercentage)>10,"trend-down":parseFloat(et.ngMaterialPercentage)<10}])}," 不良率: "+N(et.ngMaterialPercentage),3)])]),_:1}),m(Xt,{xs:12,sm:6},{default:x(()=>[S("div",SQ,[tt[18]||(tt[18]=S("div",{class:"stat-title"},"最高不良供应商",-1)),S("div",wQ,N(et.worstSupplier),1),et.worstSupplier!=="N/A"?(J(),ht("div",CQ," 不良率: "+N(et.worstSupplierRate)+"% ",1)):te("",!0)])]),_:1}),m(Xt,{xs:12,sm:6},{default:x(()=>[S("div",TQ,[tt[19]||(tt[19]=S("div",{class:"stat-title"},"主要不良现象",-1)),S("div",AQ,N(et.topDefect),1),et.topDefect!=="N/A"?(J(),ht("div",kQ," 占比: "+N(et.topDefectPercentage)+"% ",1)):te("",!0)])]),_:1})]),_:1}),S("div",{ref_key:"materialNgChartRef",ref:Mt,class:"material-ng-chart"},null,512),S("div",DQ,[m(lt,{type:"primary",size:"small",onClick:$t},{default:x(()=>[m(Rt,null,{default:x(()=>[m(kt(qr))]),_:1}),tt[20]||(tt[20]=F(" 生成分析报告 "))]),_:1,__:[20]}),m(lt,{type:"warning",size:"small",onClick:Pt},{default:x(()=>[m(Rt,null,{default:x(()=>[m(kt(ru))]),_:1}),tt[21]||(tt[21]=F(" 查看详细数据 "))]),_:1,__:[21]})])]),_:1})]),_:1})]),_:1}),S("div",LQ,[tt[24]||(tt[24]=S("h3",{class:"section-title"},"检测结果明细",-1)),m(Ne,{data:d.value,style:{width:"100%"},border:"",stripe:"","row-class-name":B,onRowClick:mt},{default:x(()=>[m(Kt,{prop:"id",label:"测试编号",width:"120"}),m(Kt,{prop:"testDate",label:"日期",width:"100"}),m(Kt,{prop:"project",label:"项目",width:"120"}),m(Kt,{prop:"baseline",label:"基线",width:"120"}),m(Kt,{prop:"materialCode",label:"物料编码",width:"110"}),m(Kt,{prop:"batchId",label:"批次",width:"110"}),m(Kt,{prop:"materialName",label:"物料名称",width:"180"}),m(Kt,{prop:"supplier",label:"供应商",width:"120"}),m(Kt,{prop:"result",label:"测试结果",width:"100"},{default:x(yt=>[m(Ie,{type:R(yt.row.result),size:"small"},{default:x(()=>[F(N(yt.row.result),1)]),_:2},1032,["type"])]),_:1}),m(Kt,{label:"不良现象",width:"150"},{default:x(yt=>[yt.row.result==="NG"&&yt.row.defectDesc?(J(),ht("span",IQ,N(yt.row.defectDesc),1)):yt.row.result==="NG"&&!yt.row.defectDesc?(J(),ht("span",MQ,"未知不良")):(J(),ht("span",EQ,"-"))]),_:1}),m(Kt,{label:"操作",width:"100"},{default:x(yt=>[m(lt,{link:"",size:"small",onClick:Wh(Y=>z(yt.row),["stop"])},{default:x(()=>tt[22]||(tt[22]=[F("详情")])),_:2,__:[22]},1032,["onClick"]),m(lt,{link:"",size:"small",onClick:Wh(Y=>W(yt.row),["stop"]),disabled:!yt.row.images||!yt.row.images.length},{default:x(()=>tt[23]||(tt[23]=[F(" 图片 ")])),_:2,__:[23]},1032,["onClick","disabled"])]),_:1})]),_:1},8,["data"]),S("div",RQ,[m(xa,{background:"",layout:"total, sizes, prev, pager, next, jumper",total:h.value,"page-size":u.pageSize,"page-sizes":[10,20,50,100],"current-page":u.currentPage,onSizeChange:g,onCurrentChange:p},null,8,["total","page-size","current-page"])])]),m(he,{modelValue:y.value,"onUpdate:modelValue":tt[5]||(tt[5]=yt=>y.value=yt),title:b.value?`检测详情: ${b.value.id}`:"检测详情",width:"70%","destroy-on-close":""},{default:x(()=>[b.value?(J(),ht("div",PQ,[m(Ee,{column:2,border:"",size:"medium"},{default:x(()=>[m(we,{label:"检测编号"},{default:x(()=>[F(N(b.value.id),1)]),_:1}),m(we,{label:"检测日期"},{default:x(()=>[F(N(b.value.testDate),1)]),_:1}),m(we,{label:"物料代码"},{default:x(()=>[F(N(b.value.materialCode),1)]),_:1}),m(we,{label:"物料名称"},{default:x(()=>[F(N(b.value.materialName),1)]),_:1}),m(we,{label:"检测来源"},{default:x(()=>[F(N(b.value.testSource||"常规检测"),1)]),_:1}),m(we,{label:"项目"},{default:x(()=>[F(N(b.value.project),1)]),_:1}),m(we,{label:"基线"},{default:x(()=>[F(N(b.value.baseline),1)]),_:1}),m(we,{label:"测试项目"},{default:x(()=>[F(N(b.value.testItem),1)]),_:1}),m(we,{label:"检测结果"},{default:x(()=>[m(Ie,{type:R(b.value.result)},{default:x(()=>[F(N(b.value.result),1)]),_:1},8,["type"])]),_:1}),m(we,{label:"不良批次"},{default:x(()=>[F(N(b.value.badBatch||"N/A"),1)]),_:1}),m(we,{label:"不良比例"},{default:x(()=>[F(N(b.value.defectRate),1)]),_:1}),m(we,{label:"供应商"},{default:x(()=>[F(N(b.value.supplier),1)]),_:1}),m(we,{label:"责任归类"},{default:x(()=>[F(N(b.value.responsibility||"待定"),1)]),_:1}),m(we,{label:"建议处理",span:2},{default:x(()=>[F(N(b.value.recommendation||b.value.remarks),1)]),_:1}),m(we,{label:"备注",span:2},{default:x(()=>[F(N(b.value.remarks),1)]),_:1})]),_:1}),b.value.relatedRecords&&b.value.relatedRecords.length?(J(),ht("div",BQ,[tt[25]||(tt[25]=S("h4",null,"相关记录",-1)),(J(!0),ht(ye,null,Se(b.value.relatedRecords,yt=>(J(),Jt(Ie,{key:yt,size:"small"},{default:x(()=>[F(N(yt),1)]),_:2},1024))),128))])):te("",!0),b.value.images&&b.value.images.length?(J(),ht("div",OQ,[tt[26]||(tt[26]=S("h4",null,"检测图片",-1)),S("div",NQ,[(J(!0),ht(ye,null,Se(b.value.images,(yt,Y)=>(J(),ht("div",{key:Y,class:"image-item"},[m(Lt,{src:yt.url||yt,"preview-src-list":b.value.images.map(Zt=>Zt.url||Zt),fit:"cover"},null,8,["src","preview-src-list"]),yt.caption?(J(),ht("div",$Q,N(yt.caption),1)):te("",!0)]))),128))])])):te("",!0),b.value.testProcedure||b.value.testEquipment||b.value.testParameters?(J(),ht("div",FQ,[tt[27]||(tt[27]=S("h4",null,"测试过程",-1)),m(Ee,{column:1,border:"",size:"small"},{default:x(()=>[b.value.testProcedure?(J(),Jt(we,{key:0,label:"测试规范"},{default:x(()=>[F(N(b.value.testProcedure),1)]),_:1})):te("",!0),b.value.testEquipment?(J(),Jt(we,{key:1,label:"测试设备"},{default:x(()=>[F(N(Array.isArray(b.value.testEquipment)?b.value.testEquipment.join(", "):b.value.testEquipment),1)]),_:1})):te("",!0),b.value.testParameters?(J(),Jt(we,{key:2,label:"测试参数"},{default:x(()=>[(J(!0),ht(ye,null,Se(b.value.testParameters,(yt,Y)=>(J(),ht("div",{key:Y,class:"param-item"},N(Y)+": "+N(yt),1))),128))]),_:1})):te("",!0),b.value.tester?(J(),Jt(we,{key:3,label:"测试人员"},{default:x(()=>[F(N(b.value.tester),1)]),_:1})):te("",!0),b.value.reviewer?(J(),Jt(we,{key:4,label:"复核人员"},{default:x(()=>[F(N(b.value.reviewer),1)]),_:1})):te("",!0)]),_:1})])):te("",!0)])):te("",!0)]),_:1},8,["modelValue","title"]),m(he,{modelValue:w.value,"onUpdate:modelValue":tt[6]||(tt[6]=yt=>w.value=yt),title:b.value?`${b.value.materialName} 检测图片`:"检测图片",width:"80%"},{default:x(()=>[b.value&&b.value.images&&b.value.images.length?(J(),ht("div",zQ,[S("div",VQ,[m($,{height:"400px",arrow:"always","indicator-position":"outside"},{default:x(()=>[(J(!0),ht(ye,null,Se(b.value.images,(yt,Y)=>(J(),Jt(je,{key:Y},{default:x(()=>[S("div",GQ,[S("img",{src:yt.url||yt,alt:"检测图片",class:"carousel-image"},null,8,HQ),yt.caption?(J(),ht("div",WQ,N(yt.caption),1)):te("",!0)])]),_:2},1024))),128))]),_:1})]),S("div",qQ,[(J(!0),ht(ye,null,Se(b.value.images,(yt,Y)=>(J(),ht("div",{key:Y,class:"thumbnail-item",onClick:Zt=>T.value=Y},[m(Lt,{src:yt.url||yt,fit:"cover",class:"thumbnail"},null,8,["src"])],8,UQ))),128))])])):te("",!0)]),_:1},8,["modelValue","title"]),m(he,{modelValue:C.value,"onUpdate:modelValue":tt[7]||(tt[7]=yt=>C.value=yt),title:"风险批次分析",width:"80%"},{default:x(()=>[S("div",jQ,[m(Ee,{column:2,border:""},{default:x(()=>[m(we,{label:"物料名称"},{default:x(()=>{var yt;return[F(N((yt=L.value)==null?void 0:yt.materialName),1)]}),_:1}),m(we,{label:"物料代码"},{default:x(()=>{var yt;return[F(N((yt=L.value)==null?void 0:yt.materialCode),1)]}),_:1}),m(we,{label:"风险评分"},{default:x(()=>{var yt,Y;return[S("span",{class:ve(["risk-score",V((yt=L.value)==null?void 0:yt.riskScore)])},N((Y=L.value)==null?void 0:Y.riskScore),3)]}),_:1}),m(we,{label:"影响范围"},{default:x(()=>{var yt;return[F(N((yt=L.value)==null?void 0:yt.riskImpactScope),1)]}),_:1})]),_:1}),m(K,{type:"border-card",class:"risk-tabs"},{default:x(()=>[m(rt,{label:"风险因子"},{default:x(()=>[m(nQ,{"risk-data":L.value,height:"400px"},null,8,["risk-data"])]),_:1}),m(rt,{label:"批次对比"},{default:x(()=>[L.value?(J(),Jt(jJ,{key:0,"batch-data":D.value,"available-batches":O.value,"analysis-text":D.value.analysisText,insights:D.value.insights,height:"400px"},null,8,["batch-data","available-batches","analysis-text","insights"])):te("",!0)]),_:1})]),_:1}),S("div",YQ,[m(lt,{type:"primary",onClick:ot},{default:x(()=>tt[28]||(tt[28]=[F("采取措施")])),_:1,__:[28]}),m(lt,{type:"warning",onClick:xt},{default:x(()=>tt[29]||(tt[29]=[F("AI深度分析")])),_:1,__:[29]}),m(lt,{onClick:j},{default:x(()=>tt[30]||(tt[30]=[F("生成完整报告")])),_:1,__:[30]})])])]),_:1},8,["modelValue"])])}}},ZQ=ca(XQ,[["__scopeId","data-v-922902e3"]]);ue([kn]);ue([Pj]);ue([zo,Vi,fl,Cy,Ty,v6,W6,kz,Xz,eV,uV,n9,L9,z9,a7,o7,v7,_k,R7,F7,X7,EG]);ue(ri);ue(SH);ue(TA);ue(BH);ue(uk);ue(FH);ue(YH);ue(eD);ue(Cn);ue(yu);ue(gq);ue(Tn);ue(kq);ue(_0);ue(hD);ue(Wq);ue(An);ue(yD);ue(vD);ue(mD);ue(TD);ue(wD);ue(CD);ue(zU);ue(Lf);ue(_u);ue($0);ue(_y);const KQ={class:"factory-quality-stats"},JQ={class:"time-range-container"},QQ={class:"card-header"},ttt={class:"top-defect-table"},ett={class:"defect-insight"},att={key:1,class:"normal-insight"},rtt={class:"card-header"},ntt={class:"top-defect-table"},itt={class:"defect-insight"},ott={key:1,class:"normal-insight"},stt={class:"card-header"},ltt={class:"exception-tabs"},ctt={class:"exception-stat-container"},utt={class:"exception-project"},htt={class:"exception-count"},dtt={class:"exception-summary"},ftt={class:"summary-content"},ptt={class:"highlight"},gtt={class:"highlight"},vtt={class:"highlight"},mtt={class:"card-header"},ytt={__name:"FactoryQualityStats",setup(e){ue([Tn,Cn,An,ri,_u,Lf,Vi,zo,fl,_y,$0,kn]);const t=Z(null),a=Z(null),r=Z(null);let n=null,i=null,o=null;const s=Z([]),l=Z([]),c=Z(0),u=Z(0),h=Z("project"),d=Z([]),f=Z(0),p=Z(""),g=Z(""),v=Z([]),_=Z([]),y=Z("30"),b=Z({totalRecords:0,avgDefectRate:0,defectCount:0,topDefect:"",topDefectMaterial:"",topDefectSupplier:""}),w=Z([]),T=Yt(()=>{if(y.value==="all")return w.value;const z=parseInt(y.value),W=new Date;return W.setDate(W.getDate()-z),w.value.filter(it=>new Date(it.online_time||it.onlineTime)>=W)});Ra(()=>{C(),k(),window.addEventListener("resize",R)}),rf(()=>{V(),window.removeEventListener("resize",R)});async function C(){try{const z=await le.getFactoryData()||[];w.value=z,A(),L()}catch(z){console.error("加载数据失败:",z),dt.error("加载数据失败")}}function A(){const z=T.value;b.value.totalRecords=z.length;let W=0,it=0;const ot={},xt={},j={};z.forEach(Q=>{const bt=parseFloat(Q.defect_rate||Q.defectRate||0),Dt=Q.materialName||Q.material_name||"未知物料",Et=Q.supplier||"未知供应商",ft=Q.batchNo||Q.batch_no||"未知批次",$t=(Q.defect||"未知不良").split(",").map(Pt=>Pt.trim());$t[0],isNaN(bt)||(W+=bt,bt>0&&(it++,xt[Dt]||(xt[Dt]={materialName:Dt,materialType:Q.material_type||Q.materialType||"未知类型",defectCount:0,totalCount:0,defectRate:0,defects:{},suppliers:new Set,batches:new Set,mainDefect:""}),xt[Dt].defectCount++,xt[Dt].totalCount++,xt[Dt].defectRate=xt[Dt].defectCount/xt[Dt].totalCount*100,xt[Dt].suppliers.add(Et),xt[Dt].batches.add(ft),$t.forEach(Pt=>{Pt&&(xt[Dt].defects[Pt]=(xt[Dt].defects[Pt]||0)+1)}),j[Et]||(j[Et]={supplierName:Et,defectCount:0,totalCount:0,defectRate:0,defectTypes:{},materials:new Set,batches:new Set,mainDefectTypes:"",defectBatches:new Set}),j[Et].defectCount++,j[Et].totalCount++,j[Et].defectRate=j[Et].defectCount/j[Et].totalCount*100,j[Et].materials.add(Dt),j[Et].batches.add(ft),j[Et].defectBatches.add(ft),$t.forEach(Pt=>{Pt&&(j[Et].defectTypes[Pt]=(j[Et].defectTypes[Pt]||0)+1)})),$t.forEach(Pt=>{Pt&&(ot[Pt]=(ot[Pt]||0)+1)}))}),b.value.avgDefectRate=z.length>0?W/z.length:0,b.value.defectCount=it;let mt=0,Tt="";Object.entries(ot).forEach(([Q,bt])=>{bt>mt&&(mt=bt,Tt=Q)}),b.value.topDefect=Tt,mt=0;let Mt="";Object.entries(xt).forEach(([Q,bt])=>{bt.defectRate>mt&&(mt=bt.defectRate,Mt=Q)}),b.value.topDefectMaterial=Mt,mt=0;let et="";Object.entries(j).forEach(([Q,bt])=>{bt.defectRate>mt&&(mt=bt.defectRate,et=Q)}),b.value.topDefectSupplier=et;const ut=Object.values(xt);ut.sort((Q,bt)=>bt.defectCount-Q.defectCount),ut.forEach(Q=>{const bt=Object.entries(Q.defects);bt.length>0&&(bt.sort((Dt,Et)=>Et[1]-Dt[1]),Q.mainDefect=bt[0][0]),Q.supplier=Array.from(Q.suppliers).join(", ")}),s.value=ut.slice(0,5).map(Q=>({materialName:Q.materialName,materialType:Q.materialType,defectRate:Q.defectRate,defectCount:Q.defectCount,totalCount:Q.totalCount,mainDefect:Q.mainDefect,supplier:Q.supplier})),c.value=ut.filter(Q=>Q.defectCount>10).length;const at=Object.values(j);at.forEach(Q=>{Q.defectBatchCount=Q.defectBatches?Q.defectBatches.size:0}),at.sort((Q,bt)=>bt.defectBatchCount-Q.defectBatchCount),at.forEach(Q=>{const bt=Object.entries(Q.defectTypes);bt.length>0&&(bt.sort((Dt,Et)=>Et[1]-Dt[1]),Q.mainDefectTypes=bt.slice(0,2).map(Dt=>Dt[0]).join(", ")),Q.materialCount=Q.materials.size}),l.value=at.slice(0,5).map(Q=>({supplierName:Q.supplierName,defectRate:Q.defectRate,defectCount:Q.defectCount,totalCount:Q.totalCount,materialCount:Q.materialCount,defectBatchCount:Q.defectBatchCount||0,mainDefectTypes:Q.mainDefectTypes})),u.value=at.filter(Q=>Q.defectBatchCount>10).length}function k(){t.value&&(n=xr(t.value)),a.value&&(i=xr(a.value)),r.value&&(o=xr(r.value)),L()}function L(){M(),P(),E(),D()}function M(){const z=T.value,W={},it={},ot={};let xt=0;z.forEach(at=>{const Q=at.project_name||at.projectName||at.project||at.project_id||"未知项目",bt=parseFloat(at.defect_rate||at.defectRate||0),Dt=(at.defect||"未知不良").split(",").map(ft=>ft.trim()).filter(ft=>ft),Et=bt>0||at.status==="不良"||at.onlineStatus==="不良"||at.quality==="不合格";W[Q]||(W[Q]={project:Q,count:0,totalCount:0,defectRate:0,defects:{},trend:Math.floor(Math.random()*20)-10}),W[Q].totalCount++,Et&&(W[Q].count++,xt++,Dt.forEach(ft=>{if(ft){W[Q].defects[ft]||(W[Q].defects[ft]=0),W[Q].defects[ft]++,it[ft]||(it[ft]=0),it[ft]++;const $t=`${Q}-${ft}`;ot[$t]||(ot[$t]=0),ot[$t]++}})),W[Q].defectRate=W[Q].count/W[Q].totalCount*100});const j=Object.values(W).sort((at,Q)=>Q.count-at.count);d.value=j,f.value=xt,j.length>0&&(p.value=j[0].project);let mt=0,Tt="";Object.entries(it).forEach(([at,Q])=>{Q>mt&&(mt=Q,Tt=at)}),g.value=Tt,v.value=Object.entries(it).map(([at,Q])=>({name:at,value:Q})).sort((at,Q)=>Q.value-at.value).slice(0,8);const Mt={},et=new Date,ut=parseInt(y.value)||30;for(let at=ut;at>=0;at--){const Q=new Date(et);Q.setDate(Q.getDate()-at);const bt=Q.toISOString().substring(0,10);Mt[bt]=0}z.forEach(at=>{const Q=new Date(at.online_time||at.onlineTime).toISOString().substring(0,10);(parseFloat(at.defect_rate||at.defectRate||0)>5||at.status==="不良"||at.quality==="不合格")&&Mt[Q]!==void 0&&Mt[Q]++}),_.value=Object.entries(Mt).map(([at,Q])=>({date:at,count:Q}))}function P(){if(!n)return;const z=T.value,W={};z.forEach(j=>{const mt=j.factory||"未知工厂",Tt=j.status==="不良"||j.quality==="不合格"||parseFloat(j.defect_rate||j.defectRate||0)>5;W[mt]||(W[mt]={totalCount:0,defectCount:0}),W[mt].totalCount++,Tt&&W[mt].defectCount++});const it=Object.keys(W),ot=it.map(j=>W[j].defectCount),xt={tooltip:{trigger:"axis",formatter:"{b}: {c}起"},title:{text:"各工厂不良物料数量对比",left:"center",top:0},grid:{left:"10%",right:"5%",bottom:"15%",containLabel:!0},xAxis:{type:"category",data:it,axisLabel:{interval:0,rotate:45,fontSize:12}},yAxis:{type:"value",name:"不良数量(起)",axisLabel:{formatter:"{value}起"}},series:[{name:"不良数量",type:"bar",data:ot,barWidth:"40%",itemStyle:{color:function(j){const mt=j.value;return mt>10?"#F56C6C":mt>5?"#E6A23C":"#67C23A"}},label:{show:!0,position:"top",formatter:"{c}起",fontSize:12}}]};n.setOption(xt)}function E(){if(!i||!a.value)return;const z={tooltip:{trigger:"item",formatter:"{b}: {c}起({d}%)"},title:{text:"不良类型分布",left:"center",top:0},legend:{type:"scroll",orient:"vertical",right:10,top:40,bottom:20,textStyle:{fontSize:12}},series:[{name:"不良类型",type:"pie",radius:["35%","65%"],center:["40%","55%"],avoidLabelOverlap:!1,itemStyle:{borderRadius:10,borderColor:"#fff",borderWidth:2},label:{show:!0,formatter:"{b}: {c}起",fontSize:12},emphasis:{label:{show:!0,fontSize:16,fontWeight:"bold"}},labelLine:{show:!0,length:10,length2:10},data:v.value}]};i.setOption(z)}function D(){if(!o||!r.value)return;const z=_.value.map(ot=>ot.date),W=_.value.map(ot=>ot.count),it={tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},title:{text:"不良异常趋势",left:"center",top:0},grid:{left:"5%",right:"5%",bottom:"15%",top:"15%",containLabel:!0},xAxis:{type:"category",data:z,axisLabel:{rotate:45,interval:Math.floor(z.length/15),fontSize:10}},yAxis:{type:"value",name:"异常数量(起)",nameTextStyle:{fontSize:12}},series:[{name:"异常数量",type:"line",smooth:!0,data:W,markPoint:{data:[{type:"max",name:"最大值"},{type:"min",name:"最小值"}]},markLine:{data:[{type:"average",name:"平均值"}]},areaStyle:{color:{type:"linear",x:0,y:0,x2:0,y2:1,colorStops:[{offset:0,color:"rgba(220, 57, 18, 0.8)"},{offset:1,color:"rgba(220, 57, 18, 0.1)"}]}},lineStyle:{width:3,color:"#DC3912"},itemStyle:{color:"#DC3912"}}]};o.setOption(it)}function O(z){return z>10?"high-risk":z>5?"medium-risk":"low-risk"}function B(){A(),L(),dt.success("数据已刷新")}function R(){n==null||n.resize(),i==null||i.resize(),o==null||o.resize()}function V(){n==null||n.dispose(),i==null||i.dispose(),o==null||o.dispose(),n=null,i=null,o=null}return(z,W)=>{const it=q("el-option"),ot=q("el-select"),xt=q("el-button"),j=q("el-col"),mt=q("el-row"),Tt=q("el-icon"),Mt=q("el-tooltip"),et=q("el-table-column"),ut=q("el-tag"),at=q("el-table"),Q=q("el-alert"),bt=q("el-card"),Dt=q("el-tab-pane"),Et=q("el-tabs");return J(),ht("div",KQ,[m(mt,{gutter:20,class:"time-range-row"},{default:x(()=>[m(j,{span:24},{default:x(()=>[S("div",JQ,[m(ot,{modelValue:y.value,"onUpdate:modelValue":W[0]||(W[0]=ft=>y.value=ft),placeholder:"时间范围",size:"small"},{default:x(()=>[m(it,{label:"最近7天",value:"7"}),m(it,{label:"最近30天",value:"30"}),m(it,{label:"最近90天",value:"90"}),m(it,{label:"全部",value:"all"})]),_:1},8,["modelValue"]),m(xt,{type:"primary",size:"small",onClick:B},{default:x(()=>W[2]||(W[2]=[F("刷新")])),_:1,__:[2]})])]),_:1})]),_:1}),m(mt,{gutter:20,class:"chart-row"},{default:x(()=>[m(j,{xs:24,md:12},{default:x(()=>[m(bt,{shadow:"hover",class:"top-defects-card"},{header:x(()=>[S("div",QQ,[W[3]||(W[3]=S("h4",null,"TOP5不良物料",-1)),m(Mt,{content:"不良数量最多的5种物料",placement:"top"},{default:x(()=>[m(Tt,null,{default:x(()=>[m(kt(ds))]),_:1})]),_:1})])]),default:x(()=>[S("div",ttt,[m(at,{data:s.value,style:{width:"100%"},"header-cell-style":{background:"#f5f7fa",color:"#606266"},border:"",stripe:""},{default:x(()=>[m(et,{type:"index",label:"排名",width:"50",align:"center"}),m(et,{prop:"materialName",label:"物料名称","min-width":"140"}),m(et,{prop:"defectCount",label:"不良数量",width:"90",align:"center"},{default:x(ft=>[m(ut,{type:ft.row.defectCount>10?"danger":ft.row.defectCount>5?"warning":"success",effect:"dark"},{default:x(()=>[F(N(ft.row.defectCount)+" 起 ",1)]),_:2},1032,["type"])]),_:1}),m(et,{prop:"mainDefect",label:"主要不良","min-width":"120"}),m(et,{prop:"supplier",label:"供应商","min-width":"120"})]),_:1},8,["data"])]),S("div",ett,[c.value>0?(J(),Jt(Q,{key:0,type:"warning",title:`发现${c.value}种高风险物料，不良数量超过10起`,"show-icon":""},{default:x(()=>{var ft;return[S("div",null,"建议对"+N(((ft=s.value[0])==null?void 0:ft.materialName)||"高风险物料")+"进行专项质量改进",1)]}),_:1},8,["title"])):(J(),ht("div",att,[m(Tt,{color:"#67C23A"},{default:x(()=>[m(kt(wc))]),_:1}),W[4]||(W[4]=S("span",null,"所有物料不良率均在可接受范围内",-1))]))])]),_:1})]),_:1}),m(j,{xs:24,md:12},{default:x(()=>[m(bt,{shadow:"hover",class:"top-defects-card"},{header:x(()=>[S("div",rtt,[W[5]||(W[5]=S("h4",null,"TOP5问题供应商",-1)),m(Mt,{content:"不良批次最多的5家供应商",placement:"top"},{default:x(()=>[m(Tt,null,{default:x(()=>[m(kt(ds))]),_:1})]),_:1})])]),default:x(()=>[S("div",ntt,[m(at,{data:l.value,style:{width:"100%"},"header-cell-style":{background:"#f5f7fa",color:"#606266"},border:"",stripe:""},{default:x(()=>[m(et,{type:"index",label:"排名",width:"50",align:"center"}),m(et,{prop:"supplierName",label:"供应商名称","min-width":"140"}),m(et,{prop:"materialCount",label:"物料种类",width:"90",align:"center"}),m(et,{prop:"defectBatchCount",label:"不良批次",width:"90",align:"center"},{default:x(ft=>[m(ut,{type:ft.row.defectBatchCount>10?"danger":ft.row.defectBatchCount>5?"warning":"success",effect:"dark"},{default:x(()=>[F(N(ft.row.defectBatchCount)+" 起 ",1)]),_:2},1032,["type"])]),_:1}),m(et,{prop:"mainDefectTypes",label:"主要不良类型","min-width":"140"})]),_:1},8,["data"])]),S("div",itt,[u.value>0?(J(),Jt(Q,{key:0,type:"error",title:`发现${u.value}家高风险供应商，不良批次超过10批，建议进行质量审核`,"show-icon":""},{default:x(()=>{var ft;return[S("div",null,"建议对"+N(((ft=l.value[0])==null?void 0:ft.supplierName)||"问题供应商")+"进行供应商质量管理体系评估",1)]}),_:1},8,["title"])):(J(),ht("div",ott,[m(Tt,{color:"#67C23A"},{default:x(()=>[m(kt(wc))]),_:1}),W[6]||(W[6]=S("span",null,"所有供应商质量表现良好",-1))]))])]),_:1})]),_:1})]),_:1}),m(mt,{gutter:20,class:"chart-row"},{default:x(()=>[m(j,{xs:24,sm:24,md:16,lg:16},{default:x(()=>[m(bt,{shadow:"hover",class:"chart-card"},{header:x(()=>[S("div",stt,[W[7]||(W[7]=S("h4",null,"物料上线质量预警看板",-1)),m(Mt,{content:"显示项目中不良异常的数量统计",placement:"top"},{default:x(()=>[m(Tt,null,{default:x(()=>[m(kt(ds))]),_:1})]),_:1})])]),default:x(()=>[S("div",ltt,[m(Et,{modelValue:h.value,"onUpdate:modelValue":W[1]||(W[1]=ft=>h.value=ft)},{default:x(()=>[m(Dt,{label:"项目不良异常",name:"project"},{default:x(()=>[S("div",ctt,[m(mt,{gutter:10},{default:x(()=>[(J(!0),ht(ye,null,Se(d.value,(ft,$t)=>(J(),Jt(j,{xs:12,sm:8,md:6,lg:4,key:$t},{default:x(()=>[S("div",{class:ve(["exception-stat-card",O(ft.count)])},[S("div",utt,N(ft.project),1),S("div",htt,N(ft.count)+"起",1),S("div",{class:ve(["exception-trend",ft.trend>0?"trend-up":"trend-down"])},N(ft.trend>0?"上升":"下降")+" "+N(Math.abs(ft.trend))+"% ",3)],2)]),_:2},1024))),128))]),_:1}),S("div",dtt,[W[12]||(W[12]=S("div",{class:"summary-title"},"项目不良异常分析",-1)),S("div",ftt,[S("p",null,[W[8]||(W[8]=F("项目异常总数")),S("span",ptt,N(f.value),1),W[9]||(W[9]=F("起"))]),S("p",null,[W[10]||(W[10]=F("最严重项目")),S("span",gtt,N(p.value),1)]),S("p",null,[W[11]||(W[11]=F("主要不良类型")),S("span",vtt,N(g.value),1)])])])])]),_:1}),m(Dt,{label:"不良类型分布",name:"defectType"},{default:x(()=>[S("div",{class:"defect-type-chart",ref_key:"defectTypeChartRef",ref:a},null,512)]),_:1}),m(Dt,{label:"异常趋势",name:"trend"},{default:x(()=>[S("div",{class:"exception-trend-chart",ref_key:"exceptionTrendChartRef",ref:r},null,512)]),_:1})]),_:1},8,["modelValue"])])]),_:1})]),_:1}),m(j,{xs:24,sm:24,md:8,lg:8},{default:x(()=>[m(bt,{shadow:"hover",class:"chart-card"},{header:x(()=>[S("div",mtt,[W[13]||(W[13]=S("h4",null,"各工厂不良物料数量对比",-1)),m(Mt,{content:"各工厂的不良物料数量统计",placement:"top"},{default:x(()=>[m(Tt,null,{default:x(()=>[m(kt(ds))]),_:1})]),_:1})])]),default:x(()=>[S("div",{class:"chart-container",ref_key:"lineChartRef",ref:t},null,512)]),_:1})]),_:1})]),_:1})])}}},_tt=ca(ytt,[["__scopeId","data-v-4b4df35b"]]),btt={class:"page-header"},xtt={class:"header-content"},Stt={class:"title-section"},wtt={class:"page-title"},Ctt={key:0,class:"page-subtitle"},Ttt={class:"actions-section"},Att={__name:"PageHeader",props:{title:{type:String,required:!0},subtitle:{type:String,default:""},showDivider:{type:Boolean,default:!0}},setup(e){return(t,a)=>{const r=q("el-divider");return J(),ht("div",btt,[S("div",xtt,[S("div",Stt,[S("h2",wtt,N(e.title),1),e.subtitle?(J(),ht("p",Ctt,N(e.subtitle),1)):te("",!0)]),S("div",Ttt,[C3(t.$slots,"actions",{},void 0,!0)])]),e.showDivider?(J(),Jt(r,{key:0})):te("",!0)])}}},ktt=ca(Att,[["__scopeId","data-v-3d16c298"]]),Dtt={class:"factory-view"},Ltt={class:"filter-section"},Itt={class:"filter-container"},Mtt={class:"filter-actions"},Ett={class:"table-section"},Rtt={class:"table-header"},Ptt={class:"table-actions"},Btt={class:"expanded-row"},Ott={class:"expanded-section"},Ntt={class:"expanded-section"},$tt={class:"pagination-container"},Ftt={__name:"FactoryView",setup(e){ue([fl,Vi,zo,ri,Cn,An,Tn,_u,_0,kn]);const t=Zn("unifiedDataService"),a=Z([]),r=Z(""),n=Z(""),i=Z(""),o=Z("");Z(1),Z(20);const s=Z(!1),l=Z(!1),c=Z(null);Z(null);const u=Z(null),h=Z(null),d=Z(null),f=Z(!1),p=Z(!0);let g=null,v=null,_=null,y=null,b=null;const w=Yt(()=>[...new Set(a.value.map(st=>st.factory))]),T=Yt(()=>[...new Set(a.value.map(st=>st.category))]),C=fa({currentPage:1,pageSize:10}),A=["色差","尺寸异常","起鼓","划伤","异物","漏印","毛刺","功能失效"],k=Yt(()=>{let U=[...a.value];if(r.value){const st=r.value.toLowerCase();U=U.filter(_t=>{const vt=String(_t.materialCode||"").toLowerCase(),Ct=String(_t.materialName||"").toLowerCase(),St=String(_t.batchNo||"").toLowerCase();return vt.includes(st)||Ct.includes(st)||St.includes(st)})}return n.value&&(U=U.filter(st=>st.factory===n.value)),i.value&&(U=U.filter(st=>st.category===i.value)),o.value&&(U=U.filter(st=>st.status===o.value)),U}),L=Yt(()=>k.value.length),M=Yt(()=>{var vt,Ct;const U=(C.currentPage-1)*C.pageSize,st=U+C.pageSize,_t=k.value.slice(U,st);return console.log("🔍 paginatedMaterials 计算结果:",{materialsLength:((vt=a.value)==null?void 0:vt.length)||0,filteredLength:((Ct=k.value)==null?void 0:Ct.length)||0,paginatedLength:(_t==null?void 0:_t.length)||0,currentPage:C.currentPage,pageSize:C.pageSize,startIndex:U,endIndex:st}),_t}),P=U=>{C.currentPage=U,console.log(`页码变更: ${U}, 显示数据: ${M.value.length}条`)},E=U=>{C.pageSize=U,console.log(`每页条数变更: ${U}, 显示数据: ${M.value.length}条`),C.currentPage>Math.ceil(L.value/C.pageSize)&&L.value>0&&(C.currentPage=1)};Wr([r,n,i,o],()=>{C.currentPage=1});const D=Z(0),O=Z(0),B=Z(0),R=Z(0),V=Z(0),z=Z(0),W=Z(0);async function it(){console.log("🔄 开始刷新上线数据..."),console.log("⚠️ 仅刷新显示，不自动生成数据"),dt.info("数据已刷新"),a.value=await bt(),Et(),$a(()=>{X()}),dt({type:"success",message:"数据已刷新"})}function ot(U){console.log("点击行数:",U),console.log("不良率数:",{yield:U.yield,defectRate:U.defectRate,calculatedDefectRate:$t(U.yield)}),c.value=U,s.value=!0}async function xt(U){try{c.value=U,s.value=!0,await $a(),_=await ft(U)}catch(st){console.error("查看批次详情失败:",st),dt.error("加载详情失败，请重试")}}function j(U){c.value=U,Q(U),l.value=!0,$a(()=>{ut(),at()})}function mt(U){return U==="合格"?"success":U==="待检"?"info":U==="不合"?"danger":U&&U.includes("风险物料")?"warning":""}function Tt(U){return U==="低风险"?"success":U==="中风风险"?"warning":U==="高风险"?"danger":"info"}function Mt({row:U}){return U.status==="异常"?"error-row":U.status==="风险"?"risk-row":U.yield<75?"low-yield-row":""}function et(U){if(!U)return"-";try{const st=new Date(U);return isNaN(st.getTime())?"-":st.toLocaleString("zh-CN",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"})}catch(st){return console.error("日期格式化错误:",st),"-"}}async function ut(){if(!u.value||!c.value)return;on(y);const U=[{name:"质量不合",value:45},{name:"外观缺陷",value:28},{name:"尺寸异常",value:14},{name:"参数偏差",value:8},{name:"标识不清",value:5}],st={tooltip:{trigger:"item",formatter:"{b}: {c} ({d}%)"},legend:{orient:"vertical",right:10,top:"center",data:U.map(_t=>_t.name)},series:[{name:"异常类型",type:"pie",radius:["50%","70%"],avoidLabelOverlap:!1,itemStyle:{borderRadius:10,borderColor:"#fff",borderWidth:2},label:{show:!0,formatter:"{b}: {d}%"},emphasis:{label:{show:!0,fontSize:16,fontWeight:"bold"}},data:U}]};y=await co(u.value,st),uo(y,u.value)}async function at(){if(!h.value||!c.value)return;on(b);const U=[],st=new Date;for(let St=6;St>=0;St--){const Gt=new Date(st);Gt.setDate(st.getDate()-St),U.push(`${Gt.getMonth()+1}/${Gt.getDate()}`)}const _t=[1.2,1.5,2.8,3.2,2.5,1.8,1.2],vt=[98.5,98.2,96.5,95.8,97,97.8,98.5],Ct={tooltip:{trigger:"axis",axisPointer:{type:"cross",label:{backgroundColor:"#6a7985"}}},legend:{data:["异常率","良率"],bottom:0},grid:{left:"3%",right:"4%",bottom:"15%",containLabel:!0},xAxis:{type:"category",boundaryGap:!1,data:U},yAxis:[{type:"value",name:"异常率(%)",min:0,max:5,position:"left",axisLabel:{formatter:"{value}%"}},{type:"value",name:"良率(%)",min:90,max:100,position:"right",axisLabel:{formatter:"{value}%"}}],series:[{name:"异常率",type:"line",yAxisIndex:0,data:_t,itemStyle:{color:"#F56C6C"},areaStyle:{color:new Wn(0,0,0,1,[{offset:0,color:"rgba(245, 108, 108, 0.5)"},{offset:1,color:"rgba(245, 108, 108, 0.1)"}])}},{name:"良率",type:"line",yAxisIndex:1,data:vt,itemStyle:{color:"#67C23A"},areaStyle:{color:new Wn(0,0,0,1,[{offset:0,color:"rgba(103, 194, 58, 0.5)"},{offset:1,color:"rgba(103, 194, 58, 0.1)"}])}}]};b=await co(h.value,Ct),uo(b,h.value)}function Q(U){let st=[],_t=[];U.status==="异常"||U.quality==="不合"?(st=[{title:"供应商质量波动",description:`${U.supplier}近期物料批次稳定性下降，此批次不符合标准${U.materialCode}的要求。`,level:"error"},{title:"材料参数异常",description:`材料${U.materialName}参数超出标准规格范围。`,level:"warning"},{title:"检验环境问题",description:"检验环境温度过高，影响材料性能测试结果。",level:"info"}],_t=[{title:"联系供应商进行质量复检",content:`联系${U.supplier}，提供批次号${U.batchNo}，要求进行批次确认及复检，共同分析批次不良的根源原因。`,impact:[{metric:"风险规避",value:"+80",unit:"%"},{metric:"质量成本",value:"-0.3",unit:"%"}]},{title:"增加供应商审核频率",content:"暂时将该供应商列入重点监控名单，增加供应商审核频率，从每季度一次增加到每月一次。",impact:[{metric:"不良批次",value:"-60",unit:"%"},{metric:"验收成本",value:"+0.1",unit:"%"}]},{title:"调整验收标准",content:"考虑调整该类型物料的验收标准，增加关键参数检测项。",impact:[{metric:"漏检",value:"-45",unit:"%"},{metric:"检验时间",value:"+10",unit:"%"}]}]):U.status==="风险"||U.quality&&U.quality.includes("风险物料")?(st=[{title:"设备调试参数偏差",description:`与此批次${U.materialCode}匹配的设备参数需要微调，当前调试参数可能导致装配偏差。`,level:"warning"},{title:"治具磨损",description:"装配治具使用次数超过5000次，存在磨损，影响装配精度。",level:"warning"},{title:"产线员工操作不规范",description:"新员工操作不熟练，未严格按照标准作业指导书进行操作。",level:"info"}],_t=[{title:"设备扭力校准",content:"对ZL500自动螺丝机进行扭力校准，并增加日常检查频率。建议使用扭力测试仪进行每日抽检，记录扭力值波动情况。",impact:[{metric:"螺丝紧固质量",value:"+20",unit:"%"},{metric:"返工",value:"-0.5",unit:"%"}]},{title:"更换磨损治具",content:"更换已使用超过5000次的组装治具，特别是定位销和卡扣部位。建议使用耐磨材质，延长使用寿命。",impact:[{metric:"装配精度",value:"+15",unit:"%"},{metric:"外观缺陷",value:"-0.3",unit:"%"}]},{title:"强化员工培训",content:"针对新员工开展专项培训，包括操作技能、质量意识和异常处理能力。安排资深员工一对一指导，为期一周。",impact:[{metric:"操作熟练度",value:"+30",unit:"%"},{metric:"消耗量",value:"+2.5",unit:"%"}]}]):(st=[{title:"测试设备校准周期超期",description:"信号测试仪SG500最后一次校准时间为3个月前，超过规定3个月校准周期，可能导致测试参数偏移。",level:"warning"},{title:"测试软件版本不兼容",description:"当前使用的测试软件版本为v2.5.1，与最新产品固件版本v3.0.2存在兼容性问题，导致部分功能测试失败率增加。",level:"error"},{title:"环境温度波动较大",description:"测试区域温度波动范围2°C-28°C，超出标准要求的23°C±2°C，影响部分精密参数测试结果。",level:"info"}],_t=[{title:"测试设备校准",content:"立即对SG500信号测试仪进行校准，并更新校准周期管理系统，设置自动提醒功能，确保按时进行设备校准。",impact:[{metric:"测试准确率",value:"+15",unit:"%"},{metric:"误判率",value:"-0.4",unit:"%"}]},{title:"更新测试软件",content:"将测试软件从v2.5.1升级到v3.1.0版本，解决与最新固件的兼容性问题。升级前需进行备份和兼容性测试。",impact:[{metric:"测试覆盖率",value:"+10",unit:"%"},{metric:"测试效率",value:"+5",unit:"%"}]},{title:"优化环境控制",content:"调整测试区域空调设置，增加温湿度监控点，确保环境温度稳定在3°C±2°C范围内。考虑增加恒温装置。",impact:[{metric:"测试稳定性",value:"+20",unit:"%"},{metric:"良率",value:"+0.3",unit:"%"}]}]),d.value={causes:st,suggestions:_t}}Wr(s,U=>{!U&&_&&(on(_),_=null)}),Wr(l,U=>{U||(y&&(on(y),y=null),b&&(on(b),b=null))});async function bt(){try{if(console.log("🔍 开始获取工厂上线数据..."),!t){console.error("❌ unifiedDataService未定义，尝试直接从localStorage获取数据");const st=localStorage.getItem("unified_factory_data");if(st){const _t=JSON.parse(st);return console.log("📦 直接从localStorage获取数据:",_t.length,"条"),Dt(_t)}else return console.error("❌ localStorage中也没有数据"),[]}let U;try{U=await t.getFactoryData(),console.log("🔍 unifiedDataService.getFactoryData() 返回:",U)}catch(st){console.error("❌ 获取工厂数据失败:",st);try{U=t.getOnlineData(),console.log("🔄 使用同步方式获取数据:",U)}catch(_t){console.error("❌ 同步方式也失败:",_t);const vt=localStorage.getItem("unified_factory_data");vt?(U=JSON.parse(vt),console.log("🔄 最终从localStorage获取数据:",U.length,"条")):U=[]}}return Dt(U)}catch(U){return console.error("❌ 处理上线数据失败:",U),dt.error("处理上线数据失败，请刷新页面重试"),[]}}function Dt(U){try{if(!U||U.length===0)return console.log("⚠️ 未找到上线数据，请检查数据生成状态"),dt.warning('未找到上线数据，请在"管理工具"中生成数据'),[];console.log(`📦 获取${U.length}条上线数据，正在处理...`);const st=U[0],_t=(st==null?void 0:st.materialName)||(st==null?void 0:st.material_name)||"",vt=(st==null?void 0:st.materialCode)||(st==null?void 0:st.material_code)||"";if(vt.match(/^CS-[A-Z]-\d+$/)||["电容器","电阻器","二极管"].includes(_t))return console.warn("❌ 检测到测试数据，这不是您的真实业务数据！"),console.warn("样本数据:",{materialCode:vt,materialName:_t,supplier:st==null?void 0:st.supplier}),dt.error("检测到测试数据，请重新生成真实业务数据"),[];const St=["LCD显示屏","OLED显示屏","中框","侧键","手机卡托","电池盖","装饰件","听筒","喇叭","摄像头","电池","充电器","保护套","包装盒","标签"];U.some(zt=>{const xe=zt.materialName||zt.material_name||"";return St.some(Kt=>xe.includes(Kt))})?console.log("✅ 验证通过：数据包含真实业务物料"):(console.warn("❌ 数据中未包含真实物料名称"),dt.warning("数据中未包含真实物料，请检查数据生成器配置"));const Xt=U.map((zt,xe)=>{var Ie;xe===0&&(console.log("🔍 原始数据样本结构:",Object.keys(zt)),console.log("🔍 原始数据样本内容:",zt));const Kt={id:zt.id||`OL-${Math.floor(Math.random()*1e5)}`,materialCode:zt.materialCode||zt.material_code||"",materialName:zt.materialName||zt.material_name||"",category:zt.category||"",batchNo:zt.batchNo||zt.batch_no||"",supplier:zt.supplier||"",factory:zt.factory||"",line:zt.line||zt.productionLine||"",defectRate:parseFloat(((Ie=zt.defectRate)==null?void 0:Ie.toString().replace("%",""))||"0"),yield:parseFloat(zt.yield||"98.5"),project:zt.project||zt.projectId||zt.project_id||"",project_display:zt.project_display||zt.project_name||`项目${zt.project||zt.projectId||zt.project_id||""}`,baseline_display:zt.baseline_display||zt.baseline_name||zt.baseline||"",quality:zt.quality||"合格",status:zt.status||"正常",useTime:zt.useTime||zt.onlineTime||zt.onlineDate||new Date().toISOString(),inspectionDate:zt.inspectionDate||zt.inspection_date||"",exceptionCount:parseInt(zt.exceptionCount||"0"),defect:zt.defect||""};return xe===0&&console.log("🔍 处理后数据样本:",Kt),Kt});return console.log(`✅ 已成功处理${Xt.length}条上线数据`),Xt.length>0&&(console.log("📋 上线数据样本:",{materialCode:Xt[0].materialCode,materialName:Xt[0].materialName,supplier:Xt[0].supplier,factory:Xt[0].factory,batchNo:Xt[0].batchNo,defectRate:Xt[0].defectRate}),console.log("🔍 前5条数据详细结构:"),Xt.slice(0,5).forEach((zt,xe)=>{console.log(`数据${xe+1}:`,{id:zt.id,materialName:zt.materialName,materialCode:zt.materialCode,batchNo:zt.batchNo,supplier:zt.supplier,factory:zt.factory,defectRate:zt.defectRate,project:zt.project,inspectionDate:zt.inspectionDate})})),Xt}catch(st){return console.error("❌ 处理上线数据失败:",st),dt.error("处理上线数据失败，请刷新页面重试"),[]}}function Et(){D.value=a.value.length;let U=0,st=0,_t=0,vt=0,Ct=0;a.value.forEach(Gt=>{if((Gt.status==="异常"||Gt.status==="风险"||Gt.quality==="不合"||Gt.quality&&Gt.quality.includes("风险物料"))&&Ct++,Gt.yield&&Gt.yield>0){U+=Gt.yield,st++;const Xt=100-Gt.yield;_t+=Xt,vt++}});const St=vt>0?(_t/vt).toFixed(1):0;O.value=st,B.value=St,R.value=Ct,V.value=(Ct/a.value.length*100).toFixed(1),z.value=st>0?(U/st).toFixed(1):0,W.value=(Math.random()*4-2).toFixed(1)}Ra(async()=>{var U,st;f.value=!0;try{console.log("🚀 开始初始化工厂页面...");try{const _t=await jt(()=>import("./data_generator-DpTjsdbG.js"),__vite__mapDeps([0,1,2]));window.generateCompleteDataset=_t.generateCompleteDataset,console.log("✅ 数据生成器已加载到全局")}catch(_t){console.warn("⚠️ 数据生成器加载失败:",_t)}console.log("📦 开始提取物料数据..."),a.value=await bt(),console.log("🔍 materials.value 赋值后状态:",{length:((U=a.value)==null?void 0:U.length)||0,isArray:Array.isArray(a.value),sample:((st=a.value)==null?void 0:st[0])||null}),!a.value||a.value.length===0?(console.warn('没有找到物料数据，请在"管理工具"中手动生成数据'),dt.warning('未检测到物料数据，请在"管理工具"中生成数据')):console.log(`✅ 成功加载 ${a.value.length} 条物料数据到页面`),Et(),await $a();try{await X()}catch(_t){console.error("工厂图表渲染失败:",_t)}}catch(_t){console.error("初始化失败:",_t),dt.error("初始化失败，请刷新页面重试")}finally{f.value=!1,console.log("✅ 工厂页面初始化完成")}}),rf(()=>{on(g),on(v),on(_),on(y),on(b)});async function ft(U){try{const st=document.getElementById("performance-chart");if(!st)return console.error("找不到图表容器 performance-chart"),null;const _t=await co(st,{});if(!_t)return null;const vt=["良品","产线平均","质检时间(min)","合格率"],Ct=[U.yieldRate||95.6,U.lineAvgYield||92.3,U.inspectionTime||48,U.qualityRate||97.8],St={tooltip:{trigger:"axis",formatter:"{b}: {c}"},radar:{shape:"circle",indicator:[{name:"良品",max:100},{name:"产线平均",max:100},{name:"质检时间(min)",max:120,inverse:!0},{name:"合格率",max:100}]},series:[{name:"物料绩效",type:"radar",data:[{value:Ct,name:U.materialName,areaStyle:{color:"rgba(64, 158, 255, 0.6)"}}]}]};return _t.setOption(St),uo(_t,st),_t}catch(st){return console.error("初始化物料绩效图表失败:",st),dt.error("图表加载失败"),null}}function $t(U){const st=String(U.batchNo||""),_t=String(U.materialCode||""),vt=String(U.id||U.key||Date.now());let Ct=0;for(let Xt=0;Xt<st.length;Xt++)Ct+=st.charCodeAt(Xt);for(let Xt=0;Xt<_t.length;Xt++)Ct+=_t.charCodeAt(Xt);for(let Xt=0;Xt<vt.length;Xt++)Ct+=vt.charCodeAt(Xt);Ct+=Math.random();const St=Math.sin(Ct)*1e4;return(Math.abs(St-Math.floor(St))*4.9+.1).toFixed(1)}function Pt(U){return U<2?"success-text":U<5?"warning-text":"danger-text"}function qt(U){const st=U.defectRate??U.defect_rate??0;return parseFloat(st).toFixed(1)}function nt(U){if(parseFloat(qt(U))===0)return"-";if(U.defect)return U.defect;const _t=Math.floor(Math.random()*A.length);return A[_t]}const H=()=>{C.currentPage=1,dt.success("筛选已应用")},tt=()=>{r.value="",n.value="",i.value="",o.value="",C.currentPage=1,dt.info("筛选条件已重置")};function Rt(){dt.info("正在导出数据..."),setTimeout(()=>{dt.success("数据导出成功")},1e3)}function lt(){var vt,Ct,St,Gt,Xt,zt,xe,Kt,Ie;console.log("🔍 === 数据状态调试 ===");const U=localStorage.getItem("unified_factory_data");console.log("📦 localStorage数据:",{exists:!!U,length:U?U.length:0,preview:U?U.substring(0,200)+"...":"null"});let st=[];try{t?st=t.getOnlineData():console.warn("⚠️ unifiedDataService未定义")}catch(Ne){console.error("❌ unifiedDataService调用失败:",Ne)}console.log("🔧 unifiedDataService数据:",{length:(st==null?void 0:st.length)||0,sample:(st==null?void 0:st[0])||null}),console.log("📋 materials.value状态:",{length:((vt=a.value)==null?void 0:vt.length)||0,isArray:Array.isArray(a.value),sample:((Ct=a.value)==null?void 0:Ct[0])||null}),console.log("🔍 filteredMaterials状态:",{length:((St=k.value)==null?void 0:St.length)||0,sample:((Gt=k.value)==null?void 0:Gt[0])||null}),console.log("📄 paginatedMaterials状态:",{length:((Xt=M.value)==null?void 0:Xt.length)||0,sample:((zt=M.value)==null?void 0:zt[0])||null});const _t=`
数据状态检查结果：
- localStorage: ${U?"有数据":"无数据"}
- Service数据: ${(st==null?void 0:st.length)||0}条
- materials.value: ${((xe=a.value)==null?void 0:xe.length)||0}条
- 过滤后数据: ${((Kt=k.value)==null?void 0:Kt.length)||0}条
- 分页数据: ${((Ie=M.value)==null?void 0:Ie.length)||0}条
  `;dt.info(_t),console.log("🔍 === 调试完成 ===")}async function X(){try{console.log("开始渲染工厂物料质量图表...");const U=document.getElementById("factory-chart");if(!U){console.warn("找不到工厂图表容器，跳过渲染");return}const st=xr(U),_t=At(),vt={title:{text:"工厂物料质量状态",left:"center"},tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},legend:{data:["合格批次","不合格批次","不良率"],top:30},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:[{type:"category",data:_t.factories,axisTick:{alignWithLabel:!0},axisLabel:{rotate:30,fontSize:12}}],yAxis:[{type:"value",name:"批次数量",position:"left"},{type:"value",name:"不良率(%)",position:"right",min:0,max:10,splitLine:{show:!1}}],series:[{name:"合格批次",type:"bar",stack:"total",emphasis:{focus:"series"},data:_t.goodBatches},{name:"不合格批次",type:"bar",stack:"total",emphasis:{focus:"series"},data:_t.badBatches},{name:"不良率",type:"line",yAxisIndex:1,data:_t.defectRates,symbolSize:8}]};return st.setOption(vt),g=st,console.log("工厂物料质量图表渲染完成"),window.addEventListener("resize",()=>{st.resize()}),st}catch(U){return console.error("渲染工厂质量图表失败:",U),null}}function At(){const U=[...new Set(a.value.map(Ct=>Ct.factory))].filter(Boolean),st=[],_t=[],vt=[];return U.forEach(Ct=>{const St=a.value.filter(Kt=>Kt.factory===Ct),Gt=St.filter(Kt=>Kt.quality==="合格"||Kt.quality==="正常").length,Xt=St.filter(Kt=>Kt.quality==="不合格"||Kt.quality==="异常").length;st.push(Gt),_t.push(Xt);const zt=Gt+Xt,xe=zt>0?(Xt/zt*100).toFixed(1):0;vt.push(parseFloat(xe))}),{factories:U,goodBatches:st,badBatches:_t,defectRates:vt}}return(U,st)=>{const _t=q("el-icon"),vt=q("el-button"),Ct=q("el-button-group"),St=q("el-input"),Gt=q("el-col"),Xt=q("el-option"),zt=q("el-select"),xe=q("el-row"),Kt=q("el-card"),Ie=q("el-switch"),Ne=q("el-descriptions-item"),xa=q("el-tag"),we=q("el-descriptions"),Ee=q("el-table-column"),Lt=q("el-table"),he=q("el-pagination"),je=Po("loading");return J(),ht("div",Dtt,[m(ktt,{title:"物料上线跟踪",subtitle:"监控物料上线质量状态"},{actions:x(()=>[m(Ct,null,{default:x(()=>[m(vt,{type:"primary",onClick:it},{default:x(()=>[m(_t,null,{default:x(()=>[m(kt(nf))]),_:1}),st[5]||(st[5]=F(" 刷新数据 "))]),_:1,__:[5]}),m(vt,{onClick:Rt},{default:x(()=>[m(_t,null,{default:x(()=>[m(kt(Ii))]),_:1}),st[6]||(st[6]=F(" 导出数据 "))]),_:1,__:[6]})]),_:1})]),_:1}),m(_tt),S("div",Ltt,[m(Kt,{shadow:"hover"},{default:x(()=>[S("div",Itt,[m(xe,{gutter:20},{default:x(()=>[m(Gt,{xs:24,sm:12,md:6,lg:6},{default:x(()=>[m(St,{modelValue:r.value,"onUpdate:modelValue":st[0]||(st[0]=$=>r.value=$),placeholder:"搜索物料编码、名称或批次",clearable:"",class:"filter-item"},{prefix:x(()=>[m(_t,null,{default:x(()=>[m(kt(af))]),_:1})]),_:1},8,["modelValue"])]),_:1}),m(Gt,{xs:24,sm:12,md:6,lg:4},{default:x(()=>[m(zt,{modelValue:n.value,"onUpdate:modelValue":st[1]||(st[1]=$=>n.value=$),placeholder:"工厂",clearable:"",class:"filter-item"},{default:x(()=>[m(Xt,{label:"全部工厂",value:""}),(J(!0),ht(ye,null,Se(w.value,$=>(J(),Jt(Xt,{key:$,label:$,value:$},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),m(Gt,{xs:24,sm:12,md:6,lg:4},{default:x(()=>[m(zt,{modelValue:i.value,"onUpdate:modelValue":st[2]||(st[2]=$=>i.value=$),placeholder:"物料类别",clearable:"",class:"filter-item"},{default:x(()=>[m(Xt,{label:"全部类别",value:""}),(J(!0),ht(ye,null,Se(T.value,$=>(J(),Jt(Xt,{key:$,label:$,value:$},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),m(Gt,{xs:24,sm:12,md:6,lg:4},{default:x(()=>[m(zt,{modelValue:o.value,"onUpdate:modelValue":st[3]||(st[3]=$=>o.value=$),placeholder:"状态",clearable:"",class:"filter-item"},{default:x(()=>[m(Xt,{label:"全部状态",value:""}),m(Xt,{label:"正常",value:"正常"}),m(Xt,{label:"风险",value:"风险"}),m(Xt,{label:"异常",value:"异常"})]),_:1},8,["modelValue"])]),_:1}),m(Gt,{xs:24,sm:12,md:6,lg:6},{default:x(()=>[S("div",Mtt,[m(vt,{type:"primary",onClick:H},{default:x(()=>[m(_t,null,{default:x(()=>[m(kt(VC))]),_:1}),st[7]||(st[7]=F(" 筛选 "))]),_:1,__:[7]}),m(vt,{onClick:tt},{default:x(()=>[m(_t,null,{default:x(()=>[m(kt(Cc))]),_:1}),st[8]||(st[8]=F(" 重置 "))]),_:1,__:[8]})])]),_:1})]),_:1})])]),_:1})]),S("div",Ett,[m(Kt,{shadow:"hover"},{header:x(()=>[S("div",Rtt,[st[10]||(st[10]=S("h3",null,"上线物料质量监控",-1)),S("div",Ptt,[m(Ie,{modelValue:p.value,"onUpdate:modelValue":st[4]||(st[4]=$=>p.value=$),"active-text":"显示图表","inactive-text":"隐藏图表"},null,8,["modelValue"]),m(vt,{type:"warning",size:"small",onClick:lt,style:{"margin-left":"10px"}},{default:x(()=>st[9]||(st[9]=[F(" 🔍 调试数据 ")])),_:1,__:[9]})])])]),default:x(()=>[Bo((J(),Jt(Lt,{data:M.value,style:{width:"100%"},border:"",stripe:"","highlight-current-row":"",onRowClick:ot,"row-class-name":Mt},{default:x(()=>[m(Ee,{type:"expand"},{default:x($=>[S("div",Btt,[S("div",Ott,[st[11]||(st[11]=S("h4",null,"物料详情",-1)),m(we,{column:2,border:""},{default:x(()=>[m(Ne,{label:"物料编码"},{default:x(()=>[F(N($.row.materialCode),1)]),_:2},1024),m(Ne,{label:"物料名称"},{default:x(()=>[F(N($.row.materialName),1)]),_:2},1024),m(Ne,{label:"所属类别"},{default:x(()=>[F(N($.row.category),1)]),_:2},1024),m(Ne,{label:"供应商"},{default:x(()=>[F(N($.row.supplier),1)]),_:2},1024),m(Ne,{label:"批次号"},{default:x(()=>[F(N($.row.batchNo),1)]),_:2},1024),m(Ne,{label:"进货数量"},{default:x(()=>[F(N($.row.quantity),1)]),_:2},1024),m(Ne,{label:"检验日期"},{default:x(()=>[F(N($.row.inspectionDate?new Date($.row.inspectionDate).toLocaleString():"-"),1)]),_:2},1024),m(Ne,{label:"质量状态"},{default:x(()=>[m(xa,{type:mt($.row.quality)},{default:x(()=>[F(N($.row.quality),1)]),_:2},1032,["type"])]),_:2},1024),m(Ne,{label:"风险等级"},{default:x(()=>[m(xa,{type:Tt($.row.riskLevel)},{default:x(()=>[F(N($.row.riskLevel),1)]),_:2},1032,["type"])]),_:2},1024)]),_:2},1024)]),S("div",Ntt,[st[12]||(st[12]=S("h4",null,"使用情况",-1)),m(we,{column:2,border:""},{default:x(()=>[m(Ne,{label:"上线时间"},{default:x(()=>[F(N($.row.useTime?new Date($.row.useTime).toLocaleString():"-"),1)]),_:2},1024),m(Ne,{label:"使用产线"},{default:x(()=>[F(N($.row.line),1)]),_:2},1024),m(Ne,{label:"所属工段"},{default:x(()=>[F(N($.row.factory),1)]),_:2},1024),m(Ne,{label:"所属项目"},{default:x(()=>[F(N($.row.project_display),1)]),_:2},1024),m(Ne,{label:"所属基线"},{default:x(()=>[F(N($.row.baseline_display),1)]),_:2},1024),m(Ne,{label:"物料不良率"},{default:x(()=>[S("span",{class:ve(Pt(qt($.row)))},N(qt($.row))+"%",3)]),_:2},1024),m(Ne,{label:"异常次数"},{default:x(()=>[F(N($.row.exceptionCount||0),1)]),_:2},1024)]),_:2},1024)])])]),_:1}),m(Ee,{prop:"factory",label:"工厂",width:"120"}),m(Ee,{label:"基线",width:"120"},{default:x($=>[F(N($.row.baseline_display||$.row.baseline||$.row.baselineName||$.row.baseline_name||"-"),1)]),_:1}),m(Ee,{label:"项目",width:"150"},{default:x($=>[F(N($.row.project_display||$.row.project||$.row.projectName||$.row.project_name||"-"),1)]),_:1}),m(Ee,{prop:"materialCode",label:"物料编号",width:"120"}),m(Ee,{prop:"materialName",label:"物料名称",width:"180"}),m(Ee,{prop:"supplier",label:"供应商",width:"150"}),m(Ee,{prop:"batchNo",label:"批次",width:"120",sortable:""}),m(Ee,{label:"不良率",width:"100",sortable:""},{default:x($=>[S("span",{class:ve(Pt(qt($.row)))},N(qt($.row))+"%",3)]),_:1}),m(Ee,{label:"不良现象",width:"150"},{default:x($=>[S("span",null,N(nt($.row)),1)]),_:1}),m(Ee,{prop:"inspectionDate",label:"检验日期",width:"180"},{default:x($=>[F(N(et($.row.inspectionDate)),1)]),_:1}),m(Ee,{label:"操作",fixed:"right",width:"150"},{default:x($=>[m(vt,{type:"primary",link:"",size:"small",onClick:Wh(rt=>xt($.row),["stop"])},{default:x(()=>[m(_t,null,{default:x(()=>[m(kt(ru))]),_:1}),st[13]||(st[13]=F(" 详情 "))]),_:2,__:[13]},1032,["onClick"]),m(vt,{type:"warning",link:"",size:"small",onClick:Wh(rt=>j($.row),["stop"])},{default:x(()=>[m(_t,null,{default:x(()=>[m(kt(Ro))]),_:1}),st[14]||(st[14]=F(" 异常分析 "))]),_:2,__:[14]},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[je,f.value]]),S("div",$tt,[m(he,{background:"",layout:"total, sizes, prev, pager, next, jumper",total:L.value,"page-size":C.pageSize,"page-sizes":[10,20,50,100],"current-page":C.currentPage,onSizeChange:E,onCurrentChange:P},null,8,["total","page-size","current-page"])])]),_:1})])])}}},ztt=ca(Ftt,[["__scopeId","data-v-8f452188"]]),Vtt={PJ001:"BL001",PJ002:"BL001",PJ003:"BL002",PJ004:"BL002",PJ005:"BL003",PJ006:"BL003",PJ007:"BL004",PJ008:"BL004",PJ009:"BL005",PJ010:"BL005"},Gtt={class:"data-generation-panel"},Htt={class:"panel-header"},Wtt={class:"panel-content"},qtt={class:"section"},Utt={class:"stats-container"},jtt={class:"section"},Ytt={class:"action-group"},Xtt={class:"section"},Ztt={class:"tab-content"},Ktt={class:"data-type-content"},Jtt={class:"data-type-content"},Qtt={class:"action-buttons"},tet={class:"debug-tip"},eet={class:"data-type-content"},aet={class:"tab-content"},ret={class:"tab-content"},net={class:"action-buttons"},iet={key:0,class:"debug-info"},oet={__name:"DataGenerationPanel",emits:["generation-complete"],setup(e,{emit:t}){const a=t,r=Z(""),n=Z({inventoryCount:0,labCount:0,factoryCount:0,lastUpdate:"无"}),i=Z({count:100,clearExisting:!1,useDistribution:!0,refreshAfterGeneration:!1}),o=Z({count:50,clearExisting:!1,materialTypes:["结构件类","光学类","充电类"],factories:["重庆工厂","深圳工厂"],includeRiskItems:!0}),s=Z({count:30,clearExisting:!1,testTypes:["新品测试","量产例行"],projects:["X6827","X6828","S665LN"],includeDefects:!0}),l=Z({count:20,clearExisting:!1,factories:["重庆工厂","深圳工厂","南昌工厂","宜宾工厂"],lines:["01线","02线","03线","04线"],defectRateRange:[0,5]}),c=Z({type:"normal",count:30,suppliers:[]}),u=Mr,h=le;Z(["歌尔股份","蓝思科技","比亚迪电子","立讯精密","欧菲光","舜宇光学","丘钛科技","瑞声科技","京东方BOE","天马微电子","上海精密","广州科技"]);const d=Z({all:!1,inventory:!1,lab:!1,factory:!1,scenario:!1,emergency:!1}),f=Z(!1),p=Z({});Ra(()=>{g()});async function g(){try{const E=h.getInventoryData()||[],D=h.getLabData()||[],O=h.getFactoryData()||[],B=new Set;E.forEach(W=>{W.batchNo&&B.add(W.batchNo)});let R=0,V=0,z=0;O.forEach(W=>{let it;if(W.defectRate)typeof W.defectRate=="string"&&W.defectRate.includes("%")?it=parseFloat(W.defectRate.replace("%","")):it=parseFloat(W.defectRate);else if(W.quality_metrics&&W.quality_metrics.defect_rate!==void 0)it=W.quality_metrics.defect_rate;else if(W.yieldRate){let ot;typeof W.yieldRate=="string"&&W.yieldRate.includes("%")?ot=parseFloat(W.yieldRate.replace("%","")):ot=parseFloat(W.yieldRate),!isNaN(ot)&&ot>0&&(it=100-ot)}else W.yield&&(it=100-W.yield);isNaN(it)||(R+=it,V++,it>5&&z++)}),n.value={inventoryCount:E.length,labCount:D.length,factoryCount:O.length,lastUpdate:Mr.lastUpdateTime.value||new Date().toLocaleString(),batches:B.size,avgDefectRate:V>0?(R/V).toFixed(1):0,highRiskBatches:z},console.log("数据统计已更新:",n.value)}catch(E){console.error("更新统计信息失败:",E),dt.error("更新统计信息失败")}}async function v(){if(!d.value.inventory)try{d.value.inventory=!0,dt.info(`正在生成${o.value.count}条库存数据...`);const E=await u.generateInventoryData(o.value.count,o.value.clearExisting);E&&E.success?(dt.success(`成功生成${E.count}条库存数据`),r.value+=`
[${new Date().toLocaleString()}] 已生成 ${E.count} 条库存数据`,g(),a("generation-complete",{type:"inventory",typeName:"库存",count:E.count})):dt.error((E==null?void 0:E.message)||"库存数据生成失败")}catch(E){console.error("生成库存数据时出错:",E),dt.error(`库存数据生成失败: ${E.message}`),r.value+=`
[${new Date().toLocaleString()}] 错误: 生成库存数据失败 - ${E.message}`}finally{d.value.inventory=!1}}async function _(){try{d.value.lab=!0;const E=Number(s.value.count),D={testTypes:Array.isArray(s.value.testTypes)&&s.value.testTypes.length>0?s.value.testTypes:["新品测试","量产例行","供应商验证","失效分析"],projects:Array.isArray(s.value.projects)&&s.value.projects.length>0?s.value.projects:[],includeDefects:!!s.value.includeDefects};dt.info(`正在生成${E}条测试数据...`);const O=await u.generateLabData(E,s.value.clearExisting,D);O&&O.success?(dt.success(`成功生成${O.count}条测试数据`),r.value+=`
[${new Date().toLocaleString()}] 已生成 ${O.count} 条测试数据`,console.log("测试数据生成成功:",O),console.log("测试数据可以在LabView页面查看"),g(),dt({message:"请刷新测试页面查看新生成的数据",type:"info",duration:5e3}),a("generation-complete",{type:"lab",typeName:"测试",count:O.count})):dt.error((O==null?void 0:O.message)||"测试数据生成失败")}catch(E){console.error("生成测试数据时出错:",E),dt.error(`测试数据生成失败: ${E.message}`),r.value+=`
[${new Date().toLocaleString()}] 错误: 生成测试数据失败 - ${E.message}`}finally{d.value.lab=!1}}async function y(){if(!d.value.factory)try{d.value.factory=!0,dt.info(`正在生成${l.value.count}条上线数据...`);const E=l.value.factories.length>0?l.value.factories:["重庆工厂","深圳工厂","南昌工厂","宜宾工厂"],D=l.value.lines.length>0?l.value.lines:["01线","02线","03线","04线"],O={count:l.value.count,factories:E,lines:D,clearExisting:l.value.clearExisting},R=(await fn.post("/system/updateOnlineData",O)).data;R&&R.success?(dt.success(`成功生成${R.count}条上线数据`),g(),i.value.refreshAfterGeneration?(a("generation-complete",{type:"factory",count:R.count,refresh:!0}),dt({type:"info",message:"上线数据已更新，页面将自动刷新",duration:2e3})):a("generation-complete",{type:"factory",count:R.count})):dt.error((R==null?void 0:R.message)||"生成上线数据失败")}catch(E){console.error("生成上线数据错误:",E),dt.error(`生成上线数据错误: ${E.message}`)}finally{d.value.factory=!1}}async function b(){if(!d.value.all)try{d.value.all=!0,dt.info("正在生成所有数据..."),await u.integrateHistoricalData();const E=await u.updateAllSystemData({inventoryCount:i.value.count,labCount:Math.floor(i.value.count*.6),factoryCount:Math.floor(i.value.count*.4),clearExisting:i.value.clearExisting,useDistribution:i.value.useDistribution});E&&E.success?(dt.success(`成功生成全部数据: ${E.counts.inventory}条库存, ${E.counts.lab}条测试, ${E.counts.factory}条工厂数据`),g(),i.value.refreshAfterGeneration?(a("generation-complete",{type:"all",counts:E.counts,refresh:!0}),dt({type:"info",message:"系统数据已更新，页面将自动刷新",duration:2e3})):a("generation-complete",{type:"all",counts:E.counts})):dt.error(`生成数据失败: ${E?E.message:"未知错误"}`)}catch(E){console.error("生成所有数据时出错:",E),dt.error(`生成所有数据时出错: ${E.message}`)}finally{d.value.all=!1}}async function w(){if(!d.value.scenario)try{d.value.scenario=!0,dt.info(`正在生成${c.value.count}条${c.value.type}场景数据...`),setTimeout(()=>{dt.warning("场景数据生成功能尚未实现"),d.value.scenario=!1},1e3)}catch(E){console.error("生成场景数据时出错:",E),dt.error(`生成场景数据时出错: ${E.message}`),d.value.scenario=!1}}async function T(){try{await u.clearAllData()?(dt.success("所有数据已清空"),g()):dt.error("清空数据失败")}catch(E){console.error("清除数据时出错:",E),dt.error(`清除数据时出错: ${E.message}`)}}function C(){try{f.value=!0,p.value={},["inventory_data","lab_data","factory_data","lab_test_data","online_data"].forEach(D=>{const O=localStorage.getItem(D);let B=null,R="未知";try{O?(B=JSON.parse(O),R="正常"):R="不存在"}catch{R="格式错误"}p.value[D]={exists:!!O,count:B?B.length:0,size:O?`${(O.length/1024).toFixed(2)} KB`:"0 KB",status:R}}),p.value.services={inventory:{exists:!!h.getInventoryData(),count:h.getInventoryData().length},laboratory:{exists:!!h.getLabData(),count:h.getLabData().length},factory:{exists:!!h.getFactoryData(),count:h.getFactoryData().length}},dt.success("数据状态检查完成")}catch(E){console.error("检查数据状态时出错:",E),dt.error(`检查数据状态时出错: ${E.message}`)}}function A(){try{dt.info("正在修复数据不一致..."),h.migrateOldData()?(dt.success("数据不一致已修复"),g(),C()):dt.warning("没有检测到需要修复的数据不一致")}catch(E){console.error("修复数据不一致时出错:",E),dt.error(`修复数据不一致时出错: ${E.message}`)}}function k(){try{const E=h.exportAllData(),D=JSON.stringify(E,null,2),O="data:application/json;charset=utf-8,"+encodeURIComponent(D),B=`iqe-data-export-${new Date().toISOString().slice(0,10)}.json`,R=document.createElement("a");R.setAttribute("href",O),R.setAttribute("download",B),R.click(),dt.success("数据导出成功")}catch(E){console.error("导出数据时出错:",E),dt.error(`导出数据时出错: ${E.message}`)}}function L(E){if(E==null)return"0.0%";if(typeof E=="string"&&E.includes("%"))return E;const D=parseFloat(E);return isNaN(D)?"0.0%":`${D.toFixed(1)}%`}function M(E){if(!E)return"info";const D=parseFloat(E);return isNaN(D)?"info":D>5?"danger":D>2?"warning":"success"}async function P(){if(!d.value.emergency)try{d.value.emergency=!0,dt.info("正在生成紧急数据...");const E=await u.generateEmergencyData();E&&E.success?(dt.success("成功生成紧急数据集"),g(),a("generation-complete",{type:"emergency",data:E.data,refresh:!0}),dt({type:"info",message:"紧急数据已生成，页面将自动刷新",duration:2e3})):dt.error(`生成紧急数据失败: ${E?E.message:"未知错误"}`)}catch(E){console.error("生成紧急数据时出错:",E),dt.error(`生成紧急数据时出错: ${E.message}`)}finally{d.value.emergency=!1}}return(E,D)=>{const O=q("el-tag"),B=q("el-descriptions-item"),R=q("el-descriptions"),V=q("el-divider"),z=q("el-input-number"),W=q("el-form-item"),it=q("el-col"),ot=q("el-checkbox"),xt=q("el-tooltip"),j=q("el-row"),mt=q("el-form"),Tt=q("el-button"),Mt=q("el-popconfirm"),et=q("el-alert"),ut=q("el-option"),at=q("el-select"),Q=q("el-card"),bt=q("el-slider"),Dt=q("el-tab-pane"),Et=q("el-tabs");return J(),ht("div",Gtt,[m(Q,{class:"panel-card"},{header:x(()=>[S("div",Htt,[D[21]||(D[21]=S("h3",null,"系统数据生成工具",-1)),m(O,{type:"info",size:"small"},{default:x(()=>D[20]||(D[20]=[F("管理员专用")])),_:1,__:[20]})])]),default:x(()=>[S("div",Wtt,[S("div",qtt,[D[22]||(D[22]=S("h4",null,"当前数据统计",-1)),S("div",Utt,[m(R,{column:3,border:""},{default:x(()=>[m(B,{label:"库存记录"},{default:x(()=>[m(O,{type:"info"},{default:x(()=>[F(N(n.value.inventoryCount)+"条",1)]),_:1})]),_:1}),m(B,{label:"测试数据"},{default:x(()=>[m(O,{type:"success"},{default:x(()=>[F(N(n.value.labCount)+"条",1)]),_:1})]),_:1}),m(B,{label:"上线数据"},{default:x(()=>[m(O,{type:"warning"},{default:x(()=>[F(N(n.value.factoryCount)+"条",1)]),_:1})]),_:1}),m(B,{label:"批次数量"},{default:x(()=>[m(O,{type:"info"},{default:x(()=>[F(N(n.value.batches||0)+"个",1)]),_:1})]),_:1}),m(B,{label:"平均不良率"},{default:x(()=>[m(O,{type:M(n.value.avgDefectRate)},{default:x(()=>[F(N(L(n.value.avgDefectRate)),1)]),_:1},8,["type"])]),_:1}),m(B,{label:"高风险批次"},{default:x(()=>[m(O,{type:"danger"},{default:x(()=>[F(N(n.value.highRiskBatches||0)+"个",1)]),_:1})]),_:1}),m(B,{label:"最后更新",span:3},{default:x(()=>[F(N(n.value.lastUpdate),1)]),_:1})]),_:1})])]),m(V),S("div",jtt,[D[28]||(D[28]=S("h4",null,"数据生成",-1)),m(mt,{model:i.value,"label-position":"top",size:"default"},{default:x(()=>[m(j,{gutter:20},{default:x(()=>[m(it,{span:12},{default:x(()=>[m(W,{label:"数据数量"},{default:x(()=>[m(z,{modelValue:i.value.count,"onUpdate:modelValue":D[0]||(D[0]=ft=>i.value.count=ft),min:10,max:1e3},null,8,["modelValue"])]),_:1})]),_:1}),m(it,{span:12},{default:x(()=>[m(W,{label:"数据选项"},{default:x(()=>[m(ot,{modelValue:i.value.clearExisting,"onUpdate:modelValue":D[1]||(D[1]=ft=>i.value.clearExisting=ft)},{default:x(()=>D[23]||(D[23]=[F("清空现有数据")])),_:1,__:[23]},8,["modelValue"]),m(ot,{modelValue:i.value.useDistribution,"onUpdate:modelValue":D[2]||(D[2]=ft=>i.value.useDistribution=ft)},{default:x(()=>D[24]||(D[24]=[F("使用物料分布比例")])),_:1,__:[24]},8,["modelValue"]),m(xt,{content:"勾选后，数据生成完毕将自动刷新各页面展示",placement:"top"},{default:x(()=>[m(ot,{modelValue:i.value.refreshAfterGeneration,"onUpdate:modelValue":D[3]||(D[3]=ft=>i.value.refreshAfterGeneration=ft)},{default:x(()=>D[25]||(D[25]=[F("自动刷新页面")])),_:1,__:[25]},8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["model"]),S("div",Ytt,[m(Mt,{title:"确定要一键生成所有数据吗？",onConfirm:b,"confirm-button-text":"确定生成","cancel-button-text":"取消"},{reference:x(()=>[m(Tt,{type:"primary",icon:"Plus",loading:d.value.all,size:"large"},{default:x(()=>D[26]||(D[26]=[F(" 一键生成所有数据 ")])),_:1,__:[26]},8,["loading"])]),_:1}),m(Mt,{title:"确定要清除所有数据吗？此操作不可恢复。",onConfirm:T,"confirm-button-text":"确定清除","cancel-button-text":"取消",type:"danger"},{reference:x(()=>[m(Tt,{type:"danger",icon:"Delete",size:"large"},{default:x(()=>D[27]||(D[27]=[F("清除所有数据")])),_:1,__:[27]})]),_:1})])]),m(V),S("div",Xtt,[D[43]||(D[43]=S("h4",null,"高级选项",-1)),m(Et,{type:"border-card"},{default:x(()=>[m(Dt,{label:"独立数据生成"},{default:x(()=>[m(et,{type:"info","show-icon":"",closable:!1,title:"在这里可以单独生成各类数据"}),S("div",Ztt,[m(j,{gutter:20,class:"data-generation-options"},{default:x(()=>[m(it,{span:8},{default:x(()=>[m(Q,{shadow:"hover",class:"data-type-card"},{header:x(()=>D[29]||(D[29]=[S("div",{class:"card-header"},[S("h4",null,"库存数据")],-1)])),default:x(()=>[S("div",Ktt,[m(W,{label:"生成数量"},{default:x(()=>[m(z,{modelValue:o.value.count,"onUpdate:modelValue":D[4]||(D[4]=ft=>o.value.count=ft),min:5,max:1e3,size:"small"},null,8,["modelValue"])]),_:1}),m(W,{label:"数据类型"},{default:x(()=>[m(at,{modelValue:o.value.materialTypes,"onUpdate:modelValue":D[5]||(D[5]=ft=>o.value.materialTypes=ft),multiple:"",placeholder:"选择物料类型",size:"small",style:{width:"100%"}},{default:x(()=>[m(ut,{label:"结构件类",value:"结构件类"}),m(ut,{label:"光学类",value:"光学类"}),m(ut,{label:"充电类",value:"充电类"}),m(ut,{label:"声学类",value:"声学类"}),m(ut,{label:"包料类",value:"包料类"})]),_:1},8,["modelValue"])]),_:1}),m(W,{label:"工厂选择"},{default:x(()=>[m(at,{modelValue:o.value.factories,"onUpdate:modelValue":D[6]||(D[6]=ft=>o.value.factories=ft),multiple:"",placeholder:"选择工厂",size:"small",style:{width:"100%"}},{default:x(()=>[m(ut,{label:"重庆工厂",value:"重庆工厂"}),m(ut,{label:"深圳工厂",value:"深圳工厂"}),m(ut,{label:"南昌工厂",value:"南昌工厂"}),m(ut,{label:"宜宾工厂",value:"宜宾工厂"})]),_:1},8,["modelValue"])]),_:1}),m(W,null,{default:x(()=>[m(ot,{modelValue:o.value.clearExisting,"onUpdate:modelValue":D[7]||(D[7]=ft=>o.value.clearExisting=ft)},{default:x(()=>D[30]||(D[30]=[F("清空现有数据")])),_:1,__:[30]},8,["modelValue"])]),_:1}),m(Tt,{type:"success",onClick:v,loading:d.value.inventory,style:{width:"100%"}},{default:x(()=>[F(N(d.value.inventory?`正在生成${o.value.count}条数据...`:`生成${o.value.count}条库存数据`),1)]),_:1},8,["loading"])])]),_:1})]),_:1}),m(it,{span:8},{default:x(()=>[m(Q,{shadow:"hover",class:"data-type-card"},{header:x(()=>D[31]||(D[31]=[S("div",{class:"card-header"},[S("h4",null,"测试数据")],-1)])),default:x(()=>[S("div",Jtt,[m(W,{label:"生成数量"},{default:x(()=>[m(z,{modelValue:s.value.count,"onUpdate:modelValue":D[8]||(D[8]=ft=>s.value.count=ft),min:1,max:1e3},null,8,["modelValue"])]),_:1}),m(W,{label:"测试类型"},{default:x(()=>[m(at,{modelValue:s.value.testTypes,"onUpdate:modelValue":D[9]||(D[9]=ft=>s.value.testTypes=ft),multiple:"",placeholder:"选择测试类型",size:"small",style:{width:"100%"}},{default:x(()=>[m(ut,{label:"新品测试",value:"新品测试"}),m(ut,{label:"量产例行",value:"量产例行"})]),_:1},8,["modelValue"])]),_:1}),m(W,{label:"项目选择"},{default:x(()=>[m(at,{modelValue:s.value.projects,"onUpdate:modelValue":D[10]||(D[10]=ft=>s.value.projects=ft),multiple:"",placeholder:"选择项目",size:"small",style:{width:"100%"}},{default:x(()=>[(J(!0),ht(ye,null,Se(kt(Vtt),(ft,$t)=>(J(),Jt(ut,{key:$t,label:$t,value:$t},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),m(W,null,{default:x(()=>[m(ot,{modelValue:s.value.clearExisting,"onUpdate:modelValue":D[11]||(D[11]=ft=>s.value.clearExisting=ft)},{default:x(()=>D[32]||(D[32]=[F("清空现有数据")])),_:1,__:[32]},8,["modelValue"]),m(ot,{modelValue:s.value.includeDefects,"onUpdate:modelValue":D[12]||(D[12]=ft=>s.value.includeDefects=ft)},{default:x(()=>D[33]||(D[33]=[F("包含不良现象")])),_:1,__:[33]},8,["modelValue"])]),_:1}),S("div",Qtt,[m(Tt,{type:"primary",onClick:_,loading:d.value.lab,style:{width:"100%"}},{default:x(()=>[F(N(d.value.lab?`正在生成${s.value.count}条数据...`:`生成${s.value.count}条测试数据`),1)]),_:1},8,["loading"])]),S("div",tet,[m(et,{title:"提示：测试数据生成需要先有库存数据",type:"info",closable:!1,"show-icon":""},{default:x(()=>D[34]||(D[34]=[S("p",null,"测试数据会使用现有库存数据中的批次号和物料信息",-1)])),_:1,__:[34]})])])]),_:1})]),_:1}),m(it,{span:8},{default:x(()=>[m(Q,{shadow:"hover",class:"data-type-card"},{header:x(()=>D[35]||(D[35]=[S("div",{class:"card-header"},[S("h4",null,"上线数据")],-1)])),default:x(()=>[S("div",eet,[m(W,{label:"生成数量"},{default:x(()=>[m(z,{modelValue:l.value.count,"onUpdate:modelValue":D[13]||(D[13]=ft=>l.value.count=ft),min:1,max:1e3},null,8,["modelValue"])]),_:1}),m(W,{label:"工厂选择"},{default:x(()=>[m(at,{modelValue:l.value.factories,"onUpdate:modelValue":D[14]||(D[14]=ft=>l.value.factories=ft),multiple:"",placeholder:"选择工厂",size:"small",style:{width:"100%"}},{default:x(()=>[m(ut,{label:"重庆工厂",value:"重庆工厂"}),m(ut,{label:"深圳工厂",value:"深圳工厂"}),m(ut,{label:"南昌工厂",value:"南昌工厂"}),m(ut,{label:"宜宾工厂",value:"宜宾工厂"})]),_:1},8,["modelValue"])]),_:1}),m(W,{label:"生产线"},{default:x(()=>[m(at,{modelValue:l.value.lines,"onUpdate:modelValue":D[15]||(D[15]=ft=>l.value.lines=ft),multiple:"",placeholder:"选择生产线",size:"small",style:{width:"100%"}},{default:x(()=>[m(ut,{label:"01线",value:"01线"}),m(ut,{label:"02线",value:"02线"}),m(ut,{label:"03线",value:"03线"}),m(ut,{label:"04线",value:"04线"})]),_:1},8,["modelValue"])]),_:1}),m(W,{label:"不良率范围"},{default:x(()=>[m(bt,{modelValue:l.value.defectRateRange,"onUpdate:modelValue":D[16]||(D[16]=ft=>l.value.defectRateRange=ft),range:"",min:0,max:10,step:.1,size:"small"},null,8,["modelValue"])]),_:1}),m(W,null,{default:x(()=>[m(ot,{modelValue:l.value.clearExisting,"onUpdate:modelValue":D[17]||(D[17]=ft=>l.value.clearExisting=ft)},{default:x(()=>D[36]||(D[36]=[F("清空现有数据")])),_:1,__:[36]},8,["modelValue"])]),_:1}),m(Tt,{type:"success",onClick:y,loading:d.value.factory,style:{width:"100%"}},{default:x(()=>[F(N(d.value.factory?`正在生成${l.value.count}条数据...`:`生成${l.value.count}条上线数据`),1)]),_:1},8,["loading"])])]),_:1})]),_:1})]),_:1})])]),_:1}),m(Dt,{label:"场景数据生成"},{default:x(()=>[m(et,{type:"info","show-icon":"",closable:!1,title:"根据特定场景生成具有关联性的数据"}),S("div",aet,[m(mt,{model:c.value,"label-position":"top"},{default:x(()=>[m(j,{gutter:20},{default:x(()=>[m(it,{span:12},{default:x(()=>[m(W,{label:"场景类型"},{default:x(()=>[m(at,{modelValue:c.value.type,"onUpdate:modelValue":D[18]||(D[18]=ft=>c.value.type=ft),style:{width:"100%"}},{default:x(()=>[m(ut,{label:"正常生产",value:"normal"}),m(ut,{label:"质量异常",value:"quality_issue"}),m(ut,{label:"供应商问题",value:"supplier_issue"})]),_:1},8,["modelValue"])]),_:1})]),_:1}),m(it,{span:12},{default:x(()=>[m(W,{label:"数据量"},{default:x(()=>[m(z,{modelValue:c.value.count,"onUpdate:modelValue":D[19]||(D[19]=ft=>c.value.count=ft),min:10,max:100},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),m(W,null,{default:x(()=>[m(Tt,{type:"primary",onClick:w,loading:d.value.scenario},{default:x(()=>D[37]||(D[37]=[F(" 生成场景数据 ")])),_:1,__:[37]},8,["loading"])]),_:1})]),_:1},8,["model"])])]),_:1}),m(Dt,{label:"调试工具"},{default:x(()=>[m(et,{type:"warning","show-icon":"",closable:!1,title:"这些工具用于调试和修复数据问题"}),S("div",ret,[S("div",net,[m(Tt,{onClick:C},{default:x(()=>D[38]||(D[38]=[F("检查数据状态")])),_:1,__:[38]}),m(Tt,{type:"warning",onClick:A},{default:x(()=>D[39]||(D[39]=[F("修复数据不一致")])),_:1,__:[39]}),m(Tt,{type:"primary",onClick:k},{default:x(()=>D[40]||(D[40]=[F("导出所有数据")])),_:1,__:[40]}),m(Mt,{title:"紧急数据生成将清除所有现有数据，并生成最小数据集。确定继续吗？",onConfirm:P,"confirm-button-text":"确定生成","cancel-button-text":"取消"},{reference:x(()=>[m(Tt,{type:"danger",icon:"Warning",loading:d.value.emergency},{default:x(()=>D[41]||(D[41]=[F(" 紧急数据生成 ")])),_:1,__:[41]},8,["loading"])]),_:1})]),f.value?(J(),ht("div",iet,[D[42]||(D[42]=S("h5",null,"数据状态信息",-1)),m(R,{column:3,border:""},{default:x(()=>[(J(!0),ht(ye,null,Se(p.value,(ft,$t)=>(J(),Jt(B,{key:$t,label:$t},{default:x(()=>[typeof ft=="object"?(J(!0),ht(ye,{key:0},Se(ft,(Pt,qt)=>(J(),ht("div",{key:qt},N(qt)+": "+N(Pt),1))),128)):(J(),ht(ye,{key:1},[F(N(ft),1)],64))]),_:2},1032,["label"]))),128))]),_:1})])):te("",!0)])]),_:1})]),_:1})])])]),_:1})])}}},set=ca(oet,[["__scopeId","data-v-d7b113f2"]]);function cet(){const e=Z({isValid:!0,errors:[],warnings:[],lastValidated:null}),t=()=>{try{return e.value={isValid:!0,errors:[],warnings:[],lastValidated:new Date},a(),r(),n(),i(),{success:e.value.isValid,results:e.value,message:e.value.isValid?"数据验证通过":`发现 ${e.value.errors.length} 个错误和 ${e.value.warnings.length} 个警告`}}catch(o){return console.error("数据验证失败:",o),{success:!1,results:null,message:`验证失败: ${o.message}`}}},a=()=>{const o=localStorage.getItem("inventory_data"),s=localStorage.getItem("unified_inventory_data");o&&s&&o!==s&&(e.value.isValid=!1,e.value.errors.push({type:"storage_inconsistency",message:"库存数据存储不一致，新旧键中的数据不匹配",module:"inventory"}))},r=()=>{const o=localStorage.getItem("lab_data"),s=localStorage.getItem("lab_test_data"),l=localStorage.getItem("unified_lab_data");o&&s&&o!==s&&(e.value.isValid=!1,e.value.errors.push({type:"storage_inconsistency",message:"测试数据存储不一致，lab_data 和 lab_test_data 不匹配",module:"lab"})),l&&o&&l!==o&&(e.value.isValid=!1,e.value.errors.push({type:"storage_inconsistency",message:"测试数据存储不一致，统一数据服务和旧数据不匹配",module:"lab"}))},n=()=>{const o=localStorage.getItem("factory_data"),s=localStorage.getItem("online_data"),l=localStorage.getItem("unified_factory_data");o&&s&&o!==s&&(e.value.isValid=!1,e.value.errors.push({type:"storage_inconsistency",message:"上线数据存储不一致，factory_data 和 online_data 不匹配",module:"factory"})),l&&o&&l!==o&&(e.value.isValid=!1,e.value.errors.push({type:"storage_inconsistency",message:"上线数据存储不一致，统一数据服务和旧数据不匹配",module:"factory"}))},i=()=>{try{const o=JSON.parse(localStorage.getItem("inventory_data")||"[]"),s=JSON.parse(localStorage.getItem("lab_data")||"[]"),l=JSON.parse(localStorage.getItem("factory_data")||"[]"),c=new Set(o.map(u=>u.batchNo));for(const u of s)u.batchNo&&!c.has(u.batchNo)&&(e.value.isValid=!1,e.value.errors.push({type:"data_relationship",message:`测试数据中的批次号 ${u.batchNo} 在库存数据中不存在`,module:"lab",item:u}));for(const u of l)u.batchNo&&!c.has(u.batchNo)&&(e.value.isValid=!1,e.value.errors.push({type:"data_relationship",message:`上线数据中的批次号 ${u.batchNo} 在库存数据中不存在`,module:"factory",item:u}))}catch(o){console.error("验证数据关系失败:",o),e.value.isValid=!1,e.value.errors.push({type:"validation_error",message:`验证数据关系失败: ${o.message}`,module:"system"})}};return{validationResults:e,validateAllData:t}}function uet(){const e=Z({lastBackupDate:null,backupInProgress:!1,restoreInProgress:!1,error:null});return{backupStatus:e,backupSystemData:i=>{try{e.value.backupInProgress=!0,e.value.error=null;const o={timestamp:new Date().toISOString(),version:"1.0",data:i},s=JSON.stringify(o);return localStorage.setItem("system_data_backup",s),e.value.lastBackupDate=new Date,{success:!0,timestamp:o.timestamp,message:"系统数据备份成功"}}catch(o){return console.error("备份系统数据失败:",o),e.value.error=o.message,{success:!1,error:o.message,message:`备份失败: ${o.message}`}}finally{e.value.backupInProgress=!1}},restoreSystemData:()=>{try{e.value.restoreInProgress=!0,e.value.error=null;const i=localStorage.getItem("system_data_backup");if(!i)throw new Error("未找到系统备份数据");const o=JSON.parse(i);if(!o.data)throw new Error("备份数据格式无效");const{data:s}=o;return s.inventory&&(localStorage.setItem("inventory_data",JSON.stringify(s.inventory)),localStorage.setItem("unified_inventory_data",JSON.stringify(s.inventory))),s.lab&&(localStorage.setItem("lab_data",JSON.stringify(s.lab)),localStorage.setItem("lab_test_data",JSON.stringify(s.lab)),localStorage.setItem("unified_lab_data",JSON.stringify(s.lab))),s.online&&(localStorage.setItem("factory_data",JSON.stringify(s.online)),localStorage.setItem("online_data",JSON.stringify(s.online)),localStorage.setItem("unified_factory_data",JSON.stringify(s.online))),s.baseline&&localStorage.setItem("baseline_data",JSON.stringify(s.baseline)),{success:!0,timestamp:o.timestamp,message:"系统数据恢复成功"}}catch(i){return console.error("恢复系统数据失败:",i),e.value.error=i.message,{success:!1,error:i.message,message:`恢复失败: ${i.message}`}}finally{e.value.restoreInProgress=!1}},hasBackup:()=>!!localStorage.getItem("system_data_backup"),getLastBackupTime:()=>{try{const i=localStorage.getItem("system_data_backup");return i?JSON.parse(i).timestamp:null}catch(i){return console.error("获取最后备份时间失败:",i),null}}}}const het={class:"admin-data-page"},det={class:"page-header"},fet={class:"header-actions"},pet={class:"card-header"},get={class:"card-content"},vet={class:"stat-item"},met={class:"stat-value"},yet={class:"stat-item"},_et={class:"stat-value"},bet={class:"stat-item"},xet={class:"stat-value"},wet={class:"stat-date"},Cet={class:"card-header"},Tet={class:"card-content"},Aet={class:"progress-label"},ket={class:"integrity-item"},Det={class:"integrity-item"},Let={class:"integrity-item"},Iet={class:"card-header"},Met={class:"card-content actions-content"},Eet={class:"action-buttons"},Ret={class:"card-header"},Pet={class:"insight-header"},Bet={class:"insight-content"},Oet={key:0,class:"insight-summary"},Net={class:"insight-header"},$et={class:"insight-content"},Fet={class:"insight-summary"},zet={class:"insight-header"},Vet={class:"insight-content"},Get={class:"defect-types-chart",style:{height:"180px"}},Het={key:0,class:"chart-loading"},Wet={key:1,class:"no-data"},qet={class:"insight-summary"},Uet={class:"card-header"},jet={class:"generation-options"},Yet={class:"gen-card-content"},Xet={class:"gen-card-content"},Zet={class:"gen-card-content"},Ket={class:"advanced-generation"},Jet={class:"dialog-footer"},Qet={class:"card-header"},tat={class:"generation-progress"},eat={class:"progress-message"},aat={class:"dialog-footer"},rat={class:"card-header"},nat={key:0,class:"storage-usage-info"},iat={class:"cleanup-options"},oat={class:"dialog-footer"},sat={__name:"AdminDataPage",setup(e){ue([Tn,Cn,ri,An,Vi,kn]);const t=Z(!1),a=Z(!1);fa({baselineCount:5,projectsPerBaseline:4,inventoryCount:50,labTestCount:80,onlineCount:60});const r=Z(!1),n=fa({dataType:"inventory",file:null}),i=Z(!1),o=Z(0),s=Z(""),l=Z(!1);cet();const{backupSystemData:c}=uet(),u=fa({materialsCount:0,testsCount:0,onlineCount:0,lastUpdated:"未获取",dataIntegrityPercent:0,inventoryIntegrity:0,testIntegrity:0,onlineIntegrity:0,baselineIntegrity:0}),h=Z([{content:"生成了300条库存物料数据",timestamp:"2023-05-15 09:30:22",action:"generate",type:"primary",important:!1},{content:"执行了数据一致性校验，修复了15个问题",timestamp:"2023-05-14 15:45:10",action:"validate",type:"success",important:!0},{content:"更新了数据需求定义，修改了批次号格式要求",timestamp:"2023-05-13 11:20:35",action:"update",type:"warning",important:!1},{content:"备份了系统数据",timestamp:"2023-05-12 17:05:42",action:"backup",type:"info",important:!1}]);Yt(()=>u.materialsCount>0||u.testsCount>0||u.onlineCount>0);const d=Z({inventory:50,lab:30,factory:20}),f=Z(!1),p=fa({keepCount:100}),g=Z(null),v=Z([]),_=Z([]),y=Z(0),b=Z(0),w=Z(0),T=Z(!0),C=Z([]),A=Z(null),k=Z(null);Ra(()=>{L(),Dt(),window.addEventListener("storage",()=>{L(),Dt()})});function L(){try{const lt=le.getInventoryData(),X=le.getLabData(),At=le.getOnlineData();u.materialsCount=lt.length,u.testsCount=X.length,u.onlineCount=At.length,u.lastUpdated=new Date().toLocaleString(),M(lt,X,At),v.value=$t(lt,X,At),_.value=Pt(lt,X,At),y.value=qt(lt,X,At),b.value=nt(lt,X,At),H(lt,X,At)}catch(lt){console.error("加载数据概览失败:",lt),dt.error("加载数据概览失败")}}function M(lt,X,At){const U=P(lt,["material_id","material_name","material_type","material_spec","batch_no","supplier"]),st=P(X,["test_id","material_id","batch_no","test_result","project_name"]),_t=P(At,["online_id","material_id","batch_no","production_line","project_name"]);u.inventoryIntegrity=U,u.testIntegrity=st,u.onlineIntegrity=_t,u.dataIntegrityPercent=U*.4+st*.3+_t*.3}function P(lt,X){if(!lt.length)return 100;let At=lt.length*X.length,U=0;for(const st of lt)for(const _t of X)st[_t]!==void 0&&st[_t]!==null&&st[_t]!==""&&U++;return At>0?U/At*100:100}function E(lt){return lt>=90?"success":lt>=70?"warning":"exception"}function D(lt){return lt===100?"完整":`${lt.toFixed(1)}%`}function O(lt){switch(lt){case"generate":return mi;case"validate":return L3;case"update":return Es;case"backup":return Ii;default:return qr}}function B(){a.value=!0}function R(lt){t.value=!1,dt.success(`成功生成 ${lt.count} 条${lt.type}数据`),mt(`生成了${lt.count}条${lt.typeName}数据`,"generate"),L()}function V(){r.value=!0}function z(lt){n.file=lt}function W(){if(!n.file){dt.warning("请选择要导入的文件");return}const lt=new FileReader;lt.onload=X=>{try{const At=n.file.raw.name.endsWith(".json")?JSON.parse(X.target.result):it(X.target.result);let U=!1;if(n.dataType==="inventory"||n.dataType==="all"){const st=At.inventory||At;U=le.saveInventoryData(st,!0)}if(n.dataType==="lab"||n.dataType==="all"){const st=At.lab||At;U=le.saveLabData(st,!0)}if(n.dataType==="online"||n.dataType==="all"){const st=At.online||At;U=le.saveFactoryData(st,!0)}r.value=!1,U?(dt.success("数据导入成功"),mt(`导入了${n.dataType==="all"?"完整":n.dataType}数据文件`,"import"),L()):dt.error("导入数据失败，请检查数据格式")}catch(At){console.error("导入数据失败:",At),dt.error("导入数据失败，请检查文件格式")}},lt.readAsText(n.file.raw)}function it(lt){const X=lt.split(`
`),At=X[0].split(","),U=[];for(let st=1;st<X.length;st++){const _t=X[st].split(",");if(_t.length===At.length){const vt={};for(let Ct=0;Ct<At.length;Ct++)vt[At[Ct]]=_t[Ct];U.push(vt)}}return U}function ot(){try{const lt={baseline:JSON.parse(localStorage.getItem("baseline_data")||"[]"),inventory:le.getInventoryData(),lab:le.getLabData(),online:le.getOnlineData()},X=c(lt);X.success?(mt("备份了系统数据","backup"),dt.success("数据备份成功")):dt.error(`备份失败: ${X.error}`)}catch(lt){console.error("备份数据失败:",lt),dt.error("备份数据失败")}}function xt(){yn.confirm("确定要清空所有测试数据吗？此操作不可撤销。","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{j()}).catch(()=>{})}function j(){try{if(le.clearAllData())L(),mt("清空了所有测试数据","delete","danger",!0),dt.success("数据已清空");else throw new Error("清空数据失败")}catch(lt){console.error("清空数据失败:",lt),dt.error("清空数据失败")}}function mt(lt,X,At="primary",U=!1){h.value.unshift({content:lt,timestamp:new Date().toLocaleString(),action:X,type:At,important:U}),h.value.length>10&&(h.value=h.value.slice(0,10))}async function Tt(){try{dt.info(`正在生成${d.value.inventory}条库存数据...`);const lt=await Mr.generateInventoryData(d.value.inventory,!1);if(lt&&lt.success){dt.success(`成功生成${lt.count}条库存数据`),mt(`生成了${lt.count}条库存数据`,"generate"),ut();try{await Mr.pushDataToAssistant(),console.log("✅ 库存数据已推送到问答助手")}catch(X){console.warn("⚠️ 推送数据到问答助手失败:",X)}}else dt.error(`库存数据生成失败: ${lt&&lt.message?lt.message:"未知错误"}`)}catch(lt){console.error("生成库存数据时出错:",lt),dt.error(`生成库存数据时出错: ${lt.message}`)}}async function Mt(){try{const lt=parseInt(d.value.lab);if(isNaN(lt)||lt<=0){dt.warning("请输入有效的数据生成数量");return}dt.info(`正在生成${lt}条测试数据...`);const X=await Mr.generateLabData(lt,!1);if(X&&X.success){dt.success(`成功生成${X.count}条测试数据`),mt(`生成了${X.count}条测试数据`,"generate"),console.log("测试数据生成成功:",X),console.log("测试数据可以在LabView页面查看"),ut();try{await Mr.pushDataToAssistant(),console.log("✅ 测试数据已推送到问答助手")}catch(At){console.warn("⚠️ 推送数据到问答助手失败:",At)}dt({message:"请刷新测试页面查看新生成的数据",type:"info",duration:5e3})}else dt.error(`测试数据生成失败: ${X&&X.message?X.message:"未知错误"}`)}catch(lt){console.error("生成测试数据时出错:",lt),dt.error(`生成测试数据时出错: ${lt.message}`)}}async function et(){try{const lt=parseInt(d.value.factory);if(isNaN(lt)||lt<=0){dt.warning("请输入有效的数据生成数量");return}dt.info(`正在生成${lt}条工厂数据...`);const X=await Mr.generateFactoryData(lt,!1);if(X&&X.success){dt.success(`成功生成${X.count}条工厂数据`),mt(`生成了${X.count}条工厂数据`,"generate"),ut();try{await Mr.pushDataToAssistant(),console.log("✅ 工厂数据已推送到问答助手")}catch(At){console.warn("⚠️ 推送数据到问答助手失败:",At)}}else dt.error(`工厂数据生成失败: ${X&&X.message?X.message:"未知错误"}`)}catch(lt){console.error("生成工厂数据时出错:",lt),dt.error(`生成工厂数据时出错: ${lt.message}`)}}function ut(){L()}const at=()=>{i.value=!1,o.value=0,s.value=""};function Q(lt){return lt==null?"0.0%":typeof lt=="string"&&lt.includes("%")?lt:`${Number(lt).toFixed(1)}%`}function bt(lt){const X=typeof lt=="string"?parseFloat(lt):lt;return X>=5?"danger":X>=2?"warning":"success"}function Dt(){g.value=le.getStorageUsage()}function Et(){yn.confirm(`确定要清理旧数据吗？将只保留每种数据最新的${p.keepCount}条记录，其余数据将被删除。`,"确认清理",{confirmButtonText:"确认",cancelButtonText:"取消",type:"warning"}).then(()=>{ft()}).catch(()=>{})}async function ft(){try{le.cleanupOldData(p.keepCount)?(dt.success("数据清理成功"),mt(`清理了旧数据，保留每种数据最新的${p.keepCount}条`,"cleanup"),ut(),Dt()):dt.error("数据清理失败"),f.value=!1}catch(lt){console.error("数据清理出错:",lt),dt.error(`数据清理出错: ${lt.message}`)}}function $t(lt,X,At){try{const U=new Map;return X.forEach(_t=>{const vt=_t.materialName||_t.material_name;if(!vt)return;const Ct=_t.result==="不合格"||_t.status==="不合格";U.has(vt)||U.set(vt,{materialName:vt,totalCount:0,defectCount:0,defectRate:0});const St=U.get(vt);St.totalCount++,Ct&&St.defectCount++}),At.forEach(_t=>{const vt=_t.materialName||_t.material_name;if(!vt)return;U.has(vt)||U.set(vt,{materialName:vt,totalCount:0,defectCount:0,defectRate:0});const Ct=U.get(vt);Ct.totalCount++,(_t.defectDescription||_t.defectType&&_t.defectType!=="无"||_t.hasDefect===!0)&&Ct.defectCount++}),Array.from(U.values()).map(_t=>(_t.defectRate=_t.totalCount>0?_t.defectCount/_t.totalCount*100:0,_t)).filter(_t=>_t.totalCount>=5).sort((_t,vt)=>vt.defectRate-_t.defectRate).slice(0,5)}catch(U){return console.error("计算TOP5不良物料失败:",U),[]}}function Pt(lt,X,At){try{const U=new Map;lt.forEach(vt=>{const Ct=vt.supplier,St=vt.materialName||vt.material_name;!Ct||!St||(U.has(Ct)||U.set(Ct,new Set),U.get(Ct).add(St))});const st=new Map;return X.forEach(vt=>{const Ct=vt.supplier;if(!Ct)return;const St=vt.result==="不合格"||vt.status==="不合格";st.has(Ct)||st.set(Ct,{supplierName:Ct,totalCount:0,defectCount:0,defectRate:0,materialCount:U.has(Ct)?U.get(Ct).size:0});const Gt=st.get(Ct);Gt.totalCount++,St&&Gt.defectCount++}),At.forEach(vt=>{const Ct=vt.supplier;if(!Ct)return;st.has(Ct)||st.set(Ct,{supplierName:Ct,totalCount:0,defectCount:0,defectRate:0,materialCount:U.has(Ct)?U.get(Ct).size:0});const St=st.get(Ct);St.totalCount++,(vt.defectDescription||vt.defectType&&vt.defectType!=="无"||vt.hasDefect===!0)&&St.defectCount++}),Array.from(st.values()).map(vt=>(vt.defectRate=vt.totalCount>0?vt.defectCount/vt.totalCount*100:0,vt)).filter(vt=>vt.totalCount>=3).sort((vt,Ct)=>Ct.defectRate-vt.defectRate).slice(0,5)}catch(U){return console.error("计算问题供应商失败:",U),[]}}function qt(lt,X,At){try{const U=new Set,st=new Set;return Pt(lt,X,At).forEach(vt=>{U.add(vt.supplierName),vt.defectRate>5&&st.add(vt.supplierName)}),U.size===0?0:st.size/U.size*100}catch(U){return console.error("计算高风险供应商比例失败:",U),0}}function nt(lt,X,At){try{const U=new Set;return Pt(lt,X,At).forEach(_t=>{_t.defectRate>5&&U.add(_t.supplierName)}),U.size}catch(U){return console.error("计算高风险供应商数量失败:",U),0}}function H(lt,X,At){try{T.value=!0;const U=new Map,st=vt=>{vt.forEach(Ct=>{let St=Ct.defectType||Ct.defect_type;if(!St&&Ct.defectDescription){const Gt=["划伤","破裂","变形","污渍","漏光","断裂","异常","偏色","鼓包","漏液"];for(const Xt of Gt)if(Ct.defectDescription.includes(Xt)){St=Xt;break}}if((!St||St==="无")&&(Ct.result==="不合格"||Ct.status==="不合格"||Ct.hasDefect===!0)&&(St="其他"),St&&St!=="无"){const Gt=U.get(St)||0;U.set(St,Gt+1)}})};st(X),st(At);const _t=Array.from(U.entries()).map(([vt,Ct])=>({name:vt,value:Ct})).sort((vt,Ct)=>Ct.value-vt.value).slice(0,8);C.value=_t,T.value=!1,tt(X,At),$a(()=>{k.value&&C.value.length>0&&Rt()})}catch(U){console.error("计算不良类型统计失败:",U),T.value=!1,C.value=[]}}function tt(lt,X){try{const At=new Map,U=_t=>{_t.forEach(vt=>{const Ct=vt.batchNo||vt.batch_no;if(!Ct)return;At.has(Ct)||At.set(Ct,{total:0,defect:0});const St=At.get(Ct);St.total++,(vt.result==="不合格"||vt.status==="不合格"||vt.defectDescription||vt.defectType&&vt.defectType!=="无"||vt.hasDefect===!0)&&St.defect++})};U(lt),U(X);let st=0;At.forEach((_t,vt)=>{_t.total>=5&&_t.defect/_t.total>.05&&st++}),w.value=st}catch(At){console.error("计算超标批次数量失败:",At),w.value=0}}function Rt(){if(!ET){console.error("未加载echarts库");return}if(!A.value){console.error("找不到图表DOM元素");return}const lt=xr(A.value),X={tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},grid:{left:"3%",right:"4%",bottom:"8%",top:"8%",containLabel:!0},xAxis:[{type:"category",data:C.value.map(At=>At.name),axisTick:{alignWithLabel:!0},axisLabel:{interval:0,rotate:30}}],yAxis:[{type:"value",name:"次数"}],series:[{name:"出现次数",type:"bar",barWidth:"60%",data:C.value.map(At=>({value:At.value,itemStyle:{color:At.value>10?"#F56C6C":At.value>5?"#E6A23C":"#67C23A"}})),label:{show:!0,position:"top"}}]};lt.setOption(X),k.value=lt,window.addEventListener("resize",()=>{lt.resize()})}return(lt,X)=>{const At=q("el-icon"),U=q("el-button"),st=q("router-link"),_t=q("el-button-group"),vt=q("el-tag"),Ct=q("el-card"),St=q("el-col"),Gt=q("el-progress"),Xt=q("el-row"),zt=q("el-tooltip"),xe=q("el-table-column"),Kt=q("el-table"),Ie=q("el-alert"),Ne=q("el-skeleton"),xa=q("el-empty"),we=q("el-input-number"),Ee=q("el-form-item"),Lt=q("el-form"),he=q("el-divider"),je=q("el-dialog"),$=q("el-option"),rt=q("el-select"),K=q("el-upload"),yt=q("el-timeline-item"),Y=q("el-timeline"),Zt=q("el-descriptions-item"),Ye=q("el-descriptions");return J(),ht("div",het,[S("div",det,[X[18]||(X[18]=S("h1",{class:"page-title"},"数据管理平台",-1)),S("div",fet,[m(_t,null,{default:x(()=>[m(st,{to:"/admin/data/rules"},{default:x(()=>[m(U,{type:"primary"},{default:x(()=>[m(At,null,{default:x(()=>[m(kt(qr))]),_:1}),X[14]||(X[14]=F("数据规则文档 "))]),_:1,__:[14]})]),_:1}),m(st,{to:"/admin/data/historical"},{default:x(()=>[m(U,{type:"primary"},{default:x(()=>[m(At,null,{default:x(()=>[m(kt(T3))]),_:1}),X[15]||(X[15]=F("历史数据管控 "))]),_:1,__:[15]})]),_:1})]),_:1}),m(U,{type:"primary",onClick:X[0]||(X[0]=De=>lt.generateDialogVisible=!0),style:{"margin-left":"10px"}},{default:x(()=>[m(At,null,{default:x(()=>[m(kt(mi))]),_:1}),X[16]||(X[16]=F(" 数据生成工具 "))]),_:1,__:[16]}),m(U,{type:"warning",onClick:X[1]||(X[1]=De=>f.value=!0)},{default:x(()=>[m(At,null,{default:x(()=>[m(kt(Cc))]),_:1}),X[17]||(X[17]=F(" 数据清理 "))]),_:1,__:[17]})])]),m(Xt,{gutter:20,class:"dashboard-cards"},{default:x(()=>[m(St,{xs:24,sm:12,md:8},{default:x(()=>[m(Ct,{shadow:"hover",class:"dashboard-card"},{header:x(()=>[S("div",pet,[X[19]||(X[19]=S("h3",null,"数据统计",-1)),m(At,null,{default:x(()=>[m(kt(A3))]),_:1})])]),default:x(()=>[S("div",get,[S("div",vet,[X[20]||(X[20]=S("span",{class:"stat-label"},"库存总数:",-1)),S("span",met,N(u.materialsCount),1)]),S("div",yet,[X[21]||(X[21]=S("span",{class:"stat-label"},"测试记录:",-1)),S("span",_et,N(u.testsCount),1)]),S("div",bet,[X[22]||(X[22]=S("span",{class:"stat-label"},"上线记录:",-1)),S("span",xet,N(u.onlineCount),1)]),S("div",wet,[m(vt,{size:"small",type:"info"},{default:x(()=>[F("最后更新: "+N(u.lastUpdated),1)]),_:1})])])]),_:1})]),_:1}),m(St,{xs:24,sm:12,md:8},{default:x(()=>[m(Ct,{shadow:"hover",class:"dashboard-card"},{header:x(()=>[S("div",Cet,[X[23]||(X[23]=S("h3",null,"数据健康状态",-1)),m(At,null,{default:x(()=>[m(kt(lc))]),_:1})])]),default:x(()=>[S("div",Tet,[m(Gt,{percentage:u.dataIntegrityPercent,status:E(u.dataIntegrityPercent),"stroke-width":18,format:D,class:"data-integrity-progress"},{default:x(({percentage:De})=>[S("span",Aet,"数据完整性: "+N(De.toFixed(1))+"%",1)]),_:1},8,["percentage","status"]),m(Xt,{gutter:10,class:"integrity-details"},{default:x(()=>[m(St,{span:8},{default:x(()=>[S("div",ket,[X[24]||(X[24]=S("div",{class:"item-title"},"库存数据",-1)),m(Gt,{percentage:u.inventoryIntegrity,status:E(u.inventoryIntegrity)},null,8,["percentage","status"])])]),_:1}),m(St,{span:8},{default:x(()=>[S("div",Det,[X[25]||(X[25]=S("div",{class:"item-title"},"测试数据",-1)),m(Gt,{percentage:u.testIntegrity,status:E(u.testIntegrity)},null,8,["percentage","status"])])]),_:1}),m(St,{span:8},{default:x(()=>[S("div",Let,[X[26]||(X[26]=S("div",{class:"item-title"},"上线数据",-1)),m(Gt,{percentage:u.onlineIntegrity,status:E(u.onlineIntegrity)},null,8,["percentage","status"])])]),_:1})]),_:1})])]),_:1})]),_:1}),m(St,{xs:24,sm:24,md:8},{default:x(()=>[m(Ct,{shadow:"hover",class:"dashboard-card"},{header:x(()=>[S("div",Iet,[X[27]||(X[27]=S("h3",null,"数据操作",-1)),m(At,null,{default:x(()=>[m(kt(xi))]),_:1})])]),default:x(()=>[S("div",Met,[S("div",Eet,[m(U,{type:"primary",onClick:B},{default:x(()=>[m(At,null,{default:x(()=>[m(kt(mi))]),_:1}),X[28]||(X[28]=F("生成测试数据 "))]),_:1,__:[28]}),m(U,{type:"success",onClick:V},{default:x(()=>[m(At,null,{default:x(()=>[m(kt(k3))]),_:1}),X[29]||(X[29]=F("导入数据 "))]),_:1,__:[29]}),m(U,{type:"warning",onClick:ot},{default:x(()=>[m(At,null,{default:x(()=>[m(kt(Ii))]),_:1}),X[30]||(X[30]=F("备份数据 "))]),_:1,__:[30]}),m(U,{type:"danger",onClick:xt},{default:x(()=>[m(At,null,{default:x(()=>[m(kt(Cc))]),_:1}),X[31]||(X[31]=F("清空测试数据 "))]),_:1,__:[31]})])])]),_:1})]),_:1})]),_:1}),m(Ct,{shadow:"hover",class:"data-insights-section"},{header:x(()=>[S("div",Ret,[X[33]||(X[33]=S("h2",null,"质量数据分析",-1)),m(vt,{type:"primary"},{default:x(()=>X[32]||(X[32]=[F("实时洞察")])),_:1,__:[32]})])]),default:x(()=>[m(Xt,{gutter:20,class:"insights-cards"},{default:x(()=>[m(St,{xs:24,sm:12,md:8},{default:x(()=>[m(Ct,{shadow:"hover",class:"insight-card"},{header:x(()=>[S("div",Pet,[X[34]||(X[34]=S("h3",null,"TOP5不良物料",-1)),m(zt,{content:"不良率最高的五种物料",placement:"top"},{default:x(()=>[m(At,null,{default:x(()=>[m(kt(Ro))]),_:1})]),_:1})])]),default:x(()=>[S("div",Bet,[m(Kt,{data:v.value,style:{width:"100%"},size:"small"},{default:x(()=>[m(xe,{prop:"materialName",label:"物料名称","min-width":"120"}),m(xe,{prop:"defectRate",label:"不良率",width:"90"},{default:x(De=>[m(vt,{type:bt(De.row.defectRate)},{default:x(()=>[F(N(Q(De.row.defectRate)),1)]),_:2},1032,["type"])]),_:1}),m(xe,{prop:"defectCount",label:"不良数",width:"70"})]),_:1},8,["data"]),v.value.length>0?(J(),ht("div",Oet,[m(Ie,{title:`${v.value.length>0?v.value[0].materialName:"-"} 是当前不良率最高的物料`,type:"warning",closable:!1,"show-icon":""},null,8,["title"])])):te("",!0)])]),_:1})]),_:1}),m(St,{xs:24,sm:12,md:8},{default:x(()=>[m(Ct,{shadow:"hover",class:"insight-card"},{header:x(()=>[S("div",Net,[X[35]||(X[35]=S("h3",null,"问题供应商分析",-1)),m(zt,{content:"不良率超过5%的供应商",placement:"top"},{default:x(()=>[m(At,null,{default:x(()=>[m(kt(D3))]),_:1})]),_:1})])]),default:x(()=>[S("div",$et,[m(Kt,{data:_.value,style:{width:"100%"},size:"small"},{default:x(()=>[m(xe,{prop:"supplierName",label:"供应商","min-width":"120"}),m(xe,{prop:"defectRate",label:"不良率",width:"90"},{default:x(De=>[m(vt,{type:bt(De.row.defectRate)},{default:x(()=>[F(N(Q(De.row.defectRate)),1)]),_:2},1032,["type"])]),_:1}),m(xe,{prop:"materialCount",label:"物料种类",width:"90"})]),_:1},8,["data"]),S("div",Fet,[m(Gt,{percentage:y.value,"stroke-width":10,format:De=>`${b.value}家供应商不良超标`,status:b.value>0?"exception":"success"},null,8,["percentage","format","status"])])])]),_:1})]),_:1}),m(St,{xs:24,sm:12,md:8},{default:x(()=>[m(Ct,{shadow:"hover",class:"insight-card"},{header:x(()=>[S("div",zet,[X[36]||(X[36]=S("h3",null,"物料不良类型",-1)),m(zt,{content:"按频率排序的不良现象统计",placement:"top"},{default:x(()=>[m(At,null,{default:x(()=>[m(kt(lc))]),_:1})]),_:1})])]),default:x(()=>[S("div",Vet,[S("div",Get,[T.value?(J(),ht("div",Het,[m(Ne,{rows:5,animated:""})])):C.value.length===0?(J(),ht("div",Wet,[m(xa,{description:"暂无不良类型数据"})])):(J(),ht("div",{key:2,ref_key:"defectTypesChartRef",ref:A,style:{width:"100%",height:"100%"}},null,512))]),S("div",qet,[m(Ie,{title:`超标问题批次:${w.value}个，需要立即处理`,type:"error",closable:!1,"show-icon":""},null,8,["title"])])])]),_:1})]),_:1})]),_:1})]),_:1}),m(Ct,{shadow:"hover",class:"data-generation-section"},{header:x(()=>[S("div",Uet,[X[38]||(X[38]=S("h2",null,"数据生成工具",-1)),m(vt,{type:"success"},{default:x(()=>X[37]||(X[37]=[F("新功能")])),_:1,__:[37]})])]),default:x(()=>[S("div",jet,[m(Xt,{gutter:20},{default:x(()=>[m(St,{xs:24,sm:8},{default:x(()=>[m(Ct,{shadow:"hover",class:"generation-card"},{header:x(()=>X[39]||(X[39]=[S("div",{class:"gen-card-header"},[S("h3",null,"库存数据生成")],-1)])),default:x(()=>[S("div",Yet,[X[41]||(X[41]=S("p",null,"生成物料库存基础数据，包括物料编码、名称、供应商等信息",-1)),m(Lt,{inline:!0,class:"quick-gen-form"},{default:x(()=>[m(Ee,{label:"数量"},{default:x(()=>[m(we,{modelValue:d.value.inventory,"onUpdate:modelValue":X[2]||(X[2]=De=>d.value.inventory=De),min:5,max:200,size:"small"},null,8,["modelValue"])]),_:1})]),_:1}),m(U,{type:"primary",onClick:Tt},{default:x(()=>[m(At,null,{default:x(()=>[m(kt(mi))]),_:1}),X[40]||(X[40]=F(" 生成库存数据 "))]),_:1,__:[40]})])]),_:1})]),_:1}),m(St,{xs:24,sm:8},{default:x(()=>[m(Ct,{shadow:"hover",class:"generation-card"},{header:x(()=>X[42]||(X[42]=[S("div",{class:"gen-card-header"},[S("h3",null,"测试数据生成")],-1)])),default:x(()=>[S("div",Xet,[X[44]||(X[44]=S("p",null,"生成实验室测试数据，包括测试结果、参数、良率等信息",-1)),m(Lt,{inline:!0,class:"quick-gen-form"},{default:x(()=>[m(Ee,{label:"数量"},{default:x(()=>[m(we,{modelValue:d.value.lab,"onUpdate:modelValue":X[3]||(X[3]=De=>d.value.lab=De),min:5,max:200,size:"small"},null,8,["modelValue"])]),_:1})]),_:1}),m(U,{type:"success",onClick:Mt},{default:x(()=>[m(At,null,{default:x(()=>[m(kt(mi))]),_:1}),X[43]||(X[43]=F(" 生成测试数据 "))]),_:1,__:[43]})])]),_:1})]),_:1}),m(St,{xs:24,sm:8},{default:x(()=>[m(Ct,{shadow:"hover",class:"generation-card"},{header:x(()=>X[45]||(X[45]=[S("div",{class:"gen-card-header"},[S("h3",null,"工厂数据生成")],-1)])),default:x(()=>[S("div",Zet,[X[47]||(X[47]=S("p",null,"生成工厂上线使用数据，包括工厂、产线、使用情况等信息",-1)),m(Lt,{inline:!0,class:"quick-gen-form"},{default:x(()=>[m(Ee,{label:"数量"},{default:x(()=>[m(we,{modelValue:d.value.factory,"onUpdate:modelValue":X[4]||(X[4]=De=>d.value.factory=De),min:5,max:200,size:"small"},null,8,["modelValue"])]),_:1})]),_:1}),m(U,{type:"warning",onClick:et},{default:x(()=>[m(At,null,{default:x(()=>[m(kt(mi))]),_:1}),X[46]||(X[46]=F(" 生成工厂数据 "))]),_:1,__:[46]})])]),_:1})]),_:1})]),_:1}),S("div",Ket,[m(he,null,{default:x(()=>X[48]||(X[48]=[F("高级数据生成")])),_:1,__:[48]}),m(U,{type:"primary",size:"large",onClick:B},{default:x(()=>[m(At,null,{default:x(()=>[m(kt(Es))]),_:1}),X[49]||(X[49]=F(" 打开完整数据生成工具 "))]),_:1,__:[49]})])])]),_:1}),m(je,{modelValue:t.value,"onUpdate:modelValue":X[5]||(X[5]=De=>t.value=De),title:"数据生成工具",width:"70%"},{default:x(()=>[m(set,{onGenerationComplete:R})]),_:1},8,["modelValue"]),m(je,{modelValue:r.value,"onUpdate:modelValue":X[8]||(X[8]=De=>r.value=De),title:"导入数据",width:"50%"},{footer:x(()=>[S("span",Jet,[m(U,{onClick:X[7]||(X[7]=De=>r.value=!1)},{default:x(()=>X[52]||(X[52]=[F("取消")])),_:1,__:[52]}),m(U,{type:"primary",onClick:W,disabled:!n.file},{default:x(()=>X[53]||(X[53]=[F(" 导入 ")])),_:1,__:[53]},8,["disabled"])])]),default:x(()=>[m(Lt,{model:n,"label-width":"120px"},{default:x(()=>[m(Ee,{label:"数据类型"},{default:x(()=>[m(rt,{modelValue:n.dataType,"onUpdate:modelValue":X[6]||(X[6]=De=>n.dataType=De),placeholder:"选择数据类型"},{default:x(()=>[m($,{label:"库存物料数据",value:"inventory"}),m($,{label:"实验室测试数据",value:"lab"}),m($,{label:"上线使用数据",value:"online"}),m($,{label:"完整数据集",value:"all"})]),_:1},8,["modelValue"])]),_:1}),m(Ee,{label:"文件"},{default:x(()=>[m(K,{class:"file-upload",action:"#","auto-upload":!1,"on-change":z,limit:1},{trigger:x(()=>[m(U,{type:"primary"},{default:x(()=>X[50]||(X[50]=[F("选择文件")])),_:1,__:[50]})]),tip:x(()=>X[51]||(X[51]=[S("div",{class:"el-upload__tip"}," 请上传JSON或CSV格式的数据文件 ",-1)])),_:1})]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"]),m(Ct,{class:"feature-card"},{header:x(()=>X[54]||(X[54]=[S("div",{class:"card-header"},[S("h2",null,"数据管理功能")],-1)])),default:x(()=>[m(Xt,{gutter:20,class:"feature-grid"},{default:x(()=>[m(St,{xs:24,sm:12,md:8,lg:6},{default:x(()=>[m(st,{to:"/admin/data/rules"},{default:x(()=>[m(Ct,{shadow:"hover",class:"module-card"},{default:x(()=>[m(At,{class:"module-icon"},{default:x(()=>[m(kt(qr))]),_:1}),X[55]||(X[55]=S("h3",{class:"module-title"},"数据规则文档",-1)),X[56]||(X[56]=S("p",{class:"module-desc"},"查看系统数据规则说明文档，了解数据生成逻辑和规则定义",-1))]),_:1,__:[55,56]})]),_:1})]),_:1}),m(St,{xs:24,sm:12,md:8,lg:6},{default:x(()=>[m(st,{to:"/admin/data"},{default:x(()=>[m(Ct,{shadow:"hover",class:"module-card"},{default:x(()=>[m(At,{class:"module-icon"},{default:x(()=>[m(kt(lc))]),_:1}),X[57]||(X[57]=S("h3",{class:"module-title"},"数据生成工具",-1)),X[58]||(X[58]=S("p",{class:"module-desc"},"生成测试数据，包括库存、测试和上线数据",-1))]),_:1,__:[57,58]})]),_:1})]),_:1})]),_:1})]),_:1}),m(Ct,{class:"history-card"},{header:x(()=>[S("div",Qet,[X[60]||(X[60]=S("h2",null,"最近数据操作记录",-1)),m(U,{text:""},{default:x(()=>X[59]||(X[59]=[F("查看全部记录")])),_:1,__:[59]})])]),default:x(()=>[m(Y,null,{default:x(()=>[(J(!0),ht(ye,null,Se(h.value,(De,lp)=>(J(),Jt(yt,{key:lp,type:De.type,timestamp:De.timestamp,icon:O(De.action),size:De.important?"large":"normal"},{default:x(()=>[F(N(De.content),1)]),_:2},1032,["type","timestamp","icon","size"]))),128))]),_:1})]),_:1}),m(je,{modelValue:i.value,"onUpdate:modelValue":X[10]||(X[10]=De=>i.value=De),title:"数据生成进度",width:"500px","close-on-click-modal":!1,"show-close":!1},{footer:x(()=>[S("span",aat,[m(U,{onClick:X[9]||(X[9]=De=>i.value=!1),disabled:l.value},{default:x(()=>X[61]||(X[61]=[F("取消")])),_:1,__:[61]},8,["disabled"]),m(U,{type:"primary",onClick:at,disabled:l.value||o.value!==100},{default:x(()=>X[62]||(X[62]=[F(" 完成 ")])),_:1,__:[62]},8,["disabled"])])]),default:x(()=>[S("div",tat,[m(Gt,{percentage:o.value,status:o.value===100?"success":"","stroke-width":18},null,8,["percentage","status"]),S("div",eat,N(s.value),1)])]),_:1},8,["modelValue"]),m(Ct,{shadow:"hover",class:"tip-card"},{header:x(()=>[S("div",rat,[X[63]||(X[63]=S("h3",null,"数据集成提示",-1)),m(At,null,{default:x(()=>[m(kt(ds))]),_:1})])]),default:x(()=>[X[64]||(X[64]=S("div",{class:"tip-content"},[S("p",null,[S("strong",null,"历史数据与新生成数据的集成说明：")]),S("ol",null,[S("li",null,'历史数据通过"历史数据管控"页面导入和管理，作为固定基础数据'),S("li",null,'新数据通过"数据生成工具"生成，会自动与历史数据集成'),S("li",null,"系统会确保数据的一致性，避免批次号等关键字段重复"),S("li",null,"在库存、测试和上线页面中，将同时展示历史数据和新生成的数据")]),S("p",{class:"tip-note"},"注意：清空测试数据不会影响已导入的历史数据")],-1))]),_:1,__:[64]}),m(je,{title:"数据清理工具",modelValue:f.value,"onUpdate:modelValue":X[13]||(X[13]=De=>f.value=De),width:"500px"},{footer:x(()=>[S("span",oat,[m(U,{onClick:X[12]||(X[12]=De=>f.value=!1)},{default:x(()=>X[67]||(X[67]=[F("取消")])),_:1,__:[67]}),m(U,{type:"danger",onClick:Et},{default:x(()=>X[68]||(X[68]=[F("确认清理")])),_:1,__:[68]})])]),default:x(()=>[m(Ie,{title:"警告：此操作将清理旧数据以释放存储空间",type:"warning",description:"您可以选择保留最新的数据条数，其余较旧的数据将被删除。此操作不可撤销！","show-icon":"",closable:!1}),g.value?(J(),ht("div",nat,[X[65]||(X[65]=S("h3",null,"存储空间使用情况",-1)),m(Gt,{percentage:parseFloat(g.value.usagePercentage),status:parseFloat(g.value.usagePercentage)>80?"exception":"normal"},null,8,["percentage","status"]),S("p",null,"总使用: "+N(g.value.totalSize)+"KB / "+N(g.value.limit),1),m(Ye,{column:1,border:""},{default:x(()=>[m(Zt,{label:"库存数据"},{default:x(()=>[F(N(g.value.details.inventory||0)+"KB",1)]),_:1}),m(Zt,{label:"测试数据"},{default:x(()=>[F(N(g.value.details.lab||0)+"KB",1)]),_:1}),m(Zt,{label:"上线数据"},{default:x(()=>[F(N(g.value.details.factory||0)+"KB",1)]),_:1})]),_:1})])):te("",!0),S("div",iat,[X[66]||(X[66]=S("h3",null,"清理选项",-1)),m(Lt,{"label-position":"top"},{default:x(()=>[m(Ee,{label:"每种数据保留最新的条数"},{default:x(()=>[m(we,{modelValue:p.keepCount,"onUpdate:modelValue":X[11]||(X[11]=De=>p.keepCount=De),min:50,max:500,step:50},null,8,["modelValue"])]),_:1})]),_:1})])]),_:1},8,["modelValue"])])}}},lat=ca(sat,[["__scopeId","data-v-76def08e"]]),cat={name:"DataImportExport",components:{Delete:Cc},setup(){const e=Z("inventory"),t=Z([]),a=Z(null),r=Z(null),n=Z(!1),i=Yt(()=>e.value&&r.value),o=Z(!1),s=Z(!1),l=fa({inventory:0,test:0,online:0}),c=Yt(()=>l.inventory>0||l.test>0||l.online>0),u=fa({inventoryCount:50,testCount:40,onlineCount:30,clearExisting:!1,includeHistorical:!0}),h=Z(!1),d=()=>{l.inventory=La.getHistoricalData("inventory").length,l.test=La.getHistoricalData("test").length,l.online=La.getHistoricalData("online").length},f=C=>C.raw.type==="application/json"||C.name.endsWith(".json")?C.size/1024/1024<10?(r.value=C.raw,!0):(dt.error("文件大小不能超过10MB!"),t.value=[],!1):(dt.error("只能上传JSON格式的文件!"),t.value=[],!1),p=()=>{dt.warning("只能上传一个文件!")},g=()=>{r.value=null,t.value=[]},v=()=>{if(!i.value||n.value)return;n.value=!0;const C=new FileReader;C.onload=A=>{try{const k=A.target.result,L=La.importJSON(k,e.value);d(),dt.success(`成功导入${L.length}条${e.value==="inventory"?"库存":e.value==="test"?"测试":"上线"}数据`),g()}catch(k){console.error("导入数据失败:",k),dt.error(`导入数据失败: ${k.message}`)}finally{n.value=!1}},C.onerror=()=>{dt.error("读取文件失败"),n.value=!1},C.readAsText(r.value)},_=()=>{o.value=!0},y=C=>{let A;switch(C){case"inventory":A=[{material_code:"SAMPLE001",material_name:"样例物料",material_type:"电子元件",batch_no:"BTC2305001",supplier:"示例供应商",quantity:100,unit:"个",warehouse:"中央仓库",location:"A区-01货架",status:"正常",quality:"合格",arrival_date:new Date().toISOString(),project_name:"示例项目",factory:"上海工厂"}];break;case"test":A=[{material_code:"SAMPLE001",material_name:"样例物料",material_type:"电子元件",batch_no:"BTC2305001",supplier:"示例供应商",test_date:new Date().toISOString(),test_conclusion:"合格",tester:"王工",test_type:"来料检验",project_name:"示例项目",factory:"上海工厂"}];break;case"online":A=[{material_code:"SAMPLE001",material_name:"样例物料",batch_no:"BTC2305001",supplier:"示例供应商",production_line:"上海SMT01线",factory:"上海工厂",online_date:new Date().toISOString(),planned_quantity:500,actual_quantity:480,status:"正常",operator:"张工",project_name:"示例项目"}];break;default:dt.error("未知模板类型");return}const k=JSON.stringify(A,null,2),L=new Blob([k],{type:"application/json"}),M=URL.createObjectURL(L),P=document.createElement("a");P.href=M,P.download=`${C}_template.json`,P.click(),URL.revokeObjectURL(M),o.value=!1},b=()=>{s.value=!0},w=()=>{localStorage.removeItem("historical_inventory_data"),localStorage.removeItem("historical_test_data"),localStorage.removeItem("historical_online_data"),La.initialize(),d(),s.value=!1,dt.success("历史数据已清除")},T=async()=>{if(!h.value){h.value=!0;try{const C={...u};if(C.includeHistorical)await La.generateCompleteDataset(C);else{const A=La.historicalInventoryData,k=La.historicalTestData,L=La.historicalOnlineData;La.historicalInventoryData=[],La.historicalTestData=[],La.historicalOnlineData=[],await La.generateCompleteDataset(C),La.historicalInventoryData=A,La.historicalTestData=k,La.historicalOnlineData=L}dt.success("数据生成成功")}catch(C){console.error("生成数据失败:",C),dt.error(`生成数据失败: ${C.message}`)}finally{h.value=!1}}};return Ra(()=>{La.initialize(),d()}),{importType:e,fileList:t,uploadRef:a,importing:n,canImport:i,handleFileChange:f,handleExceedLimit:p,handleRemoveFile:g,importData:v,templateDialogVisible:o,openTemplateDialog:_,downloadTemplate:y,historicalStats:l,hasHistoricalData:c,clearDialogVisible:s,openClearDialog:b,clearHistoricalData:w,generationOptions:u,generating:h,generateData:T}}},uat={class:"data-import-export"},hat={class:"card-header"},dat={class:"section"},fat={class:"import-form"},pat={class:"section"},gat={class:"stats-value"},vat={class:"stats-value"},mat={class:"stats-value"},yat={class:"actions-row"},_at={class:"section"},bat={class:"generate-form"},xat={class:"template-dialog-content"},Sat={class:"template-buttons"},wat={class:"dialog-footer"};function Cat(e,t,a,r,n,i){const o=q("el-tag"),s=q("el-option"),l=q("el-select"),c=q("el-form-item"),u=q("el-button"),h=q("el-upload"),d=q("el-form"),f=q("el-divider"),p=q("el-card"),g=q("el-col"),v=q("el-row"),_=q("Delete"),y=q("el-icon"),b=q("el-input-number"),w=q("el-checkbox"),T=q("el-dialog");return J(),ht("div",uat,[m(p,{class:"card"},{header:x(()=>[S("div",hat,[t[13]||(t[13]=S("h3",null,"历史数据导入管理",-1)),m(o,{type:"info"},{default:x(()=>t[12]||(t[12]=[F("基础数据")])),_:1,__:[12]})])]),default:x(()=>[S("div",dat,[t[18]||(t[18]=S("h4",null,"历史数据导入",-1)),t[19]||(t[19]=S("p",{class:"description"},"导入历史基础数据，这些数据将作为固定数据保持不变，并在每次生成新数据时结合数据规则自动添加",-1)),S("div",fat,[m(d,{"label-position":"top"},{default:x(()=>[m(c,{label:"选择数据类型"},{default:x(()=>[m(l,{modelValue:r.importType,"onUpdate:modelValue":t[0]||(t[0]=C=>r.importType=C),placeholder:"请选择数据类型"},{default:x(()=>[m(s,{label:"库存数据",value:"inventory"}),m(s,{label:"测试数据",value:"test"}),m(s,{label:"上线数据",value:"online"})]),_:1},8,["modelValue"])]),_:1}),m(c,{label:"选择JSON文件"},{default:x(()=>[m(h,{ref:"uploadRef",action:"#","auto-upload":!1,limit:1,"on-change":r.handleFileChange,"on-exceed":r.handleExceedLimit,"on-remove":r.handleRemoveFile,"file-list":r.fileList},{tip:x(()=>t[15]||(t[15]=[S("div",{class:"el-upload__tip"}," 请上传JSON格式文件，最大不超过10MB ",-1)])),default:x(()=>[m(u,{type:"primary"},{default:x(()=>t[14]||(t[14]=[F("选择文件")])),_:1,__:[14]})]),_:1},8,["on-change","on-exceed","on-remove","file-list"])]),_:1}),m(c,null,{default:x(()=>[m(u,{type:"success",disabled:!r.canImport,loading:r.importing,onClick:r.importData},{default:x(()=>t[16]||(t[16]=[F(" 导入数据 ")])),_:1,__:[16]},8,["disabled","loading","onClick"]),m(u,{onClick:r.openTemplateDialog},{default:x(()=>t[17]||(t[17]=[F(" 下载模板 ")])),_:1,__:[17]},8,["onClick"])]),_:1})]),_:1})])]),m(f),S("div",pat,[t[24]||(t[24]=S("h4",null,"历史数据管理",-1)),t[25]||(t[25]=S("p",{class:"description"},"查看和管理已导入的历史数据",-1)),m(v,{gutter:20,class:"stats-row"},{default:x(()=>[m(g,{span:8},{default:x(()=>[m(p,{class:"stats-card",shadow:"hover"},{default:x(()=>[S("div",gat,N(r.historicalStats.inventory),1),t[20]||(t[20]=S("div",{class:"stats-label"},"历史库存数据",-1))]),_:1,__:[20]})]),_:1}),m(g,{span:8},{default:x(()=>[m(p,{class:"stats-card",shadow:"hover"},{default:x(()=>[S("div",vat,N(r.historicalStats.test),1),t[21]||(t[21]=S("div",{class:"stats-label"},"历史测试数据",-1))]),_:1,__:[21]})]),_:1}),m(g,{span:8},{default:x(()=>[m(p,{class:"stats-card",shadow:"hover"},{default:x(()=>[S("div",mat,N(r.historicalStats.online),1),t[22]||(t[22]=S("div",{class:"stats-label"},"历史上线数据",-1))]),_:1,__:[22]})]),_:1})]),_:1}),S("div",yat,[m(u,{type:"danger",disabled:!r.hasHistoricalData,onClick:r.openClearDialog},{default:x(()=>[m(y,null,{default:x(()=>[m(_)]),_:1}),t[23]||(t[23]=F(" 清除历史数据 "))]),_:1,__:[23]},8,["disabled","onClick"])])]),m(f),S("div",_at,[t[29]||(t[29]=S("h4",null,"数据生成",-1)),t[30]||(t[30]=S("p",{class:"description"},"根据数据规则和历史数据参考，生成符合业务逻辑的完整数据集",-1)),S("div",bat,[m(d,{"label-position":"top"},{default:x(()=>[m(v,{gutter:20},{default:x(()=>[m(g,{span:8},{default:x(()=>[m(c,{label:"库存数据数量"},{default:x(()=>[m(b,{modelValue:r.generationOptions.inventoryCount,"onUpdate:modelValue":t[1]||(t[1]=C=>r.generationOptions.inventoryCount=C),min:10,max:500,step:10},null,8,["modelValue"])]),_:1})]),_:1}),m(g,{span:8},{default:x(()=>[m(c,{label:"测试数据数量"},{default:x(()=>[m(b,{modelValue:r.generationOptions.testCount,"onUpdate:modelValue":t[2]||(t[2]=C=>r.generationOptions.testCount=C),min:10,max:200,step:10},null,8,["modelValue"])]),_:1})]),_:1}),m(g,{span:8},{default:x(()=>[m(c,{label:"上线数据数量"},{default:x(()=>[m(b,{modelValue:r.generationOptions.onlineCount,"onUpdate:modelValue":t[3]||(t[3]=C=>r.generationOptions.onlineCount=C),min:10,max:200,step:10},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),m(c,null,{default:x(()=>[m(w,{modelValue:r.generationOptions.clearExisting,"onUpdate:modelValue":t[4]||(t[4]=C=>r.generationOptions.clearExisting=C)},{default:x(()=>t[26]||(t[26]=[F("清除现有数据")])),_:1,__:[26]},8,["modelValue"])]),_:1}),m(c,null,{default:x(()=>[m(w,{modelValue:r.generationOptions.includeHistorical,"onUpdate:modelValue":t[5]||(t[5]=C=>r.generationOptions.includeHistorical=C)},{default:x(()=>t[27]||(t[27]=[F("包含历史数据")])),_:1,__:[27]},8,["modelValue"])]),_:1}),m(c,null,{default:x(()=>[m(u,{type:"primary",loading:r.generating,onClick:r.generateData},{default:x(()=>t[28]||(t[28]=[F(" 生成数据 ")])),_:1,__:[28]},8,["loading","onClick"])]),_:1})]),_:1})])])]),_:1}),m(T,{modelValue:r.templateDialogVisible,"onUpdate:modelValue":t[9]||(t[9]=C=>r.templateDialogVisible=C),title:"下载数据模板",width:"500px"},{default:x(()=>[S("div",xat,[t[34]||(t[34]=S("p",null,"选择要下载的数据模板类型：",-1)),S("div",Sat,[m(u,{onClick:t[6]||(t[6]=C=>r.downloadTemplate("inventory"))},{default:x(()=>t[31]||(t[31]=[F("库存数据模板")])),_:1,__:[31]}),m(u,{onClick:t[7]||(t[7]=C=>r.downloadTemplate("test"))},{default:x(()=>t[32]||(t[32]=[F("测试数据模板")])),_:1,__:[32]}),m(u,{onClick:t[8]||(t[8]=C=>r.downloadTemplate("online"))},{default:x(()=>t[33]||(t[33]=[F("上线数据模板")])),_:1,__:[33]})])])]),_:1},8,["modelValue"]),m(T,{modelValue:r.clearDialogVisible,"onUpdate:modelValue":t[11]||(t[11]=C=>r.clearDialogVisible=C),title:"确认清除历史数据",width:"420px"},{footer:x(()=>[S("span",wat,[m(u,{onClick:t[10]||(t[10]=C=>r.clearDialogVisible=!1)},{default:x(()=>t[35]||(t[35]=[F("取消")])),_:1,__:[35]}),m(u,{type:"danger",onClick:r.clearHistoricalData},{default:x(()=>t[36]||(t[36]=[F("确认清除")])),_:1,__:[36]},8,["onClick"])])]),default:x(()=>[t[37]||(t[37]=S("div",{class:"clear-dialog-content"},[S("p",null,"清除历史数据会永久删除所有导入的历史数据，无法恢复。"),S("p",null,"你确定要继续吗？")],-1))]),_:1,__:[37]},8,["modelValue"])])}const Tat=ca(cat,[["render",Cat],["__scopeId","data-v-8cc8ab81"]]),Aat={class:"rule-library-page"},kat={class:"page-header"},Dat={class:"header-actions"},Lat={class:"stats-overview"},Iat={class:"stats-icon"},Mat={class:"stats-info"},Eat={class:"stats-value"},Rat={class:"stats-icon"},Pat={class:"stats-info"},Bat={class:"stats-value"},Oat={class:"stats-icon"},Nat={class:"stats-info"},$at={class:"stats-value"},Fat={class:"stats-icon"},zat={class:"stats-info"},Vat={class:"stats-value"},Gat={class:"stats-icon"},Hat={class:"stats-info"},Wat={class:"stats-value"},qat={class:"stats-icon"},Uat={class:"stats-info"},jat={class:"stats-value"},Yat={class:"tab-label"},Xat={class:"tab-content"},Zat={class:"toolbar"},Kat={class:"toolbar-left"},Jat={class:"toolbar-right"},Qat={class:"rule-info"},trt={class:"rule-name"},ert={class:"test-status"},art={key:0,class:"status-text"},rrt={key:1,class:"status-text"},nrt={key:2,class:"status-text"},irt={key:3,class:"status-text"},ort={class:"action-buttons"},srt={class:"pagination-container"},lrt={key:0,class:"test-result-content"},crt={class:"rule-header"},urt={class:"test-details"},hrt={key:0},drt={key:0,class:"test-result-cards"},frt={class:"cards-grid"},prt={class:"card-icon"},grt={class:"card-content"},vrt={key:0,class:"split-data-content"},mrt={class:"card-title"},yrt={class:"split-data-grid"},_rt={class:"split-item"},brt={class:"split-label"},xrt={class:"split-value"},Srt={class:"split-item"},wrt={class:"split-label"},Crt={class:"split-value"},Trt={key:1,class:"normal-card-content"},Art={class:"card-title"},krt={class:"card-value"},Drt={key:0,class:"card-subtitle"},Lrt={class:"result-summary"},Irt={key:1},Mrt={key:2},Ert={key:0},Rrt={key:1,class:"text-muted"},Prt={key:3,style:{"margin-top":"20px"}},Brt={__name:"RuleLibraryView",setup(e){const t=Z("nlp");Z("all");const a=Z(!1),r=Z(!1),n=Z(!1),i=Z(""),o=Z(1),s=Z(20),l=Z([]),c=Z({nlp:!1}),u=Z(!1),h=Z(null),d=Z(""),f=Yt(()=>l.value.length),p=Yt(()=>l.value.filter(B=>B.status==="active").length),g=Yt(()=>l.value.filter(B=>B.tested).length),v=Yt(()=>l.value.filter(B=>B.working).length),_=Yt(()=>l.value.filter(B=>B.error).length),y=Yt(()=>{const B=g.value,R=v.value;return B>0?Math.round(R/B*100):0});Yt(()=>{let B=l.value;if(i.value){const R=i.value.toLowerCase();B=B.filter(V=>V.intent_name.toLowerCase().includes(R)||V.description.toLowerCase().includes(R))}return B});const b=async()=>{a.value=!0;try{await C(),dt.success("规则库刷新成功")}catch(B){dt.error("刷新失败: "+B.message)}finally{a.value=!1}},w=async()=>{r.value=!0;try{const{default:B}=await jt(async()=>{const{default:V}=await import("./RulesService-D3yBkLbq.js");return{default:V}},__vite__mapDeps([3,1,2])),R=await B.testAllRules();if(R.success){const{totalTested:V,successCount:z}=R.data;dt.success(`批量测试完成: ${z}/${V} 条规则测试成功`)}else throw new Error(R.message||"批量测试失败")}catch(B){dt.error("批量测试失败: "+B.message)}finally{r.value=!1}},T=async()=>{try{const{default:B}=await jt(async()=>{const{default:R}=await import("./RulesService-D3yBkLbq.js");return{default:R}},__vite__mapDeps([3,1,2]));B.exportRules(l.value),dt.success("规则库导出成功")}catch(B){dt.error("导出失败: "+B.message)}},C=async()=>{c.value.nlp=!0;try{console.log("开始加载规则...");const B=await fetch("/api/rules");if(!B.ok)throw new Error(`HTTP ${B.status}: ${B.statusText}`);const R=await B.json();if(console.log("API响应数据:",R),R.success&&Array.isArray(R.data))l.value=R.data.map(V=>({...V,tested:!1,working:!1,error:!1,testing:!1,testResult:null})),console.log(`成功加载 ${l.value.length} 条规则`),dt.success(`成功加载 ${l.value.length} 条规则`);else throw new Error("返回的数据格式不正确")}catch(B){console.error("加载NLP规则失败:",B),dt.error("加载规则失败: "+B.message),l.value=[{id:1,intent_name:"备用测试规则",description:"这是备用规则，API连接失败时显示",action_type:"SQL_QUERY",status:"active",priority:1,tested:!1,working:!1,error:!1,testing:!1,testResult:null}],dt.warning("使用备用规则数据，请检查API连接")}finally{c.value.nlp=!1}},A=async B=>{B.testing=!0;try{console.log("🧪 测试规则:",B.intent_name);const R=B.example_query;if(!R)throw new Error("规则缺少示例查询 (example_query)");console.log("🔍 使用示例查询:",R);const V=await fetch("http://localhost:3001/api/assistant/query",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:R})});if(console.log("📡 API响应状态:",V.status),V.ok){const z=await V.json();console.log("📊 规则测试结果:",z);const W=z.tableData||[],it=Array.isArray(W)&&W.length>0,ot=z.reply&&z.reply.trim().length>0,xt=z.message&&z.message.trim().length>0,j=z.success!==!1&&(it||ot||xt);if(console.log("📊 测试结果分析:"),console.log("  - success字段:",z.success),console.log("  - 有数据:",it),console.log("  - 数据条数:",W.length),console.log("  - 有回复:",ot),console.log("  - 有消息:",xt),console.log("  - 数据内容:",z.tableData),console.log("  - 最终判断:",j),B.tested=!0,B.working=j,B.error=!j,B.testResult={success:j,data:{tableData:W},reply:z.reply||"",sql:z.sql||"",params:z.params||{},matchedRule:z.matchedRule||"",source:z.source||"",timestamp:new Date().toLocaleString(),query:R,hasData:it,hasReply:ot,rawResult:z},j){const mt=W.length;dt.success(`✅ 规则 "${B.intent_name}" 测试成功 - 返回 ${mt} 条数据`),console.log(`✅ 规则测试成功 - 返回数据: ${mt} 条`)}else dt.warning(`⚠️ 规则 "${B.intent_name}" 测试失败 - 无有效数据返回`),console.log("⚠️ 规则测试失败 - 结果:",z)}else{const z=await V.text();throw new Error(`HTTP ${V.status}: ${z}`)}}catch(R){console.error("❌ 规则测试失败:",R),B.tested=!0,B.working=!1,B.error=!0,B.testResult={success:!1,error:R.message,timestamp:new Date().toLocaleString(),query:B.example_query||k(B)},dt.error(`❌ 规则测试失败: ${R.message}`)}finally{B.testing=!1}},k=B=>({真实测试结果统计:"查询测试结果统计",物料库存查询:"查询物料库存信息",供应商信息查询:"查询供应商信息",批次信息查询:"查询批次信息",在线跟踪查询:"查询在线跟踪数据"})[B.intent_name]||`测试规则: ${B.intent_name}`,L=B=>{var R,V,z;return B?(V=(R=B.rawResult)==null?void 0:R.data)!=null&&V.tableData&&Array.isArray(B.rawResult.data.tableData)?B.rawResult.data.tableData:(z=B.data)!=null&&z.tableData&&Array.isArray(B.data.tableData)?B.data.tableData:B.data&&Array.isArray(B.data)?B.data:[]:[]},M=async()=>{n.value=!0;try{const{default:B}=await jt(async()=>{const{default:V}=await import("./RulesService-D3yBkLbq.js");return{default:V}},__vite__mapDeps([3,1,2])),R=await B.testAllRules();if(R.success){const{totalTested:V,successCount:z,failureCount:W,results:it}=R.data;it.forEach(ot=>{const xt=l.value.find(j=>j.id===ot.id);xt&&(xt.tested=!0,xt.working=ot.success,xt.error=!ot.success,xt.testResult=ot)}),dt.success(`批量测试完成: ${z}/${V} 条规则测试成功`)}else throw new Error(R.message||"批量测试失败")}catch(B){console.error("批量测试失败:",B),dt.error("批量测试失败: "+B.message)}finally{n.value=!1}},P=B=>{var R;console.log("📋 查看规则详情:",B.intent_name),h.value=B,d.value=((R=B.testResult)==null?void 0:R.query)||B.example_query||k(B),u.value=!0},E=async()=>{var B;h.value&&(await A(h.value),d.value=((B=h.value.testResult)==null?void 0:B.query)||h.value.example_query||k(h.value))},D=B=>{switch(B){case"基础查询":return"success";case"进阶查询":return"primary";case"专项分析":return"danger";case"统计报表":return"warning";case"物料专项":return"info";case"对比分析":return"primary";case"综合查询":return"success";case"基础查询规则":return"success";case"进阶分析规则":return"primary";case"高级统计规则":return"warning";case"专项分析规则":return"danger";case"趋势对比规则":return"info";case"中级规则":return"success";case"高级规则":return"warning";case"专项规则":return"danger";case"排行规则":return"primary";case"复杂规则":return"info";case"追溯规则":return"primary";default:return""}},O=B=>{switch(B){case"基础查询":return"基础查询";case"进阶查询":return"进阶查询";case"专项分析":return"专项分析";case"统计报表":return"统计报表";case"物料专项":return"物料专项";case"对比分析":return"对比分析";case"综合查询":return"综合查询";case"基础查询规则":return"基础";case"进阶分析规则":return"进阶";case"高级统计规则":return"统计";case"专项分析规则":return"专项";case"趋势对比规则":return"趋势";case"中级规则":return"中级";case"高级规则":return"高级";case"专项规则":return"专项";case"排行规则":return"排行";case"复杂规则":return"复杂";case"追溯规则":return"追溯";default:return"未分类"}};return Ra(()=>{C()}),(B,R)=>{const V=q("el-icon"),z=q("el-button"),W=q("el-card"),it=q("el-col"),ot=q("el-row"),xt=q("el-input"),j=q("el-tag"),mt=q("el-table-column"),Tt=q("el-table"),Mt=q("el-pagination"),et=q("el-tab-pane"),ut=q("el-tabs"),at=q("el-divider"),Q=q("el-text"),bt=q("el-empty"),Dt=q("el-descriptions-item"),Et=q("el-descriptions"),ft=q("el-dialog"),$t=Po("loading");return J(),ht("div",Aat,[S("div",kat,[R[10]||(R[10]=S("h1",null,"📚 数据规则库管理",-1)),R[11]||(R[11]=S("p",{class:"description"},"统一管理和展示系统中创建的所有数据规则，包括NLP意图规则、数据查询规则和规则执行状态",-1)),S("div",Dat,[m(z,{onClick:b,loading:a.value},{default:x(()=>[m(V,null,{default:x(()=>[m(kt(nf))]),_:1}),R[7]||(R[7]=F(" 刷新所有规则 "))]),_:1,__:[7]},8,["loading"]),m(z,{type:"primary",onClick:w,loading:r.value},{default:x(()=>[m(V,null,{default:x(()=>[m(kt(xi))]),_:1}),R[8]||(R[8]=F(" 批量测试规则 "))]),_:1,__:[8]},8,["loading"]),m(z,{type:"success",onClick:T},{default:x(()=>[m(V,null,{default:x(()=>[m(kt(Ii))]),_:1}),R[9]||(R[9]=F(" 导出规则库 "))]),_:1,__:[9]})])]),S("div",Lat,[m(ot,{gutter:20},{default:x(()=>[m(it,{span:4},{default:x(()=>[m(W,{shadow:"hover",class:"stats-card total-card"},{default:x(()=>[S("div",Iat,[m(V,null,{default:x(()=>[m(kt(qr))]),_:1})]),S("div",Mat,[R[12]||(R[12]=S("div",{class:"stats-title"},"总规则数",-1)),S("div",Eat,N(f.value),1)])]),_:1})]),_:1}),m(it,{span:4},{default:x(()=>[m(W,{shadow:"hover",class:"stats-card active-card"},{default:x(()=>[S("div",Rat,[m(V,null,{default:x(()=>[m(kt(wc))]),_:1})]),S("div",Pat,[R[13]||(R[13]=S("div",{class:"stats-title"},"活跃规则",-1)),S("div",Bat,N(p.value),1)])]),_:1})]),_:1}),m(it,{span:4},{default:x(()=>[m(W,{shadow:"hover",class:"stats-card tested-card"},{default:x(()=>[S("div",Oat,[m(V,null,{default:x(()=>[m(kt(xi))]),_:1})]),S("div",Nat,[R[14]||(R[14]=S("div",{class:"stats-title"},"已测试",-1)),S("div",$at,N(g.value),1)])]),_:1})]),_:1}),m(it,{span:4},{default:x(()=>[m(W,{shadow:"hover",class:"stats-card working-card"},{default:x(()=>[S("div",Fat,[m(V,null,{default:x(()=>[m(kt(nv))]),_:1})]),S("div",zat,[R[15]||(R[15]=S("div",{class:"stats-title"},"正常工作",-1)),S("div",Vat,N(v.value),1)])]),_:1})]),_:1}),m(it,{span:4},{default:x(()=>[m(W,{shadow:"hover",class:"stats-card error-card"},{default:x(()=>[S("div",Gat,[m(V,null,{default:x(()=>[m(kt(Ro))]),_:1})]),S("div",Hat,[R[16]||(R[16]=S("div",{class:"stats-title"},"异常规则",-1)),S("div",Wat,N(_.value),1)])]),_:1})]),_:1}),m(it,{span:4},{default:x(()=>[m(W,{shadow:"hover",class:"stats-card success-rate-card"},{default:x(()=>[S("div",qat,[m(V,null,{default:x(()=>[m(kt(xc))]),_:1})]),S("div",Uat,[R[17]||(R[17]=S("div",{class:"stats-title"},"成功率",-1)),S("div",jat,N(y.value)+"%",1)])]),_:1})]),_:1})]),_:1})]),m(W,{class:"main-card"},{default:x(()=>[m(ut,{modelValue:t.value,"onUpdate:modelValue":R[3]||(R[3]=Pt=>t.value=Pt),type:"border-card",class:"rule-tabs"},{default:x(()=>[m(et,{name:"nlp"},{label:x(()=>[S("span",Yat,[m(V,null,{default:x(()=>[m(kt($C))]),_:1}),F(" NLP意图规则 ("+N(l.value.length)+") ",1)])]),default:x(()=>[S("div",Xat,[S("div",Zat,[S("div",Kat,[m(z,{type:"primary"},{default:x(()=>[m(V,null,{default:x(()=>[m(kt(mi))]),_:1}),R[18]||(R[18]=F(" 添加意图规则 "))]),_:1,__:[18]}),m(z,null,{default:x(()=>[m(V,null,{default:x(()=>[m(kt(Ii))]),_:1}),R[19]||(R[19]=F(" 导出规则 "))]),_:1,__:[19]}),m(z,{type:"success",loading:n.value,onClick:M},{default:x(()=>[m(V,null,{default:x(()=>[m(kt(xi))]),_:1}),R[20]||(R[20]=F(" 批量测试 "))]),_:1,__:[20]},8,["loading"])]),S("div",Jat,[m(xt,{modelValue:i.value,"onUpdate:modelValue":R[0]||(R[0]=Pt=>i.value=Pt),placeholder:"搜索意图规则...",style:{width:"300px"},clearable:""},{prefix:x(()=>[m(V,null,{default:x(()=>[m(kt(af))]),_:1})]),_:1},8,["modelValue"])])]),Bo((J(),ht("div",null,[m(Tt,{data:l.value.slice((o.value-1)*s.value,o.value*s.value),style:{width:"100%"}},{default:x(()=>[m(mt,{label:"规则信息","min-width":"200"},{default:x(({row:Pt})=>[S("div",Qat,[m(j,{type:D(Pt.category),size:"small",class:"complexity-tag"},{default:x(()=>[F(N(O(Pt.category)),1)]),_:2},1032,["type"]),S("span",trt,N(Pt.intent_name),1)])]),_:1}),m(mt,{label:"描述",prop:"description","min-width":"250","show-overflow-tooltip":""}),m(mt,{label:"状态",width:"100",align:"center"},{default:x(({row:Pt})=>[m(j,{type:Pt.status==="active"?"success":"danger",size:"small"},{default:x(()=>[F(N(Pt.status==="active"?"活跃":"禁用"),1)]),_:2},1032,["type"])]),_:1}),m(mt,{label:"测试状态",width:"120",align:"center"},{default:x(({row:Pt})=>[S("div",ert,[Pt.testing?(J(),ht("span",art,"测试中...")):Pt.tested?Pt.working?(J(),ht("span",nrt,[m(V,{class:"status-icon success"},{default:x(()=>[m(kt(nv))]),_:1}),R[21]||(R[21]=F(" 正常 "))])):(J(),ht("span",irt,[m(V,{class:"status-icon error"},{default:x(()=>[m(kt(GC))]),_:1}),R[22]||(R[22]=F(" 异常 "))])):(J(),ht("span",rrt,"未测试"))])]),_:1}),m(mt,{label:"操作",width:"200",align:"center"},{default:x(({row:Pt})=>[S("div",ort,[m(z,{size:"small",loading:Pt.testing,onClick:qt=>A(Pt)},{default:x(()=>[m(V,null,{default:x(()=>[m(kt(xi))]),_:1}),R[23]||(R[23]=F(" 测试 "))]),_:2,__:[23]},1032,["loading","onClick"]),m(z,{size:"small",type:"primary",onClick:qt=>P(Pt)},{default:x(()=>[m(V,null,{default:x(()=>[m(kt(ru))]),_:1}),R[24]||(R[24]=F(" 详情 "))]),_:2,__:[24]},1032,["onClick"])])]),_:1})]),_:1},8,["data"]),S("div",srt,[m(Mt,{"current-page":o.value,"onUpdate:currentPage":R[1]||(R[1]=Pt=>o.value=Pt),"page-size":s.value,"onUpdate:pageSize":R[2]||(R[2]=Pt=>s.value=Pt),"page-sizes":[10,20,50,100],total:l.value.length,layout:"total, sizes, prev, pager, next, jumper"},null,8,["current-page","page-size","total"])])])),[[$t,c.value.nlp]])])]),_:1})]),_:1},8,["modelValue"])]),_:1}),m(ft,{modelValue:u.value,"onUpdate:modelValue":R[6]||(R[6]=Pt=>u.value=Pt),title:"规则测试结果",width:"80%","close-on-click-modal":!1},{footer:x(()=>{var Pt;return[m(z,{onClick:R[5]||(R[5]=qt=>u.value=!1)},{default:x(()=>R[31]||(R[31]=[F("关闭")])),_:1,__:[31]}),m(z,{type:"primary",onClick:E,loading:(Pt=h.value)==null?void 0:Pt.testing},{default:x(()=>R[32]||(R[32]=[F(" 重新测试 ")])),_:1,__:[32]},8,["loading"])]}),default:x(()=>{var Pt,qt,nt;return[h.value?(J(),ht("div",lrt,[S("div",crt,[S("h3",null,N(h.value.intent_name),1),m(j,{type:h.value.working?"success":"danger",size:"large"},{default:x(()=>[F(N(h.value.working?"测试通过":"测试失败"),1)]),_:1},8,["type"])]),m(at),S("div",urt,[R[28]||(R[28]=S("h4",null,"🔍 测试查询",-1)),m(xt,{modelValue:d.value,"onUpdate:modelValue":R[4]||(R[4]=H=>d.value=H),type:"textarea",rows:2,readonly:"",class:"query-input"},null,8,["modelValue"]),R[29]||(R[29]=S("h4",null,"📊 查询结果",-1)),L(h.value.testResult)&&L(h.value.testResult).length>0?(J(),ht("div",hrt,[(nt=(qt=(Pt=h.value.testResult)==null?void 0:Pt.rawResult)==null?void 0:qt.data)!=null&&nt.cards&&h.value.testResult.rawResult.data.cards.length>0?(J(),ht("div",drt,[R[25]||(R[25]=S("h5",null,"📊 数据统计概览",-1)),S("div",frt,[(J(!0),ht(ye,null,Se(h.value.testResult.rawResult.data.cards,(H,tt)=>(J(),ht("div",{key:tt,class:ve(["stat-card",H.type])},[S("div",prt,N(H.icon),1),S("div",grt,[H.splitData?(J(),ht("div",vrt,[S("div",mrt,N(H.title),1),S("div",yrt,[S("div",_rt,[S("div",brt,N(H.splitData.material.label),1),S("div",xrt,N(H.splitData.material.value)+N(H.splitData.material.unit),1)]),S("div",Srt,[S("div",wrt,N(H.splitData.batch.label),1),S("div",Crt,N(H.splitData.batch.value)+N(H.splitData.batch.unit),1)])])])):(J(),ht("div",Trt,[S("div",Art,N(H.title),1),S("div",krt,N(H.value),1),H.subtitle?(J(),ht("div",Drt,N(H.subtitle),1)):te("",!0)]))])],2))),128))])])):te("",!0),m(Tt,{data:L(h.value.testResult).slice(0,10),"max-height":"300",border:""},{default:x(()=>[(J(!0),ht(ye,null,Se(L(h.value.testResult)[0],(H,tt)=>(J(),Jt(mt,{key:tt,prop:tt,label:tt,"show-overflow-tooltip":"","min-width":"120"},null,8,["prop","label"]))),128))]),_:1},8,["data"]),S("div",Lrt,[m(Q,{type:"info"},{default:x(()=>[F(" 显示前10条记录，共 "+N(L(h.value.testResult).length)+" 条数据 ",1)]),_:1})])])):h.value.testResult&&h.value.testResult.reply?(J(),ht("div",Irt,[m(W,null,{default:x(()=>[R[26]||(R[26]=S("h5",null,"AI回复内容：",-1)),S("p",null,N(h.value.testResult.reply),1)]),_:1,__:[26]})])):(J(),ht("div",Mrt,[m(bt,{description:"无测试数据"})])),R[30]||(R[30]=S("h4",null,"🔧 规则配置信息",-1)),m(Et,{column:2,border:""},{default:x(()=>[m(Dt,{label:"规则ID"},{default:x(()=>[F(N(h.value.id),1)]),_:1}),m(Dt,{label:"动作类型"},{default:x(()=>[m(j,{type:h.value.action_type==="SQL_QUERY"?"success":"warning"},{default:x(()=>[F(N(h.value.action_type),1)]),_:1},8,["type"])]),_:1}),m(Dt,{label:"优先级"},{default:x(()=>[F(N(h.value.priority||1),1)]),_:1}),m(Dt,{label:"状态"},{default:x(()=>[m(j,{type:h.value.status==="active"?"success":"info"},{default:x(()=>[F(N(h.value.status==="active"?"启用":"禁用"),1)]),_:1},8,["type"])]),_:1}),m(Dt,{label:"触发词",span:"2"},{default:x(()=>[h.value.trigger_words&&h.value.trigger_words.length>0?(J(),ht("div",Ert,[(J(!0),ht(ye,null,Se(h.value.trigger_words,(H,tt)=>(J(),Jt(j,{key:tt,size:"small",class:"trigger-word-tag"},{default:x(()=>[F(N(H),1)]),_:2},1024))),128))])):(J(),ht("span",Rrt,"无触发词配置"))]),_:1}),m(Dt,{label:"SQL查询",span:"2"},{default:x(()=>[m(xt,{value:h.value.action_target||"无SQL配置",type:"textarea",rows:8,readonly:"",placeholder:"规则的SQL查询语句"},null,8,["value"])]),_:1})]),_:1}),h.value.testResult?(J(),ht("div",Prt,[R[27]||(R[27]=S("h4",null,"🧪 最近测试信息",-1)),m(Et,{column:2,border:""},{default:x(()=>[m(Dt,{label:"测试时间"},{default:x(()=>{var H;return[F(N(((H=h.value.testResult)==null?void 0:H.timestamp)||"未知"),1)]}),_:1}),m(Dt,{label:"测试状态"},{default:x(()=>[m(j,{type:h.value.working?"success":h.value.error?"danger":"info"},{default:x(()=>[F(N(h.value.working?"正常":h.value.error?"异常":"未测试"),1)]),_:1},8,["type"])]),_:1})]),_:1})])):te("",!0)])])):te("",!0)]}),_:1},8,["modelValue"])])}}},Ort=ca(Brt,[["__scopeId","data-v-a37c5d78"]]),Nrt={class:"rule-library-simple"},$rt={key:0,class:"loading-section"},Frt={key:1,class:"content-section"},zrt={class:"stats"},Vrt={class:"rules-list"},Grt={key:0,class:"api-test-result"},Hrt={__name:"RuleLibraryViewSimple",setup(e){const t=Z(!1),a=Z([]),r=Z(null),n=async()=>{t.value=!0;try{console.log("开始加载规则...");const l="http://localhost:3002/api/rules";console.log("请求URL:",l);const c=await fetch(l);if(console.log("API响应状态:",c.status),c.ok){const u=await c.json();if(console.log("API响应数据:",u),u.success&&Array.isArray(u.data))a.value=u.data.map(h=>({...h,testing:!1})),dt.success(`成功加载 ${a.value.length} 条规则`);else throw new Error("API返回数据格式错误")}else throw new Error(`HTTP ${c.status}: ${c.statusText}`)}catch(s){console.error("加载规则失败:",s),dt.error("加载规则失败: "+s.message),a.value=[{id:1,intent_name:"备用测试规则",description:"这是备用规则，API连接失败时显示",action_type:"SQL_QUERY",testing:!1}]}finally{t.value=!1}},i=async()=>{try{console.log("测试API连接...");const l="http://localhost:3002/api/rules";console.log("测试URL:",l);const c=await fetch(l),u=await c.json();r.value={status:c.status,ok:c.ok,data:u},dt.success("API测试成功")}catch(s){console.error("API测试失败:",s),r.value={error:s.message},dt.error("API测试失败: "+s.message)}},o=async s=>{s.testing=!0;try{const l=await fetch("/api/assistant/query",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:`测试规则: ${s.intent_name}`,useRealData:!0,testMode:!0})});if(l.ok){const c=await l.json();dt.success(`规则 "${s.intent_name}" 测试成功`),console.log("规则测试结果:",c)}else throw new Error(`HTTP ${l.status}`)}catch(l){console.error("规则测试失败:",l),dt.error(`规则测试失败: ${l.message}`)}finally{s.testing=!1}};return Ra(()=>{console.log("简化版规则库页面已挂载"),n()}),(s,l)=>{const c=q("el-loading-directive"),u=q("el-button"),h=q("el-table-column"),d=q("el-table"),f=Po("loading");return J(),ht("div",Nrt,[l[6]||(l[6]=S("h1",null,"规则库管理 - 简化版",-1)),t.value?(J(),ht("div",$rt,[Bo((J(),Jt(c,{text:"正在加载规则..."},{default:x(()=>l[0]||(l[0]=[S("div",{style:{height:"200px"}},null,-1)])),_:1,__:[0]})),[[f,t.value]])])):(J(),ht("div",Frt,[S("div",zrt,[S("p",null,"总规则数: "+N(a.value.length),1),m(u,{onClick:n,loading:t.value},{default:x(()=>l[1]||(l[1]=[F("刷新规则")])),_:1,__:[1]},8,["loading"]),m(u,{onClick:i},{default:x(()=>l[2]||(l[2]=[F("测试API")])),_:1,__:[2]})]),S("div",Vrt,[l[4]||(l[4]=S("h2",null,"规则列表",-1)),m(d,{data:a.value,border:"",style:{width:"100%"}},{default:x(()=>[m(h,{prop:"id",label:"ID",width:"80"}),m(h,{prop:"intent_name",label:"规则名称","min-width":"200"}),m(h,{prop:"description",label:"描述","min-width":"300"}),m(h,{prop:"action_type",label:"类型",width:"120"}),m(h,{label:"操作",width:"150"},{default:x(({row:p})=>[m(u,{size:"small",onClick:g=>o(p),loading:p.testing},{default:x(()=>l[3]||(l[3]=[F(" 测试 ")])),_:2,__:[3]},1032,["onClick","loading"])]),_:1})]),_:1},8,["data"])]),r.value?(J(),ht("div",Grt,[l[5]||(l[5]=S("h3",null,"API测试结果:",-1)),S("pre",null,N(JSON.stringify(r.value,null,2)),1)])):te("",!0)]))])}}},Wrt=ca(Hrt,[["__scopeId","data-v-af274ce0"]]),qrt={class:"rule-library-debug"},Urt={class:"debug-info"},jrt={key:0,class:"more-info"},Yrt={__name:"RuleLibraryViewDebug",setup(e){const t=Z([]),a=Z(!1),r=Z(!1),n=Z("未知"),i=Z(""),o=Z(null),s=async()=>{r.value=!0;try{const u=await fetch("http://localhost:3001/api/rules"),h=await u.json();u.ok&&h.success?(n.value="正常",dt.success("API连接正常")):(n.value="异常",i.value=h.message||"未知错误",dt.error("API连接异常: "+i.value))}catch(u){n.value="连接失败",i.value=u.message,dt.error("API连接失败: "+u.message)}finally{r.value=!1}},l=async()=>{a.value=!0,i.value="";try{console.log("开始加载规则...");const u=await fetch("http://localhost:3001/api/rules"),h=await u.json();if(console.log("API响应:",h),u.ok&&h.success)t.value=h.data||[],n.value="正常",dt.success(`成功加载 ${t.value.length} 条规则`);else throw new Error(h.message||"获取规则失败")}catch(u){console.error("加载规则失败:",u),i.value=u.message,n.value="异常",dt.error("加载规则失败: "+u.message)}finally{a.value=!1}},c=async u=>{var h;u.testing=!0;try{const f=await(await fetch(`http://localhost:3001/api/rules/test/${u.id}`,{method:"POST"})).json();o.value={ruleName:u.intent_name,...f},f.success?dt.success(`规则测试成功: 返回${f.data.resultCount}条数据`):dt.warning(`规则测试失败: ${((h=f.data)==null?void 0:h.error)||"未知错误"}`)}catch(d){o.value={ruleName:u.intent_name,error:d.message},dt.error("测试失败: "+d.message)}finally{u.testing=!1}};return Ra(()=>{s(),l()}),(u,h)=>{const d=q("el-button"),f=q("el-card"),p=q("el-table-column"),g=q("el-tag"),v=q("el-table"),_=Po("loading");return J(),ht("div",qrt,[h[9]||(h[9]=S("div",{class:"page-header"},[S("h1",null,"🔍 规则库调试页面"),S("p",null,"用于诊断规则库页面的问题")],-1)),m(f,{class:"debug-card"},{header:x(()=>h[0]||(h[0]=[S("span",null,"调试信息",-1)])),default:x(()=>[S("div",Urt,[S("p",null,[h[1]||(h[1]=S("strong",null,"API状态:",-1)),F(" "+N(n.value),1)]),S("p",null,[h[2]||(h[2]=S("strong",null,"规则数量:",-1)),F(" "+N(t.value.length),1)]),S("p",null,[h[3]||(h[3]=S("strong",null,"加载状态:",-1)),F(" "+N(a.value?"加载中":"已完成"),1)]),S("p",null,[h[4]||(h[4]=S("strong",null,"错误信息:",-1)),F(" "+N(i.value||"无"),1)])]),m(d,{onClick:s,loading:r.value},{default:x(()=>h[5]||(h[5]=[F("测试API连接")])),_:1,__:[5]},8,["loading"]),m(d,{onClick:l,loading:a.value},{default:x(()=>h[6]||(h[6]=[F("重新加载规则")])),_:1,__:[6]},8,["loading"])]),_:1}),Bo((J(),Jt(f,{class:"rules-card"},{header:x(()=>[S("span",null,"规则列表 ("+N(t.value.length)+"条)",1)]),default:x(()=>[m(v,{data:t.value.slice(0,20),style:{width:"100%"}},{default:x(()=>[m(p,{prop:"id",label:"ID",width:"80"}),m(p,{prop:"intent_name",label:"规则名称","min-width":"200"}),m(p,{prop:"description",label:"描述","min-width":"250","show-overflow-tooltip":""}),m(p,{prop:"status",label:"状态",width:"100"},{default:x(({row:y})=>[m(g,{type:y.status==="active"?"success":"danger",size:"small"},{default:x(()=>[F(N(y.status==="active"?"活跃":"禁用"),1)]),_:2},1032,["type"])]),_:1}),m(p,{prop:"priority",label:"优先级",width:"100"}),m(p,{label:"操作",width:"150"},{default:x(({row:y})=>[m(d,{size:"small",onClick:b=>c(y),loading:y.testing},{default:x(()=>h[7]||(h[7]=[F(" 测试 ")])),_:2,__:[7]},1032,["onClick","loading"])]),_:1})]),_:1},8,["data"]),t.value.length>20?(J(),ht("div",jrt,[S("p",null,"显示前20条规则，总共"+N(t.value.length)+"条",1)])):te("",!0)]),_:1})),[[_,a.value]]),o.value?(J(),Jt(f,{key:0,class:"test-result-card"},{header:x(()=>h[8]||(h[8]=[S("span",null,"测试结果",-1)])),default:x(()=>[S("pre",null,N(JSON.stringify(o.value,null,2)),1)]),_:1})):te("",!0)])}}},Xrt=ca(Yrt,[["__scopeId","data-v-3a7a5453"]]),Zrt={class:"api-test-page"},Krt={class:"test-section"},Jrt={key:0,class:"result"},Qrt={key:1,class:"error"},tnt={class:"test-section"},ent={key:0,class:"result"},ant={key:1,class:"error"},rnt={__name:"ApiTestPage",setup(e){const t=Z(!1),a=Z(null),r=Z(null),n=Z(!1),i=Z(null),o=Z(null),s=async()=>{t.value=!0,a.value=null,r.value=null;try{console.log("测试规则API...");const c=await fetch("/api/assistant/rules");if(console.log("响应状态:",c.status),c.ok){const u=await c.json();a.value=u,console.log("规则API测试成功:",u)}else throw new Error(`HTTP ${c.status}: ${c.statusText}`)}catch(c){console.error("规则API测试失败:",c),r.value=c.message}finally{t.value=!1}},l=async()=>{n.value=!0,i.value=null,o.value=null;try{console.log("测试查询API...");const c=await fetch("/api/assistant/query",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:"测试查询",useRealData:!0,testMode:!0})});if(console.log("响应状态:",c.status),c.ok){const u=await c.json();i.value=u,console.log("查询API测试成功:",u)}else throw new Error(`HTTP ${c.status}: ${c.statusText}`)}catch(c){console.error("查询API测试失败:",c),o.value=c.message}finally{n.value=!1}};return(c,u)=>{const h=q("el-button");return J(),ht("div",Zrt,[u[8]||(u[8]=S("h1",null,"API连接测试",-1)),S("div",Krt,[u[3]||(u[3]=S("h2",null,"规则API测试",-1)),m(h,{onClick:s,loading:t.value},{default:x(()=>u[0]||(u[0]=[F("测试规则API")])),_:1,__:[0]},8,["loading"]),a.value?(J(),ht("div",Jrt,[u[1]||(u[1]=S("h3",null,"结果:",-1)),S("pre",null,N(JSON.stringify(a.value,null,2)),1)])):te("",!0),r.value?(J(),ht("div",Qrt,[u[2]||(u[2]=S("h3",null,"错误:",-1)),S("pre",null,N(r.value),1)])):te("",!0)]),S("div",tnt,[u[7]||(u[7]=S("h2",null,"查询API测试",-1)),m(h,{onClick:l,loading:n.value},{default:x(()=>u[4]||(u[4]=[F("测试查询API")])),_:1,__:[4]},8,["loading"]),i.value?(J(),ht("div",ent,[u[5]||(u[5]=S("h3",null,"结果:",-1)),S("pre",null,N(JSON.stringify(i.value,null,2)),1)])):te("",!0),o.value?(J(),ht("div",ant,[u[6]||(u[6]=S("h3",null,"错误:",-1)),S("pre",null,N(o.value),1)])):te("",!0)])])}}},nnt=ca(rnt,[["__scopeId","data-v-8026d0af"]]),int={class:"test-rules-page"},ont={class:"stats-section"},snt={class:"rules-section"},lnt={__name:"TestRulesPage",setup(e){const t=Z([]),a=Z(!1),r=Yt(()=>t.value.filter(i=>i.status==="active")),n=async()=>{a.value=!0;try{console.log("开始加载规则...");const o="http://localhost:3002/api/rules";console.log("请求URL:",o);const s=await fetch(o);if(console.log("API响应状态:",s.status),s.ok){const l=await s.json();if(console.log("API响应数据:",l),l.success&&Array.isArray(l.data))t.value=l.data,dt.success(`成功加载 ${t.value.length} 条规则`);else throw new Error("API返回数据格式错误")}else throw new Error(`HTTP ${s.status}: ${s.statusText}`)}catch(i){console.error("加载规则失败:",i),dt.error("加载规则失败: "+i.message)}finally{a.value=!1}};return Ra(()=>{n()}),(i,o)=>{const s=q("el-button"),l=q("el-card"),c=q("el-table-column"),u=q("el-tag"),h=q("el-table");return J(),ht("div",int,[o[3]||(o[3]=S("h1",null,"规则测试页面",-1)),S("div",ont,[m(l,null,{default:x(()=>[o[1]||(o[1]=S("h2",null,"规则统计",-1)),S("p",null,"总规则数: "+N(t.value.length),1),S("p",null,"活跃规则数: "+N(r.value.length),1),S("p",null,"加载状态: "+N(a.value?"加载中...":"加载完成"),1),m(s,{onClick:n,loading:a.value},{default:x(()=>o[0]||(o[0]=[F("重新加载规则")])),_:1,__:[0]},8,["loading"])]),_:1,__:[1]})]),S("div",snt,[m(l,null,{default:x(()=>[o[2]||(o[2]=S("h2",null,"规则列表",-1)),m(h,{data:t.value,border:"",style:{width:"100%"},"max-height":"600"},{default:x(()=>[m(c,{prop:"id",label:"ID",width:"80"}),m(c,{prop:"intent_name",label:"规则名称","min-width":"200"}),m(c,{prop:"description",label:"描述","min-width":"300"}),m(c,{prop:"priority",label:"优先级",width:"100"}),m(c,{prop:"status",label:"状态",width:"100"},{default:x(({row:d})=>[m(u,{type:d.status==="active"?"success":"info"},{default:x(()=>[F(N(d.status),1)]),_:2},1032,["type"])]),_:1})]),_:1},8,["data"])]),_:1,__:[2]})])])}}},cnt=ca(lnt,[["__scopeId","data-v-b1f88d90"]]),unt={class:"exception-page-container"},hnt={class:"filter-header"},dnt={class:"actions"},fnt={class:"statistics-cards"},pnt={class:"stat-content"},gnt={class:"stat-icon"},vnt={class:"stat-info"},mnt={class:"stat-value"},ynt={class:"stat-subtext"},_nt={class:"stat-content"},bnt={class:"stat-icon"},xnt={class:"stat-info"},Snt={class:"stat-value"},wnt={class:"stat-subtext"},Cnt={class:"stat-content"},Tnt={class:"stat-icon"},Ant={class:"stat-info"},knt={class:"stat-value"},Dnt={class:"stat-subtext"},Lnt={class:"stat-content"},Int={class:"stat-icon"},Mnt={class:"stat-info"},Ent={class:"stat-value"},Rnt={class:"stat-subtext"},Pnt={class:"pagination-container"},Bnt={key:0,class:"exception-detail"},Ont={class:"detail-header"},Nnt={class:"header-info"},$nt={class:"header-meta"},Fnt={class:"header-status"},znt={key:0},Vnt={key:2,class:"image-list"},Gnt={class:"detail-actions"},Hnt={class:"dialog-footer"},Wnt={__name:"MaterialExceptionPage",setup(e){hl();const t=Z(!0),a=fa({materialCode:"",materialName:"",batchNo:"",exceptionType:"",status:""}),r=Z(1),n=Z(20),i=Z(0),o=fa({monthlyExceptions:127,monthlyTrend:-12.5,pendingExceptions:43,pendingRate:22.4,inProgressExceptions:65,avgProcessingTime:48.5,resolvedExceptions:92,resolveRate:47.9}),s=Z([]),l=Yt(()=>{const E=(r.value-1)*n.value,D=E+n.value;return s.value.slice(E,D)}),c=Z(!1),u=Z(null),h=Z(!1),d=fa({exceptionId:"",currentStatus:"",newStatus:"",responsiblePerson:"",resolutionStep:"",estimatedResolutionDate:null}),f=async()=>{t.value=!0;try{setTimeout(()=>{const E=p();s.value=E,i.value=E.length,t.value=!1},500)}catch(E){console.error("获取异常数据失败:",E),dt.error("获取异常数据失败，请重试"),t.value=!1}},p=()=>{const E=["质量不合格","外观缺陷","尺寸异常","参数偏差","功能异常"],D=["高","中","低"],O=["待处理","处理中","已解决"],B=["质检部","物料部","生产部","工程部","供应商"],R=[];for(let V=1;V<=192;V++){const z=E[Math.floor(Math.random()*E.length)],W=D[Math.floor(Math.random()*D.length)],it=O[Math.floor(Math.random()*O.length)],ot=B[Math.floor(Math.random()*B.length)];R.push({id:`EX${String(V).padStart(6,"0")}`,date:new Date(2025,Math.floor(Math.random()*3),Math.floor(Math.random()*28)+1).toLocaleDateString("zh-CN"),materialCode:`M${String(Math.floor(Math.random()*9e4)+1e4)}`,materialName:`物料${V}`,batchNumber:`B${String(Math.floor(Math.random()*9e4)+1e4)}`,anomalyType:z,severity:W,status:it,responsibleDepartment:ot,responsiblePerson:it!=="待处理"?`员工${Math.floor(Math.random()*100)}`:"",description:`${z}：${W}级异常，详细描述信息。影响生产线运行，需要${it==="已解决"?"已处理":"尽快处理"}。`,resolutionSteps:it!=="待处理"?["确认异常原因并记录","联系相关部门协调处理",it==="已解决"?"完成异常处理并验证":"正在处理中..."]:[],images:[]})}return R},g=()=>{const E=s.value.filter(D=>{let O=!0;return a.materialCode&&!D.materialCode.includes(a.materialCode)&&(O=!1),a.materialName&&!D.materialName.includes(a.materialName)&&(O=!1),a.batchNo&&!D.batchNumber.includes(a.batchNo)&&(O=!1),a.exceptionType&&D.anomalyType!==a.exceptionType&&(O=!1),a.status&&D.status!==a.status&&(O=!1),O});s.value=E,i.value=E.length,r.value=1},v=()=>{Object.keys(a).forEach(E=>{a[E]=""}),f()},_=E=>{switch(E){case"质量不合格":return"danger";case"外观缺陷":return"warning";case"尺寸异常":return"info";case"参数偏差":return"primary";case"功能异常":return"error";default:return"info"}},y=E=>{switch(E){case"高":return"danger";case"中":return"warning";case"低":return"info";default:return"info"}},b=E=>{switch(E){case"待处理":return"danger";case"处理中":return"warning";case"已解决":return"success";default:return"info"}},w=E=>{const D=["primary","success","warning","danger","info"];return D[E%D.length]},T=E=>{n.value=E,r.value=1},C=E=>{r.value=E},A=E=>{u.value=E,c.value=!0},k=E=>{d.exceptionId=E.id,d.currentStatus=E.status,d.newStatus="",d.responsiblePerson=E.responsiblePerson||"",d.resolutionStep="",d.estimatedResolutionDate=null,h.value=!0},L=()=>{if(!d.newStatus){dt.warning("请选择新状态");return}const E=s.value.findIndex(D=>D.id===d.exceptionId);E!==-1&&(s.value[E].status=d.newStatus,d.responsiblePerson&&(s.value[E].responsiblePerson=d.responsiblePerson),d.resolutionStep&&(s.value[E].resolutionSteps||(s.value[E].resolutionSteps=[]),s.value[E].resolutionSteps.push(d.resolutionStep)),dt.success(`异常 ${d.exceptionId} 的状态已更新为 ${d.newStatus}`),h.value=!1,u.value&&u.value.id===d.exceptionId&&(u.value={...s.value[E]}))},M=()=>{dt({message:"异常记录导出功能正在开发中...",type:"info"})},P=()=>{dt({message:"异常报告生成功能正在开发中...",type:"info"})};return Ra(()=>{f()}),(E,D)=>{const O=q("el-icon"),B=q("el-button"),R=q("el-input"),V=q("el-form-item"),z=q("el-option"),W=q("el-select"),it=q("el-form"),ot=q("el-card"),xt=q("el-col"),j=q("el-row"),mt=q("el-table-column"),Tt=q("el-tag"),Mt=q("el-table"),et=q("el-pagination"),ut=q("el-divider"),at=q("el-descriptions-item"),Q=q("el-descriptions"),bt=q("el-timeline-item"),Dt=q("el-timeline"),Et=q("el-empty"),ft=q("el-image"),$t=q("el-dialog"),Pt=q("el-date-picker"),qt=Po("loading");return J(),ht("div",unt,[m(ot,{class:"filter-card",shadow:"hover"},{default:x(()=>[S("div",hnt,[D[14]||(D[14]=S("h2",null,"物料异常管理",-1)),S("div",dnt,[m(B,{type:"primary",onClick:M},{default:x(()=>[m(O,null,{default:x(()=>[m(kt(Ii))]),_:1}),D[12]||(D[12]=F("导出异常记录 "))]),_:1,__:[12]}),m(B,{type:"success",onClick:P},{default:x(()=>[m(O,null,{default:x(()=>[m(kt(qr))]),_:1}),D[13]||(D[13]=F("生成异常报告 "))]),_:1,__:[13]})])]),m(it,{inline:!0,model:a,class:"filter-form"},{default:x(()=>[m(V,{label:"物料编码"},{default:x(()=>[m(R,{modelValue:a.materialCode,"onUpdate:modelValue":D[0]||(D[0]=nt=>a.materialCode=nt),placeholder:"输入物料编码",clearable:""},null,8,["modelValue"])]),_:1}),m(V,{label:"物料名称"},{default:x(()=>[m(R,{modelValue:a.materialName,"onUpdate:modelValue":D[1]||(D[1]=nt=>a.materialName=nt),placeholder:"输入物料名称",clearable:""},null,8,["modelValue"])]),_:1}),m(V,{label:"批次号"},{default:x(()=>[m(R,{modelValue:a.batchNo,"onUpdate:modelValue":D[2]||(D[2]=nt=>a.batchNo=nt),placeholder:"输入批次号",clearable:""},null,8,["modelValue"])]),_:1}),m(V,{label:"异常类型"},{default:x(()=>[m(W,{modelValue:a.exceptionType,"onUpdate:modelValue":D[3]||(D[3]=nt=>a.exceptionType=nt),placeholder:"选择异常类型",clearable:""},{default:x(()=>[m(z,{label:"质量不合格",value:"质量不合格"}),m(z,{label:"外观缺陷",value:"外观缺陷"}),m(z,{label:"尺寸异常",value:"尺寸异常"}),m(z,{label:"参数偏差",value:"参数偏差"}),m(z,{label:"功能异常",value:"功能异常"})]),_:1},8,["modelValue"])]),_:1}),m(V,{label:"状态"},{default:x(()=>[m(W,{modelValue:a.status,"onUpdate:modelValue":D[4]||(D[4]=nt=>a.status=nt),placeholder:"选择状态",clearable:""},{default:x(()=>[m(z,{label:"待处理",value:"待处理"}),m(z,{label:"处理中",value:"处理中"}),m(z,{label:"已解决",value:"已解决"})]),_:1},8,["modelValue"])]),_:1}),m(V,null,{default:x(()=>[m(B,{type:"primary",onClick:g},{default:x(()=>D[15]||(D[15]=[F("查询")])),_:1,__:[15]}),m(B,{onClick:v},{default:x(()=>D[16]||(D[16]=[F("重置")])),_:1,__:[16]})]),_:1})]),_:1},8,["model"])]),_:1}),S("div",fnt,[m(j,{gutter:20},{default:x(()=>[m(xt,{xs:24,sm:12,md:6},{default:x(()=>[m(ot,{class:"stat-card warning",shadow:"hover"},{default:x(()=>[S("div",pnt,[S("div",gnt,[m(O,null,{default:x(()=>[m(kt(Ro))]),_:1})]),S("div",vnt,[D[17]||(D[17]=S("div",{class:"stat-title"},"当月异常数",-1)),S("div",mnt,N(o.monthlyExceptions),1),S("div",ynt,"较上月 "+N(o.monthlyTrend>0?"+":"")+N(o.monthlyTrend)+"%",1)])])]),_:1})]),_:1}),m(xt,{xs:24,sm:12,md:6},{default:x(()=>[m(ot,{class:"stat-card danger",shadow:"hover"},{default:x(()=>[S("div",_nt,[S("div",bnt,[m(O,null,{default:x(()=>[m(kt(zC))]),_:1})]),S("div",xnt,[D[18]||(D[18]=S("div",{class:"stat-title"},"待处理异常",-1)),S("div",Snt,N(o.pendingExceptions),1),S("div",wnt,"占比 "+N(o.pendingRate)+"%",1)])])]),_:1})]),_:1}),m(xt,{xs:24,sm:12,md:6},{default:x(()=>[m(ot,{class:"stat-card primary",shadow:"hover"},{default:x(()=>[S("div",Cnt,[S("div",Tnt,[m(O,null,{default:x(()=>[m(kt(I3))]),_:1})]),S("div",Ant,[D[19]||(D[19]=S("div",{class:"stat-title"},"处理中异常",-1)),S("div",knt,N(o.inProgressExceptions),1),S("div",Dnt,"平均处理时间: "+N(o.avgProcessingTime)+"h",1)])])]),_:1})]),_:1}),m(xt,{xs:24,sm:12,md:6},{default:x(()=>[m(ot,{class:"stat-card success",shadow:"hover"},{default:x(()=>[S("div",Lnt,[S("div",Int,[m(O,null,{default:x(()=>[m(kt(wc))]),_:1})]),S("div",Mnt,[D[20]||(D[20]=S("div",{class:"stat-title"},"已解决异常",-1)),S("div",Ent,N(o.resolvedExceptions),1),S("div",Rnt,"解决率: "+N(o.resolveRate)+"%",1)])])]),_:1})]),_:1})]),_:1})]),m(ot,{class:"exception-list-card",shadow:"hover"},{default:x(()=>[Bo((J(),Jt(Mt,{data:l.value,style:{width:"100%"},border:"",stripe:"","highlight-current-row":""},{default:x(()=>[m(mt,{prop:"id",label:"异常ID",width:"120"}),m(mt,{prop:"date",label:"发现日期",width:"120",sortable:""}),m(mt,{prop:"materialCode",label:"物料编码",width:"120"}),m(mt,{prop:"materialName",label:"物料名称",width:"150"}),m(mt,{prop:"batchNumber",label:"批次号",width:"120"}),m(mt,{prop:"anomalyType",label:"异常类型",width:"120"},{default:x(nt=>[m(Tt,{type:_(nt.row.anomalyType)},{default:x(()=>[F(N(nt.row.anomalyType),1)]),_:2},1032,["type"])]),_:1}),m(mt,{prop:"severity",label:"严重程度",width:"100"},{default:x(nt=>[m(Tt,{type:y(nt.row.severity),effect:"dark"},{default:x(()=>[F(N(nt.row.severity),1)]),_:2},1032,["type"])]),_:1}),m(mt,{prop:"status",label:"状态",width:"100"},{default:x(nt=>[m(Tt,{type:b(nt.row.status)},{default:x(()=>[F(N(nt.row.status),1)]),_:2},1032,["type"])]),_:1}),m(mt,{prop:"responsibleDepartment",label:"责任部门",width:"120"}),m(mt,{label:"操作",fixed:"right",width:"180"},{default:x(nt=>[m(B,{type:"primary",link:"",size:"small",onClick:H=>A(nt.row)},{default:x(()=>[m(O,null,{default:x(()=>[m(kt(ru))]),_:1}),D[21]||(D[21]=F(" 详情 "))]),_:2,__:[21]},1032,["onClick"]),m(B,{type:"success",link:"",size:"small",onClick:H=>k(nt.row)},{default:x(()=>[m(O,null,{default:x(()=>[m(kt(j_))]),_:1}),D[22]||(D[22]=F(" 更新状态 "))]),_:2,__:[22]},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[qt,t.value]]),S("div",Pnt,[m(et,{background:"",layout:"total, sizes, prev, pager, next, jumper",total:i.value,"page-sizes":[10,20,50,100],"page-size":n.value,"current-page":r.value,onSizeChange:T,onCurrentChange:C},null,8,["total","page-size","current-page"])])]),_:1}),m($t,{modelValue:c.value,"onUpdate:modelValue":D[5]||(D[5]=nt=>c.value=nt),title:"物料异常详情",width:"70%","destroy-on-close":""},{default:x(()=>[u.value?(J(),ht("div",Bnt,[S("div",Ont,[S("div",Nnt,[S("h2",null,N(u.value.materialName)+" ("+N(u.value.materialCode)+")",1),S("div",$nt,[S("span",null,"异常ID: "+N(u.value.id),1),S("span",null,"批次号: "+N(u.value.batchNumber),1),S("span",null,"发现日期: "+N(u.value.date),1)])]),S("div",Fnt,[m(Tt,{type:b(u.value.status),size:"large"},{default:x(()=>[F(N(u.value.status),1)]),_:1},8,["type"])])]),m(ut),m(Q,{title:"异常信息",column:2,border:""},{default:x(()=>[m(at,{label:"异常类型"},{default:x(()=>[m(Tt,{type:_(u.value.anomalyType)},{default:x(()=>[F(N(u.value.anomalyType),1)]),_:1},8,["type"])]),_:1}),m(at,{label:"严重程度"},{default:x(()=>[m(Tt,{type:y(u.value.severity),effect:"dark"},{default:x(()=>[F(N(u.value.severity),1)]),_:1},8,["type"])]),_:1}),m(at,{label:"责任部门"},{default:x(()=>[F(N(u.value.responsibleDepartment),1)]),_:1}),m(at,{label:"责任人"},{default:x(()=>[F(N(u.value.responsiblePerson||"未指定"),1)]),_:1}),m(at,{label:"异常描述",span:2},{default:x(()=>[F(N(u.value.description),1)]),_:1})]),_:1}),m(ut),D[26]||(D[26]=S("h4",null,"解决方案",-1)),u.value.resolutionSteps&&u.value.resolutionSteps.length>0?(J(),ht("div",znt,[m(Dt,null,{default:x(()=>[(J(!0),ht(ye,null,Se(u.value.resolutionSteps,(nt,H)=>(J(),Jt(bt,{key:H,type:w(H),timestamp:`步骤 ${H+1}`},{default:x(()=>[F(N(nt),1)]),_:2},1032,["type","timestamp"]))),128))]),_:1})])):(J(),Jt(Et,{key:1,description:"暂无解决方案"})),m(ut),D[27]||(D[27]=S("h4",null,"相关图片",-1)),u.value.images&&u.value.images.length>0?(J(),ht("div",Vnt,[(J(!0),ht(ye,null,Se(u.value.images,(nt,H)=>(J(),Jt(ft,{key:H,src:nt,fit:"cover","preview-src-list":u.value.images,class:"exception-image"},null,8,["src","preview-src-list"]))),128))])):(J(),Jt(Et,{key:3,description:"暂无相关图片"})),S("div",Gnt,[m(B,{type:"primary"},{default:x(()=>[m(O,null,{default:x(()=>[m(kt(qr))]),_:1}),D[23]||(D[23]=F(" 生成异常报告 "))]),_:1,__:[23]}),m(B,{type:"success"},{default:x(()=>[m(O,null,{default:x(()=>[m(kt(j_))]),_:1}),D[24]||(D[24]=F(" 更新状态 "))]),_:1,__:[24]}),m(B,{type:"warning"},{default:x(()=>[m(O,null,{default:x(()=>[m(kt(FC))]),_:1}),D[25]||(D[25]=F(" 创建跟进任务 "))]),_:1,__:[25]})])])):te("",!0)]),_:1},8,["modelValue"]),m($t,{modelValue:h.value,"onUpdate:modelValue":D[11]||(D[11]=nt=>h.value=nt),title:"更新异常状态",width:"50%","destroy-on-close":""},{footer:x(()=>[S("span",Hnt,[m(B,{onClick:D[10]||(D[10]=nt=>h.value=!1)},{default:x(()=>D[28]||(D[28]=[F("取消")])),_:1,__:[28]}),m(B,{type:"primary",onClick:L},{default:x(()=>D[29]||(D[29]=[F("确认")])),_:1,__:[29]})])]),default:x(()=>[m(it,{model:d,"label-width":"120px"},{default:x(()=>[m(V,{label:"当前状态"},{default:x(()=>[m(Tt,{type:b(d.currentStatus)},{default:x(()=>[F(N(d.currentStatus),1)]),_:1},8,["type"])]),_:1}),m(V,{label:"新状态"},{default:x(()=>[m(W,{modelValue:d.newStatus,"onUpdate:modelValue":D[6]||(D[6]=nt=>d.newStatus=nt),placeholder:"选择新状态"},{default:x(()=>[m(z,{label:"待处理",value:"待处理"}),m(z,{label:"处理中",value:"处理中"}),m(z,{label:"已解决",value:"已解决"})]),_:1},8,["modelValue"])]),_:1}),m(V,{label:"责任人"},{default:x(()=>[m(R,{modelValue:d.responsiblePerson,"onUpdate:modelValue":D[7]||(D[7]=nt=>d.responsiblePerson=nt),placeholder:"输入责任人"},null,8,["modelValue"])]),_:1}),m(V,{label:"解决步骤"},{default:x(()=>[m(R,{type:"textarea",modelValue:d.resolutionStep,"onUpdate:modelValue":D[8]||(D[8]=nt=>d.resolutionStep=nt),rows:"4",placeholder:"请输入解决步骤或进展说明"},null,8,["modelValue"])]),_:1}),m(V,{label:"预计解决日期"},{default:x(()=>[m(Pt,{modelValue:d.estimatedResolutionDate,"onUpdate:modelValue":D[9]||(D[9]=nt=>d.estimatedResolutionDate=nt),type:"date",placeholder:"选择预计解决日期"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"])])}}},qnt=ca(Wnt,[["__scopeId","data-v-4b9dd773"]]),di={RULES:{LIST:"/api/rules",CATEGORIES:"/api/rules/categories",STATS:"/api/rules/stats",TEST:e=>`/api/rules/test/${e}`,TEST_ALL:"/api/rules/test-all"},DATA:{STATUS:"/api/data/status",NLP_RULES:"/api/data/nlp-rules",SYNC:"/api/data/sync",ONLINE_TRACKING:"/api/data/online-tracking"},ASSISTANT:{QUERY:"/api/assistant/query",CHAT:"/api/assistant/chat",RULES:"/api/rules"}};class ji{}class Unt{async getBatches(t={}){try{const a=await fn.get(di.batches.list,t);if(!a.success)throw new Error(a.error||"获取批次列表失败");return ji.transformBatchList(a.data)}catch(a){throw console.error("获取批次列表错误:",a),a}}async getBatchById(t){try{if(!t)throw new Error("批次ID不能为空");const a=await fn.get(di.batches.detail(t));if(!a.success)throw new Error(a.error||"获取批次详情失败");return ji.transformBatch(a.data)}catch(a){throw console.error("获取批次详情错误:",a),a}}async createBatch(t){try{if(!t)throw new Error("批次数据不能为空");const a=ji.transformToApiFormat(t,"batch"),r=await fn.post(di.batches.create,a);if(!r.success)throw new Error(r.error||"创建批次失败");return ji.transformBatch(r.data)}catch(a){throw console.error("创建批次错误:",a),a}}async updateBatch(t,a){try{if(!t)throw new Error("批次ID不能为空");if(!a)throw new Error("批次数据不能为空");const r=ji.transformToApiFormat(a,"batch"),n=await fn.put(di.batches.update(t),r);if(!n.success)throw new Error(n.error||"更新批次失败");return ji.transformBatch(n.data)}catch(r){throw console.error("更新批次错误:",r),r}}async deleteBatch(t){try{if(!t)throw new Error("批次ID不能为空");const a=await fn.delete(di.batches.delete(t));if(!a.success)throw new Error(a.error||"删除批次失败");return!0}catch(a){throw console.error("删除批次错误:",a),a}}async getBatchActivities(t){try{if(!t)throw new Error("批次ID不能为空");const a=await fn.get(di.batches.activities(t));if(!a.success)throw new Error(a.error||"获取批次活动记录失败");return a.data}catch(a){throw console.error("获取批次活动记录错误:",a),a}}async getBatchesByIds(t){try{if(!t||!Array.isArray(t)||t.length===0)return[];const a={ids:t.join(",")},r=await fn.get(di.batches.list,a);if(!r.success)throw new Error(r.error||"批量获取批次失败");return ji.transformBatchList(r.data)}catch(a){throw console.error("批量获取批次错误:",a),a}}async getBatchStatistics(){try{const t=await fn.get(`${di.batches.list}/statistics`);if(!t.success)throw new Error(t.error||"获取批次统计信息失败");return t.data}catch(t){throw console.error("获取批次统计信息错误:",t),t}}validateBatchData(t){if(!t)return{valid:!1,errors:["批次数据不能为空"]};const a=[];return t.batchNo||a.push("批次号不能为空"),t.materialCode||a.push("物料代码不能为空"),(t.quantity===void 0||t.quantity<=0)&&a.push("批次数量必须大于0"),{valid:a.length===0,errors:a}}}const jnt=new Unt,Ynt={class:"batch-management-container"},Xnt={class:"page-header"},Znt={class:"actions"},Knt={class:"filter-section"},Jnt={class:"date-filter"},Qnt={class:"exception-popover"},tit={key:0,class:"popover-footer"},eit={key:1},ait={class:"exception-popover"},rit={key:0,class:"popover-footer"},nit={key:1},iit={class:"table-actions"},oit={class:"pagination-container"},sit={key:0,class:"batch-detail-container"},lit={class:"card-header"},cit={class:"detail-item"},uit={class:"detail-value"},hit={class:"detail-item"},dit={class:"detail-value"},fit={class:"detail-item"},pit={class:"detail-value"},git={class:"detail-item"},vit={class:"detail-value"},mit={class:"detail-item"},yit={class:"detail-value"},_it={class:"detail-item"},bit={class:"detail-value"},xit={class:"detail-item"},Sit={class:"detail-value"},wit={class:"detail-item"},Cit={class:"detail-value"},Tit={class:"detail-item"},Ait={class:"detail-value"},kit={class:"detail-item"},Dit={class:"detail-item"},Lit={class:"detail-value"},Iit={class:"detail-item"},Mit={class:"detail-value"},Eit={class:"quality-chart-container mt-20"},Rit={class:"detail-item"},Pit={class:"detail-value"},Bit={class:"detail-item"},Oit={class:"detail-value"},Nit={class:"detail-item"},$it={class:"detail-value"},Fit={class:"detail-item"},zit={class:"detail-value"},Vit={class:"detail-item"},Git={class:"detail-value"},Hit={class:"detail-item"},Wit={class:"detail-value"},qit={class:"detail-item"},Uit={class:"detail-value"},jit={class:"detail-item"},Yit={class:"detail-value"},Xit={class:"detail-item"},Zit={class:"detail-value"},Kit={class:"detail-item"},Jit={class:"detail-value"},Qit={class:"detail-item"},tot={class:"detail-value"},eot={class:"detail-item"},aot={class:"detail-value"},rot={class:"detail-item"},not={class:"detail-value"},iot={class:"detail-item"},oot={class:"detail-value"},sot={class:"detail-item"},lot={class:"detail-value"},cot={class:"detail-item"},uot={class:"detail-value"},hot={class:"detail-item"},dot={class:"detail-value"},fot={class:"detail-item"},pot={class:"detail-value"},got={class:"batch-timeline mt-20"},vot={key:0,class:"activity-details"},mot={class:"defect-trend-chart-container mt-20"},yot={key:0,class:"traceability-container"},_ot={class:"batch-lifecycle"},bot={key:0,class:"activity-details"},xot={key:0,class:"quality-stats"},Sot={class:"quality-chart-container"},wot={class:"quality-metrics"},Cot={class:"metric-card"},Tot={class:"metric-comparison"},Aot={class:"metric-card"},kot={class:"metric-value"},Dot={class:"metric-comparison"},Lot={class:"metric-card"},Iot={class:"metric-value"},Mot={class:"metric-comparison"},Eot={key:0},Rot={class:"defect-trend-chart-container",style:{"margin-top":"20px"}},Pot={__name:"BatchManagement",setup(e){hl();const t=Z([]),a=Z(!1);Z(!1);const r=Z(!1),n=Z(!1),i=Z(null),o=Z([]),s=Z(1),l=Z(10),c=Z(0),u=Z("activities"),h=Z(null),d=Z(null),f=Z(null);Z([]);const p=Z(null),g=Z(null),v=Z(null),_=Z(null),y=Z({supplier:"",dateRange:[],keyword:"",sortBy:"createdDesc"});Z([{content:"批次创建",timestamp:"2023-06-01 09:30",type:"primary",color:"#0bbd87",size:"large"},{content:"入库检验",timestamp:"2023-06-02 11:20",type:"success",details:"抽检合格率 98.5%，检验人员: 张工"},{content:"质量抽检",timestamp:"2023-06-03 14:00",type:"warning",details:"发现2个小问题，已要求供应商改进"},{content:"生产投料",timestamp:"2023-06-10 08:15",type:"info"},{content:"用于产品组装",timestamp:"2023-06-15 13:45",type:"success"}]),Z([{product_id:"P2023061501",product_name:"iPhone 14 Pro Max 后盖组件",production_date:"2023-06-15",status:"completed"},{product_id:"P2023061502",product_name:"iPhone 14 Pro 后盖组件",production_date:"2023-06-15",status:"completed"},{product_id:"P2023061601",product_name:"iPhone 14 后盖组件",production_date:"2023-06-16",status:"in_progress"}]);const b=Yt(()=>{let nt=[...o.value];if(y.value.category&&(nt=nt.filter(tt=>tt.category_id===y.value.category)),y.value.supplier&&(nt=nt.filter(tt=>tt.supplier_id===y.value.supplier)),y.value.dateRange&&y.value.dateRange.length===2){const tt=new Date(y.value.dateRange[0]),Rt=new Date(y.value.dateRange[1]);nt=nt.filter(lt=>{const X=new Date(lt.created_date);return X>=tt&&X<=Rt})}if(y.value.keyword){const tt=y.value.keyword.toLowerCase();nt=nt.filter(Rt=>Rt.batch_id.toLowerCase().includes(tt)||Rt.material_code.toLowerCase().includes(tt)||Rt.material_name.toLowerCase().includes(tt))}switch(y.value.sortBy){case"createdDesc":nt.sort((tt,Rt)=>new Date(Rt.created_date)-new Date(tt.created_date));break;case"createdAsc":nt.sort((tt,Rt)=>new Date(tt.created_date)-new Date(Rt.created_date));break;case"defectDesc":nt.sort((tt,Rt)=>Rt.defect_rate-tt.defect_rate);break;case"defectAsc":nt.sort((tt,Rt)=>tt.defect_rate-Rt.defect_rate);break}c.value=nt.length;const H=(s.value-1)*l.value;return nt.slice(H,H+l.value)});function w(nt){l.value=nt,console.log("每页显示数量变更为:",nt)}function T(nt){s.value=nt,console.log("当前页码变更为:",nt)}function C(){s.value=1,dt.success("已应用筛选条件")}function A(){y.value={category:"",supplier:"",dateRange:[],keyword:"",sortBy:"createdDesc"},s.value=1,dt.info("已重置筛选条件")}function k({column:nt,prop:H,order:tt}){console.log("排序变更:",{column:nt,prop:H,order:tt})}function L(nt){if(nt==null)return"low";const H=typeof nt=="string"?parseFloat(nt):nt;return isNaN(H)?"low":H>.025?"high":H>.01?"medium":"low"}function M(){if(!i.value)return"";const nt=i.value.defect_rate*100;return nt<.5?"优于行业平均水平80%":nt<1?"优于行业平均水平50%":nt<1.5?"接近行业平均水平":nt<2?"略低于行业平均水平":"显著低于行业平均水平"}function P(nt){switch(nt){case"pending":return"info";case"processing":return"warning";case"passed":return"success";case"rejected":return"danger";case"used":return"primary";default:return"info"}}function E(nt){switch(nt){case"pending":return"待检验";case"processing":return"检验中";case"passed":return"合格";case"rejected":return"不合格";case"used":return"已使用";default:return"未知"}}function D(nt){switch(nt){case"high":return"danger";case"medium":return"warning";case"low":return"success";default:return"info"}}function O(nt){switch(nt){case"high":return"高风险";case"medium":return"中风险";case"low":return"低风险";default:return"未知"}}function B(nt){switch(nt){case"completed":return"success";case"in_progress":return"warning";case"planned":return"info";default:return"info"}}function R(nt){i.value=nt,findMaterialTestData(nt.material_code),findMaterialInventoryData(nt.material_code),findMaterialProductionData(nt.material_code),at(nt),n.value=!0,$a(()=>{try{et(),ut()}catch(H){console.error("初始化图表失败:",H)}})}function V(){if(!i.value)return"未知";switch(i.value.status){case"passed":return"合格";case"rejected":return"NG";case"pending":return"待检验";case"processing":return"检验中";case"used":return"已使用";default:return"未知"}}function z(){if(!i.value)return 1;switch(i.value.status){case"pending":return 1;case"processing":return 2;case"passed":return 3;case"rejected":return 3;case"used":return 4;default:return 1}}function W(nt){var H,tt,Rt;if(!i.value)return"";switch(nt){case"created":return i.value.created_date||"-";case"inspected":return((H=i.value.test)==null?void 0:H.testDate)||"-";case"production":return((tt=i.value.production)==null?void 0:tt.useTime)||"-";case"final":return(Rt=i.value.production)!=null&&Rt.useTime?new Date(new Date(i.value.production.useTime).getTime()+864e5).toISOString().split("T")[0]:"-";default:return"-"}}function it(){if(!i.value)return[];const nt=[],H=i.value;if(nt.push({content:"批次创建入库",timestamp:H.created_date||new Date().toISOString().split("T")[0],type:"primary",color:"#0bbd87",size:"large",details:`批次号: ${H.batch_id}, 物料编码: ${H.material_code}, 数量: ${H.quantity}`}),H.test||f.value){const tt=H.test||f.value,Rt=tt.result||H.status,lt=Rt==="passed"?"success":Rt==="rejected"?"danger":"warning";nt.push({content:"质量检验",timestamp:tt.testDate||H.created_date,type:lt,details:`检验结果: ${E(Rt)}, 不良率: ${(H.defect_rate*100).toFixed(2)}%, ${tt.defectDesc||H.notes||""}`})}if(H.production||d.value){const tt=H.production||d.value;nt.push({content:"生产投料使用",timestamp:tt.useTime||H.created_date,type:"info",details:`工厂: ${tt.factory||"未记录"}, 产线: ${tt.line||"未记录"}, 项目: ${tt.project||tt.project_display||"未记录"}`});const Rt=new Date(tt.useTime||H.created_date),lt=new Date(Rt.getTime()+864e5);nt.push({content:"生产完成",timestamp:lt.toISOString().split("T")[0],type:"success"})}return nt}function ot(){if(!i.value)return[];if(i.value.relatedProducts&&i.value.relatedProducts.length>0)return i.value.relatedProducts;if(i.value.production||d.value){const nt=i.value.production||d.value,H=new Date(nt.useTime||i.value.created_date),tt=Math.floor(Math.random()*3)+1,Rt=[];for(let lt=0;lt<tt;lt++){const At=new Date(H.getTime()+lt*864e5).toISOString().split("T")[0],U=At.replace(/-/g,"").substring(2);let st="";switch(lt){case 0:st="completed";break;case 1:st="in_progress";break;default:st="pending"}Rt.push({product_id:`P${U}${String(lt+1).padStart(2,"0")}`,product_name:`${nt.project||"产品"} ${i.value.material_name} 组件`,production_date:At,status:st})}return Rt}return[]}function xt(){if(!i.value)return"未知";const nt=i.value.defect_rate;return nt>.025?"不合格":nt>.01?"有条件合格":"合格"}function j(){if(!i.value)return 0;let H=100-i.value.defect_rate*1e3;return H=Math.max(0,Math.min(100,H)),Math.round(H)}function mt(){if(!i.value)return"";const nt=j();return nt>=90?"供应商质量表现优秀":nt>=80?"供应商质量表现良好":nt>=70?"供应商质量表现一般":"供应商质量需改进"}function Tt(nt){return nt?nt.risk_level==="high"?"建议暂停使用该批次物料，进行全面质量评估并联系供应商进行质量复核。":nt.risk_level==="medium"?"建议加强该批次物料的质量监控，对生产过程进行重点监控，并考虑增加抽检频率。":"该批次物料风险较低，可正常使用，建议按照常规质量管理流程进行监控。":"无法评估风险，请检查批次数据。"}function Mt(){if(!i.value)return[];if(i.value.onlineRecords&&i.value.onlineRecords.length>0)return i.value.onlineRecords;if(i.value.production||d.value){const nt=i.value.production||d.value;return[{factory:nt.factory||"未知工厂",line:nt.line||"未知产线",project:nt.project||nt.project_display||"未知项目",onlineDate:nt.useTime||i.value.created_date,quantity:nt.quantity||i.value.quantity||0,defectRate:i.value.defect_rate*100,defect:nt.defect||i.value.notes||""}]}return[]}const et=()=>{if(!i.value||!v.value)return;const nt=v.value,H=xr(nt),tt={title:{text:"批次质量缺陷分布",left:"center"},tooltip:{trigger:"item",formatter:"{a} <br/>{b} : {c} ({d}%)"},legend:{orient:"vertical",left:"left",data:["外观缺陷","功能缺陷","尺寸偏差","材料问题","其他"]},series:[{name:"缺陷类型",type:"pie",radius:"55%",center:["50%","60%"],data:[{value:Math.round(i.value.defect_rate*100*.4),name:"外观缺陷"},{value:Math.round(i.value.defect_rate*100*.25),name:"功能缺陷"},{value:Math.round(i.value.defect_rate*100*.15),name:"尺寸偏差"},{value:Math.round(i.value.defect_rate*100*.1),name:"材料问题"},{value:Math.round(i.value.defect_rate*100*.1),name:"其他"}],emphasis:{itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]};H.setOption(tt)},ut=()=>{if(!i.value||!_.value)return;const nt=_.value,H=xr(nt),tt=Mt();let Rt=[],lt=[];if(tt.length>0)tt.sort((At,U)=>new Date(At.onlineDate)-new Date(U.onlineDate)),Rt=tt.map(At=>At.onlineDate),lt=tt.map(At=>At.defectRate);else{const At=new Date;for(let st=6;st>=0;st--){const _t=new Date(At);_t.setDate(At.getDate()-st),Rt.push(_t.toISOString().split("T")[0])}const U=i.value.defect_rate;lt=Rt.map(()=>{const st=(Math.random()*.6-.3)*U;return(U+st)*100})}const X={title:{text:"批次不良率趋势",left:"center"},tooltip:{trigger:"axis"},xAxis:{type:"category",data:Rt},yAxis:{type:"value",axisLabel:{formatter:"{value}%"}},series:[{name:"不良率",type:"line",data:lt.map(At=>At.toFixed(2)),markLine:{data:[{name:"警戒线",yAxis:2.5,lineStyle:{color:"#FF0000"}},{name:"注意线",yAxis:1,lineStyle:{color:"#FFCC00"}}]}}]};H.setOption(X)};function at(nt){if(!nt||nt.relatedProducts&&nt.relatedProducts.length>0)return;const H=ot();H.length>0&&(nt.relatedProducts=H)}const Q=async()=>{a.value=!0;try{let nt=wh.getInventoryData();if(!nt||nt.length===0){console.warn("库存数据为空，请在管理工具中手动生成数据。"),dt.warning('未检测到库存数据，请在"管理工具"中生成数据');return}const H=await wh.getFactoryData(),tt=wh.getLabData(),Rt=Array.isArray(H)?H:[],lt=Array.isArray(tt)?tt:[],X=bt(nt,Rt,lt);o.value=X}catch(nt){dt.error("获取批次数据失败"),console.error(nt)}finally{a.value=!1}},bt=(nt,H,tt)=>{const Rt=new Map;return nt.forEach(lt=>{const X=lt.batchId||lt.batchNo;X&&(Rt.has(X)||Rt.set(X,{batch_id:X,material_code:lt.materialCode,material_name:lt.materialName,supplier_name:lt.supplier,quantity:lt.quantity,created_date:lt.storageDate||lt.inboundTime||new Date().toISOString().split("T")[0],status:lt.status,risk_level:lt.riskLevel||"low",defect_rate:0,line_exceptions:0,test_exceptions:0,line_exception_details:[],test_exception_details:[]}))}),H.forEach(lt=>{const X=lt.batchId||lt.batchNo;if(!X||!Rt.has(X))return;const At=Rt.get(X),U=parseFloat(lt.defectRate||0),st=parseInt(lt.exceptionCount||0);(U>0||st>0)&&(At.line_exceptions+=1,At.line_exception_details.push({date:lt.onlineDate||lt.useTime,location:`${lt.factory||""} ${lt.line||""}`,defect_rate:U,exception_count:st}),At.defect_rate=Math.max(At.defect_rate,U))}),tt.forEach(lt=>{const X=lt.batchId||lt.batchNo;if(!X||!Rt.has(X))return;const At=Rt.get(X),U=(lt.result||"").toLowerCase();(U==="ng"||U.includes("不合格")||U.includes("fail"))&&(At.test_exceptions+=1,At.test_exception_details.push({date:lt.testDate,test_item:lt.testItem||"常规检测",result:lt.result,defect_desc:lt.defectDesc||"未记录"}),At.defect_rate=Math.max(At.defect_rate,.01))}),Array.from(Rt.values())},Dt=()=>{Q(),dt.success("批次数据已刷新")};Ra(()=>{Q(),t.value=jnt.getSuppliers()});const Et=nt=>{i.value=nt,yn.confirm(`<div class="risk-analysis-dialog">
      <h3>批次风险分析</h3>
      <div class="risk-level">
        <span class="risk-label">风险等级:</span>
        <span class="risk-value ${ft(nt.risk_level)}">${O(nt.risk_level)}</span>
      </div>
      <div class="risk-factors">
        <h4>风险因素:</h4>
        <ul>
          <li>产线异常: <strong>${nt.line_exceptions}</strong> 次</li>
          <li>测试异常: <strong>${nt.test_exceptions}</strong> 次</li>
          <li>不良率: <strong>${(nt.defect_rate*100).toFixed(2)}%</strong></li>
        </ul>
      </div>
      <div class="risk-recommendation">
        <h4>风险建议:</h4>
        <p>${Tt(nt)}</p>
      </div>
    </div>`,"批次风险分析",{confirmButtonText:"确定",cancelButtonText:"取消",dangerouslyUseHTMLString:!0,customClass:"risk-analysis-message-box"}).catch(()=>{})},ft=nt=>{switch(nt){case"high":return"risk-high";case"medium":return"risk-medium";case"low":return"risk-low";default:return"risk-low"}},$t=nt=>{i.value=nt,findMaterialTestData(nt.material_code),findMaterialInventoryData(nt.material_code),findMaterialProductionData(nt.material_code),yn.confirm(`<div class="traceability-dialog">
      <h3>批次追溯信息</h3>
      <div class="batch-info">
        <el-descriptions :column="2" border>
          <el-descriptions-item label="批次号">{{ selectedBatch.batch_id }}</el-descriptions-item>
          <el-descriptions-item label="物料编码">{{ selectedBatch.material_code }}</el-descriptions-item>
          <el-descriptions-item label="物料名称">{{ selectedBatch.material_name }}</el-descriptions-item>
          <el-descriptions-item label="供应商">{{ selectedBatch.supplier_name }}</el-descriptions-item>
          <el-descriptions-item label="数量">{{ selectedBatch.quantity }}</el-descriptions-item>
          <el-descriptions-item label="入库日期">{{ formatDate(selectedBatch.created_date) }}</el-descriptions-item>
          <el-descriptions-item label="生产日期">{{ formatDate(selectedBatch.production_date) }}</el-descriptions-item>
        </el-descriptions>
      </div>
      <div class="traceability-timeline">
        <el-timeline>
          ${Pt(nt)}
        </el-timeline>
      </div>
    </div>`,"批次追溯",{confirmButtonText:"确定",cancelButtonText:"取消",dangerouslyUseHTMLString:!0,customClass:"traceability-message-box",width:"700px"}).catch(()=>{})},Pt=nt=>{let H="";return H+=`
    <div class="el-timeline-item">
      <div class="el-timeline-item__tail"></div>
      <div class="el-timeline-item__node el-timeline-item__node--normal el-timeline-item__node--primary"></div>
      <div class="el-timeline-item__wrapper">
        <div class="el-timeline-item__timestamp is-top">${qt(nt.created_date)}</div>
        <div class="el-timeline-item__content">
          <h4>入库记录</h4>
          <p>批次${nt.batch_id}入库，数量: ${nt.quantity}</p>
        </div>
      </div>
    </div>
  `,nt.test_exception_details&&nt.test_exception_details.length>0&&nt.test_exception_details.forEach((tt,Rt)=>{H+=`
        <div class="el-timeline-item">
          <div class="el-timeline-item__tail"></div>
          <div class="el-timeline-item__node el-timeline-item__node--normal el-timeline-item__node--warning"></div>
          <div class="el-timeline-item__wrapper">
            <div class="el-timeline-item__timestamp is-top">${qt(tt.date)}</div>
            <div class="el-timeline-item__content">
              <h4>测试异常 #${Rt+1}</h4>
              <p>测试项目: ${tt.test_item}</p>
              <p>结果: ${tt.result}</p>
              <p>不良现象: ${tt.defect_desc}</p>
            </div>
          </div>
        </div>
      `}),nt.line_exception_details&&nt.line_exception_details.length>0&&nt.line_exception_details.forEach((tt,Rt)=>{H+=`
        <div class="el-timeline-item">
          <div class="el-timeline-item__tail"></div>
          <div class="el-timeline-item__node el-timeline-item__node--normal el-timeline-item__node--danger"></div>
          <div class="el-timeline-item__wrapper">
            <div class="el-timeline-item__timestamp is-top">${qt(tt.date)}</div>
            <div class="el-timeline-item__content">
              <h4>产线异常 #${Rt+1}</h4>
              <p>工厂: ${tt.location}</p>
              <p>不良率: ${tt.defect_rate.toFixed(2)}%</p>
              <p>异常数量: ${tt.exception_count}</p>
            </div>
          </div>
        </div>
      `}),H},qt=nt=>{if(!nt)return"未设置";if(typeof nt=="number"){const H=new Date(nt);return`${H.getFullYear()}-${String(H.getMonth()+1).padStart(2,"0")}-${String(H.getDate()).padStart(2,"0")}`}if(typeof nt=="string"&&nt.includes("T"))return nt.split("T")[0];try{const H=new Date(nt);return isNaN(H.getTime())?nt:`${H.getFullYear()}-${String(H.getMonth()+1).padStart(2,"0")}-${String(H.getDate()).padStart(2,"0")}`}catch{return nt}};return(nt,H)=>{const tt=q("Refresh"),Rt=q("el-icon"),lt=q("el-button"),X=q("el-option"),At=q("el-select"),U=q("el-col"),st=q("el-date-picker"),_t=q("el-row"),vt=q("Search"),Ct=q("el-input"),St=q("el-table-column"),Gt=q("el-tag"),Xt=q("el-popover"),zt=q("el-table"),xe=q("el-pagination"),Kt=q("el-card"),Ie=q("el-step"),Ne=q("el-steps"),xa=q("el-timeline-item"),we=q("el-timeline"),Ee=q("el-dialog"),Lt=q("el-descriptions-item"),he=q("el-descriptions"),je=q("el-tab-pane"),$=q("el-empty"),rt=q("el-divider"),K=q("el-tabs"),yt=Po("loading");return J(),ht("div",Ynt,[S("div",Xnt,[H[8]||(H[8]=S("div",{class:"title-section"},[S("h2",null,"物料批次管理"),S("span",{class:"subtitle"},"管理所有物料批次的生命周期和质量状态")],-1)),S("div",Znt,[m(lt,{type:"primary",onClick:Dt,loading:a.value},{default:x(()=>[m(Rt,null,{default:x(()=>[m(tt)]),_:1}),H[7]||(H[7]=F(" 刷新数据 "))]),_:1,__:[7]},8,["loading"])])]),S("div",Knt,[m(_t,{gutter:20},{default:x(()=>[m(U,{span:12},{default:x(()=>[m(At,{modelValue:y.value.supplier,"onUpdate:modelValue":H[0]||(H[0]=Y=>y.value.supplier=Y),placeholder:"供应商",clearable:""},{default:x(()=>[m(X,{label:"全部",value:""}),(J(!0),ht(ye,null,Se(t.value,Y=>(J(),Jt(X,{key:Y.id,label:Y.name,value:Y.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),m(U,{span:12},{default:x(()=>[S("div",Jnt,[m(st,{modelValue:y.value.dateRange,"onUpdate:modelValue":H[1]||(H[1]=Y=>y.value.dateRange=Y),type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",format:"YYYY-MM-DD","value-format":"YYYY-MM-DD",style:{width:"100%"}},null,8,["modelValue"])])]),_:1})]),_:1}),m(_t,{gutter:20,class:"filter-row"},{default:x(()=>[m(U,{span:8},{default:x(()=>[m(Ct,{modelValue:y.value.keyword,"onUpdate:modelValue":H[2]||(H[2]=Y=>y.value.keyword=Y),placeholder:"批次号/物料编码",clearable:""},{prefix:x(()=>[m(Rt,null,{default:x(()=>[m(vt)]),_:1})]),_:1},8,["modelValue"])]),_:1}),m(U,{span:8},{default:x(()=>[m(At,{modelValue:y.value.sortBy,"onUpdate:modelValue":H[3]||(H[3]=Y=>y.value.sortBy=Y),placeholder:"创建时间（新→旧）"},{default:x(()=>[m(X,{label:"创建时间（新→旧）",value:"createdDesc"}),m(X,{label:"创建时间（旧→新）",value:"createdAsc"}),m(X,{label:"不良率（高→低）",value:"defectDesc"}),m(X,{label:"不良率（低→高）",value:"defectAsc"})]),_:1},8,["modelValue"])]),_:1}),m(U,{span:8,class:"filter-buttons"},{default:x(()=>[m(lt,{type:"primary",onClick:C},{default:x(()=>[m(Rt,null,{default:x(()=>[m(vt)]),_:1}),H[9]||(H[9]=F(" 搜索 "))]),_:1,__:[9]}),m(lt,{onClick:A},{default:x(()=>[m(Rt,null,{default:x(()=>[m(tt)]),_:1}),H[10]||(H[10]=F(" 重置 "))]),_:1,__:[10]})]),_:1})]),_:1})]),Bo((J(),Jt(zt,{data:b.value,border:"",stripe:"",style:{width:"100%"},onSortChange:k},{default:x(()=>[m(St,{prop:"batch_id",label:"批次号",sortable:"",width:"120"}),m(St,{prop:"material_code",label:"物料编码",width:"120"}),m(St,{prop:"material_name",label:"物料名称",width:"150"}),m(St,{prop:"supplier_name",label:"供应商",width:"150"}),m(St,{prop:"quantity",label:"数量",sortable:"",width:"80"}),m(St,{prop:"created_date",label:"入库日期",sortable:"",width:"120"},{default:x(Y=>[F(N(qt(Y.row.created_date)),1)]),_:1}),m(St,{prop:"line_exceptions",label:"产线异常",sortable:"",width:"120",align:"center"},{default:x(Y=>[Y.row.line_exceptions>0?(J(),Jt(Xt,{key:0,placement:"top",trigger:"hover",width:350},{reference:x(()=>[m(Gt,{type:"danger",effect:"dark",style:{cursor:"pointer"}},{default:x(()=>[F(N(Y.row.line_exceptions)+" 次 ",1)]),_:2},1024)]),default:x(()=>[S("div",Qnt,[H[11]||(H[11]=S("div",{class:"popover-title"},"产线异常详情",-1)),S("ul",null,[(J(!0),ht(ye,null,Se(Y.row.line_exception_details.slice(0,5),(Zt,Ye)=>(J(),ht("li",{key:Ye},[S("strong",null,N(Zt.date)+":",1),F(" 在 "+N(Zt.location)+" 发现异常, 不良率 "+N((Zt.defect_rate*100).toFixed(2))+"% ",1)]))),128))]),Y.row.line_exception_details.length>5?(J(),ht("div",tit," ...等共 "+N(Y.row.line_exception_details.length)+" 条记录 ",1)):te("",!0)])]),_:2},1024)):(J(),ht("span",eit,"无"))]),_:1}),m(St,{prop:"test_exceptions",label:"测试异常",sortable:"",width:"120",align:"center"},{default:x(Y=>[Y.row.test_exceptions>0?(J(),Jt(Xt,{key:0,placement:"top",trigger:"hover",width:350},{reference:x(()=>[m(Gt,{type:"warning",effect:"dark",style:{cursor:"pointer"}},{default:x(()=>[F(N(Y.row.test_exceptions)+" 次 ",1)]),_:2},1024)]),default:x(()=>[S("div",ait,[H[12]||(H[12]=S("div",{class:"popover-title"},"测试异常详情",-1)),S("ul",null,[(J(!0),ht(ye,null,Se(Y.row.test_exception_details.slice(0,5),(Zt,Ye)=>(J(),ht("li",{key:Ye},[S("strong",null,N(Zt.date)+":",1),F(" "+N(Zt.test_item)+" - "+N(Zt.defect_desc),1)]))),128))]),Y.row.test_exception_details.length>5?(J(),ht("div",rit," ...等共 "+N(Y.row.test_exception_details.length)+" 条记录 ",1)):te("",!0)])]),_:2},1024)):(J(),ht("span",nit,"无"))]),_:1}),m(St,{label:"操作",width:"220",fixed:"right"},{default:x(Y=>[S("div",iit,[m(lt,{type:"primary",link:"",size:"small",onClick:Zt=>R(Y.row)},{default:x(()=>H[13]||(H[13]=[F(" 详情 ")])),_:2,__:[13]},1032,["onClick"]),m(lt,{type:"warning",link:"",size:"small",onClick:Zt=>Et(Y.row)},{default:x(()=>H[14]||(H[14]=[F(" 风险分析 ")])),_:2,__:[14]},1032,["onClick"]),m(lt,{type:"info",link:"",size:"small",onClick:Zt=>$t(Y.row)},{default:x(()=>H[15]||(H[15]=[F(" 追溯 ")])),_:2,__:[15]},1032,["onClick"])])]),_:1})]),_:1},8,["data"])),[[yt,a.value]]),S("div",oit,[m(xe,{background:"",layout:"total, sizes, prev, pager, next, jumper",total:c.value,"page-size":l.value,"page-sizes":[10,20,50,100],"current-page":s.value,onSizeChange:w,onCurrentChange:T},null,8,["total","page-size","current-page"])]),m(Ee,{modelValue:n.value,"onUpdate:modelValue":H[4]||(H[4]=Y=>n.value=Y),title:"批次详情汇总",width:"80%","destroy-on-close":""},{default:x(()=>[i.value?(J(),ht("div",sit,[m(Kt,{class:"detail-card"},{header:x(()=>[S("div",lit,[H[16]||(H[16]=S("h3",null,"批次基本信息",-1)),m(Gt,{type:P(i.value.status),size:"large"},{default:x(()=>[F(N(E(i.value.status)),1)]),_:1},8,["type"])])]),default:x(()=>[m(_t,{gutter:20},{default:x(()=>[m(U,{span:8},{default:x(()=>[S("div",cit,[H[17]||(H[17]=S("span",{class:"detail-label"},"批次号",-1)),S("span",uit,N(i.value.batch_id),1)])]),_:1}),m(U,{span:8},{default:x(()=>[S("div",hit,[H[18]||(H[18]=S("span",{class:"detail-label"},"物料编码",-1)),S("span",dit,N(i.value.material_code),1)])]),_:1}),m(U,{span:8},{default:x(()=>[S("div",fit,[H[19]||(H[19]=S("span",{class:"detail-label"},"物料名称",-1)),S("span",pit,N(i.value.material_name),1)])]),_:1})]),_:1}),m(_t,{gutter:20,class:"mt-20"},{default:x(()=>[m(U,{span:8},{default:x(()=>[S("div",git,[H[20]||(H[20]=S("span",{class:"detail-label"},"供应商",-1)),S("span",vit,N(i.value.supplier_name),1)])]),_:1}),m(U,{span:8},{default:x(()=>[S("div",mit,[H[21]||(H[21]=S("span",{class:"detail-label"},"数量",-1)),S("span",yit,N(i.value.quantity),1)])]),_:1}),m(U,{span:8},{default:x(()=>[S("div",_it,[H[22]||(H[22]=S("span",{class:"detail-label"},"入库日期",-1)),S("span",bit,N(qt(i.value.created_date)),1)])]),_:1})]),_:1}),m(_t,{gutter:20,class:"mt-20"},{default:x(()=>[m(U,{span:8},{default:x(()=>[S("div",xit,[H[23]||(H[23]=S("span",{class:"detail-label"},"生产日期",-1)),S("span",Sit,N(qt(i.value.production_date)),1)])]),_:1}),m(U,{span:8},{default:x(()=>[S("div",wit,[H[24]||(H[24]=S("span",{class:"detail-label"},"风险评级",-1)),S("span",Cit,[m(Gt,{type:D(i.value.risk_level),effect:"dark"},{default:x(()=>[F(N(O(i.value.risk_level)),1)]),_:1},8,["type"])])])]),_:1}),m(U,{span:8},{default:x(()=>[S("div",Tit,[H[25]||(H[25]=S("span",{class:"detail-label"},"批次备注",-1)),S("span",Ait,N(i.value.notes||"无"),1)])]),_:1})]),_:1})]),_:1}),m(Kt,{class:"detail-card"},{header:x(()=>H[26]||(H[26]=[S("div",{class:"card-header"},[S("h3",null,"质量状态")],-1)])),default:x(()=>[m(_t,{gutter:20},{default:x(()=>[m(U,{span:8},{default:x(()=>[S("div",kit,[H[27]||(H[27]=S("span",{class:"detail-label"},"不良率",-1)),S("span",{class:ve(["detail-value",L(i.value.defect_rate)])},N((i.value.defect_rate*100).toFixed(2))+"% ",3)])]),_:1}),m(U,{span:8},{default:x(()=>[S("div",Dit,[H[28]||(H[28]=S("span",{class:"detail-label"},"质量状态",-1)),S("span",Lit,N(xt()),1)])]),_:1}),m(U,{span:8},{default:x(()=>[S("div",Iit,[H[29]||(H[29]=S("span",{class:"detail-label"},"供应商质量评分",-1)),S("span",Mit,N(j()),1)])]),_:1})]),_:1}),S("div",Eit,[S("div",{ref_key:"detailQualityChartRef",ref:v,style:{width:"100%",height:"300px"}},null,512)])]),_:1}),h.value||i.value.inventory?(J(),Jt(Kt,{key:0,class:"detail-card"},{header:x(()=>H[30]||(H[30]=[S("div",{class:"card-header"},[S("h3",null,"库存信息")],-1)])),default:x(()=>[m(_t,{gutter:20},{default:x(()=>[m(U,{span:8},{default:x(()=>{var Y;return[S("div",Rit,[H[31]||(H[31]=S("span",{class:"detail-label"},"库存数量",-1)),S("span",Pit,N(((Y=h.value||i.value.inventory)==null?void 0:Y.remainQuantity)||0),1)])]}),_:1}),m(U,{span:8},{default:x(()=>{var Y;return[S("div",Bit,[H[32]||(H[32]=S("span",{class:"detail-label"},"已用数量",-1)),S("span",Oit,N(((Y=h.value||i.value.inventory)==null?void 0:Y.useQuantity)||0),1)])]}),_:1}),m(U,{span:8},{default:x(()=>{var Y;return[S("div",Nit,[H[33]||(H[33]=S("span",{class:"detail-label"},"入库时间",-1)),S("span",$it,N(qt(((Y=h.value||i.value.inventory)==null?void 0:Y.inboundTime)||i.value.created_date)),1)])]}),_:1})]),_:1}),m(_t,{gutter:20,class:"mt-20"},{default:x(()=>[m(U,{span:8},{default:x(()=>{var Y,Zt;return[S("div",Fit,[H[34]||(H[34]=S("span",{class:"detail-label"},"仓库位置",-1)),S("span",zit,N(((Y=h.value||i.value.inventory)==null?void 0:Y.warehouseLocation)||((Zt=h.value||i.value.inventory)==null?void 0:Zt.location)||"未记录"),1)])]}),_:1}),m(U,{span:8},{default:x(()=>{var Y;return[S("div",Vit,[H[35]||(H[35]=S("span",{class:"detail-label"},"检验员",-1)),S("span",Git,N(((Y=h.value||i.value.inventory)==null?void 0:Y.inspector)||"未记录"),1)])]}),_:1})]),_:1})]),_:1})):te("",!0),d.value||i.value.production?(J(),Jt(Kt,{key:1,class:"detail-card"},{header:x(()=>H[36]||(H[36]=[S("div",{class:"card-header"},[S("h3",null,"产线使用信息")],-1)])),default:x(()=>[m(_t,{gutter:20},{default:x(()=>[m(U,{span:8},{default:x(()=>{var Y;return[S("div",Hit,[H[37]||(H[37]=S("span",{class:"detail-label"},"产线名称",-1)),S("span",Wit,N(((Y=d.value||i.value.production)==null?void 0:Y.line)||"未记录"),1)])]}),_:1}),m(U,{span:8},{default:x(()=>{var Y;return[S("div",qit,[H[38]||(H[38]=S("span",{class:"detail-label"},"工厂",-1)),S("span",Uit,N(((Y=d.value||i.value.production)==null?void 0:Y.factory)||"未记录"),1)])]}),_:1}),m(U,{span:8},{default:x(()=>{var Y;return[S("div",jit,[H[39]||(H[39]=S("span",{class:"detail-label"},"车间",-1)),S("span",Yit,N(((Y=d.value||i.value.production)==null?void 0:Y.workshop)||"未记录"),1)])]}),_:1})]),_:1}),m(_t,{gutter:20,class:"mt-20"},{default:x(()=>[m(U,{span:8},{default:x(()=>{var Y;return[S("div",Xit,[H[40]||(H[40]=S("span",{class:"detail-label"},"使用时间",-1)),S("span",Zit,N(qt(((Y=d.value||i.value.production)==null?void 0:Y.useTime)||i.value.created_date)),1)])]}),_:1}),m(U,{span:8},{default:x(()=>{var Y;return[S("div",Kit,[H[41]||(H[41]=S("span",{class:"detail-label"},"使用数量",-1)),S("span",Jit,N(((Y=d.value||i.value.production)==null?void 0:Y.useQuantity)||i.value.quantity),1)])]}),_:1}),m(U,{span:8},{default:x(()=>{var Y,Zt;return[S("div",Qit,[H[42]||(H[42]=S("span",{class:"detail-label"},"项目",-1)),S("span",tot,N(((Y=d.value||i.value.production)==null?void 0:Y.project)||((Zt=d.value||i.value.production)==null?void 0:Zt.project_display)||"未记录"),1)])]}),_:1})]),_:1})]),_:1})):te("",!0),f.value||i.value.test?(J(),Jt(Kt,{key:2,class:"detail-card"},{header:x(()=>H[43]||(H[43]=[S("div",{class:"card-header"},[S("h3",null,"测试记录信息")],-1)])),default:x(()=>[m(_t,{gutter:20},{default:x(()=>[m(U,{span:8},{default:x(()=>{var Y,Zt;return[S("div",eot,[H[44]||(H[44]=S("span",{class:"detail-label"},"测试编号",-1)),S("span",aot,N(((Y=f.value||i.value.test)==null?void 0:Y.id)||((Zt=f.value||i.value.test)==null?void 0:Zt.testId)||"未记录"),1)])]}),_:1}),m(U,{span:8},{default:x(()=>{var Y;return[S("div",rot,[H[45]||(H[45]=S("span",{class:"detail-label"},"测试日期",-1)),S("span",not,N(qt(((Y=f.value||i.value.test)==null?void 0:Y.testDate)||i.value.created_date)),1)])]}),_:1}),m(U,{span:8},{default:x(()=>{var Y;return[S("div",iot,[H[46]||(H[46]=S("span",{class:"detail-label"},"测试项目",-1)),S("span",oot,N(((Y=f.value||i.value.test)==null?void 0:Y.testItem)||"常规检测"),1)])]}),_:1})]),_:1}),m(_t,{gutter:20,class:"mt-20"},{default:x(()=>[m(U,{span:8},{default:x(()=>{var Y;return[S("div",sot,[H[47]||(H[47]=S("span",{class:"detail-label"},"测试结果",-1)),S("span",lot,[m(Gt,{type:nt.getTestResultType(((Y=f.value||i.value.test)==null?void 0:Y.result)||V())},{default:x(()=>{var Zt;return[F(N(((Zt=f.value||i.value.test)==null?void 0:Zt.result)||V()),1)]}),_:1},8,["type"])])])]}),_:1}),m(U,{span:8},{default:x(()=>{var Y;return[S("div",cot,[H[48]||(H[48]=S("span",{class:"detail-label"},"测试员",-1)),S("span",uot,N(((Y=f.value||i.value.test)==null?void 0:Y.tester)||"未记录"),1)])]}),_:1}),m(U,{span:8},{default:x(()=>{var Y;return[S("div",hot,[H[49]||(H[49]=S("span",{class:"detail-label"},"审核员",-1)),S("span",dot,N(((Y=f.value||i.value.test)==null?void 0:Y.reviewer)||"未记录"),1)])]}),_:1})]),_:1}),m(_t,{gutter:20,class:"mt-20"},{default:x(()=>[m(U,{span:24},{default:x(()=>{var Y;return[S("div",fot,[H[50]||(H[50]=S("span",{class:"detail-label"},"不良现象",-1)),S("span",pot,N(((Y=f.value||i.value.test)==null?void 0:Y.defectDesc)||i.value.notes||"无"),1)])]}),_:1})]),_:1})]),_:1})):te("",!0),m(Kt,{class:"detail-card"},{header:x(()=>H[51]||(H[51]=[S("div",{class:"card-header"},[S("h3",null,"批次生命周期")],-1)])),default:x(()=>[m(Ne,{active:z(),"finish-status":"success",class:"batch-lifecycle-steps"},{default:x(()=>[m(Ie,{title:"创建入库",description:W("created")},null,8,["description"]),m(Ie,{title:"质量检验",description:W("inspected")},null,8,["description"]),m(Ie,{title:"生产上线",description:W("production")},null,8,["description"]),m(Ie,{title:"最终检测",description:W("final")},null,8,["description"])]),_:1},8,["active"]),S("div",got,[m(we,null,{default:x(()=>[(J(!0),ht(ye,null,Se(it(),(Y,Zt)=>(J(),Jt(xa,{key:Zt,timestamp:Y.timestamp,type:Y.type,color:Y.color,size:Y.size},{default:x(()=>[F(N(Y.content)+" ",1),Y.details?(J(),ht("div",vot,N(Y.details),1)):te("",!0)]),_:2},1032,["timestamp","type","color","size"]))),128))]),_:1})])]),_:1}),Mt().length>0?(J(),Jt(Kt,{key:3,class:"detail-card"},{header:x(()=>H[52]||(H[52]=[S("div",{class:"card-header"},[S("h3",null,"上线不良率")],-1)])),default:x(()=>[m(zt,{data:Mt(),border:"",style:{width:"100%"}},{default:x(()=>[m(St,{prop:"factory",label:"工厂",width:"100"}),m(St,{prop:"line",label:"产线",width:"120"}),m(St,{prop:"project",label:"项目",width:"150"}),m(St,{prop:"onlineDate",label:"上线日期",width:"150"}),m(St,{prop:"quantity",label:"数量",width:"80"}),m(St,{label:"不良率",width:"100"},{default:x(Y=>[S("span",{class:ve(L(Y.row.defectRate/100))},N(Y.row.defectRate.toFixed(2))+"% ",3)]),_:1}),m(St,{prop:"defect",label:"不良现象"})]),_:1},8,["data"]),S("div",mot,[S("div",{ref_key:"detailDefectTrendChartRef",ref:_,style:{width:"100%",height:"300px"}},null,512)])]),_:1})):te("",!0),ot().length>0?(J(),Jt(Kt,{key:4,class:"detail-card"},{header:x(()=>H[53]||(H[53]=[S("div",{class:"card-header"},[S("h3",null,"关联产品信息")],-1)])),default:x(()=>[m(zt,{data:ot(),border:"",style:{width:"100%"}},{default:x(()=>[m(St,{prop:"product_id",label:"产品ID"}),m(St,{prop:"product_name",label:"产品名称"}),m(St,{prop:"production_date",label:"生产日期"}),m(St,{prop:"status",label:"状态"},{default:x(Y=>[m(Gt,{type:B(Y.row.status)},{default:x(()=>[F(N(Y.row.status==="completed"?"已完成":Y.row.status==="in_progress"?"生产中":Y.row.status==="pending"?"待生产":Y.row.status),1)]),_:2},1032,["type"])]),_:1}),m(St,{label:"操作",width:"150"},{default:x(Y=>[m(lt,{type:"primary",size:"small",onClick:Zt=>nt.viewProductDetail(Y.row)},{default:x(()=>H[54]||(H[54]=[F(" 查看产品 ")])),_:2,__:[54]},1032,["onClick"])]),_:1})]),_:1},8,["data"])]),_:1})):te("",!0)])):te("",!0)]),_:1},8,["modelValue"]),m(Ee,{modelValue:r.value,"onUpdate:modelValue":H[6]||(H[6]=Y=>r.value=Y),title:"批次追溯",width:"80%"},{default:x(()=>[i.value?(J(),ht("div",yot,[m(he,{title:"批次基本信息",column:3,border:""},{default:x(()=>[m(Lt,{label:"批次号"},{default:x(()=>[F(N(i.value.batch_id),1)]),_:1}),m(Lt,{label:"物料编码"},{default:x(()=>[F(N(i.value.material_code),1)]),_:1}),m(Lt,{label:"物料名称"},{default:x(()=>[F(N(i.value.material_name),1)]),_:1}),m(Lt,{label:"供应商"},{default:x(()=>[F(N(i.value.supplier_name),1)]),_:1}),m(Lt,{label:"数量"},{default:x(()=>[F(N(i.value.quantity),1)]),_:1}),m(Lt,{label:"入库日期"},{default:x(()=>[F(N(qt(i.value.created_date)),1)]),_:1}),m(Lt,{label:"生产日期"},{default:x(()=>[F(N(qt(i.value.production_date)),1)]),_:1})]),_:1}),S("div",_ot,[H[55]||(H[55]=S("h4",null,"批次生命周期",-1)),m(Ne,{active:z(),"finish-status":"success"},{default:x(()=>[m(Ie,{title:"创建入库",description:W("created")},null,8,["description"]),m(Ie,{title:"质量检验",description:W("inspected")},null,8,["description"]),m(Ie,{title:"生产上线",description:W("production")},null,8,["description"]),m(Ie,{title:"最终检测",description:W("final")},null,8,["description"])]),_:1},8,["active"])]),m(K,{modelValue:u.value,"onUpdate:modelValue":H[5]||(H[5]=Y=>u.value=Y),class:"material-lifecycle-tabs"},{default:x(()=>[m(je,{label:"批次跟踪记录",name:"activities"},{default:x(()=>[m(we,null,{default:x(()=>[(J(!0),ht(ye,null,Se(it(),(Y,Zt)=>(J(),Jt(xa,{key:Zt,timestamp:Y.timestamp,type:Y.type,color:Y.color,icon:Y.icon,size:Y.size},{default:x(()=>[F(N(Y.content)+" ",1),Y.details?(J(),ht("div",bot,N(Y.details),1)):te("",!0)]),_:2},1032,["timestamp","type","color","icon","size"]))),128))]),_:1})]),_:1}),m(je,{label:"物料库存信息",name:"inventory"},{default:x(()=>[h.value||i.value.inventory?(J(),Jt(he,{key:0,title:"库存详情",column:3,border:""},{default:x(()=>[m(Lt,{label:"物料编码"},{default:x(()=>{var Y;return[F(N(((Y=h.value||i.value.inventory)==null?void 0:Y.materialCode)||i.value.material_code),1)]}),_:1}),m(Lt,{label:"物料名称"},{default:x(()=>{var Y;return[F(N(((Y=h.value||i.value.inventory)==null?void 0:Y.materialName)||i.value.material_name),1)]}),_:1}),m(Lt,{label:"批次号"},{default:x(()=>{var Y;return[F(N(((Y=h.value||i.value.inventory)==null?void 0:Y.batchNo)||i.value.batch_id),1)]}),_:1}),m(Lt,{label:"供应商"},{default:x(()=>{var Y;return[F(N(((Y=h.value||i.value.inventory)==null?void 0:Y.supplier)||i.value.supplier_name),1)]}),_:1}),m(Lt,{label:"库存数量"},{default:x(()=>{var Y;return[F(N(((Y=h.value||i.value.inventory)==null?void 0:Y.remainQuantity)||0),1)]}),_:1}),m(Lt,{label:"已用数量"},{default:x(()=>{var Y;return[F(N(((Y=h.value||i.value.inventory)==null?void 0:Y.useQuantity)||0),1)]}),_:1}),m(Lt,{label:"状态"},{default:x(()=>[F(N(E(i.value.status)),1)]),_:1}),m(Lt,{label:"入库时间"},{default:x(()=>{var Y;return[F(N(((Y=h.value||i.value.inventory)==null?void 0:Y.inboundTime)||i.value.created_date),1)]}),_:1}),m(Lt,{label:"仓库位置"},{default:x(()=>{var Y,Zt;return[F(N(((Y=h.value||i.value.inventory)==null?void 0:Y.warehouseLocation)||((Zt=h.value||i.value.inventory)==null?void 0:Zt.location)||"未记录"),1)]}),_:1}),m(Lt,{label:"检验员"},{default:x(()=>{var Y;return[F(N(((Y=h.value||i.value.inventory)==null?void 0:Y.inspector)||"未记录"),1)]}),_:1})]),_:1})):(J(),Jt($,{key:1,description:"未找到库存信息"}))]),_:1}),m(je,{label:"产线使用信息",name:"production"},{default:x(()=>[d.value||i.value.production?(J(),Jt(he,{key:0,title:"产线使用详情",column:3,border:""},{default:x(()=>[m(Lt,{label:"产线名称"},{default:x(()=>{var Y;return[F(N(((Y=d.value||i.value.production)==null?void 0:Y.line)||"未记录"),1)]}),_:1}),m(Lt,{label:"工厂"},{default:x(()=>{var Y;return[F(N(((Y=d.value||i.value.production)==null?void 0:Y.factory)||"未记录"),1)]}),_:1}),m(Lt,{label:"车间"},{default:x(()=>{var Y;return[F(N(((Y=d.value||i.value.production)==null?void 0:Y.workshop)||"未记录"),1)]}),_:1}),m(Lt,{label:"使用时间"},{default:x(()=>{var Y;return[F(N(((Y=d.value||i.value.production)==null?void 0:Y.useTime)||i.value.created_date),1)]}),_:1}),m(Lt,{label:"使用数量"},{default:x(()=>{var Y;return[F(N(((Y=d.value||i.value.production)==null?void 0:Y.useQuantity)||i.value.quantity),1)]}),_:1}),m(Lt,{label:"状态"},{default:x(()=>[m(Gt,{type:P(i.value.status)},{default:x(()=>[F(N(E(i.value.status)),1)]),_:1},8,["type"])]),_:1}),m(Lt,{label:"质量状态"},{default:x(()=>[F(N(xt()),1)]),_:1}),m(Lt,{label:"风险等级"},{default:x(()=>[m(Gt,{type:D(i.value.risk_level)},{default:x(()=>[F(N(O(i.value.risk_level)),1)]),_:1},8,["type"])]),_:1}),m(Lt,{label:"项目"},{default:x(()=>{var Y,Zt;return[F(N(((Y=d.value||i.value.production)==null?void 0:Y.project)||((Zt=d.value||i.value.production)==null?void 0:Zt.project_display)||"未记录"),1)]}),_:1})]),_:1})):(J(),Jt($,{key:1,description:"未找到产线使用信息"}))]),_:1}),m(je,{label:"测试记录信息",name:"test"},{default:x(()=>[f.value||i.value.test?(J(),Jt(he,{key:0,title:"物料测试详情",column:3,border:""},{default:x(()=>[m(Lt,{label:"测试编号"},{default:x(()=>{var Y,Zt;return[F(N(((Y=f.value||i.value.test)==null?void 0:Y.id)||((Zt=f.value||i.value.test)==null?void 0:Zt.testId)||"未记录"),1)]}),_:1}),m(Lt,{label:"测试日期"},{default:x(()=>{var Y;return[F(N(((Y=f.value||i.value.test)==null?void 0:Y.testDate)||i.value.created_date),1)]}),_:1}),m(Lt,{label:"测试项目"},{default:x(()=>{var Y;return[F(N(((Y=f.value||i.value.test)==null?void 0:Y.testItem)||"常规检测"),1)]}),_:1}),m(Lt,{label:"测试结果"},{default:x(()=>{var Y;return[m(Gt,{type:nt.getTestResultType(((Y=f.value||i.value.test)==null?void 0:Y.result)||V())},{default:x(()=>{var Zt;return[F(N(((Zt=f.value||i.value.test)==null?void 0:Zt.result)||V()),1)]}),_:1},8,["type"])]}),_:1}),m(Lt,{label:"缺陷率"},{default:x(()=>[F(N((i.value.defect_rate*100).toFixed(2))+"%",1)]),_:1}),m(Lt,{label:"测试源"},{default:x(()=>{var Y;return[F(N(((Y=f.value||i.value.test)==null?void 0:Y.testSource)||"常规检测"),1)]}),_:1}),m(Lt,{label:"测试员"},{default:x(()=>{var Y;return[F(N(((Y=f.value||i.value.test)==null?void 0:Y.tester)||"未记录"),1)]}),_:1}),m(Lt,{label:"审核员"},{default:x(()=>{var Y;return[F(N(((Y=f.value||i.value.test)==null?void 0:Y.reviewer)||"未记录"),1)]}),_:1}),m(Lt,{label:"不良现象",span:2},{default:x(()=>{var Y;return[F(N(((Y=f.value||i.value.test)==null?void 0:Y.defectDesc)||i.value.notes||"无"),1)]}),_:1})]),_:1})):(J(),Jt($,{key:1,description:"未找到测试记录信息"}))]),_:1}),m(je,{label:"关联产品信息",name:"products"},{default:x(()=>[m(zt,{data:ot(),border:"",style:{width:"100%"}},{default:x(()=>[m(St,{prop:"product_id",label:"产品ID"}),m(St,{prop:"product_name",label:"产品名称"}),m(St,{prop:"production_date",label:"生产日期"}),m(St,{prop:"status",label:"状态"},{default:x(Y=>[m(Gt,{type:B(Y.row.status)},{default:x(()=>[F(N(Y.row.status==="completed"?"已完成":Y.row.status==="in_progress"?"生产中":Y.row.status==="pending"?"待生产":Y.row.status),1)]),_:2},1032,["type"])]),_:1}),m(St,{label:"操作",width:"150"},{default:x(Y=>[m(lt,{type:"primary",size:"small",onClick:Zt=>nt.viewProductDetail(Y.row)},{default:x(()=>H[56]||(H[56]=[F(" 查看产品 ")])),_:2,__:[56]},1032,["onClick"])]),_:1})]),_:1},8,["data"]),ot().length===0?(J(),Jt($,{key:0,description:"未找到关联产品信息"})):te("",!0)]),_:1}),m(je,{label:"质量统计",name:"quality"},{default:x(()=>[i.value?(J(),ht("div",xot,[S("div",Sot,[S("div",{ref_key:"qualityChartRef",ref:p,id:"qualityDefectChart",style:{width:"100%",height:"300px"}},null,512)]),m(rt,{"content-position":"center"},{default:x(()=>H[57]||(H[57]=[F("质量评估")])),_:1,__:[57]}),S("div",wot,[m(_t,{gutter:20},{default:x(()=>[m(U,{span:8},{default:x(()=>[S("div",Cot,[H[58]||(H[58]=S("div",{class:"metric-title"},"批次不良率",-1)),S("div",{class:ve(["metric-value",L(i.value.defect_rate)])},N((i.value.defect_rate*100).toFixed(2))+"% ",3),S("div",Tot,N(M()),1)])]),_:1}),m(U,{span:8},{default:x(()=>[S("div",Aot,[H[59]||(H[59]=S("div",{class:"metric-title"},"供应商质量评分",-1)),S("div",kot,N(j()),1),S("div",Dot,N(mt()),1)])]),_:1}),m(U,{span:8},{default:x(()=>[S("div",Lot,[H[60]||(H[60]=S("div",{class:"metric-title"},"批次风险评级",-1)),S("div",Iot,[m(Gt,{type:D(i.value.risk_level),effect:"dark",size:"large"},{default:x(()=>[F(N(O(i.value.risk_level)),1)]),_:1},8,["type"])]),S("div",Mot,N(Tt()),1)])]),_:1})]),_:1})]),m(rt,{"content-position":"center"},{default:x(()=>H[61]||(H[61]=[F("上线不良率")])),_:1,__:[61]}),Mt().length>0?(J(),ht("div",Eot,[m(zt,{data:Mt(),border:"",style:{width:"100%","margin-bottom":"20px"}},{default:x(()=>[m(St,{prop:"factory",label:"工厂",width:"100"}),m(St,{prop:"line",label:"产线",width:"120"}),m(St,{prop:"project",label:"项目",width:"150"}),m(St,{prop:"onlineDate",label:"上线日期",width:"150"}),m(St,{prop:"quantity",label:"数量",width:"80"}),m(St,{label:"不良率",width:"100"},{default:x(Y=>[S("span",{class:ve(L(Y.row.defectRate/100))},N(Y.row.defectRate.toFixed(2))+"% ",3)]),_:1}),m(St,{prop:"defect",label:"不良现象"})]),_:1},8,["data"])])):(J(),Jt($,{key:1,description:"未找到上线不良率记录"})),S("div",Rot,[S("div",{ref_key:"defectTrendChartRef",ref:g,id:"defectTrendChart",style:{width:"100%",height:"300px"}},null,512)])])):(J(),Jt($,{key:1,description:"未找到质量统计信息"}))]),_:1})]),_:1},8,["modelValue"])])):te("",!0)]),_:1},8,["modelValue"])])}}},Bot=ca(Pot,[["__scopeId","data-v-8149025b"]]),Oot={class:"data-rules-definition"},Not={class:"page-header"},$ot={class:"header-content"},Fot={class:"title-section"},zot={class:"page-title"},Vot={class:"header-actions"},Got={class:"overview-cards"},Hot={class:"card-content"},Wot={class:"card-icon inventory"},qot={class:"card-content"},Uot={class:"card-icon test"},jot={class:"card-content"},Yot={class:"card-icon production"},Xot={class:"card-content"},Zot={class:"card-icon matching"},Kot={class:"tab-content"},Jot={class:"section-header"},Qot={class:"structure-section"},tst={class:"section-title"},est={class:"structure-section"},ast={class:"section-title"},rst={class:"structure-section"},nst={class:"section-title"},ist={class:"tab-content"},ost={class:"section-header"},sst={class:"generation-flow"},lst={class:"generation-rules"},cst={class:"rule-detail"},ust={class:"data-note"},hst={class:"tab-content"},dst={class:"section-header"},fst={class:"matching-section"},pst={class:"section-title"},gst={class:"matching-section"},vst={class:"section-title"},mst={class:"matching-section"},yst={class:"section-title"},_st={class:"tab-content"},bst={class:"section-header"},xst={class:"consistency-section"},Sst={class:"consistency-section"},wst={class:"rule-detail"},Cst={class:"rule-detail"},Tst={class:"rule-detail"},Ast={class:"rule-detail"},kst={class:"consistency-section"},Dst={__name:"DataRulesDefinitionPage",setup(e){const t=hl(),a=Z("structure"),r=Z(["material-code"]),n=Z(["global"]),i=Z([{fieldName:"materialCode",type:"String",format:"M + 4-6位数字",constraint:"全局唯一，与测试/上线页面一致",example:"M10001"},{fieldName:"materialName",type:"String",format:"2-50字符",constraint:"来自15种预定义物料",example:"电池盖"},{fieldName:"batchNo",type:"String",format:"6位数字",constraint:"100000-999999，全局唯一",example:"123456"},{fieldName:"factory",type:"String",format:"枚举值",constraint:"重庆/深圳/南昌/宜宾工厂",example:"重庆工厂"},{fieldName:"warehouse",type:"String",format:"枚举值",constraint:"中央/重庆/深圳库存",example:"中央库存"},{fieldName:"supplier",type:"String",format:"2-50字符",constraint:"匹配物料对应供应商列表",example:"聚龙"},{fieldName:"quantity",type:"Number",format:"正整数",constraint:"100-5000",example:"1500"},{fieldName:"status",type:"String",format:"枚举值",constraint:"正常70%/风险20%/冻结10%",example:"正常"}]),o=Z([{fieldName:"testId",type:"String",format:"TEST-[物料编码]-[批次前4位]-[6位随机]",constraint:"全局唯一",example:"TEST-M10001-1234-567890"},{fieldName:"testDate",type:"Date",format:"YYYY-MM-DD",constraint:"2024-01-01至2025-05-31",example:"2024-03-15"},{fieldName:"projectId",type:"String",format:"项目ID格式",constraint:"来自预定义项目列表",example:"X6827"},{fieldName:"baselineId",type:"String",format:"基线ID格式",constraint:"与projectId匹配预设关系",example:"I6789"},{fieldName:"result",type:"String",format:"枚举值",constraint:"合格90%/不合格10%",example:"合格"},{fieldName:"defect",type:"String",format:"文本",constraint:"不合格时必须包含1-2个缺陷",example:"划伤,色差"}]),s=Z([{fieldName:"factory",type:"String",format:"枚举值",constraint:"重庆/深圳/南昌/宜宾工厂",example:"重庆工厂"},{fieldName:"productionLine",type:"String",format:"枚举值",constraint:"01线/02线/03线/04线",example:"01线"},{fieldName:"defectRate",type:"String",format:"百分比格式",constraint:"0.0%-10.0%，80%<5%",example:"0.2%"},{fieldName:"defect",type:"String",format:"文本",constraint:"defectRate>0.5%时必须包含缺陷",example:"划伤,色差"},{fieldName:"inspectionDate",type:"Date",format:"YYYY-MM-DD",constraint:"2024-01-01至2025-05-31",example:"2024-03-20"}]),l=Z([{dataType:"库存数据",totalRecords:"132条",perBatch:"1条",distribution:"每个物料批次对应1条库存记录"},{dataType:"测试数据",totalRecords:"396条",perBatch:"3条",distribution:"每个物料批次固定3条测试记录"},{dataType:"上线数据",totalRecords:"1056条",perBatch:"8条",distribution:"每个物料批次固定8条上线记录"}]),c=Z([{material:"电池盖",category:"结构件类",suppliers:"聚龙",defects:"划伤, 色差, 尺寸偏差, 毛刺"},{material:"LCD显示屏",category:"光学类",suppliers:"BOE, 天马",defects:"亮点, 暗点, 色彩偏差, 触控失效"},{material:"OLED显示屏",category:"光学类",suppliers:"BOE, 天马, 华星",defects:"烧屏, 色彩不均, 触控失效, 亮度异常"},{material:"扬声器",category:"声学类",suppliers:"歌尔",defects:"音质异常, 无声, 杂音, 音量偏小"},{material:"中框",category:"结构件类",suppliers:"聚龙",defects:"变形, 划伤, 尺寸偏差, 表面缺陷"}]),u=Z([{baselineId:"I6789",projects:"X6827, S665LN, KI4K, X6828",description:"主要产品线基线，涵盖核心项目"},{baselineId:"I6788",projects:"X6831, KI5K, KI3K",description:"次要产品线基线，涵盖辅助项目"},{baselineId:"I6787",projects:"S662LN, S663LN, S664LN",description:"特殊产品线基线，涵盖定制项目"}]),h=Z([{factory:"重庆工厂",allowedWarehouses:"重庆库存, 中央库存",restriction:"可使用本地库存或中央库存"},{factory:"深圳工厂",allowedWarehouses:"深圳库存, 中央库存",restriction:"可使用本地库存或中央库存"},{factory:"南昌工厂",allowedWarehouses:"中央库存",restriction:"只能使用中央库存"},{factory:"宜宾工厂",allowedWarehouses:"中央库存",restriction:"只能使用中央库存"}]),d=Z([{page:"库存",count:"132",deviation:"固定数量"},{page:"测试",count:"396",deviation:"固定数量"},{page:"上线",count:"1056",deviation:"固定数量"}]),f=Z([{metric:"正常状态比例",requirement:"70%",deviation:"±5%"},{metric:"测试合格率",requirement:"90%",deviation:"±2%"},{metric:"不良率<5%比例",requirement:"80%",deviation:"±5%"}]),p=Z([{item:"物料种类覆盖率",requirement:"100%"},{item:"项目覆盖率",requirement:"100%"},{item:"工厂覆盖率",requirement:"100%"},{item:"批次测试记录=3条",requirement:"100%"},{item:"批次上线记录=8条",requirement:"100%"}]);function g(){t.push("/admin/data")}function v(){t.push("/rule-library")}return(_,y)=>{const b=q("el-icon"),w=q("el-button"),T=q("el-card"),C=q("el-col"),A=q("el-row"),k=q("el-table-column"),L=q("el-table"),M=q("el-tab-pane"),P=q("el-step"),E=q("el-steps"),D=q("el-collapse-item"),O=q("el-alert"),B=q("el-collapse"),R=q("el-tag"),V=q("el-tabs");return J(),ht("div",Oot,[S("div",Not,[S("div",$ot,[S("div",Fot,[S("h1",zot,[m(b,{class:"title-icon"},{default:x(()=>[m(kt(qr))]),_:1}),y[3]||(y[3]=F(" 数据规则定义 "))]),y[4]||(y[4]=S("p",{class:"page-description"}," IQE智能质检系统完整数据规则体系，涵盖数据结构、生成规则、匹配规则和一致性约束 ",-1))]),S("div",Vot,[m(w,{type:"primary",onClick:g},{default:x(()=>[m(b,null,{default:x(()=>[m(kt(ms))]),_:1}),y[5]||(y[5]=F(" 数据生成工具 "))]),_:1,__:[5]}),m(w,{type:"success",onClick:v},{default:x(()=>[m(b,null,{default:x(()=>[m(kt(M3))]),_:1}),y[6]||(y[6]=F(" 规则库管理 "))]),_:1,__:[6]})])])]),S("div",Got,[m(A,{gutter:20},{default:x(()=>[m(C,{span:6},{default:x(()=>[m(T,{class:"overview-card",shadow:"hover"},{default:x(()=>[S("div",Hot,[S("div",Wot,[m(b,null,{default:x(()=>[m(kt(gh))]),_:1})]),y[7]||(y[7]=S("div",{class:"card-info"},[S("h3",null,"库存规则"),S("p",null,"132条记录"),S("span",{class:"card-tag"},"物料入库管理")],-1))])]),_:1})]),_:1}),m(C,{span:6},{default:x(()=>[m(T,{class:"overview-card",shadow:"hover"},{default:x(()=>[S("div",qot,[S("div",Uot,[m(b,null,{default:x(()=>[m(kt(cc))]),_:1})]),y[8]||(y[8]=S("div",{class:"card-info"},[S("h3",null,"测试规则"),S("p",null,"396条记录"),S("span",{class:"card-tag"},"质量检测管理")],-1))])]),_:1})]),_:1}),m(C,{span:6},{default:x(()=>[m(T,{class:"overview-card",shadow:"hover"},{default:x(()=>[S("div",jot,[S("div",Yot,[m(b,null,{default:x(()=>[m(kt(xi))]),_:1})]),y[9]||(y[9]=S("div",{class:"card-info"},[S("h3",null,"上线规则"),S("p",null,"1056条记录"),S("span",{class:"card-tag"},"生产线管理")],-1))])]),_:1})]),_:1}),m(C,{span:6},{default:x(()=>[m(T,{class:"overview-card",shadow:"hover"},{default:x(()=>[S("div",Xot,[S("div",Zot,[m(b,null,{default:x(()=>[m(kt(Sc))]),_:1})]),y[10]||(y[10]=S("div",{class:"card-info"},[S("h3",null,"匹配规则"),S("p",null,"15种物料"),S("span",{class:"card-tag"},"关联性管理")],-1))])]),_:1})]),_:1})]),_:1})]),m(T,{class:"main-content-card"},{default:x(()=>[m(V,{modelValue:a.value,"onUpdate:modelValue":y[2]||(y[2]=z=>a.value=z),type:"border-card",class:"main-tabs"},{default:x(()=>[m(M,{label:"数据结构定义",name:"structure"},{default:x(()=>[S("div",Kot,[S("div",Jot,[S("h2",null,[m(b,null,{default:x(()=>[m(kt(E3))]),_:1}),y[11]||(y[11]=F(" 数据结构定义 "))]),y[12]||(y[12]=S("p",null,"定义系统中三大核心页面的数据字段结构、类型约束和业务规则",-1))]),S("div",Qot,[S("h3",tst,[m(b,null,{default:x(()=>[m(kt(gh))]),_:1}),y[13]||(y[13]=F(" 库存数据结构 "))]),m(L,{data:i.value,border:"",stripe:"",class:"structure-table"},{default:x(()=>[m(k,{prop:"fieldName",label:"字段名",width:"150"}),m(k,{prop:"type",label:"数据类型",width:"120"}),m(k,{prop:"format",label:"格式要求",width:"200"}),m(k,{prop:"constraint",label:"约束条件"}),m(k,{prop:"example",label:"示例",width:"150"})]),_:1},8,["data"])]),S("div",est,[S("h3",ast,[m(b,null,{default:x(()=>[m(kt(cc))]),_:1}),y[14]||(y[14]=F(" 测试数据结构 "))]),m(L,{data:o.value,border:"",stripe:"",class:"structure-table"},{default:x(()=>[m(k,{prop:"fieldName",label:"字段名",width:"150"}),m(k,{prop:"type",label:"数据类型",width:"120"}),m(k,{prop:"format",label:"格式要求",width:"200"}),m(k,{prop:"constraint",label:"约束条件"}),m(k,{prop:"example",label:"示例",width:"150"})]),_:1},8,["data"])]),S("div",rst,[S("h3",nst,[m(b,null,{default:x(()=>[m(kt(xi))]),_:1}),y[15]||(y[15]=F(" 上线数据结构 "))]),m(L,{data:s.value,border:"",stripe:"",class:"structure-table"},{default:x(()=>[m(k,{prop:"fieldName",label:"字段名",width:"150"}),m(k,{prop:"type",label:"数据类型",width:"120"}),m(k,{prop:"format",label:"格式要求",width:"200"}),m(k,{prop:"constraint",label:"约束条件"}),m(k,{prop:"example",label:"示例",width:"150"})]),_:1},8,["data"])])])]),_:1}),m(M,{label:"数据生成规则",name:"generation"},{default:x(()=>[S("div",ist,[S("div",ost,[S("h2",null,[m(b,null,{default:x(()=>[m(kt(ms))]),_:1}),y[16]||(y[16]=F(" 数据生成规则 "))]),y[17]||(y[17]=S("p",null,"定义系统数据自动生成的逻辑、步骤和约束条件",-1))]),S("div",sst,[y[18]||(y[18]=S("h3",{class:"section-title"},"数据生成流程",-1)),m(E,{active:5,"finish-status":"success","align-center":""},{default:x(()=>[m(P,{title:"物料编码生成",description:"为每种物料生成唯一编码"}),m(P,{title:"批次号分配",description:"为每个物料-供应商组合生成批次"}),m(P,{title:"库存数据生成",description:"生成132条库存记录"}),m(P,{title:"测试数据生成",description:"生成396条测试记录"}),m(P,{title:"上线数据生成",description:"生成1056条上线记录"})]),_:1})]),S("div",lst,[m(B,{modelValue:r.value,"onUpdate:modelValue":y[0]||(y[0]=z=>r.value=z)},{default:x(()=>[m(D,{title:"物料编码生成规则",name:"material-code"},{default:x(()=>y[19]||(y[19]=[S("div",{class:"rule-detail"},[S("h4",null,"生成逻辑"),S("ul",null,[S("li",null,"格式：M + 4-6位数字（如：M10001）"),S("li",null,"为每种物料的每个供应商生成独立编码"),S("li",null,"编码全局唯一，不重复")]),S("div",{class:"code-example"},[S("pre",null,[S("code",null,`// 物料编码生成示例
for (const material of materials) {
  for (const supplier of material.suppliers) {
    const code = \`M\${codeCounter.toString().padStart(5, '0')}\`;
    materialCodes[code] = { material, supplier };
    codeCounter++;
  }
}`)])])],-1)])),_:1,__:[19]}),m(D,{title:"批次号分配规则",name:"batch-no"},{default:x(()=>y[20]||(y[20]=[S("div",{class:"rule-detail"},[S("h4",null,"分配逻辑"),S("ul",null,[S("li",null,"格式：6位数字，范围100000-999999"),S("li",null,"每个物料-供应商组合生成固定批次数"),S("li",null,"批次号全局唯一"),S("li",null,"同工厂同物料不能使用相同批次号"),S("li",null,[S("strong",null,"总计132个批次"),F("，对应132条库存记录")])])],-1)])),_:1,__:[20]}),m(D,{title:"数据生成比例规则",name:"data-ratio"},{default:x(()=>y[21]||(y[21]=[S("div",{class:"rule-detail"},[S("h4",null,"固定比例生成"),S("ul",null,[S("li",null,[S("strong",null,"库存:测试:上线 = 1:3:8")]),S("li",null,"每个物料批次生成1条库存记录"),S("li",null,"每个物料批次生成3条测试记录"),S("li",null,"每个物料批次生成8条上线记录"),S("li",null,"总计：132 × (1+3+8) = 1584条记录")]),S("div",{class:"code-example"},[S("pre",null,[S("code",null,`// 数据生成比例示例
const BATCH_COUNT = 132;
const INVENTORY_PER_BATCH = 1;  // 132条库存
const TEST_PER_BATCH = 3;       // 396条测试
const PRODUCTION_PER_BATCH = 8; // 1056条上线

for (let i = 0; i < BATCH_COUNT; i++) {
  generateInventoryRecord(batch);     // 1条
  generateTestRecords(batch, 3);      // 3条
  generateProductionRecords(batch, 8); // 8条
}`)])])],-1)])),_:1,__:[21]}),m(D,{title:"数据量分配规则",name:"data-volume"},{default:x(()=>[S("div",cst,[y[22]||(y[22]=S("h4",null,"记录数量分配",-1)),y[23]||(y[23]=S("p",null,[S("strong",null,"基于实际业务数据的固定数量生成：")],-1)),m(L,{data:l.value,border:""},{default:x(()=>[m(k,{prop:"dataType",label:"数据类型"}),m(k,{prop:"totalRecords",label:"总记录数"}),m(k,{prop:"perBatch",label:"每批次记录数"}),m(k,{prop:"distribution",label:"分布规则"})]),_:1},8,["data"]),S("div",ust,[m(O,{title:"数据生成说明",type:"info",description:"系统采用固定数量的数据生成策略，确保每次生成的数据量一致，便于测试和演示。每个物料批次按照预设的记录数量进行分配，保证数据的完整性和一致性。","show-icon":"",closable:!1})])])]),_:1})]),_:1},8,["modelValue"])])])]),_:1}),m(M,{label:"数据匹配规则",name:"matching"},{default:x(()=>[S("div",hst,[S("div",dst,[S("h2",null,[m(b,null,{default:x(()=>[m(kt(Sc))]),_:1}),y[24]||(y[24]=F(" 数据匹配规则 "))]),y[25]||(y[25]=S("p",null,"定义物料、供应商、不良现象和项目基线之间的匹配关系",-1))]),S("div",fst,[S("h3",pst,[m(b,null,{default:x(()=>[m(kt(Es))]),_:1}),y[26]||(y[26]=F(" 物料-供应商-不良匹配规则 "))]),m(O,{title:"匹配规则说明",type:"warning",description:"系统限制物料-不良现象-供应商必须按照预定义规则进行匹配，确保数据的准确性和一致性。","show-icon":"",closable:!1,style:{"margin-bottom":"20px"}}),m(L,{data:c.value,border:"",stripe:"",class:"matching-table"},{default:x(()=>[m(k,{prop:"material",label:"物料名称",width:"150"}),m(k,{prop:"category",label:"物料分类",width:"120"}),m(k,{prop:"suppliers",label:"可选供应商",width:"200"}),m(k,{prop:"defects",label:"可能不良现象"})]),_:1},8,["data"])]),S("div",gst,[S("h3",vst,[m(b,null,{default:x(()=>[m(kt(lc))]),_:1}),y[27]||(y[27]=F(" 项目-基线匹配规则 "))]),m(O,{title:"项目基线绑定",type:"info",description:"同一项目在不同记录中必须使用相同的基线ID，禁止出现同项目不同基线的情况。","show-icon":"",closable:!1,style:{"margin-bottom":"20px"}}),m(L,{data:u.value,border:"",stripe:"",class:"matching-table"},{default:x(()=>[m(k,{prop:"baselineId",label:"基线ID",width:"150"}),m(k,{prop:"projects",label:"关联项目"}),m(k,{prop:"description",label:"项目描述"})]),_:1},8,["data"])]),S("div",mst,[S("h3",yst,[m(b,null,{default:x(()=>[m(kt(gh))]),_:1}),y[28]||(y[28]=F(" 工厂-仓库匹配规则 "))]),m(L,{data:h.value,border:"",stripe:"",class:"matching-table"},{default:x(()=>[m(k,{prop:"factory",label:"工厂",width:"150"}),m(k,{prop:"allowedWarehouses",label:"可用仓库"}),m(k,{prop:"restriction",label:"限制说明"})]),_:1},8,["data"])])])]),_:1}),m(M,{label:"一致性约束",name:"consistency"},{default:x(()=>[S("div",_st,[S("div",bst,[S("h2",null,[m(b,null,{default:x(()=>[m(kt(cc))]),_:1}),y[29]||(y[29]=F(" 数据一致性约束 "))]),y[30]||(y[30]=S("p",null,"定义跨页面数据的一致性要求和验证规则",-1))]),S("div",xst,[y[35]||(y[35]=S("h3",{class:"section-title"},"跨页面数据一致性",-1)),m(A,{gutter:20},{default:x(()=>[m(C,{span:12},{default:x(()=>[m(T,{class:"consistency-card"},{header:x(()=>y[31]||(y[31]=[S("h4",null,"三要素绑定规则",-1)])),default:x(()=>[y[32]||(y[32]=S("div",{class:"consistency-content"},[S("p",null,[S("strong",null,"物料编码 + 批次号 + 供应商"),F(" 三者必须在所有页面保持一致")]),S("ul",null,[S("li",null,"库存页面：定义三要素基础信息"),S("li",null,"测试页面：继承库存页面的三要素"),S("li",null,"上线页面：继承库存页面的三要素")])],-1))]),_:1,__:[32]})]),_:1}),m(C,{span:12},{default:x(()=>[m(T,{class:"consistency-card"},{header:x(()=>y[33]||(y[33]=[S("h4",null,"时间线约束规则",-1)])),default:x(()=>[y[34]||(y[34]=S("div",{class:"consistency-content"},[S("p",null,[S("strong",null,"入库时间 ≤ 测试时间 ≤ 检验时间")]),S("ul",null,[S("li",null,"测试日期必须晚于物料入库日期"),S("li",null,"检验日期必须晚于测试日期"),S("li",null,"所有日期在2024-01-01至2025-05-31范围内")])],-1))]),_:1,__:[34]})]),_:1})]),_:1})]),S("div",Sst,[y[49]||(y[49]=S("h3",{class:"section-title"},"禁止性规则汇总",-1)),m(B,{modelValue:n.value,"onUpdate:modelValue":y[1]||(y[1]=z=>n.value=z)},{default:x(()=>[m(D,{title:"全局禁止行为",name:"global"},{default:x(()=>[S("div",wst,[m(R,{type:"danger",class:"rule-tag"},{default:x(()=>y[36]||(y[36]=[F("❌ 同项目在不同页面/记录中出现不同基线ID")])),_:1,__:[36]}),m(R,{type:"danger",class:"rule-tag"},{default:x(()=>y[37]||(y[37]=[F("❌ 相同物料编码+批次在不同页面出现不同供应商")])),_:1,__:[37]}),m(R,{type:"danger",class:"rule-tag"},{default:x(()=>y[38]||(y[38]=[F("❌ 日期超出2024-01-01至2025-05-31范围")])),_:1,__:[38]})])]),_:1}),m(D,{title:"库存页面禁止",name:"inventory"},{default:x(()=>[S("div",Cst,[m(R,{type:"danger",class:"rule-tag"},{default:x(()=>y[39]||(y[39]=[F("❌ 同工厂的同种物料使用相同批次")])),_:1,__:[39]}),m(R,{type:"danger",class:"rule-tag"},{default:x(()=>y[40]||(y[40]=[F("❌ 重庆工厂使用深圳库存")])),_:1,__:[40]}),m(R,{type:"danger",class:"rule-tag"},{default:x(()=>y[41]||(y[41]=[F("❌ 状态分布偏离正常70%/风险20%/冻结10%±5%")])),_:1,__:[41]})])]),_:1}),m(D,{title:"测试页面禁止",name:"test"},{default:x(()=>[S("div",Tst,[m(R,{type:"danger",class:"rule-tag"},{default:x(()=>y[42]||(y[42]=[F("❌ 合格记录中出现缺陷描述")])),_:1,__:[42]}),m(R,{type:"danger",class:"rule-tag"},{default:x(()=>y[43]||(y[43]=[F("❌ 测试合格率偏离90%±2%")])),_:1,__:[43]}),m(R,{type:"danger",class:"rule-tag"},{default:x(()=>y[44]||(y[44]=[F("❌ 物料批次测试记录不等于3条")])),_:1,__:[44]})])]),_:1}),m(D,{title:"上线页面禁止",name:"production"},{default:x(()=>[S("div",Ast,[m(R,{type:"danger",class:"rule-tag"},{default:x(()=>y[45]||(y[45]=[F("❌ 缺陷率≤0.5%的记录出现缺陷描述")])),_:1,__:[45]}),m(R,{type:"danger",class:"rule-tag"},{default:x(()=>y[46]||(y[46]=[F("❌ 不良率分布偏离<5%:80%/≥5%:20%±5%")])),_:1,__:[46]}),m(R,{type:"danger",class:"rule-tag"},{default:x(()=>y[47]||(y[47]=[F("❌ 物料批次上线记录不等于8条")])),_:1,__:[47]}),m(R,{type:"danger",class:"rule-tag"},{default:x(()=>y[48]||(y[48]=[F("❌ 工厂信息与仓库记录不一致")])),_:1,__:[48]})])]),_:1})]),_:1},8,["modelValue"])]),S("div",kst,[y[53]||(y[53]=S("h3",{class:"section-title"},"数据验证指标",-1)),m(A,{gutter:20},{default:x(()=>[m(C,{span:8},{default:x(()=>[m(T,{class:"validation-card"},{header:x(()=>y[50]||(y[50]=[S("h4",null,"数量验证",-1)])),default:x(()=>[m(L,{data:d.value,border:"",size:"small"},{default:x(()=>[m(k,{prop:"page",label:"页面"}),m(k,{prop:"count",label:"记录数"}),m(k,{prop:"deviation",label:"允许偏差"})]),_:1},8,["data"])]),_:1})]),_:1}),m(C,{span:8},{default:x(()=>[m(T,{class:"validation-card"},{header:x(()=>y[51]||(y[51]=[S("h4",null,"分布验证",-1)])),default:x(()=>[m(L,{data:f.value,border:"",size:"small"},{default:x(()=>[m(k,{prop:"metric",label:"指标"}),m(k,{prop:"requirement",label:"要求"}),m(k,{prop:"deviation",label:"偏差"})]),_:1},8,["data"])]),_:1})]),_:1}),m(C,{span:8},{default:x(()=>[m(T,{class:"validation-card"},{header:x(()=>y[52]||(y[52]=[S("h4",null,"完整性验证",-1)])),default:x(()=>[m(L,{data:p.value,border:"",size:"small"},{default:x(()=>[m(k,{prop:"item",label:"检查项"}),m(k,{prop:"requirement",label:"要求"})]),_:1},8,["data"])]),_:1})]),_:1})]),_:1})])])]),_:1})]),_:1},8,["modelValue"])]),_:1})])}}},Lst=ca(Dst,[["__scopeId","data-v-86f506bd"]]),Ist={key:0,class:"result-box success"},Mst={key:1,class:"result-box error"},Est={__name:"BackendTest",setup(e){const t=Z(!1),a=Z(null),r=Z(null),n=async()=>{t.value=!0,a.value=null,r.value=null;try{const i=await Je.get("/api/health");a.value=i.data}catch(i){r.value=`错误信息: ${i.message}

`,i.response?(r.value+=`响应状态: ${i.response.status}
`,r.value+=`响应数据: ${JSON.stringify(i.response.data,null,2)}`):r.value+="请求未能收到响应，请检查后端服务是否正在运行，以及Vite代理配置是否正确。"}finally{t.value=!1}};return(i,o)=>{const s=q("el-button");return J(),ht("div",null,[o[3]||(o[3]=S("h1",null,"后端连通性测试",-1)),o[4]||(o[4]=S("p",null," 这个页面用于测试前端和后端服务之间的连接是否正常。 ",-1)),o[5]||(o[5]=S("p",null,[F(" 点击下面的按钮来向后端的 "),S("code",null,"/api/health"),F(" 端点发送一个请求。 ")],-1)),m(s,{onClick:n,loading:t.value,type:"primary"},{default:x(()=>o[0]||(o[0]=[F(" 发送测试请求 ")])),_:1,__:[0]},8,["loading"]),a.value?(J(),ht("div",Ist,[o[1]||(o[1]=S("h3",null,"成功! 后端响应:",-1)),S("pre",null,N(a.value),1)])):te("",!0),r.value?(J(),ht("div",Mst,[o[2]||(o[2]=S("h3",null,"失败! 错误信息:",-1)),S("pre",null,N(r.value),1)])):te("",!0)])}}},Rst=ca(Est,[["__scopeId","data-v-db3f1c3e"]]);class Pst{constructor(){this.chartInstances=new Map}formatAsTable(t,a="查询结果"){if(!t||t.length===0)return{type:"table",title:a,message:"暂无数据",data:[],columns:[]};const r=Object.keys(t[0]).map(n=>({key:n,title:n,width:this.calculateColumnWidth(n,t)}));return{type:"table",title:a,columns:r,data:t.slice(0,10),total:t.length,hasMore:t.length>10}}calculateColumnWidth(t,a){const r=Math.max(t.length,...a.slice(0,5).map(n=>String(n[t]||"").length));return Math.min(Math.max(r*12,100),200)}formatAsStatCards(t,a="统计概览"){if(!t||t.length===0)return{type:"stat_cards",title:a,cards:[]};const r=t.map((n,i)=>{const o=Object.keys(n);return{id:i,title:n[o[0]]||`项目${i+1}`,value:n[o[1]]||0,unit:this.detectUnit(o[1]),trend:this.calculateTrend(n),color:this.getCardColor(i)}});return{type:"stat_cards",title:a,cards:r.slice(0,6)}}detectUnit(t){return t.includes("百分比")||t.includes("率")?"%":t.includes("次数")||t.includes("数量")?"次":t.includes("天")||t.includes("日")?"天":""}getCardColor(t){const a=["#409EFF","#67C23A","#E6A23C","#F56C6C","#909399","#9C27B0"];return a[t%a.length]}calculateTrend(t){const a=Object.keys(t),r=parseFloat(t[a[1]])||0;return r>90?"up":r<60?"down":"stable"}generateBarChart(t,a,r){if(!t||t.length===0)return null;const n=Object.keys(t[0]),i=t.map(l=>l[n[0]]),o=t.map(l=>parseFloat(l[n[1]])||0),s={title:{text:a,left:"center",textStyle:{fontSize:16,fontWeight:"bold"}},tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:{type:"category",data:i,axisLabel:{rotate:45,interval:0}},yAxis:{type:"value"},series:[{name:n[1],type:"bar",data:o,itemStyle:{color:new Wn(0,0,0,1,[{offset:0,color:"#83bff6"},{offset:.5,color:"#188df0"},{offset:1,color:"#188df0"}])},emphasis:{itemStyle:{color:new Wn(0,0,0,1,[{offset:0,color:"#2378f7"},{offset:.7,color:"#2378f7"},{offset:1,color:"#83bff6"}])}}}]};return{type:"chart",chartType:"bar",containerId:r,option:s,title:a}}generatePieChart(t,a,r){if(!t||t.length===0)return null;const n=Object.keys(t[0]),i=t.map(s=>({name:s[n[0]],value:parseFloat(s[n[1]])||0}));return{type:"chart",chartType:"pie",containerId:r,option:{title:{text:a,left:"center",textStyle:{fontSize:16,fontWeight:"bold"}},tooltip:{trigger:"item",formatter:"{a} <br/>{b}: {c} ({d}%)"},legend:{orient:"vertical",left:"left"},series:[{name:a,type:"pie",radius:"50%",data:i,emphasis:{itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]},title:a}}generateLineChart(t,a,r){if(!t||t.length===0)return null;const n=Object.keys(t[0]),i=t.map(l=>l[n[0]]),o=t.map(l=>parseFloat(l[n[1]])||0),s={title:{text:a,left:"center",textStyle:{fontSize:16,fontWeight:"bold"}},tooltip:{trigger:"axis"},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:{type:"category",boundaryGap:!1,data:i},yAxis:{type:"value"},series:[{name:n[1],type:"line",stack:"Total",data:o,smooth:!0,lineStyle:{color:"#5470c6"},areaStyle:{color:new Wn(0,0,0,1,[{offset:0,color:"rgba(84, 112, 198, 0.3)"},{offset:1,color:"rgba(84, 112, 198, 0.1)"}])}}]};return{type:"chart",chartType:"line",containerId:r,option:s,title:a}}smartFormat(t,a,r){return!t||t.length===0?{type:"message",title:r,content:"暂无相关数据",icon:"📭"}:a.includes("排行")||a.includes("Top")?{type:"combined",title:r,components:[this.generateBarChart(t,`${r} - 图表`,"chart-container"),this.formatAsTable(t,`${r} - 详细数据`)]}:a.includes("对比")||a.includes("分析")?{type:"combined",title:r,components:[this.formatAsStatCards(t,`${r} - 概览`),this.formatAsTable(t,`${r} - 详细对比`)]}:a.includes("分布")||a.includes("状态")?{type:"combined",title:r,components:[this.generatePieChart(t,`${r} - 分布图`,"pie-container"),this.formatAsTable(t,`${r} - 详细数据`)]}:a.includes("趋势")||a.includes("时间")?{type:"combined",title:r,components:[this.generateLineChart(t,`${r} - 趋势图`,"line-container"),this.formatAsTable(t,`${r} - 详细数据`)]}:this.formatAsTable(t,r)}renderChart(t,a){if(!t||t.type!=="chart")return;this.chartInstances.has(t.containerId)&&this.chartInstances.get(t.containerId).dispose();const r=xr(a);return r.setOption(t.option),this.chartInstances.set(t.containerId,r),window.addEventListener("resize",()=>{r.resize()}),r}dispose(){this.chartInstances.forEach(t=>{t.dispose()}),this.chartInstances.clear()}}const b2=new Pst,Bst={class:"qa-test-page"},Ost={class:"test-container"},Nst={class:"test-rules-panel"},$st={class:"rule-categories"},Fst=["onClick"],zst={class:"rule-icon"},Vst={class:"rule-name"},Gst={class:"test-results-panel"},Hst={key:0,class:"no-selection"},Wst={key:1,class:"test-content"},qst={class:"test-info"},Ust={class:"test-query"},jst=["disabled"],Yst={key:0,class:"test-result"},Xst={class:"result-header"},Zst={class:"result-time"},Kst={class:"result-count"},Jst={key:0,class:"error-message"},Qst={key:1,class:"success-result"},tlt={key:0,class:"table-presentation"},elt={class:"table-container"},alt={class:"result-table"},rlt={key:0,class:"table-footer"},nlt={key:1,class:"cards-presentation"},ilt={class:"stat-cards"},olt={class:"card-header"},slt={class:"card-title"},llt={class:"card-value"},clt={class:"value"},ult={class:"unit"},hlt={key:2,class:"chart-presentation"},dlt=["id"],flt={key:3,class:"combined-presentation"},plt={class:"combined-components"},glt={key:4,class:"message-presentation"},vlt={class:"message-content"},mlt={class:"message-icon"},ylt={__name:"QATestPage",setup(e){const t=Z(null),a=Z(!1),r=Z(null),n=fa({basic:{title:"🔧 基础查询规则",rules:[{name:"物料库存查询",query:"查询电池库存",icon:"🔋"},{name:"供应商库存查询",query:"查询BOE供应商库存",icon:"🏢"},{name:"NG测试结果查询",query:"查询测试失败(NG)的记录",icon:"❌"},{name:"风险库存查询",query:"查询风险状态的库存",icon:"⚠️"},{name:"物料测试情况查询",query:"查询LCD显示屏测试情况",icon:"🧪"},{name:"数据范围提示",query:"系统支持查询哪些数据",icon:"💡"}]},advanced:{title:"🚀 高级分析规则",rules:[{name:"Top缺陷排行查询",query:"查询Top缺陷排行",icon:"🏆"},{name:"供应商对比分析",query:"对比聚龙和天马供应商表现",icon:"🏢"},{name:"物料对比分析",query:"对比电池和LCD显示屏质量表现",icon:"🔧"},{name:"精确物料查询",query:"精确查询电池（排除电池盖）",icon:"🎯"},{name:"智能物料匹配",query:"智能匹配显示相关物料",icon:"🧠"}]}}),i=c=>{t.value=c,r.value=null},o=async()=>{if(!t.value)return;a.value=!0;const c=Date.now();try{const u=await Je.post("http://localhost:3001/api/assistant/query",{question:t.value.query,intent:t.value.name}),h=Date.now()-c,d=u.data.data||[],f=b2.smartFormat(d,t.value.name,t.value.name);if(r.value={success:!0,duration:h,count:d.length,data:d,presentation:f},f.type==="chart"){await $a();const p=document.getElementById(f.containerId);p&&b2.renderChart(f,p)}}catch(u){const h=Date.now()-c;r.value={success:!1,duration:h,count:0,error:u.message||"测试失败"}}finally{a.value=!1}},s=c=>"div",l=c=>{console.log("Chart ready:",c)};return(c,u)=>(J(),ht("div",Bst,[u[3]||(u[3]=S("div",{class:"page-header"},[S("h1",null,"🧪 智能问答功能测试"),S("p",null,"测试优化后的规则和呈现效果")],-1)),S("div",Ost,[S("div",Nst,[u[0]||(u[0]=S("h3",null,"📋 测试规则",-1)),S("div",$st,[(J(!0),ht(ye,null,Se(n,(h,d)=>(J(),ht("div",{key:d,class:"rule-category"},[S("h4",null,N(h.title),1),(J(!0),ht(ye,null,Se(h.rules,f=>{var p;return J(),ht("div",{key:f.name,class:ve(["rule-item",{active:((p=t.value)==null?void 0:p.name)===f.name}]),onClick:g=>i(f)},[S("span",zst,N(f.icon),1),S("span",Vst,N(f.name),1)],10,Fst)}),128))]))),128))])]),S("div",Gst,[t.value?(J(),ht("div",Wst,[S("div",qst,[S("h3",null,N(t.value.icon)+" "+N(t.value.name),1),S("p",Ust,"测试查询: "+N(t.value.query),1),S("button",{onClick:o,disabled:a.value,class:"test-button"},N(a.value?"测试中...":"🚀 运行测试"),9,jst)]),r.value?(J(),ht("div",Yst,[S("div",Xst,[S("span",{class:ve(["result-status",r.value.success?"success":"error"])},N(r.value.success?"✅ 测试成功":"❌ 测试失败"),3),S("span",Zst,"耗时: "+N(r.value.duration)+"ms",1),S("span",Kst,"结果: "+N(r.value.count)+"条",1)]),r.value.success?(J(),ht("div",Qst,[r.value.presentation.type==="table"?(J(),ht("div",tlt,[S("h4",null,"📊 "+N(r.value.presentation.title),1),S("div",elt,[S("table",alt,[S("thead",null,[S("tr",null,[(J(!0),ht(ye,null,Se(r.value.presentation.columns,h=>(J(),ht("th",{key:h.key},N(h.title),1))),128))])]),S("tbody",null,[(J(!0),ht(ye,null,Se(r.value.presentation.data,(h,d)=>(J(),ht("tr",{key:d},[(J(!0),ht(ye,null,Se(r.value.presentation.columns,f=>(J(),ht("td",{key:f.key},N(h[f.key]),1))),128))]))),128))])])]),r.value.presentation.hasMore?(J(),ht("div",rlt," 显示前10条，共"+N(r.value.presentation.total)+"条数据 ",1)):te("",!0)])):te("",!0),r.value.presentation.type==="stat_cards"?(J(),ht("div",nlt,[S("h4",null,"📈 "+N(r.value.presentation.title),1),S("div",ilt,[(J(!0),ht(ye,null,Se(r.value.presentation.cards,h=>(J(),ht("div",{key:h.id,class:"stat-card",style:sy({borderColor:h.color})},[S("div",olt,[S("span",slt,N(h.title),1),S("span",{class:ve(["card-trend",h.trend])},N(h.trend==="up"?"📈":h.trend==="down"?"📉":"➡️"),3)]),S("div",llt,[S("span",clt,N(h.value),1),S("span",ult,N(h.unit),1)])],4))),128))])])):te("",!0),r.value.presentation.type==="chart"?(J(),ht("div",hlt,[S("h4",null,"📊 "+N(r.value.presentation.title),1),S("div",{id:r.value.presentation.containerId,class:"chart-container",style:{width:"100%",height:"400px"}},null,8,dlt)])):te("",!0),r.value.presentation.type==="combined"?(J(),ht("div",flt,[S("h4",null,"🎯 "+N(r.value.presentation.title),1),S("div",plt,[(J(!0),ht(ye,null,Se(r.value.presentation.components,(h,d)=>(J(),ht("div",{key:d,class:"component-item"},[(J(),Jt(Fn(s(h.type)),{data:h,onChartReady:l},null,40,["data"]))]))),128))])])):te("",!0),r.value.presentation.type==="message"?(J(),ht("div",glt,[S("div",vlt,[S("span",mlt,N(r.value.presentation.icon),1),S("h4",null,N(r.value.presentation.title),1),S("p",null,N(r.value.presentation.content),1)])])):te("",!0)])):(J(),ht("div",Jst,[u[2]||(u[2]=S("h4",null,"❌ 错误信息:",-1)),S("pre",null,N(r.value.error),1)]))])):te("",!0)])):(J(),ht("div",Hst,u[1]||(u[1]=[S("div",{class:"empty-state"},[S("span",{class:"empty-icon"},"🎯"),S("h3",null,"选择一个规则开始测试"),S("p",null,"点击左侧规则列表中的任意规则进行测试")],-1)])))])])]))}},_lt=ca(ylt,[["__scopeId","data-v-516303ab"]]),blt={template:`
    <div style="text-align: center; padding: 50px;">
      <h1 style="font-size: 72px; color: #409EFF;">404</h1>
      <h2>页面未找到</h2>
      <p>抱歉，您访问的页面不存在或已被移除</p>
      <router-link to="/" style="display: inline-block; margin-top: 20px; padding: 10px 20px; background-color: #409EFF; color: white; text-decoration: none; border-radius: 4px;">返回首页</router-link>
    </div>
  `},xlt=[{path:"/",name:"Home",component:tF,meta:{title:"首页",icon:"House"}},{path:"/dashboard",name:"Dashboard",component:HZ,meta:{title:"数据看板",icon:"DataBoard"}},{path:"/inventory",name:"Inventory",component:$J,meta:{title:"物料仓存管理",icon:"Goods"}},{path:"/lab",name:"Lab",component:ZQ,meta:{title:"物料测试数据",icon:"Stopwatch"}},{path:"/factory",name:"Factory",component:ztt,meta:{title:"物料上线跟踪",icon:"OfficeBuilding"}},{path:"/material-quality-report",name:"MaterialQualityReport",component:()=>jt(()=>import("./MaterialQualityReportSimple-ESJYRtUV.js"),__vite__mapDeps([4,1,2,5])),meta:{title:"物料质量总结报告",icon:"TrendCharts"}},{path:"/batch",name:"BatchManagement",component:Bot,meta:{title:"批次管理",icon:"Document"}},{path:"/material-exception",name:"MaterialException",component:qnt,meta:{title:"物料异常管理",icon:"Warning"}},{path:"/admin/data",name:"AdminData",component:lat,meta:{title:"数据管理",icon:"Setting",requiresAuth:!0}},{path:"/admin/data-import",name:"DataImport",component:Tat,meta:{title:"数据导入/导出",icon:"Upload",requiresAuth:!0}},{path:"/rule-library",name:"RuleLibrary",component:Ort,meta:{title:"规则库",icon:"Tickets",requiresAuth:!0}},{path:"/test-rules",name:"TestRules",component:cnt,meta:{title:"规则测试",icon:"Operation"}},{path:"/admin/data/rules/definition",name:"DataRulesDefinition",component:Lst,meta:{title:"数据规则定义",icon:"Document",requiresAuth:!0}},{path:"/test-backend",name:"BackendTest",component:Rst,meta:{title:"后端连接测试",icon:"Cpu"}},{path:"/api-test",name:"ApiTest",component:nnt,meta:{title:"API连接测试",icon:"Connection"}},{path:"/rule-library-simple",name:"RuleLibrarySimple",component:Wrt,meta:{title:"规则库管理(简化版)",icon:"Document"}},{path:"/rule-library-debug",name:"RuleLibraryDebug",component:Xrt,meta:{title:"规则库调试页面",icon:"Bug"}},{path:"/ai-scenario-management",name:"AIScenarioManagement",component:()=>jt(()=>import("./AIScenarioManagementSimple-BmJ1E-o4.js"),__vite__mapDeps([6,1,2,7])),meta:{title:"AI场景管理",icon:"Connection"}},{path:"/assistant",name:"Assistant",component:()=>jt(()=>import("./AssistantPageNew-Cn_JlWOt.js"),__vite__mapDeps([8,1,2,9])),meta:{title:"智能助手",icon:"ChatDotRound"}},{path:"/assistant-ai",name:"AssistantAI",redirect:"/assistant-ai-three-column"},{path:"/simple-qa",name:"SimpleQA",component:()=>jt(()=>import("./SimpleQA-DlIGgYzR.js"),__vite__mapDeps([10,1,2,11])),meta:{title:"简单问答测试",icon:"ChatDotRound"}},{path:"/assistant-ai-simple",name:"AssistantAISimple",component:()=>jt(()=>import("./AssistantPageAISimple-m-9yjAlz.js"),__vite__mapDeps([12,1,2,13])),meta:{title:"AI助手简化版",icon:"MagicStick"}},{path:"/assistant-ai-fixed",name:"AssistantAIFixed",component:()=>jt(()=>import("./AssistantPageAIFixed-Du_fP05U.js"),__vite__mapDeps([14,1,2,15])),meta:{title:"AI助手修复版",icon:"Tools"}},{path:"/ai-test",name:"AITest",component:()=>jt(()=>import("./AITestPage-DWql0IGn.js"),__vite__mapDeps([16,1,17,2,18])),meta:{title:"AI功能测试",icon:"Setting"}},{path:"/enhanced-ai-demo",name:"EnhancedAIDemo",component:()=>jt(()=>import("./EnhancedAIDemo-CORtvQI4.js"),__vite__mapDeps([19,1,2,20])),meta:{title:"增强AI演示",icon:"MagicStick"}},{path:"/ai-assistant-new",name:"AIAssistantNew",component:()=>jt(()=>import("./AIAssistant-C09AiRqz.js"),__vite__mapDeps([21,1,2,22])),meta:{title:"AI智能助手(新版)",icon:"Robot"}},{path:"/ai-assistant-test",name:"AIAssistantTest",component:()=>jt(()=>import("./AIAssistantSimple-CYvJWBrB.js"),__vite__mapDeps([23,1,2,24])),meta:{title:"AI助手测试",icon:"MagicStick"}},{path:"/ai-assistant-working",name:"AIAssistantWorking",component:()=>jt(()=>import("./AIAssistantWorking-Bu-3eGHT.js"),__vite__mapDeps([25,1,2,26])),meta:{title:"AI智能助手(工作版)",icon:"MagicStick"}},{path:"/assistant-ai-test",name:"AssistantAITest",component:()=>jt(()=>import("./AssistantPageAITest-CiBrr_F3.js"),__vite__mapDeps([27,1,2,28])),meta:{title:"AI助手测试版",icon:"Tools"}},{path:"/assistant-ai-new",name:"AssistantAINew",component:()=>jt(()=>import("./AssistantPageAINew-DU03aXCO.js"),__vite__mapDeps([29,1,2,30])),meta:{title:"AI智能助手(新版)",icon:"MagicStick"}},{path:"/assistant-ai-minimal",name:"AssistantAIMinimal",component:()=>jt(()=>import("./AssistantPageAIMinimal-CW0TPXzR.js"),__vite__mapDeps([31,1,2,32])),meta:{title:"AI助手(最小化)",icon:"Tools"}},{path:"/assistant-ai-three-column",name:"AssistantAIThreeColumn",component:()=>jt(()=>import("./SimpleAIThreeColumn-gZ8Urylh.js"),__vite__mapDeps([33,1,2,34,35,36])),meta:{title:"QMS问答助手-小Q",icon:"Grid"}},{path:"/test-voice-ai",name:"TestVoiceAI",component:()=>jt(()=>import("./TestVoiceAI-C413JKIo.js"),__vite__mapDeps([37,34,1,2,38])),meta:{title:"小Q语音测试",icon:"Microphone"}},{path:"/qms-assistant-loading",name:"QMSAssistantLoading",component:()=>jt(()=>import("./QMSAssistantLoading-C4H4xqW2.js"),__vite__mapDeps([39,1,2,40])),meta:{title:"正在加载QMS智能助手"}},{path:"/qa-test",name:"QATest",component:_lt,meta:{title:"🧪 智能问答测试",icon:"Tools"}},{path:"/test-ai-three-column",name:"TestAIThreeColumn",component:()=>jt(()=>import("./TestAIThreeColumn-DKbLXrh1.js"),__vite__mapDeps([41,42,1,36,2,43])),meta:{title:"测试AI三栏布局",icon:"Grid"}},{path:"/simple-ai-three-column",name:"SimpleAIThreeColumn",component:()=>jt(()=>import("./SimpleAIThreeColumn-gZ8Urylh.js"),__vite__mapDeps([33,1,2,34,35,36])),meta:{title:"简化AI三栏布局",icon:"Grid"}},{path:"/ai-assistant-three-column",name:"AIAssistantThreeColumn",component:()=>jt(()=>import("./AIAssistantThreeColumn-D_TsiW_4.js"),__vite__mapDeps([44,1,17,2,45])),meta:{title:"QMS AI智能助手(三栏版)",icon:"ChatDotRound"}},{path:"/ai-assistant-final",name:"AIAssistantFinal",component:()=>jt(()=>import("./AIAssistantFinal-DZqB0rOd.js"),__vite__mapDeps([46,1,17,2,47])),meta:{title:"QMS AI智能助手(最终版)",icon:"MagicStick"}},{path:"/ai-assistant-standalone",name:"AIAssistantStandalone",component:()=>jt(()=>import("./AIAssistantStandalone-DccLXb74.js"),__vite__mapDeps([48,1,2,49])),meta:{title:"AI智能助手(独立版)",icon:"ChatDotRound"}},{path:"/ai-assistant-fullscreen",name:"AIAssistantFullscreen",component:()=>jt(()=>import("./AIAssistantFullscreen-DnzYlSXR.js"),__vite__mapDeps([50,1,2,51])),meta:{title:"AI智能助手(全屏版)",icon:"MagicStick"}},{path:"/ai-assistant-simple",name:"AIAssistantSimple",component:()=>jt(()=>import("./AIAssistantSimple-C_0tbVe2.js"),__vite__mapDeps([52,1,2,53])),meta:{title:"AI智能助手(简化版)",icon:"ChatDotRound"}},{path:"/ai-assistant",name:"AIAssistant",component:()=>jt(()=>import("./AIAssistantRedirect-DEmTRGrh.js"),__vite__mapDeps([54,1,2,55])),meta:{title:"QMS AI智能助手",icon:"MagicStick"}},{path:"/ai-assistant-main",name:"AIAssistantMain",component:()=>jt(()=>import("./AIAssistantMain-nivlK3LL.js"),__vite__mapDeps([56,1,2,57])),meta:{title:"QMS AI智能助手(主版本)",icon:"MagicStick"}},{path:"/ai-assistant-redesigned",name:"AIAssistantRedesigned",component:()=>jt(()=>import("./AIAssistantRedesigned-Lek23hmV.js"),__vite__mapDeps([58,1,2,59])),meta:{title:"AI智能助手(重新设计)",icon:"MagicStick"}},{path:"/assistant-page-ai-three-column",name:"AssistantPageAIThreeColumn",component:()=>jt(()=>import("./AssistantPageAIThreeColumn-CaljNGTQ.js"),__vite__mapDeps([60,1,42,36,2,61])),meta:{title:"AI智能助手(三栏页面版)",icon:"Grid"}},{path:"/ai-planning",name:"AIPlanningPage",component:()=>jt(()=>import("./AIPlanningPage-Bw02AfZf.js"),__vite__mapDeps([62,1,2,63])),meta:{title:"AI规划文档",icon:"Document"}},{path:"/ai-roadmap",name:"AIRoadmapPage",component:()=>jt(()=>import("./AIRoadmapPage-CcYGdNit.js"),__vite__mapDeps([64,1,2,65])),meta:{title:"技术路线图",icon:"Connection"}},{path:"/ai-architecture",name:"AIArchitecturePage",component:()=>jt(()=>import("./AIArchitecturePage-Duu3brUI.js"),__vite__mapDeps([66,1,2,67])),meta:{title:"架构设计",icon:"Operation"}},{path:"/test-real-data",name:"TestRealDataDisplay",component:()=>jt(()=>import("./TestRealDataDisplay-DNqDrMPa.js"),__vite__mapDeps([68,1,2,69])),meta:{title:"真实数据显示测试",icon:"DataBoard"}},{path:"/data-cleaning",name:"DataCleaning",component:()=>jt(()=>import("./DataCleaningFinal-BKDG5B8J.js"),__vite__mapDeps([70,1,2,71])),meta:{title:"数据清洗治理",icon:"Tools",requiresAuth:!1}},{path:"/data-cleaning-minimal",name:"DataCleaningMinimal",component:()=>jt(()=>import("./DataCleaningMinimal-vYF2KK4f.js"),__vite__mapDeps([72,1,2,73])),meta:{title:"数据清洗治理(最小版)",icon:"Tools",requiresAuth:!1}},{path:"/test-page",name:"TestPage",component:()=>jt(()=>import("./TestPage-B6_Uno4Z.js"),__vite__mapDeps([74,1,2,75])),meta:{title:"测试页面",icon:"Tools",requiresAuth:!1}},{path:"/data-processing",name:"DataProcessing",component:()=>jt(()=>import("./DataProcessingCenter-BKsxiNN5.js"),__vite__mapDeps([76,1,2,77])),meta:{title:"数据处理中心",icon:"Cpu",requiresAuth:!1}},{path:"/:pathMatch(.*)*",name:"NotFound",component:blt,meta:{title:"页面未找到"}}],Slt=XN({history:CN(),routes:xlt}),Dh={min:{r:0,g:0,b:0,s:0,l:0,a:0},max:{r:255,g:255,b:255,h:360,s:100,l:100,a:1},clamp:{r:e=>e>=255?255:e<0?0:e,g:e=>e>=255?255:e<0?0:e,b:e=>e>=255?255:e<0?0:e,h:e=>e%360,s:e=>e>=100?100:e<0?0:e,l:e=>e>=100?100:e<0?0:e,a:e=>e>=1?1:e<0?0:e},toLinear:e=>{const t=e/255;return e>.03928?Math.pow((t+.055)/1.055,2.4):t/12.92},hue2rgb:(e,t,a)=>(a<0&&(a+=1),a>1&&(a-=1),a<1/6?e+(t-e)*6*a:a<1/2?t:a<2/3?e+(t-e)*(2/3-a)*6:e),hsl2rgb:({h:e,s:t,l:a},r)=>{if(!t)return a*2.55;e/=360,t/=100,a/=100;const n=a<.5?a*(1+t):a+t-a*t,i=2*a-n;switch(r){case"r":return Dh.hue2rgb(i,n,e+1/3)*255;case"g":return Dh.hue2rgb(i,n,e)*255;case"b":return Dh.hue2rgb(i,n,e-1/3)*255}},rgb2hsl:({r:e,g:t,b:a},r)=>{e/=255,t/=255,a/=255;const n=Math.max(e,t,a),i=Math.min(e,t,a),o=(n+i)/2;if(r==="l")return o*100;if(n===i)return 0;const s=n-i,l=o>.5?s/(2-n-i):s/(n+i);if(r==="s")return l*100;switch(n){case e:return((t-a)/s+(t<a?6:0))*60;case t:return((a-e)/s+2)*60;case a:return((e-t)/s+4)*60;default:return-1}}},wlt={clamp:(e,t,a)=>t>a?Math.min(t,Math.max(a,e)):Math.min(a,Math.max(t,e)),round:e=>Math.round(e*1e10)/1e10},Clt={dec2hex:e=>{const t=Math.round(e).toString(16);return t.length>1?t:`0${t}`}},Ce={channel:Dh,lang:wlt,unit:Clt},vi={};for(let e=0;e<=255;e++)vi[e]=Ce.unit.dec2hex(e);const qa={ALL:0,RGB:1,HSL:2};class Tlt{constructor(){this.type=qa.ALL}get(){return this.type}set(t){if(this.type&&this.type!==t)throw new Error("Cannot change both RGB and HSL channels at the same time");this.type=t}reset(){this.type=qa.ALL}is(t){return this.type===t}}class Alt{constructor(t,a){this.color=a,this.changed=!1,this.data=t,this.type=new Tlt}set(t,a){return this.color=a,this.changed=!1,this.data=t,this.type.type=qa.ALL,this}_ensureHSL(){const t=this.data,{h:a,s:r,l:n}=t;a===void 0&&(t.h=Ce.channel.rgb2hsl(t,"h")),r===void 0&&(t.s=Ce.channel.rgb2hsl(t,"s")),n===void 0&&(t.l=Ce.channel.rgb2hsl(t,"l"))}_ensureRGB(){const t=this.data,{r:a,g:r,b:n}=t;a===void 0&&(t.r=Ce.channel.hsl2rgb(t,"r")),r===void 0&&(t.g=Ce.channel.hsl2rgb(t,"g")),n===void 0&&(t.b=Ce.channel.hsl2rgb(t,"b"))}get r(){const t=this.data,a=t.r;return!this.type.is(qa.HSL)&&a!==void 0?a:(this._ensureHSL(),Ce.channel.hsl2rgb(t,"r"))}get g(){const t=this.data,a=t.g;return!this.type.is(qa.HSL)&&a!==void 0?a:(this._ensureHSL(),Ce.channel.hsl2rgb(t,"g"))}get b(){const t=this.data,a=t.b;return!this.type.is(qa.HSL)&&a!==void 0?a:(this._ensureHSL(),Ce.channel.hsl2rgb(t,"b"))}get h(){const t=this.data,a=t.h;return!this.type.is(qa.RGB)&&a!==void 0?a:(this._ensureRGB(),Ce.channel.rgb2hsl(t,"h"))}get s(){const t=this.data,a=t.s;return!this.type.is(qa.RGB)&&a!==void 0?a:(this._ensureRGB(),Ce.channel.rgb2hsl(t,"s"))}get l(){const t=this.data,a=t.l;return!this.type.is(qa.RGB)&&a!==void 0?a:(this._ensureRGB(),Ce.channel.rgb2hsl(t,"l"))}get a(){return this.data.a}set r(t){this.type.set(qa.RGB),this.changed=!0,this.data.r=t}set g(t){this.type.set(qa.RGB),this.changed=!0,this.data.g=t}set b(t){this.type.set(qa.RGB),this.changed=!0,this.data.b=t}set h(t){this.type.set(qa.HSL),this.changed=!0,this.data.h=t}set s(t){this.type.set(qa.HSL),this.changed=!0,this.data.s=t}set l(t){this.type.set(qa.HSL),this.changed=!0,this.data.l=t}set a(t){this.changed=!0,this.data.a=t}}const zf=new Alt({r:0,g:0,b:0,a:0},"transparent"),xs={re:/^#((?:[a-f0-9]{2}){2,4}|[a-f0-9]{3})$/i,parse:e=>{if(e.charCodeAt(0)!==35)return;const t=e.match(xs.re);if(!t)return;const a=t[1],r=parseInt(a,16),n=a.length,i=n%4===0,o=n>4,s=o?1:17,l=o?8:4,c=i?0:-1,u=o?255:15;return zf.set({r:(r>>l*(c+3)&u)*s,g:(r>>l*(c+2)&u)*s,b:(r>>l*(c+1)&u)*s,a:i?(r&u)*s/255:1},e)},stringify:e=>{const{r:t,g:a,b:r,a:n}=e;return n<1?`#${vi[Math.round(t)]}${vi[Math.round(a)]}${vi[Math.round(r)]}${vi[Math.round(n*255)]}`:`#${vi[Math.round(t)]}${vi[Math.round(a)]}${vi[Math.round(r)]}`}},ho={re:/^hsla?\(\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e-?\d+)?(?:deg|grad|rad|turn)?)\s*?(?:,|\s)\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e-?\d+)?%)\s*?(?:,|\s)\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e-?\d+)?%)(?:\s*?(?:,|\/)\s*?\+?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e-?\d+)?(%)?))?\s*?\)$/i,hueRe:/^(.+?)(deg|grad|rad|turn)$/i,_hue2deg:e=>{const t=e.match(ho.hueRe);if(t){const[,a,r]=t;switch(r){case"grad":return Ce.channel.clamp.h(parseFloat(a)*.9);case"rad":return Ce.channel.clamp.h(parseFloat(a)*180/Math.PI);case"turn":return Ce.channel.clamp.h(parseFloat(a)*360)}}return Ce.channel.clamp.h(parseFloat(e))},parse:e=>{const t=e.charCodeAt(0);if(t!==104&&t!==72)return;const a=e.match(ho.re);if(!a)return;const[,r,n,i,o,s]=a;return zf.set({h:ho._hue2deg(r),s:Ce.channel.clamp.s(parseFloat(n)),l:Ce.channel.clamp.l(parseFloat(i)),a:o?Ce.channel.clamp.a(s?parseFloat(o)/100:parseFloat(o)):1},e)},stringify:e=>{const{h:t,s:a,l:r,a:n}=e;return n<1?`hsla(${Ce.lang.round(t)}, ${Ce.lang.round(a)}%, ${Ce.lang.round(r)}%, ${n})`:`hsl(${Ce.lang.round(t)}, ${Ce.lang.round(a)}%, ${Ce.lang.round(r)}%)`}},vc={colors:{aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyanaqua:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",transparent:"#00000000",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},parse:e=>{e=e.toLowerCase();const t=vc.colors[e];if(t)return xs.parse(t)},stringify:e=>{const t=xs.stringify(e);for(const a in vc.colors)if(vc.colors[a]===t)return a}},tc={re:/^rgba?\(\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e\d+)?(%?))\s*?(?:,|\s)\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e\d+)?(%?))\s*?(?:,|\s)\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e\d+)?(%?))(?:\s*?(?:,|\/)\s*?\+?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e\d+)?(%?)))?\s*?\)$/i,parse:e=>{const t=e.charCodeAt(0);if(t!==114&&t!==82)return;const a=e.match(tc.re);if(!a)return;const[,r,n,i,o,s,l,c,u]=a;return zf.set({r:Ce.channel.clamp.r(n?parseFloat(r)*2.55:parseFloat(r)),g:Ce.channel.clamp.g(o?parseFloat(i)*2.55:parseFloat(i)),b:Ce.channel.clamp.b(l?parseFloat(s)*2.55:parseFloat(s)),a:c?Ce.channel.clamp.a(u?parseFloat(c)/100:parseFloat(c)):1},e)},stringify:e=>{const{r:t,g:a,b:r,a:n}=e;return n<1?`rgba(${Ce.lang.round(t)}, ${Ce.lang.round(a)}, ${Ce.lang.round(r)}, ${Ce.lang.round(n)})`:`rgb(${Ce.lang.round(t)}, ${Ce.lang.round(a)}, ${Ce.lang.round(r)})`}},Sn={format:{keyword:vc,hex:xs,rgb:tc,rgba:tc,hsl:ho,hsla:ho},parse:e=>{if(typeof e!="string")return e;const t=xs.parse(e)||tc.parse(e)||ho.parse(e)||vc.parse(e);if(t)return t;throw new Error(`Unsupported color format: "${e}"`)},stringify:e=>!e.changed&&e.color?e.color:e.type.is(qa.HSL)||e.data.r===void 0?ho.stringify(e):e.a<1||!Number.isInteger(e.r)||!Number.isInteger(e.g)||!Number.isInteger(e.b)?tc.stringify(e):xs.stringify(e)},qL=(e,t)=>{const a=Sn.parse(e);for(const r in t)a[r]=Ce.channel.clamp[r](t[r]);return Sn.stringify(a)},mc=(e,t,a=0,r=1)=>{if(typeof e!="number")return qL(e,{a:t});const n=zf.set({r:Ce.channel.clamp.r(e),g:Ce.channel.clamp.g(t),b:Ce.channel.clamp.b(a),a:Ce.channel.clamp.a(r)});return Sn.stringify(n)},klt=e=>{const{r:t,g:a,b:r}=Sn.parse(e),n=.2126*Ce.channel.toLinear(t)+.7152*Ce.channel.toLinear(a)+.0722*Ce.channel.toLinear(r);return Ce.lang.round(n)},Dlt=e=>klt(e)>=.5,Su=e=>!Dlt(e),UL=(e,t,a)=>{const r=Sn.parse(e),n=r[t],i=Ce.channel.clamp[t](n+a);return n!==i&&(r[t]=i),Sn.stringify(r)},Qt=(e,t)=>UL(e,"l",t),fe=(e,t)=>UL(e,"l",-t),pt=(e,t)=>{const a=Sn.parse(e),r={};for(const n in t)t[n]&&(r[n]=a[n]+t[n]);return qL(e,r)},Llt=(e,t,a=50)=>{const{r,g:n,b:i,a:o}=Sn.parse(e),{r:s,g:l,b:c,a:u}=Sn.parse(t),h=a/100,d=h*2-1,f=o-u,g=((d*f===-1?d:(d+f)/(1+d*f))+1)/2,v=1-g,_=r*g+s*v,y=n*g+l*v,b=i*g+c*v,w=o*h+u*(1-h);return mc(_,y,b,w)},Wt=(e,t=100)=>{const a=Sn.parse(e);return a.r=255-a.r,a.g=255-a.g,a.b=255-a.b,Llt(a,e,t)};/*! @license DOMPurify 3.2.6 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.2.6/LICENSE */const{entries:jL,setPrototypeOf:x2,isFrozen:Ilt,getPrototypeOf:Mlt,getOwnPropertyDescriptor:Elt}=Object;let{freeze:sr,seal:Or,create:YL}=Object,{apply:gm,construct:vm}=typeof Reflect<"u"&&Reflect;sr||(sr=function(t){return t});Or||(Or=function(t){return t});gm||(gm=function(t,a,r){return t.apply(a,r)});vm||(vm=function(t,a){return new t(...a)});const nh=lr(Array.prototype.forEach),Rlt=lr(Array.prototype.lastIndexOf),S2=lr(Array.prototype.pop),Bl=lr(Array.prototype.push),Plt=lr(Array.prototype.splice),Lh=lr(String.prototype.toLowerCase),Fg=lr(String.prototype.toString),w2=lr(String.prototype.match),Ol=lr(String.prototype.replace),Blt=lr(String.prototype.indexOf),Olt=lr(String.prototype.trim),Fr=lr(Object.prototype.hasOwnProperty),Ja=lr(RegExp.prototype.test),Nl=Nlt(TypeError);function lr(e){return function(t){t instanceof RegExp&&(t.lastIndex=0);for(var a=arguments.length,r=new Array(a>1?a-1:0),n=1;n<a;n++)r[n-1]=arguments[n];return gm(e,t,r)}}function Nlt(e){return function(){for(var t=arguments.length,a=new Array(t),r=0;r<t;r++)a[r]=arguments[r];return vm(e,a)}}function Re(e,t){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Lh;x2&&x2(e,null);let r=t.length;for(;r--;){let n=t[r];if(typeof n=="string"){const i=a(n);i!==n&&(Ilt(t)||(t[r]=i),n=i)}e[n]=!0}return e}function $lt(e){for(let t=0;t<e.length;t++)Fr(e,t)||(e[t]=null);return e}function Bn(e){const t=YL(null);for(const[a,r]of jL(e))Fr(e,a)&&(Array.isArray(r)?t[a]=$lt(r):r&&typeof r=="object"&&r.constructor===Object?t[a]=Bn(r):t[a]=r);return t}function $l(e,t){for(;e!==null;){const r=Elt(e,t);if(r){if(r.get)return lr(r.get);if(typeof r.value=="function")return lr(r.value)}e=Mlt(e)}function a(){return null}return a}const C2=sr(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),zg=sr(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),Vg=sr(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),Flt=sr(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),Gg=sr(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),zlt=sr(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),T2=sr(["#text"]),A2=sr(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),Hg=sr(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),k2=sr(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),ih=sr(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),Vlt=Or(/\{\{[\w\W]*|[\w\W]*\}\}/gm),Glt=Or(/<%[\w\W]*|[\w\W]*%>/gm),Hlt=Or(/\$\{[\w\W]*/gm),Wlt=Or(/^data-[\-\w.\u00B7-\uFFFF]+$/),qlt=Or(/^aria-[\-\w]+$/),XL=Or(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp|matrix):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),Ult=Or(/^(?:\w+script|data):/i),jlt=Or(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),ZL=Or(/^html$/i),Ylt=Or(/^[a-z][.\w]*(-[.\w]+)+$/i);var D2=Object.freeze({__proto__:null,ARIA_ATTR:qlt,ATTR_WHITESPACE:jlt,CUSTOM_ELEMENT:Ylt,DATA_ATTR:Wlt,DOCTYPE_NAME:ZL,ERB_EXPR:Glt,IS_ALLOWED_URI:XL,IS_SCRIPT_OR_DATA:Ult,MUSTACHE_EXPR:Vlt,TMPLIT_EXPR:Hlt});const Fl={element:1,text:3,progressingInstruction:7,comment:8,document:9},Xlt=function(){return typeof window>"u"?null:window},Zlt=function(t,a){if(typeof t!="object"||typeof t.createPolicy!="function")return null;let r=null;const n="data-tt-policy-suffix";a&&a.hasAttribute(n)&&(r=a.getAttribute(n));const i="dompurify"+(r?"#"+r:"");try{return t.createPolicy(i,{createHTML(o){return o},createScriptURL(o){return o}})}catch{return console.warn("TrustedTypes policy "+i+" could not be created."),null}},L2=function(){return{afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}};function KL(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Xlt();const t=de=>KL(de);if(t.version="3.2.6",t.removed=[],!e||!e.document||e.document.nodeType!==Fl.document||!e.Element)return t.isSupported=!1,t;let{document:a}=e;const r=a,n=r.currentScript,{DocumentFragment:i,HTMLTemplateElement:o,Node:s,Element:l,NodeFilter:c,NamedNodeMap:u=e.NamedNodeMap||e.MozNamedAttrMap,HTMLFormElement:h,DOMParser:d,trustedTypes:f}=e,p=l.prototype,g=$l(p,"cloneNode"),v=$l(p,"remove"),_=$l(p,"nextSibling"),y=$l(p,"childNodes"),b=$l(p,"parentNode");if(typeof o=="function"){const de=a.createElement("template");de.content&&de.content.ownerDocument&&(a=de.content.ownerDocument)}let w,T="";const{implementation:C,createNodeIterator:A,createDocumentFragment:k,getElementsByTagName:L}=a,{importNode:M}=r;let P=L2();t.isSupported=typeof jL=="function"&&typeof b=="function"&&C&&C.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:E,ERB_EXPR:D,TMPLIT_EXPR:O,DATA_ATTR:B,ARIA_ATTR:R,IS_SCRIPT_OR_DATA:V,ATTR_WHITESPACE:z,CUSTOM_ELEMENT:W}=D2;let{IS_ALLOWED_URI:it}=D2,ot=null;const xt=Re({},[...C2,...zg,...Vg,...Gg,...T2]);let j=null;const mt=Re({},[...A2,...Hg,...k2,...ih]);let Tt=Object.seal(YL(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),Mt=null,et=null,ut=!0,at=!0,Q=!1,bt=!0,Dt=!1,Et=!0,ft=!1,$t=!1,Pt=!1,qt=!1,nt=!1,H=!1,tt=!0,Rt=!1;const lt="user-content-";let X=!0,At=!1,U={},st=null;const _t=Re({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let vt=null;const Ct=Re({},["audio","video","img","source","image","track"]);let St=null;const Gt=Re({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),Xt="http://www.w3.org/1998/Math/MathML",zt="http://www.w3.org/2000/svg",xe="http://www.w3.org/1999/xhtml";let Kt=xe,Ie=!1,Ne=null;const xa=Re({},[Xt,zt,xe],Fg);let we=Re({},["mi","mo","mn","ms","mtext"]),Ee=Re({},["annotation-xml"]);const Lt=Re({},["title","style","font","a","script"]);let he=null;const je=["application/xhtml+xml","text/html"],$="text/html";let rt=null,K=null;const yt=a.createElement("form"),Y=function(ct){return ct instanceof RegExp||ct instanceof Function},Zt=function(){let ct=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(K&&K===ct)){if((!ct||typeof ct!="object")&&(ct={}),ct=Bn(ct),he=je.indexOf(ct.PARSER_MEDIA_TYPE)===-1?$:ct.PARSER_MEDIA_TYPE,rt=he==="application/xhtml+xml"?Fg:Lh,ot=Fr(ct,"ALLOWED_TAGS")?Re({},ct.ALLOWED_TAGS,rt):xt,j=Fr(ct,"ALLOWED_ATTR")?Re({},ct.ALLOWED_ATTR,rt):mt,Ne=Fr(ct,"ALLOWED_NAMESPACES")?Re({},ct.ALLOWED_NAMESPACES,Fg):xa,St=Fr(ct,"ADD_URI_SAFE_ATTR")?Re(Bn(Gt),ct.ADD_URI_SAFE_ATTR,rt):Gt,vt=Fr(ct,"ADD_DATA_URI_TAGS")?Re(Bn(Ct),ct.ADD_DATA_URI_TAGS,rt):Ct,st=Fr(ct,"FORBID_CONTENTS")?Re({},ct.FORBID_CONTENTS,rt):_t,Mt=Fr(ct,"FORBID_TAGS")?Re({},ct.FORBID_TAGS,rt):Bn({}),et=Fr(ct,"FORBID_ATTR")?Re({},ct.FORBID_ATTR,rt):Bn({}),U=Fr(ct,"USE_PROFILES")?ct.USE_PROFILES:!1,ut=ct.ALLOW_ARIA_ATTR!==!1,at=ct.ALLOW_DATA_ATTR!==!1,Q=ct.ALLOW_UNKNOWN_PROTOCOLS||!1,bt=ct.ALLOW_SELF_CLOSE_IN_ATTR!==!1,Dt=ct.SAFE_FOR_TEMPLATES||!1,Et=ct.SAFE_FOR_XML!==!1,ft=ct.WHOLE_DOCUMENT||!1,qt=ct.RETURN_DOM||!1,nt=ct.RETURN_DOM_FRAGMENT||!1,H=ct.RETURN_TRUSTED_TYPE||!1,Pt=ct.FORCE_BODY||!1,tt=ct.SANITIZE_DOM!==!1,Rt=ct.SANITIZE_NAMED_PROPS||!1,X=ct.KEEP_CONTENT!==!1,At=ct.IN_PLACE||!1,it=ct.ALLOWED_URI_REGEXP||XL,Kt=ct.NAMESPACE||xe,we=ct.MATHML_TEXT_INTEGRATION_POINTS||we,Ee=ct.HTML_INTEGRATION_POINTS||Ee,Tt=ct.CUSTOM_ELEMENT_HANDLING||{},ct.CUSTOM_ELEMENT_HANDLING&&Y(ct.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(Tt.tagNameCheck=ct.CUSTOM_ELEMENT_HANDLING.tagNameCheck),ct.CUSTOM_ELEMENT_HANDLING&&Y(ct.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(Tt.attributeNameCheck=ct.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),ct.CUSTOM_ELEMENT_HANDLING&&typeof ct.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(Tt.allowCustomizedBuiltInElements=ct.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),Dt&&(at=!1),nt&&(qt=!0),U&&(ot=Re({},T2),j=[],U.html===!0&&(Re(ot,C2),Re(j,A2)),U.svg===!0&&(Re(ot,zg),Re(j,Hg),Re(j,ih)),U.svgFilters===!0&&(Re(ot,Vg),Re(j,Hg),Re(j,ih)),U.mathMl===!0&&(Re(ot,Gg),Re(j,k2),Re(j,ih))),ct.ADD_TAGS&&(ot===xt&&(ot=Bn(ot)),Re(ot,ct.ADD_TAGS,rt)),ct.ADD_ATTR&&(j===mt&&(j=Bn(j)),Re(j,ct.ADD_ATTR,rt)),ct.ADD_URI_SAFE_ATTR&&Re(St,ct.ADD_URI_SAFE_ATTR,rt),ct.FORBID_CONTENTS&&(st===_t&&(st=Bn(st)),Re(st,ct.FORBID_CONTENTS,rt)),X&&(ot["#text"]=!0),ft&&Re(ot,["html","head","body"]),ot.table&&(Re(ot,["tbody"]),delete Mt.tbody),ct.TRUSTED_TYPES_POLICY){if(typeof ct.TRUSTED_TYPES_POLICY.createHTML!="function")throw Nl('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof ct.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw Nl('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');w=ct.TRUSTED_TYPES_POLICY,T=w.createHTML("")}else w===void 0&&(w=Zlt(f,n)),w!==null&&typeof T=="string"&&(T=w.createHTML(""));sr&&sr(ct),K=ct}},Ye=Re({},[...zg,...Vg,...Flt]),De=Re({},[...Gg,...zlt]),lp=function(ct){let Bt=b(ct);(!Bt||!Bt.tagName)&&(Bt={namespaceURI:Kt,tagName:"template"});const re=Lh(ct.tagName),ta=Lh(Bt.tagName);return Ne[ct.namespaceURI]?ct.namespaceURI===zt?Bt.namespaceURI===xe?re==="svg":Bt.namespaceURI===Xt?re==="svg"&&(ta==="annotation-xml"||we[ta]):!!Ye[re]:ct.namespaceURI===Xt?Bt.namespaceURI===xe?re==="math":Bt.namespaceURI===zt?re==="math"&&Ee[ta]:!!De[re]:ct.namespaceURI===xe?Bt.namespaceURI===zt&&!Ee[ta]||Bt.namespaceURI===Xt&&!we[ta]?!1:!De[re]&&(Lt[re]||!Ye[re]):!!(he==="application/xhtml+xml"&&Ne[ct.namespaceURI]):!1},en=function(ct){Bl(t.removed,{element:ct});try{b(ct).removeChild(ct)}catch{v(ct)}},qo=function(ct,Bt){try{Bl(t.removed,{attribute:Bt.getAttributeNode(ct),from:Bt})}catch{Bl(t.removed,{attribute:null,from:Bt})}if(Bt.removeAttribute(ct),ct==="is")if(qt||nt)try{en(Bt)}catch{}else try{Bt.setAttribute(ct,"")}catch{}},N_=function(ct){let Bt=null,re=null;if(Pt)ct="<remove></remove>"+ct;else{const Sa=w2(ct,/^[\r\n\t ]+/);re=Sa&&Sa[0]}he==="application/xhtml+xml"&&Kt===xe&&(ct='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+ct+"</body></html>");const ta=w?w.createHTML(ct):ct;if(Kt===xe)try{Bt=new d().parseFromString(ta,he)}catch{}if(!Bt||!Bt.documentElement){Bt=C.createDocument(Kt,"template",null);try{Bt.documentElement.innerHTML=Ie?T:ta}catch{}}const Ga=Bt.body||Bt.documentElement;return ct&&re&&Ga.insertBefore(a.createTextNode(re),Ga.childNodes[0]||null),Kt===xe?L.call(Bt,ft?"html":"body")[0]:ft?Bt.documentElement:Ga},$_=function(ct){return A.call(ct.ownerDocument||ct,ct,c.SHOW_ELEMENT|c.SHOW_COMMENT|c.SHOW_TEXT|c.SHOW_PROCESSING_INSTRUCTION|c.SHOW_CDATA_SECTION,null)},cp=function(ct){return ct instanceof h&&(typeof ct.nodeName!="string"||typeof ct.textContent!="string"||typeof ct.removeChild!="function"||!(ct.attributes instanceof u)||typeof ct.removeAttribute!="function"||typeof ct.setAttribute!="function"||typeof ct.namespaceURI!="string"||typeof ct.insertBefore!="function"||typeof ct.hasChildNodes!="function")},F_=function(ct){return typeof s=="function"&&ct instanceof s};function Ln(de,ct,Bt){nh(de,re=>{re.call(t,ct,Bt,K)})}const z_=function(ct){let Bt=null;if(Ln(P.beforeSanitizeElements,ct,null),cp(ct))return en(ct),!0;const re=rt(ct.nodeName);if(Ln(P.uponSanitizeElement,ct,{tagName:re,allowedTags:ot}),Et&&ct.hasChildNodes()&&!F_(ct.firstElementChild)&&Ja(/<[/\w!]/g,ct.innerHTML)&&Ja(/<[/\w!]/g,ct.textContent)||ct.nodeType===Fl.progressingInstruction||Et&&ct.nodeType===Fl.comment&&Ja(/<[/\w]/g,ct.data))return en(ct),!0;if(!ot[re]||Mt[re]){if(!Mt[re]&&G_(re)&&(Tt.tagNameCheck instanceof RegExp&&Ja(Tt.tagNameCheck,re)||Tt.tagNameCheck instanceof Function&&Tt.tagNameCheck(re)))return!1;if(X&&!st[re]){const ta=b(ct)||ct.parentNode,Ga=y(ct)||ct.childNodes;if(Ga&&ta){const Sa=Ga.length;for(let cr=Sa-1;cr>=0;--cr){const In=g(Ga[cr],!0);In.__removalCount=(ct.__removalCount||0)+1,ta.insertBefore(In,_(ct))}}}return en(ct),!0}return ct instanceof l&&!lp(ct)||(re==="noscript"||re==="noembed"||re==="noframes")&&Ja(/<\/no(script|embed|frames)/i,ct.innerHTML)?(en(ct),!0):(Dt&&ct.nodeType===Fl.text&&(Bt=ct.textContent,nh([E,D,O],ta=>{Bt=Ol(Bt,ta," ")}),ct.textContent!==Bt&&(Bl(t.removed,{element:ct.cloneNode()}),ct.textContent=Bt)),Ln(P.afterSanitizeElements,ct,null),!1)},V_=function(ct,Bt,re){if(tt&&(Bt==="id"||Bt==="name")&&(re in a||re in yt))return!1;if(!(at&&!et[Bt]&&Ja(B,Bt))){if(!(ut&&Ja(R,Bt))){if(!j[Bt]||et[Bt]){if(!(G_(ct)&&(Tt.tagNameCheck instanceof RegExp&&Ja(Tt.tagNameCheck,ct)||Tt.tagNameCheck instanceof Function&&Tt.tagNameCheck(ct))&&(Tt.attributeNameCheck instanceof RegExp&&Ja(Tt.attributeNameCheck,Bt)||Tt.attributeNameCheck instanceof Function&&Tt.attributeNameCheck(Bt))||Bt==="is"&&Tt.allowCustomizedBuiltInElements&&(Tt.tagNameCheck instanceof RegExp&&Ja(Tt.tagNameCheck,re)||Tt.tagNameCheck instanceof Function&&Tt.tagNameCheck(re))))return!1}else if(!St[Bt]){if(!Ja(it,Ol(re,z,""))){if(!((Bt==="src"||Bt==="xlink:href"||Bt==="href")&&ct!=="script"&&Blt(re,"data:")===0&&vt[ct])){if(!(Q&&!Ja(V,Ol(re,z,"")))){if(re)return!1}}}}}}return!0},G_=function(ct){return ct!=="annotation-xml"&&w2(ct,W)},H_=function(ct){Ln(P.beforeSanitizeAttributes,ct,null);const{attributes:Bt}=ct;if(!Bt||cp(ct))return;const re={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:j,forceKeepAttr:void 0};let ta=Bt.length;for(;ta--;){const Ga=Bt[ta],{name:Sa,namespaceURI:cr,value:In}=Ga,bl=rt(Sa),up=In;let Ha=Sa==="value"?up:Olt(up);if(re.attrName=bl,re.attrValue=Ha,re.keepAttr=!0,re.forceKeepAttr=void 0,Ln(P.uponSanitizeAttribute,ct,re),Ha=re.attrValue,Rt&&(bl==="id"||bl==="name")&&(qo(Sa,ct),Ha=lt+Ha),Et&&Ja(/((--!?|])>)|<\/(style|title)/i,Ha)){qo(Sa,ct);continue}if(re.forceKeepAttr)continue;if(!re.keepAttr){qo(Sa,ct);continue}if(!bt&&Ja(/\/>/i,Ha)){qo(Sa,ct);continue}Dt&&nh([E,D,O],q_=>{Ha=Ol(Ha,q_," ")});const W_=rt(ct.nodeName);if(!V_(W_,bl,Ha)){qo(Sa,ct);continue}if(w&&typeof f=="object"&&typeof f.getAttributeType=="function"&&!cr)switch(f.getAttributeType(W_,bl)){case"TrustedHTML":{Ha=w.createHTML(Ha);break}case"TrustedScriptURL":{Ha=w.createScriptURL(Ha);break}}if(Ha!==up)try{cr?ct.setAttributeNS(cr,Sa,Ha):ct.setAttribute(Sa,Ha),cp(ct)?en(ct):S2(t.removed)}catch{qo(Sa,ct)}}Ln(P.afterSanitizeAttributes,ct,null)},jB=function de(ct){let Bt=null;const re=$_(ct);for(Ln(P.beforeSanitizeShadowDOM,ct,null);Bt=re.nextNode();)Ln(P.uponSanitizeShadowNode,Bt,null),z_(Bt),H_(Bt),Bt.content instanceof i&&de(Bt.content);Ln(P.afterSanitizeShadowDOM,ct,null)};return t.sanitize=function(de){let ct=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Bt=null,re=null,ta=null,Ga=null;if(Ie=!de,Ie&&(de="<!-->"),typeof de!="string"&&!F_(de))if(typeof de.toString=="function"){if(de=de.toString(),typeof de!="string")throw Nl("dirty is not a string, aborting")}else throw Nl("toString is not a function");if(!t.isSupported)return de;if($t||Zt(ct),t.removed=[],typeof de=="string"&&(At=!1),At){if(de.nodeName){const In=rt(de.nodeName);if(!ot[In]||Mt[In])throw Nl("root node is forbidden and cannot be sanitized in-place")}}else if(de instanceof s)Bt=N_("<!---->"),re=Bt.ownerDocument.importNode(de,!0),re.nodeType===Fl.element&&re.nodeName==="BODY"||re.nodeName==="HTML"?Bt=re:Bt.appendChild(re);else{if(!qt&&!Dt&&!ft&&de.indexOf("<")===-1)return w&&H?w.createHTML(de):de;if(Bt=N_(de),!Bt)return qt?null:H?T:""}Bt&&Pt&&en(Bt.firstChild);const Sa=$_(At?de:Bt);for(;ta=Sa.nextNode();)z_(ta),H_(ta),ta.content instanceof i&&jB(ta.content);if(At)return de;if(qt){if(nt)for(Ga=k.call(Bt.ownerDocument);Bt.firstChild;)Ga.appendChild(Bt.firstChild);else Ga=Bt;return(j.shadowroot||j.shadowrootmode)&&(Ga=M.call(r,Ga,!0)),Ga}let cr=ft?Bt.outerHTML:Bt.innerHTML;return ft&&ot["!doctype"]&&Bt.ownerDocument&&Bt.ownerDocument.doctype&&Bt.ownerDocument.doctype.name&&Ja(ZL,Bt.ownerDocument.doctype.name)&&(cr="<!DOCTYPE "+Bt.ownerDocument.doctype.name+`>
`+cr),Dt&&nh([E,D,O],In=>{cr=Ol(cr,In," ")}),w&&H?w.createHTML(cr):cr},t.setConfig=function(){let de=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Zt(de),$t=!0},t.clearConfig=function(){K=null,$t=!1},t.isValidAttribute=function(de,ct,Bt){K||Zt({});const re=rt(de),ta=rt(ct);return V_(re,ta,Bt)},t.addHook=function(de,ct){typeof ct=="function"&&Bl(P[de],ct)},t.removeHook=function(de,ct){if(ct!==void 0){const Bt=Rlt(P[de],ct);return Bt===-1?void 0:Plt(P[de],Bt,1)[0]}return S2(P[de])},t.removeHooks=function(de){P[de]=[]},t.removeAllHooks=function(){P=L2()},t}var Ys=KL(),JL=Object.defineProperty,I=(e,t)=>JL(e,"name",{value:t,configurable:!0}),Klt=(e,t)=>{for(var a in t)JL(e,a,{get:t[a],enumerable:!0})},Rn={trace:0,debug:1,info:2,warn:3,error:4,fatal:5},It={trace:I((...e)=>{},"trace"),debug:I((...e)=>{},"debug"),info:I((...e)=>{},"info"),warn:I((...e)=>{},"warn"),error:I((...e)=>{},"error"),fatal:I((...e)=>{},"fatal")},F0=I(function(e="fatal"){let t=Rn.fatal;typeof e=="string"?e.toLowerCase()in Rn&&(t=Rn[e]):typeof e=="number"&&(t=e),It.trace=()=>{},It.debug=()=>{},It.info=()=>{},It.warn=()=>{},It.error=()=>{},It.fatal=()=>{},t<=Rn.fatal&&(It.fatal=console.error?console.error.bind(console,kr("FATAL"),"color: orange"):console.log.bind(console,"\x1B[35m",kr("FATAL"))),t<=Rn.error&&(It.error=console.error?console.error.bind(console,kr("ERROR"),"color: orange"):console.log.bind(console,"\x1B[31m",kr("ERROR"))),t<=Rn.warn&&(It.warn=console.warn?console.warn.bind(console,kr("WARN"),"color: orange"):console.log.bind(console,"\x1B[33m",kr("WARN"))),t<=Rn.info&&(It.info=console.info?console.info.bind(console,kr("INFO"),"color: lightblue"):console.log.bind(console,"\x1B[34m",kr("INFO"))),t<=Rn.debug&&(It.debug=console.debug?console.debug.bind(console,kr("DEBUG"),"color: lightgreen"):console.log.bind(console,"\x1B[32m",kr("DEBUG"))),t<=Rn.trace&&(It.trace=console.debug?console.debug.bind(console,kr("TRACE"),"color: lightgreen"):console.log.bind(console,"\x1B[32m",kr("TRACE")))},"setLogLevel"),kr=I(e=>`%c${R3().format("ss.SSS")} : ${e} : `,"format"),QL=/^-{3}\s*[\n\r](.*?)[\n\r]-{3}\s*[\n\r]+/s,yc=/%{2}{\s*(?:(\w+)\s*:|(\w+))\s*(?:(\w+)|((?:(?!}%{2}).|\r?\n)*))?\s*(?:}%{2})?/gi,Jlt=/\s*%%.*\n/gm,Cs,tI=(Cs=class extends Error{constructor(t){super(t),this.name="UnknownDiagramError"}},I(Cs,"UnknownDiagramError"),Cs),Xs={},z0=I(function(e,t){e=e.replace(QL,"").replace(yc,"").replace(Jlt,`
`);for(const[a,{detector:r}]of Object.entries(Xs))if(r(e,t))return a;throw new tI(`No diagram type detected matching given configuration for text: ${e}`)},"detectType"),mm=I((...e)=>{for(const{id:t,detector:a,loader:r}of e)eI(t,a,r)},"registerLazyLoadedDiagrams"),eI=I((e,t,a)=>{Xs[e]&&It.warn(`Detector with key ${e} already exists. Overwriting.`),Xs[e]={detector:t,loader:a},It.debug(`Detector with key ${e} added${a?" with loader":""}`)},"addDetector"),Qlt=I(e=>Xs[e].loader,"getDiagramLoader"),ym=I((e,t,{depth:a=2,clobber:r=!1}={})=>{const n={depth:a,clobber:r};return Array.isArray(t)&&!Array.isArray(e)?(t.forEach(i=>ym(e,i,n)),e):Array.isArray(t)&&Array.isArray(e)?(t.forEach(i=>{e.includes(i)||e.push(i)}),e):e===void 0||a<=0?e!=null&&typeof e=="object"&&typeof t=="object"?Object.assign(e,t):t:(t!==void 0&&typeof e=="object"&&typeof t=="object"&&Object.keys(t).forEach(i=>{typeof t[i]=="object"&&(e[i]===void 0||typeof e[i]=="object")?(e[i]===void 0&&(e[i]=Array.isArray(t[i])?[]:{}),e[i]=ym(e[i],t[i],{depth:a-1,clobber:r})):(r||typeof e[i]!="object"&&typeof t[i]!="object")&&(e[i]=t[i])}),e)},"assignWithDepth"),Na=ym,Vf="#ffffff",Gf="#f2f2f2",er=I((e,t)=>t?pt(e,{s:-40,l:10}):pt(e,{s:-40,l:-10}),"mkBorder"),Ts,tct=(Ts=class{constructor(){this.background="#f4f4f4",this.primaryColor="#fff4dd",this.noteBkgColor="#fff5ad",this.noteTextColor="#333",this.THEME_COLOR_LIMIT=12,this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px"}updateColors(){var a,r,n,i,o,s,l,c,u,h,d,f,p,g,v,_,y,b,w,T,C;if(this.primaryTextColor=this.primaryTextColor||(this.darkMode?"#eee":"#333"),this.secondaryColor=this.secondaryColor||pt(this.primaryColor,{h:-120}),this.tertiaryColor=this.tertiaryColor||pt(this.primaryColor,{h:180,l:5}),this.primaryBorderColor=this.primaryBorderColor||er(this.primaryColor,this.darkMode),this.secondaryBorderColor=this.secondaryBorderColor||er(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=this.tertiaryBorderColor||er(this.tertiaryColor,this.darkMode),this.noteBorderColor=this.noteBorderColor||er(this.noteBkgColor,this.darkMode),this.noteBkgColor=this.noteBkgColor||"#fff5ad",this.noteTextColor=this.noteTextColor||"#333",this.secondaryTextColor=this.secondaryTextColor||Wt(this.secondaryColor),this.tertiaryTextColor=this.tertiaryTextColor||Wt(this.tertiaryColor),this.lineColor=this.lineColor||Wt(this.background),this.arrowheadColor=this.arrowheadColor||Wt(this.background),this.textColor=this.textColor||this.primaryTextColor,this.border2=this.border2||this.tertiaryBorderColor,this.nodeBkg=this.nodeBkg||this.primaryColor,this.mainBkg=this.mainBkg||this.primaryColor,this.nodeBorder=this.nodeBorder||this.primaryBorderColor,this.clusterBkg=this.clusterBkg||this.tertiaryColor,this.clusterBorder=this.clusterBorder||this.tertiaryBorderColor,this.defaultLinkColor=this.defaultLinkColor||this.lineColor,this.titleColor=this.titleColor||this.tertiaryTextColor,this.edgeLabelBackground=this.edgeLabelBackground||(this.darkMode?fe(this.secondaryColor,30):this.secondaryColor),this.nodeTextColor=this.nodeTextColor||this.primaryTextColor,this.actorBorder=this.actorBorder||this.primaryBorderColor,this.actorBkg=this.actorBkg||this.mainBkg,this.actorTextColor=this.actorTextColor||this.primaryTextColor,this.actorLineColor=this.actorLineColor||this.actorBorder,this.labelBoxBkgColor=this.labelBoxBkgColor||this.actorBkg,this.signalColor=this.signalColor||this.textColor,this.signalTextColor=this.signalTextColor||this.textColor,this.labelBoxBorderColor=this.labelBoxBorderColor||this.actorBorder,this.labelTextColor=this.labelTextColor||this.actorTextColor,this.loopTextColor=this.loopTextColor||this.actorTextColor,this.activationBorderColor=this.activationBorderColor||fe(this.secondaryColor,10),this.activationBkgColor=this.activationBkgColor||this.secondaryColor,this.sequenceNumberColor=this.sequenceNumberColor||Wt(this.lineColor),this.sectionBkgColor=this.sectionBkgColor||this.tertiaryColor,this.altSectionBkgColor=this.altSectionBkgColor||"white",this.sectionBkgColor=this.sectionBkgColor||this.secondaryColor,this.sectionBkgColor2=this.sectionBkgColor2||this.primaryColor,this.excludeBkgColor=this.excludeBkgColor||"#eeeeee",this.taskBorderColor=this.taskBorderColor||this.primaryBorderColor,this.taskBkgColor=this.taskBkgColor||this.primaryColor,this.activeTaskBorderColor=this.activeTaskBorderColor||this.primaryColor,this.activeTaskBkgColor=this.activeTaskBkgColor||Qt(this.primaryColor,23),this.gridColor=this.gridColor||"lightgrey",this.doneTaskBkgColor=this.doneTaskBkgColor||"lightgrey",this.doneTaskBorderColor=this.doneTaskBorderColor||"grey",this.critBorderColor=this.critBorderColor||"#ff8888",this.critBkgColor=this.critBkgColor||"red",this.todayLineColor=this.todayLineColor||"red",this.vertLineColor=this.vertLineColor||"navy",this.taskTextColor=this.taskTextColor||this.textColor,this.taskTextOutsideColor=this.taskTextOutsideColor||this.textColor,this.taskTextLightColor=this.taskTextLightColor||this.textColor,this.taskTextColor=this.taskTextColor||this.primaryTextColor,this.taskTextDarkColor=this.taskTextDarkColor||this.textColor,this.taskTextClickableColor=this.taskTextClickableColor||"#003163",this.personBorder=this.personBorder||this.primaryBorderColor,this.personBkg=this.personBkg||this.mainBkg,this.darkMode?(this.rowOdd=this.rowOdd||fe(this.mainBkg,5)||"#ffffff",this.rowEven=this.rowEven||fe(this.mainBkg,10)):(this.rowOdd=this.rowOdd||Qt(this.mainBkg,75)||"#ffffff",this.rowEven=this.rowEven||Qt(this.mainBkg,5)),this.transitionColor=this.transitionColor||this.lineColor,this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||this.tertiaryColor,this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.compositeBorder=this.compositeBorder||this.nodeBorder,this.innerEndBackground=this.nodeBorder,this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.transitionColor=this.transitionColor||this.lineColor,this.specialStateColor=this.lineColor,this.cScale0=this.cScale0||this.primaryColor,this.cScale1=this.cScale1||this.secondaryColor,this.cScale2=this.cScale2||this.tertiaryColor,this.cScale3=this.cScale3||pt(this.primaryColor,{h:30}),this.cScale4=this.cScale4||pt(this.primaryColor,{h:60}),this.cScale5=this.cScale5||pt(this.primaryColor,{h:90}),this.cScale6=this.cScale6||pt(this.primaryColor,{h:120}),this.cScale7=this.cScale7||pt(this.primaryColor,{h:150}),this.cScale8=this.cScale8||pt(this.primaryColor,{h:210,l:150}),this.cScale9=this.cScale9||pt(this.primaryColor,{h:270}),this.cScale10=this.cScale10||pt(this.primaryColor,{h:300}),this.cScale11=this.cScale11||pt(this.primaryColor,{h:330}),this.darkMode)for(let A=0;A<this.THEME_COLOR_LIMIT;A++)this["cScale"+A]=fe(this["cScale"+A],75);else for(let A=0;A<this.THEME_COLOR_LIMIT;A++)this["cScale"+A]=fe(this["cScale"+A],25);for(let A=0;A<this.THEME_COLOR_LIMIT;A++)this["cScaleInv"+A]=this["cScaleInv"+A]||Wt(this["cScale"+A]);for(let A=0;A<this.THEME_COLOR_LIMIT;A++)this.darkMode?this["cScalePeer"+A]=this["cScalePeer"+A]||Qt(this["cScale"+A],10):this["cScalePeer"+A]=this["cScalePeer"+A]||fe(this["cScale"+A],10);this.scaleLabelColor=this.scaleLabelColor||this.labelTextColor;for(let A=0;A<this.THEME_COLOR_LIMIT;A++)this["cScaleLabel"+A]=this["cScaleLabel"+A]||this.scaleLabelColor;const t=this.darkMode?-4:-1;for(let A=0;A<5;A++)this["surface"+A]=this["surface"+A]||pt(this.mainBkg,{h:180,s:-15,l:t*(5+A*3)}),this["surfacePeer"+A]=this["surfacePeer"+A]||pt(this.mainBkg,{h:180,s:-15,l:t*(8+A*3)});this.classText=this.classText||this.textColor,this.fillType0=this.fillType0||this.primaryColor,this.fillType1=this.fillType1||this.secondaryColor,this.fillType2=this.fillType2||pt(this.primaryColor,{h:64}),this.fillType3=this.fillType3||pt(this.secondaryColor,{h:64}),this.fillType4=this.fillType4||pt(this.primaryColor,{h:-64}),this.fillType5=this.fillType5||pt(this.secondaryColor,{h:-64}),this.fillType6=this.fillType6||pt(this.primaryColor,{h:128}),this.fillType7=this.fillType7||pt(this.secondaryColor,{h:128}),this.pie1=this.pie1||this.primaryColor,this.pie2=this.pie2||this.secondaryColor,this.pie3=this.pie3||this.tertiaryColor,this.pie4=this.pie4||pt(this.primaryColor,{l:-10}),this.pie5=this.pie5||pt(this.secondaryColor,{l:-10}),this.pie6=this.pie6||pt(this.tertiaryColor,{l:-10}),this.pie7=this.pie7||pt(this.primaryColor,{h:60,l:-10}),this.pie8=this.pie8||pt(this.primaryColor,{h:-60,l:-10}),this.pie9=this.pie9||pt(this.primaryColor,{h:120,l:0}),this.pie10=this.pie10||pt(this.primaryColor,{h:60,l:-20}),this.pie11=this.pie11||pt(this.primaryColor,{h:-60,l:-20}),this.pie12=this.pie12||pt(this.primaryColor,{h:120,l:-10}),this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOuterStrokeWidth=this.pieOuterStrokeWidth||"2px",this.pieOuterStrokeColor=this.pieOuterStrokeColor||"black",this.pieOpacity=this.pieOpacity||"0.7",this.radar={axisColor:((a=this.radar)==null?void 0:a.axisColor)||this.lineColor,axisStrokeWidth:((r=this.radar)==null?void 0:r.axisStrokeWidth)||2,axisLabelFontSize:((n=this.radar)==null?void 0:n.axisLabelFontSize)||12,curveOpacity:((i=this.radar)==null?void 0:i.curveOpacity)||.5,curveStrokeWidth:((o=this.radar)==null?void 0:o.curveStrokeWidth)||2,graticuleColor:((s=this.radar)==null?void 0:s.graticuleColor)||"#DEDEDE",graticuleStrokeWidth:((l=this.radar)==null?void 0:l.graticuleStrokeWidth)||1,graticuleOpacity:((c=this.radar)==null?void 0:c.graticuleOpacity)||.3,legendBoxSize:((u=this.radar)==null?void 0:u.legendBoxSize)||12,legendFontSize:((h=this.radar)==null?void 0:h.legendFontSize)||12},this.archEdgeColor=this.archEdgeColor||"#777",this.archEdgeArrowColor=this.archEdgeArrowColor||"#777",this.archEdgeWidth=this.archEdgeWidth||"3",this.archGroupBorderColor=this.archGroupBorderColor||"#000",this.archGroupBorderWidth=this.archGroupBorderWidth||"2px",this.quadrant1Fill=this.quadrant1Fill||this.primaryColor,this.quadrant2Fill=this.quadrant2Fill||pt(this.primaryColor,{r:5,g:5,b:5}),this.quadrant3Fill=this.quadrant3Fill||pt(this.primaryColor,{r:10,g:10,b:10}),this.quadrant4Fill=this.quadrant4Fill||pt(this.primaryColor,{r:15,g:15,b:15}),this.quadrant1TextFill=this.quadrant1TextFill||this.primaryTextColor,this.quadrant2TextFill=this.quadrant2TextFill||pt(this.primaryTextColor,{r:-5,g:-5,b:-5}),this.quadrant3TextFill=this.quadrant3TextFill||pt(this.primaryTextColor,{r:-10,g:-10,b:-10}),this.quadrant4TextFill=this.quadrant4TextFill||pt(this.primaryTextColor,{r:-15,g:-15,b:-15}),this.quadrantPointFill=this.quadrantPointFill||Su(this.quadrant1Fill)?Qt(this.quadrant1Fill):fe(this.quadrant1Fill),this.quadrantPointTextFill=this.quadrantPointTextFill||this.primaryTextColor,this.quadrantXAxisTextFill=this.quadrantXAxisTextFill||this.primaryTextColor,this.quadrantYAxisTextFill=this.quadrantYAxisTextFill||this.primaryTextColor,this.quadrantInternalBorderStrokeFill=this.quadrantInternalBorderStrokeFill||this.primaryBorderColor,this.quadrantExternalBorderStrokeFill=this.quadrantExternalBorderStrokeFill||this.primaryBorderColor,this.quadrantTitleFill=this.quadrantTitleFill||this.primaryTextColor,this.xyChart={backgroundColor:((d=this.xyChart)==null?void 0:d.backgroundColor)||this.background,titleColor:((f=this.xyChart)==null?void 0:f.titleColor)||this.primaryTextColor,xAxisTitleColor:((p=this.xyChart)==null?void 0:p.xAxisTitleColor)||this.primaryTextColor,xAxisLabelColor:((g=this.xyChart)==null?void 0:g.xAxisLabelColor)||this.primaryTextColor,xAxisTickColor:((v=this.xyChart)==null?void 0:v.xAxisTickColor)||this.primaryTextColor,xAxisLineColor:((_=this.xyChart)==null?void 0:_.xAxisLineColor)||this.primaryTextColor,yAxisTitleColor:((y=this.xyChart)==null?void 0:y.yAxisTitleColor)||this.primaryTextColor,yAxisLabelColor:((b=this.xyChart)==null?void 0:b.yAxisLabelColor)||this.primaryTextColor,yAxisTickColor:((w=this.xyChart)==null?void 0:w.yAxisTickColor)||this.primaryTextColor,yAxisLineColor:((T=this.xyChart)==null?void 0:T.yAxisLineColor)||this.primaryTextColor,plotColorPalette:((C=this.xyChart)==null?void 0:C.plotColorPalette)||"#FFF4DD,#FFD8B1,#FFA07A,#ECEFF1,#D6DBDF,#C3E0A8,#FFB6A4,#FFD74D,#738FA7,#FFFFF0"},this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||"1",this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||(this.darkMode?fe(this.secondaryColor,30):this.secondaryColor),this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=this.git0||this.primaryColor,this.git1=this.git1||this.secondaryColor,this.git2=this.git2||this.tertiaryColor,this.git3=this.git3||pt(this.primaryColor,{h:-30}),this.git4=this.git4||pt(this.primaryColor,{h:-60}),this.git5=this.git5||pt(this.primaryColor,{h:-90}),this.git6=this.git6||pt(this.primaryColor,{h:60}),this.git7=this.git7||pt(this.primaryColor,{h:120}),this.darkMode?(this.git0=Qt(this.git0,25),this.git1=Qt(this.git1,25),this.git2=Qt(this.git2,25),this.git3=Qt(this.git3,25),this.git4=Qt(this.git4,25),this.git5=Qt(this.git5,25),this.git6=Qt(this.git6,25),this.git7=Qt(this.git7,25)):(this.git0=fe(this.git0,25),this.git1=fe(this.git1,25),this.git2=fe(this.git2,25),this.git3=fe(this.git3,25),this.git4=fe(this.git4,25),this.git5=fe(this.git5,25),this.git6=fe(this.git6,25),this.git7=fe(this.git7,25)),this.gitInv0=this.gitInv0||Wt(this.git0),this.gitInv1=this.gitInv1||Wt(this.git1),this.gitInv2=this.gitInv2||Wt(this.git2),this.gitInv3=this.gitInv3||Wt(this.git3),this.gitInv4=this.gitInv4||Wt(this.git4),this.gitInv5=this.gitInv5||Wt(this.git5),this.gitInv6=this.gitInv6||Wt(this.git6),this.gitInv7=this.gitInv7||Wt(this.git7),this.branchLabelColor=this.branchLabelColor||(this.darkMode?"black":this.labelTextColor),this.gitBranchLabel0=this.gitBranchLabel0||this.branchLabelColor,this.gitBranchLabel1=this.gitBranchLabel1||this.branchLabelColor,this.gitBranchLabel2=this.gitBranchLabel2||this.branchLabelColor,this.gitBranchLabel3=this.gitBranchLabel3||this.branchLabelColor,this.gitBranchLabel4=this.gitBranchLabel4||this.branchLabelColor,this.gitBranchLabel5=this.gitBranchLabel5||this.branchLabelColor,this.gitBranchLabel6=this.gitBranchLabel6||this.branchLabelColor,this.gitBranchLabel7=this.gitBranchLabel7||this.branchLabelColor,this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||Vf,this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||Gf}calculate(t){if(typeof t!="object"){this.updateColors();return}const a=Object.keys(t);a.forEach(r=>{this[r]=t[r]}),this.updateColors(),a.forEach(r=>{this[r]=t[r]})}},I(Ts,"Theme"),Ts),ect=I(e=>{const t=new tct;return t.calculate(e),t},"getThemeVariables"),As,act=(As=class{constructor(){this.background="#333",this.primaryColor="#1f2020",this.secondaryColor=Qt(this.primaryColor,16),this.tertiaryColor=pt(this.primaryColor,{h:-160}),this.primaryBorderColor=Wt(this.background),this.secondaryBorderColor=er(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=er(this.tertiaryColor,this.darkMode),this.primaryTextColor=Wt(this.primaryColor),this.secondaryTextColor=Wt(this.secondaryColor),this.tertiaryTextColor=Wt(this.tertiaryColor),this.lineColor=Wt(this.background),this.textColor=Wt(this.background),this.mainBkg="#1f2020",this.secondBkg="calculated",this.mainContrastColor="lightgrey",this.darkTextColor=Qt(Wt("#323D47"),10),this.lineColor="calculated",this.border1="#ccc",this.border2=mc(255,255,255,.25),this.arrowheadColor="calculated",this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px",this.labelBackground="#181818",this.textColor="#ccc",this.THEME_COLOR_LIMIT=12,this.nodeBkg="calculated",this.nodeBorder="calculated",this.clusterBkg="calculated",this.clusterBorder="calculated",this.defaultLinkColor="calculated",this.titleColor="#F9FFFE",this.edgeLabelBackground="calculated",this.actorBorder="calculated",this.actorBkg="calculated",this.actorTextColor="calculated",this.actorLineColor="calculated",this.signalColor="calculated",this.signalTextColor="calculated",this.labelBoxBkgColor="calculated",this.labelBoxBorderColor="calculated",this.labelTextColor="calculated",this.loopTextColor="calculated",this.noteBorderColor="calculated",this.noteBkgColor="#fff5ad",this.noteTextColor="calculated",this.activationBorderColor="calculated",this.activationBkgColor="calculated",this.sequenceNumberColor="black",this.sectionBkgColor=fe("#EAE8D9",30),this.altSectionBkgColor="calculated",this.sectionBkgColor2="#EAE8D9",this.excludeBkgColor=fe(this.sectionBkgColor,10),this.taskBorderColor=mc(255,255,255,70),this.taskBkgColor="calculated",this.taskTextColor="calculated",this.taskTextLightColor="calculated",this.taskTextOutsideColor="calculated",this.taskTextClickableColor="#003163",this.activeTaskBorderColor=mc(255,255,255,50),this.activeTaskBkgColor="#81B1DB",this.gridColor="calculated",this.doneTaskBkgColor="calculated",this.doneTaskBorderColor="grey",this.critBorderColor="#E83737",this.critBkgColor="#E83737",this.taskTextDarkColor="calculated",this.todayLineColor="#DB5757",this.vertLineColor="#00BFFF",this.personBorder=this.primaryBorderColor,this.personBkg=this.mainBkg,this.archEdgeColor="calculated",this.archEdgeArrowColor="calculated",this.archEdgeWidth="3",this.archGroupBorderColor=this.primaryBorderColor,this.archGroupBorderWidth="2px",this.rowOdd=this.rowOdd||Qt(this.mainBkg,5)||"#ffffff",this.rowEven=this.rowEven||fe(this.mainBkg,10),this.labelColor="calculated",this.errorBkgColor="#a44141",this.errorTextColor="#ddd"}updateColors(){var t,a,r,n,i,o,s,l,c,u,h,d,f,p,g,v,_,y,b,w,T;this.secondBkg=Qt(this.mainBkg,16),this.lineColor=this.mainContrastColor,this.arrowheadColor=this.mainContrastColor,this.nodeBkg=this.mainBkg,this.nodeBorder=this.border1,this.clusterBkg=this.secondBkg,this.clusterBorder=this.border2,this.defaultLinkColor=this.lineColor,this.edgeLabelBackground=Qt(this.labelBackground,25),this.actorBorder=this.border1,this.actorBkg=this.mainBkg,this.actorTextColor=this.mainContrastColor,this.actorLineColor=this.actorBorder,this.signalColor=this.mainContrastColor,this.signalTextColor=this.mainContrastColor,this.labelBoxBkgColor=this.actorBkg,this.labelBoxBorderColor=this.actorBorder,this.labelTextColor=this.mainContrastColor,this.loopTextColor=this.mainContrastColor,this.noteBorderColor=this.secondaryBorderColor,this.noteBkgColor=this.secondBkg,this.noteTextColor=this.secondaryTextColor,this.activationBorderColor=this.border1,this.activationBkgColor=this.secondBkg,this.altSectionBkgColor=this.background,this.taskBkgColor=Qt(this.mainBkg,23),this.taskTextColor=this.darkTextColor,this.taskTextLightColor=this.mainContrastColor,this.taskTextOutsideColor=this.taskTextLightColor,this.gridColor=this.mainContrastColor,this.doneTaskBkgColor=this.mainContrastColor,this.taskTextDarkColor=this.darkTextColor,this.archEdgeColor=this.lineColor,this.archEdgeArrowColor=this.lineColor,this.transitionColor=this.transitionColor||this.lineColor,this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||"#555",this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.compositeBorder=this.compositeBorder||this.nodeBorder,this.innerEndBackground=this.primaryBorderColor,this.specialStateColor="#f4f4f4",this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.fillType0=this.primaryColor,this.fillType1=this.secondaryColor,this.fillType2=pt(this.primaryColor,{h:64}),this.fillType3=pt(this.secondaryColor,{h:64}),this.fillType4=pt(this.primaryColor,{h:-64}),this.fillType5=pt(this.secondaryColor,{h:-64}),this.fillType6=pt(this.primaryColor,{h:128}),this.fillType7=pt(this.secondaryColor,{h:128}),this.cScale1=this.cScale1||"#0b0000",this.cScale2=this.cScale2||"#4d1037",this.cScale3=this.cScale3||"#3f5258",this.cScale4=this.cScale4||"#4f2f1b",this.cScale5=this.cScale5||"#6e0a0a",this.cScale6=this.cScale6||"#3b0048",this.cScale7=this.cScale7||"#995a01",this.cScale8=this.cScale8||"#154706",this.cScale9=this.cScale9||"#161722",this.cScale10=this.cScale10||"#00296f",this.cScale11=this.cScale11||"#01629c",this.cScale12=this.cScale12||"#010029",this.cScale0=this.cScale0||this.primaryColor,this.cScale1=this.cScale1||this.secondaryColor,this.cScale2=this.cScale2||this.tertiaryColor,this.cScale3=this.cScale3||pt(this.primaryColor,{h:30}),this.cScale4=this.cScale4||pt(this.primaryColor,{h:60}),this.cScale5=this.cScale5||pt(this.primaryColor,{h:90}),this.cScale6=this.cScale6||pt(this.primaryColor,{h:120}),this.cScale7=this.cScale7||pt(this.primaryColor,{h:150}),this.cScale8=this.cScale8||pt(this.primaryColor,{h:210}),this.cScale9=this.cScale9||pt(this.primaryColor,{h:270}),this.cScale10=this.cScale10||pt(this.primaryColor,{h:300}),this.cScale11=this.cScale11||pt(this.primaryColor,{h:330});for(let C=0;C<this.THEME_COLOR_LIMIT;C++)this["cScaleInv"+C]=this["cScaleInv"+C]||Wt(this["cScale"+C]);for(let C=0;C<this.THEME_COLOR_LIMIT;C++)this["cScalePeer"+C]=this["cScalePeer"+C]||Qt(this["cScale"+C],10);for(let C=0;C<5;C++)this["surface"+C]=this["surface"+C]||pt(this.mainBkg,{h:30,s:-30,l:-(-10+C*4)}),this["surfacePeer"+C]=this["surfacePeer"+C]||pt(this.mainBkg,{h:30,s:-30,l:-(-7+C*4)});this.scaleLabelColor=this.scaleLabelColor||(this.darkMode?"black":this.labelTextColor);for(let C=0;C<this.THEME_COLOR_LIMIT;C++)this["cScaleLabel"+C]=this["cScaleLabel"+C]||this.scaleLabelColor;for(let C=0;C<this.THEME_COLOR_LIMIT;C++)this["pie"+C]=this["cScale"+C];this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOuterStrokeWidth=this.pieOuterStrokeWidth||"2px",this.pieOuterStrokeColor=this.pieOuterStrokeColor||"black",this.pieOpacity=this.pieOpacity||"0.7",this.quadrant1Fill=this.quadrant1Fill||this.primaryColor,this.quadrant2Fill=this.quadrant2Fill||pt(this.primaryColor,{r:5,g:5,b:5}),this.quadrant3Fill=this.quadrant3Fill||pt(this.primaryColor,{r:10,g:10,b:10}),this.quadrant4Fill=this.quadrant4Fill||pt(this.primaryColor,{r:15,g:15,b:15}),this.quadrant1TextFill=this.quadrant1TextFill||this.primaryTextColor,this.quadrant2TextFill=this.quadrant2TextFill||pt(this.primaryTextColor,{r:-5,g:-5,b:-5}),this.quadrant3TextFill=this.quadrant3TextFill||pt(this.primaryTextColor,{r:-10,g:-10,b:-10}),this.quadrant4TextFill=this.quadrant4TextFill||pt(this.primaryTextColor,{r:-15,g:-15,b:-15}),this.quadrantPointFill=this.quadrantPointFill||Su(this.quadrant1Fill)?Qt(this.quadrant1Fill):fe(this.quadrant1Fill),this.quadrantPointTextFill=this.quadrantPointTextFill||this.primaryTextColor,this.quadrantXAxisTextFill=this.quadrantXAxisTextFill||this.primaryTextColor,this.quadrantYAxisTextFill=this.quadrantYAxisTextFill||this.primaryTextColor,this.quadrantInternalBorderStrokeFill=this.quadrantInternalBorderStrokeFill||this.primaryBorderColor,this.quadrantExternalBorderStrokeFill=this.quadrantExternalBorderStrokeFill||this.primaryBorderColor,this.quadrantTitleFill=this.quadrantTitleFill||this.primaryTextColor,this.xyChart={backgroundColor:((t=this.xyChart)==null?void 0:t.backgroundColor)||this.background,titleColor:((a=this.xyChart)==null?void 0:a.titleColor)||this.primaryTextColor,xAxisTitleColor:((r=this.xyChart)==null?void 0:r.xAxisTitleColor)||this.primaryTextColor,xAxisLabelColor:((n=this.xyChart)==null?void 0:n.xAxisLabelColor)||this.primaryTextColor,xAxisTickColor:((i=this.xyChart)==null?void 0:i.xAxisTickColor)||this.primaryTextColor,xAxisLineColor:((o=this.xyChart)==null?void 0:o.xAxisLineColor)||this.primaryTextColor,yAxisTitleColor:((s=this.xyChart)==null?void 0:s.yAxisTitleColor)||this.primaryTextColor,yAxisLabelColor:((l=this.xyChart)==null?void 0:l.yAxisLabelColor)||this.primaryTextColor,yAxisTickColor:((c=this.xyChart)==null?void 0:c.yAxisTickColor)||this.primaryTextColor,yAxisLineColor:((u=this.xyChart)==null?void 0:u.yAxisLineColor)||this.primaryTextColor,plotColorPalette:((h=this.xyChart)==null?void 0:h.plotColorPalette)||"#3498db,#2ecc71,#e74c3c,#f1c40f,#bdc3c7,#ffffff,#34495e,#9b59b6,#1abc9c,#e67e22"},this.packet={startByteColor:this.primaryTextColor,endByteColor:this.primaryTextColor,labelColor:this.primaryTextColor,titleColor:this.primaryTextColor,blockStrokeColor:this.primaryTextColor,blockFillColor:this.background},this.radar={axisColor:((d=this.radar)==null?void 0:d.axisColor)||this.lineColor,axisStrokeWidth:((f=this.radar)==null?void 0:f.axisStrokeWidth)||2,axisLabelFontSize:((p=this.radar)==null?void 0:p.axisLabelFontSize)||12,curveOpacity:((g=this.radar)==null?void 0:g.curveOpacity)||.5,curveStrokeWidth:((v=this.radar)==null?void 0:v.curveStrokeWidth)||2,graticuleColor:((_=this.radar)==null?void 0:_.graticuleColor)||"#DEDEDE",graticuleStrokeWidth:((y=this.radar)==null?void 0:y.graticuleStrokeWidth)||1,graticuleOpacity:((b=this.radar)==null?void 0:b.graticuleOpacity)||.3,legendBoxSize:((w=this.radar)==null?void 0:w.legendBoxSize)||12,legendFontSize:((T=this.radar)==null?void 0:T.legendFontSize)||12},this.classText=this.primaryTextColor,this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||"1",this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||(this.darkMode?fe(this.secondaryColor,30):this.secondaryColor),this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=Qt(this.secondaryColor,20),this.git1=Qt(this.pie2||this.secondaryColor,20),this.git2=Qt(this.pie3||this.tertiaryColor,20),this.git3=Qt(this.pie4||pt(this.primaryColor,{h:-30}),20),this.git4=Qt(this.pie5||pt(this.primaryColor,{h:-60}),20),this.git5=Qt(this.pie6||pt(this.primaryColor,{h:-90}),10),this.git6=Qt(this.pie7||pt(this.primaryColor,{h:60}),10),this.git7=Qt(this.pie8||pt(this.primaryColor,{h:120}),20),this.gitInv0=this.gitInv0||Wt(this.git0),this.gitInv1=this.gitInv1||Wt(this.git1),this.gitInv2=this.gitInv2||Wt(this.git2),this.gitInv3=this.gitInv3||Wt(this.git3),this.gitInv4=this.gitInv4||Wt(this.git4),this.gitInv5=this.gitInv5||Wt(this.git5),this.gitInv6=this.gitInv6||Wt(this.git6),this.gitInv7=this.gitInv7||Wt(this.git7),this.gitBranchLabel0=this.gitBranchLabel0||Wt(this.labelTextColor),this.gitBranchLabel1=this.gitBranchLabel1||this.labelTextColor,this.gitBranchLabel2=this.gitBranchLabel2||this.labelTextColor,this.gitBranchLabel3=this.gitBranchLabel3||Wt(this.labelTextColor),this.gitBranchLabel4=this.gitBranchLabel4||this.labelTextColor,this.gitBranchLabel5=this.gitBranchLabel5||this.labelTextColor,this.gitBranchLabel6=this.gitBranchLabel6||this.labelTextColor,this.gitBranchLabel7=this.gitBranchLabel7||this.labelTextColor,this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||Qt(this.background,12),this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||Qt(this.background,2),this.nodeBorder=this.nodeBorder||"#999"}calculate(t){if(typeof t!="object"){this.updateColors();return}const a=Object.keys(t);a.forEach(r=>{this[r]=t[r]}),this.updateColors(),a.forEach(r=>{this[r]=t[r]})}},I(As,"Theme"),As),rct=I(e=>{const t=new act;return t.calculate(e),t},"getThemeVariables"),ks,nct=(ks=class{constructor(){this.background="#f4f4f4",this.primaryColor="#ECECFF",this.secondaryColor=pt(this.primaryColor,{h:120}),this.secondaryColor="#ffffde",this.tertiaryColor=pt(this.primaryColor,{h:-160}),this.primaryBorderColor=er(this.primaryColor,this.darkMode),this.secondaryBorderColor=er(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=er(this.tertiaryColor,this.darkMode),this.primaryTextColor=Wt(this.primaryColor),this.secondaryTextColor=Wt(this.secondaryColor),this.tertiaryTextColor=Wt(this.tertiaryColor),this.lineColor=Wt(this.background),this.textColor=Wt(this.background),this.background="white",this.mainBkg="#ECECFF",this.secondBkg="#ffffde",this.lineColor="#333333",this.border1="#9370DB",this.border2="#aaaa33",this.arrowheadColor="#333333",this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px",this.labelBackground="rgba(232,232,232, 0.8)",this.textColor="#333",this.THEME_COLOR_LIMIT=12,this.nodeBkg="calculated",this.nodeBorder="calculated",this.clusterBkg="calculated",this.clusterBorder="calculated",this.defaultLinkColor="calculated",this.titleColor="calculated",this.edgeLabelBackground="calculated",this.actorBorder="calculated",this.actorBkg="calculated",this.actorTextColor="black",this.actorLineColor="calculated",this.signalColor="calculated",this.signalTextColor="calculated",this.labelBoxBkgColor="calculated",this.labelBoxBorderColor="calculated",this.labelTextColor="calculated",this.loopTextColor="calculated",this.noteBorderColor="calculated",this.noteBkgColor="#fff5ad",this.noteTextColor="calculated",this.activationBorderColor="#666",this.activationBkgColor="#f4f4f4",this.sequenceNumberColor="white",this.sectionBkgColor="calculated",this.altSectionBkgColor="calculated",this.sectionBkgColor2="calculated",this.excludeBkgColor="#eeeeee",this.taskBorderColor="calculated",this.taskBkgColor="calculated",this.taskTextLightColor="calculated",this.taskTextColor=this.taskTextLightColor,this.taskTextDarkColor="calculated",this.taskTextOutsideColor=this.taskTextDarkColor,this.taskTextClickableColor="calculated",this.activeTaskBorderColor="calculated",this.activeTaskBkgColor="calculated",this.gridColor="calculated",this.doneTaskBkgColor="calculated",this.doneTaskBorderColor="calculated",this.critBorderColor="calculated",this.critBkgColor="calculated",this.todayLineColor="calculated",this.vertLineColor="calculated",this.sectionBkgColor=mc(102,102,255,.49),this.altSectionBkgColor="white",this.sectionBkgColor2="#fff400",this.taskBorderColor="#534fbc",this.taskBkgColor="#8a90dd",this.taskTextLightColor="white",this.taskTextColor="calculated",this.taskTextDarkColor="black",this.taskTextOutsideColor="calculated",this.taskTextClickableColor="#003163",this.activeTaskBorderColor="#534fbc",this.activeTaskBkgColor="#bfc7ff",this.gridColor="lightgrey",this.doneTaskBkgColor="lightgrey",this.doneTaskBorderColor="grey",this.critBorderColor="#ff8888",this.critBkgColor="red",this.todayLineColor="red",this.vertLineColor="navy",this.personBorder=this.primaryBorderColor,this.personBkg=this.mainBkg,this.archEdgeColor="calculated",this.archEdgeArrowColor="calculated",this.archEdgeWidth="3",this.archGroupBorderColor=this.primaryBorderColor,this.archGroupBorderWidth="2px",this.rowOdd="calculated",this.rowEven="calculated",this.labelColor="black",this.errorBkgColor="#552222",this.errorTextColor="#552222",this.updateColors()}updateColors(){var t,a,r,n,i,o,s,l,c,u,h,d,f,p,g,v,_,y,b,w,T;this.cScale0=this.cScale0||this.primaryColor,this.cScale1=this.cScale1||this.secondaryColor,this.cScale2=this.cScale2||this.tertiaryColor,this.cScale3=this.cScale3||pt(this.primaryColor,{h:30}),this.cScale4=this.cScale4||pt(this.primaryColor,{h:60}),this.cScale5=this.cScale5||pt(this.primaryColor,{h:90}),this.cScale6=this.cScale6||pt(this.primaryColor,{h:120}),this.cScale7=this.cScale7||pt(this.primaryColor,{h:150}),this.cScale8=this.cScale8||pt(this.primaryColor,{h:210}),this.cScale9=this.cScale9||pt(this.primaryColor,{h:270}),this.cScale10=this.cScale10||pt(this.primaryColor,{h:300}),this.cScale11=this.cScale11||pt(this.primaryColor,{h:330}),this.cScalePeer1=this.cScalePeer1||fe(this.secondaryColor,45),this.cScalePeer2=this.cScalePeer2||fe(this.tertiaryColor,40);for(let C=0;C<this.THEME_COLOR_LIMIT;C++)this["cScale"+C]=fe(this["cScale"+C],10),this["cScalePeer"+C]=this["cScalePeer"+C]||fe(this["cScale"+C],25);for(let C=0;C<this.THEME_COLOR_LIMIT;C++)this["cScaleInv"+C]=this["cScaleInv"+C]||pt(this["cScale"+C],{h:180});for(let C=0;C<5;C++)this["surface"+C]=this["surface"+C]||pt(this.mainBkg,{h:30,l:-(5+C*5)}),this["surfacePeer"+C]=this["surfacePeer"+C]||pt(this.mainBkg,{h:30,l:-(7+C*5)});if(this.scaleLabelColor=this.scaleLabelColor!=="calculated"&&this.scaleLabelColor?this.scaleLabelColor:this.labelTextColor,this.labelTextColor!=="calculated"){this.cScaleLabel0=this.cScaleLabel0||Wt(this.labelTextColor),this.cScaleLabel3=this.cScaleLabel3||Wt(this.labelTextColor);for(let C=0;C<this.THEME_COLOR_LIMIT;C++)this["cScaleLabel"+C]=this["cScaleLabel"+C]||this.labelTextColor}this.nodeBkg=this.mainBkg,this.nodeBorder=this.border1,this.clusterBkg=this.secondBkg,this.clusterBorder=this.border2,this.defaultLinkColor=this.lineColor,this.titleColor=this.textColor,this.edgeLabelBackground=this.labelBackground,this.actorBorder=Qt(this.border1,23),this.actorBkg=this.mainBkg,this.labelBoxBkgColor=this.actorBkg,this.signalColor=this.textColor,this.signalTextColor=this.textColor,this.labelBoxBorderColor=this.actorBorder,this.labelTextColor=this.actorTextColor,this.loopTextColor=this.actorTextColor,this.noteBorderColor=this.border2,this.noteTextColor=this.actorTextColor,this.actorLineColor=this.actorBorder,this.taskTextColor=this.taskTextLightColor,this.taskTextOutsideColor=this.taskTextDarkColor,this.archEdgeColor=this.lineColor,this.archEdgeArrowColor=this.lineColor,this.rowOdd=this.rowOdd||Qt(this.primaryColor,75)||"#ffffff",this.rowEven=this.rowEven||Qt(this.primaryColor,1),this.transitionColor=this.transitionColor||this.lineColor,this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||"#f0f0f0",this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.compositeBorder=this.compositeBorder||this.nodeBorder,this.innerEndBackground=this.nodeBorder,this.specialStateColor=this.lineColor,this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.transitionColor=this.transitionColor||this.lineColor,this.classText=this.primaryTextColor,this.fillType0=this.primaryColor,this.fillType1=this.secondaryColor,this.fillType2=pt(this.primaryColor,{h:64}),this.fillType3=pt(this.secondaryColor,{h:64}),this.fillType4=pt(this.primaryColor,{h:-64}),this.fillType5=pt(this.secondaryColor,{h:-64}),this.fillType6=pt(this.primaryColor,{h:128}),this.fillType7=pt(this.secondaryColor,{h:128}),this.pie1=this.pie1||this.primaryColor,this.pie2=this.pie2||this.secondaryColor,this.pie3=this.pie3||pt(this.tertiaryColor,{l:-40}),this.pie4=this.pie4||pt(this.primaryColor,{l:-10}),this.pie5=this.pie5||pt(this.secondaryColor,{l:-30}),this.pie6=this.pie6||pt(this.tertiaryColor,{l:-20}),this.pie7=this.pie7||pt(this.primaryColor,{h:60,l:-20}),this.pie8=this.pie8||pt(this.primaryColor,{h:-60,l:-40}),this.pie9=this.pie9||pt(this.primaryColor,{h:120,l:-40}),this.pie10=this.pie10||pt(this.primaryColor,{h:60,l:-40}),this.pie11=this.pie11||pt(this.primaryColor,{h:-90,l:-40}),this.pie12=this.pie12||pt(this.primaryColor,{h:120,l:-30}),this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOuterStrokeWidth=this.pieOuterStrokeWidth||"2px",this.pieOuterStrokeColor=this.pieOuterStrokeColor||"black",this.pieOpacity=this.pieOpacity||"0.7",this.quadrant1Fill=this.quadrant1Fill||this.primaryColor,this.quadrant2Fill=this.quadrant2Fill||pt(this.primaryColor,{r:5,g:5,b:5}),this.quadrant3Fill=this.quadrant3Fill||pt(this.primaryColor,{r:10,g:10,b:10}),this.quadrant4Fill=this.quadrant4Fill||pt(this.primaryColor,{r:15,g:15,b:15}),this.quadrant1TextFill=this.quadrant1TextFill||this.primaryTextColor,this.quadrant2TextFill=this.quadrant2TextFill||pt(this.primaryTextColor,{r:-5,g:-5,b:-5}),this.quadrant3TextFill=this.quadrant3TextFill||pt(this.primaryTextColor,{r:-10,g:-10,b:-10}),this.quadrant4TextFill=this.quadrant4TextFill||pt(this.primaryTextColor,{r:-15,g:-15,b:-15}),this.quadrantPointFill=this.quadrantPointFill||Su(this.quadrant1Fill)?Qt(this.quadrant1Fill):fe(this.quadrant1Fill),this.quadrantPointTextFill=this.quadrantPointTextFill||this.primaryTextColor,this.quadrantXAxisTextFill=this.quadrantXAxisTextFill||this.primaryTextColor,this.quadrantYAxisTextFill=this.quadrantYAxisTextFill||this.primaryTextColor,this.quadrantInternalBorderStrokeFill=this.quadrantInternalBorderStrokeFill||this.primaryBorderColor,this.quadrantExternalBorderStrokeFill=this.quadrantExternalBorderStrokeFill||this.primaryBorderColor,this.quadrantTitleFill=this.quadrantTitleFill||this.primaryTextColor,this.radar={axisColor:((t=this.radar)==null?void 0:t.axisColor)||this.lineColor,axisStrokeWidth:((a=this.radar)==null?void 0:a.axisStrokeWidth)||2,axisLabelFontSize:((r=this.radar)==null?void 0:r.axisLabelFontSize)||12,curveOpacity:((n=this.radar)==null?void 0:n.curveOpacity)||.5,curveStrokeWidth:((i=this.radar)==null?void 0:i.curveStrokeWidth)||2,graticuleColor:((o=this.radar)==null?void 0:o.graticuleColor)||"#DEDEDE",graticuleStrokeWidth:((s=this.radar)==null?void 0:s.graticuleStrokeWidth)||1,graticuleOpacity:((l=this.radar)==null?void 0:l.graticuleOpacity)||.3,legendBoxSize:((c=this.radar)==null?void 0:c.legendBoxSize)||12,legendFontSize:((u=this.radar)==null?void 0:u.legendFontSize)||12},this.xyChart={backgroundColor:((h=this.xyChart)==null?void 0:h.backgroundColor)||this.background,titleColor:((d=this.xyChart)==null?void 0:d.titleColor)||this.primaryTextColor,xAxisTitleColor:((f=this.xyChart)==null?void 0:f.xAxisTitleColor)||this.primaryTextColor,xAxisLabelColor:((p=this.xyChart)==null?void 0:p.xAxisLabelColor)||this.primaryTextColor,xAxisTickColor:((g=this.xyChart)==null?void 0:g.xAxisTickColor)||this.primaryTextColor,xAxisLineColor:((v=this.xyChart)==null?void 0:v.xAxisLineColor)||this.primaryTextColor,yAxisTitleColor:((_=this.xyChart)==null?void 0:_.yAxisTitleColor)||this.primaryTextColor,yAxisLabelColor:((y=this.xyChart)==null?void 0:y.yAxisLabelColor)||this.primaryTextColor,yAxisTickColor:((b=this.xyChart)==null?void 0:b.yAxisTickColor)||this.primaryTextColor,yAxisLineColor:((w=this.xyChart)==null?void 0:w.yAxisLineColor)||this.primaryTextColor,plotColorPalette:((T=this.xyChart)==null?void 0:T.plotColorPalette)||"#ECECFF,#8493A6,#FFC3A0,#DCDDE1,#B8E994,#D1A36F,#C3CDE6,#FFB6C1,#496078,#F8F3E3"},this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||"1",this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||this.labelBackground,this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=this.git0||this.primaryColor,this.git1=this.git1||this.secondaryColor,this.git2=this.git2||this.tertiaryColor,this.git3=this.git3||pt(this.primaryColor,{h:-30}),this.git4=this.git4||pt(this.primaryColor,{h:-60}),this.git5=this.git5||pt(this.primaryColor,{h:-90}),this.git6=this.git6||pt(this.primaryColor,{h:60}),this.git7=this.git7||pt(this.primaryColor,{h:120}),this.darkMode?(this.git0=Qt(this.git0,25),this.git1=Qt(this.git1,25),this.git2=Qt(this.git2,25),this.git3=Qt(this.git3,25),this.git4=Qt(this.git4,25),this.git5=Qt(this.git5,25),this.git6=Qt(this.git6,25),this.git7=Qt(this.git7,25)):(this.git0=fe(this.git0,25),this.git1=fe(this.git1,25),this.git2=fe(this.git2,25),this.git3=fe(this.git3,25),this.git4=fe(this.git4,25),this.git5=fe(this.git5,25),this.git6=fe(this.git6,25),this.git7=fe(this.git7,25)),this.gitInv0=this.gitInv0||fe(Wt(this.git0),25),this.gitInv1=this.gitInv1||Wt(this.git1),this.gitInv2=this.gitInv2||Wt(this.git2),this.gitInv3=this.gitInv3||Wt(this.git3),this.gitInv4=this.gitInv4||Wt(this.git4),this.gitInv5=this.gitInv5||Wt(this.git5),this.gitInv6=this.gitInv6||Wt(this.git6),this.gitInv7=this.gitInv7||Wt(this.git7),this.gitBranchLabel0=this.gitBranchLabel0||Wt(this.labelTextColor),this.gitBranchLabel1=this.gitBranchLabel1||this.labelTextColor,this.gitBranchLabel2=this.gitBranchLabel2||this.labelTextColor,this.gitBranchLabel3=this.gitBranchLabel3||Wt(this.labelTextColor),this.gitBranchLabel4=this.gitBranchLabel4||this.labelTextColor,this.gitBranchLabel5=this.gitBranchLabel5||this.labelTextColor,this.gitBranchLabel6=this.gitBranchLabel6||this.labelTextColor,this.gitBranchLabel7=this.gitBranchLabel7||this.labelTextColor,this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||Vf,this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||Gf}calculate(t){if(Object.keys(this).forEach(r=>{this[r]==="calculated"&&(this[r]=void 0)}),typeof t!="object"){this.updateColors();return}const a=Object.keys(t);a.forEach(r=>{this[r]=t[r]}),this.updateColors(),a.forEach(r=>{this[r]=t[r]})}},I(ks,"Theme"),ks),ict=I(e=>{const t=new nct;return t.calculate(e),t},"getThemeVariables"),Ds,oct=(Ds=class{constructor(){this.background="#f4f4f4",this.primaryColor="#cde498",this.secondaryColor="#cdffb2",this.background="white",this.mainBkg="#cde498",this.secondBkg="#cdffb2",this.lineColor="green",this.border1="#13540c",this.border2="#6eaa49",this.arrowheadColor="green",this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px",this.tertiaryColor=Qt("#cde498",10),this.primaryBorderColor=er(this.primaryColor,this.darkMode),this.secondaryBorderColor=er(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=er(this.tertiaryColor,this.darkMode),this.primaryTextColor=Wt(this.primaryColor),this.secondaryTextColor=Wt(this.secondaryColor),this.tertiaryTextColor=Wt(this.primaryColor),this.lineColor=Wt(this.background),this.textColor=Wt(this.background),this.THEME_COLOR_LIMIT=12,this.nodeBkg="calculated",this.nodeBorder="calculated",this.clusterBkg="calculated",this.clusterBorder="calculated",this.defaultLinkColor="calculated",this.titleColor="#333",this.edgeLabelBackground="#e8e8e8",this.actorBorder="calculated",this.actorBkg="calculated",this.actorTextColor="black",this.actorLineColor="calculated",this.signalColor="#333",this.signalTextColor="#333",this.labelBoxBkgColor="calculated",this.labelBoxBorderColor="#326932",this.labelTextColor="calculated",this.loopTextColor="calculated",this.noteBorderColor="calculated",this.noteBkgColor="#fff5ad",this.noteTextColor="calculated",this.activationBorderColor="#666",this.activationBkgColor="#f4f4f4",this.sequenceNumberColor="white",this.sectionBkgColor="#6eaa49",this.altSectionBkgColor="white",this.sectionBkgColor2="#6eaa49",this.excludeBkgColor="#eeeeee",this.taskBorderColor="calculated",this.taskBkgColor="#487e3a",this.taskTextLightColor="white",this.taskTextColor="calculated",this.taskTextDarkColor="black",this.taskTextOutsideColor="calculated",this.taskTextClickableColor="#003163",this.activeTaskBorderColor="calculated",this.activeTaskBkgColor="calculated",this.gridColor="lightgrey",this.doneTaskBkgColor="lightgrey",this.doneTaskBorderColor="grey",this.critBorderColor="#ff8888",this.critBkgColor="red",this.todayLineColor="red",this.vertLineColor="#00BFFF",this.personBorder=this.primaryBorderColor,this.personBkg=this.mainBkg,this.archEdgeColor="calculated",this.archEdgeArrowColor="calculated",this.archEdgeWidth="3",this.archGroupBorderColor=this.primaryBorderColor,this.archGroupBorderWidth="2px",this.labelColor="black",this.errorBkgColor="#552222",this.errorTextColor="#552222"}updateColors(){var t,a,r,n,i,o,s,l,c,u,h,d,f,p,g,v,_,y,b,w,T;this.actorBorder=fe(this.mainBkg,20),this.actorBkg=this.mainBkg,this.labelBoxBkgColor=this.actorBkg,this.labelTextColor=this.actorTextColor,this.loopTextColor=this.actorTextColor,this.noteBorderColor=this.border2,this.noteTextColor=this.actorTextColor,this.actorLineColor=this.actorBorder,this.cScale0=this.cScale0||this.primaryColor,this.cScale1=this.cScale1||this.secondaryColor,this.cScale2=this.cScale2||this.tertiaryColor,this.cScale3=this.cScale3||pt(this.primaryColor,{h:30}),this.cScale4=this.cScale4||pt(this.primaryColor,{h:60}),this.cScale5=this.cScale5||pt(this.primaryColor,{h:90}),this.cScale6=this.cScale6||pt(this.primaryColor,{h:120}),this.cScale7=this.cScale7||pt(this.primaryColor,{h:150}),this.cScale8=this.cScale8||pt(this.primaryColor,{h:210}),this.cScale9=this.cScale9||pt(this.primaryColor,{h:270}),this.cScale10=this.cScale10||pt(this.primaryColor,{h:300}),this.cScale11=this.cScale11||pt(this.primaryColor,{h:330}),this.cScalePeer1=this.cScalePeer1||fe(this.secondaryColor,45),this.cScalePeer2=this.cScalePeer2||fe(this.tertiaryColor,40);for(let C=0;C<this.THEME_COLOR_LIMIT;C++)this["cScale"+C]=fe(this["cScale"+C],10),this["cScalePeer"+C]=this["cScalePeer"+C]||fe(this["cScale"+C],25);for(let C=0;C<this.THEME_COLOR_LIMIT;C++)this["cScaleInv"+C]=this["cScaleInv"+C]||pt(this["cScale"+C],{h:180});this.scaleLabelColor=this.scaleLabelColor!=="calculated"&&this.scaleLabelColor?this.scaleLabelColor:this.labelTextColor;for(let C=0;C<this.THEME_COLOR_LIMIT;C++)this["cScaleLabel"+C]=this["cScaleLabel"+C]||this.scaleLabelColor;for(let C=0;C<5;C++)this["surface"+C]=this["surface"+C]||pt(this.mainBkg,{h:30,s:-30,l:-(5+C*5)}),this["surfacePeer"+C]=this["surfacePeer"+C]||pt(this.mainBkg,{h:30,s:-30,l:-(8+C*5)});this.nodeBkg=this.mainBkg,this.nodeBorder=this.border1,this.clusterBkg=this.secondBkg,this.clusterBorder=this.border2,this.defaultLinkColor=this.lineColor,this.taskBorderColor=this.border1,this.taskTextColor=this.taskTextLightColor,this.taskTextOutsideColor=this.taskTextDarkColor,this.activeTaskBorderColor=this.taskBorderColor,this.activeTaskBkgColor=this.mainBkg,this.archEdgeColor=this.lineColor,this.archEdgeArrowColor=this.lineColor,this.rowOdd=this.rowOdd||Qt(this.mainBkg,75)||"#ffffff",this.rowEven=this.rowEven||Qt(this.mainBkg,20),this.transitionColor=this.transitionColor||this.lineColor,this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||"#f0f0f0",this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.compositeBorder=this.compositeBorder||this.nodeBorder,this.innerEndBackground=this.primaryBorderColor,this.specialStateColor=this.lineColor,this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.transitionColor=this.transitionColor||this.lineColor,this.classText=this.primaryTextColor,this.fillType0=this.primaryColor,this.fillType1=this.secondaryColor,this.fillType2=pt(this.primaryColor,{h:64}),this.fillType3=pt(this.secondaryColor,{h:64}),this.fillType4=pt(this.primaryColor,{h:-64}),this.fillType5=pt(this.secondaryColor,{h:-64}),this.fillType6=pt(this.primaryColor,{h:128}),this.fillType7=pt(this.secondaryColor,{h:128}),this.pie1=this.pie1||this.primaryColor,this.pie2=this.pie2||this.secondaryColor,this.pie3=this.pie3||this.tertiaryColor,this.pie4=this.pie4||pt(this.primaryColor,{l:-30}),this.pie5=this.pie5||pt(this.secondaryColor,{l:-30}),this.pie6=this.pie6||pt(this.tertiaryColor,{h:40,l:-40}),this.pie7=this.pie7||pt(this.primaryColor,{h:60,l:-10}),this.pie8=this.pie8||pt(this.primaryColor,{h:-60,l:-10}),this.pie9=this.pie9||pt(this.primaryColor,{h:120,l:0}),this.pie10=this.pie10||pt(this.primaryColor,{h:60,l:-50}),this.pie11=this.pie11||pt(this.primaryColor,{h:-60,l:-50}),this.pie12=this.pie12||pt(this.primaryColor,{h:120,l:-50}),this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOuterStrokeWidth=this.pieOuterStrokeWidth||"2px",this.pieOuterStrokeColor=this.pieOuterStrokeColor||"black",this.pieOpacity=this.pieOpacity||"0.7",this.quadrant1Fill=this.quadrant1Fill||this.primaryColor,this.quadrant2Fill=this.quadrant2Fill||pt(this.primaryColor,{r:5,g:5,b:5}),this.quadrant3Fill=this.quadrant3Fill||pt(this.primaryColor,{r:10,g:10,b:10}),this.quadrant4Fill=this.quadrant4Fill||pt(this.primaryColor,{r:15,g:15,b:15}),this.quadrant1TextFill=this.quadrant1TextFill||this.primaryTextColor,this.quadrant2TextFill=this.quadrant2TextFill||pt(this.primaryTextColor,{r:-5,g:-5,b:-5}),this.quadrant3TextFill=this.quadrant3TextFill||pt(this.primaryTextColor,{r:-10,g:-10,b:-10}),this.quadrant4TextFill=this.quadrant4TextFill||pt(this.primaryTextColor,{r:-15,g:-15,b:-15}),this.quadrantPointFill=this.quadrantPointFill||Su(this.quadrant1Fill)?Qt(this.quadrant1Fill):fe(this.quadrant1Fill),this.quadrantPointTextFill=this.quadrantPointTextFill||this.primaryTextColor,this.quadrantXAxisTextFill=this.quadrantXAxisTextFill||this.primaryTextColor,this.quadrantYAxisTextFill=this.quadrantYAxisTextFill||this.primaryTextColor,this.quadrantInternalBorderStrokeFill=this.quadrantInternalBorderStrokeFill||this.primaryBorderColor,this.quadrantExternalBorderStrokeFill=this.quadrantExternalBorderStrokeFill||this.primaryBorderColor,this.quadrantTitleFill=this.quadrantTitleFill||this.primaryTextColor,this.packet={startByteColor:this.primaryTextColor,endByteColor:this.primaryTextColor,labelColor:this.primaryTextColor,titleColor:this.primaryTextColor,blockStrokeColor:this.primaryTextColor,blockFillColor:this.mainBkg},this.radar={axisColor:((t=this.radar)==null?void 0:t.axisColor)||this.lineColor,axisStrokeWidth:((a=this.radar)==null?void 0:a.axisStrokeWidth)||2,axisLabelFontSize:((r=this.radar)==null?void 0:r.axisLabelFontSize)||12,curveOpacity:((n=this.radar)==null?void 0:n.curveOpacity)||.5,curveStrokeWidth:((i=this.radar)==null?void 0:i.curveStrokeWidth)||2,graticuleColor:((o=this.radar)==null?void 0:o.graticuleColor)||"#DEDEDE",graticuleStrokeWidth:((s=this.radar)==null?void 0:s.graticuleStrokeWidth)||1,graticuleOpacity:((l=this.radar)==null?void 0:l.graticuleOpacity)||.3,legendBoxSize:((c=this.radar)==null?void 0:c.legendBoxSize)||12,legendFontSize:((u=this.radar)==null?void 0:u.legendFontSize)||12},this.xyChart={backgroundColor:((h=this.xyChart)==null?void 0:h.backgroundColor)||this.background,titleColor:((d=this.xyChart)==null?void 0:d.titleColor)||this.primaryTextColor,xAxisTitleColor:((f=this.xyChart)==null?void 0:f.xAxisTitleColor)||this.primaryTextColor,xAxisLabelColor:((p=this.xyChart)==null?void 0:p.xAxisLabelColor)||this.primaryTextColor,xAxisTickColor:((g=this.xyChart)==null?void 0:g.xAxisTickColor)||this.primaryTextColor,xAxisLineColor:((v=this.xyChart)==null?void 0:v.xAxisLineColor)||this.primaryTextColor,yAxisTitleColor:((_=this.xyChart)==null?void 0:_.yAxisTitleColor)||this.primaryTextColor,yAxisLabelColor:((y=this.xyChart)==null?void 0:y.yAxisLabelColor)||this.primaryTextColor,yAxisTickColor:((b=this.xyChart)==null?void 0:b.yAxisTickColor)||this.primaryTextColor,yAxisLineColor:((w=this.xyChart)==null?void 0:w.yAxisLineColor)||this.primaryTextColor,plotColorPalette:((T=this.xyChart)==null?void 0:T.plotColorPalette)||"#CDE498,#FF6B6B,#A0D2DB,#D7BDE2,#F0F0F0,#FFC3A0,#7FD8BE,#FF9A8B,#FAF3E0,#FFF176"},this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||"1",this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||this.edgeLabelBackground,this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=this.git0||this.primaryColor,this.git1=this.git1||this.secondaryColor,this.git2=this.git2||this.tertiaryColor,this.git3=this.git3||pt(this.primaryColor,{h:-30}),this.git4=this.git4||pt(this.primaryColor,{h:-60}),this.git5=this.git5||pt(this.primaryColor,{h:-90}),this.git6=this.git6||pt(this.primaryColor,{h:60}),this.git7=this.git7||pt(this.primaryColor,{h:120}),this.darkMode?(this.git0=Qt(this.git0,25),this.git1=Qt(this.git1,25),this.git2=Qt(this.git2,25),this.git3=Qt(this.git3,25),this.git4=Qt(this.git4,25),this.git5=Qt(this.git5,25),this.git6=Qt(this.git6,25),this.git7=Qt(this.git7,25)):(this.git0=fe(this.git0,25),this.git1=fe(this.git1,25),this.git2=fe(this.git2,25),this.git3=fe(this.git3,25),this.git4=fe(this.git4,25),this.git5=fe(this.git5,25),this.git6=fe(this.git6,25),this.git7=fe(this.git7,25)),this.gitInv0=this.gitInv0||Wt(this.git0),this.gitInv1=this.gitInv1||Wt(this.git1),this.gitInv2=this.gitInv2||Wt(this.git2),this.gitInv3=this.gitInv3||Wt(this.git3),this.gitInv4=this.gitInv4||Wt(this.git4),this.gitInv5=this.gitInv5||Wt(this.git5),this.gitInv6=this.gitInv6||Wt(this.git6),this.gitInv7=this.gitInv7||Wt(this.git7),this.gitBranchLabel0=this.gitBranchLabel0||Wt(this.labelTextColor),this.gitBranchLabel1=this.gitBranchLabel1||this.labelTextColor,this.gitBranchLabel2=this.gitBranchLabel2||this.labelTextColor,this.gitBranchLabel3=this.gitBranchLabel3||Wt(this.labelTextColor),this.gitBranchLabel4=this.gitBranchLabel4||this.labelTextColor,this.gitBranchLabel5=this.gitBranchLabel5||this.labelTextColor,this.gitBranchLabel6=this.gitBranchLabel6||this.labelTextColor,this.gitBranchLabel7=this.gitBranchLabel7||this.labelTextColor,this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||Vf,this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||Gf}calculate(t){if(typeof t!="object"){this.updateColors();return}const a=Object.keys(t);a.forEach(r=>{this[r]=t[r]}),this.updateColors(),a.forEach(r=>{this[r]=t[r]})}},I(Ds,"Theme"),Ds),sct=I(e=>{const t=new oct;return t.calculate(e),t},"getThemeVariables"),Ls,lct=(Ls=class{constructor(){this.primaryColor="#eee",this.contrast="#707070",this.secondaryColor=Qt(this.contrast,55),this.background="#ffffff",this.tertiaryColor=pt(this.primaryColor,{h:-160}),this.primaryBorderColor=er(this.primaryColor,this.darkMode),this.secondaryBorderColor=er(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=er(this.tertiaryColor,this.darkMode),this.primaryTextColor=Wt(this.primaryColor),this.secondaryTextColor=Wt(this.secondaryColor),this.tertiaryTextColor=Wt(this.tertiaryColor),this.lineColor=Wt(this.background),this.textColor=Wt(this.background),this.mainBkg="#eee",this.secondBkg="calculated",this.lineColor="#666",this.border1="#999",this.border2="calculated",this.note="#ffa",this.text="#333",this.critical="#d42",this.done="#bbb",this.arrowheadColor="#333333",this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px",this.THEME_COLOR_LIMIT=12,this.nodeBkg="calculated",this.nodeBorder="calculated",this.clusterBkg="calculated",this.clusterBorder="calculated",this.defaultLinkColor="calculated",this.titleColor="calculated",this.edgeLabelBackground="white",this.actorBorder="calculated",this.actorBkg="calculated",this.actorTextColor="calculated",this.actorLineColor=this.actorBorder,this.signalColor="calculated",this.signalTextColor="calculated",this.labelBoxBkgColor="calculated",this.labelBoxBorderColor="calculated",this.labelTextColor="calculated",this.loopTextColor="calculated",this.noteBorderColor="calculated",this.noteBkgColor="calculated",this.noteTextColor="calculated",this.activationBorderColor="#666",this.activationBkgColor="#f4f4f4",this.sequenceNumberColor="white",this.sectionBkgColor="calculated",this.altSectionBkgColor="white",this.sectionBkgColor2="calculated",this.excludeBkgColor="#eeeeee",this.taskBorderColor="calculated",this.taskBkgColor="calculated",this.taskTextLightColor="white",this.taskTextColor="calculated",this.taskTextDarkColor="calculated",this.taskTextOutsideColor="calculated",this.taskTextClickableColor="#003163",this.activeTaskBorderColor="calculated",this.activeTaskBkgColor="calculated",this.gridColor="calculated",this.doneTaskBkgColor="calculated",this.doneTaskBorderColor="calculated",this.critBkgColor="calculated",this.critBorderColor="calculated",this.todayLineColor="calculated",this.vertLineColor="calculated",this.personBorder=this.primaryBorderColor,this.personBkg=this.mainBkg,this.archEdgeColor="calculated",this.archEdgeArrowColor="calculated",this.archEdgeWidth="3",this.archGroupBorderColor=this.primaryBorderColor,this.archGroupBorderWidth="2px",this.rowOdd=this.rowOdd||Qt(this.mainBkg,75)||"#ffffff",this.rowEven=this.rowEven||"#f4f4f4",this.labelColor="black",this.errorBkgColor="#552222",this.errorTextColor="#552222"}updateColors(){var t,a,r,n,i,o,s,l,c,u,h,d,f,p,g,v,_,y,b,w,T;this.secondBkg=Qt(this.contrast,55),this.border2=this.contrast,this.actorBorder=Qt(this.border1,23),this.actorBkg=this.mainBkg,this.actorTextColor=this.text,this.actorLineColor=this.actorBorder,this.signalColor=this.text,this.signalTextColor=this.text,this.labelBoxBkgColor=this.actorBkg,this.labelBoxBorderColor=this.actorBorder,this.labelTextColor=this.text,this.loopTextColor=this.text,this.noteBorderColor="#999",this.noteBkgColor="#666",this.noteTextColor="#fff",this.cScale0=this.cScale0||"#555",this.cScale1=this.cScale1||"#F4F4F4",this.cScale2=this.cScale2||"#555",this.cScale3=this.cScale3||"#BBB",this.cScale4=this.cScale4||"#777",this.cScale5=this.cScale5||"#999",this.cScale6=this.cScale6||"#DDD",this.cScale7=this.cScale7||"#FFF",this.cScale8=this.cScale8||"#DDD",this.cScale9=this.cScale9||"#BBB",this.cScale10=this.cScale10||"#999",this.cScale11=this.cScale11||"#777";for(let C=0;C<this.THEME_COLOR_LIMIT;C++)this["cScaleInv"+C]=this["cScaleInv"+C]||Wt(this["cScale"+C]);for(let C=0;C<this.THEME_COLOR_LIMIT;C++)this.darkMode?this["cScalePeer"+C]=this["cScalePeer"+C]||Qt(this["cScale"+C],10):this["cScalePeer"+C]=this["cScalePeer"+C]||fe(this["cScale"+C],10);this.scaleLabelColor=this.scaleLabelColor||(this.darkMode?"black":this.labelTextColor),this.cScaleLabel0=this.cScaleLabel0||this.cScale1,this.cScaleLabel2=this.cScaleLabel2||this.cScale1;for(let C=0;C<this.THEME_COLOR_LIMIT;C++)this["cScaleLabel"+C]=this["cScaleLabel"+C]||this.scaleLabelColor;for(let C=0;C<5;C++)this["surface"+C]=this["surface"+C]||pt(this.mainBkg,{l:-(5+C*5)}),this["surfacePeer"+C]=this["surfacePeer"+C]||pt(this.mainBkg,{l:-(8+C*5)});this.nodeBkg=this.mainBkg,this.nodeBorder=this.border1,this.clusterBkg=this.secondBkg,this.clusterBorder=this.border2,this.defaultLinkColor=this.lineColor,this.titleColor=this.text,this.sectionBkgColor=Qt(this.contrast,30),this.sectionBkgColor2=Qt(this.contrast,30),this.taskBorderColor=fe(this.contrast,10),this.taskBkgColor=this.contrast,this.taskTextColor=this.taskTextLightColor,this.taskTextDarkColor=this.text,this.taskTextOutsideColor=this.taskTextDarkColor,this.activeTaskBorderColor=this.taskBorderColor,this.activeTaskBkgColor=this.mainBkg,this.gridColor=Qt(this.border1,30),this.doneTaskBkgColor=this.done,this.doneTaskBorderColor=this.lineColor,this.critBkgColor=this.critical,this.critBorderColor=fe(this.critBkgColor,10),this.todayLineColor=this.critBkgColor,this.vertLineColor=this.critBkgColor,this.archEdgeColor=this.lineColor,this.archEdgeArrowColor=this.lineColor,this.transitionColor=this.transitionColor||"#000",this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||"#f4f4f4",this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.stateBorder=this.stateBorder||"#000",this.innerEndBackground=this.primaryBorderColor,this.specialStateColor="#222",this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.classText=this.primaryTextColor,this.fillType0=this.primaryColor,this.fillType1=this.secondaryColor,this.fillType2=pt(this.primaryColor,{h:64}),this.fillType3=pt(this.secondaryColor,{h:64}),this.fillType4=pt(this.primaryColor,{h:-64}),this.fillType5=pt(this.secondaryColor,{h:-64}),this.fillType6=pt(this.primaryColor,{h:128}),this.fillType7=pt(this.secondaryColor,{h:128});for(let C=0;C<this.THEME_COLOR_LIMIT;C++)this["pie"+C]=this["cScale"+C];this.pie12=this.pie0,this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOuterStrokeWidth=this.pieOuterStrokeWidth||"2px",this.pieOuterStrokeColor=this.pieOuterStrokeColor||"black",this.pieOpacity=this.pieOpacity||"0.7",this.quadrant1Fill=this.quadrant1Fill||this.primaryColor,this.quadrant2Fill=this.quadrant2Fill||pt(this.primaryColor,{r:5,g:5,b:5}),this.quadrant3Fill=this.quadrant3Fill||pt(this.primaryColor,{r:10,g:10,b:10}),this.quadrant4Fill=this.quadrant4Fill||pt(this.primaryColor,{r:15,g:15,b:15}),this.quadrant1TextFill=this.quadrant1TextFill||this.primaryTextColor,this.quadrant2TextFill=this.quadrant2TextFill||pt(this.primaryTextColor,{r:-5,g:-5,b:-5}),this.quadrant3TextFill=this.quadrant3TextFill||pt(this.primaryTextColor,{r:-10,g:-10,b:-10}),this.quadrant4TextFill=this.quadrant4TextFill||pt(this.primaryTextColor,{r:-15,g:-15,b:-15}),this.quadrantPointFill=this.quadrantPointFill||Su(this.quadrant1Fill)?Qt(this.quadrant1Fill):fe(this.quadrant1Fill),this.quadrantPointTextFill=this.quadrantPointTextFill||this.primaryTextColor,this.quadrantXAxisTextFill=this.quadrantXAxisTextFill||this.primaryTextColor,this.quadrantYAxisTextFill=this.quadrantYAxisTextFill||this.primaryTextColor,this.quadrantInternalBorderStrokeFill=this.quadrantInternalBorderStrokeFill||this.primaryBorderColor,this.quadrantExternalBorderStrokeFill=this.quadrantExternalBorderStrokeFill||this.primaryBorderColor,this.quadrantTitleFill=this.quadrantTitleFill||this.primaryTextColor,this.xyChart={backgroundColor:((t=this.xyChart)==null?void 0:t.backgroundColor)||this.background,titleColor:((a=this.xyChart)==null?void 0:a.titleColor)||this.primaryTextColor,xAxisTitleColor:((r=this.xyChart)==null?void 0:r.xAxisTitleColor)||this.primaryTextColor,xAxisLabelColor:((n=this.xyChart)==null?void 0:n.xAxisLabelColor)||this.primaryTextColor,xAxisTickColor:((i=this.xyChart)==null?void 0:i.xAxisTickColor)||this.primaryTextColor,xAxisLineColor:((o=this.xyChart)==null?void 0:o.xAxisLineColor)||this.primaryTextColor,yAxisTitleColor:((s=this.xyChart)==null?void 0:s.yAxisTitleColor)||this.primaryTextColor,yAxisLabelColor:((l=this.xyChart)==null?void 0:l.yAxisLabelColor)||this.primaryTextColor,yAxisTickColor:((c=this.xyChart)==null?void 0:c.yAxisTickColor)||this.primaryTextColor,yAxisLineColor:((u=this.xyChart)==null?void 0:u.yAxisLineColor)||this.primaryTextColor,plotColorPalette:((h=this.xyChart)==null?void 0:h.plotColorPalette)||"#EEE,#6BB8E4,#8ACB88,#C7ACD6,#E8DCC2,#FFB2A8,#FFF380,#7E8D91,#FFD8B1,#FAF3E0"},this.radar={axisColor:((d=this.radar)==null?void 0:d.axisColor)||this.lineColor,axisStrokeWidth:((f=this.radar)==null?void 0:f.axisStrokeWidth)||2,axisLabelFontSize:((p=this.radar)==null?void 0:p.axisLabelFontSize)||12,curveOpacity:((g=this.radar)==null?void 0:g.curveOpacity)||.5,curveStrokeWidth:((v=this.radar)==null?void 0:v.curveStrokeWidth)||2,graticuleColor:((_=this.radar)==null?void 0:_.graticuleColor)||"#DEDEDE",graticuleStrokeWidth:((y=this.radar)==null?void 0:y.graticuleStrokeWidth)||1,graticuleOpacity:((b=this.radar)==null?void 0:b.graticuleOpacity)||.3,legendBoxSize:((w=this.radar)==null?void 0:w.legendBoxSize)||12,legendFontSize:((T=this.radar)==null?void 0:T.legendFontSize)||12},this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||"1",this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||this.edgeLabelBackground,this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=fe(this.pie1,25)||this.primaryColor,this.git1=this.pie2||this.secondaryColor,this.git2=this.pie3||this.tertiaryColor,this.git3=this.pie4||pt(this.primaryColor,{h:-30}),this.git4=this.pie5||pt(this.primaryColor,{h:-60}),this.git5=this.pie6||pt(this.primaryColor,{h:-90}),this.git6=this.pie7||pt(this.primaryColor,{h:60}),this.git7=this.pie8||pt(this.primaryColor,{h:120}),this.gitInv0=this.gitInv0||Wt(this.git0),this.gitInv1=this.gitInv1||Wt(this.git1),this.gitInv2=this.gitInv2||Wt(this.git2),this.gitInv3=this.gitInv3||Wt(this.git3),this.gitInv4=this.gitInv4||Wt(this.git4),this.gitInv5=this.gitInv5||Wt(this.git5),this.gitInv6=this.gitInv6||Wt(this.git6),this.gitInv7=this.gitInv7||Wt(this.git7),this.branchLabelColor=this.branchLabelColor||this.labelTextColor,this.gitBranchLabel0=this.branchLabelColor,this.gitBranchLabel1="white",this.gitBranchLabel2=this.branchLabelColor,this.gitBranchLabel3="white",this.gitBranchLabel4=this.branchLabelColor,this.gitBranchLabel5=this.branchLabelColor,this.gitBranchLabel6=this.branchLabelColor,this.gitBranchLabel7=this.branchLabelColor,this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||Vf,this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||Gf}calculate(t){if(typeof t!="object"){this.updateColors();return}const a=Object.keys(t);a.forEach(r=>{this[r]=t[r]}),this.updateColors(),a.forEach(r=>{this[r]=t[r]})}},I(Ls,"Theme"),Ls),cct=I(e=>{const t=new lct;return t.calculate(e),t},"getThemeVariables"),Yn={base:{getThemeVariables:ect},dark:{getThemeVariables:rct},default:{getThemeVariables:ict},forest:{getThemeVariables:sct},neutral:{getThemeVariables:cct}},sn={flowchart:{useMaxWidth:!0,titleTopMargin:25,subGraphTitleMargin:{top:0,bottom:0},diagramPadding:8,htmlLabels:!0,nodeSpacing:50,rankSpacing:50,curve:"basis",padding:15,defaultRenderer:"dagre-wrapper",wrappingWidth:200,inheritDir:!1},sequence:{useMaxWidth:!0,hideUnusedParticipants:!1,activationWidth:10,diagramMarginX:50,diagramMarginY:10,actorMargin:50,width:150,height:65,boxMargin:10,boxTextMargin:5,noteMargin:10,messageMargin:35,messageAlign:"center",mirrorActors:!0,forceMenus:!1,bottomMarginAdj:1,rightAngles:!1,showSequenceNumbers:!1,actorFontSize:14,actorFontFamily:'"Open Sans", sans-serif',actorFontWeight:400,noteFontSize:14,noteFontFamily:'"trebuchet ms", verdana, arial, sans-serif',noteFontWeight:400,noteAlign:"center",messageFontSize:16,messageFontFamily:'"trebuchet ms", verdana, arial, sans-serif',messageFontWeight:400,wrap:!1,wrapPadding:10,labelBoxWidth:50,labelBoxHeight:20},gantt:{useMaxWidth:!0,titleTopMargin:25,barHeight:20,barGap:4,topPadding:50,rightPadding:75,leftPadding:75,gridLineStartPadding:35,fontSize:11,sectionFontSize:11,numberSectionStyles:4,axisFormat:"%Y-%m-%d",topAxis:!1,displayMode:"",weekday:"sunday"},journey:{useMaxWidth:!0,diagramMarginX:50,diagramMarginY:10,leftMargin:150,maxLabelWidth:360,width:150,height:50,boxMargin:10,boxTextMargin:5,noteMargin:10,messageMargin:35,messageAlign:"center",bottomMarginAdj:1,rightAngles:!1,taskFontSize:14,taskFontFamily:'"Open Sans", sans-serif',taskMargin:50,activationWidth:10,textPlacement:"fo",actorColours:["#8FBC8F","#7CFC00","#00FFFF","#20B2AA","#B0E0E6","#FFFFE0"],sectionFills:["#191970","#8B008B","#4B0082","#2F4F4F","#800000","#8B4513","#00008B"],sectionColours:["#fff"],titleColor:"",titleFontFamily:'"trebuchet ms", verdana, arial, sans-serif',titleFontSize:"4ex"},class:{useMaxWidth:!0,titleTopMargin:25,arrowMarkerAbsolute:!1,dividerMargin:10,padding:5,textHeight:10,defaultRenderer:"dagre-wrapper",htmlLabels:!1,hideEmptyMembersBox:!1},state:{useMaxWidth:!0,titleTopMargin:25,dividerMargin:10,sizeUnit:5,padding:8,textHeight:10,titleShift:-15,noteMargin:10,forkWidth:70,forkHeight:7,miniPadding:2,fontSizeFactor:5.02,fontSize:24,labelHeight:16,edgeLengthFactor:"20",compositTitleSize:35,radius:5,defaultRenderer:"dagre-wrapper"},er:{useMaxWidth:!0,titleTopMargin:25,diagramPadding:20,layoutDirection:"TB",minEntityWidth:100,minEntityHeight:75,entityPadding:15,nodeSpacing:140,rankSpacing:80,stroke:"gray",fill:"honeydew",fontSize:12},pie:{useMaxWidth:!0,textPosition:.75},quadrantChart:{useMaxWidth:!0,chartWidth:500,chartHeight:500,titleFontSize:20,titlePadding:10,quadrantPadding:5,xAxisLabelPadding:5,yAxisLabelPadding:5,xAxisLabelFontSize:16,yAxisLabelFontSize:16,quadrantLabelFontSize:16,quadrantTextTopPadding:5,pointTextPadding:5,pointLabelFontSize:12,pointRadius:5,xAxisPosition:"top",yAxisPosition:"left",quadrantInternalBorderStrokeWidth:1,quadrantExternalBorderStrokeWidth:2},xyChart:{useMaxWidth:!0,width:700,height:500,titleFontSize:20,titlePadding:10,showDataLabel:!1,showTitle:!0,xAxis:{$ref:"#/$defs/XYChartAxisConfig",showLabel:!0,labelFontSize:14,labelPadding:5,showTitle:!0,titleFontSize:16,titlePadding:5,showTick:!0,tickLength:5,tickWidth:2,showAxisLine:!0,axisLineWidth:2},yAxis:{$ref:"#/$defs/XYChartAxisConfig",showLabel:!0,labelFontSize:14,labelPadding:5,showTitle:!0,titleFontSize:16,titlePadding:5,showTick:!0,tickLength:5,tickWidth:2,showAxisLine:!0,axisLineWidth:2},chartOrientation:"vertical",plotReservedSpacePercent:50},requirement:{useMaxWidth:!0,rect_fill:"#f9f9f9",text_color:"#333",rect_border_size:"0.5px",rect_border_color:"#bbb",rect_min_width:200,rect_min_height:200,fontSize:14,rect_padding:10,line_height:20},mindmap:{useMaxWidth:!0,padding:10,maxNodeWidth:200},kanban:{useMaxWidth:!0,padding:8,sectionWidth:200,ticketBaseUrl:""},timeline:{useMaxWidth:!0,diagramMarginX:50,diagramMarginY:10,leftMargin:150,width:150,height:50,boxMargin:10,boxTextMargin:5,noteMargin:10,messageMargin:35,messageAlign:"center",bottomMarginAdj:1,rightAngles:!1,taskFontSize:14,taskFontFamily:'"Open Sans", sans-serif',taskMargin:50,activationWidth:10,textPlacement:"fo",actorColours:["#8FBC8F","#7CFC00","#00FFFF","#20B2AA","#B0E0E6","#FFFFE0"],sectionFills:["#191970","#8B008B","#4B0082","#2F4F4F","#800000","#8B4513","#00008B"],sectionColours:["#fff"],disableMulticolor:!1},gitGraph:{useMaxWidth:!0,titleTopMargin:25,diagramPadding:8,nodeLabel:{width:75,height:100,x:-25,y:0},mainBranchName:"main",mainBranchOrder:0,showCommitLabel:!0,showBranches:!0,rotateCommitLabel:!0,parallelCommits:!1,arrowMarkerAbsolute:!1},c4:{useMaxWidth:!0,diagramMarginX:50,diagramMarginY:10,c4ShapeMargin:50,c4ShapePadding:20,width:216,height:60,boxMargin:10,c4ShapeInRow:4,nextLinePaddingX:0,c4BoundaryInRow:2,personFontSize:14,personFontFamily:'"Open Sans", sans-serif',personFontWeight:"normal",external_personFontSize:14,external_personFontFamily:'"Open Sans", sans-serif',external_personFontWeight:"normal",systemFontSize:14,systemFontFamily:'"Open Sans", sans-serif',systemFontWeight:"normal",external_systemFontSize:14,external_systemFontFamily:'"Open Sans", sans-serif',external_systemFontWeight:"normal",system_dbFontSize:14,system_dbFontFamily:'"Open Sans", sans-serif',system_dbFontWeight:"normal",external_system_dbFontSize:14,external_system_dbFontFamily:'"Open Sans", sans-serif',external_system_dbFontWeight:"normal",system_queueFontSize:14,system_queueFontFamily:'"Open Sans", sans-serif',system_queueFontWeight:"normal",external_system_queueFontSize:14,external_system_queueFontFamily:'"Open Sans", sans-serif',external_system_queueFontWeight:"normal",boundaryFontSize:14,boundaryFontFamily:'"Open Sans", sans-serif',boundaryFontWeight:"normal",messageFontSize:12,messageFontFamily:'"Open Sans", sans-serif',messageFontWeight:"normal",containerFontSize:14,containerFontFamily:'"Open Sans", sans-serif',containerFontWeight:"normal",external_containerFontSize:14,external_containerFontFamily:'"Open Sans", sans-serif',external_containerFontWeight:"normal",container_dbFontSize:14,container_dbFontFamily:'"Open Sans", sans-serif',container_dbFontWeight:"normal",external_container_dbFontSize:14,external_container_dbFontFamily:'"Open Sans", sans-serif',external_container_dbFontWeight:"normal",container_queueFontSize:14,container_queueFontFamily:'"Open Sans", sans-serif',container_queueFontWeight:"normal",external_container_queueFontSize:14,external_container_queueFontFamily:'"Open Sans", sans-serif',external_container_queueFontWeight:"normal",componentFontSize:14,componentFontFamily:'"Open Sans", sans-serif',componentFontWeight:"normal",external_componentFontSize:14,external_componentFontFamily:'"Open Sans", sans-serif',external_componentFontWeight:"normal",component_dbFontSize:14,component_dbFontFamily:'"Open Sans", sans-serif',component_dbFontWeight:"normal",external_component_dbFontSize:14,external_component_dbFontFamily:'"Open Sans", sans-serif',external_component_dbFontWeight:"normal",component_queueFontSize:14,component_queueFontFamily:'"Open Sans", sans-serif',component_queueFontWeight:"normal",external_component_queueFontSize:14,external_component_queueFontFamily:'"Open Sans", sans-serif',external_component_queueFontWeight:"normal",wrap:!0,wrapPadding:10,person_bg_color:"#08427B",person_border_color:"#073B6F",external_person_bg_color:"#686868",external_person_border_color:"#8A8A8A",system_bg_color:"#1168BD",system_border_color:"#3C7FC0",system_db_bg_color:"#1168BD",system_db_border_color:"#3C7FC0",system_queue_bg_color:"#1168BD",system_queue_border_color:"#3C7FC0",external_system_bg_color:"#999999",external_system_border_color:"#8A8A8A",external_system_db_bg_color:"#999999",external_system_db_border_color:"#8A8A8A",external_system_queue_bg_color:"#999999",external_system_queue_border_color:"#8A8A8A",container_bg_color:"#438DD5",container_border_color:"#3C7FC0",container_db_bg_color:"#438DD5",container_db_border_color:"#3C7FC0",container_queue_bg_color:"#438DD5",container_queue_border_color:"#3C7FC0",external_container_bg_color:"#B3B3B3",external_container_border_color:"#A6A6A6",external_container_db_bg_color:"#B3B3B3",external_container_db_border_color:"#A6A6A6",external_container_queue_bg_color:"#B3B3B3",external_container_queue_border_color:"#A6A6A6",component_bg_color:"#85BBF0",component_border_color:"#78A8D8",component_db_bg_color:"#85BBF0",component_db_border_color:"#78A8D8",component_queue_bg_color:"#85BBF0",component_queue_border_color:"#78A8D8",external_component_bg_color:"#CCCCCC",external_component_border_color:"#BFBFBF",external_component_db_bg_color:"#CCCCCC",external_component_db_border_color:"#BFBFBF",external_component_queue_bg_color:"#CCCCCC",external_component_queue_border_color:"#BFBFBF"},sankey:{useMaxWidth:!0,width:600,height:400,linkColor:"gradient",nodeAlignment:"justify",showValues:!0,prefix:"",suffix:""},block:{useMaxWidth:!0,padding:8},packet:{useMaxWidth:!0,rowHeight:32,bitWidth:32,bitsPerRow:32,showBits:!0,paddingX:5,paddingY:5},architecture:{useMaxWidth:!0,padding:40,iconSize:80,fontSize:16},radar:{useMaxWidth:!0,width:600,height:600,marginTop:50,marginRight:50,marginBottom:50,marginLeft:50,axisScaleFactor:1,axisLabelFactor:1.05,curveTension:.17},theme:"default",look:"classic",handDrawnSeed:0,layout:"dagre",maxTextSize:5e4,maxEdges:500,darkMode:!1,fontFamily:'"trebuchet ms", verdana, arial, sans-serif;',logLevel:5,securityLevel:"strict",startOnLoad:!0,arrowMarkerAbsolute:!1,secure:["secure","securityLevel","startOnLoad","maxTextSize","suppressErrorRendering","maxEdges"],legacyMathML:!1,forceLegacyMathML:!1,deterministicIds:!1,fontSize:16,markdownAutoWrap:!0,suppressErrorRendering:!1},aI={...sn,deterministicIDSeed:void 0,elk:{mergeEdges:!1,nodePlacementStrategy:"BRANDES_KOEPF"},themeCSS:void 0,themeVariables:Yn.default.getThemeVariables(),sequence:{...sn.sequence,messageFont:I(function(){return{fontFamily:this.messageFontFamily,fontSize:this.messageFontSize,fontWeight:this.messageFontWeight}},"messageFont"),noteFont:I(function(){return{fontFamily:this.noteFontFamily,fontSize:this.noteFontSize,fontWeight:this.noteFontWeight}},"noteFont"),actorFont:I(function(){return{fontFamily:this.actorFontFamily,fontSize:this.actorFontSize,fontWeight:this.actorFontWeight}},"actorFont")},class:{hideEmptyMembersBox:!1},gantt:{...sn.gantt,tickInterval:void 0,useWidth:void 0},c4:{...sn.c4,useWidth:void 0,personFont:I(function(){return{fontFamily:this.personFontFamily,fontSize:this.personFontSize,fontWeight:this.personFontWeight}},"personFont"),flowchart:{...sn.flowchart,inheritDir:!1},external_personFont:I(function(){return{fontFamily:this.external_personFontFamily,fontSize:this.external_personFontSize,fontWeight:this.external_personFontWeight}},"external_personFont"),systemFont:I(function(){return{fontFamily:this.systemFontFamily,fontSize:this.systemFontSize,fontWeight:this.systemFontWeight}},"systemFont"),external_systemFont:I(function(){return{fontFamily:this.external_systemFontFamily,fontSize:this.external_systemFontSize,fontWeight:this.external_systemFontWeight}},"external_systemFont"),system_dbFont:I(function(){return{fontFamily:this.system_dbFontFamily,fontSize:this.system_dbFontSize,fontWeight:this.system_dbFontWeight}},"system_dbFont"),external_system_dbFont:I(function(){return{fontFamily:this.external_system_dbFontFamily,fontSize:this.external_system_dbFontSize,fontWeight:this.external_system_dbFontWeight}},"external_system_dbFont"),system_queueFont:I(function(){return{fontFamily:this.system_queueFontFamily,fontSize:this.system_queueFontSize,fontWeight:this.system_queueFontWeight}},"system_queueFont"),external_system_queueFont:I(function(){return{fontFamily:this.external_system_queueFontFamily,fontSize:this.external_system_queueFontSize,fontWeight:this.external_system_queueFontWeight}},"external_system_queueFont"),containerFont:I(function(){return{fontFamily:this.containerFontFamily,fontSize:this.containerFontSize,fontWeight:this.containerFontWeight}},"containerFont"),external_containerFont:I(function(){return{fontFamily:this.external_containerFontFamily,fontSize:this.external_containerFontSize,fontWeight:this.external_containerFontWeight}},"external_containerFont"),container_dbFont:I(function(){return{fontFamily:this.container_dbFontFamily,fontSize:this.container_dbFontSize,fontWeight:this.container_dbFontWeight}},"container_dbFont"),external_container_dbFont:I(function(){return{fontFamily:this.external_container_dbFontFamily,fontSize:this.external_container_dbFontSize,fontWeight:this.external_container_dbFontWeight}},"external_container_dbFont"),container_queueFont:I(function(){return{fontFamily:this.container_queueFontFamily,fontSize:this.container_queueFontSize,fontWeight:this.container_queueFontWeight}},"container_queueFont"),external_container_queueFont:I(function(){return{fontFamily:this.external_container_queueFontFamily,fontSize:this.external_container_queueFontSize,fontWeight:this.external_container_queueFontWeight}},"external_container_queueFont"),componentFont:I(function(){return{fontFamily:this.componentFontFamily,fontSize:this.componentFontSize,fontWeight:this.componentFontWeight}},"componentFont"),external_componentFont:I(function(){return{fontFamily:this.external_componentFontFamily,fontSize:this.external_componentFontSize,fontWeight:this.external_componentFontWeight}},"external_componentFont"),component_dbFont:I(function(){return{fontFamily:this.component_dbFontFamily,fontSize:this.component_dbFontSize,fontWeight:this.component_dbFontWeight}},"component_dbFont"),external_component_dbFont:I(function(){return{fontFamily:this.external_component_dbFontFamily,fontSize:this.external_component_dbFontSize,fontWeight:this.external_component_dbFontWeight}},"external_component_dbFont"),component_queueFont:I(function(){return{fontFamily:this.component_queueFontFamily,fontSize:this.component_queueFontSize,fontWeight:this.component_queueFontWeight}},"component_queueFont"),external_component_queueFont:I(function(){return{fontFamily:this.external_component_queueFontFamily,fontSize:this.external_component_queueFontSize,fontWeight:this.external_component_queueFontWeight}},"external_component_queueFont"),boundaryFont:I(function(){return{fontFamily:this.boundaryFontFamily,fontSize:this.boundaryFontSize,fontWeight:this.boundaryFontWeight}},"boundaryFont"),messageFont:I(function(){return{fontFamily:this.messageFontFamily,fontSize:this.messageFontSize,fontWeight:this.messageFontWeight}},"messageFont")},pie:{...sn.pie,useWidth:984},xyChart:{...sn.xyChart,useWidth:void 0},requirement:{...sn.requirement,useWidth:void 0},packet:{...sn.packet},radar:{...sn.radar},treemap:{useMaxWidth:!0,padding:10,diagramPadding:8,showValues:!0,nodeWidth:100,nodeHeight:40,borderWidth:1,valueFontSize:12,labelFontSize:14,valueFormat:","}},rI=I((e,t="")=>Object.keys(e).reduce((a,r)=>Array.isArray(e[r])?a:typeof e[r]=="object"&&e[r]!==null?[...a,t+r,...rI(e[r],"")]:[...a,t+r],[]),"keyify"),uct=new Set(rI(aI,"")),nI=aI,Cd=I(e=>{if(It.debug("sanitizeDirective called with",e),!(typeof e!="object"||e==null)){if(Array.isArray(e)){e.forEach(t=>Cd(t));return}for(const t of Object.keys(e)){if(It.debug("Checking key",t),t.startsWith("__")||t.includes("proto")||t.includes("constr")||!uct.has(t)||e[t]==null){It.debug("sanitize deleting key: ",t),delete e[t];continue}if(typeof e[t]=="object"){It.debug("sanitizing object",t),Cd(e[t]);continue}const a=["themeCSS","fontFamily","altFontFamily"];for(const r of a)t.includes(r)&&(It.debug("sanitizing css option",t),e[t]=hct(e[t]))}if(e.themeVariables)for(const t of Object.keys(e.themeVariables)){const a=e.themeVariables[t];a!=null&&a.match&&!a.match(/^[\d "#%(),.;A-Za-z]+$/)&&(e.themeVariables[t]="")}It.debug("After sanitization",e)}},"sanitizeDirective"),hct=I(e=>{let t=0,a=0;for(const r of e){if(t<a)return"{ /* ERROR: Unbalanced CSS */ }";r==="{"?t++:r==="}"&&a++}return t!==a?"{ /* ERROR: Unbalanced CSS */ }":e},"sanitizeCss"),Zs=Object.freeze(nI),hr=Na({},Zs),iI,Ks=[],_c=Na({},Zs),Hf=I((e,t)=>{let a=Na({},e),r={};for(const n of t)lI(n),r=Na(r,n);if(a=Na(a,r),r.theme&&r.theme in Yn){const n=Na({},iI),i=Na(n.themeVariables||{},r.themeVariables);a.theme&&a.theme in Yn&&(a.themeVariables=Yn[a.theme].getThemeVariables(i))}return _c=a,cI(_c),_c},"updateCurrentConfig"),dct=I(e=>(hr=Na({},Zs),hr=Na(hr,e),e.theme&&Yn[e.theme]&&(hr.themeVariables=Yn[e.theme].getThemeVariables(e.themeVariables)),Hf(hr,Ks),hr),"setSiteConfig"),fct=I(e=>{iI=Na({},e)},"saveConfigFromInitialize"),pct=I(e=>(hr=Na(hr,e),Hf(hr,Ks),hr),"updateSiteConfig"),oI=I(()=>Na({},hr),"getSiteConfig"),sI=I(e=>(cI(e),Na(_c,e),mr()),"setConfig"),mr=I(()=>Na({},_c),"getConfig"),lI=I(e=>{e&&(["secure",...hr.secure??[]].forEach(t=>{Object.hasOwn(e,t)&&(It.debug(`Denied attempt to modify a secure key ${t}`,e[t]),delete e[t])}),Object.keys(e).forEach(t=>{t.startsWith("__")&&delete e[t]}),Object.keys(e).forEach(t=>{typeof e[t]=="string"&&(e[t].includes("<")||e[t].includes(">")||e[t].includes("url(data:"))&&delete e[t],typeof e[t]=="object"&&lI(e[t])}))},"sanitize"),gct=I(e=>{var t;Cd(e),e.fontFamily&&!((t=e.themeVariables)!=null&&t.fontFamily)&&(e.themeVariables={...e.themeVariables,fontFamily:e.fontFamily}),Ks.push(e),Hf(hr,Ks)},"addDirective"),Td=I((e=hr)=>{Ks=[],Hf(e,Ks)},"reset"),vct={LAZY_LOAD_DEPRECATED:"The configuration options lazyLoadedDiagrams and loadExternalDiagramsAtStartup are deprecated. Please use registerExternalDiagrams instead."},I2={},mct=I(e=>{I2[e]||(It.warn(vct[e]),I2[e]=!0)},"issueWarning"),cI=I(e=>{e&&(e.lazyLoadedDiagrams||e.loadExternalDiagramsAtStartup)&&mct("LAZY_LOAD_DEPRECATED")},"checkConfig"),wu=/<br\s*\/?>/gi,yct=I(e=>e?dI(e).replace(/\\n/g,"#br#").split("#br#"):[""],"getRows"),_ct=(()=>{let e=!1;return()=>{e||(uI(),e=!0)}})();function uI(){const e="data-temp-href-target";Ys.addHook("beforeSanitizeAttributes",t=>{t instanceof Element&&t.tagName==="A"&&t.hasAttribute("target")&&t.setAttribute(e,t.getAttribute("target")??"")}),Ys.addHook("afterSanitizeAttributes",t=>{t instanceof Element&&t.tagName==="A"&&t.hasAttribute(e)&&(t.setAttribute("target",t.getAttribute(e)??""),t.removeAttribute(e),t.getAttribute("target")==="_blank"&&t.setAttribute("rel","noopener"))})}I(uI,"setupDompurifyHooks");var hI=I(e=>(_ct(),Ys.sanitize(e)),"removeScript"),M2=I((e,t)=>{var a;if(((a=t.flowchart)==null?void 0:a.htmlLabels)!==!1){const r=t.securityLevel;r==="antiscript"||r==="strict"?e=hI(e):r!=="loose"&&(e=dI(e),e=e.replace(/</g,"&lt;").replace(/>/g,"&gt;"),e=e.replace(/=/g,"&equals;"),e=wct(e))}return e},"sanitizeMore"),Do=I((e,t)=>e&&(t.dompurifyConfig?e=Ys.sanitize(M2(e,t),t.dompurifyConfig).toString():e=Ys.sanitize(M2(e,t),{FORBID_TAGS:["style"]}).toString(),e),"sanitizeText"),bct=I((e,t)=>typeof e=="string"?Do(e,t):e.flat().map(a=>Do(a,t)),"sanitizeTextOrArray"),xct=I(e=>wu.test(e),"hasBreaks"),Sct=I(e=>e.split(wu),"splitBreaks"),wct=I(e=>e.replace(/#br#/g,"<br/>"),"placeholderToBreak"),dI=I(e=>e.replace(wu,"#br#"),"breakToPlaceholder"),fI=I(e=>{let t="";return e&&(t=window.location.protocol+"//"+window.location.host+window.location.pathname+window.location.search,t=CSS.escape(t)),t},"getUrl"),Da=I(e=>!(e===!1||["false","null","0"].includes(String(e).trim().toLowerCase())),"evaluate"),Cct=I(function(...e){const t=e.filter(a=>!isNaN(a));return Math.max(...t)},"getMax"),Tct=I(function(...e){const t=e.filter(a=>!isNaN(a));return Math.min(...t)},"getMin"),E2=I(function(e){const t=e.split(/(,)/),a=[];for(let r=0;r<t.length;r++){let n=t[r];if(n===","&&r>0&&r+1<t.length){const i=t[r-1],o=t[r+1];Act(i,o)&&(n=i+","+o,r++,a.pop())}a.push(kct(n))}return a.join("")},"parseGenericTypes"),_m=I((e,t)=>Math.max(0,e.split(t).length-1),"countOccurrence"),Act=I((e,t)=>{const a=_m(e,"~"),r=_m(t,"~");return a===1&&r===1},"shouldCombineSets"),kct=I(e=>{const t=_m(e,"~");let a=!1;if(t<=1)return e;t%2!==0&&e.startsWith("~")&&(e=e.substring(1),a=!0);const r=[...e];let n=r.indexOf("~"),i=r.lastIndexOf("~");for(;n!==-1&&i!==-1&&n!==i;)r[n]="<",r[i]=">",n=r.indexOf("~"),i=r.lastIndexOf("~");return a&&r.unshift("~"),r.join("")},"processSet"),R2=I(()=>window.MathMLElement!==void 0,"isMathMLSupported"),bm=/\$\$(.*)\$\$/g,Js=I(e=>{var t;return(((t=e.match(bm))==null?void 0:t.length)??0)>0},"hasKatex"),k_t=I(async(e,t)=>{e=await V0(e,t);const a=document.createElement("div");a.innerHTML=e,a.id="katex-temp",a.style.visibility="hidden",a.style.position="absolute",a.style.top="0";const r=document.querySelector("body");r==null||r.insertAdjacentElement("beforeend",a);const n={width:a.clientWidth,height:a.clientHeight};return a.remove(),n},"calculateMathMLDimensions"),V0=I(async(e,t)=>{if(!Js(e))return e;if(!(R2()||t.legacyMathML||t.forceLegacyMathML))return e.replace(bm,"MathML is unsupported in this environment.");{const{default:a}=await jt(async()=>{const{default:n}=await import("./katex-ChWnQ-fc.js");return{default:n}},[]),r=t.forceLegacyMathML||!R2()&&t.legacyMathML?"htmlAndMathml":"mathml";return e.split(wu).map(n=>Js(n)?`<div style="display: flex; align-items: center; justify-content: center; white-space: nowrap;">${n}</div>`:`<div>${n}</div>`).join("").replace(bm,(n,i)=>a.renderToString(i,{throwOnError:!0,displayMode:!0,output:r}).replace(/\n/g," ").replace(/<annotation.*<\/annotation>/g,""))}},"renderKatex"),vl={getRows:yct,sanitizeText:Do,sanitizeTextOrArray:bct,hasBreaks:xct,splitBreaks:Sct,lineBreakRegex:wu,removeScript:hI,getUrl:fI,evaluate:Da,getMax:Cct,getMin:Tct},Dct=I(function(e,t){for(let a of t)e.attr(a[0],a[1])},"d3Attrs"),Lct=I(function(e,t,a){let r=new Map;return a?(r.set("width","100%"),r.set("style",`max-width: ${t}px;`)):(r.set("height",e),r.set("width",t)),r},"calculateSvgSizeAttrs"),pI=I(function(e,t,a,r){const n=Lct(t,a,r);Dct(e,n)},"configureSvgSize"),Ict=I(function(e,t,a,r){const n=t.node().getBBox(),i=n.width,o=n.height;It.info(`SVG bounds: ${i}x${o}`,n);let s=0,l=0;It.info(`Graph bounds: ${s}x${l}`,e),s=i+a*2,l=o+a*2,It.info(`Calculated bounds: ${s}x${l}`),pI(t,l,s,r);const c=`${n.x-a} ${n.y-a} ${n.width+2*a} ${n.height+2*a}`;t.attr("viewBox",c)},"setupGraphViewbox"),Ih={},Mct=I((e,t,a)=>{let r="";return e in Ih&&Ih[e]?r=Ih[e](a):It.warn(`No theme found for ${e}`),` & {
    font-family: ${a.fontFamily};
    font-size: ${a.fontSize};
    fill: ${a.textColor}
  }
  @keyframes edge-animation-frame {
    from {
      stroke-dashoffset: 0;
    }
  }
  @keyframes dash {
    to {
      stroke-dashoffset: 0;
    }
  }
  & .edge-animation-slow {
    stroke-dasharray: 9,5 !important;
    stroke-dashoffset: 900;
    animation: dash 50s linear infinite;
    stroke-linecap: round;
  }
  & .edge-animation-fast {
    stroke-dasharray: 9,5 !important;
    stroke-dashoffset: 900;
    animation: dash 20s linear infinite;
    stroke-linecap: round;
  }
  /* Classes common for multiple diagrams */

  & .error-icon {
    fill: ${a.errorBkgColor};
  }
  & .error-text {
    fill: ${a.errorTextColor};
    stroke: ${a.errorTextColor};
  }

  & .edge-thickness-normal {
    stroke-width: 1px;
  }
  & .edge-thickness-thick {
    stroke-width: 3.5px
  }
  & .edge-pattern-solid {
    stroke-dasharray: 0;
  }
  & .edge-thickness-invisible {
    stroke-width: 0;
    fill: none;
  }
  & .edge-pattern-dashed{
    stroke-dasharray: 3;
  }
  .edge-pattern-dotted {
    stroke-dasharray: 2;
  }

  & .marker {
    fill: ${a.lineColor};
    stroke: ${a.lineColor};
  }
  & .marker.cross {
    stroke: ${a.lineColor};
  }

  & svg {
    font-family: ${a.fontFamily};
    font-size: ${a.fontSize};
  }
   & p {
    margin: 0
   }

  ${r}

  ${t}
`},"getStyles"),Ect=I((e,t)=>{t!==void 0&&(Ih[e]=t)},"addStylesForDiagram"),Rct=Mct,gI={};Klt(gI,{clear:()=>Pct,getAccDescription:()=>$ct,getAccTitle:()=>Oct,getDiagramTitle:()=>zct,setAccDescription:()=>Nct,setAccTitle:()=>Bct,setDiagramTitle:()=>Fct});var G0="",H0="",W0="",q0=I(e=>Do(e,mr()),"sanitizeText"),Pct=I(()=>{G0="",W0="",H0=""},"clear"),Bct=I(e=>{G0=q0(e).replace(/^\s+/g,"")},"setAccTitle"),Oct=I(()=>G0,"getAccTitle"),Nct=I(e=>{W0=q0(e).replace(/\n\s+/g,`
`)},"setAccDescription"),$ct=I(()=>W0,"getAccDescription"),Fct=I(e=>{H0=q0(e)},"setDiagramTitle"),zct=I(()=>H0,"getDiagramTitle"),P2=It,Vct=F0,He=mr,D_t=sI,L_t=Zs,Wf=I(e=>Do(e,He()),"sanitizeText"),Gct=Ict,Hct=I(()=>gI,"getCommonDb"),Ad={},kd=I((e,t,a)=>{var r;Ad[e]&&P2.warn(`Diagram with id ${e} already registered. Overwriting.`),Ad[e]=t,a&&eI(e,a),Ect(e,t.styles),(r=t.injectUtils)==null||r.call(t,P2,Vct,He,Wf,Gct,Hct(),()=>{})},"registerDiagram"),xm=I(e=>{if(e in Ad)return Ad[e];throw new Wct(e)},"getDiagram"),Is,Wct=(Is=class extends Error{constructor(t){super(`Diagram ${t} not found.`)}},I(Is,"DiagramNotFoundError"),Is);function U0(e){return typeof e>"u"||e===null}I(U0,"isNothing");function vI(e){return typeof e=="object"&&e!==null}I(vI,"isObject");function mI(e){return Array.isArray(e)?e:U0(e)?[]:[e]}I(mI,"toArray");function yI(e,t){var a,r,n,i;if(t)for(i=Object.keys(t),a=0,r=i.length;a<r;a+=1)n=i[a],e[n]=t[n];return e}I(yI,"extend");function _I(e,t){var a="",r;for(r=0;r<t;r+=1)a+=e;return a}I(_I,"repeat");function bI(e){return e===0&&Number.NEGATIVE_INFINITY===1/e}I(bI,"isNegativeZero");var qct=U0,Uct=vI,jct=mI,Yct=_I,Xct=bI,Zct=yI,wa={isNothing:qct,isObject:Uct,toArray:jct,repeat:Yct,isNegativeZero:Xct,extend:Zct};function j0(e,t){var a="",r=e.reason||"(unknown reason)";return e.mark?(e.mark.name&&(a+='in "'+e.mark.name+'" '),a+="("+(e.mark.line+1)+":"+(e.mark.column+1)+")",!t&&e.mark.snippet&&(a+=`

`+e.mark.snippet),r+" "+a):r}I(j0,"formatError");function Qs(e,t){Error.call(this),this.name="YAMLException",this.reason=e,this.mark=t,this.message=j0(this,!1),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack||""}I(Qs,"YAMLException$1");Qs.prototype=Object.create(Error.prototype);Qs.prototype.constructor=Qs;Qs.prototype.toString=I(function(t){return this.name+": "+j0(this,t)},"toString");var dr=Qs;function Mh(e,t,a,r,n){var i="",o="",s=Math.floor(n/2)-1;return r-t>s&&(i=" ... ",t=r-s+i.length),a-r>s&&(o=" ...",a=r+s-o.length),{str:i+e.slice(t,a).replace(/\t/g,"→")+o,pos:r-t+i.length}}I(Mh,"getLine");function Eh(e,t){return wa.repeat(" ",t-e.length)+e}I(Eh,"padStart");function xI(e,t){if(t=Object.create(t||null),!e.buffer)return null;t.maxLength||(t.maxLength=79),typeof t.indent!="number"&&(t.indent=1),typeof t.linesBefore!="number"&&(t.linesBefore=3),typeof t.linesAfter!="number"&&(t.linesAfter=2);for(var a=/\r?\n|\r|\0/g,r=[0],n=[],i,o=-1;i=a.exec(e.buffer);)n.push(i.index),r.push(i.index+i[0].length),e.position<=i.index&&o<0&&(o=r.length-2);o<0&&(o=r.length-1);var s="",l,c,u=Math.min(e.line+t.linesAfter,n.length).toString().length,h=t.maxLength-(t.indent+u+3);for(l=1;l<=t.linesBefore&&!(o-l<0);l++)c=Mh(e.buffer,r[o-l],n[o-l],e.position-(r[o]-r[o-l]),h),s=wa.repeat(" ",t.indent)+Eh((e.line-l+1).toString(),u)+" | "+c.str+`
`+s;for(c=Mh(e.buffer,r[o],n[o],e.position,h),s+=wa.repeat(" ",t.indent)+Eh((e.line+1).toString(),u)+" | "+c.str+`
`,s+=wa.repeat("-",t.indent+u+3+c.pos)+`^
`,l=1;l<=t.linesAfter&&!(o+l>=n.length);l++)c=Mh(e.buffer,r[o+l],n[o+l],e.position-(r[o]-r[o+l]),h),s+=wa.repeat(" ",t.indent)+Eh((e.line+l+1).toString(),u)+" | "+c.str+`
`;return s.replace(/\n$/,"")}I(xI,"makeSnippet");var Kct=xI,Jct=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],Qct=["scalar","sequence","mapping"];function SI(e){var t={};return e!==null&&Object.keys(e).forEach(function(a){e[a].forEach(function(r){t[String(r)]=a})}),t}I(SI,"compileStyleAliases");function wI(e,t){if(t=t||{},Object.keys(t).forEach(function(a){if(Jct.indexOf(a)===-1)throw new dr('Unknown option "'+a+'" is met in definition of "'+e+'" YAML type.')}),this.options=t,this.tag=e,this.kind=t.kind||null,this.resolve=t.resolve||function(){return!0},this.construct=t.construct||function(a){return a},this.instanceOf=t.instanceOf||null,this.predicate=t.predicate||null,this.represent=t.represent||null,this.representName=t.representName||null,this.defaultStyle=t.defaultStyle||null,this.multi=t.multi||!1,this.styleAliases=SI(t.styleAliases||null),Qct.indexOf(this.kind)===-1)throw new dr('Unknown kind "'+this.kind+'" is specified for "'+e+'" YAML type.')}I(wI,"Type$1");var Xa=wI;function Sm(e,t){var a=[];return e[t].forEach(function(r){var n=a.length;a.forEach(function(i,o){i.tag===r.tag&&i.kind===r.kind&&i.multi===r.multi&&(n=o)}),a[n]=r}),a}I(Sm,"compileList");function CI(){var e={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}},t,a;function r(n){n.multi?(e.multi[n.kind].push(n),e.multi.fallback.push(n)):e[n.kind][n.tag]=e.fallback[n.tag]=n}for(I(r,"collectType"),t=0,a=arguments.length;t<a;t+=1)arguments[t].forEach(r);return e}I(CI,"compileMap");function Dd(e){return this.extend(e)}I(Dd,"Schema$1");Dd.prototype.extend=I(function(t){var a=[],r=[];if(t instanceof Xa)r.push(t);else if(Array.isArray(t))r=r.concat(t);else if(t&&(Array.isArray(t.implicit)||Array.isArray(t.explicit)))t.implicit&&(a=a.concat(t.implicit)),t.explicit&&(r=r.concat(t.explicit));else throw new dr("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");a.forEach(function(i){if(!(i instanceof Xa))throw new dr("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(i.loadKind&&i.loadKind!=="scalar")throw new dr("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(i.multi)throw new dr("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")}),r.forEach(function(i){if(!(i instanceof Xa))throw new dr("Specified list of YAML types (or a single Type object) contains a non-Type object.")});var n=Object.create(Dd.prototype);return n.implicit=(this.implicit||[]).concat(a),n.explicit=(this.explicit||[]).concat(r),n.compiledImplicit=Sm(n,"implicit"),n.compiledExplicit=Sm(n,"explicit"),n.compiledTypeMap=CI(n.compiledImplicit,n.compiledExplicit),n},"extend");var tut=Dd,eut=new Xa("tag:yaml.org,2002:str",{kind:"scalar",construct:I(function(e){return e!==null?e:""},"construct")}),aut=new Xa("tag:yaml.org,2002:seq",{kind:"sequence",construct:I(function(e){return e!==null?e:[]},"construct")}),rut=new Xa("tag:yaml.org,2002:map",{kind:"mapping",construct:I(function(e){return e!==null?e:{}},"construct")}),nut=new tut({explicit:[eut,aut,rut]});function TI(e){if(e===null)return!0;var t=e.length;return t===1&&e==="~"||t===4&&(e==="null"||e==="Null"||e==="NULL")}I(TI,"resolveYamlNull");function AI(){return null}I(AI,"constructYamlNull");function kI(e){return e===null}I(kI,"isNull");var iut=new Xa("tag:yaml.org,2002:null",{kind:"scalar",resolve:TI,construct:AI,predicate:kI,represent:{canonical:I(function(){return"~"},"canonical"),lowercase:I(function(){return"null"},"lowercase"),uppercase:I(function(){return"NULL"},"uppercase"),camelcase:I(function(){return"Null"},"camelcase"),empty:I(function(){return""},"empty")},defaultStyle:"lowercase"});function DI(e){if(e===null)return!1;var t=e.length;return t===4&&(e==="true"||e==="True"||e==="TRUE")||t===5&&(e==="false"||e==="False"||e==="FALSE")}I(DI,"resolveYamlBoolean");function LI(e){return e==="true"||e==="True"||e==="TRUE"}I(LI,"constructYamlBoolean");function II(e){return Object.prototype.toString.call(e)==="[object Boolean]"}I(II,"isBoolean");var out=new Xa("tag:yaml.org,2002:bool",{kind:"scalar",resolve:DI,construct:LI,predicate:II,represent:{lowercase:I(function(e){return e?"true":"false"},"lowercase"),uppercase:I(function(e){return e?"TRUE":"FALSE"},"uppercase"),camelcase:I(function(e){return e?"True":"False"},"camelcase")},defaultStyle:"lowercase"});function MI(e){return 48<=e&&e<=57||65<=e&&e<=70||97<=e&&e<=102}I(MI,"isHexCode");function EI(e){return 48<=e&&e<=55}I(EI,"isOctCode");function RI(e){return 48<=e&&e<=57}I(RI,"isDecCode");function PI(e){if(e===null)return!1;var t=e.length,a=0,r=!1,n;if(!t)return!1;if(n=e[a],(n==="-"||n==="+")&&(n=e[++a]),n==="0"){if(a+1===t)return!0;if(n=e[++a],n==="b"){for(a++;a<t;a++)if(n=e[a],n!=="_"){if(n!=="0"&&n!=="1")return!1;r=!0}return r&&n!=="_"}if(n==="x"){for(a++;a<t;a++)if(n=e[a],n!=="_"){if(!MI(e.charCodeAt(a)))return!1;r=!0}return r&&n!=="_"}if(n==="o"){for(a++;a<t;a++)if(n=e[a],n!=="_"){if(!EI(e.charCodeAt(a)))return!1;r=!0}return r&&n!=="_"}}if(n==="_")return!1;for(;a<t;a++)if(n=e[a],n!=="_"){if(!RI(e.charCodeAt(a)))return!1;r=!0}return!(!r||n==="_")}I(PI,"resolveYamlInteger");function BI(e){var t=e,a=1,r;if(t.indexOf("_")!==-1&&(t=t.replace(/_/g,"")),r=t[0],(r==="-"||r==="+")&&(r==="-"&&(a=-1),t=t.slice(1),r=t[0]),t==="0")return 0;if(r==="0"){if(t[1]==="b")return a*parseInt(t.slice(2),2);if(t[1]==="x")return a*parseInt(t.slice(2),16);if(t[1]==="o")return a*parseInt(t.slice(2),8)}return a*parseInt(t,10)}I(BI,"constructYamlInteger");function OI(e){return Object.prototype.toString.call(e)==="[object Number]"&&e%1===0&&!wa.isNegativeZero(e)}I(OI,"isInteger");var sut=new Xa("tag:yaml.org,2002:int",{kind:"scalar",resolve:PI,construct:BI,predicate:OI,represent:{binary:I(function(e){return e>=0?"0b"+e.toString(2):"-0b"+e.toString(2).slice(1)},"binary"),octal:I(function(e){return e>=0?"0o"+e.toString(8):"-0o"+e.toString(8).slice(1)},"octal"),decimal:I(function(e){return e.toString(10)},"decimal"),hexadecimal:I(function(e){return e>=0?"0x"+e.toString(16).toUpperCase():"-0x"+e.toString(16).toUpperCase().slice(1)},"hexadecimal")},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),lut=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");function NI(e){return!(e===null||!lut.test(e)||e[e.length-1]==="_")}I(NI,"resolveYamlFloat");function $I(e){var t,a;return t=e.replace(/_/g,"").toLowerCase(),a=t[0]==="-"?-1:1,"+-".indexOf(t[0])>=0&&(t=t.slice(1)),t===".inf"?a===1?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:t===".nan"?NaN:a*parseFloat(t,10)}I($I,"constructYamlFloat");var cut=/^[-+]?[0-9]+e/;function FI(e,t){var a;if(isNaN(e))switch(t){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===e)switch(t){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===e)switch(t){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(wa.isNegativeZero(e))return"-0.0";return a=e.toString(10),cut.test(a)?a.replace("e",".e"):a}I(FI,"representYamlFloat");function zI(e){return Object.prototype.toString.call(e)==="[object Number]"&&(e%1!==0||wa.isNegativeZero(e))}I(zI,"isFloat");var uut=new Xa("tag:yaml.org,2002:float",{kind:"scalar",resolve:NI,construct:$I,predicate:zI,represent:FI,defaultStyle:"lowercase"}),VI=nut.extend({implicit:[iut,out,sut,uut]}),hut=VI,GI=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),HI=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");function WI(e){return e===null?!1:GI.exec(e)!==null||HI.exec(e)!==null}I(WI,"resolveYamlTimestamp");function qI(e){var t,a,r,n,i,o,s,l=0,c=null,u,h,d;if(t=GI.exec(e),t===null&&(t=HI.exec(e)),t===null)throw new Error("Date resolve error");if(a=+t[1],r=+t[2]-1,n=+t[3],!t[4])return new Date(Date.UTC(a,r,n));if(i=+t[4],o=+t[5],s=+t[6],t[7]){for(l=t[7].slice(0,3);l.length<3;)l+="0";l=+l}return t[9]&&(u=+t[10],h=+(t[11]||0),c=(u*60+h)*6e4,t[9]==="-"&&(c=-c)),d=new Date(Date.UTC(a,r,n,i,o,s,l)),c&&d.setTime(d.getTime()-c),d}I(qI,"constructYamlTimestamp");function UI(e){return e.toISOString()}I(UI,"representYamlTimestamp");var dut=new Xa("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:WI,construct:qI,instanceOf:Date,represent:UI});function jI(e){return e==="<<"||e===null}I(jI,"resolveYamlMerge");var fut=new Xa("tag:yaml.org,2002:merge",{kind:"scalar",resolve:jI}),Y0=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=
\r`;function YI(e){if(e===null)return!1;var t,a,r=0,n=e.length,i=Y0;for(a=0;a<n;a++)if(t=i.indexOf(e.charAt(a)),!(t>64)){if(t<0)return!1;r+=6}return r%8===0}I(YI,"resolveYamlBinary");function XI(e){var t,a,r=e.replace(/[\r\n=]/g,""),n=r.length,i=Y0,o=0,s=[];for(t=0;t<n;t++)t%4===0&&t&&(s.push(o>>16&255),s.push(o>>8&255),s.push(o&255)),o=o<<6|i.indexOf(r.charAt(t));return a=n%4*6,a===0?(s.push(o>>16&255),s.push(o>>8&255),s.push(o&255)):a===18?(s.push(o>>10&255),s.push(o>>2&255)):a===12&&s.push(o>>4&255),new Uint8Array(s)}I(XI,"constructYamlBinary");function ZI(e){var t="",a=0,r,n,i=e.length,o=Y0;for(r=0;r<i;r++)r%3===0&&r&&(t+=o[a>>18&63],t+=o[a>>12&63],t+=o[a>>6&63],t+=o[a&63]),a=(a<<8)+e[r];return n=i%3,n===0?(t+=o[a>>18&63],t+=o[a>>12&63],t+=o[a>>6&63],t+=o[a&63]):n===2?(t+=o[a>>10&63],t+=o[a>>4&63],t+=o[a<<2&63],t+=o[64]):n===1&&(t+=o[a>>2&63],t+=o[a<<4&63],t+=o[64],t+=o[64]),t}I(ZI,"representYamlBinary");function KI(e){return Object.prototype.toString.call(e)==="[object Uint8Array]"}I(KI,"isBinary");var put=new Xa("tag:yaml.org,2002:binary",{kind:"scalar",resolve:YI,construct:XI,predicate:KI,represent:ZI}),gut=Object.prototype.hasOwnProperty,vut=Object.prototype.toString;function JI(e){if(e===null)return!0;var t=[],a,r,n,i,o,s=e;for(a=0,r=s.length;a<r;a+=1){if(n=s[a],o=!1,vut.call(n)!=="[object Object]")return!1;for(i in n)if(gut.call(n,i))if(!o)o=!0;else return!1;if(!o)return!1;if(t.indexOf(i)===-1)t.push(i);else return!1}return!0}I(JI,"resolveYamlOmap");function QI(e){return e!==null?e:[]}I(QI,"constructYamlOmap");var mut=new Xa("tag:yaml.org,2002:omap",{kind:"sequence",resolve:JI,construct:QI}),yut=Object.prototype.toString;function tM(e){if(e===null)return!0;var t,a,r,n,i,o=e;for(i=new Array(o.length),t=0,a=o.length;t<a;t+=1){if(r=o[t],yut.call(r)!=="[object Object]"||(n=Object.keys(r),n.length!==1))return!1;i[t]=[n[0],r[n[0]]]}return!0}I(tM,"resolveYamlPairs");function eM(e){if(e===null)return[];var t,a,r,n,i,o=e;for(i=new Array(o.length),t=0,a=o.length;t<a;t+=1)r=o[t],n=Object.keys(r),i[t]=[n[0],r[n[0]]];return i}I(eM,"constructYamlPairs");var _ut=new Xa("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:tM,construct:eM}),but=Object.prototype.hasOwnProperty;function aM(e){if(e===null)return!0;var t,a=e;for(t in a)if(but.call(a,t)&&a[t]!==null)return!1;return!0}I(aM,"resolveYamlSet");function rM(e){return e!==null?e:{}}I(rM,"constructYamlSet");var xut=new Xa("tag:yaml.org,2002:set",{kind:"mapping",resolve:aM,construct:rM}),nM=hut.extend({implicit:[dut,fut],explicit:[put,mut,_ut,xut]}),Oi=Object.prototype.hasOwnProperty,Ld=1,iM=2,oM=3,Id=4,Wg=1,Sut=2,B2=3,wut=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,Cut=/[\x85\u2028\u2029]/,Tut=/[,\[\]\{\}]/,sM=/^(?:!|!!|![a-z\-]+!)$/i,lM=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function wm(e){return Object.prototype.toString.call(e)}I(wm,"_class");function Ur(e){return e===10||e===13}I(Ur,"is_EOL");function Li(e){return e===9||e===32}I(Li,"is_WHITE_SPACE");function ar(e){return e===9||e===32||e===10||e===13}I(ar,"is_WS_OR_EOL");function fo(e){return e===44||e===91||e===93||e===123||e===125}I(fo,"is_FLOW_INDICATOR");function cM(e){var t;return 48<=e&&e<=57?e-48:(t=e|32,97<=t&&t<=102?t-97+10:-1)}I(cM,"fromHexCode");function uM(e){return e===120?2:e===117?4:e===85?8:0}I(uM,"escapedHexLen");function hM(e){return 48<=e&&e<=57?e-48:-1}I(hM,"fromDecimalCode");function Cm(e){return e===48?"\0":e===97?"\x07":e===98?"\b":e===116||e===9?"	":e===110?`
`:e===118?"\v":e===102?"\f":e===114?"\r":e===101?"\x1B":e===32?" ":e===34?'"':e===47?"/":e===92?"\\":e===78?"":e===95?" ":e===76?"\u2028":e===80?"\u2029":""}I(Cm,"simpleEscapeSequence");function dM(e){return e<=65535?String.fromCharCode(e):String.fromCharCode((e-65536>>10)+55296,(e-65536&1023)+56320)}I(dM,"charFromCodepoint");var fM=new Array(256),pM=new Array(256);for(Yi=0;Yi<256;Yi++)fM[Yi]=Cm(Yi)?1:0,pM[Yi]=Cm(Yi);var Yi;function gM(e,t){this.input=e,this.filename=t.filename||null,this.schema=t.schema||nM,this.onWarning=t.onWarning||null,this.legacy=t.legacy||!1,this.json=t.json||!1,this.listener=t.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=e.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.firstTabInLine=-1,this.documents=[]}I(gM,"State$1");function X0(e,t){var a={name:e.filename,buffer:e.input.slice(0,-1),position:e.position,line:e.line,column:e.position-e.lineStart};return a.snippet=Kct(a),new dr(t,a)}I(X0,"generateError");function ce(e,t){throw X0(e,t)}I(ce,"throwError");function jc(e,t){e.onWarning&&e.onWarning.call(null,X0(e,t))}I(jc,"throwWarning");var O2={YAML:I(function(t,a,r){var n,i,o;t.version!==null&&ce(t,"duplication of %YAML directive"),r.length!==1&&ce(t,"YAML directive accepts exactly one argument"),n=/^([0-9]+)\.([0-9]+)$/.exec(r[0]),n===null&&ce(t,"ill-formed argument of the YAML directive"),i=parseInt(n[1],10),o=parseInt(n[2],10),i!==1&&ce(t,"unacceptable YAML version of the document"),t.version=r[0],t.checkLineBreaks=o<2,o!==1&&o!==2&&jc(t,"unsupported YAML version of the document")},"handleYamlDirective"),TAG:I(function(t,a,r){var n,i;r.length!==2&&ce(t,"TAG directive accepts exactly two arguments"),n=r[0],i=r[1],sM.test(n)||ce(t,"ill-formed tag handle (first argument) of the TAG directive"),Oi.call(t.tagMap,n)&&ce(t,'there is a previously declared suffix for "'+n+'" tag handle'),lM.test(i)||ce(t,"ill-formed tag prefix (second argument) of the TAG directive");try{i=decodeURIComponent(i)}catch{ce(t,"tag prefix is malformed: "+i)}t.tagMap[n]=i},"handleTagDirective")};function Xn(e,t,a,r){var n,i,o,s;if(t<a){if(s=e.input.slice(t,a),r)for(n=0,i=s.length;n<i;n+=1)o=s.charCodeAt(n),o===9||32<=o&&o<=1114111||ce(e,"expected valid JSON character");else wut.test(s)&&ce(e,"the stream contains non-printable characters");e.result+=s}}I(Xn,"captureSegment");function Tm(e,t,a,r){var n,i,o,s;for(wa.isObject(a)||ce(e,"cannot merge mappings; the provided source object is unacceptable"),n=Object.keys(a),o=0,s=n.length;o<s;o+=1)i=n[o],Oi.call(t,i)||(t[i]=a[i],r[i]=!0)}I(Tm,"mergeMappings");function po(e,t,a,r,n,i,o,s,l){var c,u;if(Array.isArray(n))for(n=Array.prototype.slice.call(n),c=0,u=n.length;c<u;c+=1)Array.isArray(n[c])&&ce(e,"nested arrays are not supported inside keys"),typeof n=="object"&&wm(n[c])==="[object Object]"&&(n[c]="[object Object]");if(typeof n=="object"&&wm(n)==="[object Object]"&&(n="[object Object]"),n=String(n),t===null&&(t={}),r==="tag:yaml.org,2002:merge")if(Array.isArray(i))for(c=0,u=i.length;c<u;c+=1)Tm(e,t,i[c],a);else Tm(e,t,i,a);else!e.json&&!Oi.call(a,n)&&Oi.call(t,n)&&(e.line=o||e.line,e.lineStart=s||e.lineStart,e.position=l||e.position,ce(e,"duplicated mapping key")),n==="__proto__"?Object.defineProperty(t,n,{configurable:!0,enumerable:!0,writable:!0,value:i}):t[n]=i,delete a[n];return t}I(po,"storeMappingPair");function qf(e){var t;t=e.input.charCodeAt(e.position),t===10?e.position++:t===13?(e.position++,e.input.charCodeAt(e.position)===10&&e.position++):ce(e,"a line break is expected"),e.line+=1,e.lineStart=e.position,e.firstTabInLine=-1}I(qf,"readLineBreak");function ga(e,t,a){for(var r=0,n=e.input.charCodeAt(e.position);n!==0;){for(;Li(n);)n===9&&e.firstTabInLine===-1&&(e.firstTabInLine=e.position),n=e.input.charCodeAt(++e.position);if(t&&n===35)do n=e.input.charCodeAt(++e.position);while(n!==10&&n!==13&&n!==0);if(Ur(n))for(qf(e),n=e.input.charCodeAt(e.position),r++,e.lineIndent=0;n===32;)e.lineIndent++,n=e.input.charCodeAt(++e.position);else break}return a!==-1&&r!==0&&e.lineIndent<a&&jc(e,"deficient indentation"),r}I(ga,"skipSeparationSpace");function Cu(e){var t=e.position,a;return a=e.input.charCodeAt(t),!!((a===45||a===46)&&a===e.input.charCodeAt(t+1)&&a===e.input.charCodeAt(t+2)&&(t+=3,a=e.input.charCodeAt(t),a===0||ar(a)))}I(Cu,"testDocumentSeparator");function Uf(e,t){t===1?e.result+=" ":t>1&&(e.result+=wa.repeat(`
`,t-1))}I(Uf,"writeFoldedLines");function vM(e,t,a){var r,n,i,o,s,l,c,u,h=e.kind,d=e.result,f;if(f=e.input.charCodeAt(e.position),ar(f)||fo(f)||f===35||f===38||f===42||f===33||f===124||f===62||f===39||f===34||f===37||f===64||f===96||(f===63||f===45)&&(n=e.input.charCodeAt(e.position+1),ar(n)||a&&fo(n)))return!1;for(e.kind="scalar",e.result="",i=o=e.position,s=!1;f!==0;){if(f===58){if(n=e.input.charCodeAt(e.position+1),ar(n)||a&&fo(n))break}else if(f===35){if(r=e.input.charCodeAt(e.position-1),ar(r))break}else{if(e.position===e.lineStart&&Cu(e)||a&&fo(f))break;if(Ur(f))if(l=e.line,c=e.lineStart,u=e.lineIndent,ga(e,!1,-1),e.lineIndent>=t){s=!0,f=e.input.charCodeAt(e.position);continue}else{e.position=o,e.line=l,e.lineStart=c,e.lineIndent=u;break}}s&&(Xn(e,i,o,!1),Uf(e,e.line-l),i=o=e.position,s=!1),Li(f)||(o=e.position+1),f=e.input.charCodeAt(++e.position)}return Xn(e,i,o,!1),e.result?!0:(e.kind=h,e.result=d,!1)}I(vM,"readPlainScalar");function mM(e,t){var a,r,n;if(a=e.input.charCodeAt(e.position),a!==39)return!1;for(e.kind="scalar",e.result="",e.position++,r=n=e.position;(a=e.input.charCodeAt(e.position))!==0;)if(a===39)if(Xn(e,r,e.position,!0),a=e.input.charCodeAt(++e.position),a===39)r=e.position,e.position++,n=e.position;else return!0;else Ur(a)?(Xn(e,r,n,!0),Uf(e,ga(e,!1,t)),r=n=e.position):e.position===e.lineStart&&Cu(e)?ce(e,"unexpected end of the document within a single quoted scalar"):(e.position++,n=e.position);ce(e,"unexpected end of the stream within a single quoted scalar")}I(mM,"readSingleQuotedScalar");function yM(e,t){var a,r,n,i,o,s;if(s=e.input.charCodeAt(e.position),s!==34)return!1;for(e.kind="scalar",e.result="",e.position++,a=r=e.position;(s=e.input.charCodeAt(e.position))!==0;){if(s===34)return Xn(e,a,e.position,!0),e.position++,!0;if(s===92){if(Xn(e,a,e.position,!0),s=e.input.charCodeAt(++e.position),Ur(s))ga(e,!1,t);else if(s<256&&fM[s])e.result+=pM[s],e.position++;else if((o=uM(s))>0){for(n=o,i=0;n>0;n--)s=e.input.charCodeAt(++e.position),(o=cM(s))>=0?i=(i<<4)+o:ce(e,"expected hexadecimal character");e.result+=dM(i),e.position++}else ce(e,"unknown escape sequence");a=r=e.position}else Ur(s)?(Xn(e,a,r,!0),Uf(e,ga(e,!1,t)),a=r=e.position):e.position===e.lineStart&&Cu(e)?ce(e,"unexpected end of the document within a double quoted scalar"):(e.position++,r=e.position)}ce(e,"unexpected end of the stream within a double quoted scalar")}I(yM,"readDoubleQuotedScalar");function _M(e,t){var a=!0,r,n,i,o=e.tag,s,l=e.anchor,c,u,h,d,f,p=Object.create(null),g,v,_,y;if(y=e.input.charCodeAt(e.position),y===91)u=93,f=!1,s=[];else if(y===123)u=125,f=!0,s={};else return!1;for(e.anchor!==null&&(e.anchorMap[e.anchor]=s),y=e.input.charCodeAt(++e.position);y!==0;){if(ga(e,!0,t),y=e.input.charCodeAt(e.position),y===u)return e.position++,e.tag=o,e.anchor=l,e.kind=f?"mapping":"sequence",e.result=s,!0;a?y===44&&ce(e,"expected the node content, but found ','"):ce(e,"missed comma between flow collection entries"),v=g=_=null,h=d=!1,y===63&&(c=e.input.charCodeAt(e.position+1),ar(c)&&(h=d=!0,e.position++,ga(e,!0,t))),r=e.line,n=e.lineStart,i=e.position,Lo(e,t,Ld,!1,!0),v=e.tag,g=e.result,ga(e,!0,t),y=e.input.charCodeAt(e.position),(d||e.line===r)&&y===58&&(h=!0,y=e.input.charCodeAt(++e.position),ga(e,!0,t),Lo(e,t,Ld,!1,!0),_=e.result),f?po(e,s,p,v,g,_,r,n,i):h?s.push(po(e,null,p,v,g,_,r,n,i)):s.push(g),ga(e,!0,t),y=e.input.charCodeAt(e.position),y===44?(a=!0,y=e.input.charCodeAt(++e.position)):a=!1}ce(e,"unexpected end of the stream within a flow collection")}I(_M,"readFlowCollection");function bM(e,t){var a,r,n=Wg,i=!1,o=!1,s=t,l=0,c=!1,u,h;if(h=e.input.charCodeAt(e.position),h===124)r=!1;else if(h===62)r=!0;else return!1;for(e.kind="scalar",e.result="";h!==0;)if(h=e.input.charCodeAt(++e.position),h===43||h===45)Wg===n?n=h===43?B2:Sut:ce(e,"repeat of a chomping mode identifier");else if((u=hM(h))>=0)u===0?ce(e,"bad explicit indentation width of a block scalar; it cannot be less than one"):o?ce(e,"repeat of an indentation width identifier"):(s=t+u-1,o=!0);else break;if(Li(h)){do h=e.input.charCodeAt(++e.position);while(Li(h));if(h===35)do h=e.input.charCodeAt(++e.position);while(!Ur(h)&&h!==0)}for(;h!==0;){for(qf(e),e.lineIndent=0,h=e.input.charCodeAt(e.position);(!o||e.lineIndent<s)&&h===32;)e.lineIndent++,h=e.input.charCodeAt(++e.position);if(!o&&e.lineIndent>s&&(s=e.lineIndent),Ur(h)){l++;continue}if(e.lineIndent<s){n===B2?e.result+=wa.repeat(`
`,i?1+l:l):n===Wg&&i&&(e.result+=`
`);break}for(r?Li(h)?(c=!0,e.result+=wa.repeat(`
`,i?1+l:l)):c?(c=!1,e.result+=wa.repeat(`
`,l+1)):l===0?i&&(e.result+=" "):e.result+=wa.repeat(`
`,l):e.result+=wa.repeat(`
`,i?1+l:l),i=!0,o=!0,l=0,a=e.position;!Ur(h)&&h!==0;)h=e.input.charCodeAt(++e.position);Xn(e,a,e.position,!1)}return!0}I(bM,"readBlockScalar");function Am(e,t){var a,r=e.tag,n=e.anchor,i=[],o,s=!1,l;if(e.firstTabInLine!==-1)return!1;for(e.anchor!==null&&(e.anchorMap[e.anchor]=i),l=e.input.charCodeAt(e.position);l!==0&&(e.firstTabInLine!==-1&&(e.position=e.firstTabInLine,ce(e,"tab characters must not be used in indentation")),!(l!==45||(o=e.input.charCodeAt(e.position+1),!ar(o))));){if(s=!0,e.position++,ga(e,!0,-1)&&e.lineIndent<=t){i.push(null),l=e.input.charCodeAt(e.position);continue}if(a=e.line,Lo(e,t,oM,!1,!0),i.push(e.result),ga(e,!0,-1),l=e.input.charCodeAt(e.position),(e.line===a||e.lineIndent>t)&&l!==0)ce(e,"bad indentation of a sequence entry");else if(e.lineIndent<t)break}return s?(e.tag=r,e.anchor=n,e.kind="sequence",e.result=i,!0):!1}I(Am,"readBlockSequence");function xM(e,t,a){var r,n,i,o,s,l,c=e.tag,u=e.anchor,h={},d=Object.create(null),f=null,p=null,g=null,v=!1,_=!1,y;if(e.firstTabInLine!==-1)return!1;for(e.anchor!==null&&(e.anchorMap[e.anchor]=h),y=e.input.charCodeAt(e.position);y!==0;){if(!v&&e.firstTabInLine!==-1&&(e.position=e.firstTabInLine,ce(e,"tab characters must not be used in indentation")),r=e.input.charCodeAt(e.position+1),i=e.line,(y===63||y===58)&&ar(r))y===63?(v&&(po(e,h,d,f,p,null,o,s,l),f=p=g=null),_=!0,v=!0,n=!0):v?(v=!1,n=!0):ce(e,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),e.position+=1,y=r;else{if(o=e.line,s=e.lineStart,l=e.position,!Lo(e,a,iM,!1,!0))break;if(e.line===i){for(y=e.input.charCodeAt(e.position);Li(y);)y=e.input.charCodeAt(++e.position);if(y===58)y=e.input.charCodeAt(++e.position),ar(y)||ce(e,"a whitespace character is expected after the key-value separator within a block mapping"),v&&(po(e,h,d,f,p,null,o,s,l),f=p=g=null),_=!0,v=!1,n=!1,f=e.tag,p=e.result;else if(_)ce(e,"can not read an implicit mapping pair; a colon is missed");else return e.tag=c,e.anchor=u,!0}else if(_)ce(e,"can not read a block mapping entry; a multiline key may not be an implicit key");else return e.tag=c,e.anchor=u,!0}if((e.line===i||e.lineIndent>t)&&(v&&(o=e.line,s=e.lineStart,l=e.position),Lo(e,t,Id,!0,n)&&(v?p=e.result:g=e.result),v||(po(e,h,d,f,p,g,o,s,l),f=p=g=null),ga(e,!0,-1),y=e.input.charCodeAt(e.position)),(e.line===i||e.lineIndent>t)&&y!==0)ce(e,"bad indentation of a mapping entry");else if(e.lineIndent<t)break}return v&&po(e,h,d,f,p,null,o,s,l),_&&(e.tag=c,e.anchor=u,e.kind="mapping",e.result=h),_}I(xM,"readBlockMapping");function SM(e){var t,a=!1,r=!1,n,i,o;if(o=e.input.charCodeAt(e.position),o!==33)return!1;if(e.tag!==null&&ce(e,"duplication of a tag property"),o=e.input.charCodeAt(++e.position),o===60?(a=!0,o=e.input.charCodeAt(++e.position)):o===33?(r=!0,n="!!",o=e.input.charCodeAt(++e.position)):n="!",t=e.position,a){do o=e.input.charCodeAt(++e.position);while(o!==0&&o!==62);e.position<e.length?(i=e.input.slice(t,e.position),o=e.input.charCodeAt(++e.position)):ce(e,"unexpected end of the stream within a verbatim tag")}else{for(;o!==0&&!ar(o);)o===33&&(r?ce(e,"tag suffix cannot contain exclamation marks"):(n=e.input.slice(t-1,e.position+1),sM.test(n)||ce(e,"named tag handle cannot contain such characters"),r=!0,t=e.position+1)),o=e.input.charCodeAt(++e.position);i=e.input.slice(t,e.position),Tut.test(i)&&ce(e,"tag suffix cannot contain flow indicator characters")}i&&!lM.test(i)&&ce(e,"tag name cannot contain such characters: "+i);try{i=decodeURIComponent(i)}catch{ce(e,"tag name is malformed: "+i)}return a?e.tag=i:Oi.call(e.tagMap,n)?e.tag=e.tagMap[n]+i:n==="!"?e.tag="!"+i:n==="!!"?e.tag="tag:yaml.org,2002:"+i:ce(e,'undeclared tag handle "'+n+'"'),!0}I(SM,"readTagProperty");function wM(e){var t,a;if(a=e.input.charCodeAt(e.position),a!==38)return!1;for(e.anchor!==null&&ce(e,"duplication of an anchor property"),a=e.input.charCodeAt(++e.position),t=e.position;a!==0&&!ar(a)&&!fo(a);)a=e.input.charCodeAt(++e.position);return e.position===t&&ce(e,"name of an anchor node must contain at least one character"),e.anchor=e.input.slice(t,e.position),!0}I(wM,"readAnchorProperty");function CM(e){var t,a,r;if(r=e.input.charCodeAt(e.position),r!==42)return!1;for(r=e.input.charCodeAt(++e.position),t=e.position;r!==0&&!ar(r)&&!fo(r);)r=e.input.charCodeAt(++e.position);return e.position===t&&ce(e,"name of an alias node must contain at least one character"),a=e.input.slice(t,e.position),Oi.call(e.anchorMap,a)||ce(e,'unidentified alias "'+a+'"'),e.result=e.anchorMap[a],ga(e,!0,-1),!0}I(CM,"readAlias");function Lo(e,t,a,r,n){var i,o,s,l=1,c=!1,u=!1,h,d,f,p,g,v;if(e.listener!==null&&e.listener("open",e),e.tag=null,e.anchor=null,e.kind=null,e.result=null,i=o=s=Id===a||oM===a,r&&ga(e,!0,-1)&&(c=!0,e.lineIndent>t?l=1:e.lineIndent===t?l=0:e.lineIndent<t&&(l=-1)),l===1)for(;SM(e)||wM(e);)ga(e,!0,-1)?(c=!0,s=i,e.lineIndent>t?l=1:e.lineIndent===t?l=0:e.lineIndent<t&&(l=-1)):s=!1;if(s&&(s=c||n),(l===1||Id===a)&&(Ld===a||iM===a?g=t:g=t+1,v=e.position-e.lineStart,l===1?s&&(Am(e,v)||xM(e,v,g))||_M(e,g)?u=!0:(o&&bM(e,g)||mM(e,g)||yM(e,g)?u=!0:CM(e)?(u=!0,(e.tag!==null||e.anchor!==null)&&ce(e,"alias node should not have any properties")):vM(e,g,Ld===a)&&(u=!0,e.tag===null&&(e.tag="?")),e.anchor!==null&&(e.anchorMap[e.anchor]=e.result)):l===0&&(u=s&&Am(e,v))),e.tag===null)e.anchor!==null&&(e.anchorMap[e.anchor]=e.result);else if(e.tag==="?"){for(e.result!==null&&e.kind!=="scalar"&&ce(e,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+e.kind+'"'),h=0,d=e.implicitTypes.length;h<d;h+=1)if(p=e.implicitTypes[h],p.resolve(e.result)){e.result=p.construct(e.result),e.tag=p.tag,e.anchor!==null&&(e.anchorMap[e.anchor]=e.result);break}}else if(e.tag!=="!"){if(Oi.call(e.typeMap[e.kind||"fallback"],e.tag))p=e.typeMap[e.kind||"fallback"][e.tag];else for(p=null,f=e.typeMap.multi[e.kind||"fallback"],h=0,d=f.length;h<d;h+=1)if(e.tag.slice(0,f[h].tag.length)===f[h].tag){p=f[h];break}p||ce(e,"unknown tag !<"+e.tag+">"),e.result!==null&&p.kind!==e.kind&&ce(e,"unacceptable node kind for !<"+e.tag+'> tag; it should be "'+p.kind+'", not "'+e.kind+'"'),p.resolve(e.result,e.tag)?(e.result=p.construct(e.result,e.tag),e.anchor!==null&&(e.anchorMap[e.anchor]=e.result)):ce(e,"cannot resolve a node with !<"+e.tag+"> explicit tag")}return e.listener!==null&&e.listener("close",e),e.tag!==null||e.anchor!==null||u}I(Lo,"composeNode");function TM(e){var t=e.position,a,r,n,i=!1,o;for(e.version=null,e.checkLineBreaks=e.legacy,e.tagMap=Object.create(null),e.anchorMap=Object.create(null);(o=e.input.charCodeAt(e.position))!==0&&(ga(e,!0,-1),o=e.input.charCodeAt(e.position),!(e.lineIndent>0||o!==37));){for(i=!0,o=e.input.charCodeAt(++e.position),a=e.position;o!==0&&!ar(o);)o=e.input.charCodeAt(++e.position);for(r=e.input.slice(a,e.position),n=[],r.length<1&&ce(e,"directive name must not be less than one character in length");o!==0;){for(;Li(o);)o=e.input.charCodeAt(++e.position);if(o===35){do o=e.input.charCodeAt(++e.position);while(o!==0&&!Ur(o));break}if(Ur(o))break;for(a=e.position;o!==0&&!ar(o);)o=e.input.charCodeAt(++e.position);n.push(e.input.slice(a,e.position))}o!==0&&qf(e),Oi.call(O2,r)?O2[r](e,r,n):jc(e,'unknown document directive "'+r+'"')}if(ga(e,!0,-1),e.lineIndent===0&&e.input.charCodeAt(e.position)===45&&e.input.charCodeAt(e.position+1)===45&&e.input.charCodeAt(e.position+2)===45?(e.position+=3,ga(e,!0,-1)):i&&ce(e,"directives end mark is expected"),Lo(e,e.lineIndent-1,Id,!1,!0),ga(e,!0,-1),e.checkLineBreaks&&Cut.test(e.input.slice(t,e.position))&&jc(e,"non-ASCII line breaks are interpreted as content"),e.documents.push(e.result),e.position===e.lineStart&&Cu(e)){e.input.charCodeAt(e.position)===46&&(e.position+=3,ga(e,!0,-1));return}if(e.position<e.length-1)ce(e,"end of the stream or a document separator is expected");else return}I(TM,"readDocument");function Z0(e,t){e=String(e),t=t||{},e.length!==0&&(e.charCodeAt(e.length-1)!==10&&e.charCodeAt(e.length-1)!==13&&(e+=`
`),e.charCodeAt(0)===65279&&(e=e.slice(1)));var a=new gM(e,t),r=e.indexOf("\0");for(r!==-1&&(a.position=r,ce(a,"null byte is not allowed in input")),a.input+="\0";a.input.charCodeAt(a.position)===32;)a.lineIndent+=1,a.position+=1;for(;a.position<a.length-1;)TM(a);return a.documents}I(Z0,"loadDocuments");function Aut(e,t,a){t!==null&&typeof t=="object"&&typeof a>"u"&&(a=t,t=null);var r=Z0(e,a);if(typeof t!="function")return r;for(var n=0,i=r.length;n<i;n+=1)t(r[n])}I(Aut,"loadAll$1");function AM(e,t){var a=Z0(e,t);if(a.length!==0){if(a.length===1)return a[0];throw new dr("expected a single document in the stream, but found more")}}I(AM,"load$1");var kut=AM,Dut={load:kut},kM=Object.prototype.toString,DM=Object.prototype.hasOwnProperty,K0=65279,Lut=9,Yc=10,Iut=13,Mut=32,Eut=33,Rut=34,km=35,Put=37,But=38,Out=39,Nut=42,LM=44,$ut=45,Md=58,Fut=61,zut=62,Vut=63,Gut=64,IM=91,MM=93,Hut=96,EM=123,Wut=124,RM=125,Ka={};Ka[0]="\\0";Ka[7]="\\a";Ka[8]="\\b";Ka[9]="\\t";Ka[10]="\\n";Ka[11]="\\v";Ka[12]="\\f";Ka[13]="\\r";Ka[27]="\\e";Ka[34]='\\"';Ka[92]="\\\\";Ka[133]="\\N";Ka[160]="\\_";Ka[8232]="\\L";Ka[8233]="\\P";var qut=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"],Uut=/^[-+]?[0-9_]+(?::[0-9_]+)+(?:\.[0-9_]*)?$/;function PM(e,t){var a,r,n,i,o,s,l;if(t===null)return{};for(a={},r=Object.keys(t),n=0,i=r.length;n<i;n+=1)o=r[n],s=String(t[o]),o.slice(0,2)==="!!"&&(o="tag:yaml.org,2002:"+o.slice(2)),l=e.compiledTypeMap.fallback[o],l&&DM.call(l.styleAliases,s)&&(s=l.styleAliases[s]),a[o]=s;return a}I(PM,"compileStyleMap");function BM(e){var t,a,r;if(t=e.toString(16).toUpperCase(),e<=255)a="x",r=2;else if(e<=65535)a="u",r=4;else if(e<=4294967295)a="U",r=8;else throw new dr("code point within a string may not be greater than 0xFFFFFFFF");return"\\"+a+wa.repeat("0",r-t.length)+t}I(BM,"encodeHex");var jut=1,Xc=2;function OM(e){this.schema=e.schema||nM,this.indent=Math.max(1,e.indent||2),this.noArrayIndent=e.noArrayIndent||!1,this.skipInvalid=e.skipInvalid||!1,this.flowLevel=wa.isNothing(e.flowLevel)?-1:e.flowLevel,this.styleMap=PM(this.schema,e.styles||null),this.sortKeys=e.sortKeys||!1,this.lineWidth=e.lineWidth||80,this.noRefs=e.noRefs||!1,this.noCompatMode=e.noCompatMode||!1,this.condenseFlow=e.condenseFlow||!1,this.quotingType=e.quotingType==='"'?Xc:jut,this.forceQuotes=e.forceQuotes||!1,this.replacer=typeof e.replacer=="function"?e.replacer:null,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}I(OM,"State");function Dm(e,t){for(var a=wa.repeat(" ",t),r=0,n=-1,i="",o,s=e.length;r<s;)n=e.indexOf(`
`,r),n===-1?(o=e.slice(r),r=s):(o=e.slice(r,n+1),r=n+1),o.length&&o!==`
`&&(i+=a),i+=o;return i}I(Dm,"indentString");function Ed(e,t){return`
`+wa.repeat(" ",e.indent*t)}I(Ed,"generateNextLine");function NM(e,t){var a,r,n;for(a=0,r=e.implicitTypes.length;a<r;a+=1)if(n=e.implicitTypes[a],n.resolve(t))return!0;return!1}I(NM,"testImplicitResolving");function Zc(e){return e===Mut||e===Lut}I(Zc,"isWhitespace");function tl(e){return 32<=e&&e<=126||161<=e&&e<=55295&&e!==8232&&e!==8233||57344<=e&&e<=65533&&e!==K0||65536<=e&&e<=1114111}I(tl,"isPrintable");function Lm(e){return tl(e)&&e!==K0&&e!==Iut&&e!==Yc}I(Lm,"isNsCharOrWhitespace");function Im(e,t,a){var r=Lm(e),n=r&&!Zc(e);return(a?r:r&&e!==LM&&e!==IM&&e!==MM&&e!==EM&&e!==RM)&&e!==km&&!(t===Md&&!n)||Lm(t)&&!Zc(t)&&e===km||t===Md&&n}I(Im,"isPlainSafe");function $M(e){return tl(e)&&e!==K0&&!Zc(e)&&e!==$ut&&e!==Vut&&e!==Md&&e!==LM&&e!==IM&&e!==MM&&e!==EM&&e!==RM&&e!==km&&e!==But&&e!==Nut&&e!==Eut&&e!==Wut&&e!==Fut&&e!==zut&&e!==Out&&e!==Rut&&e!==Put&&e!==Gut&&e!==Hut}I($M,"isPlainSafeFirst");function FM(e){return!Zc(e)&&e!==Md}I(FM,"isPlainSafeLast");function vs(e,t){var a=e.charCodeAt(t),r;return a>=55296&&a<=56319&&t+1<e.length&&(r=e.charCodeAt(t+1),r>=56320&&r<=57343)?(a-55296)*1024+r-56320+65536:a}I(vs,"codePointAt");function J0(e){var t=/^\n* /;return t.test(e)}I(J0,"needIndentIndicator");var zM=1,Mm=2,VM=3,GM=4,us=5;function HM(e,t,a,r,n,i,o,s){var l,c=0,u=null,h=!1,d=!1,f=r!==-1,p=-1,g=$M(vs(e,0))&&FM(vs(e,e.length-1));if(t||o)for(l=0;l<e.length;c>=65536?l+=2:l++){if(c=vs(e,l),!tl(c))return us;g=g&&Im(c,u,s),u=c}else{for(l=0;l<e.length;c>=65536?l+=2:l++){if(c=vs(e,l),c===Yc)h=!0,f&&(d=d||l-p-1>r&&e[p+1]!==" ",p=l);else if(!tl(c))return us;g=g&&Im(c,u,s),u=c}d=d||f&&l-p-1>r&&e[p+1]!==" "}return!h&&!d?g&&!o&&!n(e)?zM:i===Xc?us:Mm:a>9&&J0(e)?us:o?i===Xc?us:Mm:d?GM:VM}I(HM,"chooseScalarStyle");function WM(e,t,a,r,n){e.dump=function(){if(t.length===0)return e.quotingType===Xc?'""':"''";if(!e.noCompatMode&&(qut.indexOf(t)!==-1||Uut.test(t)))return e.quotingType===Xc?'"'+t+'"':"'"+t+"'";var i=e.indent*Math.max(1,a),o=e.lineWidth===-1?-1:Math.max(Math.min(e.lineWidth,40),e.lineWidth-i),s=r||e.flowLevel>-1&&a>=e.flowLevel;function l(c){return NM(e,c)}switch(I(l,"testAmbiguity"),HM(t,s,e.indent,o,l,e.quotingType,e.forceQuotes&&!r,n)){case zM:return t;case Mm:return"'"+t.replace(/'/g,"''")+"'";case VM:return"|"+Em(t,e.indent)+Rm(Dm(t,i));case GM:return">"+Em(t,e.indent)+Rm(Dm(qM(t,o),i));case us:return'"'+UM(t)+'"';default:throw new dr("impossible error: invalid scalar style")}}()}I(WM,"writeScalar");function Em(e,t){var a=J0(e)?String(t):"",r=e[e.length-1]===`
`,n=r&&(e[e.length-2]===`
`||e===`
`),i=n?"+":r?"":"-";return a+i+`
`}I(Em,"blockHeader");function Rm(e){return e[e.length-1]===`
`?e.slice(0,-1):e}I(Rm,"dropEndingNewline");function qM(e,t){for(var a=/(\n+)([^\n]*)/g,r=function(){var c=e.indexOf(`
`);return c=c!==-1?c:e.length,a.lastIndex=c,Pm(e.slice(0,c),t)}(),n=e[0]===`
`||e[0]===" ",i,o;o=a.exec(e);){var s=o[1],l=o[2];i=l[0]===" ",r+=s+(!n&&!i&&l!==""?`
`:"")+Pm(l,t),n=i}return r}I(qM,"foldString");function Pm(e,t){if(e===""||e[0]===" ")return e;for(var a=/ [^ ]/g,r,n=0,i,o=0,s=0,l="";r=a.exec(e);)s=r.index,s-n>t&&(i=o>n?o:s,l+=`
`+e.slice(n,i),n=i+1),o=s;return l+=`
`,e.length-n>t&&o>n?l+=e.slice(n,o)+`
`+e.slice(o+1):l+=e.slice(n),l.slice(1)}I(Pm,"foldLine");function UM(e){for(var t="",a=0,r,n=0;n<e.length;a>=65536?n+=2:n++)a=vs(e,n),r=Ka[a],!r&&tl(a)?(t+=e[n],a>=65536&&(t+=e[n+1])):t+=r||BM(a);return t}I(UM,"escapeString");function jM(e,t,a){var r="",n=e.tag,i,o,s;for(i=0,o=a.length;i<o;i+=1)s=a[i],e.replacer&&(s=e.replacer.call(a,String(i),s)),(wn(e,t,s,!1,!1)||typeof s>"u"&&wn(e,t,null,!1,!1))&&(r!==""&&(r+=","+(e.condenseFlow?"":" ")),r+=e.dump);e.tag=n,e.dump="["+r+"]"}I(jM,"writeFlowSequence");function Bm(e,t,a,r){var n="",i=e.tag,o,s,l;for(o=0,s=a.length;o<s;o+=1)l=a[o],e.replacer&&(l=e.replacer.call(a,String(o),l)),(wn(e,t+1,l,!0,!0,!1,!0)||typeof l>"u"&&wn(e,t+1,null,!0,!0,!1,!0))&&((!r||n!=="")&&(n+=Ed(e,t)),e.dump&&Yc===e.dump.charCodeAt(0)?n+="-":n+="- ",n+=e.dump);e.tag=i,e.dump=n||"[]"}I(Bm,"writeBlockSequence");function YM(e,t,a){var r="",n=e.tag,i=Object.keys(a),o,s,l,c,u;for(o=0,s=i.length;o<s;o+=1)u="",r!==""&&(u+=", "),e.condenseFlow&&(u+='"'),l=i[o],c=a[l],e.replacer&&(c=e.replacer.call(a,l,c)),wn(e,t,l,!1,!1)&&(e.dump.length>1024&&(u+="? "),u+=e.dump+(e.condenseFlow?'"':"")+":"+(e.condenseFlow?"":" "),wn(e,t,c,!1,!1)&&(u+=e.dump,r+=u));e.tag=n,e.dump="{"+r+"}"}I(YM,"writeFlowMapping");function XM(e,t,a,r){var n="",i=e.tag,o=Object.keys(a),s,l,c,u,h,d;if(e.sortKeys===!0)o.sort();else if(typeof e.sortKeys=="function")o.sort(e.sortKeys);else if(e.sortKeys)throw new dr("sortKeys must be a boolean or a function");for(s=0,l=o.length;s<l;s+=1)d="",(!r||n!=="")&&(d+=Ed(e,t)),c=o[s],u=a[c],e.replacer&&(u=e.replacer.call(a,c,u)),wn(e,t+1,c,!0,!0,!0)&&(h=e.tag!==null&&e.tag!=="?"||e.dump&&e.dump.length>1024,h&&(e.dump&&Yc===e.dump.charCodeAt(0)?d+="?":d+="? "),d+=e.dump,h&&(d+=Ed(e,t)),wn(e,t+1,u,!0,h)&&(e.dump&&Yc===e.dump.charCodeAt(0)?d+=":":d+=": ",d+=e.dump,n+=d));e.tag=i,e.dump=n||"{}"}I(XM,"writeBlockMapping");function Om(e,t,a){var r,n,i,o,s,l;for(n=a?e.explicitTypes:e.implicitTypes,i=0,o=n.length;i<o;i+=1)if(s=n[i],(s.instanceOf||s.predicate)&&(!s.instanceOf||typeof t=="object"&&t instanceof s.instanceOf)&&(!s.predicate||s.predicate(t))){if(a?s.multi&&s.representName?e.tag=s.representName(t):e.tag=s.tag:e.tag="?",s.represent){if(l=e.styleMap[s.tag]||s.defaultStyle,kM.call(s.represent)==="[object Function]")r=s.represent(t,l);else if(DM.call(s.represent,l))r=s.represent[l](t,l);else throw new dr("!<"+s.tag+'> tag resolver accepts not "'+l+'" style');e.dump=r}return!0}return!1}I(Om,"detectType");function wn(e,t,a,r,n,i,o){e.tag=null,e.dump=a,Om(e,a,!1)||Om(e,a,!0);var s=kM.call(e.dump),l=r,c;r&&(r=e.flowLevel<0||e.flowLevel>t);var u=s==="[object Object]"||s==="[object Array]",h,d;if(u&&(h=e.duplicates.indexOf(a),d=h!==-1),(e.tag!==null&&e.tag!=="?"||d||e.indent!==2&&t>0)&&(n=!1),d&&e.usedDuplicates[h])e.dump="*ref_"+h;else{if(u&&d&&!e.usedDuplicates[h]&&(e.usedDuplicates[h]=!0),s==="[object Object]")r&&Object.keys(e.dump).length!==0?(XM(e,t,e.dump,n),d&&(e.dump="&ref_"+h+e.dump)):(YM(e,t,e.dump),d&&(e.dump="&ref_"+h+" "+e.dump));else if(s==="[object Array]")r&&e.dump.length!==0?(e.noArrayIndent&&!o&&t>0?Bm(e,t-1,e.dump,n):Bm(e,t,e.dump,n),d&&(e.dump="&ref_"+h+e.dump)):(jM(e,t,e.dump),d&&(e.dump="&ref_"+h+" "+e.dump));else if(s==="[object String]")e.tag!=="?"&&WM(e,e.dump,t,i,l);else{if(s==="[object Undefined]")return!1;if(e.skipInvalid)return!1;throw new dr("unacceptable kind of an object to dump "+s)}e.tag!==null&&e.tag!=="?"&&(c=encodeURI(e.tag[0]==="!"?e.tag.slice(1):e.tag).replace(/!/g,"%21"),e.tag[0]==="!"?c="!"+c:c.slice(0,18)==="tag:yaml.org,2002:"?c="!!"+c.slice(18):c="!<"+c+">",e.dump=c+" "+e.dump)}return!0}I(wn,"writeNode");function ZM(e,t){var a=[],r=[],n,i;for(Rd(e,a,r),n=0,i=r.length;n<i;n+=1)t.duplicates.push(a[r[n]]);t.usedDuplicates=new Array(i)}I(ZM,"getDuplicateReferences");function Rd(e,t,a){var r,n,i;if(e!==null&&typeof e=="object")if(n=t.indexOf(e),n!==-1)a.indexOf(n)===-1&&a.push(n);else if(t.push(e),Array.isArray(e))for(n=0,i=e.length;n<i;n+=1)Rd(e[n],t,a);else for(r=Object.keys(e),n=0,i=r.length;n<i;n+=1)Rd(e[r[n]],t,a)}I(Rd,"inspectNode");function Yut(e,t){t=t||{};var a=new OM(t);a.noRefs||ZM(e,a);var r=e;return a.replacer&&(r=a.replacer.call({"":r},"",r)),wn(a,0,r,!0,!0)?a.dump+`
`:""}I(Yut,"dump$1");function Xut(e,t){return function(){throw new Error("Function yaml."+e+" is removed in js-yaml 4. Use yaml."+t+" instead, which is now safe by default.")}}I(Xut,"renamed");var Zut=VI,Kut=Dut.load;/*! Bundled license information:

js-yaml/dist/js-yaml.mjs:
  (*! js-yaml 4.1.0 https://github.com/nodeca/js-yaml @license MIT *)
*/var Dr={aggregation:18,extension:18,composition:18,dependency:6,lollipop:13.5,arrow_point:4};function ec(e,t){if(e===void 0||t===void 0)return{angle:0,deltaX:0,deltaY:0};e=ea(e),t=ea(t);const[a,r]=[e.x,e.y],[n,i]=[t.x,t.y],o=n-a,s=i-r;return{angle:Math.atan(s/o),deltaX:o,deltaY:s}}I(ec,"calculateDeltaAndAngle");var ea=I(e=>Array.isArray(e)?{x:e[0],y:e[1]}:e,"pointTransformer"),Jut=I(e=>({x:I(function(t,a,r){let n=0;const i=ea(r[0]).x<ea(r[r.length-1]).x?"left":"right";if(a===0&&Object.hasOwn(Dr,e.arrowTypeStart)){const{angle:f,deltaX:p}=ec(r[0],r[1]);n=Dr[e.arrowTypeStart]*Math.cos(f)*(p>=0?1:-1)}else if(a===r.length-1&&Object.hasOwn(Dr,e.arrowTypeEnd)){const{angle:f,deltaX:p}=ec(r[r.length-1],r[r.length-2]);n=Dr[e.arrowTypeEnd]*Math.cos(f)*(p>=0?1:-1)}const o=Math.abs(ea(t).x-ea(r[r.length-1]).x),s=Math.abs(ea(t).y-ea(r[r.length-1]).y),l=Math.abs(ea(t).x-ea(r[0]).x),c=Math.abs(ea(t).y-ea(r[0]).y),u=Dr[e.arrowTypeStart],h=Dr[e.arrowTypeEnd],d=1;if(o<h&&o>0&&s<h){let f=h+d-o;f*=i==="right"?-1:1,n-=f}if(l<u&&l>0&&c<u){let f=u+d-l;f*=i==="right"?-1:1,n+=f}return ea(t).x+n},"x"),y:I(function(t,a,r){let n=0;const i=ea(r[0]).y<ea(r[r.length-1]).y?"down":"up";if(a===0&&Object.hasOwn(Dr,e.arrowTypeStart)){const{angle:f,deltaY:p}=ec(r[0],r[1]);n=Dr[e.arrowTypeStart]*Math.abs(Math.sin(f))*(p>=0?1:-1)}else if(a===r.length-1&&Object.hasOwn(Dr,e.arrowTypeEnd)){const{angle:f,deltaY:p}=ec(r[r.length-1],r[r.length-2]);n=Dr[e.arrowTypeEnd]*Math.abs(Math.sin(f))*(p>=0?1:-1)}const o=Math.abs(ea(t).y-ea(r[r.length-1]).y),s=Math.abs(ea(t).x-ea(r[r.length-1]).x),l=Math.abs(ea(t).y-ea(r[0]).y),c=Math.abs(ea(t).x-ea(r[0]).x),u=Dr[e.arrowTypeStart],h=Dr[e.arrowTypeEnd],d=1;if(o<h&&o>0&&s<h){let f=h+d-o;f*=i==="up"?-1:1,n-=f}if(l<u&&l>0&&c<u){let f=u+d-l;f*=i==="up"?-1:1,n+=f}return ea(t).y+n},"y")}),"getLineFunctionsWithOffset"),Q0=I(({flowchart:e})=>{var n,i;const t=((n=e==null?void 0:e.subGraphTitleMargin)==null?void 0:n.top)??0,a=((i=e==null?void 0:e.subGraphTitleMargin)==null?void 0:i.bottom)??0,r=t+a;return{subGraphTitleTopMargin:t,subGraphTitleBottomMargin:a,subGraphTitleTotalMargin:r}},"getSubGraphTitleMargins"),Qut=I(e=>{const{handDrawnSeed:t}=He();return{fill:e,hachureAngle:120,hachureGap:4,fillWeight:2,roughness:.7,stroke:e,seed:t}},"solidStateFill"),ml=I(e=>{const t=tht([...e.cssCompiledStyles||[],...e.cssStyles||[]]);return{stylesMap:t,stylesArray:[...t]}},"compileStyles"),tht=I(e=>{const t=new Map;return e.forEach(a=>{const[r,n]=a.split(":");t.set(r.trim(),n==null?void 0:n.trim())}),t},"styles2Map"),KM=I(e=>e==="color"||e==="font-size"||e==="font-family"||e==="font-weight"||e==="font-style"||e==="text-decoration"||e==="text-align"||e==="text-transform"||e==="line-height"||e==="letter-spacing"||e==="word-spacing"||e==="text-shadow"||e==="text-overflow"||e==="white-space"||e==="word-wrap"||e==="word-break"||e==="overflow-wrap"||e==="hyphens","isLabelStyle"),se=I(e=>{const{stylesArray:t}=ml(e),a=[],r=[],n=[],i=[];return t.forEach(o=>{const s=o[0];KM(s)?a.push(o.join(":")+" !important"):(r.push(o.join(":")+" !important"),s.includes("stroke")&&n.push(o.join(":")+" !important"),s==="fill"&&i.push(o.join(":")+" !important"))}),{labelStyles:a.join(";"),nodeStyles:r.join(";"),stylesArray:t,borderStyles:n,backgroundStyles:i}},"styles2String"),ne=I((e,t)=>{var l;const{themeVariables:a,handDrawnSeed:r}=He(),{nodeBorder:n,mainBkg:i}=a,{stylesMap:o}=ml(e);return Object.assign({roughness:.7,fill:o.get("fill")||i,fillStyle:"hachure",fillWeight:4,hachureGap:5.2,stroke:o.get("stroke")||n,seed:r,strokeWidth:((l=o.get("stroke-width"))==null?void 0:l.replace("px",""))||1.3,fillLineDash:[0,0]},t)},"userNodeOverrides"),t_={},Ia={};Object.defineProperty(Ia,"__esModule",{value:!0});Ia.BLANK_URL=Ia.relativeFirstCharacters=Ia.whitespaceEscapeCharsRegex=Ia.urlSchemeRegex=Ia.ctrlCharactersRegex=Ia.htmlCtrlEntityRegex=Ia.htmlEntitiesRegex=Ia.invalidProtocolRegex=void 0;Ia.invalidProtocolRegex=/^([^\w]*)(javascript|data|vbscript)/im;Ia.htmlEntitiesRegex=/&#(\w+)(^\w|;)?/g;Ia.htmlCtrlEntityRegex=/&(newline|tab);/gi;Ia.ctrlCharactersRegex=/[\u0000-\u001F\u007F-\u009F\u2000-\u200D\uFEFF]/gim;Ia.urlSchemeRegex=/^.+(:|&colon;)/gim;Ia.whitespaceEscapeCharsRegex=/(\\|%5[cC])((%(6[eE]|72|74))|[nrt])/g;Ia.relativeFirstCharacters=[".","/"];Ia.BLANK_URL="about:blank";Object.defineProperty(t_,"__esModule",{value:!0});var JM=t_.sanitizeUrl=void 0,Ua=Ia;function eht(e){return Ua.relativeFirstCharacters.indexOf(e[0])>-1}function aht(e){var t=e.replace(Ua.ctrlCharactersRegex,"");return t.replace(Ua.htmlEntitiesRegex,function(a,r){return String.fromCharCode(r)})}function rht(e){return URL.canParse(e)}function N2(e){try{return decodeURIComponent(e)}catch{return e}}function nht(e){if(!e)return Ua.BLANK_URL;var t,a=N2(e.trim());do a=aht(a).replace(Ua.htmlCtrlEntityRegex,"").replace(Ua.ctrlCharactersRegex,"").replace(Ua.whitespaceEscapeCharsRegex,"").trim(),a=N2(a),t=a.match(Ua.ctrlCharactersRegex)||a.match(Ua.htmlEntitiesRegex)||a.match(Ua.htmlCtrlEntityRegex)||a.match(Ua.whitespaceEscapeCharsRegex);while(t&&t.length>0);var r=a;if(!r)return Ua.BLANK_URL;if(eht(r))return r;var n=r.trimStart(),i=n.match(Ua.urlSchemeRegex);if(!i)return r;var o=i[0].toLowerCase().trim();if(Ua.invalidProtocolRegex.test(o))return Ua.BLANK_URL;var s=n.replace(/\\/g,"/");if(o==="mailto:"||o.includes("://"))return s;if(o==="http:"||o==="https:"){if(!rht(s))return Ua.BLANK_URL;var l=new URL(s);return l.protocol=l.protocol.toLowerCase(),l.hostname=l.hostname.toLowerCase(),l.toString()}return s}JM=t_.sanitizeUrl=nht;var iht={value:()=>{}};function QM(){for(var e=0,t=arguments.length,a={},r;e<t;++e){if(!(r=arguments[e]+"")||r in a||/[\s.]/.test(r))throw new Error("illegal type: "+r);a[r]=[]}return new Rh(a)}function Rh(e){this._=e}function oht(e,t){return e.trim().split(/^|\s+/).map(function(a){var r="",n=a.indexOf(".");if(n>=0&&(r=a.slice(n+1),a=a.slice(0,n)),a&&!t.hasOwnProperty(a))throw new Error("unknown type: "+a);return{type:a,name:r}})}Rh.prototype=QM.prototype={constructor:Rh,on:function(e,t){var a=this._,r=oht(e+"",a),n,i=-1,o=r.length;if(arguments.length<2){for(;++i<o;)if((n=(e=r[i]).type)&&(n=sht(a[n],e.name)))return n;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++i<o;)if(n=(e=r[i]).type)a[n]=$2(a[n],e.name,t);else if(t==null)for(n in a)a[n]=$2(a[n],e.name,null);return this},copy:function(){var e={},t=this._;for(var a in t)e[a]=t[a].slice();return new Rh(e)},call:function(e,t){if((n=arguments.length-2)>0)for(var a=new Array(n),r=0,n,i;r<n;++r)a[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(i=this._[e],r=0,n=i.length;r<n;++r)i[r].value.apply(t,a)},apply:function(e,t,a){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],n=0,i=r.length;n<i;++n)r[n].value.apply(t,a)}};function sht(e,t){for(var a=0,r=e.length,n;a<r;++a)if((n=e[a]).name===t)return n.value}function $2(e,t,a){for(var r=0,n=e.length;r<n;++r)if(e[r].name===t){e[r]=iht,e=e.slice(0,r).concat(e.slice(r+1));break}return a!=null&&e.push({name:t,value:a}),e}var Nm="http://www.w3.org/1999/xhtml";const F2={svg:"http://www.w3.org/2000/svg",xhtml:Nm,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function jf(e){var t=e+="",a=t.indexOf(":");return a>=0&&(t=e.slice(0,a))!=="xmlns"&&(e=e.slice(a+1)),F2.hasOwnProperty(t)?{space:F2[t],local:e}:e}function lht(e){return function(){var t=this.ownerDocument,a=this.namespaceURI;return a===Nm&&t.documentElement.namespaceURI===Nm?t.createElement(e):t.createElementNS(a,e)}}function cht(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function tE(e){var t=jf(e);return(t.local?cht:lht)(t)}function uht(){}function e_(e){return e==null?uht:function(){return this.querySelector(e)}}function hht(e){typeof e!="function"&&(e=e_(e));for(var t=this._groups,a=t.length,r=new Array(a),n=0;n<a;++n)for(var i=t[n],o=i.length,s=r[n]=new Array(o),l,c,u=0;u<o;++u)(l=i[u])&&(c=e.call(l,l.__data__,u,i))&&("__data__"in l&&(c.__data__=l.__data__),s[u]=c);return new wr(r,this._parents)}function dht(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function fht(){return[]}function eE(e){return e==null?fht:function(){return this.querySelectorAll(e)}}function pht(e){return function(){return dht(e.apply(this,arguments))}}function ght(e){typeof e=="function"?e=pht(e):e=eE(e);for(var t=this._groups,a=t.length,r=[],n=[],i=0;i<a;++i)for(var o=t[i],s=o.length,l,c=0;c<s;++c)(l=o[c])&&(r.push(e.call(l,l.__data__,c,o)),n.push(l));return new wr(r,n)}function aE(e){return function(){return this.matches(e)}}function rE(e){return function(t){return t.matches(e)}}var vht=Array.prototype.find;function mht(e){return function(){return vht.call(this.children,e)}}function yht(){return this.firstElementChild}function _ht(e){return this.select(e==null?yht:mht(typeof e=="function"?e:rE(e)))}var bht=Array.prototype.filter;function xht(){return Array.from(this.children)}function Sht(e){return function(){return bht.call(this.children,e)}}function wht(e){return this.selectAll(e==null?xht:Sht(typeof e=="function"?e:rE(e)))}function Cht(e){typeof e!="function"&&(e=aE(e));for(var t=this._groups,a=t.length,r=new Array(a),n=0;n<a;++n)for(var i=t[n],o=i.length,s=r[n]=[],l,c=0;c<o;++c)(l=i[c])&&e.call(l,l.__data__,c,i)&&s.push(l);return new wr(r,this._parents)}function nE(e){return new Array(e.length)}function Tht(){return new wr(this._enter||this._groups.map(nE),this._parents)}function Pd(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}Pd.prototype={constructor:Pd,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function Aht(e){return function(){return e}}function kht(e,t,a,r,n,i){for(var o=0,s,l=t.length,c=i.length;o<c;++o)(s=t[o])?(s.__data__=i[o],r[o]=s):a[o]=new Pd(e,i[o]);for(;o<l;++o)(s=t[o])&&(n[o]=s)}function Dht(e,t,a,r,n,i,o){var s,l,c=new Map,u=t.length,h=i.length,d=new Array(u),f;for(s=0;s<u;++s)(l=t[s])&&(d[s]=f=o.call(l,l.__data__,s,t)+"",c.has(f)?n[s]=l:c.set(f,l));for(s=0;s<h;++s)f=o.call(e,i[s],s,i)+"",(l=c.get(f))?(r[s]=l,l.__data__=i[s],c.delete(f)):a[s]=new Pd(e,i[s]);for(s=0;s<u;++s)(l=t[s])&&c.get(d[s])===l&&(n[s]=l)}function Lht(e){return e.__data__}function Iht(e,t){if(!arguments.length)return Array.from(this,Lht);var a=t?Dht:kht,r=this._parents,n=this._groups;typeof e!="function"&&(e=Aht(e));for(var i=n.length,o=new Array(i),s=new Array(i),l=new Array(i),c=0;c<i;++c){var u=r[c],h=n[c],d=h.length,f=Mht(e.call(u,u&&u.__data__,c,r)),p=f.length,g=s[c]=new Array(p),v=o[c]=new Array(p),_=l[c]=new Array(d);a(u,h,g,v,_,f,t);for(var y=0,b=0,w,T;y<p;++y)if(w=g[y]){for(y>=b&&(b=y+1);!(T=v[b])&&++b<p;);w._next=T||null}}return o=new wr(o,r),o._enter=s,o._exit=l,o}function Mht(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function Eht(){return new wr(this._exit||this._groups.map(nE),this._parents)}function Rht(e,t,a){var r=this.enter(),n=this,i=this.exit();return typeof e=="function"?(r=e(r),r&&(r=r.selection())):r=r.append(e+""),t!=null&&(n=t(n),n&&(n=n.selection())),a==null?i.remove():a(i),r&&n?r.merge(n).order():n}function Pht(e){for(var t=e.selection?e.selection():e,a=this._groups,r=t._groups,n=a.length,i=r.length,o=Math.min(n,i),s=new Array(n),l=0;l<o;++l)for(var c=a[l],u=r[l],h=c.length,d=s[l]=new Array(h),f,p=0;p<h;++p)(f=c[p]||u[p])&&(d[p]=f);for(;l<n;++l)s[l]=a[l];return new wr(s,this._parents)}function Bht(){for(var e=this._groups,t=-1,a=e.length;++t<a;)for(var r=e[t],n=r.length-1,i=r[n],o;--n>=0;)(o=r[n])&&(i&&o.compareDocumentPosition(i)^4&&i.parentNode.insertBefore(o,i),i=o);return this}function Oht(e){e||(e=Nht);function t(h,d){return h&&d?e(h.__data__,d.__data__):!h-!d}for(var a=this._groups,r=a.length,n=new Array(r),i=0;i<r;++i){for(var o=a[i],s=o.length,l=n[i]=new Array(s),c,u=0;u<s;++u)(c=o[u])&&(l[u]=c);l.sort(t)}return new wr(n,this._parents).order()}function Nht(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function $ht(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function Fht(){return Array.from(this)}function zht(){for(var e=this._groups,t=0,a=e.length;t<a;++t)for(var r=e[t],n=0,i=r.length;n<i;++n){var o=r[n];if(o)return o}return null}function Vht(){let e=0;for(const t of this)++e;return e}function Ght(){return!this.node()}function Hht(e){for(var t=this._groups,a=0,r=t.length;a<r;++a)for(var n=t[a],i=0,o=n.length,s;i<o;++i)(s=n[i])&&e.call(s,s.__data__,i,n);return this}function Wht(e){return function(){this.removeAttribute(e)}}function qht(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Uht(e,t){return function(){this.setAttribute(e,t)}}function jht(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function Yht(e,t){return function(){var a=t.apply(this,arguments);a==null?this.removeAttribute(e):this.setAttribute(e,a)}}function Xht(e,t){return function(){var a=t.apply(this,arguments);a==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,a)}}function Zht(e,t){var a=jf(e);if(arguments.length<2){var r=this.node();return a.local?r.getAttributeNS(a.space,a.local):r.getAttribute(a)}return this.each((t==null?a.local?qht:Wht:typeof t=="function"?a.local?Xht:Yht:a.local?jht:Uht)(a,t))}function iE(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function Kht(e){return function(){this.style.removeProperty(e)}}function Jht(e,t,a){return function(){this.style.setProperty(e,t,a)}}function Qht(e,t,a){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,a)}}function tdt(e,t,a){return arguments.length>1?this.each((t==null?Kht:typeof t=="function"?Qht:Jht)(e,t,a??"")):el(this.node(),e)}function el(e,t){return e.style.getPropertyValue(t)||iE(e).getComputedStyle(e,null).getPropertyValue(t)}function edt(e){return function(){delete this[e]}}function adt(e,t){return function(){this[e]=t}}function rdt(e,t){return function(){var a=t.apply(this,arguments);a==null?delete this[e]:this[e]=a}}function ndt(e,t){return arguments.length>1?this.each((t==null?edt:typeof t=="function"?rdt:adt)(e,t)):this.node()[e]}function oE(e){return e.trim().split(/^|\s+/)}function a_(e){return e.classList||new sE(e)}function sE(e){this._node=e,this._names=oE(e.getAttribute("class")||"")}sE.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function lE(e,t){for(var a=a_(e),r=-1,n=t.length;++r<n;)a.add(t[r])}function cE(e,t){for(var a=a_(e),r=-1,n=t.length;++r<n;)a.remove(t[r])}function idt(e){return function(){lE(this,e)}}function odt(e){return function(){cE(this,e)}}function sdt(e,t){return function(){(t.apply(this,arguments)?lE:cE)(this,e)}}function ldt(e,t){var a=oE(e+"");if(arguments.length<2){for(var r=a_(this.node()),n=-1,i=a.length;++n<i;)if(!r.contains(a[n]))return!1;return!0}return this.each((typeof t=="function"?sdt:t?idt:odt)(a,t))}function cdt(){this.textContent=""}function udt(e){return function(){this.textContent=e}}function hdt(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function ddt(e){return arguments.length?this.each(e==null?cdt:(typeof e=="function"?hdt:udt)(e)):this.node().textContent}function fdt(){this.innerHTML=""}function pdt(e){return function(){this.innerHTML=e}}function gdt(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function vdt(e){return arguments.length?this.each(e==null?fdt:(typeof e=="function"?gdt:pdt)(e)):this.node().innerHTML}function mdt(){this.nextSibling&&this.parentNode.appendChild(this)}function ydt(){return this.each(mdt)}function _dt(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function bdt(){return this.each(_dt)}function xdt(e){var t=typeof e=="function"?e:tE(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function Sdt(){return null}function wdt(e,t){var a=typeof e=="function"?e:tE(e),r=t==null?Sdt:typeof t=="function"?t:e_(t);return this.select(function(){return this.insertBefore(a.apply(this,arguments),r.apply(this,arguments)||null)})}function Cdt(){var e=this.parentNode;e&&e.removeChild(this)}function Tdt(){return this.each(Cdt)}function Adt(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function kdt(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Ddt(e){return this.select(e?kdt:Adt)}function Ldt(e){return arguments.length?this.property("__data__",e):this.node().__data__}function Idt(e){return function(t){e.call(this,t,this.__data__)}}function Mdt(e){return e.trim().split(/^|\s+/).map(function(t){var a="",r=t.indexOf(".");return r>=0&&(a=t.slice(r+1),t=t.slice(0,r)),{type:t,name:a}})}function Edt(e){return function(){var t=this.__on;if(t){for(var a=0,r=-1,n=t.length,i;a<n;++a)i=t[a],(!e.type||i.type===e.type)&&i.name===e.name?this.removeEventListener(i.type,i.listener,i.options):t[++r]=i;++r?t.length=r:delete this.__on}}}function Rdt(e,t,a){return function(){var r=this.__on,n,i=Idt(t);if(r){for(var o=0,s=r.length;o<s;++o)if((n=r[o]).type===e.type&&n.name===e.name){this.removeEventListener(n.type,n.listener,n.options),this.addEventListener(n.type,n.listener=i,n.options=a),n.value=t;return}}this.addEventListener(e.type,i,a),n={type:e.type,name:e.name,value:t,listener:i,options:a},r?r.push(n):this.__on=[n]}}function Pdt(e,t,a){var r=Mdt(e+""),n,i=r.length,o;if(arguments.length<2){var s=this.node().__on;if(s){for(var l=0,c=s.length,u;l<c;++l)for(n=0,u=s[l];n<i;++n)if((o=r[n]).type===u.type&&o.name===u.name)return u.value}return}for(s=t?Rdt:Edt,n=0;n<i;++n)this.each(s(r[n],t,a));return this}function uE(e,t,a){var r=iE(e),n=r.CustomEvent;typeof n=="function"?n=new n(t,a):(n=r.document.createEvent("Event"),a?(n.initEvent(t,a.bubbles,a.cancelable),n.detail=a.detail):n.initEvent(t,!1,!1)),e.dispatchEvent(n)}function Bdt(e,t){return function(){return uE(this,e,t)}}function Odt(e,t){return function(){return uE(this,e,t.apply(this,arguments))}}function Ndt(e,t){return this.each((typeof t=="function"?Odt:Bdt)(e,t))}function*$dt(){for(var e=this._groups,t=0,a=e.length;t<a;++t)for(var r=e[t],n=0,i=r.length,o;n<i;++n)(o=r[n])&&(yield o)}var hE=[null];function wr(e,t){this._groups=e,this._parents=t}function Tu(){return new wr([[document.documentElement]],hE)}function Fdt(){return this}wr.prototype=Tu.prototype={constructor:wr,select:hht,selectAll:ght,selectChild:_ht,selectChildren:wht,filter:Cht,data:Iht,enter:Tht,exit:Eht,join:Rht,merge:Pht,selection:Fdt,order:Bht,sort:Oht,call:$ht,nodes:Fht,node:zht,size:Vht,empty:Ght,each:Hht,attr:Zht,style:tdt,property:ndt,classed:ldt,text:ddt,html:vdt,raise:ydt,lower:bdt,append:xdt,insert:wdt,remove:Tdt,clone:Ddt,datum:Ldt,on:Pdt,dispatch:Ndt,[Symbol.iterator]:$dt};function $e(e){return typeof e=="string"?new wr([[document.querySelector(e)]],[document.documentElement]):new wr([[e]],hE)}function r_(e,t,a){e.prototype=t.prototype=a,a.constructor=e}function dE(e,t){var a=Object.create(e.prototype);for(var r in t)a[r]=t[r];return a}function Au(){}var Kc=.7,Bd=1/Kc,Ss="\\s*([+-]?\\d+)\\s*",Jc="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",bn="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",zdt=/^#([0-9a-f]{3,8})$/,Vdt=new RegExp(`^rgb\\(${Ss},${Ss},${Ss}\\)$`),Gdt=new RegExp(`^rgb\\(${bn},${bn},${bn}\\)$`),Hdt=new RegExp(`^rgba\\(${Ss},${Ss},${Ss},${Jc}\\)$`),Wdt=new RegExp(`^rgba\\(${bn},${bn},${bn},${Jc}\\)$`),qdt=new RegExp(`^hsl\\(${Jc},${bn},${bn}\\)$`),Udt=new RegExp(`^hsla\\(${Jc},${bn},${bn},${Jc}\\)$`),z2={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};r_(Au,Qc,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:V2,formatHex:V2,formatHex8:jdt,formatHsl:Ydt,formatRgb:G2,toString:G2});function V2(){return this.rgb().formatHex()}function jdt(){return this.rgb().formatHex8()}function Ydt(){return fE(this).formatHsl()}function G2(){return this.rgb().formatRgb()}function Qc(e){var t,a;return e=(e+"").trim().toLowerCase(),(t=zdt.exec(e))?(a=t[1].length,t=parseInt(t[1],16),a===6?H2(t):a===3?new fr(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):a===8?oh(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):a===4?oh(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=Vdt.exec(e))?new fr(t[1],t[2],t[3],1):(t=Gdt.exec(e))?new fr(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=Hdt.exec(e))?oh(t[1],t[2],t[3],t[4]):(t=Wdt.exec(e))?oh(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=qdt.exec(e))?U2(t[1],t[2]/100,t[3]/100,1):(t=Udt.exec(e))?U2(t[1],t[2]/100,t[3]/100,t[4]):z2.hasOwnProperty(e)?H2(z2[e]):e==="transparent"?new fr(NaN,NaN,NaN,0):null}function H2(e){return new fr(e>>16&255,e>>8&255,e&255,1)}function oh(e,t,a,r){return r<=0&&(e=t=a=NaN),new fr(e,t,a,r)}function Xdt(e){return e instanceof Au||(e=Qc(e)),e?(e=e.rgb(),new fr(e.r,e.g,e.b,e.opacity)):new fr}function $m(e,t,a,r){return arguments.length===1?Xdt(e):new fr(e,t,a,r??1)}function fr(e,t,a,r){this.r=+e,this.g=+t,this.b=+a,this.opacity=+r}r_(fr,$m,dE(Au,{brighter(e){return e=e==null?Bd:Math.pow(Bd,e),new fr(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Kc:Math.pow(Kc,e),new fr(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new fr(So(this.r),So(this.g),So(this.b),Od(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:W2,formatHex:W2,formatHex8:Zdt,formatRgb:q2,toString:q2}));function W2(){return`#${go(this.r)}${go(this.g)}${go(this.b)}`}function Zdt(){return`#${go(this.r)}${go(this.g)}${go(this.b)}${go((isNaN(this.opacity)?1:this.opacity)*255)}`}function q2(){const e=Od(this.opacity);return`${e===1?"rgb(":"rgba("}${So(this.r)}, ${So(this.g)}, ${So(this.b)}${e===1?")":`, ${e})`}`}function Od(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function So(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function go(e){return e=So(e),(e<16?"0":"")+e.toString(16)}function U2(e,t,a,r){return r<=0?e=t=a=NaN:a<=0||a>=1?e=t=NaN:t<=0&&(e=NaN),new Gr(e,t,a,r)}function fE(e){if(e instanceof Gr)return new Gr(e.h,e.s,e.l,e.opacity);if(e instanceof Au||(e=Qc(e)),!e)return new Gr;if(e instanceof Gr)return e;e=e.rgb();var t=e.r/255,a=e.g/255,r=e.b/255,n=Math.min(t,a,r),i=Math.max(t,a,r),o=NaN,s=i-n,l=(i+n)/2;return s?(t===i?o=(a-r)/s+(a<r)*6:a===i?o=(r-t)/s+2:o=(t-a)/s+4,s/=l<.5?i+n:2-i-n,o*=60):s=l>0&&l<1?0:o,new Gr(o,s,l,e.opacity)}function Kdt(e,t,a,r){return arguments.length===1?fE(e):new Gr(e,t,a,r??1)}function Gr(e,t,a,r){this.h=+e,this.s=+t,this.l=+a,this.opacity=+r}r_(Gr,Kdt,dE(Au,{brighter(e){return e=e==null?Bd:Math.pow(Bd,e),new Gr(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Kc:Math.pow(Kc,e),new Gr(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,a=this.l,r=a+(a<.5?a:1-a)*t,n=2*a-r;return new fr(qg(e>=240?e-240:e+120,n,r),qg(e,n,r),qg(e<120?e+240:e-120,n,r),this.opacity)},clamp(){return new Gr(j2(this.h),sh(this.s),sh(this.l),Od(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Od(this.opacity);return`${e===1?"hsl(":"hsla("}${j2(this.h)}, ${sh(this.s)*100}%, ${sh(this.l)*100}%${e===1?")":`, ${e})`}`}}));function j2(e){return e=(e||0)%360,e<0?e+360:e}function sh(e){return Math.max(0,Math.min(1,e||0))}function qg(e,t,a){return(e<60?t+(a-t)*e/60:e<180?a:e<240?t+(a-t)*(240-e)/60:t)*255}const n_=e=>()=>e;function pE(e,t){return function(a){return e+a*t}}function Jdt(e,t,a){return e=Math.pow(e,a),t=Math.pow(t,a)-e,a=1/a,function(r){return Math.pow(e+r*t,a)}}function I_t(e,t){var a=t-e;return a?pE(e,a>180||a<-180?a-360*Math.round(a/360):a):n_(isNaN(e)?t:e)}function Qdt(e){return(e=+e)==1?gE:function(t,a){return a-t?Jdt(t,a,e):n_(isNaN(t)?a:t)}}function gE(e,t){var a=t-e;return a?pE(e,a):n_(isNaN(e)?t:e)}const Y2=function e(t){var a=Qdt(t);function r(n,i){var o=a((n=$m(n)).r,(i=$m(i)).r),s=a(n.g,i.g),l=a(n.b,i.b),c=gE(n.opacity,i.opacity);return function(u){return n.r=o(u),n.g=s(u),n.b=l(u),n.opacity=c(u),n+""}}return r.gamma=e,r}(1);function bi(e,t){return e=+e,t=+t,function(a){return e*(1-a)+t*a}}var Fm=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Ug=new RegExp(Fm.source,"g");function tft(e){return function(){return e}}function eft(e){return function(t){return e(t)+""}}function aft(e,t){var a=Fm.lastIndex=Ug.lastIndex=0,r,n,i,o=-1,s=[],l=[];for(e=e+"",t=t+"";(r=Fm.exec(e))&&(n=Ug.exec(t));)(i=n.index)>a&&(i=t.slice(a,i),s[o]?s[o]+=i:s[++o]=i),(r=r[0])===(n=n[0])?s[o]?s[o]+=n:s[++o]=n:(s[++o]=null,l.push({i:o,x:bi(r,n)})),a=Ug.lastIndex;return a<t.length&&(i=t.slice(a),s[o]?s[o]+=i:s[++o]=i),s.length<2?l[0]?eft(l[0].x):tft(t):(t=l.length,function(c){for(var u=0,h;u<t;++u)s[(h=l[u]).i]=h.x(c);return s.join("")})}var X2=180/Math.PI,zm={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function vE(e,t,a,r,n,i){var o,s,l;return(o=Math.sqrt(e*e+t*t))&&(e/=o,t/=o),(l=e*a+t*r)&&(a-=e*l,r-=t*l),(s=Math.sqrt(a*a+r*r))&&(a/=s,r/=s,l/=s),e*r<t*a&&(e=-e,t=-t,l=-l,o=-o),{translateX:n,translateY:i,rotate:Math.atan2(t,e)*X2,skewX:Math.atan(l)*X2,scaleX:o,scaleY:s}}var lh;function rft(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?zm:vE(t.a,t.b,t.c,t.d,t.e,t.f)}function nft(e){return e==null||(lh||(lh=document.createElementNS("http://www.w3.org/2000/svg","g")),lh.setAttribute("transform",e),!(e=lh.transform.baseVal.consolidate()))?zm:(e=e.matrix,vE(e.a,e.b,e.c,e.d,e.e,e.f))}function mE(e,t,a,r){function n(c){return c.length?c.pop()+" ":""}function i(c,u,h,d,f,p){if(c!==h||u!==d){var g=f.push("translate(",null,t,null,a);p.push({i:g-4,x:bi(c,h)},{i:g-2,x:bi(u,d)})}else(h||d)&&f.push("translate("+h+t+d+a)}function o(c,u,h,d){c!==u?(c-u>180?u+=360:u-c>180&&(c+=360),d.push({i:h.push(n(h)+"rotate(",null,r)-2,x:bi(c,u)})):u&&h.push(n(h)+"rotate("+u+r)}function s(c,u,h,d){c!==u?d.push({i:h.push(n(h)+"skewX(",null,r)-2,x:bi(c,u)}):u&&h.push(n(h)+"skewX("+u+r)}function l(c,u,h,d,f,p){if(c!==h||u!==d){var g=f.push(n(f)+"scale(",null,",",null,")");p.push({i:g-4,x:bi(c,h)},{i:g-2,x:bi(u,d)})}else(h!==1||d!==1)&&f.push(n(f)+"scale("+h+","+d+")")}return function(c,u){var h=[],d=[];return c=e(c),u=e(u),i(c.translateX,c.translateY,u.translateX,u.translateY,h,d),o(c.rotate,u.rotate,h,d),s(c.skewX,u.skewX,h,d),l(c.scaleX,c.scaleY,u.scaleX,u.scaleY,h,d),c=u=null,function(f){for(var p=-1,g=d.length,v;++p<g;)h[(v=d[p]).i]=v.x(f);return h.join("")}}}var ift=mE(rft,"px, ","px)","deg)"),oft=mE(nft,", ",")",")"),al=0,ac=0,zl=0,yE=1e3,Nd,rc,$d=0,Io=0,Yf=0,tu=typeof performance=="object"&&performance.now?performance:Date,_E=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function i_(){return Io||(_E(sft),Io=tu.now()+Yf)}function sft(){Io=0}function Fd(){this._call=this._time=this._next=null}Fd.prototype=bE.prototype={constructor:Fd,restart:function(e,t,a){if(typeof e!="function")throw new TypeError("callback is not a function");a=(a==null?i_():+a)+(t==null?0:+t),!this._next&&rc!==this&&(rc?rc._next=this:Nd=this,rc=this),this._call=e,this._time=a,Vm()},stop:function(){this._call&&(this._call=null,this._time=1/0,Vm())}};function bE(e,t,a){var r=new Fd;return r.restart(e,t,a),r}function lft(){i_(),++al;for(var e=Nd,t;e;)(t=Io-e._time)>=0&&e._call.call(void 0,t),e=e._next;--al}function Z2(){Io=($d=tu.now())+Yf,al=ac=0;try{lft()}finally{al=0,uft(),Io=0}}function cft(){var e=tu.now(),t=e-$d;t>yE&&(Yf-=t,$d=e)}function uft(){for(var e,t=Nd,a,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(a=t._next,t._next=null,t=e?e._next=a:Nd=a);rc=e,Vm(r)}function Vm(e){if(!al){ac&&(ac=clearTimeout(ac));var t=e-Io;t>24?(e<1/0&&(ac=setTimeout(Z2,e-tu.now()-Yf)),zl&&(zl=clearInterval(zl))):(zl||($d=tu.now(),zl=setInterval(cft,yE)),al=1,_E(Z2))}}function K2(e,t,a){var r=new Fd;return t=t==null?0:+t,r.restart(n=>{r.stop(),e(n+t)},t,a),r}var hft=QM("start","end","cancel","interrupt"),dft=[],xE=0,J2=1,Gm=2,Ph=3,Q2=4,Hm=5,Bh=6;function Xf(e,t,a,r,n,i){var o=e.__transition;if(!o)e.__transition={};else if(a in o)return;fft(e,a,{name:t,index:r,group:n,on:hft,tween:dft,time:i.time,delay:i.delay,duration:i.duration,ease:i.ease,timer:null,state:xE})}function o_(e,t){var a=tn(e,t);if(a.state>xE)throw new Error("too late; already scheduled");return a}function Dn(e,t){var a=tn(e,t);if(a.state>Ph)throw new Error("too late; already running");return a}function tn(e,t){var a=e.__transition;if(!a||!(a=a[t]))throw new Error("transition not found");return a}function fft(e,t,a){var r=e.__transition,n;r[t]=a,a.timer=bE(i,0,a.time);function i(c){a.state=J2,a.timer.restart(o,a.delay,a.time),a.delay<=c&&o(c-a.delay)}function o(c){var u,h,d,f;if(a.state!==J2)return l();for(u in r)if(f=r[u],f.name===a.name){if(f.state===Ph)return K2(o);f.state===Q2?(f.state=Bh,f.timer.stop(),f.on.call("interrupt",e,e.__data__,f.index,f.group),delete r[u]):+u<t&&(f.state=Bh,f.timer.stop(),f.on.call("cancel",e,e.__data__,f.index,f.group),delete r[u])}if(K2(function(){a.state===Ph&&(a.state=Q2,a.timer.restart(s,a.delay,a.time),s(c))}),a.state=Gm,a.on.call("start",e,e.__data__,a.index,a.group),a.state===Gm){for(a.state=Ph,n=new Array(d=a.tween.length),u=0,h=-1;u<d;++u)(f=a.tween[u].value.call(e,e.__data__,a.index,a.group))&&(n[++h]=f);n.length=h+1}}function s(c){for(var u=c<a.duration?a.ease.call(null,c/a.duration):(a.timer.restart(l),a.state=Hm,1),h=-1,d=n.length;++h<d;)n[h].call(e,u);a.state===Hm&&(a.on.call("end",e,e.__data__,a.index,a.group),l())}function l(){a.state=Bh,a.timer.stop(),delete r[t];for(var c in r)return;delete e.__transition}}function pft(e,t){var a=e.__transition,r,n,i=!0,o;if(a){t=t==null?null:t+"";for(o in a){if((r=a[o]).name!==t){i=!1;continue}n=r.state>Gm&&r.state<Hm,r.state=Bh,r.timer.stop(),r.on.call(n?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete a[o]}i&&delete e.__transition}}function gft(e){return this.each(function(){pft(this,e)})}function vft(e,t){var a,r;return function(){var n=Dn(this,e),i=n.tween;if(i!==a){r=a=i;for(var o=0,s=r.length;o<s;++o)if(r[o].name===t){r=r.slice(),r.splice(o,1);break}}n.tween=r}}function mft(e,t,a){var r,n;if(typeof a!="function")throw new Error;return function(){var i=Dn(this,e),o=i.tween;if(o!==r){n=(r=o).slice();for(var s={name:t,value:a},l=0,c=n.length;l<c;++l)if(n[l].name===t){n[l]=s;break}l===c&&n.push(s)}i.tween=n}}function yft(e,t){var a=this._id;if(e+="",arguments.length<2){for(var r=tn(this.node(),a).tween,n=0,i=r.length,o;n<i;++n)if((o=r[n]).name===e)return o.value;return null}return this.each((t==null?vft:mft)(a,e,t))}function s_(e,t,a){var r=e._id;return e.each(function(){var n=Dn(this,r);(n.value||(n.value={}))[t]=a.apply(this,arguments)}),function(n){return tn(n,r).value[t]}}function SE(e,t){var a;return(typeof t=="number"?bi:t instanceof Qc?Y2:(a=Qc(t))?(t=a,Y2):aft)(e,t)}function _ft(e){return function(){this.removeAttribute(e)}}function bft(e){return function(){this.removeAttributeNS(e.space,e.local)}}function xft(e,t,a){var r,n=a+"",i;return function(){var o=this.getAttribute(e);return o===n?null:o===r?i:i=t(r=o,a)}}function Sft(e,t,a){var r,n=a+"",i;return function(){var o=this.getAttributeNS(e.space,e.local);return o===n?null:o===r?i:i=t(r=o,a)}}function wft(e,t,a){var r,n,i;return function(){var o,s=a(this),l;return s==null?void this.removeAttribute(e):(o=this.getAttribute(e),l=s+"",o===l?null:o===r&&l===n?i:(n=l,i=t(r=o,s)))}}function Cft(e,t,a){var r,n,i;return function(){var o,s=a(this),l;return s==null?void this.removeAttributeNS(e.space,e.local):(o=this.getAttributeNS(e.space,e.local),l=s+"",o===l?null:o===r&&l===n?i:(n=l,i=t(r=o,s)))}}function Tft(e,t){var a=jf(e),r=a==="transform"?oft:SE;return this.attrTween(e,typeof t=="function"?(a.local?Cft:wft)(a,r,s_(this,"attr."+e,t)):t==null?(a.local?bft:_ft)(a):(a.local?Sft:xft)(a,r,t))}function Aft(e,t){return function(a){this.setAttribute(e,t.call(this,a))}}function kft(e,t){return function(a){this.setAttributeNS(e.space,e.local,t.call(this,a))}}function Dft(e,t){var a,r;function n(){var i=t.apply(this,arguments);return i!==r&&(a=(r=i)&&kft(e,i)),a}return n._value=t,n}function Lft(e,t){var a,r;function n(){var i=t.apply(this,arguments);return i!==r&&(a=(r=i)&&Aft(e,i)),a}return n._value=t,n}function Ift(e,t){var a="attr."+e;if(arguments.length<2)return(a=this.tween(a))&&a._value;if(t==null)return this.tween(a,null);if(typeof t!="function")throw new Error;var r=jf(e);return this.tween(a,(r.local?Dft:Lft)(r,t))}function Mft(e,t){return function(){o_(this,e).delay=+t.apply(this,arguments)}}function Eft(e,t){return t=+t,function(){o_(this,e).delay=t}}function Rft(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?Mft:Eft)(t,e)):tn(this.node(),t).delay}function Pft(e,t){return function(){Dn(this,e).duration=+t.apply(this,arguments)}}function Bft(e,t){return t=+t,function(){Dn(this,e).duration=t}}function Oft(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?Pft:Bft)(t,e)):tn(this.node(),t).duration}function Nft(e,t){if(typeof t!="function")throw new Error;return function(){Dn(this,e).ease=t}}function $ft(e){var t=this._id;return arguments.length?this.each(Nft(t,e)):tn(this.node(),t).ease}function Fft(e,t){return function(){var a=t.apply(this,arguments);if(typeof a!="function")throw new Error;Dn(this,e).ease=a}}function zft(e){if(typeof e!="function")throw new Error;return this.each(Fft(this._id,e))}function Vft(e){typeof e!="function"&&(e=aE(e));for(var t=this._groups,a=t.length,r=new Array(a),n=0;n<a;++n)for(var i=t[n],o=i.length,s=r[n]=[],l,c=0;c<o;++c)(l=i[c])&&e.call(l,l.__data__,c,i)&&s.push(l);return new ti(r,this._parents,this._name,this._id)}function Gft(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,a=e._groups,r=t.length,n=a.length,i=Math.min(r,n),o=new Array(r),s=0;s<i;++s)for(var l=t[s],c=a[s],u=l.length,h=o[s]=new Array(u),d,f=0;f<u;++f)(d=l[f]||c[f])&&(h[f]=d);for(;s<r;++s)o[s]=t[s];return new ti(o,this._parents,this._name,this._id)}function Hft(e){return(e+"").trim().split(/^|\s+/).every(function(t){var a=t.indexOf(".");return a>=0&&(t=t.slice(0,a)),!t||t==="start"})}function Wft(e,t,a){var r,n,i=Hft(t)?o_:Dn;return function(){var o=i(this,e),s=o.on;s!==r&&(n=(r=s).copy()).on(t,a),o.on=n}}function qft(e,t){var a=this._id;return arguments.length<2?tn(this.node(),a).on.on(e):this.each(Wft(a,e,t))}function Uft(e){return function(){var t=this.parentNode;for(var a in this.__transition)if(+a!==e)return;t&&t.removeChild(this)}}function jft(){return this.on("end.remove",Uft(this._id))}function Yft(e){var t=this._name,a=this._id;typeof e!="function"&&(e=e_(e));for(var r=this._groups,n=r.length,i=new Array(n),o=0;o<n;++o)for(var s=r[o],l=s.length,c=i[o]=new Array(l),u,h,d=0;d<l;++d)(u=s[d])&&(h=e.call(u,u.__data__,d,s))&&("__data__"in u&&(h.__data__=u.__data__),c[d]=h,Xf(c[d],t,a,d,c,tn(u,a)));return new ti(i,this._parents,t,a)}function Xft(e){var t=this._name,a=this._id;typeof e!="function"&&(e=eE(e));for(var r=this._groups,n=r.length,i=[],o=[],s=0;s<n;++s)for(var l=r[s],c=l.length,u,h=0;h<c;++h)if(u=l[h]){for(var d=e.call(u,u.__data__,h,l),f,p=tn(u,a),g=0,v=d.length;g<v;++g)(f=d[g])&&Xf(f,t,a,g,d,p);i.push(d),o.push(u)}return new ti(i,o,t,a)}var Zft=Tu.prototype.constructor;function Kft(){return new Zft(this._groups,this._parents)}function Jft(e,t){var a,r,n;return function(){var i=el(this,e),o=(this.style.removeProperty(e),el(this,e));return i===o?null:i===a&&o===r?n:n=t(a=i,r=o)}}function wE(e){return function(){this.style.removeProperty(e)}}function Qft(e,t,a){var r,n=a+"",i;return function(){var o=el(this,e);return o===n?null:o===r?i:i=t(r=o,a)}}function tpt(e,t,a){var r,n,i;return function(){var o=el(this,e),s=a(this),l=s+"";return s==null&&(l=s=(this.style.removeProperty(e),el(this,e))),o===l?null:o===r&&l===n?i:(n=l,i=t(r=o,s))}}function ept(e,t){var a,r,n,i="style."+t,o="end."+i,s;return function(){var l=Dn(this,e),c=l.on,u=l.value[i]==null?s||(s=wE(t)):void 0;(c!==a||n!==u)&&(r=(a=c).copy()).on(o,n=u),l.on=r}}function apt(e,t,a){var r=(e+="")=="transform"?ift:SE;return t==null?this.styleTween(e,Jft(e,r)).on("end.style."+e,wE(e)):typeof t=="function"?this.styleTween(e,tpt(e,r,s_(this,"style."+e,t))).each(ept(this._id,e)):this.styleTween(e,Qft(e,r,t),a).on("end.style."+e,null)}function rpt(e,t,a){return function(r){this.style.setProperty(e,t.call(this,r),a)}}function npt(e,t,a){var r,n;function i(){var o=t.apply(this,arguments);return o!==n&&(r=(n=o)&&rpt(e,o,a)),r}return i._value=t,i}function ipt(e,t,a){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,npt(e,t,a??""))}function opt(e){return function(){this.textContent=e}}function spt(e){return function(){var t=e(this);this.textContent=t??""}}function lpt(e){return this.tween("text",typeof e=="function"?spt(s_(this,"text",e)):opt(e==null?"":e+""))}function cpt(e){return function(t){this.textContent=e.call(this,t)}}function upt(e){var t,a;function r(){var n=e.apply(this,arguments);return n!==a&&(t=(a=n)&&cpt(n)),t}return r._value=e,r}function hpt(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,upt(e))}function dpt(){for(var e=this._name,t=this._id,a=CE(),r=this._groups,n=r.length,i=0;i<n;++i)for(var o=r[i],s=o.length,l,c=0;c<s;++c)if(l=o[c]){var u=tn(l,t);Xf(l,e,a,c,o,{time:u.time+u.delay+u.duration,delay:0,duration:u.duration,ease:u.ease})}return new ti(r,this._parents,e,a)}function fpt(){var e,t,a=this,r=a._id,n=a.size();return new Promise(function(i,o){var s={value:o},l={value:function(){--n===0&&i()}};a.each(function(){var c=Dn(this,r),u=c.on;u!==e&&(t=(e=u).copy(),t._.cancel.push(s),t._.interrupt.push(s),t._.end.push(l)),c.on=t}),n===0&&i()})}var ppt=0;function ti(e,t,a,r){this._groups=e,this._parents=t,this._name=a,this._id=r}function CE(){return++ppt}var Pn=Tu.prototype;ti.prototype={constructor:ti,select:Yft,selectAll:Xft,selectChild:Pn.selectChild,selectChildren:Pn.selectChildren,filter:Vft,merge:Gft,selection:Kft,transition:dpt,call:Pn.call,nodes:Pn.nodes,node:Pn.node,size:Pn.size,empty:Pn.empty,each:Pn.each,on:qft,attr:Tft,attrTween:Ift,style:apt,styleTween:ipt,text:lpt,textTween:hpt,remove:jft,tween:yft,delay:Rft,duration:Oft,ease:$ft,easeVarying:zft,end:fpt,[Symbol.iterator]:Pn[Symbol.iterator]};function gpt(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var vpt={time:null,delay:0,duration:250,ease:gpt};function mpt(e,t){for(var a;!(a=e.__transition)||!(a=a[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return a}function ypt(e){var t,a;e instanceof ti?(t=e._id,e=e._name):(t=CE(),(a=vpt).time=i_(),e=e==null?null:e+"");for(var r=this._groups,n=r.length,i=0;i<n;++i)for(var o=r[i],s=o.length,l,c=0;c<s;++c)(l=o[c])&&Xf(l,e,t,c,o,a||mpt(l,t));return new ti(r,this._parents,e,t)}Tu.prototype.interrupt=gft;Tu.prototype.transition=ypt;const Wm=Math.PI,qm=2*Wm,eo=1e-6,_pt=qm-eo;function TE(e){this._+=e[0];for(let t=1,a=e.length;t<a;++t)this._+=arguments[t]+e[t]}function bpt(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return TE;const a=10**t;return function(r){this._+=r[0];for(let n=1,i=r.length;n<i;++n)this._+=Math.round(arguments[n]*a)/a+r[n]}}class xpt{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?TE:bpt(t)}moveTo(t,a){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+a}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,a){this._append`L${this._x1=+t},${this._y1=+a}`}quadraticCurveTo(t,a,r,n){this._append`Q${+t},${+a},${this._x1=+r},${this._y1=+n}`}bezierCurveTo(t,a,r,n,i,o){this._append`C${+t},${+a},${+r},${+n},${this._x1=+i},${this._y1=+o}`}arcTo(t,a,r,n,i){if(t=+t,a=+a,r=+r,n=+n,i=+i,i<0)throw new Error(`negative radius: ${i}`);let o=this._x1,s=this._y1,l=r-t,c=n-a,u=o-t,h=s-a,d=u*u+h*h;if(this._x1===null)this._append`M${this._x1=t},${this._y1=a}`;else if(d>eo)if(!(Math.abs(h*l-c*u)>eo)||!i)this._append`L${this._x1=t},${this._y1=a}`;else{let f=r-o,p=n-s,g=l*l+c*c,v=f*f+p*p,_=Math.sqrt(g),y=Math.sqrt(d),b=i*Math.tan((Wm-Math.acos((g+d-v)/(2*_*y)))/2),w=b/y,T=b/_;Math.abs(w-1)>eo&&this._append`L${t+w*u},${a+w*h}`,this._append`A${i},${i},0,0,${+(h*f>u*p)},${this._x1=t+T*l},${this._y1=a+T*c}`}}arc(t,a,r,n,i,o){if(t=+t,a=+a,r=+r,o=!!o,r<0)throw new Error(`negative radius: ${r}`);let s=r*Math.cos(n),l=r*Math.sin(n),c=t+s,u=a+l,h=1^o,d=o?n-i:i-n;this._x1===null?this._append`M${c},${u}`:(Math.abs(this._x1-c)>eo||Math.abs(this._y1-u)>eo)&&this._append`L${c},${u}`,r&&(d<0&&(d=d%qm+qm),d>_pt?this._append`A${r},${r},0,1,${h},${t-s},${a-l}A${r},${r},0,1,${h},${this._x1=c},${this._y1=u}`:d>eo&&this._append`A${r},${r},0,${+(d>=Wm)},${h},${this._x1=t+r*Math.cos(i)},${this._y1=a+r*Math.sin(i)}`)}rect(t,a,r,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+a}h${r=+r}v${+n}h${-r}Z`}toString(){return this._}}function rs(e){return function(){return e}}const M_t=Math.abs,E_t=Math.atan2,R_t=Math.cos,P_t=Math.max,B_t=Math.min,O_t=Math.sin,N_t=Math.sqrt,tC=1e-12,l_=Math.PI,eC=l_/2,$_t=2*l_;function F_t(e){return e>1?0:e<-1?l_:Math.acos(e)}function z_t(e){return e>=1?eC:e<=-1?-eC:Math.asin(e)}function Spt(e){let t=3;return e.digits=function(a){if(!arguments.length)return t;if(a==null)t=null;else{const r=Math.floor(a);if(!(r>=0))throw new RangeError(`invalid digits: ${a}`);t=r}return e},()=>new xpt(t)}function wpt(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function AE(e){this._context=e}AE.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function zd(e){return new AE(e)}function Cpt(e){return e[0]}function Tpt(e){return e[1]}function Apt(e,t){var a=rs(!0),r=null,n=zd,i=null,o=Spt(s);e=typeof e=="function"?e:e===void 0?Cpt:rs(e),t=typeof t=="function"?t:t===void 0?Tpt:rs(t);function s(l){var c,u=(l=wpt(l)).length,h,d=!1,f;for(r==null&&(i=n(f=o())),c=0;c<=u;++c)!(c<u&&a(h=l[c],c,l))===d&&((d=!d)?i.lineStart():i.lineEnd()),d&&i.point(+e(h,c,l),+t(h,c,l));if(f)return i=null,f+""||null}return s.x=function(l){return arguments.length?(e=typeof l=="function"?l:rs(+l),s):e},s.y=function(l){return arguments.length?(t=typeof l=="function"?l:rs(+l),s):t},s.defined=function(l){return arguments.length?(a=typeof l=="function"?l:rs(!!l),s):a},s.curve=function(l){return arguments.length?(n=l,r!=null&&(i=n(r)),s):n},s.context=function(l){return arguments.length?(l==null?r=i=null:i=n(r=l),s):r},s}class kE{constructor(t,a){this._context=t,this._x=a}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,a){switch(t=+t,a=+a,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,a):this._context.moveTo(t,a);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,a,t,a):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+a)/2,t,this._y0,t,a);break}}this._x0=t,this._y0=a}}function DE(e){return new kE(e,!0)}function LE(e){return new kE(e,!1)}function Ni(){}function Vd(e,t,a){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+a)/6)}function Zf(e){this._context=e}Zf.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Vd(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Vd(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function Oh(e){return new Zf(e)}function IE(e){this._context=e}IE.prototype={areaStart:Ni,areaEnd:Ni,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:Vd(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function kpt(e){return new IE(e)}function ME(e){this._context=e}ME.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var a=(this._x0+4*this._x1+e)/6,r=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(a,r):this._context.moveTo(a,r);break;case 3:this._point=4;default:Vd(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function Dpt(e){return new ME(e)}function EE(e,t){this._basis=new Zf(e),this._beta=t}EE.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var e=this._x,t=this._y,a=e.length-1;if(a>0)for(var r=e[0],n=t[0],i=e[a]-r,o=t[a]-n,s=-1,l;++s<=a;)l=s/a,this._basis.point(this._beta*e[s]+(1-this._beta)*(r+l*i),this._beta*t[s]+(1-this._beta)*(n+l*o));this._x=this._y=null,this._basis.lineEnd()},point:function(e,t){this._x.push(+e),this._y.push(+t)}};const Lpt=function e(t){function a(r){return t===1?new Zf(r):new EE(r,t)}return a.beta=function(r){return e(+r)},a}(.85);function Gd(e,t,a){e._context.bezierCurveTo(e._x1+e._k*(e._x2-e._x0),e._y1+e._k*(e._y2-e._y0),e._x2+e._k*(e._x1-t),e._y2+e._k*(e._y1-a),e._x2,e._y2)}function c_(e,t){this._context=e,this._k=(1-t)/6}c_.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:Gd(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2,this._x1=e,this._y1=t;break;case 2:this._point=3;default:Gd(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const RE=function e(t){function a(r){return new c_(r,t)}return a.tension=function(r){return e(+r)},a}(0);function u_(e,t){this._context=e,this._k=(1-t)/6}u_.prototype={areaStart:Ni,areaEnd:Ni,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:Gd(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const Ipt=function e(t){function a(r){return new u_(r,t)}return a.tension=function(r){return e(+r)},a}(0);function h_(e,t){this._context=e,this._k=(1-t)/6}h_.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Gd(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const Mpt=function e(t){function a(r){return new h_(r,t)}return a.tension=function(r){return e(+r)},a}(0);function d_(e,t,a){var r=e._x1,n=e._y1,i=e._x2,o=e._y2;if(e._l01_a>tC){var s=2*e._l01_2a+3*e._l01_a*e._l12_a+e._l12_2a,l=3*e._l01_a*(e._l01_a+e._l12_a);r=(r*s-e._x0*e._l12_2a+e._x2*e._l01_2a)/l,n=(n*s-e._y0*e._l12_2a+e._y2*e._l01_2a)/l}if(e._l23_a>tC){var c=2*e._l23_2a+3*e._l23_a*e._l12_a+e._l12_2a,u=3*e._l23_a*(e._l23_a+e._l12_a);i=(i*c+e._x1*e._l23_2a-t*e._l12_2a)/u,o=(o*c+e._y1*e._l23_2a-a*e._l12_2a)/u}e._context.bezierCurveTo(r,n,i,o,e._x2,e._y2)}function PE(e,t){this._context=e,this._alpha=t}PE.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var a=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(a*a+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3;default:d_(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const BE=function e(t){function a(r){return t?new PE(r,t):new c_(r,0)}return a.alpha=function(r){return e(+r)},a}(.5);function OE(e,t){this._context=e,this._alpha=t}OE.prototype={areaStart:Ni,areaEnd:Ni,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){if(e=+e,t=+t,this._point){var a=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(a*a+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:d_(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const Ept=function e(t){function a(r){return t?new OE(r,t):new u_(r,0)}return a.alpha=function(r){return e(+r)},a}(.5);function NE(e,t){this._context=e,this._alpha=t}NE.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var a=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(a*a+r*r,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:d_(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const Rpt=function e(t){function a(r){return t?new NE(r,t):new h_(r,0)}return a.alpha=function(r){return e(+r)},a}(.5);function $E(e){this._context=e}$E.prototype={areaStart:Ni,areaEnd:Ni,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function Ppt(e){return new $E(e)}function aC(e){return e<0?-1:1}function rC(e,t,a){var r=e._x1-e._x0,n=t-e._x1,i=(e._y1-e._y0)/(r||n<0&&-0),o=(a-e._y1)/(n||r<0&&-0),s=(i*n+o*r)/(r+n);return(aC(i)+aC(o))*Math.min(Math.abs(i),Math.abs(o),.5*Math.abs(s))||0}function nC(e,t){var a=e._x1-e._x0;return a?(3*(e._y1-e._y0)/a-t)/2:t}function jg(e,t,a){var r=e._x0,n=e._y0,i=e._x1,o=e._y1,s=(i-r)/3;e._context.bezierCurveTo(r+s,n+s*t,i-s,o-s*a,i,o)}function Hd(e){this._context=e}Hd.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:jg(this,this._t0,nC(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var a=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,jg(this,nC(this,a=rC(this,e,t)),a);break;default:jg(this,this._t0,a=rC(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=a}}};function FE(e){this._context=new zE(e)}(FE.prototype=Object.create(Hd.prototype)).point=function(e,t){Hd.prototype.point.call(this,t,e)};function zE(e){this._context=e}zE.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,a,r,n,i){this._context.bezierCurveTo(t,e,r,a,i,n)}};function VE(e){return new Hd(e)}function GE(e){return new FE(e)}function HE(e){this._context=e}HE.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,a=e.length;if(a)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),a===2)this._context.lineTo(e[1],t[1]);else for(var r=iC(e),n=iC(t),i=0,o=1;o<a;++i,++o)this._context.bezierCurveTo(r[0][i],n[0][i],r[1][i],n[1][i],e[o],t[o]);(this._line||this._line!==0&&a===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function iC(e){var t,a=e.length-1,r,n=new Array(a),i=new Array(a),o=new Array(a);for(n[0]=0,i[0]=2,o[0]=e[0]+2*e[1],t=1;t<a-1;++t)n[t]=1,i[t]=4,o[t]=4*e[t]+2*e[t+1];for(n[a-1]=2,i[a-1]=7,o[a-1]=8*e[a-1]+e[a],t=1;t<a;++t)r=n[t]/i[t-1],i[t]-=r,o[t]-=r*o[t-1];for(n[a-1]=o[a-1]/i[a-1],t=a-2;t>=0;--t)n[t]=(o[t]-n[t+1])/i[t];for(i[a-1]=(e[a]+n[a-1])/2,t=0;t<a-1;++t)i[t]=2*e[t+1]-n[t+1];return[n,i]}function WE(e){return new HE(e)}function Kf(e,t){this._context=e,this._t=t}Kf.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var a=this._x*(1-this._t)+e*this._t;this._context.lineTo(a,this._y),this._context.lineTo(a,t)}break}}this._x=e,this._y=t}};function qE(e){return new Kf(e,.5)}function UE(e){return new Kf(e,0)}function jE(e){return new Kf(e,1)}function nc(e,t,a){this.k=e,this.x=t,this.y=a}nc.prototype={constructor:nc,scale:function(e){return e===1?this:new nc(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new nc(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};nc.prototype;var Bpt="​",Opt={curveBasis:Oh,curveBasisClosed:kpt,curveBasisOpen:Dpt,curveBumpX:DE,curveBumpY:LE,curveBundle:Lpt,curveCardinalClosed:Ipt,curveCardinalOpen:Mpt,curveCardinal:RE,curveCatmullRomClosed:Ept,curveCatmullRomOpen:Rpt,curveCatmullRom:BE,curveLinear:zd,curveLinearClosed:Ppt,curveMonotoneX:VE,curveMonotoneY:GE,curveNatural:WE,curveStep:qE,curveStepAfter:jE,curveStepBefore:UE},Npt=/\s*(?:(\w+)(?=:):|(\w+))\s*(?:(\w+)|((?:(?!}%{2}).|\r?\n)*))?\s*(?:}%{2})?/gi,$pt=I(function(e,t){const a=YE(e,/(?:init\b)|(?:initialize\b)/);let r={};if(Array.isArray(a)){const o=a.map(s=>s.args);Cd(o),r=Na(r,[...o])}else r=a.args;if(!r)return;let n=z0(e,t);const i="config";return r[i]!==void 0&&(n==="flowchart-v2"&&(n="flowchart"),r[n]=r[i],delete r[i]),r},"detectInit"),YE=I(function(e,t=null){var a,r;try{const n=new RegExp(`[%]{2}(?![{]${Npt.source})(?=[}][%]{2}).*
`,"ig");e=e.trim().replace(n,"").replace(/'/gm,'"'),It.debug(`Detecting diagram directive${t!==null?" type:"+t:""} based on the text:${e}`);let i;const o=[];for(;(i=yc.exec(e))!==null;)if(i.index===yc.lastIndex&&yc.lastIndex++,i&&!t||t&&((a=i[1])!=null&&a.match(t))||t&&((r=i[2])!=null&&r.match(t))){const s=i[1]?i[1]:i[2],l=i[3]?i[3].trim():i[4]?JSON.parse(i[4].trim()):null;o.push({type:s,args:l})}return o.length===0?{type:e,args:null}:o.length===1?o[0]:o}catch(n){return It.error(`ERROR: ${n.message} - Unable to parse directive type: '${t}' based on the text: '${e}'`),{type:void 0,args:null}}},"detectDirective"),Fpt=I(function(e){return e.replace(yc,"")},"removeDirectives"),zpt=I(function(e,t){for(const[a,r]of t.entries())if(r.match(e))return a;return-1},"isSubstringInArray");function f_(e,t){if(!e)return t;const a=`curve${e.charAt(0).toUpperCase()+e.slice(1)}`;return Opt[a]??t}I(f_,"interpolateToCurve");function XE(e,t){const a=e.trim();if(a)return t.securityLevel!=="loose"?JM(a):a}I(XE,"formatUrl");var Vpt=I((e,...t)=>{const a=e.split("."),r=a.length-1,n=a[r];let i=window;for(let o=0;o<r;o++)if(i=i[a[o]],!i){It.error(`Function name: ${e} not found in window`);return}i[n](...t)},"runFunc");function p_(e,t){return!e||!t?0:Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}I(p_,"distance");function ZE(e){let t,a=0;e.forEach(n=>{a+=p_(n,t),t=n});const r=a/2;return g_(e,r)}I(ZE,"traverseEdge");function KE(e){return e.length===1?e[0]:ZE(e)}I(KE,"calcLabelPosition");var oC=I((e,t=2)=>{const a=Math.pow(10,t);return Math.round(e*a)/a},"roundNumber"),g_=I((e,t)=>{let a,r=t;for(const n of e){if(a){const i=p_(n,a);if(i===0)return a;if(i<r)r-=i;else{const o=r/i;if(o<=0)return a;if(o>=1)return{x:n.x,y:n.y};if(o>0&&o<1)return{x:oC((1-o)*a.x+o*n.x,5),y:oC((1-o)*a.y+o*n.y,5)}}}a=n}throw new Error("Could not find a suitable point for the given distance")},"calculatePoint"),Gpt=I((e,t,a)=>{It.info(`our points ${JSON.stringify(t)}`),t[0]!==a&&(t=t.reverse());const n=g_(t,25),i=e?10:5,o=Math.atan2(t[0].y-n.y,t[0].x-n.x),s={x:0,y:0};return s.x=Math.sin(o)*i+(t[0].x+n.x)/2,s.y=-Math.cos(o)*i+(t[0].y+n.y)/2,s},"calcCardinalityPosition");function JE(e,t,a){const r=structuredClone(a);It.info("our points",r),t!=="start_left"&&t!=="start_right"&&r.reverse();const n=25+e,i=g_(r,n),o=10+e*.5,s=Math.atan2(r[0].y-i.y,r[0].x-i.x),l={x:0,y:0};return t==="start_left"?(l.x=Math.sin(s+Math.PI)*o+(r[0].x+i.x)/2,l.y=-Math.cos(s+Math.PI)*o+(r[0].y+i.y)/2):t==="end_right"?(l.x=Math.sin(s-Math.PI)*o+(r[0].x+i.x)/2-5,l.y=-Math.cos(s-Math.PI)*o+(r[0].y+i.y)/2-5):t==="end_left"?(l.x=Math.sin(s)*o+(r[0].x+i.x)/2-5,l.y=-Math.cos(s)*o+(r[0].y+i.y)/2-5):(l.x=Math.sin(s)*o+(r[0].x+i.x)/2,l.y=-Math.cos(s)*o+(r[0].y+i.y)/2),l}I(JE,"calcTerminalLabelPosition");function QE(e){let t="",a="";for(const r of e)r!==void 0&&(r.startsWith("color:")||r.startsWith("text-align:")?a=a+r+";":t=t+r+";");return{style:t,labelStyle:a}}I(QE,"getStylesFromArray");var sC=0,Hpt=I(()=>(sC++,"id-"+Math.random().toString(36).substr(2,12)+"-"+sC),"generateId");function tR(e){let t="";const a="0123456789abcdef",r=a.length;for(let n=0;n<e;n++)t+=a.charAt(Math.floor(Math.random()*r));return t}I(tR,"makeRandomHex");var Wpt=I(e=>tR(e.length),"random"),qpt=I(function(){return{x:0,y:0,fill:void 0,anchor:"start",style:"#666",width:100,height:100,textMargin:0,rx:0,ry:0,valign:void 0,text:""}},"getTextObj"),Upt=I(function(e,t){const a=t.text.replace(vl.lineBreakRegex," "),[,r]=Jf(t.fontSize),n=e.append("text");n.attr("x",t.x),n.attr("y",t.y),n.style("text-anchor",t.anchor),n.style("font-family",t.fontFamily),n.style("font-size",r),n.style("font-weight",t.fontWeight),n.attr("fill",t.fill),t.class!==void 0&&n.attr("class",t.class);const i=n.append("tspan");return i.attr("x",t.x+t.textMargin*2),i.attr("fill",t.fill),i.text(a),n},"drawSimpleText"),jpt=ly((e,t,a)=>{if(!e||(a=Object.assign({fontSize:12,fontWeight:400,fontFamily:"Arial",joinWith:"<br/>"},a),vl.lineBreakRegex.test(e)))return e;const r=e.split(" ").filter(Boolean),n=[];let i="";return r.forEach((o,s)=>{const l=ei(`${o} `,a),c=ei(i,a);if(l>t){const{hyphenatedStrings:d,remainingWord:f}=Ypt(o,t,"-",a);n.push(i,...d),i=f}else c+l>=t?(n.push(i),i=o):i=[i,o].filter(Boolean).join(" ");s+1===r.length&&n.push(i)}),n.filter(o=>o!=="").join(a.joinWith)},(e,t,a)=>`${e}${t}${a.fontSize}${a.fontWeight}${a.fontFamily}${a.joinWith}`),Ypt=ly((e,t,a="-",r)=>{r=Object.assign({fontSize:12,fontWeight:400,fontFamily:"Arial",margin:0},r);const n=[...e],i=[];let o="";return n.forEach((s,l)=>{const c=`${o}${s}`;if(ei(c,r)>=t){const h=l+1,d=n.length===h,f=`${c}${a}`;i.push(d?c:f),o=""}else o=c}),{hyphenatedStrings:i,remainingWord:o}},(e,t,a="-",r)=>`${e}${t}${a}${r.fontSize}${r.fontWeight}${r.fontFamily}`);function eR(e,t){return v_(e,t).height}I(eR,"calculateTextHeight");function ei(e,t){return v_(e,t).width}I(ei,"calculateTextWidth");var v_=ly((e,t)=>{const{fontSize:a=12,fontFamily:r="Arial",fontWeight:n=400}=t;if(!e)return{width:0,height:0};const[,i]=Jf(a),o=["sans-serif",r],s=e.split(vl.lineBreakRegex),l=[],c=$e("body");if(!c.remove)return{width:0,height:0,lineHeight:0};const u=c.append("svg");for(const d of o){let f=0;const p={width:0,height:0,lineHeight:0};for(const g of s){const v=qpt();v.text=g||Bpt;const _=Upt(u,v).style("font-size",i).style("font-weight",n).style("font-family",d),y=(_._groups||_)[0][0].getBBox();if(y.width===0&&y.height===0)throw new Error("svg element not in render tree");p.width=Math.round(Math.max(p.width,y.width)),f=Math.round(y.height),p.height+=f,p.lineHeight=Math.round(Math.max(p.lineHeight,f))}l.push(p)}u.remove();const h=isNaN(l[1].height)||isNaN(l[1].width)||isNaN(l[1].lineHeight)||l[0].height>l[1].height&&l[0].width>l[1].width&&l[0].lineHeight>l[1].lineHeight?0:1;return l[h]},(e,t)=>`${e}${t.fontSize}${t.fontWeight}${t.fontFamily}`),Ms,Xpt=(Ms=class{constructor(t=!1,a){this.count=0,this.count=a?a.length:0,this.next=t?()=>this.count++:()=>Date.now()}},I(Ms,"InitIDGenerator"),Ms),ch,Zpt=I(function(e){return ch=ch||document.createElement("div"),e=escape(e).replace(/%26/g,"&").replace(/%23/g,"#").replace(/%3B/g,";"),ch.innerHTML=e,unescape(ch.textContent)},"entityDecode");function m_(e){return"str"in e}I(m_,"isDetailedError");var Kpt=I((e,t,a,r)=>{var i;if(!r)return;const n=(i=e.node())==null?void 0:i.getBBox();n&&e.append("text").text(r).attr("text-anchor","middle").attr("x",n.x+n.width/2).attr("y",-a).attr("class",t)},"insertTitle"),Jf=I(e=>{if(typeof e=="number")return[e,e+"px"];const t=parseInt(e??"",10);return Number.isNaN(t)?[void 0,void 0]:e===String(t)?[t,e+"px"]:[t,e]},"parseFontSize");function y_(e,t){return P3({},e,t)}I(y_,"cleanAndMerge");var mn={assignWithDepth:Na,wrapLabel:jpt,calculateTextHeight:eR,calculateTextWidth:ei,calculateTextDimensions:v_,cleanAndMerge:y_,detectInit:$pt,detectDirective:YE,isSubstringInArray:zpt,interpolateToCurve:f_,calcLabelPosition:KE,calcCardinalityPosition:Gpt,calcTerminalLabelPosition:JE,formatUrl:XE,getStylesFromArray:QE,generateId:Hpt,random:Wpt,runFunc:Vpt,entityDecode:Zpt,insertTitle:Kpt,parseFontSize:Jf,InitIDGenerator:Xpt},Jpt=I(function(e){let t=e;return t=t.replace(/style.*:\S*#.*;/g,function(a){return a.substring(0,a.length-1)}),t=t.replace(/classDef.*:\S*#.*;/g,function(a){return a.substring(0,a.length-1)}),t=t.replace(/#\w+;/g,function(a){const r=a.substring(1,a.length-1);return/^\+?\d+$/.test(r)?"ﬂ°°"+r+"¶ß":"ﬂ°"+r+"¶ß"}),t},"encodeEntities"),Ho=I(function(e){return e.replace(/ﬂ°°/g,"&#").replace(/ﬂ°/g,"&").replace(/¶ß/g,";")},"decodeEntities"),V_t=I((e,t,{counter:a=0,prefix:r,suffix:n},i)=>i||`${r?`${r}_`:""}${e}_${t}_${a}${n?`_${n}`:""}`,"getEdgeId");function or(e){return e??null}I(or,"handleUndefinedAttr");const Qpt=Object.freeze({left:0,top:0,width:16,height:16}),Wd=Object.freeze({rotate:0,vFlip:!1,hFlip:!1}),aR=Object.freeze({...Qpt,...Wd}),tgt=Object.freeze({...aR,body:"",hidden:!1}),egt=Object.freeze({width:null,height:null}),agt=Object.freeze({...egt,...Wd}),rgt=(e,t,a,r="")=>{const n=e.split(":");if(e.slice(0,1)==="@"){if(n.length<2||n.length>3)return null;r=n.shift().slice(1)}if(n.length>3||!n.length)return null;if(n.length>1){const s=n.pop(),l=n.pop(),c={provider:n.length>0?n[0]:r,prefix:l,name:s};return Yg(c)?c:null}const i=n[0],o=i.split("-");if(o.length>1){const s={provider:r,prefix:o.shift(),name:o.join("-")};return Yg(s)?s:null}if(a&&r===""){const s={provider:r,prefix:"",name:i};return Yg(s,a)?s:null}return null},Yg=(e,t)=>e?!!((t&&e.prefix===""||e.prefix)&&e.name):!1;function ngt(e,t){const a={};!e.hFlip!=!t.hFlip&&(a.hFlip=!0),!e.vFlip!=!t.vFlip&&(a.vFlip=!0);const r=((e.rotate||0)+(t.rotate||0))%4;return r&&(a.rotate=r),a}function lC(e,t){const a=ngt(e,t);for(const r in tgt)r in Wd?r in e&&!(r in a)&&(a[r]=Wd[r]):r in t?a[r]=t[r]:r in e&&(a[r]=e[r]);return a}function igt(e,t){const a=e.icons,r=e.aliases||Object.create(null),n=Object.create(null);function i(o){if(a[o])return n[o]=[];if(!(o in n)){n[o]=null;const s=r[o]&&r[o].parent,l=s&&i(s);l&&(n[o]=[s].concat(l))}return n[o]}return(t||Object.keys(a).concat(Object.keys(r))).forEach(i),n}function cC(e,t,a){const r=e.icons,n=e.aliases||Object.create(null);let i={};function o(s){i=lC(r[s]||n[s],i)}return o(t),a.forEach(o),lC(e,i)}function ogt(e,t){if(e.icons[t])return cC(e,t,[]);const a=igt(e,[t])[t];return a?cC(e,t,a):null}const sgt=/(-?[0-9.]*[0-9]+[0-9.]*)/g,lgt=/^-?[0-9.]*[0-9]+[0-9.]*$/g;function uC(e,t,a){if(t===1)return e;if(a=a||100,typeof e=="number")return Math.ceil(e*t*a)/a;if(typeof e!="string")return e;const r=e.split(sgt);if(r===null||!r.length)return e;const n=[];let i=r.shift(),o=lgt.test(i);for(;;){if(o){const s=parseFloat(i);isNaN(s)?n.push(i):n.push(Math.ceil(s*t*a)/a)}else n.push(i);if(i=r.shift(),i===void 0)return n.join("");o=!o}}function cgt(e,t="defs"){let a="";const r=e.indexOf("<"+t);for(;r>=0;){const n=e.indexOf(">",r),i=e.indexOf("</"+t);if(n===-1||i===-1)break;const o=e.indexOf(">",i);if(o===-1)break;a+=e.slice(n+1,i).trim(),e=e.slice(0,r).trim()+e.slice(o+1)}return{defs:a,content:e}}function ugt(e,t){return e?"<defs>"+e+"</defs>"+t:t}function hgt(e,t,a){const r=cgt(e);return ugt(r.defs,t+r.content+a)}const dgt=e=>e==="unset"||e==="undefined"||e==="none";function fgt(e,t){const a={...aR,...e},r={...agt,...t},n={left:a.left,top:a.top,width:a.width,height:a.height};let i=a.body;[a,r].forEach(g=>{const v=[],_=g.hFlip,y=g.vFlip;let b=g.rotate;_?y?b+=2:(v.push("translate("+(n.width+n.left).toString()+" "+(0-n.top).toString()+")"),v.push("scale(-1 1)"),n.top=n.left=0):y&&(v.push("translate("+(0-n.left).toString()+" "+(n.height+n.top).toString()+")"),v.push("scale(1 -1)"),n.top=n.left=0);let w;switch(b<0&&(b-=Math.floor(b/4)*4),b=b%4,b){case 1:w=n.height/2+n.top,v.unshift("rotate(90 "+w.toString()+" "+w.toString()+")");break;case 2:v.unshift("rotate(180 "+(n.width/2+n.left).toString()+" "+(n.height/2+n.top).toString()+")");break;case 3:w=n.width/2+n.left,v.unshift("rotate(-90 "+w.toString()+" "+w.toString()+")");break}b%2===1&&(n.left!==n.top&&(w=n.left,n.left=n.top,n.top=w),n.width!==n.height&&(w=n.width,n.width=n.height,n.height=w)),v.length&&(i=hgt(i,'<g transform="'+v.join(" ")+'">',"</g>"))});const o=r.width,s=r.height,l=n.width,c=n.height;let u,h;o===null?(h=s===null?"1em":s==="auto"?c:s,u=uC(h,l/c)):(u=o==="auto"?l:o,h=s===null?uC(u,c/l):s==="auto"?c:s);const d={},f=(g,v)=>{dgt(v)||(d[g]=v.toString())};f("width",u),f("height",h);const p=[n.left,n.top,l,c];return d.viewBox=p.join(" "),{attributes:d,viewBox:p,body:i}}const pgt=/\sid="(\S+)"/g,ggt="IconifyId"+Date.now().toString(16)+(Math.random()*16777216|0).toString(16);let vgt=0;function mgt(e,t=ggt){const a=[];let r;for(;r=pgt.exec(e);)a.push(r[1]);if(!a.length)return e;const n="suffix"+(Math.random()*16777216|Date.now()).toString(16);return a.forEach(i=>{const o=typeof t=="function"?t(i):t+(vgt++).toString(),s=i.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");e=e.replace(new RegExp('([#;"])('+s+')([")]|\\.[a-z])',"g"),"$1"+o+n+"$3")}),e=e.replace(new RegExp(n,"g"),""),e}function ygt(e,t){let a=e.indexOf("xlink:")===-1?"":' xmlns:xlink="http://www.w3.org/1999/xlink"';for(const r in t)a+=" "+r+'="'+t[r]+'"';return'<svg xmlns="http://www.w3.org/2000/svg"'+a+">"+e+"</svg>"}function __(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}var Wo=__();function rR(e){Wo=e}var bc={exec:()=>null};function Ue(e,t=""){let a=typeof e=="string"?e:e.source;const r={replace:(n,i)=>{let o=typeof i=="string"?i:i.source;return o=o.replace(rr.caret,"$1"),a=a.replace(n,o),r},getRegex:()=>new RegExp(a,t)};return r}var rr={codeRemoveIndent:/^(?: {1,4}| {0,3}\t)/gm,outputLinkReplace:/\\([\[\]])/g,indentCodeCompensation:/^(\s+)(?:```)/,beginningSpace:/^\s+/,endingHash:/#$/,startingSpaceChar:/^ /,endingSpaceChar:/ $/,nonSpaceChar:/[^ ]/,newLineCharGlobal:/\n/g,tabCharGlobal:/\t/g,multipleSpaceGlobal:/\s+/g,blankLine:/^[ \t]*$/,doubleBlankLine:/\n[ \t]*\n[ \t]*$/,blockquoteStart:/^ {0,3}>/,blockquoteSetextReplace:/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,blockquoteSetextReplace2:/^ {0,3}>[ \t]?/gm,listReplaceTabs:/^\t+/,listReplaceNesting:/^ {1,4}(?=( {4})*[^ ])/g,listIsTask:/^\[[ xX]\] /,listReplaceTask:/^\[[ xX]\] +/,anyLine:/\n.*\n/,hrefBrackets:/^<(.*)>$/,tableDelimiter:/[:|]/,tableAlignChars:/^\||\| *$/g,tableRowBlankLine:/\n[ \t]*$/,tableAlignRight:/^ *-+: *$/,tableAlignCenter:/^ *:-+: *$/,tableAlignLeft:/^ *:-+ *$/,startATag:/^<a /i,endATag:/^<\/a>/i,startPreScriptTag:/^<(pre|code|kbd|script)(\s|>)/i,endPreScriptTag:/^<\/(pre|code|kbd|script)(\s|>)/i,startAngleBracket:/^</,endAngleBracket:/>$/,pedanticHrefTitle:/^([^'"]*[^\s])\s+(['"])(.*)\2/,unicodeAlphaNumeric:/[\p{L}\p{N}]/u,escapeTest:/[&<>"']/,escapeReplace:/[&<>"']/g,escapeTestNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,escapeReplaceNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/g,unescapeTest:/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig,caret:/(^|[^\[])\^/g,percentDecode:/%25/g,findPipe:/\|/g,splitPipe:/ \|/,slashPipe:/\\\|/g,carriageReturn:/\r\n|\r/g,spaceLine:/^ +$/gm,notSpaceStart:/^\S*/,endingNewline:/\n$/,listItemRegex:e=>new RegExp(`^( {0,3}${e})((?:[	 ][^\\n]*)?(?:\\n|$))`),nextBulletRegex:e=>new RegExp(`^ {0,${Math.min(3,e-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),hrRegex:e=>new RegExp(`^ {0,${Math.min(3,e-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),fencesBeginRegex:e=>new RegExp(`^ {0,${Math.min(3,e-1)}}(?:\`\`\`|~~~)`),headingBeginRegex:e=>new RegExp(`^ {0,${Math.min(3,e-1)}}#`),htmlBeginRegex:e=>new RegExp(`^ {0,${Math.min(3,e-1)}}<(?:[a-z].*>|!--)`,"i")},_gt=/^(?:[ \t]*(?:\n|$))+/,bgt=/^((?: {4}| {0,3}\t)[^\n]+(?:\n(?:[ \t]*(?:\n|$))*)?)+/,xgt=/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,ku=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,Sgt=/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,b_=/(?:[*+-]|\d{1,9}[.)])/,nR=/^(?!bull |blockCode|fences|blockquote|heading|html|table)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html|table))+?)\n {0,3}(=+|-+) *(?:\n+|$)/,iR=Ue(nR).replace(/bull/g,b_).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/\|table/g,"").getRegex(),wgt=Ue(nR).replace(/bull/g,b_).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/table/g,/ {0,3}\|?(?:[:\- ]*\|)+[\:\- ]*\n/).getRegex(),x_=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,Cgt=/^[^\n]+/,S_=/(?!\s*\])(?:\\.|[^\[\]\\])+/,Tgt=Ue(/^ {0,3}\[(label)\]: *(?:\n[ \t]*)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n[ \t]*)?| *\n[ \t]*)(title))? *(?:\n+|$)/).replace("label",S_).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),Agt=Ue(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,b_).getRegex(),Qf="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",w_=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,kgt=Ue("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$))","i").replace("comment",w_).replace("tag",Qf).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),oR=Ue(x_).replace("hr",ku).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Qf).getRegex(),Dgt=Ue(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",oR).getRegex(),C_={blockquote:Dgt,code:bgt,def:Tgt,fences:xgt,heading:Sgt,hr:ku,html:kgt,lheading:iR,list:Agt,newline:_gt,paragraph:oR,table:bc,text:Cgt},hC=Ue("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",ku).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code","(?: {4}| {0,3}	)[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Qf).getRegex(),Lgt={...C_,lheading:wgt,table:hC,paragraph:Ue(x_).replace("hr",ku).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",hC).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Qf).getRegex()},Igt={...C_,html:Ue(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",w_).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:bc,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:Ue(x_).replace("hr",ku).replace("heading",` *#{1,6} *[^
]`).replace("lheading",iR).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},Mgt=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,Egt=/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,sR=/^( {2,}|\\)\n(?!\s*$)/,Rgt=/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,tp=/[\p{P}\p{S}]/u,T_=/[\s\p{P}\p{S}]/u,lR=/[^\s\p{P}\p{S}]/u,Pgt=Ue(/^((?![*_])punctSpace)/,"u").replace(/punctSpace/g,T_).getRegex(),cR=/(?!~)[\p{P}\p{S}]/u,Bgt=/(?!~)[\s\p{P}\p{S}]/u,Ogt=/(?:[^\s\p{P}\p{S}]|~)/u,Ngt=/\[[^[\]]*?\]\((?:\\.|[^\\\(\)]|\((?:\\.|[^\\\(\)])*\))*\)|`[^`]*?`|<[^<>]*?>/g,uR=/^(?:\*+(?:((?!\*)punct)|[^\s*]))|^_+(?:((?!_)punct)|([^\s_]))/,$gt=Ue(uR,"u").replace(/punct/g,tp).getRegex(),Fgt=Ue(uR,"u").replace(/punct/g,cR).getRegex(),hR="^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)punct(\\*+)(?=[\\s]|$)|notPunctSpace(\\*+)(?!\\*)(?=punctSpace|$)|(?!\\*)punctSpace(\\*+)(?=notPunctSpace)|[\\s](\\*+)(?!\\*)(?=punct)|(?!\\*)punct(\\*+)(?!\\*)(?=punct)|notPunctSpace(\\*+)(?=notPunctSpace)",zgt=Ue(hR,"gu").replace(/notPunctSpace/g,lR).replace(/punctSpace/g,T_).replace(/punct/g,tp).getRegex(),Vgt=Ue(hR,"gu").replace(/notPunctSpace/g,Ogt).replace(/punctSpace/g,Bgt).replace(/punct/g,cR).getRegex(),Ggt=Ue("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)punct(_+)(?=[\\s]|$)|notPunctSpace(_+)(?!_)(?=punctSpace|$)|(?!_)punctSpace(_+)(?=notPunctSpace)|[\\s](_+)(?!_)(?=punct)|(?!_)punct(_+)(?!_)(?=punct)","gu").replace(/notPunctSpace/g,lR).replace(/punctSpace/g,T_).replace(/punct/g,tp).getRegex(),Hgt=Ue(/\\(punct)/,"gu").replace(/punct/g,tp).getRegex(),Wgt=Ue(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),qgt=Ue(w_).replace("(?:-->|$)","-->").getRegex(),Ugt=Ue("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",qgt).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),qd=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,jgt=Ue(/^!?\[(label)\]\(\s*(href)(?:(?:[ \t]*(?:\n[ \t]*)?)(title))?\s*\)/).replace("label",qd).replace("href",/<(?:\\.|[^\n<>\\])+>|[^ \t\n\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),dR=Ue(/^!?\[(label)\]\[(ref)\]/).replace("label",qd).replace("ref",S_).getRegex(),fR=Ue(/^!?\[(ref)\](?:\[\])?/).replace("ref",S_).getRegex(),Ygt=Ue("reflink|nolink(?!\\()","g").replace("reflink",dR).replace("nolink",fR).getRegex(),A_={_backpedal:bc,anyPunctuation:Hgt,autolink:Wgt,blockSkip:Ngt,br:sR,code:Egt,del:bc,emStrongLDelim:$gt,emStrongRDelimAst:zgt,emStrongRDelimUnd:Ggt,escape:Mgt,link:jgt,nolink:fR,punctuation:Pgt,reflink:dR,reflinkSearch:Ygt,tag:Ugt,text:Rgt,url:bc},Xgt={...A_,link:Ue(/^!?\[(label)\]\((.*?)\)/).replace("label",qd).getRegex(),reflink:Ue(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",qd).getRegex()},Um={...A_,emStrongRDelimAst:Vgt,emStrongLDelim:Fgt,url:Ue(/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,"i").replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])((?:\\.|[^\\])*?(?:\\.|[^\s~\\]))\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/},Zgt={...Um,br:Ue(sR).replace("{2,}","*").getRegex(),text:Ue(Um.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},uh={normal:C_,gfm:Lgt,pedantic:Igt},Vl={normal:A_,gfm:Um,breaks:Zgt,pedantic:Xgt},Kgt={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},dC=e=>Kgt[e];function hn(e,t){if(t){if(rr.escapeTest.test(e))return e.replace(rr.escapeReplace,dC)}else if(rr.escapeTestNoEncode.test(e))return e.replace(rr.escapeReplaceNoEncode,dC);return e}function fC(e){try{e=encodeURI(e).replace(rr.percentDecode,"%")}catch{return null}return e}function pC(e,t){var i;const a=e.replace(rr.findPipe,(o,s,l)=>{let c=!1,u=s;for(;--u>=0&&l[u]==="\\";)c=!c;return c?"|":" |"}),r=a.split(rr.splitPipe);let n=0;if(r[0].trim()||r.shift(),r.length>0&&!((i=r.at(-1))!=null&&i.trim())&&r.pop(),t)if(r.length>t)r.splice(t);else for(;r.length<t;)r.push("");for(;n<r.length;n++)r[n]=r[n].trim().replace(rr.slashPipe,"|");return r}function Gl(e,t,a){const r=e.length;if(r===0)return"";let n=0;for(;n<r&&e.charAt(r-n-1)===t;)n++;return e.slice(0,r-n)}function Jgt(e,t){if(e.indexOf(t[1])===-1)return-1;let a=0;for(let r=0;r<e.length;r++)if(e[r]==="\\")r++;else if(e[r]===t[0])a++;else if(e[r]===t[1]&&(a--,a<0))return r;return a>0?-2:-1}function gC(e,t,a,r,n){const i=t.href,o=t.title||null,s=e[1].replace(n.other.outputLinkReplace,"$1");r.state.inLink=!0;const l={type:e[0].charAt(0)==="!"?"image":"link",raw:a,href:i,title:o,text:s,tokens:r.inlineTokens(s)};return r.state.inLink=!1,l}function Qgt(e,t,a){const r=e.match(a.other.indentCodeCompensation);if(r===null)return t;const n=r[1];return t.split(`
`).map(i=>{const o=i.match(a.other.beginningSpace);if(o===null)return i;const[s]=o;return s.length>=n.length?i.slice(n.length):i}).join(`
`)}var Ud=class{constructor(e){Ze(this,"options");Ze(this,"rules");Ze(this,"lexer");this.options=e||Wo}space(e){const t=this.rules.block.newline.exec(e);if(t&&t[0].length>0)return{type:"space",raw:t[0]}}code(e){const t=this.rules.block.code.exec(e);if(t){const a=t[0].replace(this.rules.other.codeRemoveIndent,"");return{type:"code",raw:t[0],codeBlockStyle:"indented",text:this.options.pedantic?a:Gl(a,`
`)}}}fences(e){const t=this.rules.block.fences.exec(e);if(t){const a=t[0],r=Qgt(a,t[3]||"",this.rules);return{type:"code",raw:a,lang:t[2]?t[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):t[2],text:r}}}heading(e){const t=this.rules.block.heading.exec(e);if(t){let a=t[2].trim();if(this.rules.other.endingHash.test(a)){const r=Gl(a,"#");(this.options.pedantic||!r||this.rules.other.endingSpaceChar.test(r))&&(a=r.trim())}return{type:"heading",raw:t[0],depth:t[1].length,text:a,tokens:this.lexer.inline(a)}}}hr(e){const t=this.rules.block.hr.exec(e);if(t)return{type:"hr",raw:Gl(t[0],`
`)}}blockquote(e){const t=this.rules.block.blockquote.exec(e);if(t){let a=Gl(t[0],`
`).split(`
`),r="",n="";const i=[];for(;a.length>0;){let o=!1;const s=[];let l;for(l=0;l<a.length;l++)if(this.rules.other.blockquoteStart.test(a[l]))s.push(a[l]),o=!0;else if(!o)s.push(a[l]);else break;a=a.slice(l);const c=s.join(`
`),u=c.replace(this.rules.other.blockquoteSetextReplace,`
    $1`).replace(this.rules.other.blockquoteSetextReplace2,"");r=r?`${r}
${c}`:c,n=n?`${n}
${u}`:u;const h=this.lexer.state.top;if(this.lexer.state.top=!0,this.lexer.blockTokens(u,i,!0),this.lexer.state.top=h,a.length===0)break;const d=i.at(-1);if((d==null?void 0:d.type)==="code")break;if((d==null?void 0:d.type)==="blockquote"){const f=d,p=f.raw+`
`+a.join(`
`),g=this.blockquote(p);i[i.length-1]=g,r=r.substring(0,r.length-f.raw.length)+g.raw,n=n.substring(0,n.length-f.text.length)+g.text;break}else if((d==null?void 0:d.type)==="list"){const f=d,p=f.raw+`
`+a.join(`
`),g=this.list(p);i[i.length-1]=g,r=r.substring(0,r.length-d.raw.length)+g.raw,n=n.substring(0,n.length-f.raw.length)+g.raw,a=p.substring(i.at(-1).raw.length).split(`
`);continue}}return{type:"blockquote",raw:r,tokens:i,text:n}}}list(e){let t=this.rules.block.list.exec(e);if(t){let a=t[1].trim();const r=a.length>1,n={type:"list",raw:"",ordered:r,start:r?+a.slice(0,-1):"",loose:!1,items:[]};a=r?`\\d{1,9}\\${a.slice(-1)}`:`\\${a}`,this.options.pedantic&&(a=r?a:"[*+-]");const i=this.rules.other.listItemRegex(a);let o=!1;for(;e;){let l=!1,c="",u="";if(!(t=i.exec(e))||this.rules.block.hr.test(e))break;c=t[0],e=e.substring(c.length);let h=t[2].split(`
`,1)[0].replace(this.rules.other.listReplaceTabs,_=>" ".repeat(3*_.length)),d=e.split(`
`,1)[0],f=!h.trim(),p=0;if(this.options.pedantic?(p=2,u=h.trimStart()):f?p=t[1].length+1:(p=t[2].search(this.rules.other.nonSpaceChar),p=p>4?1:p,u=h.slice(p),p+=t[1].length),f&&this.rules.other.blankLine.test(d)&&(c+=d+`
`,e=e.substring(d.length+1),l=!0),!l){const _=this.rules.other.nextBulletRegex(p),y=this.rules.other.hrRegex(p),b=this.rules.other.fencesBeginRegex(p),w=this.rules.other.headingBeginRegex(p),T=this.rules.other.htmlBeginRegex(p);for(;e;){const C=e.split(`
`,1)[0];let A;if(d=C,this.options.pedantic?(d=d.replace(this.rules.other.listReplaceNesting,"  "),A=d):A=d.replace(this.rules.other.tabCharGlobal,"    "),b.test(d)||w.test(d)||T.test(d)||_.test(d)||y.test(d))break;if(A.search(this.rules.other.nonSpaceChar)>=p||!d.trim())u+=`
`+A.slice(p);else{if(f||h.replace(this.rules.other.tabCharGlobal,"    ").search(this.rules.other.nonSpaceChar)>=4||b.test(h)||w.test(h)||y.test(h))break;u+=`
`+d}!f&&!d.trim()&&(f=!0),c+=C+`
`,e=e.substring(C.length+1),h=A.slice(p)}}n.loose||(o?n.loose=!0:this.rules.other.doubleBlankLine.test(c)&&(o=!0));let g=null,v;this.options.gfm&&(g=this.rules.other.listIsTask.exec(u),g&&(v=g[0]!=="[ ] ",u=u.replace(this.rules.other.listReplaceTask,""))),n.items.push({type:"list_item",raw:c,task:!!g,checked:v,loose:!1,text:u,tokens:[]}),n.raw+=c}const s=n.items.at(-1);if(s)s.raw=s.raw.trimEnd(),s.text=s.text.trimEnd();else return;n.raw=n.raw.trimEnd();for(let l=0;l<n.items.length;l++)if(this.lexer.state.top=!1,n.items[l].tokens=this.lexer.blockTokens(n.items[l].text,[]),!n.loose){const c=n.items[l].tokens.filter(h=>h.type==="space"),u=c.length>0&&c.some(h=>this.rules.other.anyLine.test(h.raw));n.loose=u}if(n.loose)for(let l=0;l<n.items.length;l++)n.items[l].loose=!0;return n}}html(e){const t=this.rules.block.html.exec(e);if(t)return{type:"html",block:!0,raw:t[0],pre:t[1]==="pre"||t[1]==="script"||t[1]==="style",text:t[0]}}def(e){const t=this.rules.block.def.exec(e);if(t){const a=t[1].toLowerCase().replace(this.rules.other.multipleSpaceGlobal," "),r=t[2]?t[2].replace(this.rules.other.hrefBrackets,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",n=t[3]?t[3].substring(1,t[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):t[3];return{type:"def",tag:a,raw:t[0],href:r,title:n}}}table(e){var o;const t=this.rules.block.table.exec(e);if(!t||!this.rules.other.tableDelimiter.test(t[2]))return;const a=pC(t[1]),r=t[2].replace(this.rules.other.tableAlignChars,"").split("|"),n=(o=t[3])!=null&&o.trim()?t[3].replace(this.rules.other.tableRowBlankLine,"").split(`
`):[],i={type:"table",raw:t[0],header:[],align:[],rows:[]};if(a.length===r.length){for(const s of r)this.rules.other.tableAlignRight.test(s)?i.align.push("right"):this.rules.other.tableAlignCenter.test(s)?i.align.push("center"):this.rules.other.tableAlignLeft.test(s)?i.align.push("left"):i.align.push(null);for(let s=0;s<a.length;s++)i.header.push({text:a[s],tokens:this.lexer.inline(a[s]),header:!0,align:i.align[s]});for(const s of n)i.rows.push(pC(s,i.header.length).map((l,c)=>({text:l,tokens:this.lexer.inline(l),header:!1,align:i.align[c]})));return i}}lheading(e){const t=this.rules.block.lheading.exec(e);if(t)return{type:"heading",raw:t[0],depth:t[2].charAt(0)==="="?1:2,text:t[1],tokens:this.lexer.inline(t[1])}}paragraph(e){const t=this.rules.block.paragraph.exec(e);if(t){const a=t[1].charAt(t[1].length-1)===`
`?t[1].slice(0,-1):t[1];return{type:"paragraph",raw:t[0],text:a,tokens:this.lexer.inline(a)}}}text(e){const t=this.rules.block.text.exec(e);if(t)return{type:"text",raw:t[0],text:t[0],tokens:this.lexer.inline(t[0])}}escape(e){const t=this.rules.inline.escape.exec(e);if(t)return{type:"escape",raw:t[0],text:t[1]}}tag(e){const t=this.rules.inline.tag.exec(e);if(t)return!this.lexer.state.inLink&&this.rules.other.startATag.test(t[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&this.rules.other.endATag.test(t[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&this.rules.other.startPreScriptTag.test(t[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&this.rules.other.endPreScriptTag.test(t[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:t[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:t[0]}}link(e){const t=this.rules.inline.link.exec(e);if(t){const a=t[2].trim();if(!this.options.pedantic&&this.rules.other.startAngleBracket.test(a)){if(!this.rules.other.endAngleBracket.test(a))return;const i=Gl(a.slice(0,-1),"\\");if((a.length-i.length)%2===0)return}else{const i=Jgt(t[2],"()");if(i===-2)return;if(i>-1){const s=(t[0].indexOf("!")===0?5:4)+t[1].length+i;t[2]=t[2].substring(0,i),t[0]=t[0].substring(0,s).trim(),t[3]=""}}let r=t[2],n="";if(this.options.pedantic){const i=this.rules.other.pedanticHrefTitle.exec(r);i&&(r=i[1],n=i[3])}else n=t[3]?t[3].slice(1,-1):"";return r=r.trim(),this.rules.other.startAngleBracket.test(r)&&(this.options.pedantic&&!this.rules.other.endAngleBracket.test(a)?r=r.slice(1):r=r.slice(1,-1)),gC(t,{href:r&&r.replace(this.rules.inline.anyPunctuation,"$1"),title:n&&n.replace(this.rules.inline.anyPunctuation,"$1")},t[0],this.lexer,this.rules)}}reflink(e,t){let a;if((a=this.rules.inline.reflink.exec(e))||(a=this.rules.inline.nolink.exec(e))){const r=(a[2]||a[1]).replace(this.rules.other.multipleSpaceGlobal," "),n=t[r.toLowerCase()];if(!n){const i=a[0].charAt(0);return{type:"text",raw:i,text:i}}return gC(a,n,a[0],this.lexer,this.rules)}}emStrong(e,t,a=""){let r=this.rules.inline.emStrongLDelim.exec(e);if(!r||r[3]&&a.match(this.rules.other.unicodeAlphaNumeric))return;if(!(r[1]||r[2]||"")||!a||this.rules.inline.punctuation.exec(a)){const i=[...r[0]].length-1;let o,s,l=i,c=0;const u=r[0][0]==="*"?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(u.lastIndex=0,t=t.slice(-1*e.length+i);(r=u.exec(t))!=null;){if(o=r[1]||r[2]||r[3]||r[4]||r[5]||r[6],!o)continue;if(s=[...o].length,r[3]||r[4]){l+=s;continue}else if((r[5]||r[6])&&i%3&&!((i+s)%3)){c+=s;continue}if(l-=s,l>0)continue;s=Math.min(s,s+l+c);const h=[...r[0]][0].length,d=e.slice(0,i+r.index+h+s);if(Math.min(i,s)%2){const p=d.slice(1,-1);return{type:"em",raw:d,text:p,tokens:this.lexer.inlineTokens(p)}}const f=d.slice(2,-2);return{type:"strong",raw:d,text:f,tokens:this.lexer.inlineTokens(f)}}}}codespan(e){const t=this.rules.inline.code.exec(e);if(t){let a=t[2].replace(this.rules.other.newLineCharGlobal," ");const r=this.rules.other.nonSpaceChar.test(a),n=this.rules.other.startingSpaceChar.test(a)&&this.rules.other.endingSpaceChar.test(a);return r&&n&&(a=a.substring(1,a.length-1)),{type:"codespan",raw:t[0],text:a}}}br(e){const t=this.rules.inline.br.exec(e);if(t)return{type:"br",raw:t[0]}}del(e){const t=this.rules.inline.del.exec(e);if(t)return{type:"del",raw:t[0],text:t[2],tokens:this.lexer.inlineTokens(t[2])}}autolink(e){const t=this.rules.inline.autolink.exec(e);if(t){let a,r;return t[2]==="@"?(a=t[1],r="mailto:"+a):(a=t[1],r=a),{type:"link",raw:t[0],text:a,href:r,tokens:[{type:"text",raw:a,text:a}]}}}url(e){var a;let t;if(t=this.rules.inline.url.exec(e)){let r,n;if(t[2]==="@")r=t[0],n="mailto:"+r;else{let i;do i=t[0],t[0]=((a=this.rules.inline._backpedal.exec(t[0]))==null?void 0:a[0])??"";while(i!==t[0]);r=t[0],t[1]==="www."?n="http://"+t[0]:n=t[0]}return{type:"link",raw:t[0],text:r,href:n,tokens:[{type:"text",raw:r,text:r}]}}}inlineText(e){const t=this.rules.inline.text.exec(e);if(t){const a=this.lexer.state.inRawBlock;return{type:"text",raw:t[0],text:t[0],escaped:a}}}},Gn=class jm{constructor(t){Ze(this,"tokens");Ze(this,"options");Ze(this,"state");Ze(this,"tokenizer");Ze(this,"inlineQueue");this.tokens=[],this.tokens.links=Object.create(null),this.options=t||Wo,this.options.tokenizer=this.options.tokenizer||new Ud,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};const a={other:rr,block:uh.normal,inline:Vl.normal};this.options.pedantic?(a.block=uh.pedantic,a.inline=Vl.pedantic):this.options.gfm&&(a.block=uh.gfm,this.options.breaks?a.inline=Vl.breaks:a.inline=Vl.gfm),this.tokenizer.rules=a}static get rules(){return{block:uh,inline:Vl}}static lex(t,a){return new jm(a).lex(t)}static lexInline(t,a){return new jm(a).inlineTokens(t)}lex(t){t=t.replace(rr.carriageReturn,`
`),this.blockTokens(t,this.tokens);for(let a=0;a<this.inlineQueue.length;a++){const r=this.inlineQueue[a];this.inlineTokens(r.src,r.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(t,a=[],r=!1){var n,i,o;for(this.options.pedantic&&(t=t.replace(rr.tabCharGlobal,"    ").replace(rr.spaceLine,""));t;){let s;if((i=(n=this.options.extensions)==null?void 0:n.block)!=null&&i.some(c=>(s=c.call({lexer:this},t,a))?(t=t.substring(s.raw.length),a.push(s),!0):!1))continue;if(s=this.tokenizer.space(t)){t=t.substring(s.raw.length);const c=a.at(-1);s.raw.length===1&&c!==void 0?c.raw+=`
`:a.push(s);continue}if(s=this.tokenizer.code(t)){t=t.substring(s.raw.length);const c=a.at(-1);(c==null?void 0:c.type)==="paragraph"||(c==null?void 0:c.type)==="text"?(c.raw+=`
`+s.raw,c.text+=`
`+s.text,this.inlineQueue.at(-1).src=c.text):a.push(s);continue}if(s=this.tokenizer.fences(t)){t=t.substring(s.raw.length),a.push(s);continue}if(s=this.tokenizer.heading(t)){t=t.substring(s.raw.length),a.push(s);continue}if(s=this.tokenizer.hr(t)){t=t.substring(s.raw.length),a.push(s);continue}if(s=this.tokenizer.blockquote(t)){t=t.substring(s.raw.length),a.push(s);continue}if(s=this.tokenizer.list(t)){t=t.substring(s.raw.length),a.push(s);continue}if(s=this.tokenizer.html(t)){t=t.substring(s.raw.length),a.push(s);continue}if(s=this.tokenizer.def(t)){t=t.substring(s.raw.length);const c=a.at(-1);(c==null?void 0:c.type)==="paragraph"||(c==null?void 0:c.type)==="text"?(c.raw+=`
`+s.raw,c.text+=`
`+s.raw,this.inlineQueue.at(-1).src=c.text):this.tokens.links[s.tag]||(this.tokens.links[s.tag]={href:s.href,title:s.title});continue}if(s=this.tokenizer.table(t)){t=t.substring(s.raw.length),a.push(s);continue}if(s=this.tokenizer.lheading(t)){t=t.substring(s.raw.length),a.push(s);continue}let l=t;if((o=this.options.extensions)!=null&&o.startBlock){let c=1/0;const u=t.slice(1);let h;this.options.extensions.startBlock.forEach(d=>{h=d.call({lexer:this},u),typeof h=="number"&&h>=0&&(c=Math.min(c,h))}),c<1/0&&c>=0&&(l=t.substring(0,c+1))}if(this.state.top&&(s=this.tokenizer.paragraph(l))){const c=a.at(-1);r&&(c==null?void 0:c.type)==="paragraph"?(c.raw+=`
`+s.raw,c.text+=`
`+s.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=c.text):a.push(s),r=l.length!==t.length,t=t.substring(s.raw.length);continue}if(s=this.tokenizer.text(t)){t=t.substring(s.raw.length);const c=a.at(-1);(c==null?void 0:c.type)==="text"?(c.raw+=`
`+s.raw,c.text+=`
`+s.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=c.text):a.push(s);continue}if(t){const c="Infinite loop on byte: "+t.charCodeAt(0);if(this.options.silent){console.error(c);break}else throw new Error(c)}}return this.state.top=!0,a}inline(t,a=[]){return this.inlineQueue.push({src:t,tokens:a}),a}inlineTokens(t,a=[]){var s,l,c;let r=t,n=null;if(this.tokens.links){const u=Object.keys(this.tokens.links);if(u.length>0)for(;(n=this.tokenizer.rules.inline.reflinkSearch.exec(r))!=null;)u.includes(n[0].slice(n[0].lastIndexOf("[")+1,-1))&&(r=r.slice(0,n.index)+"["+"a".repeat(n[0].length-2)+"]"+r.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(n=this.tokenizer.rules.inline.anyPunctuation.exec(r))!=null;)r=r.slice(0,n.index)+"++"+r.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);for(;(n=this.tokenizer.rules.inline.blockSkip.exec(r))!=null;)r=r.slice(0,n.index)+"["+"a".repeat(n[0].length-2)+"]"+r.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);let i=!1,o="";for(;t;){i||(o=""),i=!1;let u;if((l=(s=this.options.extensions)==null?void 0:s.inline)!=null&&l.some(d=>(u=d.call({lexer:this},t,a))?(t=t.substring(u.raw.length),a.push(u),!0):!1))continue;if(u=this.tokenizer.escape(t)){t=t.substring(u.raw.length),a.push(u);continue}if(u=this.tokenizer.tag(t)){t=t.substring(u.raw.length),a.push(u);continue}if(u=this.tokenizer.link(t)){t=t.substring(u.raw.length),a.push(u);continue}if(u=this.tokenizer.reflink(t,this.tokens.links)){t=t.substring(u.raw.length);const d=a.at(-1);u.type==="text"&&(d==null?void 0:d.type)==="text"?(d.raw+=u.raw,d.text+=u.text):a.push(u);continue}if(u=this.tokenizer.emStrong(t,r,o)){t=t.substring(u.raw.length),a.push(u);continue}if(u=this.tokenizer.codespan(t)){t=t.substring(u.raw.length),a.push(u);continue}if(u=this.tokenizer.br(t)){t=t.substring(u.raw.length),a.push(u);continue}if(u=this.tokenizer.del(t)){t=t.substring(u.raw.length),a.push(u);continue}if(u=this.tokenizer.autolink(t)){t=t.substring(u.raw.length),a.push(u);continue}if(!this.state.inLink&&(u=this.tokenizer.url(t))){t=t.substring(u.raw.length),a.push(u);continue}let h=t;if((c=this.options.extensions)!=null&&c.startInline){let d=1/0;const f=t.slice(1);let p;this.options.extensions.startInline.forEach(g=>{p=g.call({lexer:this},f),typeof p=="number"&&p>=0&&(d=Math.min(d,p))}),d<1/0&&d>=0&&(h=t.substring(0,d+1))}if(u=this.tokenizer.inlineText(h)){t=t.substring(u.raw.length),u.raw.slice(-1)!=="_"&&(o=u.raw.slice(-1)),i=!0;const d=a.at(-1);(d==null?void 0:d.type)==="text"?(d.raw+=u.raw,d.text+=u.text):a.push(u);continue}if(t){const d="Infinite loop on byte: "+t.charCodeAt(0);if(this.options.silent){console.error(d);break}else throw new Error(d)}}return a}},jd=class{constructor(e){Ze(this,"options");Ze(this,"parser");this.options=e||Wo}space(e){return""}code({text:e,lang:t,escaped:a}){var i;const r=(i=(t||"").match(rr.notSpaceStart))==null?void 0:i[0],n=e.replace(rr.endingNewline,"")+`
`;return r?'<pre><code class="language-'+hn(r)+'">'+(a?n:hn(n,!0))+`</code></pre>
`:"<pre><code>"+(a?n:hn(n,!0))+`</code></pre>
`}blockquote({tokens:e}){return`<blockquote>
${this.parser.parse(e)}</blockquote>
`}html({text:e}){return e}heading({tokens:e,depth:t}){return`<h${t}>${this.parser.parseInline(e)}</h${t}>
`}hr(e){return`<hr>
`}list(e){const t=e.ordered,a=e.start;let r="";for(let o=0;o<e.items.length;o++){const s=e.items[o];r+=this.listitem(s)}const n=t?"ol":"ul",i=t&&a!==1?' start="'+a+'"':"";return"<"+n+i+`>
`+r+"</"+n+`>
`}listitem(e){var a;let t="";if(e.task){const r=this.checkbox({checked:!!e.checked});e.loose?((a=e.tokens[0])==null?void 0:a.type)==="paragraph"?(e.tokens[0].text=r+" "+e.tokens[0].text,e.tokens[0].tokens&&e.tokens[0].tokens.length>0&&e.tokens[0].tokens[0].type==="text"&&(e.tokens[0].tokens[0].text=r+" "+hn(e.tokens[0].tokens[0].text),e.tokens[0].tokens[0].escaped=!0)):e.tokens.unshift({type:"text",raw:r+" ",text:r+" ",escaped:!0}):t+=r+" "}return t+=this.parser.parse(e.tokens,!!e.loose),`<li>${t}</li>
`}checkbox({checked:e}){return"<input "+(e?'checked="" ':"")+'disabled="" type="checkbox">'}paragraph({tokens:e}){return`<p>${this.parser.parseInline(e)}</p>
`}table(e){let t="",a="";for(let n=0;n<e.header.length;n++)a+=this.tablecell(e.header[n]);t+=this.tablerow({text:a});let r="";for(let n=0;n<e.rows.length;n++){const i=e.rows[n];a="";for(let o=0;o<i.length;o++)a+=this.tablecell(i[o]);r+=this.tablerow({text:a})}return r&&(r=`<tbody>${r}</tbody>`),`<table>
<thead>
`+t+`</thead>
`+r+`</table>
`}tablerow({text:e}){return`<tr>
${e}</tr>
`}tablecell(e){const t=this.parser.parseInline(e.tokens),a=e.header?"th":"td";return(e.align?`<${a} align="${e.align}">`:`<${a}>`)+t+`</${a}>
`}strong({tokens:e}){return`<strong>${this.parser.parseInline(e)}</strong>`}em({tokens:e}){return`<em>${this.parser.parseInline(e)}</em>`}codespan({text:e}){return`<code>${hn(e,!0)}</code>`}br(e){return"<br>"}del({tokens:e}){return`<del>${this.parser.parseInline(e)}</del>`}link({href:e,title:t,tokens:a}){const r=this.parser.parseInline(a),n=fC(e);if(n===null)return r;e=n;let i='<a href="'+e+'"';return t&&(i+=' title="'+hn(t)+'"'),i+=">"+r+"</a>",i}image({href:e,title:t,text:a,tokens:r}){r&&(a=this.parser.parseInline(r,this.parser.textRenderer));const n=fC(e);if(n===null)return hn(a);e=n;let i=`<img src="${e}" alt="${a}"`;return t&&(i+=` title="${hn(t)}"`),i+=">",i}text(e){return"tokens"in e&&e.tokens?this.parser.parseInline(e.tokens):"escaped"in e&&e.escaped?e.text:hn(e.text)}},k_=class{strong({text:e}){return e}em({text:e}){return e}codespan({text:e}){return e}del({text:e}){return e}html({text:e}){return e}text({text:e}){return e}link({text:e}){return""+e}image({text:e}){return""+e}br(){return""}},Hn=class Ym{constructor(t){Ze(this,"options");Ze(this,"renderer");Ze(this,"textRenderer");this.options=t||Wo,this.options.renderer=this.options.renderer||new jd,this.renderer=this.options.renderer,this.renderer.options=this.options,this.renderer.parser=this,this.textRenderer=new k_}static parse(t,a){return new Ym(a).parse(t)}static parseInline(t,a){return new Ym(a).parseInline(t)}parse(t,a=!0){var n,i;let r="";for(let o=0;o<t.length;o++){const s=t[o];if((i=(n=this.options.extensions)==null?void 0:n.renderers)!=null&&i[s.type]){const c=s,u=this.options.extensions.renderers[c.type].call({parser:this},c);if(u!==!1||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(c.type)){r+=u||"";continue}}const l=s;switch(l.type){case"space":{r+=this.renderer.space(l);continue}case"hr":{r+=this.renderer.hr(l);continue}case"heading":{r+=this.renderer.heading(l);continue}case"code":{r+=this.renderer.code(l);continue}case"table":{r+=this.renderer.table(l);continue}case"blockquote":{r+=this.renderer.blockquote(l);continue}case"list":{r+=this.renderer.list(l);continue}case"html":{r+=this.renderer.html(l);continue}case"paragraph":{r+=this.renderer.paragraph(l);continue}case"text":{let c=l,u=this.renderer.text(c);for(;o+1<t.length&&t[o+1].type==="text";)c=t[++o],u+=`
`+this.renderer.text(c);a?r+=this.renderer.paragraph({type:"paragraph",raw:u,text:u,tokens:[{type:"text",raw:u,text:u,escaped:!0}]}):r+=u;continue}default:{const c='Token with "'+l.type+'" type was not found.';if(this.options.silent)return console.error(c),"";throw new Error(c)}}}return r}parseInline(t,a=this.renderer){var n,i;let r="";for(let o=0;o<t.length;o++){const s=t[o];if((i=(n=this.options.extensions)==null?void 0:n.renderers)!=null&&i[s.type]){const c=this.options.extensions.renderers[s.type].call({parser:this},s);if(c!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(s.type)){r+=c||"";continue}}const l=s;switch(l.type){case"escape":{r+=a.text(l);break}case"html":{r+=a.html(l);break}case"link":{r+=a.link(l);break}case"image":{r+=a.image(l);break}case"strong":{r+=a.strong(l);break}case"em":{r+=a.em(l);break}case"codespan":{r+=a.codespan(l);break}case"br":{r+=a.br(l);break}case"del":{r+=a.del(l);break}case"text":{r+=a.text(l);break}default:{const c='Token with "'+l.type+'" type was not found.';if(this.options.silent)return console.error(c),"";throw new Error(c)}}}return r}},rv,Nh=(rv=class{constructor(e){Ze(this,"options");Ze(this,"block");this.options=e||Wo}preprocess(e){return e}postprocess(e){return e}processAllTokens(e){return e}provideLexer(){return this.block?Gn.lex:Gn.lexInline}provideParser(){return this.block?Hn.parse:Hn.parseInline}},Ze(rv,"passThroughHooks",new Set(["preprocess","postprocess","processAllTokens"])),rv),tvt=class{constructor(...e){Ze(this,"defaults",__());Ze(this,"options",this.setOptions);Ze(this,"parse",this.parseMarkdown(!0));Ze(this,"parseInline",this.parseMarkdown(!1));Ze(this,"Parser",Hn);Ze(this,"Renderer",jd);Ze(this,"TextRenderer",k_);Ze(this,"Lexer",Gn);Ze(this,"Tokenizer",Ud);Ze(this,"Hooks",Nh);this.use(...e)}walkTokens(e,t){var r,n;let a=[];for(const i of e)switch(a=a.concat(t.call(this,i)),i.type){case"table":{const o=i;for(const s of o.header)a=a.concat(this.walkTokens(s.tokens,t));for(const s of o.rows)for(const l of s)a=a.concat(this.walkTokens(l.tokens,t));break}case"list":{const o=i;a=a.concat(this.walkTokens(o.items,t));break}default:{const o=i;(n=(r=this.defaults.extensions)==null?void 0:r.childTokens)!=null&&n[o.type]?this.defaults.extensions.childTokens[o.type].forEach(s=>{const l=o[s].flat(1/0);a=a.concat(this.walkTokens(l,t))}):o.tokens&&(a=a.concat(this.walkTokens(o.tokens,t)))}}return a}use(...e){const t=this.defaults.extensions||{renderers:{},childTokens:{}};return e.forEach(a=>{const r={...a};if(r.async=this.defaults.async||r.async||!1,a.extensions&&(a.extensions.forEach(n=>{if(!n.name)throw new Error("extension name required");if("renderer"in n){const i=t.renderers[n.name];i?t.renderers[n.name]=function(...o){let s=n.renderer.apply(this,o);return s===!1&&(s=i.apply(this,o)),s}:t.renderers[n.name]=n.renderer}if("tokenizer"in n){if(!n.level||n.level!=="block"&&n.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");const i=t[n.level];i?i.unshift(n.tokenizer):t[n.level]=[n.tokenizer],n.start&&(n.level==="block"?t.startBlock?t.startBlock.push(n.start):t.startBlock=[n.start]:n.level==="inline"&&(t.startInline?t.startInline.push(n.start):t.startInline=[n.start]))}"childTokens"in n&&n.childTokens&&(t.childTokens[n.name]=n.childTokens)}),r.extensions=t),a.renderer){const n=this.defaults.renderer||new jd(this.defaults);for(const i in a.renderer){if(!(i in n))throw new Error(`renderer '${i}' does not exist`);if(["options","parser"].includes(i))continue;const o=i,s=a.renderer[o],l=n[o];n[o]=(...c)=>{let u=s.apply(n,c);return u===!1&&(u=l.apply(n,c)),u||""}}r.renderer=n}if(a.tokenizer){const n=this.defaults.tokenizer||new Ud(this.defaults);for(const i in a.tokenizer){if(!(i in n))throw new Error(`tokenizer '${i}' does not exist`);if(["options","rules","lexer"].includes(i))continue;const o=i,s=a.tokenizer[o],l=n[o];n[o]=(...c)=>{let u=s.apply(n,c);return u===!1&&(u=l.apply(n,c)),u}}r.tokenizer=n}if(a.hooks){const n=this.defaults.hooks||new Nh;for(const i in a.hooks){if(!(i in n))throw new Error(`hook '${i}' does not exist`);if(["options","block"].includes(i))continue;const o=i,s=a.hooks[o],l=n[o];Nh.passThroughHooks.has(i)?n[o]=c=>{if(this.defaults.async)return Promise.resolve(s.call(n,c)).then(h=>l.call(n,h));const u=s.call(n,c);return l.call(n,u)}:n[o]=(...c)=>{let u=s.apply(n,c);return u===!1&&(u=l.apply(n,c)),u}}r.hooks=n}if(a.walkTokens){const n=this.defaults.walkTokens,i=a.walkTokens;r.walkTokens=function(o){let s=[];return s.push(i.call(this,o)),n&&(s=s.concat(n.call(this,o))),s}}this.defaults={...this.defaults,...r}}),this}setOptions(e){return this.defaults={...this.defaults,...e},this}lexer(e,t){return Gn.lex(e,t??this.defaults)}parser(e,t){return Hn.parse(e,t??this.defaults)}parseMarkdown(e){return(a,r)=>{const n={...r},i={...this.defaults,...n},o=this.onError(!!i.silent,!!i.async);if(this.defaults.async===!0&&n.async===!1)return o(new Error("marked(): The async option was set to true by an extension. Remove async: false from the parse options object to return a Promise."));if(typeof a>"u"||a===null)return o(new Error("marked(): input parameter is undefined or null"));if(typeof a!="string")return o(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(a)+", string expected"));i.hooks&&(i.hooks.options=i,i.hooks.block=e);const s=i.hooks?i.hooks.provideLexer():e?Gn.lex:Gn.lexInline,l=i.hooks?i.hooks.provideParser():e?Hn.parse:Hn.parseInline;if(i.async)return Promise.resolve(i.hooks?i.hooks.preprocess(a):a).then(c=>s(c,i)).then(c=>i.hooks?i.hooks.processAllTokens(c):c).then(c=>i.walkTokens?Promise.all(this.walkTokens(c,i.walkTokens)).then(()=>c):c).then(c=>l(c,i)).then(c=>i.hooks?i.hooks.postprocess(c):c).catch(o);try{i.hooks&&(a=i.hooks.preprocess(a));let c=s(a,i);i.hooks&&(c=i.hooks.processAllTokens(c)),i.walkTokens&&this.walkTokens(c,i.walkTokens);let u=l(c,i);return i.hooks&&(u=i.hooks.postprocess(u)),u}catch(c){return o(c)}}}onError(e,t){return a=>{if(a.message+=`
Please report this to https://github.com/markedjs/marked.`,e){const r="<p>An error occurred:</p><pre>"+hn(a.message+"",!0)+"</pre>";return t?Promise.resolve(r):r}if(t)return Promise.reject(a);throw a}}},Mo=new tvt;function qe(e,t){return Mo.parse(e,t)}qe.options=qe.setOptions=function(e){return Mo.setOptions(e),qe.defaults=Mo.defaults,rR(qe.defaults),qe};qe.getDefaults=__;qe.defaults=Wo;qe.use=function(...e){return Mo.use(...e),qe.defaults=Mo.defaults,rR(qe.defaults),qe};qe.walkTokens=function(e,t){return Mo.walkTokens(e,t)};qe.parseInline=Mo.parseInline;qe.Parser=Hn;qe.parser=Hn.parse;qe.Renderer=jd;qe.TextRenderer=k_;qe.Lexer=Gn;qe.lexer=Gn.lex;qe.Tokenizer=Ud;qe.Hooks=Nh;qe.parse=qe;qe.options;qe.setOptions;qe.use;qe.walkTokens;qe.parseInline;Hn.parse;Gn.lex;function pR(e){for(var t=[],a=1;a<arguments.length;a++)t[a-1]=arguments[a];var r=Array.from(typeof e=="string"?[e]:e);r[r.length-1]=r[r.length-1].replace(/\r?\n([\t ]*)$/,"");var n=r.reduce(function(s,l){var c=l.match(/\n([\t ]+|(?!\s).)/g);return c?s.concat(c.map(function(u){var h,d;return(d=(h=u.match(/[\t ]/g))===null||h===void 0?void 0:h.length)!==null&&d!==void 0?d:0})):s},[]);if(n.length){var i=new RegExp(`
[	 ]{`+Math.min.apply(Math,n)+"}","g");r=r.map(function(s){return s.replace(i,`
`)})}r[0]=r[0].replace(/^\r?\n/,"");var o=r[0];return t.forEach(function(s,l){var c=o.match(/(?:^|\n)( *)$/),u=c?c[1]:"",h=s;typeof s=="string"&&s.includes(`
`)&&(h=String(s).split(`
`).map(function(d,f){return f===0?d:""+u+d}).join(`
`)),o+=h+r[l+1]}),o}var evt={body:'<g><rect width="80" height="80" style="fill: #087ebf; stroke-width: 0px;"/><text transform="translate(21.16 64.67)" style="fill: #fff; font-family: ArialMT, Arial; font-size: 67.75px;"><tspan x="0" y="0">?</tspan></text></g>',height:80,width:80},Xm=new Map,gR=new Map,avt=I(e=>{for(const t of e){if(!t.name)throw new Error('Invalid icon loader. Must have a "name" property with non-empty string value.');if(It.debug("Registering icon pack:",t.name),"loader"in t)gR.set(t.name,t.loader);else if("icons"in t)Xm.set(t.name,t.icons);else throw It.error("Invalid icon loader:",t),new Error('Invalid icon loader. Must have either "icons" or "loader" property.')}},"registerIconPacks"),vR=I(async(e,t)=>{const a=rgt(e,!0,t!==void 0);if(!a)throw new Error(`Invalid icon name: ${e}`);const r=a.prefix||t;if(!r)throw new Error(`Icon name must contain a prefix: ${e}`);let n=Xm.get(r);if(!n){const o=gR.get(r);if(!o)throw new Error(`Icon set not found: ${a.prefix}`);try{n={...await o(),prefix:r},Xm.set(r,n)}catch(s){throw It.error(s),new Error(`Failed to load icon set: ${a.prefix}`)}}const i=ogt(n,a.name);if(!i)throw new Error(`Icon not found: ${e}`);return i},"getRegisteredIconData"),rvt=I(async e=>{try{return await vR(e),!0}catch{return!1}},"isIconAvailable"),Du=I(async(e,t,a)=>{let r;try{r=await vR(e,t==null?void 0:t.fallbackPrefix)}catch(o){It.error(o),r=evt}const n=fgt(r,t);return ygt(mgt(n.body),{...n.attributes,...a})},"getIconSVG");function mR(e,{markdownAutoWrap:t}){const r=e.replace(/<br\/>/g,`
`).replace(/\n{2,}/g,`
`),n=pR(r);return t===!1?n.replace(/ /g,"&nbsp;"):n}I(mR,"preprocessMarkdown");function yR(e,t={}){const a=mR(e,t),r=qe.lexer(a),n=[[]];let i=0;function o(s,l="normal"){s.type==="text"?s.text.split(`
`).forEach((u,h)=>{h!==0&&(i++,n.push([])),u.split(" ").forEach(d=>{d=d.replace(/&#39;/g,"'"),d&&n[i].push({content:d,type:l})})}):s.type==="strong"||s.type==="em"?s.tokens.forEach(c=>{o(c,s.type)}):s.type==="html"&&n[i].push({content:s.text,type:"normal"})}return I(o,"processNode"),r.forEach(s=>{var l;s.type==="paragraph"?(l=s.tokens)==null||l.forEach(c=>{o(c)}):s.type==="html"&&n[i].push({content:s.text,type:"normal"})}),n}I(yR,"markdownToLines");function _R(e,{markdownAutoWrap:t}={}){const a=qe.lexer(e);function r(n){var i,o,s;return n.type==="text"?t===!1?n.text.replace(/\n */g,"<br/>").replace(/ /g,"&nbsp;"):n.text.replace(/\n */g,"<br/>"):n.type==="strong"?`<strong>${(i=n.tokens)==null?void 0:i.map(r).join("")}</strong>`:n.type==="em"?`<em>${(o=n.tokens)==null?void 0:o.map(r).join("")}</em>`:n.type==="paragraph"?`<p>${(s=n.tokens)==null?void 0:s.map(r).join("")}</p>`:n.type==="space"?"":n.type==="html"?`${n.text}`:n.type==="escape"?n.text:`Unsupported markdown: ${n.type}`}return I(r,"output"),a.map(r).join("")}I(_R,"markdownToHTML");function bR(e){return Intl.Segmenter?[...new Intl.Segmenter().segment(e)].map(t=>t.segment):[...e]}I(bR,"splitTextToChars");function xR(e,t){const a=bR(t.content);return D_(e,[],a,t.type)}I(xR,"splitWordToFitWidth");function D_(e,t,a,r){if(a.length===0)return[{content:t.join(""),type:r},{content:"",type:r}];const[n,...i]=a,o=[...t,n];return e([{content:o.join(""),type:r}])?D_(e,o,i,r):(t.length===0&&n&&(t.push(n),a.shift()),[{content:t.join(""),type:r},{content:a.join(""),type:r}])}I(D_,"splitWordToFitWidthRecursion");function SR(e,t){if(e.some(({content:a})=>a.includes(`
`)))throw new Error("splitLineToFitWidth does not support newlines in the line");return Yd(e,t)}I(SR,"splitLineToFitWidth");function Yd(e,t,a=[],r=[]){if(e.length===0)return r.length>0&&a.push(r),a.length>0?a:[];let n="";e[0].content===" "&&(n=" ",e.shift());const i=e.shift()??{content:" ",type:"normal"},o=[...r];if(n!==""&&o.push({content:n,type:"normal"}),o.push(i),t(o))return Yd(e,t,a,o);if(r.length>0)a.push(r),e.unshift(i);else if(i.content){const[s,l]=xR(t,i);a.push([s]),l.content&&e.unshift(l)}return Yd(e,t,a)}I(Yd,"splitLineToFitWidthRecursion");function Zm(e,t){t&&e.attr("style",t)}I(Zm,"applyStyle");async function wR(e,t,a,r,n=!1){const i=e.append("foreignObject");i.attr("width",`${10*a}px`),i.attr("height",`${10*a}px`);const o=i.append("xhtml:div");let s=t.label;t.label&&Js(t.label)&&(s=await V0(t.label.replace(vl.lineBreakRegex,`
`),He()));const l=t.isNode?"nodeLabel":"edgeLabel",c=o.append("span");c.html(s),Zm(c,t.labelStyle),c.attr("class",`${l} ${r}`),Zm(o,t.labelStyle),o.style("display","table-cell"),o.style("white-space","nowrap"),o.style("line-height","1.5"),o.style("max-width",a+"px"),o.style("text-align","center"),o.attr("xmlns","http://www.w3.org/1999/xhtml"),n&&o.attr("class","labelBkg");let u=o.node().getBoundingClientRect();return u.width===a&&(o.style("display","table"),o.style("white-space","break-spaces"),o.style("width",a+"px"),u=o.node().getBoundingClientRect()),i.node()}I(wR,"addHtmlSpan");function ep(e,t,a){return e.append("tspan").attr("class","text-outer-tspan").attr("x",0).attr("y",t*a-.1+"em").attr("dy",a+"em")}I(ep,"createTspan");function CR(e,t,a){const r=e.append("text"),n=ep(r,1,t);ap(n,a);const i=n.node().getComputedTextLength();return r.remove(),i}I(CR,"computeWidthOfText");function nvt(e,t,a){var o;const r=e.append("text"),n=ep(r,1,t);ap(n,[{content:a,type:"normal"}]);const i=(o=n.node())==null?void 0:o.getBoundingClientRect();return i&&r.remove(),i}I(nvt,"computeDimensionOfText");function TR(e,t,a,r=!1){const i=t.append("g"),o=i.insert("rect").attr("class","background").attr("style","stroke: none"),s=i.append("text").attr("y","-10.1");let l=0;for(const c of a){const u=I(d=>CR(i,1.1,d)<=e,"checkWidth"),h=u(c)?[c]:SR(c,u);for(const d of h){const f=ep(s,l,1.1);ap(f,d),l++}}if(r){const c=s.node().getBBox(),u=2;return o.attr("x",c.x-u).attr("y",c.y-u).attr("width",c.width+2*u).attr("height",c.height+2*u),i.node()}else return s.node()}I(TR,"createFormattedText");function ap(e,t){e.text(""),t.forEach((a,r)=>{const n=e.append("tspan").attr("font-style",a.type==="em"?"italic":"normal").attr("class","text-inner-tspan").attr("font-weight",a.type==="strong"?"bold":"normal");r===0?n.text(a.content):n.text(" "+a.content)})}I(ap,"updateTextContentAndStyles");async function AR(e){const t=[];e.replace(/(fa[bklrs]?):fa-([\w-]+)/g,(r,n,i)=>(t.push((async()=>{const o=`${n}:${i}`;return await rvt(o)?await Du(o,void 0,{class:"label-icon"}):`<i class='${Wf(r).replace(":"," ")}'></i>`})()),r));const a=await Promise.all(t);return e.replace(/(fa[bklrs]?):fa-([\w-]+)/g,()=>a.shift()??"")}I(AR,"replaceIconSubstring");var Gi=I(async(e,t="",{style:a="",isTitle:r=!1,classes:n="",useHtmlLabels:i=!0,isNode:o=!0,width:s=200,addSvgBackground:l=!1}={},c)=>{if(It.debug("XYZ createText",t,a,r,n,i,o,"addSvgBackground: ",l),i){const u=_R(t,c),h=await AR(Ho(u)),d=t.replace(/\\\\/g,"\\"),f={isNode:o,label:Js(t)?d:h,labelStyle:a.replace("fill:","color:")};return await wR(e,f,s,n,l)}else{const u=t.replace(/<br\s*\/?>/g,"<br/>"),h=yR(u.replace("<br>","<br/>"),c),d=TR(s,e,h,t?l:!1);if(o){/stroke:/.exec(a)&&(a=a.replace("stroke:","lineColor:"));const f=a.replace(/stroke:[^;]+;?/g,"").replace(/stroke-width:[^;]+;?/g,"").replace(/fill:[^;]+;?/g,"").replace(/color:/g,"fill:");$e(d).attr("style",f)}else{const f=a.replace(/stroke:[^;]+;?/g,"").replace(/stroke-width:[^;]+;?/g,"").replace(/fill:[^;]+;?/g,"").replace(/background:/g,"fill:");$e(d).select("rect").attr("style",f.replace(/background:/g,"fill:"));const p=a.replace(/stroke:[^;]+;?/g,"").replace(/stroke-width:[^;]+;?/g,"").replace(/fill:[^;]+;?/g,"").replace(/color:/g,"fill:");$e(d).select("text").attr("style",p)}return d}},"createText");function Xg(e,t,a){if(e&&e.length){const[r,n]=t,i=Math.PI/180*a,o=Math.cos(i),s=Math.sin(i);for(const l of e){const[c,u]=l;l[0]=(c-r)*o-(u-n)*s+r,l[1]=(c-r)*s+(u-n)*o+n}}}function ivt(e,t){return e[0]===t[0]&&e[1]===t[1]}function ovt(e,t,a,r=1){const n=a,i=Math.max(t,.1),o=e[0]&&e[0][0]&&typeof e[0][0]=="number"?[e]:e,s=[0,0];if(n)for(const c of o)Xg(c,s,n);const l=function(c,u,h){const d=[];for(const y of c){const b=[...y];ivt(b[0],b[b.length-1])||b.push([b[0][0],b[0][1]]),b.length>2&&d.push(b)}const f=[];u=Math.max(u,.1);const p=[];for(const y of d)for(let b=0;b<y.length-1;b++){const w=y[b],T=y[b+1];if(w[1]!==T[1]){const C=Math.min(w[1],T[1]);p.push({ymin:C,ymax:Math.max(w[1],T[1]),x:C===w[1]?w[0]:T[0],islope:(T[0]-w[0])/(T[1]-w[1])})}}if(p.sort((y,b)=>y.ymin<b.ymin?-1:y.ymin>b.ymin?1:y.x<b.x?-1:y.x>b.x?1:y.ymax===b.ymax?0:(y.ymax-b.ymax)/Math.abs(y.ymax-b.ymax)),!p.length)return f;let g=[],v=p[0].ymin,_=0;for(;g.length||p.length;){if(p.length){let y=-1;for(let b=0;b<p.length&&!(p[b].ymin>v);b++)y=b;p.splice(0,y+1).forEach(b=>{g.push({s:v,edge:b})})}if(g=g.filter(y=>!(y.edge.ymax<=v)),g.sort((y,b)=>y.edge.x===b.edge.x?0:(y.edge.x-b.edge.x)/Math.abs(y.edge.x-b.edge.x)),(h!==1||_%u==0)&&g.length>1)for(let y=0;y<g.length;y+=2){const b=y+1;if(b>=g.length)break;const w=g[y].edge,T=g[b].edge;f.push([[Math.round(w.x),v],[Math.round(T.x),v]])}v+=h,g.forEach(y=>{y.edge.x=y.edge.x+h*y.edge.islope}),_++}return f}(o,i,r);if(n){for(const c of o)Xg(c,s,-n);(function(c,u,h){const d=[];c.forEach(f=>d.push(...f)),Xg(d,u,h)})(l,s,-n)}return l}function Lu(e,t){var a;const r=t.hachureAngle+90;let n=t.hachureGap;n<0&&(n=4*t.strokeWidth),n=Math.round(Math.max(n,.1));let i=1;return t.roughness>=1&&(((a=t.randomizer)===null||a===void 0?void 0:a.next())||Math.random())>.7&&(i=n),ovt(e,n,r,i||1)}class L_{constructor(t){this.helper=t}fillPolygons(t,a){return this._fillPolygons(t,a)}_fillPolygons(t,a){const r=Lu(t,a);return{type:"fillSketch",ops:this.renderLines(r,a)}}renderLines(t,a){const r=[];for(const n of t)r.push(...this.helper.doubleLineOps(n[0][0],n[0][1],n[1][0],n[1][1],a));return r}}function rp(e){const t=e[0],a=e[1];return Math.sqrt(Math.pow(t[0]-a[0],2)+Math.pow(t[1]-a[1],2))}class svt extends L_{fillPolygons(t,a){let r=a.hachureGap;r<0&&(r=4*a.strokeWidth),r=Math.max(r,.1);const n=Lu(t,Object.assign({},a,{hachureGap:r})),i=Math.PI/180*a.hachureAngle,o=[],s=.5*r*Math.cos(i),l=.5*r*Math.sin(i);for(const[c,u]of n)rp([c,u])&&o.push([[c[0]-s,c[1]+l],[...u]],[[c[0]+s,c[1]-l],[...u]]);return{type:"fillSketch",ops:this.renderLines(o,a)}}}class lvt extends L_{fillPolygons(t,a){const r=this._fillPolygons(t,a),n=Object.assign({},a,{hachureAngle:a.hachureAngle+90}),i=this._fillPolygons(t,n);return r.ops=r.ops.concat(i.ops),r}}class cvt{constructor(t){this.helper=t}fillPolygons(t,a){const r=Lu(t,a=Object.assign({},a,{hachureAngle:0}));return this.dotsOnLines(r,a)}dotsOnLines(t,a){const r=[];let n=a.hachureGap;n<0&&(n=4*a.strokeWidth),n=Math.max(n,.1);let i=a.fillWeight;i<0&&(i=a.strokeWidth/2);const o=n/4;for(const s of t){const l=rp(s),c=l/n,u=Math.ceil(c)-1,h=l-u*n,d=(s[0][0]+s[1][0])/2-n/4,f=Math.min(s[0][1],s[1][1]);for(let p=0;p<u;p++){const g=f+h+p*n,v=d-o+2*Math.random()*o,_=g-o+2*Math.random()*o,y=this.helper.ellipse(v,_,i,i,a);r.push(...y.ops)}}return{type:"fillSketch",ops:r}}}class uvt{constructor(t){this.helper=t}fillPolygons(t,a){const r=Lu(t,a);return{type:"fillSketch",ops:this.dashedLine(r,a)}}dashedLine(t,a){const r=a.dashOffset<0?a.hachureGap<0?4*a.strokeWidth:a.hachureGap:a.dashOffset,n=a.dashGap<0?a.hachureGap<0?4*a.strokeWidth:a.hachureGap:a.dashGap,i=[];return t.forEach(o=>{const s=rp(o),l=Math.floor(s/(r+n)),c=(s+n-l*(r+n))/2;let u=o[0],h=o[1];u[0]>h[0]&&(u=o[1],h=o[0]);const d=Math.atan((h[1]-u[1])/(h[0]-u[0]));for(let f=0;f<l;f++){const p=f*(r+n),g=p+r,v=[u[0]+p*Math.cos(d)+c*Math.cos(d),u[1]+p*Math.sin(d)+c*Math.sin(d)],_=[u[0]+g*Math.cos(d)+c*Math.cos(d),u[1]+g*Math.sin(d)+c*Math.sin(d)];i.push(...this.helper.doubleLineOps(v[0],v[1],_[0],_[1],a))}}),i}}class hvt{constructor(t){this.helper=t}fillPolygons(t,a){const r=a.hachureGap<0?4*a.strokeWidth:a.hachureGap,n=a.zigzagOffset<0?r:a.zigzagOffset,i=Lu(t,a=Object.assign({},a,{hachureGap:r+n}));return{type:"fillSketch",ops:this.zigzagLines(i,n,a)}}zigzagLines(t,a,r){const n=[];return t.forEach(i=>{const o=rp(i),s=Math.round(o/(2*a));let l=i[0],c=i[1];l[0]>c[0]&&(l=i[1],c=i[0]);const u=Math.atan((c[1]-l[1])/(c[0]-l[0]));for(let h=0;h<s;h++){const d=2*h*a,f=2*(h+1)*a,p=Math.sqrt(2*Math.pow(a,2)),g=[l[0]+d*Math.cos(u),l[1]+d*Math.sin(u)],v=[l[0]+f*Math.cos(u),l[1]+f*Math.sin(u)],_=[g[0]+p*Math.cos(u+Math.PI/4),g[1]+p*Math.sin(u+Math.PI/4)];n.push(...this.helper.doubleLineOps(g[0],g[1],_[0],_[1],r),...this.helper.doubleLineOps(_[0],_[1],v[0],v[1],r))}}),n}}const ur={};class dvt{constructor(t){this.seed=t}next(){return this.seed?(2**31-1&(this.seed=Math.imul(48271,this.seed)))/2**31:Math.random()}}const fvt=0,Zg=1,vC=2,hh={A:7,a:7,C:6,c:6,H:1,h:1,L:2,l:2,M:2,m:2,Q:4,q:4,S:4,s:4,T:2,t:2,V:1,v:1,Z:0,z:0};function Kg(e,t){return e.type===t}function I_(e){const t=[],a=function(o){const s=new Array;for(;o!=="";)if(o.match(/^([ \t\r\n,]+)/))o=o.substr(RegExp.$1.length);else if(o.match(/^([aAcChHlLmMqQsStTvVzZ])/))s[s.length]={type:fvt,text:RegExp.$1},o=o.substr(RegExp.$1.length);else{if(!o.match(/^(([-+]?[0-9]+(\.[0-9]*)?|[-+]?\.[0-9]+)([eE][-+]?[0-9]+)?)/))return[];s[s.length]={type:Zg,text:`${parseFloat(RegExp.$1)}`},o=o.substr(RegExp.$1.length)}return s[s.length]={type:vC,text:""},s}(e);let r="BOD",n=0,i=a[n];for(;!Kg(i,vC);){let o=0;const s=[];if(r==="BOD"){if(i.text!=="M"&&i.text!=="m")return I_("M0,0"+e);n++,o=hh[i.text],r=i.text}else Kg(i,Zg)?o=hh[r]:(n++,o=hh[i.text],r=i.text);if(!(n+o<a.length))throw new Error("Path data ended short");for(let l=n;l<n+o;l++){const c=a[l];if(!Kg(c,Zg))throw new Error("Param not a number: "+r+","+c.text);s[s.length]=+c.text}if(typeof hh[r]!="number")throw new Error("Bad segment: "+r);{const l={key:r,data:s};t.push(l),n+=o,i=a[n],r==="M"&&(r="L"),r==="m"&&(r="l")}}return t}function kR(e){let t=0,a=0,r=0,n=0;const i=[];for(const{key:o,data:s}of e)switch(o){case"M":i.push({key:"M",data:[...s]}),[t,a]=s,[r,n]=s;break;case"m":t+=s[0],a+=s[1],i.push({key:"M",data:[t,a]}),r=t,n=a;break;case"L":i.push({key:"L",data:[...s]}),[t,a]=s;break;case"l":t+=s[0],a+=s[1],i.push({key:"L",data:[t,a]});break;case"C":i.push({key:"C",data:[...s]}),t=s[4],a=s[5];break;case"c":{const l=s.map((c,u)=>u%2?c+a:c+t);i.push({key:"C",data:l}),t=l[4],a=l[5];break}case"Q":i.push({key:"Q",data:[...s]}),t=s[2],a=s[3];break;case"q":{const l=s.map((c,u)=>u%2?c+a:c+t);i.push({key:"Q",data:l}),t=l[2],a=l[3];break}case"A":i.push({key:"A",data:[...s]}),t=s[5],a=s[6];break;case"a":t+=s[5],a+=s[6],i.push({key:"A",data:[s[0],s[1],s[2],s[3],s[4],t,a]});break;case"H":i.push({key:"H",data:[...s]}),t=s[0];break;case"h":t+=s[0],i.push({key:"H",data:[t]});break;case"V":i.push({key:"V",data:[...s]}),a=s[0];break;case"v":a+=s[0],i.push({key:"V",data:[a]});break;case"S":i.push({key:"S",data:[...s]}),t=s[2],a=s[3];break;case"s":{const l=s.map((c,u)=>u%2?c+a:c+t);i.push({key:"S",data:l}),t=l[2],a=l[3];break}case"T":i.push({key:"T",data:[...s]}),t=s[0],a=s[1];break;case"t":t+=s[0],a+=s[1],i.push({key:"T",data:[t,a]});break;case"Z":case"z":i.push({key:"Z",data:[]}),t=r,a=n}return i}function DR(e){const t=[];let a="",r=0,n=0,i=0,o=0,s=0,l=0;for(const{key:c,data:u}of e){switch(c){case"M":t.push({key:"M",data:[...u]}),[r,n]=u,[i,o]=u;break;case"C":t.push({key:"C",data:[...u]}),r=u[4],n=u[5],s=u[2],l=u[3];break;case"L":t.push({key:"L",data:[...u]}),[r,n]=u;break;case"H":r=u[0],t.push({key:"L",data:[r,n]});break;case"V":n=u[0],t.push({key:"L",data:[r,n]});break;case"S":{let h=0,d=0;a==="C"||a==="S"?(h=r+(r-s),d=n+(n-l)):(h=r,d=n),t.push({key:"C",data:[h,d,...u]}),s=u[0],l=u[1],r=u[2],n=u[3];break}case"T":{const[h,d]=u;let f=0,p=0;a==="Q"||a==="T"?(f=r+(r-s),p=n+(n-l)):(f=r,p=n);const g=r+2*(f-r)/3,v=n+2*(p-n)/3,_=h+2*(f-h)/3,y=d+2*(p-d)/3;t.push({key:"C",data:[g,v,_,y,h,d]}),s=f,l=p,r=h,n=d;break}case"Q":{const[h,d,f,p]=u,g=r+2*(h-r)/3,v=n+2*(d-n)/3,_=f+2*(h-f)/3,y=p+2*(d-p)/3;t.push({key:"C",data:[g,v,_,y,f,p]}),s=h,l=d,r=f,n=p;break}case"A":{const h=Math.abs(u[0]),d=Math.abs(u[1]),f=u[2],p=u[3],g=u[4],v=u[5],_=u[6];h===0||d===0?(t.push({key:"C",data:[r,n,v,_,v,_]}),r=v,n=_):(r!==v||n!==_)&&(LR(r,n,v,_,h,d,f,p,g).forEach(function(y){t.push({key:"C",data:y})}),r=v,n=_);break}case"Z":t.push({key:"Z",data:[]}),r=i,n=o}a=c}return t}function Hl(e,t,a){return[e*Math.cos(a)-t*Math.sin(a),e*Math.sin(a)+t*Math.cos(a)]}function LR(e,t,a,r,n,i,o,s,l,c){const u=(h=o,Math.PI*h/180);var h;let d=[],f=0,p=0,g=0,v=0;if(c)[f,p,g,v]=c;else{[e,t]=Hl(e,t,-u),[a,r]=Hl(a,r,-u);const D=(e-a)/2,O=(t-r)/2;let B=D*D/(n*n)+O*O/(i*i);B>1&&(B=Math.sqrt(B),n*=B,i*=B);const R=n*n,V=i*i,z=R*V-R*O*O-V*D*D,W=R*O*O+V*D*D,it=(s===l?-1:1)*Math.sqrt(Math.abs(z/W));g=it*n*O/i+(e+a)/2,v=it*-i*D/n+(t+r)/2,f=Math.asin(parseFloat(((t-v)/i).toFixed(9))),p=Math.asin(parseFloat(((r-v)/i).toFixed(9))),e<g&&(f=Math.PI-f),a<g&&(p=Math.PI-p),f<0&&(f=2*Math.PI+f),p<0&&(p=2*Math.PI+p),l&&f>p&&(f-=2*Math.PI),!l&&p>f&&(p-=2*Math.PI)}let _=p-f;if(Math.abs(_)>120*Math.PI/180){const D=p,O=a,B=r;p=l&&p>f?f+120*Math.PI/180*1:f+120*Math.PI/180*-1,d=LR(a=g+n*Math.cos(p),r=v+i*Math.sin(p),O,B,n,i,o,0,l,[p,D,g,v])}_=p-f;const y=Math.cos(f),b=Math.sin(f),w=Math.cos(p),T=Math.sin(p),C=Math.tan(_/4),A=4/3*n*C,k=4/3*i*C,L=[e,t],M=[e+A*b,t-k*y],P=[a+A*T,r-k*w],E=[a,r];if(M[0]=2*L[0]-M[0],M[1]=2*L[1]-M[1],c)return[M,P,E].concat(d);{d=[M,P,E].concat(d);const D=[];for(let O=0;O<d.length;O+=3){const B=Hl(d[O][0],d[O][1],u),R=Hl(d[O+1][0],d[O+1][1],u),V=Hl(d[O+2][0],d[O+2][1],u);D.push([B[0],B[1],R[0],R[1],V[0],V[1]])}return D}}const pvt={randOffset:function(e,t){return me(e,t)},randOffsetWithRange:function(e,t,a){return Xd(e,t,a)},ellipse:function(e,t,a,r,n){const i=MR(a,r,n);return Km(e,t,n,i).opset},doubleLineOps:function(e,t,a,r,n){return $i(e,t,a,r,n,!0)}};function IR(e,t,a,r,n){return{type:"path",ops:$i(e,t,a,r,n)}}function $h(e,t,a){const r=(e||[]).length;if(r>2){const n=[];for(let i=0;i<r-1;i++)n.push(...$i(e[i][0],e[i][1],e[i+1][0],e[i+1][1],a));return t&&n.push(...$i(e[r-1][0],e[r-1][1],e[0][0],e[0][1],a)),{type:"path",ops:n}}return r===2?IR(e[0][0],e[0][1],e[1][0],e[1][1],a):{type:"path",ops:[]}}function gvt(e,t,a,r,n){return function(i,o){return $h(i,!0,o)}([[e,t],[e+a,t],[e+a,t+r],[e,t+r]],n)}function mC(e,t){if(e.length){const a=typeof e[0][0]=="number"?[e]:e,r=dh(a[0],1*(1+.2*t.roughness),t),n=t.disableMultiStroke?[]:dh(a[0],1.5*(1+.22*t.roughness),bC(t));for(let i=1;i<a.length;i++){const o=a[i];if(o.length){const s=dh(o,1*(1+.2*t.roughness),t),l=t.disableMultiStroke?[]:dh(o,1.5*(1+.22*t.roughness),bC(t));for(const c of s)c.op!=="move"&&r.push(c);for(const c of l)c.op!=="move"&&n.push(c)}}return{type:"path",ops:r.concat(n)}}return{type:"path",ops:[]}}function MR(e,t,a){const r=Math.sqrt(2*Math.PI*Math.sqrt((Math.pow(e/2,2)+Math.pow(t/2,2))/2)),n=Math.ceil(Math.max(a.curveStepCount,a.curveStepCount/Math.sqrt(200)*r)),i=2*Math.PI/n;let o=Math.abs(e/2),s=Math.abs(t/2);const l=1-a.curveFitting;return o+=me(o*l,a),s+=me(s*l,a),{increment:i,rx:o,ry:s}}function Km(e,t,a,r){const[n,i]=xC(r.increment,e,t,r.rx,r.ry,1,r.increment*Xd(.1,Xd(.4,1,a),a),a);let o=Zd(n,null,a);if(!a.disableMultiStroke&&a.roughness!==0){const[s]=xC(r.increment,e,t,r.rx,r.ry,1.5,0,a),l=Zd(s,null,a);o=o.concat(l)}return{estimatedPoints:i,opset:{type:"path",ops:o}}}function yC(e,t,a,r,n,i,o,s,l){const c=e,u=t;let h=Math.abs(a/2),d=Math.abs(r/2);h+=me(.01*h,l),d+=me(.01*d,l);let f=n,p=i;for(;f<0;)f+=2*Math.PI,p+=2*Math.PI;p-f>2*Math.PI&&(f=0,p=2*Math.PI);const g=2*Math.PI/l.curveStepCount,v=Math.min(g/2,(p-f)/2),_=SC(v,c,u,h,d,f,p,1,l);if(!l.disableMultiStroke){const y=SC(v,c,u,h,d,f,p,1.5,l);_.push(...y)}return o&&(s?_.push(...$i(c,u,c+h*Math.cos(f),u+d*Math.sin(f),l),...$i(c,u,c+h*Math.cos(p),u+d*Math.sin(p),l)):_.push({op:"lineTo",data:[c,u]},{op:"lineTo",data:[c+h*Math.cos(f),u+d*Math.sin(f)]})),{type:"path",ops:_}}function _C(e,t){const a=DR(kR(I_(e))),r=[];let n=[0,0],i=[0,0];for(const{key:o,data:s}of a)switch(o){case"M":i=[s[0],s[1]],n=[s[0],s[1]];break;case"L":r.push(...$i(i[0],i[1],s[0],s[1],t)),i=[s[0],s[1]];break;case"C":{const[l,c,u,h,d,f]=s;r.push(...vvt(l,c,u,h,d,f,i,t)),i=[d,f];break}case"Z":r.push(...$i(i[0],i[1],n[0],n[1],t)),i=[n[0],n[1]]}return{type:"path",ops:r}}function Jg(e,t){const a=[];for(const r of e)if(r.length){const n=t.maxRandomnessOffset||0,i=r.length;if(i>2){a.push({op:"move",data:[r[0][0]+me(n,t),r[0][1]+me(n,t)]});for(let o=1;o<i;o++)a.push({op:"lineTo",data:[r[o][0]+me(n,t),r[o][1]+me(n,t)]})}}return{type:"fillPath",ops:a}}function ns(e,t){return function(a,r){let n=a.fillStyle||"hachure";if(!ur[n])switch(n){case"zigzag":ur[n]||(ur[n]=new svt(r));break;case"cross-hatch":ur[n]||(ur[n]=new lvt(r));break;case"dots":ur[n]||(ur[n]=new cvt(r));break;case"dashed":ur[n]||(ur[n]=new uvt(r));break;case"zigzag-line":ur[n]||(ur[n]=new hvt(r));break;default:n="hachure",ur[n]||(ur[n]=new L_(r))}return ur[n]}(t,pvt).fillPolygons(e,t)}function bC(e){const t=Object.assign({},e);return t.randomizer=void 0,e.seed&&(t.seed=e.seed+1),t}function ER(e){return e.randomizer||(e.randomizer=new dvt(e.seed||0)),e.randomizer.next()}function Xd(e,t,a,r=1){return a.roughness*r*(ER(a)*(t-e)+e)}function me(e,t,a=1){return Xd(-e,e,t,a)}function $i(e,t,a,r,n,i=!1){const o=i?n.disableMultiStrokeFill:n.disableMultiStroke,s=Jm(e,t,a,r,n,!0,!1);if(o)return s;const l=Jm(e,t,a,r,n,!0,!0);return s.concat(l)}function Jm(e,t,a,r,n,i,o){const s=Math.pow(e-a,2)+Math.pow(t-r,2),l=Math.sqrt(s);let c=1;c=l<200?1:l>500?.4:-.0016668*l+1.233334;let u=n.maxRandomnessOffset||0;u*u*100>s&&(u=l/10);const h=u/2,d=.2+.2*ER(n);let f=n.bowing*n.maxRandomnessOffset*(r-t)/200,p=n.bowing*n.maxRandomnessOffset*(e-a)/200;f=me(f,n,c),p=me(p,n,c);const g=[],v=()=>me(h,n,c),_=()=>me(u,n,c),y=n.preserveVertices;return o?g.push({op:"move",data:[e+(y?0:v()),t+(y?0:v())]}):g.push({op:"move",data:[e+(y?0:me(u,n,c)),t+(y?0:me(u,n,c))]}),o?g.push({op:"bcurveTo",data:[f+e+(a-e)*d+v(),p+t+(r-t)*d+v(),f+e+2*(a-e)*d+v(),p+t+2*(r-t)*d+v(),a+(y?0:v()),r+(y?0:v())]}):g.push({op:"bcurveTo",data:[f+e+(a-e)*d+_(),p+t+(r-t)*d+_(),f+e+2*(a-e)*d+_(),p+t+2*(r-t)*d+_(),a+(y?0:_()),r+(y?0:_())]}),g}function dh(e,t,a){if(!e.length)return[];const r=[];r.push([e[0][0]+me(t,a),e[0][1]+me(t,a)]),r.push([e[0][0]+me(t,a),e[0][1]+me(t,a)]);for(let n=1;n<e.length;n++)r.push([e[n][0]+me(t,a),e[n][1]+me(t,a)]),n===e.length-1&&r.push([e[n][0]+me(t,a),e[n][1]+me(t,a)]);return Zd(r,null,a)}function Zd(e,t,a){const r=e.length,n=[];if(r>3){const i=[],o=1-a.curveTightness;n.push({op:"move",data:[e[1][0],e[1][1]]});for(let s=1;s+2<r;s++){const l=e[s];i[0]=[l[0],l[1]],i[1]=[l[0]+(o*e[s+1][0]-o*e[s-1][0])/6,l[1]+(o*e[s+1][1]-o*e[s-1][1])/6],i[2]=[e[s+1][0]+(o*e[s][0]-o*e[s+2][0])/6,e[s+1][1]+(o*e[s][1]-o*e[s+2][1])/6],i[3]=[e[s+1][0],e[s+1][1]],n.push({op:"bcurveTo",data:[i[1][0],i[1][1],i[2][0],i[2][1],i[3][0],i[3][1]]})}}else r===3?(n.push({op:"move",data:[e[1][0],e[1][1]]}),n.push({op:"bcurveTo",data:[e[1][0],e[1][1],e[2][0],e[2][1],e[2][0],e[2][1]]})):r===2&&n.push(...Jm(e[0][0],e[0][1],e[1][0],e[1][1],a,!0,!0));return n}function xC(e,t,a,r,n,i,o,s){const l=[],c=[];if(s.roughness===0){e/=4,c.push([t+r*Math.cos(-e),a+n*Math.sin(-e)]);for(let u=0;u<=2*Math.PI;u+=e){const h=[t+r*Math.cos(u),a+n*Math.sin(u)];l.push(h),c.push(h)}c.push([t+r*Math.cos(0),a+n*Math.sin(0)]),c.push([t+r*Math.cos(e),a+n*Math.sin(e)])}else{const u=me(.5,s)-Math.PI/2;c.push([me(i,s)+t+.9*r*Math.cos(u-e),me(i,s)+a+.9*n*Math.sin(u-e)]);const h=2*Math.PI+u-.01;for(let d=u;d<h;d+=e){const f=[me(i,s)+t+r*Math.cos(d),me(i,s)+a+n*Math.sin(d)];l.push(f),c.push(f)}c.push([me(i,s)+t+r*Math.cos(u+2*Math.PI+.5*o),me(i,s)+a+n*Math.sin(u+2*Math.PI+.5*o)]),c.push([me(i,s)+t+.98*r*Math.cos(u+o),me(i,s)+a+.98*n*Math.sin(u+o)]),c.push([me(i,s)+t+.9*r*Math.cos(u+.5*o),me(i,s)+a+.9*n*Math.sin(u+.5*o)])}return[c,l]}function SC(e,t,a,r,n,i,o,s,l){const c=i+me(.1,l),u=[];u.push([me(s,l)+t+.9*r*Math.cos(c-e),me(s,l)+a+.9*n*Math.sin(c-e)]);for(let h=c;h<=o;h+=e)u.push([me(s,l)+t+r*Math.cos(h),me(s,l)+a+n*Math.sin(h)]);return u.push([t+r*Math.cos(o),a+n*Math.sin(o)]),u.push([t+r*Math.cos(o),a+n*Math.sin(o)]),Zd(u,null,l)}function vvt(e,t,a,r,n,i,o,s){const l=[],c=[s.maxRandomnessOffset||1,(s.maxRandomnessOffset||1)+.3];let u=[0,0];const h=s.disableMultiStroke?1:2,d=s.preserveVertices;for(let f=0;f<h;f++)f===0?l.push({op:"move",data:[o[0],o[1]]}):l.push({op:"move",data:[o[0]+(d?0:me(c[0],s)),o[1]+(d?0:me(c[0],s))]}),u=d?[n,i]:[n+me(c[f],s),i+me(c[f],s)],l.push({op:"bcurveTo",data:[e+me(c[f],s),t+me(c[f],s),a+me(c[f],s),r+me(c[f],s),u[0],u[1]]});return l}function Wl(e){return[...e]}function wC(e,t=0){const a=e.length;if(a<3)throw new Error("A curve must have at least three points.");const r=[];if(a===3)r.push(Wl(e[0]),Wl(e[1]),Wl(e[2]),Wl(e[2]));else{const n=[];n.push(e[0],e[0]);for(let s=1;s<e.length;s++)n.push(e[s]),s===e.length-1&&n.push(e[s]);const i=[],o=1-t;r.push(Wl(n[0]));for(let s=1;s+2<n.length;s++){const l=n[s];i[0]=[l[0],l[1]],i[1]=[l[0]+(o*n[s+1][0]-o*n[s-1][0])/6,l[1]+(o*n[s+1][1]-o*n[s-1][1])/6],i[2]=[n[s+1][0]+(o*n[s][0]-o*n[s+2][0])/6,n[s+1][1]+(o*n[s][1]-o*n[s+2][1])/6],i[3]=[n[s+1][0],n[s+1][1]],r.push(i[1],i[2],i[3])}}return r}function Fh(e,t){return Math.pow(e[0]-t[0],2)+Math.pow(e[1]-t[1],2)}function mvt(e,t,a){const r=Fh(t,a);if(r===0)return Fh(e,t);let n=((e[0]-t[0])*(a[0]-t[0])+(e[1]-t[1])*(a[1]-t[1]))/r;return n=Math.max(0,Math.min(1,n)),Fh(e,ao(t,a,n))}function ao(e,t,a){return[e[0]+(t[0]-e[0])*a,e[1]+(t[1]-e[1])*a]}function Qm(e,t,a,r){const n=r||[];if(function(s,l){const c=s[l+0],u=s[l+1],h=s[l+2],d=s[l+3];let f=3*u[0]-2*c[0]-d[0];f*=f;let p=3*u[1]-2*c[1]-d[1];p*=p;let g=3*h[0]-2*d[0]-c[0];g*=g;let v=3*h[1]-2*d[1]-c[1];return v*=v,f<g&&(f=g),p<v&&(p=v),f+p}(e,t)<a){const s=e[t+0];n.length?(i=n[n.length-1],o=s,Math.sqrt(Fh(i,o))>1&&n.push(s)):n.push(s),n.push(e[t+3])}else{const l=e[t+0],c=e[t+1],u=e[t+2],h=e[t+3],d=ao(l,c,.5),f=ao(c,u,.5),p=ao(u,h,.5),g=ao(d,f,.5),v=ao(f,p,.5),_=ao(g,v,.5);Qm([l,d,g,_],0,a,n),Qm([_,v,p,h],0,a,n)}var i,o;return n}function yvt(e,t){return Kd(e,0,e.length,t)}function Kd(e,t,a,r,n){const i=n||[],o=e[t],s=e[a-1];let l=0,c=1;for(let u=t+1;u<a-1;++u){const h=mvt(e[u],o,s);h>l&&(l=h,c=u)}return Math.sqrt(l)>r?(Kd(e,t,c+1,r,i),Kd(e,c,a,r,i)):(i.length||i.push(o),i.push(s)),i}function Qg(e,t=.15,a){const r=[],n=(e.length-1)/3;for(let i=0;i<n;i++)Qm(e,3*i,t,r);return a&&a>0?Kd(r,0,r.length,a):r}const br="none";class Jd{constructor(t){this.defaultOptions={maxRandomnessOffset:2,roughness:1,bowing:1,stroke:"#000",strokeWidth:1,curveTightness:0,curveFitting:.95,curveStepCount:9,fillStyle:"hachure",fillWeight:-1,hachureAngle:-41,hachureGap:-1,dashOffset:-1,dashGap:-1,zigzagOffset:-1,seed:0,disableMultiStroke:!1,disableMultiStrokeFill:!1,preserveVertices:!1,fillShapeRoughnessGain:.8},this.config=t||{},this.config.options&&(this.defaultOptions=this._o(this.config.options))}static newSeed(){return Math.floor(Math.random()*2**31)}_o(t){return t?Object.assign({},this.defaultOptions,t):this.defaultOptions}_d(t,a,r){return{shape:t,sets:a||[],options:r||this.defaultOptions}}line(t,a,r,n,i){const o=this._o(i);return this._d("line",[IR(t,a,r,n,o)],o)}rectangle(t,a,r,n,i){const o=this._o(i),s=[],l=gvt(t,a,r,n,o);if(o.fill){const c=[[t,a],[t+r,a],[t+r,a+n],[t,a+n]];o.fillStyle==="solid"?s.push(Jg([c],o)):s.push(ns([c],o))}return o.stroke!==br&&s.push(l),this._d("rectangle",s,o)}ellipse(t,a,r,n,i){const o=this._o(i),s=[],l=MR(r,n,o),c=Km(t,a,o,l);if(o.fill)if(o.fillStyle==="solid"){const u=Km(t,a,o,l).opset;u.type="fillPath",s.push(u)}else s.push(ns([c.estimatedPoints],o));return o.stroke!==br&&s.push(c.opset),this._d("ellipse",s,o)}circle(t,a,r,n){const i=this.ellipse(t,a,r,r,n);return i.shape="circle",i}linearPath(t,a){const r=this._o(a);return this._d("linearPath",[$h(t,!1,r)],r)}arc(t,a,r,n,i,o,s=!1,l){const c=this._o(l),u=[],h=yC(t,a,r,n,i,o,s,!0,c);if(s&&c.fill)if(c.fillStyle==="solid"){const d=Object.assign({},c);d.disableMultiStroke=!0;const f=yC(t,a,r,n,i,o,!0,!1,d);f.type="fillPath",u.push(f)}else u.push(function(d,f,p,g,v,_,y){const b=d,w=f;let T=Math.abs(p/2),C=Math.abs(g/2);T+=me(.01*T,y),C+=me(.01*C,y);let A=v,k=_;for(;A<0;)A+=2*Math.PI,k+=2*Math.PI;k-A>2*Math.PI&&(A=0,k=2*Math.PI);const L=(k-A)/y.curveStepCount,M=[];for(let P=A;P<=k;P+=L)M.push([b+T*Math.cos(P),w+C*Math.sin(P)]);return M.push([b+T*Math.cos(k),w+C*Math.sin(k)]),M.push([b,w]),ns([M],y)}(t,a,r,n,i,o,c));return c.stroke!==br&&u.push(h),this._d("arc",u,c)}curve(t,a){const r=this._o(a),n=[],i=mC(t,r);if(r.fill&&r.fill!==br)if(r.fillStyle==="solid"){const o=mC(t,Object.assign(Object.assign({},r),{disableMultiStroke:!0,roughness:r.roughness?r.roughness+r.fillShapeRoughnessGain:0}));n.push({type:"fillPath",ops:this._mergedShape(o.ops)})}else{const o=[],s=t;if(s.length){const l=typeof s[0][0]=="number"?[s]:s;for(const c of l)c.length<3?o.push(...c):c.length===3?o.push(...Qg(wC([c[0],c[0],c[1],c[2]]),10,(1+r.roughness)/2)):o.push(...Qg(wC(c),10,(1+r.roughness)/2))}o.length&&n.push(ns([o],r))}return r.stroke!==br&&n.push(i),this._d("curve",n,r)}polygon(t,a){const r=this._o(a),n=[],i=$h(t,!0,r);return r.fill&&(r.fillStyle==="solid"?n.push(Jg([t],r)):n.push(ns([t],r))),r.stroke!==br&&n.push(i),this._d("polygon",n,r)}path(t,a){const r=this._o(a),n=[];if(!t)return this._d("path",n,r);t=(t||"").replace(/\n/g," ").replace(/(-\s)/g,"-").replace("/(ss)/g"," ");const i=r.fill&&r.fill!=="transparent"&&r.fill!==br,o=r.stroke!==br,s=!!(r.simplification&&r.simplification<1),l=function(u,h,d){const f=DR(kR(I_(u))),p=[];let g=[],v=[0,0],_=[];const y=()=>{_.length>=4&&g.push(...Qg(_,h)),_=[]},b=()=>{y(),g.length&&(p.push(g),g=[])};for(const{key:T,data:C}of f)switch(T){case"M":b(),v=[C[0],C[1]],g.push(v);break;case"L":y(),g.push([C[0],C[1]]);break;case"C":if(!_.length){const A=g.length?g[g.length-1]:v;_.push([A[0],A[1]])}_.push([C[0],C[1]]),_.push([C[2],C[3]]),_.push([C[4],C[5]]);break;case"Z":y(),g.push([v[0],v[1]])}if(b(),!d)return p;const w=[];for(const T of p){const C=yvt(T,d);C.length&&w.push(C)}return w}(t,1,s?4-4*(r.simplification||1):(1+r.roughness)/2),c=_C(t,r);if(i)if(r.fillStyle==="solid")if(l.length===1){const u=_C(t,Object.assign(Object.assign({},r),{disableMultiStroke:!0,roughness:r.roughness?r.roughness+r.fillShapeRoughnessGain:0}));n.push({type:"fillPath",ops:this._mergedShape(u.ops)})}else n.push(Jg(l,r));else n.push(ns(l,r));return o&&(s?l.forEach(u=>{n.push($h(u,!1,r))}):n.push(c)),this._d("path",n,r)}opsToPath(t,a){let r="";for(const n of t.ops){const i=typeof a=="number"&&a>=0?n.data.map(o=>+o.toFixed(a)):n.data;switch(n.op){case"move":r+=`M${i[0]} ${i[1]} `;break;case"bcurveTo":r+=`C${i[0]} ${i[1]}, ${i[2]} ${i[3]}, ${i[4]} ${i[5]} `;break;case"lineTo":r+=`L${i[0]} ${i[1]} `}}return r.trim()}toPaths(t){const a=t.sets||[],r=t.options||this.defaultOptions,n=[];for(const i of a){let o=null;switch(i.type){case"path":o={d:this.opsToPath(i),stroke:r.stroke,strokeWidth:r.strokeWidth,fill:br};break;case"fillPath":o={d:this.opsToPath(i),stroke:br,strokeWidth:0,fill:r.fill||br};break;case"fillSketch":o=this.fillSketch(i,r)}o&&n.push(o)}return n}fillSketch(t,a){let r=a.fillWeight;return r<0&&(r=a.strokeWidth/2),{d:this.opsToPath(t),stroke:a.fill||br,strokeWidth:r,fill:br}}_mergedShape(t){return t.filter((a,r)=>r===0||a.op!=="move")}}class _vt{constructor(t,a){this.canvas=t,this.ctx=this.canvas.getContext("2d"),this.gen=new Jd(a)}draw(t){const a=t.sets||[],r=t.options||this.getDefaultOptions(),n=this.ctx,i=t.options.fixedDecimalPlaceDigits;for(const o of a)switch(o.type){case"path":n.save(),n.strokeStyle=r.stroke==="none"?"transparent":r.stroke,n.lineWidth=r.strokeWidth,r.strokeLineDash&&n.setLineDash(r.strokeLineDash),r.strokeLineDashOffset&&(n.lineDashOffset=r.strokeLineDashOffset),this._drawToContext(n,o,i),n.restore();break;case"fillPath":{n.save(),n.fillStyle=r.fill||"";const s=t.shape==="curve"||t.shape==="polygon"||t.shape==="path"?"evenodd":"nonzero";this._drawToContext(n,o,i,s),n.restore();break}case"fillSketch":this.fillSketch(n,o,r)}}fillSketch(t,a,r){let n=r.fillWeight;n<0&&(n=r.strokeWidth/2),t.save(),r.fillLineDash&&t.setLineDash(r.fillLineDash),r.fillLineDashOffset&&(t.lineDashOffset=r.fillLineDashOffset),t.strokeStyle=r.fill||"",t.lineWidth=n,this._drawToContext(t,a,r.fixedDecimalPlaceDigits),t.restore()}_drawToContext(t,a,r,n="nonzero"){t.beginPath();for(const i of a.ops){const o=typeof r=="number"&&r>=0?i.data.map(s=>+s.toFixed(r)):i.data;switch(i.op){case"move":t.moveTo(o[0],o[1]);break;case"bcurveTo":t.bezierCurveTo(o[0],o[1],o[2],o[3],o[4],o[5]);break;case"lineTo":t.lineTo(o[0],o[1])}}a.type==="fillPath"?t.fill(n):t.stroke()}get generator(){return this.gen}getDefaultOptions(){return this.gen.defaultOptions}line(t,a,r,n,i){const o=this.gen.line(t,a,r,n,i);return this.draw(o),o}rectangle(t,a,r,n,i){const o=this.gen.rectangle(t,a,r,n,i);return this.draw(o),o}ellipse(t,a,r,n,i){const o=this.gen.ellipse(t,a,r,n,i);return this.draw(o),o}circle(t,a,r,n){const i=this.gen.circle(t,a,r,n);return this.draw(i),i}linearPath(t,a){const r=this.gen.linearPath(t,a);return this.draw(r),r}polygon(t,a){const r=this.gen.polygon(t,a);return this.draw(r),r}arc(t,a,r,n,i,o,s=!1,l){const c=this.gen.arc(t,a,r,n,i,o,s,l);return this.draw(c),c}curve(t,a){const r=this.gen.curve(t,a);return this.draw(r),r}path(t,a){const r=this.gen.path(t,a);return this.draw(r),r}}const fh="http://www.w3.org/2000/svg";class bvt{constructor(t,a){this.svg=t,this.gen=new Jd(a)}draw(t){const a=t.sets||[],r=t.options||this.getDefaultOptions(),n=this.svg.ownerDocument||window.document,i=n.createElementNS(fh,"g"),o=t.options.fixedDecimalPlaceDigits;for(const s of a){let l=null;switch(s.type){case"path":l=n.createElementNS(fh,"path"),l.setAttribute("d",this.opsToPath(s,o)),l.setAttribute("stroke",r.stroke),l.setAttribute("stroke-width",r.strokeWidth+""),l.setAttribute("fill","none"),r.strokeLineDash&&l.setAttribute("stroke-dasharray",r.strokeLineDash.join(" ").trim()),r.strokeLineDashOffset&&l.setAttribute("stroke-dashoffset",`${r.strokeLineDashOffset}`);break;case"fillPath":l=n.createElementNS(fh,"path"),l.setAttribute("d",this.opsToPath(s,o)),l.setAttribute("stroke","none"),l.setAttribute("stroke-width","0"),l.setAttribute("fill",r.fill||""),t.shape!=="curve"&&t.shape!=="polygon"||l.setAttribute("fill-rule","evenodd");break;case"fillSketch":l=this.fillSketch(n,s,r)}l&&i.appendChild(l)}return i}fillSketch(t,a,r){let n=r.fillWeight;n<0&&(n=r.strokeWidth/2);const i=t.createElementNS(fh,"path");return i.setAttribute("d",this.opsToPath(a,r.fixedDecimalPlaceDigits)),i.setAttribute("stroke",r.fill||""),i.setAttribute("stroke-width",n+""),i.setAttribute("fill","none"),r.fillLineDash&&i.setAttribute("stroke-dasharray",r.fillLineDash.join(" ").trim()),r.fillLineDashOffset&&i.setAttribute("stroke-dashoffset",`${r.fillLineDashOffset}`),i}get generator(){return this.gen}getDefaultOptions(){return this.gen.defaultOptions}opsToPath(t,a){return this.gen.opsToPath(t,a)}line(t,a,r,n,i){const o=this.gen.line(t,a,r,n,i);return this.draw(o)}rectangle(t,a,r,n,i){const o=this.gen.rectangle(t,a,r,n,i);return this.draw(o)}ellipse(t,a,r,n,i){const o=this.gen.ellipse(t,a,r,n,i);return this.draw(o)}circle(t,a,r,n){const i=this.gen.circle(t,a,r,n);return this.draw(i)}linearPath(t,a){const r=this.gen.linearPath(t,a);return this.draw(r)}polygon(t,a){const r=this.gen.polygon(t,a);return this.draw(r)}arc(t,a,r,n,i,o,s=!1,l){const c=this.gen.arc(t,a,r,n,i,o,s,l);return this.draw(c)}curve(t,a){const r=this.gen.curve(t,a);return this.draw(r)}path(t,a){const r=this.gen.path(t,a);return this.draw(r)}}var ae={canvas:(e,t)=>new _vt(e,t),svg:(e,t)=>new bvt(e,t),generator:e=>new Jd(e),newSeed:()=>Jd.newSeed()},Te=I(async(e,t,a)=>{var h,d;let r;const n=t.useHtmlLabels||Da((h=He())==null?void 0:h.htmlLabels);a?r=a:r="node default";const i=e.insert("g").attr("class",r).attr("id",t.domId||t.id),o=i.insert("g").attr("class","label").attr("style",or(t.labelStyle));let s;t.label===void 0?s="":s=typeof t.label=="string"?t.label:t.label[0];const l=await Gi(o,Do(Ho(s),He()),{useHtmlLabels:n,width:t.width||((d=He().flowchart)==null?void 0:d.wrappingWidth),cssClasses:"markdown-node-label",style:t.labelStyle,addSvgBackground:!!t.icon||!!t.img});let c=l.getBBox();const u=((t==null?void 0:t.padding)??0)/2;if(n){const f=l.children[0],p=$e(l),g=f.getElementsByTagName("img");if(g){const v=s.replace(/<img[^>]*>/g,"").trim()==="";await Promise.all([...g].map(_=>new Promise(y=>{function b(){if(_.style.display="flex",_.style.flexDirection="column",v){const w=He().fontSize?He().fontSize:window.getComputedStyle(document.body).fontSize,T=5,[C=nI.fontSize]=Jf(w),A=C*T+"px";_.style.minWidth=A,_.style.maxWidth=A}else _.style.width="100%";y(_)}I(b,"setupImage"),setTimeout(()=>{_.complete&&b()}),_.addEventListener("error",b),_.addEventListener("load",b)})))}c=f.getBoundingClientRect(),p.attr("width",c.width),p.attr("height",c.height)}return n?o.attr("transform","translate("+-c.width/2+", "+-c.height/2+")"):o.attr("transform","translate(0, "+-c.height/2+")"),t.centerLabel&&o.attr("transform","translate("+-c.width/2+", "+-c.height/2+")"),o.insert("rect",":first-child"),{shapeSvg:i,bbox:c,halfPadding:u,label:o}},"labelHelper"),tv=I(async(e,t,a)=>{var l,c,u,h,d,f;const r=a.useHtmlLabels||Da((c=(l=He())==null?void 0:l.flowchart)==null?void 0:c.htmlLabels),n=e.insert("g").attr("class","label").attr("style",a.labelStyle||""),i=await Gi(n,Do(Ho(t),He()),{useHtmlLabels:r,width:a.width||((h=(u=He())==null?void 0:u.flowchart)==null?void 0:h.wrappingWidth),style:a.labelStyle,addSvgBackground:!!a.icon||!!a.img});let o=i.getBBox();const s=a.padding/2;if(Da((f=(d=He())==null?void 0:d.flowchart)==null?void 0:f.htmlLabels)){const p=i.children[0],g=$e(i);o=p.getBoundingClientRect(),g.attr("width",o.width),g.attr("height",o.height)}return r?n.attr("transform","translate("+-o.width/2+", "+-o.height/2+")"):n.attr("transform","translate(0, "+-o.height/2+")"),a.centerLabel&&n.attr("transform","translate("+-o.width/2+", "+-o.height/2+")"),n.insert("rect",":first-child"),{shapeSvg:e,bbox:o,halfPadding:s,label:n}},"insertLabel"),oe=I((e,t)=>{const a=t.node().getBBox();e.width=a.width,e.height=a.height},"updateNodeBounds"),be=I((e,t)=>(e.look==="handDrawn"?"rough-node":"node")+" "+e.cssClasses+" "+(t||""),"getNodeClasses");function Fe(e){const t=e.map((a,r)=>`${r===0?"M":"L"}${a.x},${a.y}`);return t.push("Z"),t.join(" ")}I(Fe,"createPathFromPoints");function Fi(e,t,a,r,n,i){const o=[],l=a-e,c=r-t,u=l/i,h=2*Math.PI/u,d=t+c/2;for(let f=0;f<=50;f++){const p=f/50,g=e+p*l,v=d+n*Math.sin(h*(g-e));o.push({x:g,y:v})}return o}I(Fi,"generateFullSineWavePoints");function M_(e,t,a,r,n,i){const o=[],s=n*Math.PI/180,u=(i*Math.PI/180-s)/(r-1);for(let h=0;h<r;h++){const d=s+h*u,f=e+a*Math.cos(d),p=t+a*Math.sin(d);o.push({x:-f,y:-p})}return o}I(M_,"generateCirclePoints");var xvt=I((e,t)=>{var a=e.x,r=e.y,n=t.x-a,i=t.y-r,o=e.width/2,s=e.height/2,l,c;return Math.abs(i)*o>Math.abs(n)*s?(i<0&&(s=-s),l=i===0?0:s*n/i,c=s):(n<0&&(o=-o),l=o,c=n===0?0:o*i/n),{x:a+l,y:r+c}},"intersectRect"),yl=xvt;function RR(e,t){t&&e.attr("style",t)}I(RR,"applyStyle");async function PR(e){const t=$e(document.createElementNS("http://www.w3.org/2000/svg","foreignObject")),a=t.append("xhtml:div");let r=e.label;e.label&&Js(e.label)&&(r=await V0(e.label.replace(vl.lineBreakRegex,`
`),He()));const n=e.isNode?"nodeLabel":"edgeLabel";return a.html('<span class="'+n+'" '+(e.labelStyle?'style="'+e.labelStyle+'"':"")+">"+r+"</span>"),RR(a,e.labelStyle),a.style("display","inline-block"),a.style("padding-right","1px"),a.style("white-space","nowrap"),a.attr("xmlns","http://www.w3.org/1999/xhtml"),t.node()}I(PR,"addHtmlLabel");var Svt=I(async(e,t,a,r)=>{let n=e||"";if(typeof n=="object"&&(n=n[0]),Da(He().flowchart.htmlLabels)){n=n.replace(/\\n|\n/g,"<br />"),It.info("vertexText"+n);const i={isNode:r,label:Ho(n).replace(/fa[blrs]?:fa-[\w-]+/g,s=>`<i class='${s.replace(":"," ")}'></i>`),labelStyle:t&&t.replace("fill:","color:")};return await PR(i)}else{const i=document.createElementNS("http://www.w3.org/2000/svg","text");i.setAttribute("style",t.replace("color:","fill:"));let o=[];typeof n=="string"?o=n.split(/\\n|\n|<br\s*\/?>/gi):Array.isArray(n)?o=n:o=[];for(const s of o){const l=document.createElementNS("http://www.w3.org/2000/svg","tspan");l.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),l.setAttribute("dy","1em"),l.setAttribute("x","0"),a?l.setAttribute("class","title-row"):l.setAttribute("class","row"),l.textContent=s.trim(),i.appendChild(l)}return i}},"createLabel"),vo=Svt,ni=I((e,t,a,r,n)=>["M",e+n,t,"H",e+a-n,"A",n,n,0,0,1,e+a,t+n,"V",t+r-n,"A",n,n,0,0,1,e+a-n,t+r,"H",e+n,"A",n,n,0,0,1,e,t+r-n,"V",t+n,"A",n,n,0,0,1,e+n,t,"Z"].join(" "),"createRoundedRectPathD"),BR=I(async(e,t)=>{It.info("Creating subgraph rect for ",t.id,t);const a=He(),{themeVariables:r,handDrawnSeed:n}=a,{clusterBkg:i,clusterBorder:o}=r,{labelStyles:s,nodeStyles:l,borderStyles:c,backgroundStyles:u}=se(t),h=e.insert("g").attr("class","cluster "+t.cssClasses).attr("id",t.id).attr("data-look",t.look),d=Da(a.flowchart.htmlLabels),f=h.insert("g").attr("class","cluster-label "),p=await Gi(f,t.label,{style:t.labelStyle,useHtmlLabels:d,isNode:!0});let g=p.getBBox();if(Da(a.flowchart.htmlLabels)){const A=p.children[0],k=$e(p);g=A.getBoundingClientRect(),k.attr("width",g.width),k.attr("height",g.height)}const v=t.width<=g.width+t.padding?g.width+t.padding:t.width;t.width<=g.width+t.padding?t.diff=(v-t.width)/2-t.padding:t.diff=-t.padding;const _=t.height,y=t.x-v/2,b=t.y-_/2;It.trace("Data ",t,JSON.stringify(t));let w;if(t.look==="handDrawn"){const A=ae.svg(h),k=ne(t,{roughness:.7,fill:i,stroke:o,fillWeight:3,seed:n}),L=A.path(ni(y,b,v,_,0),k);w=h.insert(()=>(It.debug("Rough node insert CXC",L),L),":first-child"),w.select("path:nth-child(2)").attr("style",c.join(";")),w.select("path").attr("style",u.join(";").replace("fill","stroke"))}else w=h.insert("rect",":first-child"),w.attr("style",l).attr("rx",t.rx).attr("ry",t.ry).attr("x",y).attr("y",b).attr("width",v).attr("height",_);const{subGraphTitleTopMargin:T}=Q0(a);if(f.attr("transform",`translate(${t.x-g.width/2}, ${t.y-t.height/2+T})`),s){const A=f.select("span");A&&A.attr("style",s)}const C=w.node().getBBox();return t.offsetX=0,t.width=C.width,t.height=C.height,t.offsetY=g.height-t.padding/2,t.intersect=function(A){return yl(t,A)},{cluster:h,labelBBox:g}},"rect"),wvt=I((e,t)=>{const a=e.insert("g").attr("class","note-cluster").attr("id",t.id),r=a.insert("rect",":first-child"),n=0*t.padding,i=n/2;r.attr("rx",t.rx).attr("ry",t.ry).attr("x",t.x-t.width/2-i).attr("y",t.y-t.height/2-i).attr("width",t.width+n).attr("height",t.height+n).attr("fill","none");const o=r.node().getBBox();return t.width=o.width,t.height=o.height,t.intersect=function(s){return yl(t,s)},{cluster:a,labelBBox:{width:0,height:0}}},"noteGroup"),Cvt=I(async(e,t)=>{const a=He(),{themeVariables:r,handDrawnSeed:n}=a,{altBackground:i,compositeBackground:o,compositeTitleBackground:s,nodeBorder:l}=r,c=e.insert("g").attr("class",t.cssClasses).attr("id",t.id).attr("data-id",t.id).attr("data-look",t.look),u=c.insert("g",":first-child"),h=c.insert("g").attr("class","cluster-label");let d=c.append("rect");const f=h.node().appendChild(await vo(t.label,t.labelStyle,void 0,!0));let p=f.getBBox();if(Da(a.flowchart.htmlLabels)){const L=f.children[0],M=$e(f);p=L.getBoundingClientRect(),M.attr("width",p.width),M.attr("height",p.height)}const g=0*t.padding,v=g/2,_=(t.width<=p.width+t.padding?p.width+t.padding:t.width)+g;t.width<=p.width+t.padding?t.diff=(_-t.width)/2-t.padding:t.diff=-t.padding;const y=t.height+g,b=t.height+g-p.height-6,w=t.x-_/2,T=t.y-y/2;t.width=_;const C=t.y-t.height/2-v+p.height+2;let A;if(t.look==="handDrawn"){const L=t.cssClasses.includes("statediagram-cluster-alt"),M=ae.svg(c),P=t.rx||t.ry?M.path(ni(w,T,_,y,10),{roughness:.7,fill:s,fillStyle:"solid",stroke:l,seed:n}):M.rectangle(w,T,_,y,{seed:n});A=c.insert(()=>P,":first-child");const E=M.rectangle(w,C,_,b,{fill:L?i:o,fillStyle:L?"hachure":"solid",stroke:l,seed:n});A=c.insert(()=>P,":first-child"),d=c.insert(()=>E)}else A=u.insert("rect",":first-child"),A.attr("class","outer").attr("x",w).attr("y",T).attr("width",_).attr("height",y).attr("data-look",t.look),d.attr("class","inner").attr("x",w).attr("y",C).attr("width",_).attr("height",b);h.attr("transform",`translate(${t.x-p.width/2}, ${T+1-(Da(a.flowchart.htmlLabels)?0:3)})`);const k=A.node().getBBox();return t.height=k.height,t.offsetX=0,t.offsetY=p.height-t.padding/2,t.labelBBox=p,t.intersect=function(L){return yl(t,L)},{cluster:c,labelBBox:p}},"roundedWithTitle"),Tvt=I(async(e,t)=>{It.info("Creating subgraph rect for ",t.id,t);const a=He(),{themeVariables:r,handDrawnSeed:n}=a,{clusterBkg:i,clusterBorder:o}=r,{labelStyles:s,nodeStyles:l,borderStyles:c,backgroundStyles:u}=se(t),h=e.insert("g").attr("class","cluster "+t.cssClasses).attr("id",t.id).attr("data-look",t.look),d=Da(a.flowchart.htmlLabels),f=h.insert("g").attr("class","cluster-label "),p=await Gi(f,t.label,{style:t.labelStyle,useHtmlLabels:d,isNode:!0,width:t.width});let g=p.getBBox();if(Da(a.flowchart.htmlLabels)){const A=p.children[0],k=$e(p);g=A.getBoundingClientRect(),k.attr("width",g.width),k.attr("height",g.height)}const v=t.width<=g.width+t.padding?g.width+t.padding:t.width;t.width<=g.width+t.padding?t.diff=(v-t.width)/2-t.padding:t.diff=-t.padding;const _=t.height,y=t.x-v/2,b=t.y-_/2;It.trace("Data ",t,JSON.stringify(t));let w;if(t.look==="handDrawn"){const A=ae.svg(h),k=ne(t,{roughness:.7,fill:i,stroke:o,fillWeight:4,seed:n}),L=A.path(ni(y,b,v,_,t.rx),k);w=h.insert(()=>(It.debug("Rough node insert CXC",L),L),":first-child"),w.select("path:nth-child(2)").attr("style",c.join(";")),w.select("path").attr("style",u.join(";").replace("fill","stroke"))}else w=h.insert("rect",":first-child"),w.attr("style",l).attr("rx",t.rx).attr("ry",t.ry).attr("x",y).attr("y",b).attr("width",v).attr("height",_);const{subGraphTitleTopMargin:T}=Q0(a);if(f.attr("transform",`translate(${t.x-g.width/2}, ${t.y-t.height/2+T})`),s){const A=f.select("span");A&&A.attr("style",s)}const C=w.node().getBBox();return t.offsetX=0,t.width=C.width,t.height=C.height,t.offsetY=g.height-t.padding/2,t.intersect=function(A){return yl(t,A)},{cluster:h,labelBBox:g}},"kanbanSection"),Avt=I((e,t)=>{const a=He(),{themeVariables:r,handDrawnSeed:n}=a,{nodeBorder:i}=r,o=e.insert("g").attr("class",t.cssClasses).attr("id",t.id).attr("data-look",t.look),s=o.insert("g",":first-child"),l=0*t.padding,c=t.width+l;t.diff=-t.padding;const u=t.height+l,h=t.x-c/2,d=t.y-u/2;t.width=c;let f;if(t.look==="handDrawn"){const v=ae.svg(o).rectangle(h,d,c,u,{fill:"lightgrey",roughness:.5,strokeLineDash:[5],stroke:i,seed:n});f=o.insert(()=>v,":first-child")}else f=s.insert("rect",":first-child"),f.attr("class","divider").attr("x",h).attr("y",d).attr("width",c).attr("height",u).attr("data-look",t.look);const p=f.node().getBBox();return t.height=p.height,t.offsetX=0,t.offsetY=0,t.intersect=function(g){return yl(t,g)},{cluster:o,labelBBox:{}}},"divider"),kvt=BR,Dvt={rect:BR,squareRect:kvt,roundedWithTitle:Cvt,noteGroup:wvt,divider:Avt,kanbanSection:Tvt},OR=new Map,Lvt=I(async(e,t)=>{const a=t.shape||"rect",r=await Dvt[a](e,t);return OR.set(t.id,r),r},"insertCluster"),G_t=I(()=>{OR=new Map},"clear");function NR(e,t){return e.intersect(t)}I(NR,"intersectNode");var Ivt=NR;function $R(e,t,a,r){var n=e.x,i=e.y,o=n-r.x,s=i-r.y,l=Math.sqrt(t*t*s*s+a*a*o*o),c=Math.abs(t*a*o/l);r.x<n&&(c=-c);var u=Math.abs(t*a*s/l);return r.y<i&&(u=-u),{x:n+c,y:i+u}}I($R,"intersectEllipse");var FR=$R;function zR(e,t,a){return FR(e,t,t,a)}I(zR,"intersectCircle");var Mvt=zR;function VR(e,t,a,r){var n,i,o,s,l,c,u,h,d,f,p,g,v,_,y;if(n=t.y-e.y,o=e.x-t.x,l=t.x*e.y-e.x*t.y,d=n*a.x+o*a.y+l,f=n*r.x+o*r.y+l,!(d!==0&&f!==0&&ty(d,f))&&(i=r.y-a.y,s=a.x-r.x,c=r.x*a.y-a.x*r.y,u=i*e.x+s*e.y+c,h=i*t.x+s*t.y+c,!(u!==0&&h!==0&&ty(u,h))&&(p=n*s-i*o,p!==0)))return g=Math.abs(p/2),v=o*c-s*l,_=v<0?(v-g)/p:(v+g)/p,v=i*l-n*c,y=v<0?(v-g)/p:(v+g)/p,{x:_,y}}I(VR,"intersectLine");function ty(e,t){return e*t>0}I(ty,"sameSign");var Evt=VR;function GR(e,t,a){let r=e.x,n=e.y,i=[],o=Number.POSITIVE_INFINITY,s=Number.POSITIVE_INFINITY;typeof t.forEach=="function"?t.forEach(function(u){o=Math.min(o,u.x),s=Math.min(s,u.y)}):(o=Math.min(o,t.x),s=Math.min(s,t.y));let l=r-e.width/2-o,c=n-e.height/2-s;for(let u=0;u<t.length;u++){let h=t[u],d=t[u<t.length-1?u+1:0],f=Evt(e,a,{x:l+h.x,y:c+h.y},{x:l+d.x,y:c+d.y});f&&i.push(f)}return i.length?(i.length>1&&i.sort(function(u,h){let d=u.x-a.x,f=u.y-a.y,p=Math.sqrt(d*d+f*f),g=h.x-a.x,v=h.y-a.y,_=Math.sqrt(g*g+v*v);return p<_?-1:p===_?0:1}),i[0]):e}I(GR,"intersectPolygon");var Rvt=GR,ee={node:Ivt,circle:Mvt,ellipse:FR,polygon:Rvt,rect:yl};function HR(e,t){const{labelStyles:a}=se(t);t.labelStyle=a;const r=be(t);let n=r;r||(n="anchor");const i=e.insert("g").attr("class",n).attr("id",t.domId||t.id),o=1,{cssStyles:s}=t,l=ae.svg(i),c=ne(t,{fill:"black",stroke:"none",fillStyle:"solid"});t.look!=="handDrawn"&&(c.roughness=0);const u=l.circle(0,0,o*2,c),h=i.insert(()=>u,":first-child");return h.attr("class","anchor").attr("style",or(s)),oe(t,h),t.intersect=function(d){return It.info("Circle intersect",t,o,d),ee.circle(t,o,d)},i}I(HR,"anchor");function ey(e,t,a,r,n,i,o){const l=(e+a)/2,c=(t+r)/2,u=Math.atan2(r-t,a-e),h=(a-e)/2,d=(r-t)/2,f=h/n,p=d/i,g=Math.sqrt(f**2+p**2);if(g>1)throw new Error("The given radii are too small to create an arc between the points.");const v=Math.sqrt(1-g**2),_=l+v*i*Math.sin(u)*(o?-1:1),y=c-v*n*Math.cos(u)*(o?-1:1),b=Math.atan2((t-y)/i,(e-_)/n);let T=Math.atan2((r-y)/i,(a-_)/n)-b;o&&T<0&&(T+=2*Math.PI),!o&&T>0&&(T-=2*Math.PI);const C=[];for(let A=0;A<20;A++){const k=A/19,L=b+k*T,M=_+n*Math.cos(L),P=y+i*Math.sin(L);C.push({x:M,y:P})}return C}I(ey,"generateArcPoints");async function WR(e,t){const{labelStyles:a,nodeStyles:r}=se(t);t.labelStyle=a;const{shapeSvg:n,bbox:i}=await Te(e,t,be(t)),o=i.width+t.padding+20,s=i.height+t.padding,l=s/2,c=l/(2.5+s/50),{cssStyles:u}=t,h=[{x:o/2,y:-s/2},{x:-o/2,y:-s/2},...ey(-o/2,-s/2,-o/2,s/2,c,l,!1),{x:o/2,y:s/2},...ey(o/2,s/2,o/2,-s/2,c,l,!0)],d=ae.svg(n),f=ne(t,{});t.look!=="handDrawn"&&(f.roughness=0,f.fillStyle="solid");const p=Fe(h),g=d.path(p,f),v=n.insert(()=>g,":first-child");return v.attr("class","basic label-container"),u&&t.look!=="handDrawn"&&v.selectAll("path").attr("style",u),r&&t.look!=="handDrawn"&&v.selectAll("path").attr("style",r),v.attr("transform",`translate(${c/2}, 0)`),oe(t,v),t.intersect=function(_){return ee.polygon(t,h,_)},n}I(WR,"bowTieRect");function ii(e,t,a,r){return e.insert("polygon",":first-child").attr("points",r.map(function(n){return n.x+","+n.y}).join(" ")).attr("class","label-container").attr("transform","translate("+-t/2+","+a/2+")")}I(ii,"insertPolygonShape");async function qR(e,t){const{labelStyles:a,nodeStyles:r}=se(t);t.labelStyle=a;const{shapeSvg:n,bbox:i}=await Te(e,t,be(t)),o=i.height+t.padding,s=12,l=i.width+t.padding+s,c=0,u=l,h=-o,d=0,f=[{x:c+s,y:h},{x:u,y:h},{x:u,y:d},{x:c,y:d},{x:c,y:h+s},{x:c+s,y:h}];let p;const{cssStyles:g}=t;if(t.look==="handDrawn"){const v=ae.svg(n),_=ne(t,{}),y=Fe(f),b=v.path(y,_);p=n.insert(()=>b,":first-child").attr("transform",`translate(${-l/2}, ${o/2})`),g&&p.attr("style",g)}else p=ii(n,l,o,f);return r&&p.attr("style",r),oe(t,p),t.intersect=function(v){return ee.polygon(t,f,v)},n}I(qR,"card");function UR(e,t){const{nodeStyles:a}=se(t);t.label="";const r=e.insert("g").attr("class",be(t)).attr("id",t.domId??t.id),{cssStyles:n}=t,i=Math.max(28,t.width??0),o=[{x:0,y:i/2},{x:i/2,y:0},{x:0,y:-i/2},{x:-i/2,y:0}],s=ae.svg(r),l=ne(t,{});t.look!=="handDrawn"&&(l.roughness=0,l.fillStyle="solid");const c=Fe(o),u=s.path(c,l),h=r.insert(()=>u,":first-child");return n&&t.look!=="handDrawn"&&h.selectAll("path").attr("style",n),a&&t.look!=="handDrawn"&&h.selectAll("path").attr("style",a),t.width=28,t.height=28,t.intersect=function(d){return ee.polygon(t,o,d)},r}I(UR,"choice");async function jR(e,t){const{labelStyles:a,nodeStyles:r}=se(t);t.labelStyle=a;const{shapeSvg:n,bbox:i,halfPadding:o}=await Te(e,t,be(t)),s=i.width/2+o;let l;const{cssStyles:c}=t;if(t.look==="handDrawn"){const u=ae.svg(n),h=ne(t,{}),d=u.circle(0,0,s*2,h);l=n.insert(()=>d,":first-child"),l.attr("class","basic label-container").attr("style",or(c))}else l=n.insert("circle",":first-child").attr("class","basic label-container").attr("style",r).attr("r",s).attr("cx",0).attr("cy",0);return oe(t,l),t.intersect=function(u){return It.info("Circle intersect",t,s,u),ee.circle(t,s,u)},n}I(jR,"circle");function YR(e){const t=Math.cos(Math.PI/4),a=Math.sin(Math.PI/4),r=e*2,n={x:r/2*t,y:r/2*a},i={x:-(r/2)*t,y:r/2*a},o={x:-(r/2)*t,y:-(r/2)*a},s={x:r/2*t,y:-(r/2)*a};return`M ${i.x},${i.y} L ${s.x},${s.y}
                   M ${n.x},${n.y} L ${o.x},${o.y}`}I(YR,"createLine");function XR(e,t){const{labelStyles:a,nodeStyles:r}=se(t);t.labelStyle=a,t.label="";const n=e.insert("g").attr("class",be(t)).attr("id",t.domId??t.id),i=Math.max(30,(t==null?void 0:t.width)??0),{cssStyles:o}=t,s=ae.svg(n),l=ne(t,{});t.look!=="handDrawn"&&(l.roughness=0,l.fillStyle="solid");const c=s.circle(0,0,i*2,l),u=YR(i),h=s.path(u,l),d=n.insert(()=>c,":first-child");return d.insert(()=>h),o&&t.look!=="handDrawn"&&d.selectAll("path").attr("style",o),r&&t.look!=="handDrawn"&&d.selectAll("path").attr("style",r),oe(t,d),t.intersect=function(f){return It.info("crossedCircle intersect",t,{radius:i,point:f}),ee.circle(t,i,f)},n}I(XR,"crossedCircle");function On(e,t,a,r=100,n=0,i=180){const o=[],s=n*Math.PI/180,u=(i*Math.PI/180-s)/(r-1);for(let h=0;h<r;h++){const d=s+h*u,f=e+a*Math.cos(d),p=t+a*Math.sin(d);o.push({x:-f,y:-p})}return o}I(On,"generateCirclePoints");async function ZR(e,t){const{labelStyles:a,nodeStyles:r}=se(t);t.labelStyle=a;const{shapeSvg:n,bbox:i,label:o}=await Te(e,t,be(t)),s=i.width+(t.padding??0),l=i.height+(t.padding??0),c=Math.max(5,l*.1),{cssStyles:u}=t,h=[...On(s/2,-l/2,c,30,-90,0),{x:-s/2-c,y:c},...On(s/2+c*2,-c,c,20,-180,-270),...On(s/2+c*2,c,c,20,-90,-180),{x:-s/2-c,y:-l/2},...On(s/2,l/2,c,20,0,90)],d=[{x:s/2,y:-l/2-c},{x:-s/2,y:-l/2-c},...On(s/2,-l/2,c,20,-90,0),{x:-s/2-c,y:-c},...On(s/2+s*.1,-c,c,20,-180,-270),...On(s/2+s*.1,c,c,20,-90,-180),{x:-s/2-c,y:l/2},...On(s/2,l/2,c,20,0,90),{x:-s/2,y:l/2+c},{x:s/2,y:l/2+c}],f=ae.svg(n),p=ne(t,{fill:"none"});t.look!=="handDrawn"&&(p.roughness=0,p.fillStyle="solid");const v=Fe(h).replace("Z",""),_=f.path(v,p),y=Fe(d),b=f.path(y,{...p}),w=n.insert("g",":first-child");return w.insert(()=>b,":first-child").attr("stroke-opacity",0),w.insert(()=>_,":first-child"),w.attr("class","text"),u&&t.look!=="handDrawn"&&w.selectAll("path").attr("style",u),r&&t.look!=="handDrawn"&&w.selectAll("path").attr("style",r),w.attr("transform",`translate(${c}, 0)`),o.attr("transform",`translate(${-s/2+c-(i.x-(i.left??0))},${-l/2+(t.padding??0)/2-(i.y-(i.top??0))})`),oe(t,w),t.intersect=function(T){return ee.polygon(t,d,T)},n}I(ZR,"curlyBraceLeft");function Nn(e,t,a,r=100,n=0,i=180){const o=[],s=n*Math.PI/180,u=(i*Math.PI/180-s)/(r-1);for(let h=0;h<r;h++){const d=s+h*u,f=e+a*Math.cos(d),p=t+a*Math.sin(d);o.push({x:f,y:p})}return o}I(Nn,"generateCirclePoints");async function KR(e,t){const{labelStyles:a,nodeStyles:r}=se(t);t.labelStyle=a;const{shapeSvg:n,bbox:i,label:o}=await Te(e,t,be(t)),s=i.width+(t.padding??0),l=i.height+(t.padding??0),c=Math.max(5,l*.1),{cssStyles:u}=t,h=[...Nn(s/2,-l/2,c,20,-90,0),{x:s/2+c,y:-c},...Nn(s/2+c*2,-c,c,20,-180,-270),...Nn(s/2+c*2,c,c,20,-90,-180),{x:s/2+c,y:l/2},...Nn(s/2,l/2,c,20,0,90)],d=[{x:-s/2,y:-l/2-c},{x:s/2,y:-l/2-c},...Nn(s/2,-l/2,c,20,-90,0),{x:s/2+c,y:-c},...Nn(s/2+c*2,-c,c,20,-180,-270),...Nn(s/2+c*2,c,c,20,-90,-180),{x:s/2+c,y:l/2},...Nn(s/2,l/2,c,20,0,90),{x:s/2,y:l/2+c},{x:-s/2,y:l/2+c}],f=ae.svg(n),p=ne(t,{fill:"none"});t.look!=="handDrawn"&&(p.roughness=0,p.fillStyle="solid");const v=Fe(h).replace("Z",""),_=f.path(v,p),y=Fe(d),b=f.path(y,{...p}),w=n.insert("g",":first-child");return w.insert(()=>b,":first-child").attr("stroke-opacity",0),w.insert(()=>_,":first-child"),w.attr("class","text"),u&&t.look!=="handDrawn"&&w.selectAll("path").attr("style",u),r&&t.look!=="handDrawn"&&w.selectAll("path").attr("style",r),w.attr("transform",`translate(${-c}, 0)`),o.attr("transform",`translate(${-s/2+(t.padding??0)/2-(i.x-(i.left??0))},${-l/2+(t.padding??0)/2-(i.y-(i.top??0))})`),oe(t,w),t.intersect=function(T){return ee.polygon(t,d,T)},n}I(KR,"curlyBraceRight");function Ba(e,t,a,r=100,n=0,i=180){const o=[],s=n*Math.PI/180,u=(i*Math.PI/180-s)/(r-1);for(let h=0;h<r;h++){const d=s+h*u,f=e+a*Math.cos(d),p=t+a*Math.sin(d);o.push({x:-f,y:-p})}return o}I(Ba,"generateCirclePoints");async function JR(e,t){const{labelStyles:a,nodeStyles:r}=se(t);t.labelStyle=a;const{shapeSvg:n,bbox:i,label:o}=await Te(e,t,be(t)),s=i.width+(t.padding??0),l=i.height+(t.padding??0),c=Math.max(5,l*.1),{cssStyles:u}=t,h=[...Ba(s/2,-l/2,c,30,-90,0),{x:-s/2-c,y:c},...Ba(s/2+c*2,-c,c,20,-180,-270),...Ba(s/2+c*2,c,c,20,-90,-180),{x:-s/2-c,y:-l/2},...Ba(s/2,l/2,c,20,0,90)],d=[...Ba(-s/2+c+c/2,-l/2,c,20,-90,-180),{x:s/2-c/2,y:c},...Ba(-s/2-c/2,-c,c,20,0,90),...Ba(-s/2-c/2,c,c,20,-90,0),{x:s/2-c/2,y:-c},...Ba(-s/2+c+c/2,l/2,c,30,-180,-270)],f=[{x:s/2,y:-l/2-c},{x:-s/2,y:-l/2-c},...Ba(s/2,-l/2,c,20,-90,0),{x:-s/2-c,y:-c},...Ba(s/2+c*2,-c,c,20,-180,-270),...Ba(s/2+c*2,c,c,20,-90,-180),{x:-s/2-c,y:l/2},...Ba(s/2,l/2,c,20,0,90),{x:-s/2,y:l/2+c},{x:s/2-c-c/2,y:l/2+c},...Ba(-s/2+c+c/2,-l/2,c,20,-90,-180),{x:s/2-c/2,y:c},...Ba(-s/2-c/2,-c,c,20,0,90),...Ba(-s/2-c/2,c,c,20,-90,0),{x:s/2-c/2,y:-c},...Ba(-s/2+c+c/2,l/2,c,30,-180,-270)],p=ae.svg(n),g=ne(t,{fill:"none"});t.look!=="handDrawn"&&(g.roughness=0,g.fillStyle="solid");const _=Fe(h).replace("Z",""),y=p.path(_,g),w=Fe(d).replace("Z",""),T=p.path(w,g),C=Fe(f),A=p.path(C,{...g}),k=n.insert("g",":first-child");return k.insert(()=>A,":first-child").attr("stroke-opacity",0),k.insert(()=>y,":first-child"),k.insert(()=>T,":first-child"),k.attr("class","text"),u&&t.look!=="handDrawn"&&k.selectAll("path").attr("style",u),r&&t.look!=="handDrawn"&&k.selectAll("path").attr("style",r),k.attr("transform",`translate(${c-c/4}, 0)`),o.attr("transform",`translate(${-s/2+(t.padding??0)/2-(i.x-(i.left??0))},${-l/2+(t.padding??0)/2-(i.y-(i.top??0))})`),oe(t,k),t.intersect=function(L){return ee.polygon(t,f,L)},n}I(JR,"curlyBraces");async function QR(e,t){const{labelStyles:a,nodeStyles:r}=se(t);t.labelStyle=a;const{shapeSvg:n,bbox:i}=await Te(e,t,be(t)),o=80,s=20,l=Math.max(o,(i.width+(t.padding??0)*2)*1.25,(t==null?void 0:t.width)??0),c=Math.max(s,i.height+(t.padding??0)*2,(t==null?void 0:t.height)??0),u=c/2,{cssStyles:h}=t,d=ae.svg(n),f=ne(t,{});t.look!=="handDrawn"&&(f.roughness=0,f.fillStyle="solid");const p=l,g=c,v=p-u,_=g/4,y=[{x:v,y:0},{x:_,y:0},{x:0,y:g/2},{x:_,y:g},{x:v,y:g},...M_(-v,-g/2,u,50,270,90)],b=Fe(y),w=d.path(b,f),T=n.insert(()=>w,":first-child");return T.attr("class","basic label-container"),h&&t.look!=="handDrawn"&&T.selectChildren("path").attr("style",h),r&&t.look!=="handDrawn"&&T.selectChildren("path").attr("style",r),T.attr("transform",`translate(${-l/2}, ${-c/2})`),oe(t,T),t.intersect=function(C){return ee.polygon(t,y,C)},n}I(QR,"curvedTrapezoid");var Pvt=I((e,t,a,r,n,i)=>[`M${e},${t+i}`,`a${n},${i} 0,0,0 ${a},0`,`a${n},${i} 0,0,0 ${-a},0`,`l0,${r}`,`a${n},${i} 0,0,0 ${a},0`,`l0,${-r}`].join(" "),"createCylinderPathD"),Bvt=I((e,t,a,r,n,i)=>[`M${e},${t+i}`,`M${e+a},${t+i}`,`a${n},${i} 0,0,0 ${-a},0`,`l0,${r}`,`a${n},${i} 0,0,0 ${a},0`,`l0,${-r}`].join(" "),"createOuterCylinderPathD"),Ovt=I((e,t,a,r,n,i)=>[`M${e-a/2},${-r/2}`,`a${n},${i} 0,0,0 ${a},0`].join(" "),"createInnerCylinderPathD");async function tP(e,t){const{labelStyles:a,nodeStyles:r}=se(t);t.labelStyle=a;const{shapeSvg:n,bbox:i,label:o}=await Te(e,t,be(t)),s=Math.max(i.width+t.padding,t.width??0),l=s/2,c=l/(2.5+s/50),u=Math.max(i.height+c+t.padding,t.height??0);let h;const{cssStyles:d}=t;if(t.look==="handDrawn"){const f=ae.svg(n),p=Bvt(0,0,s,u,l,c),g=Ovt(0,c,s,u,l,c),v=f.path(p,ne(t,{})),_=f.path(g,ne(t,{fill:"none"}));h=n.insert(()=>_,":first-child"),h=n.insert(()=>v,":first-child"),h.attr("class","basic label-container"),d&&h.attr("style",d)}else{const f=Pvt(0,0,s,u,l,c);h=n.insert("path",":first-child").attr("d",f).attr("class","basic label-container").attr("style",or(d)).attr("style",r)}return h.attr("label-offset-y",c),h.attr("transform",`translate(${-s/2}, ${-(u/2+c)})`),oe(t,h),o.attr("transform",`translate(${-(i.width/2)-(i.x-(i.left??0))}, ${-(i.height/2)+(t.padding??0)/1.5-(i.y-(i.top??0))})`),t.intersect=function(f){const p=ee.rect(t,f),g=p.x-(t.x??0);if(l!=0&&(Math.abs(g)<(t.width??0)/2||Math.abs(g)==(t.width??0)/2&&Math.abs(p.y-(t.y??0))>(t.height??0)/2-c)){let v=c*c*(1-g*g/(l*l));v>0&&(v=Math.sqrt(v)),v=c-v,f.y-(t.y??0)>0&&(v=-v),p.y+=v}return p},n}I(tP,"cylinder");async function eP(e,t){const{labelStyles:a,nodeStyles:r}=se(t);t.labelStyle=a;const{shapeSvg:n,bbox:i,label:o}=await Te(e,t,be(t)),s=i.width+t.padding,l=i.height+t.padding,c=l*.2,u=-s/2,h=-l/2-c/2,{cssStyles:d}=t,f=ae.svg(n),p=ne(t,{});t.look!=="handDrawn"&&(p.roughness=0,p.fillStyle="solid");const g=[{x:u,y:h+c},{x:-u,y:h+c},{x:-u,y:-h},{x:u,y:-h},{x:u,y:h},{x:-u,y:h},{x:-u,y:h+c}],v=f.polygon(g.map(y=>[y.x,y.y]),p),_=n.insert(()=>v,":first-child");return _.attr("class","basic label-container"),d&&t.look!=="handDrawn"&&_.selectAll("path").attr("style",d),r&&t.look!=="handDrawn"&&_.selectAll("path").attr("style",r),o.attr("transform",`translate(${u+(t.padding??0)/2-(i.x-(i.left??0))}, ${h+c+(t.padding??0)/2-(i.y-(i.top??0))})`),oe(t,_),t.intersect=function(y){return ee.rect(t,y)},n}I(eP,"dividedRectangle");async function aP(e,t){var d,f;const{labelStyles:a,nodeStyles:r}=se(t);t.labelStyle=a;const{shapeSvg:n,bbox:i,halfPadding:o}=await Te(e,t,be(t)),l=i.width/2+o+5,c=i.width/2+o;let u;const{cssStyles:h}=t;if(t.look==="handDrawn"){const p=ae.svg(n),g=ne(t,{roughness:.2,strokeWidth:2.5}),v=ne(t,{roughness:.2,strokeWidth:1.5}),_=p.circle(0,0,l*2,g),y=p.circle(0,0,c*2,v);u=n.insert("g",":first-child"),u.attr("class",or(t.cssClasses)).attr("style",or(h)),(d=u.node())==null||d.appendChild(_),(f=u.node())==null||f.appendChild(y)}else{u=n.insert("g",":first-child");const p=u.insert("circle",":first-child"),g=u.insert("circle");u.attr("class","basic label-container").attr("style",r),p.attr("class","outer-circle").attr("style",r).attr("r",l).attr("cx",0).attr("cy",0),g.attr("class","inner-circle").attr("style",r).attr("r",c).attr("cx",0).attr("cy",0)}return oe(t,u),t.intersect=function(p){return It.info("DoubleCircle intersect",t,l,p),ee.circle(t,l,p)},n}I(aP,"doublecircle");function rP(e,t,{config:{themeVariables:a}}){const{labelStyles:r,nodeStyles:n}=se(t);t.label="",t.labelStyle=r;const i=e.insert("g").attr("class",be(t)).attr("id",t.domId??t.id),o=7,{cssStyles:s}=t,l=ae.svg(i),{nodeBorder:c}=a,u=ne(t,{fillStyle:"solid"});t.look!=="handDrawn"&&(u.roughness=0);const h=l.circle(0,0,o*2,u),d=i.insert(()=>h,":first-child");return d.selectAll("path").attr("style",`fill: ${c} !important;`),s&&s.length>0&&t.look!=="handDrawn"&&d.selectAll("path").attr("style",s),n&&t.look!=="handDrawn"&&d.selectAll("path").attr("style",n),oe(t,d),t.intersect=function(f){return It.info("filledCircle intersect",t,{radius:o,point:f}),ee.circle(t,o,f)},i}I(rP,"filledCircle");async function nP(e,t){const{labelStyles:a,nodeStyles:r}=se(t);t.labelStyle=a;const{shapeSvg:n,bbox:i,label:o}=await Te(e,t,be(t)),s=i.width+(t.padding??0),l=s+i.height,c=s+i.height,u=[{x:0,y:-l},{x:c,y:-l},{x:c/2,y:0}],{cssStyles:h}=t,d=ae.svg(n),f=ne(t,{});t.look!=="handDrawn"&&(f.roughness=0,f.fillStyle="solid");const p=Fe(u),g=d.path(p,f),v=n.insert(()=>g,":first-child").attr("transform",`translate(${-l/2}, ${l/2})`);return h&&t.look!=="handDrawn"&&v.selectChildren("path").attr("style",h),r&&t.look!=="handDrawn"&&v.selectChildren("path").attr("style",r),t.width=s,t.height=l,oe(t,v),o.attr("transform",`translate(${-i.width/2-(i.x-(i.left??0))}, ${-l/2+(t.padding??0)/2+(i.y-(i.top??0))})`),t.intersect=function(_){return It.info("Triangle intersect",t,u,_),ee.polygon(t,u,_)},n}I(nP,"flippedTriangle");function iP(e,t,{dir:a,config:{state:r,themeVariables:n}}){const{nodeStyles:i}=se(t);t.label="";const o=e.insert("g").attr("class",be(t)).attr("id",t.domId??t.id),{cssStyles:s}=t;let l=Math.max(70,(t==null?void 0:t.width)??0),c=Math.max(10,(t==null?void 0:t.height)??0);a==="LR"&&(l=Math.max(10,(t==null?void 0:t.width)??0),c=Math.max(70,(t==null?void 0:t.height)??0));const u=-1*l/2,h=-1*c/2,d=ae.svg(o),f=ne(t,{stroke:n.lineColor,fill:n.lineColor});t.look!=="handDrawn"&&(f.roughness=0,f.fillStyle="solid");const p=d.rectangle(u,h,l,c,f),g=o.insert(()=>p,":first-child");s&&t.look!=="handDrawn"&&g.selectAll("path").attr("style",s),i&&t.look!=="handDrawn"&&g.selectAll("path").attr("style",i),oe(t,g);const v=(r==null?void 0:r.padding)??0;return t.width&&t.height&&(t.width+=v/2||0,t.height+=v/2||0),t.intersect=function(_){return ee.rect(t,_)},o}I(iP,"forkJoin");async function oP(e,t){const{labelStyles:a,nodeStyles:r}=se(t);t.labelStyle=a;const n=80,i=50,{shapeSvg:o,bbox:s}=await Te(e,t,be(t)),l=Math.max(n,s.width+(t.padding??0)*2,(t==null?void 0:t.width)??0),c=Math.max(i,s.height+(t.padding??0)*2,(t==null?void 0:t.height)??0),u=c/2,{cssStyles:h}=t,d=ae.svg(o),f=ne(t,{});t.look!=="handDrawn"&&(f.roughness=0,f.fillStyle="solid");const p=[{x:-l/2,y:-c/2},{x:l/2-u,y:-c/2},...M_(-l/2+u,0,u,50,90,270),{x:l/2-u,y:c/2},{x:-l/2,y:c/2}],g=Fe(p),v=d.path(g,f),_=o.insert(()=>v,":first-child");return _.attr("class","basic label-container"),h&&t.look!=="handDrawn"&&_.selectChildren("path").attr("style",h),r&&t.look!=="handDrawn"&&_.selectChildren("path").attr("style",r),oe(t,_),t.intersect=function(y){return It.info("Pill intersect",t,{radius:u,point:y}),ee.polygon(t,p,y)},o}I(oP,"halfRoundedRectangle");var Nvt=I((e,t,a,r,n)=>[`M${e+n},${t}`,`L${e+a-n},${t}`,`L${e+a},${t-r/2}`,`L${e+a-n},${t-r}`,`L${e+n},${t-r}`,`L${e},${t-r/2}`,"Z"].join(" "),"createHexagonPathD");async function sP(e,t){const{labelStyles:a,nodeStyles:r}=se(t);t.labelStyle=a;const{shapeSvg:n,bbox:i}=await Te(e,t,be(t)),o=4,s=i.height+t.padding,l=s/o,c=i.width+2*l+t.padding,u=[{x:l,y:0},{x:c-l,y:0},{x:c,y:-s/2},{x:c-l,y:-s},{x:l,y:-s},{x:0,y:-s/2}];let h;const{cssStyles:d}=t;if(t.look==="handDrawn"){const f=ae.svg(n),p=ne(t,{}),g=Nvt(0,0,c,s,l),v=f.path(g,p);h=n.insert(()=>v,":first-child").attr("transform",`translate(${-c/2}, ${s/2})`),d&&h.attr("style",d)}else h=ii(n,c,s,u);return r&&h.attr("style",r),t.width=c,t.height=s,oe(t,h),t.intersect=function(f){return ee.polygon(t,u,f)},n}I(sP,"hexagon");async function lP(e,t){const{labelStyles:a,nodeStyles:r}=se(t);t.label="",t.labelStyle=a;const{shapeSvg:n}=await Te(e,t,be(t)),i=Math.max(30,(t==null?void 0:t.width)??0),o=Math.max(30,(t==null?void 0:t.height)??0),{cssStyles:s}=t,l=ae.svg(n),c=ne(t,{});t.look!=="handDrawn"&&(c.roughness=0,c.fillStyle="solid");const u=[{x:0,y:0},{x:i,y:0},{x:0,y:o},{x:i,y:o}],h=Fe(u),d=l.path(h,c),f=n.insert(()=>d,":first-child");return f.attr("class","basic label-container"),s&&t.look!=="handDrawn"&&f.selectChildren("path").attr("style",s),r&&t.look!=="handDrawn"&&f.selectChildren("path").attr("style",r),f.attr("transform",`translate(${-i/2}, ${-o/2})`),oe(t,f),t.intersect=function(p){return It.info("Pill intersect",t,{points:u}),ee.polygon(t,u,p)},n}I(lP,"hourglass");async function cP(e,t,{config:{themeVariables:a,flowchart:r}}){const{labelStyles:n}=se(t);t.labelStyle=n;const i=t.assetHeight??48,o=t.assetWidth??48,s=Math.max(i,o),l=r==null?void 0:r.wrappingWidth;t.width=Math.max(s,l??0);const{shapeSvg:c,bbox:u,label:h}=await Te(e,t,"icon-shape default"),d=t.pos==="t",f=s,p=s,{nodeBorder:g}=a,{stylesMap:v}=ml(t),_=-p/2,y=-f/2,b=t.label?8:0,w=ae.svg(c),T=ne(t,{stroke:"none",fill:"none"});t.look!=="handDrawn"&&(T.roughness=0,T.fillStyle="solid");const C=w.rectangle(_,y,p,f,T),A=Math.max(p,u.width),k=f+u.height+b,L=w.rectangle(-A/2,-k/2,A,k,{...T,fill:"transparent",stroke:"none"}),M=c.insert(()=>C,":first-child"),P=c.insert(()=>L);if(t.icon){const E=c.append("g");E.html(`<g>${await Du(t.icon,{height:s,width:s,fallbackPrefix:""})}</g>`);const D=E.node().getBBox(),O=D.width,B=D.height,R=D.x,V=D.y;E.attr("transform",`translate(${-O/2-R},${d?u.height/2+b/2-B/2-V:-u.height/2-b/2-B/2-V})`),E.attr("style",`color: ${v.get("stroke")??g};`)}return h.attr("transform",`translate(${-u.width/2-(u.x-(u.left??0))},${d?-k/2:k/2-u.height})`),M.attr("transform",`translate(0,${d?u.height/2+b/2:-u.height/2-b/2})`),oe(t,P),t.intersect=function(E){if(It.info("iconSquare intersect",t,E),!t.label)return ee.rect(t,E);const D=t.x??0,O=t.y??0,B=t.height??0;let R=[];return d?R=[{x:D-u.width/2,y:O-B/2},{x:D+u.width/2,y:O-B/2},{x:D+u.width/2,y:O-B/2+u.height+b},{x:D+p/2,y:O-B/2+u.height+b},{x:D+p/2,y:O+B/2},{x:D-p/2,y:O+B/2},{x:D-p/2,y:O-B/2+u.height+b},{x:D-u.width/2,y:O-B/2+u.height+b}]:R=[{x:D-p/2,y:O-B/2},{x:D+p/2,y:O-B/2},{x:D+p/2,y:O-B/2+f},{x:D+u.width/2,y:O-B/2+f},{x:D+u.width/2/2,y:O+B/2},{x:D-u.width/2,y:O+B/2},{x:D-u.width/2,y:O-B/2+f},{x:D-p/2,y:O-B/2+f}],ee.polygon(t,R,E)},c}I(cP,"icon");async function uP(e,t,{config:{themeVariables:a,flowchart:r}}){const{labelStyles:n}=se(t);t.labelStyle=n;const i=t.assetHeight??48,o=t.assetWidth??48,s=Math.max(i,o),l=r==null?void 0:r.wrappingWidth;t.width=Math.max(s,l??0);const{shapeSvg:c,bbox:u,label:h}=await Te(e,t,"icon-shape default"),d=20,f=t.label?8:0,p=t.pos==="t",{nodeBorder:g,mainBkg:v}=a,{stylesMap:_}=ml(t),y=ae.svg(c),b=ne(t,{});t.look!=="handDrawn"&&(b.roughness=0,b.fillStyle="solid");const w=_.get("fill");b.stroke=w??v;const T=c.append("g");t.icon&&T.html(`<g>${await Du(t.icon,{height:s,width:s,fallbackPrefix:""})}</g>`);const C=T.node().getBBox(),A=C.width,k=C.height,L=C.x,M=C.y,P=Math.max(A,k)*Math.SQRT2+d*2,E=y.circle(0,0,P,b),D=Math.max(P,u.width),O=P+u.height+f,B=y.rectangle(-D/2,-O/2,D,O,{...b,fill:"transparent",stroke:"none"}),R=c.insert(()=>E,":first-child"),V=c.insert(()=>B);return T.attr("transform",`translate(${-A/2-L},${p?u.height/2+f/2-k/2-M:-u.height/2-f/2-k/2-M})`),T.attr("style",`color: ${_.get("stroke")??g};`),h.attr("transform",`translate(${-u.width/2-(u.x-(u.left??0))},${p?-O/2:O/2-u.height})`),R.attr("transform",`translate(0,${p?u.height/2+f/2:-u.height/2-f/2})`),oe(t,V),t.intersect=function(z){return It.info("iconSquare intersect",t,z),ee.rect(t,z)},c}I(uP,"iconCircle");async function hP(e,t,{config:{themeVariables:a,flowchart:r}}){const{labelStyles:n}=se(t);t.labelStyle=n;const i=t.assetHeight??48,o=t.assetWidth??48,s=Math.max(i,o),l=r==null?void 0:r.wrappingWidth;t.width=Math.max(s,l??0);const{shapeSvg:c,bbox:u,halfPadding:h,label:d}=await Te(e,t,"icon-shape default"),f=t.pos==="t",p=s+h*2,g=s+h*2,{nodeBorder:v,mainBkg:_}=a,{stylesMap:y}=ml(t),b=-g/2,w=-p/2,T=t.label?8:0,C=ae.svg(c),A=ne(t,{});t.look!=="handDrawn"&&(A.roughness=0,A.fillStyle="solid");const k=y.get("fill");A.stroke=k??_;const L=C.path(ni(b,w,g,p,5),A),M=Math.max(g,u.width),P=p+u.height+T,E=C.rectangle(-M/2,-P/2,M,P,{...A,fill:"transparent",stroke:"none"}),D=c.insert(()=>L,":first-child").attr("class","icon-shape2"),O=c.insert(()=>E);if(t.icon){const B=c.append("g");B.html(`<g>${await Du(t.icon,{height:s,width:s,fallbackPrefix:""})}</g>`);const R=B.node().getBBox(),V=R.width,z=R.height,W=R.x,it=R.y;B.attr("transform",`translate(${-V/2-W},${f?u.height/2+T/2-z/2-it:-u.height/2-T/2-z/2-it})`),B.attr("style",`color: ${y.get("stroke")??v};`)}return d.attr("transform",`translate(${-u.width/2-(u.x-(u.left??0))},${f?-P/2:P/2-u.height})`),D.attr("transform",`translate(0,${f?u.height/2+T/2:-u.height/2-T/2})`),oe(t,O),t.intersect=function(B){if(It.info("iconSquare intersect",t,B),!t.label)return ee.rect(t,B);const R=t.x??0,V=t.y??0,z=t.height??0;let W=[];return f?W=[{x:R-u.width/2,y:V-z/2},{x:R+u.width/2,y:V-z/2},{x:R+u.width/2,y:V-z/2+u.height+T},{x:R+g/2,y:V-z/2+u.height+T},{x:R+g/2,y:V+z/2},{x:R-g/2,y:V+z/2},{x:R-g/2,y:V-z/2+u.height+T},{x:R-u.width/2,y:V-z/2+u.height+T}]:W=[{x:R-g/2,y:V-z/2},{x:R+g/2,y:V-z/2},{x:R+g/2,y:V-z/2+p},{x:R+u.width/2,y:V-z/2+p},{x:R+u.width/2/2,y:V+z/2},{x:R-u.width/2,y:V+z/2},{x:R-u.width/2,y:V-z/2+p},{x:R-g/2,y:V-z/2+p}],ee.polygon(t,W,B)},c}I(hP,"iconRounded");async function dP(e,t,{config:{themeVariables:a,flowchart:r}}){const{labelStyles:n}=se(t);t.labelStyle=n;const i=t.assetHeight??48,o=t.assetWidth??48,s=Math.max(i,o),l=r==null?void 0:r.wrappingWidth;t.width=Math.max(s,l??0);const{shapeSvg:c,bbox:u,halfPadding:h,label:d}=await Te(e,t,"icon-shape default"),f=t.pos==="t",p=s+h*2,g=s+h*2,{nodeBorder:v,mainBkg:_}=a,{stylesMap:y}=ml(t),b=-g/2,w=-p/2,T=t.label?8:0,C=ae.svg(c),A=ne(t,{});t.look!=="handDrawn"&&(A.roughness=0,A.fillStyle="solid");const k=y.get("fill");A.stroke=k??_;const L=C.path(ni(b,w,g,p,.1),A),M=Math.max(g,u.width),P=p+u.height+T,E=C.rectangle(-M/2,-P/2,M,P,{...A,fill:"transparent",stroke:"none"}),D=c.insert(()=>L,":first-child"),O=c.insert(()=>E);if(t.icon){const B=c.append("g");B.html(`<g>${await Du(t.icon,{height:s,width:s,fallbackPrefix:""})}</g>`);const R=B.node().getBBox(),V=R.width,z=R.height,W=R.x,it=R.y;B.attr("transform",`translate(${-V/2-W},${f?u.height/2+T/2-z/2-it:-u.height/2-T/2-z/2-it})`),B.attr("style",`color: ${y.get("stroke")??v};`)}return d.attr("transform",`translate(${-u.width/2-(u.x-(u.left??0))},${f?-P/2:P/2-u.height})`),D.attr("transform",`translate(0,${f?u.height/2+T/2:-u.height/2-T/2})`),oe(t,O),t.intersect=function(B){if(It.info("iconSquare intersect",t,B),!t.label)return ee.rect(t,B);const R=t.x??0,V=t.y??0,z=t.height??0;let W=[];return f?W=[{x:R-u.width/2,y:V-z/2},{x:R+u.width/2,y:V-z/2},{x:R+u.width/2,y:V-z/2+u.height+T},{x:R+g/2,y:V-z/2+u.height+T},{x:R+g/2,y:V+z/2},{x:R-g/2,y:V+z/2},{x:R-g/2,y:V-z/2+u.height+T},{x:R-u.width/2,y:V-z/2+u.height+T}]:W=[{x:R-g/2,y:V-z/2},{x:R+g/2,y:V-z/2},{x:R+g/2,y:V-z/2+p},{x:R+u.width/2,y:V-z/2+p},{x:R+u.width/2/2,y:V+z/2},{x:R-u.width/2,y:V+z/2},{x:R-u.width/2,y:V-z/2+p},{x:R-g/2,y:V-z/2+p}],ee.polygon(t,W,B)},c}I(dP,"iconSquare");async function fP(e,t,{config:{flowchart:a}}){const r=new Image;r.src=(t==null?void 0:t.img)??"",await r.decode();const n=Number(r.naturalWidth.toString().replace("px","")),i=Number(r.naturalHeight.toString().replace("px",""));t.imageAspectRatio=n/i;const{labelStyles:o}=se(t);t.labelStyle=o;const s=a==null?void 0:a.wrappingWidth;t.defaultWidth=a==null?void 0:a.wrappingWidth;const l=Math.max(t.label?s??0:0,(t==null?void 0:t.assetWidth)??n),c=t.constraint==="on"&&t!=null&&t.assetHeight?t.assetHeight*t.imageAspectRatio:l,u=t.constraint==="on"?c/t.imageAspectRatio:(t==null?void 0:t.assetHeight)??i;t.width=Math.max(c,s??0);const{shapeSvg:h,bbox:d,label:f}=await Te(e,t,"image-shape default"),p=t.pos==="t",g=-c/2,v=-u/2,_=t.label?8:0,y=ae.svg(h),b=ne(t,{});t.look!=="handDrawn"&&(b.roughness=0,b.fillStyle="solid");const w=y.rectangle(g,v,c,u,b),T=Math.max(c,d.width),C=u+d.height+_,A=y.rectangle(-T/2,-C/2,T,C,{...b,fill:"none",stroke:"none"}),k=h.insert(()=>w,":first-child"),L=h.insert(()=>A);if(t.img){const M=h.append("image");M.attr("href",t.img),M.attr("width",c),M.attr("height",u),M.attr("preserveAspectRatio","none"),M.attr("transform",`translate(${-c/2},${p?C/2-u:-C/2})`)}return f.attr("transform",`translate(${-d.width/2-(d.x-(d.left??0))},${p?-u/2-d.height/2-_/2:u/2-d.height/2+_/2})`),k.attr("transform",`translate(0,${p?d.height/2+_/2:-d.height/2-_/2})`),oe(t,L),t.intersect=function(M){if(It.info("iconSquare intersect",t,M),!t.label)return ee.rect(t,M);const P=t.x??0,E=t.y??0,D=t.height??0;let O=[];return p?O=[{x:P-d.width/2,y:E-D/2},{x:P+d.width/2,y:E-D/2},{x:P+d.width/2,y:E-D/2+d.height+_},{x:P+c/2,y:E-D/2+d.height+_},{x:P+c/2,y:E+D/2},{x:P-c/2,y:E+D/2},{x:P-c/2,y:E-D/2+d.height+_},{x:P-d.width/2,y:E-D/2+d.height+_}]:O=[{x:P-c/2,y:E-D/2},{x:P+c/2,y:E-D/2},{x:P+c/2,y:E-D/2+u},{x:P+d.width/2,y:E-D/2+u},{x:P+d.width/2/2,y:E+D/2},{x:P-d.width/2,y:E+D/2},{x:P-d.width/2,y:E-D/2+u},{x:P-c/2,y:E-D/2+u}],ee.polygon(t,O,M)},h}I(fP,"imageSquare");async function pP(e,t){const{labelStyles:a,nodeStyles:r}=se(t);t.labelStyle=a;const{shapeSvg:n,bbox:i}=await Te(e,t,be(t)),o=Math.max(i.width+(t.padding??0)*2,(t==null?void 0:t.width)??0),s=Math.max(i.height+(t.padding??0)*2,(t==null?void 0:t.height)??0),l=[{x:0,y:0},{x:o,y:0},{x:o+3*s/6,y:-s},{x:-3*s/6,y:-s}];let c;const{cssStyles:u}=t;if(t.look==="handDrawn"){const h=ae.svg(n),d=ne(t,{}),f=Fe(l),p=h.path(f,d);c=n.insert(()=>p,":first-child").attr("transform",`translate(${-o/2}, ${s/2})`),u&&c.attr("style",u)}else c=ii(n,o,s,l);return r&&c.attr("style",r),t.width=o,t.height=s,oe(t,c),t.intersect=function(h){return ee.polygon(t,l,h)},n}I(pP,"inv_trapezoid");async function Iu(e,t,a){const{labelStyles:r,nodeStyles:n}=se(t);t.labelStyle=r;const{shapeSvg:i,bbox:o}=await Te(e,t,be(t)),s=Math.max(o.width+a.labelPaddingX*2,(t==null?void 0:t.width)||0),l=Math.max(o.height+a.labelPaddingY*2,(t==null?void 0:t.height)||0),c=-s/2,u=-l/2;let h,{rx:d,ry:f}=t;const{cssStyles:p}=t;if(a!=null&&a.rx&&a.ry&&(d=a.rx,f=a.ry),t.look==="handDrawn"){const g=ae.svg(i),v=ne(t,{}),_=d||f?g.path(ni(c,u,s,l,d||0),v):g.rectangle(c,u,s,l,v);h=i.insert(()=>_,":first-child"),h.attr("class","basic label-container").attr("style",or(p))}else h=i.insert("rect",":first-child"),h.attr("class","basic label-container").attr("style",n).attr("rx",or(d)).attr("ry",or(f)).attr("x",c).attr("y",u).attr("width",s).attr("height",l);return oe(t,h),t.intersect=function(g){return ee.rect(t,g)},i}I(Iu,"drawRect");async function gP(e,t){const{shapeSvg:a,bbox:r,label:n}=await Te(e,t,"label"),i=a.insert("rect",":first-child");return i.attr("width",.1).attr("height",.1),a.attr("class","label edgeLabel"),n.attr("transform",`translate(${-(r.width/2)-(r.x-(r.left??0))}, ${-(r.height/2)-(r.y-(r.top??0))})`),oe(t,i),t.intersect=function(l){return ee.rect(t,l)},a}I(gP,"labelRect");async function vP(e,t){const{labelStyles:a,nodeStyles:r}=se(t);t.labelStyle=a;const{shapeSvg:n,bbox:i}=await Te(e,t,be(t)),o=Math.max(i.width+(t.padding??0),(t==null?void 0:t.width)??0),s=Math.max(i.height+(t.padding??0),(t==null?void 0:t.height)??0),l=[{x:0,y:0},{x:o+3*s/6,y:0},{x:o,y:-s},{x:-(3*s)/6,y:-s}];let c;const{cssStyles:u}=t;if(t.look==="handDrawn"){const h=ae.svg(n),d=ne(t,{}),f=Fe(l),p=h.path(f,d);c=n.insert(()=>p,":first-child").attr("transform",`translate(${-o/2}, ${s/2})`),u&&c.attr("style",u)}else c=ii(n,o,s,l);return r&&c.attr("style",r),t.width=o,t.height=s,oe(t,c),t.intersect=function(h){return ee.polygon(t,l,h)},n}I(vP,"lean_left");async function mP(e,t){const{labelStyles:a,nodeStyles:r}=se(t);t.labelStyle=a;const{shapeSvg:n,bbox:i}=await Te(e,t,be(t)),o=Math.max(i.width+(t.padding??0),(t==null?void 0:t.width)??0),s=Math.max(i.height+(t.padding??0),(t==null?void 0:t.height)??0),l=[{x:-3*s/6,y:0},{x:o,y:0},{x:o+3*s/6,y:-s},{x:0,y:-s}];let c;const{cssStyles:u}=t;if(t.look==="handDrawn"){const h=ae.svg(n),d=ne(t,{}),f=Fe(l),p=h.path(f,d);c=n.insert(()=>p,":first-child").attr("transform",`translate(${-o/2}, ${s/2})`),u&&c.attr("style",u)}else c=ii(n,o,s,l);return r&&c.attr("style",r),t.width=o,t.height=s,oe(t,c),t.intersect=function(h){return ee.polygon(t,l,h)},n}I(mP,"lean_right");function yP(e,t){const{labelStyles:a,nodeStyles:r}=se(t);t.label="",t.labelStyle=a;const n=e.insert("g").attr("class",be(t)).attr("id",t.domId??t.id),{cssStyles:i}=t,o=Math.max(35,(t==null?void 0:t.width)??0),s=Math.max(35,(t==null?void 0:t.height)??0),l=7,c=[{x:o,y:0},{x:0,y:s+l/2},{x:o-2*l,y:s+l/2},{x:0,y:2*s},{x:o,y:s-l/2},{x:2*l,y:s-l/2}],u=ae.svg(n),h=ne(t,{});t.look!=="handDrawn"&&(h.roughness=0,h.fillStyle="solid");const d=Fe(c),f=u.path(d,h),p=n.insert(()=>f,":first-child");return i&&t.look!=="handDrawn"&&p.selectAll("path").attr("style",i),r&&t.look!=="handDrawn"&&p.selectAll("path").attr("style",r),p.attr("transform",`translate(-${o/2},${-s})`),oe(t,p),t.intersect=function(g){return It.info("lightningBolt intersect",t,g),ee.polygon(t,c,g)},n}I(yP,"lightningBolt");var $vt=I((e,t,a,r,n,i,o)=>[`M${e},${t+i}`,`a${n},${i} 0,0,0 ${a},0`,`a${n},${i} 0,0,0 ${-a},0`,`l0,${r}`,`a${n},${i} 0,0,0 ${a},0`,`l0,${-r}`,`M${e},${t+i+o}`,`a${n},${i} 0,0,0 ${a},0`].join(" "),"createCylinderPathD"),Fvt=I((e,t,a,r,n,i,o)=>[`M${e},${t+i}`,`M${e+a},${t+i}`,`a${n},${i} 0,0,0 ${-a},0`,`l0,${r}`,`a${n},${i} 0,0,0 ${a},0`,`l0,${-r}`,`M${e},${t+i+o}`,`a${n},${i} 0,0,0 ${a},0`].join(" "),"createOuterCylinderPathD"),zvt=I((e,t,a,r,n,i)=>[`M${e-a/2},${-r/2}`,`a${n},${i} 0,0,0 ${a},0`].join(" "),"createInnerCylinderPathD");async function _P(e,t){const{labelStyles:a,nodeStyles:r}=se(t);t.labelStyle=a;const{shapeSvg:n,bbox:i,label:o}=await Te(e,t,be(t)),s=Math.max(i.width+(t.padding??0),t.width??0),l=s/2,c=l/(2.5+s/50),u=Math.max(i.height+c+(t.padding??0),t.height??0),h=u*.1;let d;const{cssStyles:f}=t;if(t.look==="handDrawn"){const p=ae.svg(n),g=Fvt(0,0,s,u,l,c,h),v=zvt(0,c,s,u,l,c),_=ne(t,{}),y=p.path(g,_),b=p.path(v,_);n.insert(()=>b,":first-child").attr("class","line"),d=n.insert(()=>y,":first-child"),d.attr("class","basic label-container"),f&&d.attr("style",f)}else{const p=$vt(0,0,s,u,l,c,h);d=n.insert("path",":first-child").attr("d",p).attr("class","basic label-container").attr("style",or(f)).attr("style",r)}return d.attr("label-offset-y",c),d.attr("transform",`translate(${-s/2}, ${-(u/2+c)})`),oe(t,d),o.attr("transform",`translate(${-(i.width/2)-(i.x-(i.left??0))}, ${-(i.height/2)+c-(i.y-(i.top??0))})`),t.intersect=function(p){const g=ee.rect(t,p),v=g.x-(t.x??0);if(l!=0&&(Math.abs(v)<(t.width??0)/2||Math.abs(v)==(t.width??0)/2&&Math.abs(g.y-(t.y??0))>(t.height??0)/2-c)){let _=c*c*(1-v*v/(l*l));_>0&&(_=Math.sqrt(_)),_=c-_,p.y-(t.y??0)>0&&(_=-_),g.y+=_}return g},n}I(_P,"linedCylinder");async function bP(e,t){const{labelStyles:a,nodeStyles:r}=se(t);t.labelStyle=a;const{shapeSvg:n,bbox:i,label:o}=await Te(e,t,be(t)),s=Math.max(i.width+(t.padding??0)*2,(t==null?void 0:t.width)??0),l=Math.max(i.height+(t.padding??0)*2,(t==null?void 0:t.height)??0),c=l/4,u=l+c,{cssStyles:h}=t,d=ae.svg(n),f=ne(t,{});t.look!=="handDrawn"&&(f.roughness=0,f.fillStyle="solid");const p=[{x:-s/2-s/2*.1,y:-u/2},{x:-s/2-s/2*.1,y:u/2},...Fi(-s/2-s/2*.1,u/2,s/2+s/2*.1,u/2,c,.8),{x:s/2+s/2*.1,y:-u/2},{x:-s/2-s/2*.1,y:-u/2},{x:-s/2,y:-u/2},{x:-s/2,y:u/2*1.1},{x:-s/2,y:-u/2}],g=d.polygon(p.map(_=>[_.x,_.y]),f),v=n.insert(()=>g,":first-child");return v.attr("class","basic label-container"),h&&t.look!=="handDrawn"&&v.selectAll("path").attr("style",h),r&&t.look!=="handDrawn"&&v.selectAll("path").attr("style",r),v.attr("transform",`translate(0,${-c/2})`),o.attr("transform",`translate(${-s/2+(t.padding??0)+s/2*.1/2-(i.x-(i.left??0))},${-l/2+(t.padding??0)-c/2-(i.y-(i.top??0))})`),oe(t,v),t.intersect=function(_){return ee.polygon(t,p,_)},n}I(bP,"linedWaveEdgedRect");async function xP(e,t){const{labelStyles:a,nodeStyles:r}=se(t);t.labelStyle=a;const{shapeSvg:n,bbox:i,label:o}=await Te(e,t,be(t)),s=Math.max(i.width+(t.padding??0)*2,(t==null?void 0:t.width)??0),l=Math.max(i.height+(t.padding??0)*2,(t==null?void 0:t.height)??0),c=5,u=-s/2,h=-l/2,{cssStyles:d}=t,f=ae.svg(n),p=ne(t,{}),g=[{x:u-c,y:h+c},{x:u-c,y:h+l+c},{x:u+s-c,y:h+l+c},{x:u+s-c,y:h+l},{x:u+s,y:h+l},{x:u+s,y:h+l-c},{x:u+s+c,y:h+l-c},{x:u+s+c,y:h-c},{x:u+c,y:h-c},{x:u+c,y:h},{x:u,y:h},{x:u,y:h+c}],v=[{x:u,y:h+c},{x:u+s-c,y:h+c},{x:u+s-c,y:h+l},{x:u+s,y:h+l},{x:u+s,y:h},{x:u,y:h}];t.look!=="handDrawn"&&(p.roughness=0,p.fillStyle="solid");const _=Fe(g),y=f.path(_,p),b=Fe(v),w=f.path(b,{...p,fill:"none"}),T=n.insert(()=>w,":first-child");return T.insert(()=>y,":first-child"),T.attr("class","basic label-container"),d&&t.look!=="handDrawn"&&T.selectAll("path").attr("style",d),r&&t.look!=="handDrawn"&&T.selectAll("path").attr("style",r),o.attr("transform",`translate(${-(i.width/2)-c-(i.x-(i.left??0))}, ${-(i.height/2)+c-(i.y-(i.top??0))})`),oe(t,T),t.intersect=function(C){return ee.polygon(t,g,C)},n}I(xP,"multiRect");async function SP(e,t){const{labelStyles:a,nodeStyles:r}=se(t);t.labelStyle=a;const{shapeSvg:n,bbox:i,label:o}=await Te(e,t,be(t)),s=Math.max(i.width+(t.padding??0)*2,(t==null?void 0:t.width)??0),l=Math.max(i.height+(t.padding??0)*2,(t==null?void 0:t.height)??0),c=l/4,u=l+c,h=-s/2,d=-u/2,f=5,{cssStyles:p}=t,g=Fi(h-f,d+u+f,h+s-f,d+u+f,c,.8),v=g==null?void 0:g[g.length-1],_=[{x:h-f,y:d+f},{x:h-f,y:d+u+f},...g,{x:h+s-f,y:v.y-f},{x:h+s,y:v.y-f},{x:h+s,y:v.y-2*f},{x:h+s+f,y:v.y-2*f},{x:h+s+f,y:d-f},{x:h+f,y:d-f},{x:h+f,y:d},{x:h,y:d},{x:h,y:d+f}],y=[{x:h,y:d+f},{x:h+s-f,y:d+f},{x:h+s-f,y:v.y-f},{x:h+s,y:v.y-f},{x:h+s,y:d},{x:h,y:d}],b=ae.svg(n),w=ne(t,{});t.look!=="handDrawn"&&(w.roughness=0,w.fillStyle="solid");const T=Fe(_),C=b.path(T,w),A=Fe(y),k=b.path(A,w),L=n.insert(()=>C,":first-child");return L.insert(()=>k),L.attr("class","basic label-container"),p&&t.look!=="handDrawn"&&L.selectAll("path").attr("style",p),r&&t.look!=="handDrawn"&&L.selectAll("path").attr("style",r),L.attr("transform",`translate(0,${-c/2})`),o.attr("transform",`translate(${-(i.width/2)-f-(i.x-(i.left??0))}, ${-(i.height/2)+f-c/2-(i.y-(i.top??0))})`),oe(t,L),t.intersect=function(M){return ee.polygon(t,_,M)},n}I(SP,"multiWaveEdgedRectangle");async function wP(e,t,{config:{themeVariables:a}}){var _;const{labelStyles:r,nodeStyles:n}=se(t);t.labelStyle=r,t.useHtmlLabels||((_=mr().flowchart)==null?void 0:_.htmlLabels)!==!1||(t.centerLabel=!0);const{shapeSvg:o,bbox:s}=await Te(e,t,be(t)),l=Math.max(s.width+(t.padding??0)*2,(t==null?void 0:t.width)??0),c=Math.max(s.height+(t.padding??0)*2,(t==null?void 0:t.height)??0),u=-l/2,h=-c/2,{cssStyles:d}=t,f=ae.svg(o),p=ne(t,{fill:a.noteBkgColor,stroke:a.noteBorderColor});t.look!=="handDrawn"&&(p.roughness=0,p.fillStyle="solid");const g=f.rectangle(u,h,l,c,p),v=o.insert(()=>g,":first-child");return v.attr("class","basic label-container"),d&&t.look!=="handDrawn"&&v.selectAll("path").attr("style",d),n&&t.look!=="handDrawn"&&v.selectAll("path").attr("style",n),oe(t,v),t.intersect=function(y){return ee.rect(t,y)},o}I(wP,"note");var Vvt=I((e,t,a)=>[`M${e+a/2},${t}`,`L${e+a},${t-a/2}`,`L${e+a/2},${t-a}`,`L${e},${t-a/2}`,"Z"].join(" "),"createDecisionBoxPathD");async function CP(e,t){const{labelStyles:a,nodeStyles:r}=se(t);t.labelStyle=a;const{shapeSvg:n,bbox:i}=await Te(e,t,be(t)),o=i.width+t.padding,s=i.height+t.padding,l=o+s,c=[{x:l/2,y:0},{x:l,y:-l/2},{x:l/2,y:-l},{x:0,y:-l/2}];let u;const{cssStyles:h}=t;if(t.look==="handDrawn"){const d=ae.svg(n),f=ne(t,{}),p=Vvt(0,0,l),g=d.path(p,f);u=n.insert(()=>g,":first-child").attr("transform",`translate(${-l/2}, ${l/2})`),h&&u.attr("style",h)}else u=ii(n,l,l,c);return r&&u.attr("style",r),oe(t,u),t.intersect=function(d){return It.debug(`APA12 Intersect called SPLIT
point:`,d,`
node:
`,t,`
res:`,ee.polygon(t,c,d)),ee.polygon(t,c,d)},n}I(CP,"question");async function TP(e,t){const{labelStyles:a,nodeStyles:r}=se(t);t.labelStyle=a;const{shapeSvg:n,bbox:i,label:o}=await Te(e,t,be(t)),s=Math.max(i.width+(t.padding??0),(t==null?void 0:t.width)??0),l=Math.max(i.height+(t.padding??0),(t==null?void 0:t.height)??0),c=-s/2,u=-l/2,h=u/2,d=[{x:c+h,y:u},{x:c,y:0},{x:c+h,y:-u},{x:-c,y:-u},{x:-c,y:u}],{cssStyles:f}=t,p=ae.svg(n),g=ne(t,{});t.look!=="handDrawn"&&(g.roughness=0,g.fillStyle="solid");const v=Fe(d),_=p.path(v,g),y=n.insert(()=>_,":first-child");return y.attr("class","basic label-container"),f&&t.look!=="handDrawn"&&y.selectAll("path").attr("style",f),r&&t.look!=="handDrawn"&&y.selectAll("path").attr("style",r),y.attr("transform",`translate(${-h/2},0)`),o.attr("transform",`translate(${-h/2-i.width/2-(i.x-(i.left??0))}, ${-(i.height/2)-(i.y-(i.top??0))})`),oe(t,y),t.intersect=function(b){return ee.polygon(t,d,b)},n}I(TP,"rect_left_inv_arrow");async function AP(e,t){var k,L;const{labelStyles:a,nodeStyles:r}=se(t);t.labelStyle=a;let n;t.cssClasses?n="node "+t.cssClasses:n="node default";const i=e.insert("g").attr("class",n).attr("id",t.domId||t.id),o=i.insert("g"),s=i.insert("g").attr("class","label").attr("style",r),l=t.description,c=t.label,u=s.node().appendChild(await vo(c,t.labelStyle,!0,!0));let h={width:0,height:0};if(Da((L=(k=He())==null?void 0:k.flowchart)==null?void 0:L.htmlLabels)){const M=u.children[0],P=$e(u);h=M.getBoundingClientRect(),P.attr("width",h.width),P.attr("height",h.height)}It.info("Text 2",l);const d=l||[],f=u.getBBox(),p=s.node().appendChild(await vo(d.join?d.join("<br/>"):d,t.labelStyle,!0,!0)),g=p.children[0],v=$e(p);h=g.getBoundingClientRect(),v.attr("width",h.width),v.attr("height",h.height);const _=(t.padding||0)/2;$e(p).attr("transform","translate( "+(h.width>f.width?0:(f.width-h.width)/2)+", "+(f.height+_+5)+")"),$e(u).attr("transform","translate( "+(h.width<f.width?0:-(f.width-h.width)/2)+", 0)"),h=s.node().getBBox(),s.attr("transform","translate("+-h.width/2+", "+(-h.height/2-_+3)+")");const y=h.width+(t.padding||0),b=h.height+(t.padding||0),w=-h.width/2-_,T=-h.height/2-_;let C,A;if(t.look==="handDrawn"){const M=ae.svg(i),P=ne(t,{}),E=M.path(ni(w,T,y,b,t.rx||0),P),D=M.line(-h.width/2-_,-h.height/2-_+f.height+_,h.width/2+_,-h.height/2-_+f.height+_,P);A=i.insert(()=>(It.debug("Rough node insert CXC",E),D),":first-child"),C=i.insert(()=>(It.debug("Rough node insert CXC",E),E),":first-child")}else C=o.insert("rect",":first-child"),A=o.insert("line"),C.attr("class","outer title-state").attr("style",r).attr("x",-h.width/2-_).attr("y",-h.height/2-_).attr("width",h.width+(t.padding||0)).attr("height",h.height+(t.padding||0)),A.attr("class","divider").attr("x1",-h.width/2-_).attr("x2",h.width/2+_).attr("y1",-h.height/2-_+f.height+_).attr("y2",-h.height/2-_+f.height+_);return oe(t,C),t.intersect=function(M){return ee.rect(t,M)},i}I(AP,"rectWithTitle");async function kP(e,t){const a={rx:5,ry:5,labelPaddingX:((t==null?void 0:t.padding)||0)*1,labelPaddingY:((t==null?void 0:t.padding)||0)*1};return Iu(e,t,a)}I(kP,"roundedRect");async function DP(e,t){const{labelStyles:a,nodeStyles:r}=se(t);t.labelStyle=a;const{shapeSvg:n,bbox:i,label:o}=await Te(e,t,be(t)),s=(t==null?void 0:t.padding)??0,l=Math.max(i.width+(t.padding??0)*2,(t==null?void 0:t.width)??0),c=Math.max(i.height+(t.padding??0)*2,(t==null?void 0:t.height)??0),u=-i.width/2-s,h=-i.height/2-s,{cssStyles:d}=t,f=ae.svg(n),p=ne(t,{});t.look!=="handDrawn"&&(p.roughness=0,p.fillStyle="solid");const g=[{x:u,y:h},{x:u+l+8,y:h},{x:u+l+8,y:h+c},{x:u-8,y:h+c},{x:u-8,y:h},{x:u,y:h},{x:u,y:h+c}],v=f.polygon(g.map(y=>[y.x,y.y]),p),_=n.insert(()=>v,":first-child");return _.attr("class","basic label-container").attr("style",or(d)),r&&t.look!=="handDrawn"&&_.selectAll("path").attr("style",r),d&&t.look!=="handDrawn"&&_.selectAll("path").attr("style",r),o.attr("transform",`translate(${-l/2+4+(t.padding??0)-(i.x-(i.left??0))},${-c/2+(t.padding??0)-(i.y-(i.top??0))})`),oe(t,_),t.intersect=function(y){return ee.rect(t,y)},n}I(DP,"shadedProcess");async function LP(e,t){const{labelStyles:a,nodeStyles:r}=se(t);t.labelStyle=a;const{shapeSvg:n,bbox:i,label:o}=await Te(e,t,be(t)),s=Math.max(i.width+(t.padding??0)*2,(t==null?void 0:t.width)??0),l=Math.max(i.height+(t.padding??0)*2,(t==null?void 0:t.height)??0),c=-s/2,u=-l/2,{cssStyles:h}=t,d=ae.svg(n),f=ne(t,{});t.look!=="handDrawn"&&(f.roughness=0,f.fillStyle="solid");const p=[{x:c,y:u},{x:c,y:u+l},{x:c+s,y:u+l},{x:c+s,y:u-l/2}],g=Fe(p),v=d.path(g,f),_=n.insert(()=>v,":first-child");return _.attr("class","basic label-container"),h&&t.look!=="handDrawn"&&_.selectChildren("path").attr("style",h),r&&t.look!=="handDrawn"&&_.selectChildren("path").attr("style",r),_.attr("transform",`translate(0, ${l/4})`),o.attr("transform",`translate(${-s/2+(t.padding??0)-(i.x-(i.left??0))}, ${-l/4+(t.padding??0)-(i.y-(i.top??0))})`),oe(t,_),t.intersect=function(y){return ee.polygon(t,p,y)},n}I(LP,"slopedRect");async function IP(e,t){const a={rx:0,ry:0,labelPaddingX:((t==null?void 0:t.padding)||0)*2,labelPaddingY:((t==null?void 0:t.padding)||0)*1};return Iu(e,t,a)}I(IP,"squareRect");async function MP(e,t){const{labelStyles:a,nodeStyles:r}=se(t);t.labelStyle=a;const{shapeSvg:n,bbox:i}=await Te(e,t,be(t)),o=i.height+t.padding,s=i.width+o/4+t.padding;let l;const{cssStyles:c}=t;if(t.look==="handDrawn"){const u=ae.svg(n),h=ne(t,{}),d=ni(-s/2,-o/2,s,o,o/2),f=u.path(d,h);l=n.insert(()=>f,":first-child"),l.attr("class","basic label-container").attr("style",or(c))}else l=n.insert("rect",":first-child"),l.attr("class","basic label-container").attr("style",r).attr("rx",o/2).attr("ry",o/2).attr("x",-s/2).attr("y",-o/2).attr("width",s).attr("height",o);return oe(t,l),t.intersect=function(u){return ee.rect(t,u)},n}I(MP,"stadium");async function EP(e,t){return Iu(e,t,{rx:5,ry:5})}I(EP,"state");function RP(e,t,{config:{themeVariables:a}}){const{labelStyles:r,nodeStyles:n}=se(t);t.labelStyle=r;const{cssStyles:i}=t,{lineColor:o,stateBorder:s,nodeBorder:l}=a,c=e.insert("g").attr("class","node default").attr("id",t.domId||t.id),u=ae.svg(c),h=ne(t,{});t.look!=="handDrawn"&&(h.roughness=0,h.fillStyle="solid");const d=u.circle(0,0,14,{...h,stroke:o,strokeWidth:2}),f=s??l,p=u.circle(0,0,5,{...h,fill:f,stroke:f,strokeWidth:2,fillStyle:"solid"}),g=c.insert(()=>d,":first-child");return g.insert(()=>p),i&&g.selectAll("path").attr("style",i),n&&g.selectAll("path").attr("style",n),oe(t,g),t.intersect=function(v){return ee.circle(t,7,v)},c}I(RP,"stateEnd");function PP(e,t,{config:{themeVariables:a}}){const{lineColor:r}=a,n=e.insert("g").attr("class","node default").attr("id",t.domId||t.id);let i;if(t.look==="handDrawn"){const s=ae.svg(n).circle(0,0,14,Qut(r));i=n.insert(()=>s),i.attr("class","state-start").attr("r",7).attr("width",14).attr("height",14)}else i=n.insert("circle",":first-child"),i.attr("class","state-start").attr("r",7).attr("width",14).attr("height",14);return oe(t,i),t.intersect=function(o){return ee.circle(t,7,o)},n}I(PP,"stateStart");async function BP(e,t){const{labelStyles:a,nodeStyles:r}=se(t);t.labelStyle=a;const{shapeSvg:n,bbox:i}=await Te(e,t,be(t)),o=((t==null?void 0:t.padding)||0)/2,s=i.width+t.padding,l=i.height+t.padding,c=-i.width/2-o,u=-i.height/2-o,h=[{x:0,y:0},{x:s,y:0},{x:s,y:-l},{x:0,y:-l},{x:0,y:0},{x:-8,y:0},{x:s+8,y:0},{x:s+8,y:-l},{x:-8,y:-l},{x:-8,y:0}];if(t.look==="handDrawn"){const d=ae.svg(n),f=ne(t,{}),p=d.rectangle(c-8,u,s+16,l,f),g=d.line(c,u,c,u+l,f),v=d.line(c+s,u,c+s,u+l,f);n.insert(()=>g,":first-child"),n.insert(()=>v,":first-child");const _=n.insert(()=>p,":first-child"),{cssStyles:y}=t;_.attr("class","basic label-container").attr("style",or(y)),oe(t,_)}else{const d=ii(n,s,l,h);r&&d.attr("style",r),oe(t,d)}return t.intersect=function(d){return ee.polygon(t,h,d)},n}I(BP,"subroutine");async function OP(e,t){const{labelStyles:a,nodeStyles:r}=se(t);t.labelStyle=a;const{shapeSvg:n,bbox:i}=await Te(e,t,be(t)),o=Math.max(i.width+(t.padding??0)*2,(t==null?void 0:t.width)??0),s=Math.max(i.height+(t.padding??0)*2,(t==null?void 0:t.height)??0),l=-o/2,c=-s/2,u=.2*s,h=.2*s,{cssStyles:d}=t,f=ae.svg(n),p=ne(t,{}),g=[{x:l-u/2,y:c},{x:l+o+u/2,y:c},{x:l+o+u/2,y:c+s},{x:l-u/2,y:c+s}],v=[{x:l+o-u/2,y:c+s},{x:l+o+u/2,y:c+s},{x:l+o+u/2,y:c+s-h}];t.look!=="handDrawn"&&(p.roughness=0,p.fillStyle="solid");const _=Fe(g),y=f.path(_,p),b=Fe(v),w=f.path(b,{...p,fillStyle:"solid"}),T=n.insert(()=>w,":first-child");return T.insert(()=>y,":first-child"),T.attr("class","basic label-container"),d&&t.look!=="handDrawn"&&T.selectAll("path").attr("style",d),r&&t.look!=="handDrawn"&&T.selectAll("path").attr("style",r),oe(t,T),t.intersect=function(C){return ee.polygon(t,g,C)},n}I(OP,"taggedRect");async function NP(e,t){const{labelStyles:a,nodeStyles:r}=se(t);t.labelStyle=a;const{shapeSvg:n,bbox:i,label:o}=await Te(e,t,be(t)),s=Math.max(i.width+(t.padding??0)*2,(t==null?void 0:t.width)??0),l=Math.max(i.height+(t.padding??0)*2,(t==null?void 0:t.height)??0),c=l/4,u=.2*s,h=.2*l,d=l+c,{cssStyles:f}=t,p=ae.svg(n),g=ne(t,{});t.look!=="handDrawn"&&(g.roughness=0,g.fillStyle="solid");const v=[{x:-s/2-s/2*.1,y:d/2},...Fi(-s/2-s/2*.1,d/2,s/2+s/2*.1,d/2,c,.8),{x:s/2+s/2*.1,y:-d/2},{x:-s/2-s/2*.1,y:-d/2}],_=-s/2+s/2*.1,y=-d/2-h*.4,b=[{x:_+s-u,y:(y+l)*1.4},{x:_+s,y:y+l-h},{x:_+s,y:(y+l)*.9},...Fi(_+s,(y+l)*1.3,_+s-u,(y+l)*1.5,-l*.03,.5)],w=Fe(v),T=p.path(w,g),C=Fe(b),A=p.path(C,{...g,fillStyle:"solid"}),k=n.insert(()=>A,":first-child");return k.insert(()=>T,":first-child"),k.attr("class","basic label-container"),f&&t.look!=="handDrawn"&&k.selectAll("path").attr("style",f),r&&t.look!=="handDrawn"&&k.selectAll("path").attr("style",r),k.attr("transform",`translate(0,${-c/2})`),o.attr("transform",`translate(${-s/2+(t.padding??0)-(i.x-(i.left??0))},${-l/2+(t.padding??0)-c/2-(i.y-(i.top??0))})`),oe(t,k),t.intersect=function(L){return ee.polygon(t,v,L)},n}I(NP,"taggedWaveEdgedRectangle");async function $P(e,t){const{labelStyles:a,nodeStyles:r}=se(t);t.labelStyle=a;const{shapeSvg:n,bbox:i}=await Te(e,t,be(t)),o=Math.max(i.width+t.padding,(t==null?void 0:t.width)||0),s=Math.max(i.height+t.padding,(t==null?void 0:t.height)||0),l=-o/2,c=-s/2,u=n.insert("rect",":first-child");return u.attr("class","text").attr("style",r).attr("rx",0).attr("ry",0).attr("x",l).attr("y",c).attr("width",o).attr("height",s),oe(t,u),t.intersect=function(h){return ee.rect(t,h)},n}I($P,"text");var Gvt=I((e,t,a,r,n,i)=>`M${e},${t}
    a${n},${i} 0,0,1 0,${-r}
    l${a},0
    a${n},${i} 0,0,1 0,${r}
    M${a},${-r}
    a${n},${i} 0,0,0 0,${r}
    l${-a},0`,"createCylinderPathD"),Hvt=I((e,t,a,r,n,i)=>[`M${e},${t}`,`M${e+a},${t}`,`a${n},${i} 0,0,0 0,${-r}`,`l${-a},0`,`a${n},${i} 0,0,0 0,${r}`,`l${a},0`].join(" "),"createOuterCylinderPathD"),Wvt=I((e,t,a,r,n,i)=>[`M${e+a/2},${-r/2}`,`a${n},${i} 0,0,0 0,${r}`].join(" "),"createInnerCylinderPathD");async function FP(e,t){const{labelStyles:a,nodeStyles:r}=se(t);t.labelStyle=a;const{shapeSvg:n,bbox:i,label:o,halfPadding:s}=await Te(e,t,be(t)),l=t.look==="neo"?s*2:s,c=i.height+l,u=c/2,h=u/(2.5+c/50),d=i.width+h+l,{cssStyles:f}=t;let p;if(t.look==="handDrawn"){const g=ae.svg(n),v=Hvt(0,0,d,c,h,u),_=Wvt(0,0,d,c,h,u),y=g.path(v,ne(t,{})),b=g.path(_,ne(t,{fill:"none"}));p=n.insert(()=>b,":first-child"),p=n.insert(()=>y,":first-child"),p.attr("class","basic label-container"),f&&p.attr("style",f)}else{const g=Gvt(0,0,d,c,h,u);p=n.insert("path",":first-child").attr("d",g).attr("class","basic label-container").attr("style",or(f)).attr("style",r),p.attr("class","basic label-container"),f&&p.selectAll("path").attr("style",f),r&&p.selectAll("path").attr("style",r)}return p.attr("label-offset-x",h),p.attr("transform",`translate(${-d/2}, ${c/2} )`),o.attr("transform",`translate(${-(i.width/2)-h-(i.x-(i.left??0))}, ${-(i.height/2)-(i.y-(i.top??0))})`),oe(t,p),t.intersect=function(g){const v=ee.rect(t,g),_=v.y-(t.y??0);if(u!=0&&(Math.abs(_)<(t.height??0)/2||Math.abs(_)==(t.height??0)/2&&Math.abs(v.x-(t.x??0))>(t.width??0)/2-h)){let y=h*h*(1-_*_/(u*u));y!=0&&(y=Math.sqrt(Math.abs(y))),y=h-y,g.x-(t.x??0)>0&&(y=-y),v.x+=y}return v},n}I(FP,"tiltedCylinder");async function zP(e,t){const{labelStyles:a,nodeStyles:r}=se(t);t.labelStyle=a;const{shapeSvg:n,bbox:i}=await Te(e,t,be(t)),o=i.width+t.padding,s=i.height+t.padding,l=[{x:-3*s/6,y:0},{x:o+3*s/6,y:0},{x:o,y:-s},{x:0,y:-s}];let c;const{cssStyles:u}=t;if(t.look==="handDrawn"){const h=ae.svg(n),d=ne(t,{}),f=Fe(l),p=h.path(f,d);c=n.insert(()=>p,":first-child").attr("transform",`translate(${-o/2}, ${s/2})`),u&&c.attr("style",u)}else c=ii(n,o,s,l);return r&&c.attr("style",r),t.width=o,t.height=s,oe(t,c),t.intersect=function(h){return ee.polygon(t,l,h)},n}I(zP,"trapezoid");async function VP(e,t){const{labelStyles:a,nodeStyles:r}=se(t);t.labelStyle=a;const{shapeSvg:n,bbox:i}=await Te(e,t,be(t)),o=60,s=20,l=Math.max(o,i.width+(t.padding??0)*2,(t==null?void 0:t.width)??0),c=Math.max(s,i.height+(t.padding??0)*2,(t==null?void 0:t.height)??0),{cssStyles:u}=t,h=ae.svg(n),d=ne(t,{});t.look!=="handDrawn"&&(d.roughness=0,d.fillStyle="solid");const f=[{x:-l/2*.8,y:-c/2},{x:l/2*.8,y:-c/2},{x:l/2,y:-c/2*.6},{x:l/2,y:c/2},{x:-l/2,y:c/2},{x:-l/2,y:-c/2*.6}],p=Fe(f),g=h.path(p,d),v=n.insert(()=>g,":first-child");return v.attr("class","basic label-container"),u&&t.look!=="handDrawn"&&v.selectChildren("path").attr("style",u),r&&t.look!=="handDrawn"&&v.selectChildren("path").attr("style",r),oe(t,v),t.intersect=function(_){return ee.polygon(t,f,_)},n}I(VP,"trapezoidalPentagon");async function GP(e,t){var y;const{labelStyles:a,nodeStyles:r}=se(t);t.labelStyle=a;const{shapeSvg:n,bbox:i,label:o}=await Te(e,t,be(t)),s=Da((y=He().flowchart)==null?void 0:y.htmlLabels),l=i.width+(t.padding??0),c=l+i.height,u=l+i.height,h=[{x:0,y:0},{x:u,y:0},{x:u/2,y:-c}],{cssStyles:d}=t,f=ae.svg(n),p=ne(t,{});t.look!=="handDrawn"&&(p.roughness=0,p.fillStyle="solid");const g=Fe(h),v=f.path(g,p),_=n.insert(()=>v,":first-child").attr("transform",`translate(${-c/2}, ${c/2})`);return d&&t.look!=="handDrawn"&&_.selectChildren("path").attr("style",d),r&&t.look!=="handDrawn"&&_.selectChildren("path").attr("style",r),t.width=l,t.height=c,oe(t,_),o.attr("transform",`translate(${-i.width/2-(i.x-(i.left??0))}, ${c/2-(i.height+(t.padding??0)/(s?2:1)-(i.y-(i.top??0)))})`),t.intersect=function(b){return It.info("Triangle intersect",t,h,b),ee.polygon(t,h,b)},n}I(GP,"triangle");async function HP(e,t){const{labelStyles:a,nodeStyles:r}=se(t);t.labelStyle=a;const{shapeSvg:n,bbox:i,label:o}=await Te(e,t,be(t)),s=Math.max(i.width+(t.padding??0)*2,(t==null?void 0:t.width)??0),l=Math.max(i.height+(t.padding??0)*2,(t==null?void 0:t.height)??0),c=l/8,u=l+c,{cssStyles:h}=t,f=70-s,p=f>0?f/2:0,g=ae.svg(n),v=ne(t,{});t.look!=="handDrawn"&&(v.roughness=0,v.fillStyle="solid");const _=[{x:-s/2-p,y:u/2},...Fi(-s/2-p,u/2,s/2+p,u/2,c,.8),{x:s/2+p,y:-u/2},{x:-s/2-p,y:-u/2}],y=Fe(_),b=g.path(y,v),w=n.insert(()=>b,":first-child");return w.attr("class","basic label-container"),h&&t.look!=="handDrawn"&&w.selectAll("path").attr("style",h),r&&t.look!=="handDrawn"&&w.selectAll("path").attr("style",r),w.attr("transform",`translate(0,${-c/2})`),o.attr("transform",`translate(${-s/2+(t.padding??0)-(i.x-(i.left??0))},${-l/2+(t.padding??0)-c-(i.y-(i.top??0))})`),oe(t,w),t.intersect=function(T){return ee.polygon(t,_,T)},n}I(HP,"waveEdgedRectangle");async function WP(e,t){const{labelStyles:a,nodeStyles:r}=se(t);t.labelStyle=a;const{shapeSvg:n,bbox:i}=await Te(e,t,be(t)),o=100,s=50,l=Math.max(i.width+(t.padding??0)*2,(t==null?void 0:t.width)??0),c=Math.max(i.height+(t.padding??0)*2,(t==null?void 0:t.height)??0),u=l/c;let h=l,d=c;h>d*u?d=h/u:h=d*u,h=Math.max(h,o),d=Math.max(d,s);const f=Math.min(d*.2,d/4),p=d+f*2,{cssStyles:g}=t,v=ae.svg(n),_=ne(t,{});t.look!=="handDrawn"&&(_.roughness=0,_.fillStyle="solid");const y=[{x:-h/2,y:p/2},...Fi(-h/2,p/2,h/2,p/2,f,1),{x:h/2,y:-p/2},...Fi(h/2,-p/2,-h/2,-p/2,f,-1)],b=Fe(y),w=v.path(b,_),T=n.insert(()=>w,":first-child");return T.attr("class","basic label-container"),g&&t.look!=="handDrawn"&&T.selectAll("path").attr("style",g),r&&t.look!=="handDrawn"&&T.selectAll("path").attr("style",r),oe(t,T),t.intersect=function(C){return ee.polygon(t,y,C)},n}I(WP,"waveRectangle");async function qP(e,t){const{labelStyles:a,nodeStyles:r}=se(t);t.labelStyle=a;const{shapeSvg:n,bbox:i,label:o}=await Te(e,t,be(t)),s=Math.max(i.width+(t.padding??0)*2,(t==null?void 0:t.width)??0),l=Math.max(i.height+(t.padding??0)*2,(t==null?void 0:t.height)??0),c=5,u=-s/2,h=-l/2,{cssStyles:d}=t,f=ae.svg(n),p=ne(t,{}),g=[{x:u-c,y:h-c},{x:u-c,y:h+l},{x:u+s,y:h+l},{x:u+s,y:h-c}],v=`M${u-c},${h-c} L${u+s},${h-c} L${u+s},${h+l} L${u-c},${h+l} L${u-c},${h-c}
                M${u-c},${h} L${u+s},${h}
                M${u},${h-c} L${u},${h+l}`;t.look!=="handDrawn"&&(p.roughness=0,p.fillStyle="solid");const _=f.path(v,p),y=n.insert(()=>_,":first-child");return y.attr("transform",`translate(${c/2}, ${c/2})`),y.attr("class","basic label-container"),d&&t.look!=="handDrawn"&&y.selectAll("path").attr("style",d),r&&t.look!=="handDrawn"&&y.selectAll("path").attr("style",r),o.attr("transform",`translate(${-(i.width/2)+c/2-(i.x-(i.left??0))}, ${-(i.height/2)+c/2-(i.y-(i.top??0))})`),oe(t,y),t.intersect=function(b){return ee.polygon(t,g,b)},n}I(qP,"windowPane");async function E_(e,t){var xt,j,mt,Tt;const a=t;if(a.alias&&(t.label=a.alias),t.look==="handDrawn"){const{themeVariables:Mt}=mr(),{background:et}=Mt,ut={...t,id:t.id+"-background",look:"default",cssStyles:["stroke: none",`fill: ${et}`]};await E_(e,ut)}const r=mr();t.useHtmlLabels=r.htmlLabels;let n=((xt=r.er)==null?void 0:xt.diagramPadding)??10,i=((j=r.er)==null?void 0:j.entityPadding)??6;const{cssStyles:o}=t,{labelStyles:s,nodeStyles:l}=se(t);if(a.attributes.length===0&&t.label){const Mt={rx:0,ry:0,labelPaddingX:n,labelPaddingY:n*1.5};ei(t.label,r)+Mt.labelPaddingX*2<r.er.minEntityWidth&&(t.width=r.er.minEntityWidth);const et=await Iu(e,t,Mt);if(!Da(r.htmlLabels)){const ut=et.select("text"),at=(mt=ut.node())==null?void 0:mt.getBBox();ut.attr("transform",`translate(${-at.width/2}, 0)`)}return et}r.htmlLabels||(n*=1.25,i*=1.25);let c=be(t);c||(c="node default");const u=e.insert("g").attr("class",c).attr("id",t.domId||t.id),h=await hs(u,t.label??"",r,0,0,["name"],s);h.height+=i;let d=0;const f=[],p=[];let g=0,v=0,_=0,y=0,b=!0,w=!0;for(const Mt of a.attributes){const et=await hs(u,Mt.type,r,0,d,["attribute-type"],s);g=Math.max(g,et.width+n);const ut=await hs(u,Mt.name,r,0,d,["attribute-name"],s);v=Math.max(v,ut.width+n);const at=await hs(u,Mt.keys.join(),r,0,d,["attribute-keys"],s);_=Math.max(_,at.width+n);const Q=await hs(u,Mt.comment,r,0,d,["attribute-comment"],s);y=Math.max(y,Q.width+n);const bt=Math.max(et.height,ut.height,at.height,Q.height)+i;p.push({yOffset:d,rowHeight:bt}),d+=bt}let T=4;_<=n&&(b=!1,_=0,T--),y<=n&&(w=!1,y=0,T--);const C=u.node().getBBox();if(h.width+n*2-(g+v+_+y)>0){const Mt=h.width+n*2-(g+v+_+y);g+=Mt/T,v+=Mt/T,_>0&&(_+=Mt/T),y>0&&(y+=Mt/T)}const A=g+v+_+y,k=ae.svg(u),L=ne(t,{});t.look!=="handDrawn"&&(L.roughness=0,L.fillStyle="solid");let M=0;p.length>0&&(M=p.reduce((Mt,et)=>Mt+((et==null?void 0:et.rowHeight)??0),0));const P=Math.max(C.width+n*2,(t==null?void 0:t.width)||0,A),E=Math.max((M??0)+h.height,(t==null?void 0:t.height)||0),D=-P/2,O=-E/2;u.selectAll("g:not(:first-child)").each((Mt,et,ut)=>{const at=$e(ut[et]),Q=at.attr("transform");let bt=0,Dt=0;if(Q){const ft=RegExp(/translate\(([^,]+),([^)]+)\)/).exec(Q);ft&&(bt=parseFloat(ft[1]),Dt=parseFloat(ft[2]),at.attr("class").includes("attribute-name")?bt+=g:at.attr("class").includes("attribute-keys")?bt+=g+v:at.attr("class").includes("attribute-comment")&&(bt+=g+v+_))}at.attr("transform",`translate(${D+n/2+bt}, ${Dt+O+h.height+i/2})`)}),u.select(".name").attr("transform","translate("+-h.width/2+", "+(O+i/2)+")");const B=k.rectangle(D,O,P,E,L),R=u.insert(()=>B,":first-child").attr("style",o.join("")),{themeVariables:V}=mr(),{rowEven:z,rowOdd:W,nodeBorder:it}=V;f.push(0);for(const[Mt,et]of p.entries()){const at=(Mt+1)%2===0&&et.yOffset!==0,Q=k.rectangle(D,h.height+O+(et==null?void 0:et.yOffset),P,et==null?void 0:et.rowHeight,{...L,fill:at?z:W,stroke:it});u.insert(()=>Q,"g.label").attr("style",o.join("")).attr("class",`row-rect-${at?"even":"odd"}`)}let ot=k.line(D,h.height+O,P+D,h.height+O,L);u.insert(()=>ot).attr("class","divider"),ot=k.line(g+D,h.height+O,g+D,E+O,L),u.insert(()=>ot).attr("class","divider"),b&&(ot=k.line(g+v+D,h.height+O,g+v+D,E+O,L),u.insert(()=>ot).attr("class","divider")),w&&(ot=k.line(g+v+_+D,h.height+O,g+v+_+D,E+O,L),u.insert(()=>ot).attr("class","divider"));for(const Mt of f)ot=k.line(D,h.height+O+Mt,P+D,h.height+O+Mt,L),u.insert(()=>ot).attr("class","divider");if(oe(t,R),l&&t.look!=="handDrawn"){const Mt=l.split(";"),et=(Tt=Mt==null?void 0:Mt.filter(ut=>ut.includes("stroke")))==null?void 0:Tt.map(ut=>`${ut}`).join("; ");u.selectAll("path").attr("style",et??""),u.selectAll(".row-rect-even path").attr("style",l)}return t.intersect=function(Mt){return ee.rect(t,Mt)},u}I(E_,"erBox");async function hs(e,t,a,r=0,n=0,i=[],o=""){const s=e.insert("g").attr("class",`label ${i.join(" ")}`).attr("transform",`translate(${r}, ${n})`).attr("style",o);t!==E2(t)&&(t=E2(t),t=t.replaceAll("<","&lt;").replaceAll(">","&gt;"));const l=s.node().appendChild(await Gi(s,t,{width:ei(t,a)+100,style:o,useHtmlLabels:a.htmlLabels},a));if(t.includes("&lt;")||t.includes("&gt;")){let u=l.children[0];for(u.textContent=u.textContent.replaceAll("&lt;","<").replaceAll("&gt;",">");u.childNodes[0];)u=u.childNodes[0],u.textContent=u.textContent.replaceAll("&lt;","<").replaceAll("&gt;",">")}let c=l.getBBox();if(Da(a.htmlLabels)){const u=l.children[0];u.style.textAlign="start";const h=$e(l);c=u.getBoundingClientRect(),h.attr("width",c.width),h.attr("height",c.height)}return c}I(hs,"addText");async function UP(e,t,a,r,n=a.class.padding??12){const i=r?0:3,o=e.insert("g").attr("class",be(t)).attr("id",t.domId||t.id);let s=null,l=null,c=null,u=null,h=0,d=0,f=0;if(s=o.insert("g").attr("class","annotation-group text"),t.annotations.length>0){const y=t.annotations[0];await ic(s,{text:`«${y}»`},0),h=s.node().getBBox().height}l=o.insert("g").attr("class","label-group text"),await ic(l,t,0,["font-weight: bolder"]);const p=l.node().getBBox();d=p.height,c=o.insert("g").attr("class","members-group text");let g=0;for(const y of t.members){const b=await ic(c,y,g,[y.parseClassifier()]);g+=b+i}f=c.node().getBBox().height,f<=0&&(f=n/2),u=o.insert("g").attr("class","methods-group text");let v=0;for(const y of t.methods){const b=await ic(u,y,v,[y.parseClassifier()]);v+=b+i}let _=o.node().getBBox();if(s!==null){const y=s.node().getBBox();s.attr("transform",`translate(${-y.width/2})`)}return l.attr("transform",`translate(${-p.width/2}, ${h})`),_=o.node().getBBox(),c.attr("transform",`translate(0, ${h+d+n*2})`),_=o.node().getBBox(),u.attr("transform",`translate(0, ${h+d+(f?f+n*4:n*2)})`),_=o.node().getBBox(),{shapeSvg:o,bbox:_}}I(UP,"textHelper");async function ic(e,t,a,r=[]){const n=e.insert("g").attr("class","label").attr("style",r.join("; ")),i=mr();let o="useHtmlLabels"in t?t.useHtmlLabels:Da(i.htmlLabels)??!0,s="";"text"in t?s=t.text:s=t.label,!o&&s.startsWith("\\")&&(s=s.substring(1)),Js(s)&&(o=!0);const l=await Gi(n,Wf(Ho(s)),{width:ei(s,i)+50,classes:"markdown-node-label",useHtmlLabels:o},i);let c,u=1;if(o){const h=l.children[0],d=$e(l);u=h.innerHTML.split("<br>").length,h.innerHTML.includes("</math>")&&(u+=h.innerHTML.split("<mrow>").length-1);const f=h.getElementsByTagName("img");if(f){const p=s.replace(/<img[^>]*>/g,"").trim()==="";await Promise.all([...f].map(g=>new Promise(v=>{function _(){var y;if(g.style.display="flex",g.style.flexDirection="column",p){const b=((y=i.fontSize)==null?void 0:y.toString())??window.getComputedStyle(document.body).fontSize,T=parseInt(b,10)*5+"px";g.style.minWidth=T,g.style.maxWidth=T}else g.style.width="100%";v(g)}I(_,"setupImage"),setTimeout(()=>{g.complete&&_()}),g.addEventListener("error",_),g.addEventListener("load",_)})))}c=h.getBoundingClientRect(),d.attr("width",c.width),d.attr("height",c.height)}else{r.includes("font-weight: bolder")&&$e(l).selectAll("tspan").attr("font-weight",""),u=l.children.length;const h=l.children[0];(l.textContent===""||l.textContent.includes("&gt"))&&(h.textContent=s[0]+s.substring(1).replaceAll("&gt;",">").replaceAll("&lt;","<").trim(),s[1]===" "&&(h.textContent=h.textContent[0]+" "+h.textContent.substring(1))),h.textContent==="undefined"&&(h.textContent=""),c=l.getBBox()}return n.attr("transform","translate(0,"+(-c.height/(2*u)+a)+")"),c.height}I(ic,"addText");async function jP(e,t){var L,M;const a=He(),r=a.class.padding??12,n=r,i=t.useHtmlLabels??Da(a.htmlLabels)??!0,o=t;o.annotations=o.annotations??[],o.members=o.members??[],o.methods=o.methods??[];const{shapeSvg:s,bbox:l}=await UP(e,t,a,i,n),{labelStyles:c,nodeStyles:u}=se(t);t.labelStyle=c,t.cssStyles=o.styles||"";const h=((L=o.styles)==null?void 0:L.join(";"))||u||"";t.cssStyles||(t.cssStyles=h.replaceAll("!important","").split(";"));const d=o.members.length===0&&o.methods.length===0&&!((M=a.class)!=null&&M.hideEmptyMembersBox),f=ae.svg(s),p=ne(t,{});t.look!=="handDrawn"&&(p.roughness=0,p.fillStyle="solid");const g=l.width;let v=l.height;o.members.length===0&&o.methods.length===0?v+=n:o.members.length>0&&o.methods.length===0&&(v+=n*2);const _=-g/2,y=-v/2,b=f.rectangle(_-r,y-r-(d?r:o.members.length===0&&o.methods.length===0?-r/2:0),g+2*r,v+2*r+(d?r*2:o.members.length===0&&o.methods.length===0?-r:0),p),w=s.insert(()=>b,":first-child");w.attr("class","basic label-container");const T=w.node().getBBox();s.selectAll(".text").each((P,E,D)=>{var W;const O=$e(D[E]),B=O.attr("transform");let R=0;if(B){const ot=RegExp(/translate\(([^,]+),([^)]+)\)/).exec(B);ot&&(R=parseFloat(ot[2]))}let V=R+y+r-(d?r:o.members.length===0&&o.methods.length===0?-r/2:0);i||(V-=4);let z=_;(O.attr("class").includes("label-group")||O.attr("class").includes("annotation-group"))&&(z=-((W=O.node())==null?void 0:W.getBBox().width)/2||0,s.selectAll("text").each(function(it,ot,xt){window.getComputedStyle(xt[ot]).textAnchor==="middle"&&(z=0)})),O.attr("transform",`translate(${z}, ${V})`)});const C=s.select(".annotation-group").node().getBBox().height-(d?r/2:0)||0,A=s.select(".label-group").node().getBBox().height-(d?r/2:0)||0,k=s.select(".members-group").node().getBBox().height-(d?r/2:0)||0;if(o.members.length>0||o.methods.length>0||d){const P=f.line(T.x,C+A+y+r,T.x+T.width,C+A+y+r,p);s.insert(()=>P).attr("class","divider").attr("style",h)}if(d||o.members.length>0||o.methods.length>0){const P=f.line(T.x,C+A+k+y+n*2+r,T.x+T.width,C+A+k+y+r+n*2,p);s.insert(()=>P).attr("class","divider").attr("style",h)}if(o.look!=="handDrawn"&&s.selectAll("path").attr("style",h),w.select(":nth-child(2)").attr("style",h),s.selectAll(".divider").select("path").attr("style",h),t.labelStyle?s.selectAll("span").attr("style",t.labelStyle):s.selectAll("span").attr("style",h),!i){const P=RegExp(/color\s*:\s*([^;]*)/),E=P.exec(h);if(E){const D=E[0].replace("color","fill");s.selectAll("tspan").attr("style",D)}else if(c){const D=P.exec(c);if(D){const O=D[0].replace("color","fill");s.selectAll("tspan").attr("style",O)}}}return oe(t,w),t.intersect=function(P){return ee.rect(t,P)},s}I(jP,"classBox");async function YP(e,t){var C,A;const{labelStyles:a,nodeStyles:r}=se(t);t.labelStyle=a;const n=t,i=t,o=20,s=20,l="verifyMethod"in t,c=be(t),u=e.insert("g").attr("class",c).attr("id",t.domId??t.id);let h;l?h=await dn(u,`&lt;&lt;${n.type}&gt;&gt;`,0,t.labelStyle):h=await dn(u,"&lt;&lt;Element&gt;&gt;",0,t.labelStyle);let d=h;const f=await dn(u,n.name,d,t.labelStyle+"; font-weight: bold;");if(d+=f+s,l){const k=await dn(u,`${n.requirementId?`id: ${n.requirementId}`:""}`,d,t.labelStyle);d+=k;const L=await dn(u,`${n.text?`Text: ${n.text}`:""}`,d,t.labelStyle);d+=L;const M=await dn(u,`${n.risk?`Risk: ${n.risk}`:""}`,d,t.labelStyle);d+=M,await dn(u,`${n.verifyMethod?`Verification: ${n.verifyMethod}`:""}`,d,t.labelStyle)}else{const k=await dn(u,`${i.type?`Type: ${i.type}`:""}`,d,t.labelStyle);d+=k,await dn(u,`${i.docRef?`Doc Ref: ${i.docRef}`:""}`,d,t.labelStyle)}const p=(((C=u.node())==null?void 0:C.getBBox().width)??200)+o,g=(((A=u.node())==null?void 0:A.getBBox().height)??200)+o,v=-p/2,_=-g/2,y=ae.svg(u),b=ne(t,{});t.look!=="handDrawn"&&(b.roughness=0,b.fillStyle="solid");const w=y.rectangle(v,_,p,g,b),T=u.insert(()=>w,":first-child");if(T.attr("class","basic label-container").attr("style",r),u.selectAll(".label").each((k,L,M)=>{const P=$e(M[L]),E=P.attr("transform");let D=0,O=0;if(E){const z=RegExp(/translate\(([^,]+),([^)]+)\)/).exec(E);z&&(D=parseFloat(z[1]),O=parseFloat(z[2]))}const B=O-g/2;let R=v+o/2;(L===0||L===1)&&(R=D),P.attr("transform",`translate(${R}, ${B+o})`)}),d>h+f+s){const k=y.line(v,_+h+f+s,v+p,_+h+f+s,b);u.insert(()=>k).attr("style",r)}return oe(t,T),t.intersect=function(k){return ee.rect(t,k)},u}I(YP,"requirementBox");async function dn(e,t,a,r=""){if(t==="")return 0;const n=e.insert("g").attr("class","label").attr("style",r),i=He(),o=i.htmlLabels??!0,s=await Gi(n,Wf(Ho(t)),{width:ei(t,i)+50,classes:"markdown-node-label",useHtmlLabels:o,style:r},i);let l;if(o){const c=s.children[0],u=$e(s);l=c.getBoundingClientRect(),u.attr("width",l.width),u.attr("height",l.height)}else{const c=s.children[0];for(const u of c.children)u.textContent=u.textContent.replaceAll("&gt;",">").replaceAll("&lt;","<"),r&&u.setAttribute("style",r);l=s.getBBox(),l.height+=6}return n.attr("transform",`translate(${-l.width/2},${-l.height/2+a})`),l.height}I(dn,"addText");var qvt=I(e=>{switch(e){case"Very High":return"red";case"High":return"orange";case"Medium":return null;case"Low":return"blue";case"Very Low":return"lightblue"}},"colorFromPriority");async function XP(e,t,{config:a}){var E,D;const{labelStyles:r,nodeStyles:n}=se(t);t.labelStyle=r||"";const i=10,o=t.width;t.width=(t.width??200)-10;const{shapeSvg:s,bbox:l,label:c}=await Te(e,t,be(t)),u=t.padding||10;let h="",d;"ticket"in t&&t.ticket&&((E=a==null?void 0:a.kanban)!=null&&E.ticketBaseUrl)&&(h=(D=a==null?void 0:a.kanban)==null?void 0:D.ticketBaseUrl.replace("#TICKET#",t.ticket),d=s.insert("svg:a",":first-child").attr("class","kanban-ticket-link").attr("xlink:href",h).attr("target","_blank"));const f={useHtmlLabels:t.useHtmlLabels,labelStyle:t.labelStyle||"",width:t.width,img:t.img,padding:t.padding||8,centerLabel:!1};let p,g;d?{label:p,bbox:g}=await tv(d,"ticket"in t&&t.ticket||"",f):{label:p,bbox:g}=await tv(s,"ticket"in t&&t.ticket||"",f);const{label:v,bbox:_}=await tv(s,"assigned"in t&&t.assigned||"",f);t.width=o;const y=10,b=(t==null?void 0:t.width)||0,w=Math.max(g.height,_.height)/2,T=Math.max(l.height+y*2,(t==null?void 0:t.height)||0)+w,C=-b/2,A=-T/2;c.attr("transform","translate("+(u-b/2)+", "+(-w-l.height/2)+")"),p.attr("transform","translate("+(u-b/2)+", "+(-w+l.height/2)+")"),v.attr("transform","translate("+(u+b/2-_.width-2*i)+", "+(-w+l.height/2)+")");let k;const{rx:L,ry:M}=t,{cssStyles:P}=t;if(t.look==="handDrawn"){const O=ae.svg(s),B=ne(t,{}),R=L||M?O.path(ni(C,A,b,T,L||0),B):O.rectangle(C,A,b,T,B);k=s.insert(()=>R,":first-child"),k.attr("class","basic label-container").attr("style",P||null)}else{k=s.insert("rect",":first-child"),k.attr("class","basic label-container __APA__").attr("style",n).attr("rx",L??5).attr("ry",M??5).attr("x",C).attr("y",A).attr("width",b).attr("height",T);const O="priority"in t&&t.priority;if(O){const B=s.append("line"),R=C+2,V=A+Math.floor((L??0)/2),z=A+T-Math.floor((L??0)/2);B.attr("x1",R).attr("y1",V).attr("x2",R).attr("y2",z).attr("stroke-width","4").attr("stroke",qvt(O))}}return oe(t,k),t.height=T,t.intersect=function(O){return ee.rect(t,O)},s}I(XP,"kanbanItem");var Uvt=[{semanticName:"Process",name:"Rectangle",shortName:"rect",description:"Standard process shape",aliases:["proc","process","rectangle"],internalAliases:["squareRect"],handler:IP},{semanticName:"Event",name:"Rounded Rectangle",shortName:"rounded",description:"Represents an event",aliases:["event"],internalAliases:["roundedRect"],handler:kP},{semanticName:"Terminal Point",name:"Stadium",shortName:"stadium",description:"Terminal point",aliases:["terminal","pill"],handler:MP},{semanticName:"Subprocess",name:"Framed Rectangle",shortName:"fr-rect",description:"Subprocess",aliases:["subprocess","subproc","framed-rectangle","subroutine"],handler:BP},{semanticName:"Database",name:"Cylinder",shortName:"cyl",description:"Database storage",aliases:["db","database","cylinder"],handler:tP},{semanticName:"Start",name:"Circle",shortName:"circle",description:"Starting point",aliases:["circ"],handler:jR},{semanticName:"Decision",name:"Diamond",shortName:"diam",description:"Decision-making step",aliases:["decision","diamond","question"],handler:CP},{semanticName:"Prepare Conditional",name:"Hexagon",shortName:"hex",description:"Preparation or condition step",aliases:["hexagon","prepare"],handler:sP},{semanticName:"Data Input/Output",name:"Lean Right",shortName:"lean-r",description:"Represents input or output",aliases:["lean-right","in-out"],internalAliases:["lean_right"],handler:mP},{semanticName:"Data Input/Output",name:"Lean Left",shortName:"lean-l",description:"Represents output or input",aliases:["lean-left","out-in"],internalAliases:["lean_left"],handler:vP},{semanticName:"Priority Action",name:"Trapezoid Base Bottom",shortName:"trap-b",description:"Priority action",aliases:["priority","trapezoid-bottom","trapezoid"],handler:zP},{semanticName:"Manual Operation",name:"Trapezoid Base Top",shortName:"trap-t",description:"Represents a manual task",aliases:["manual","trapezoid-top","inv-trapezoid"],internalAliases:["inv_trapezoid"],handler:pP},{semanticName:"Stop",name:"Double Circle",shortName:"dbl-circ",description:"Represents a stop point",aliases:["double-circle"],internalAliases:["doublecircle"],handler:aP},{semanticName:"Text Block",name:"Text Block",shortName:"text",description:"Text block",handler:$P},{semanticName:"Card",name:"Notched Rectangle",shortName:"notch-rect",description:"Represents a card",aliases:["card","notched-rectangle"],handler:qR},{semanticName:"Lined/Shaded Process",name:"Lined Rectangle",shortName:"lin-rect",description:"Lined process shape",aliases:["lined-rectangle","lined-process","lin-proc","shaded-process"],handler:DP},{semanticName:"Start",name:"Small Circle",shortName:"sm-circ",description:"Small starting point",aliases:["start","small-circle"],internalAliases:["stateStart"],handler:PP},{semanticName:"Stop",name:"Framed Circle",shortName:"fr-circ",description:"Stop point",aliases:["stop","framed-circle"],internalAliases:["stateEnd"],handler:RP},{semanticName:"Fork/Join",name:"Filled Rectangle",shortName:"fork",description:"Fork or join in process flow",aliases:["join"],internalAliases:["forkJoin"],handler:iP},{semanticName:"Collate",name:"Hourglass",shortName:"hourglass",description:"Represents a collate operation",aliases:["hourglass","collate"],handler:lP},{semanticName:"Comment",name:"Curly Brace",shortName:"brace",description:"Adds a comment",aliases:["comment","brace-l"],handler:ZR},{semanticName:"Comment Right",name:"Curly Brace",shortName:"brace-r",description:"Adds a comment",handler:KR},{semanticName:"Comment with braces on both sides",name:"Curly Braces",shortName:"braces",description:"Adds a comment",handler:JR},{semanticName:"Com Link",name:"Lightning Bolt",shortName:"bolt",description:"Communication link",aliases:["com-link","lightning-bolt"],handler:yP},{semanticName:"Document",name:"Document",shortName:"doc",description:"Represents a document",aliases:["doc","document"],handler:HP},{semanticName:"Delay",name:"Half-Rounded Rectangle",shortName:"delay",description:"Represents a delay",aliases:["half-rounded-rectangle"],handler:oP},{semanticName:"Direct Access Storage",name:"Horizontal Cylinder",shortName:"h-cyl",description:"Direct access storage",aliases:["das","horizontal-cylinder"],handler:FP},{semanticName:"Disk Storage",name:"Lined Cylinder",shortName:"lin-cyl",description:"Disk storage",aliases:["disk","lined-cylinder"],handler:_P},{semanticName:"Display",name:"Curved Trapezoid",shortName:"curv-trap",description:"Represents a display",aliases:["curved-trapezoid","display"],handler:QR},{semanticName:"Divided Process",name:"Divided Rectangle",shortName:"div-rect",description:"Divided process shape",aliases:["div-proc","divided-rectangle","divided-process"],handler:eP},{semanticName:"Extract",name:"Triangle",shortName:"tri",description:"Extraction process",aliases:["extract","triangle"],handler:GP},{semanticName:"Internal Storage",name:"Window Pane",shortName:"win-pane",description:"Internal storage",aliases:["internal-storage","window-pane"],handler:qP},{semanticName:"Junction",name:"Filled Circle",shortName:"f-circ",description:"Junction point",aliases:["junction","filled-circle"],handler:rP},{semanticName:"Loop Limit",name:"Trapezoidal Pentagon",shortName:"notch-pent",description:"Loop limit step",aliases:["loop-limit","notched-pentagon"],handler:VP},{semanticName:"Manual File",name:"Flipped Triangle",shortName:"flip-tri",description:"Manual file operation",aliases:["manual-file","flipped-triangle"],handler:nP},{semanticName:"Manual Input",name:"Sloped Rectangle",shortName:"sl-rect",description:"Manual input step",aliases:["manual-input","sloped-rectangle"],handler:LP},{semanticName:"Multi-Document",name:"Stacked Document",shortName:"docs",description:"Multiple documents",aliases:["documents","st-doc","stacked-document"],handler:SP},{semanticName:"Multi-Process",name:"Stacked Rectangle",shortName:"st-rect",description:"Multiple processes",aliases:["procs","processes","stacked-rectangle"],handler:xP},{semanticName:"Stored Data",name:"Bow Tie Rectangle",shortName:"bow-rect",description:"Stored data",aliases:["stored-data","bow-tie-rectangle"],handler:WR},{semanticName:"Summary",name:"Crossed Circle",shortName:"cross-circ",description:"Summary",aliases:["summary","crossed-circle"],handler:XR},{semanticName:"Tagged Document",name:"Tagged Document",shortName:"tag-doc",description:"Tagged document",aliases:["tag-doc","tagged-document"],handler:NP},{semanticName:"Tagged Process",name:"Tagged Rectangle",shortName:"tag-rect",description:"Tagged process",aliases:["tagged-rectangle","tag-proc","tagged-process"],handler:OP},{semanticName:"Paper Tape",name:"Flag",shortName:"flag",description:"Paper tape",aliases:["paper-tape"],handler:WP},{semanticName:"Odd",name:"Odd",shortName:"odd",description:"Odd shape",internalAliases:["rect_left_inv_arrow"],handler:TP},{semanticName:"Lined Document",name:"Lined Document",shortName:"lin-doc",description:"Lined document",aliases:["lined-document"],handler:bP}],jvt=I(()=>{const t=[...Object.entries({state:EP,choice:UR,note:wP,rectWithTitle:AP,labelRect:gP,iconSquare:dP,iconCircle:uP,icon:cP,iconRounded:hP,imageSquare:fP,anchor:HR,kanbanItem:XP,classBox:jP,erBox:E_,requirementBox:YP}),...Uvt.flatMap(a=>[a.shortName,..."aliases"in a?a.aliases:[],..."internalAliases"in a?a.internalAliases:[]].map(n=>[n,a.handler]))];return Object.fromEntries(t)},"generateShapeMap"),ZP=jvt();function Yvt(e){return e in ZP}I(Yvt,"isValidShape");var np=new Map;async function KP(e,t,a){let r,n;t.shape==="rect"&&(t.rx&&t.ry?t.shape="roundedRect":t.shape="squareRect");const i=t.shape?ZP[t.shape]:void 0;if(!i)throw new Error(`No such shape: ${t.shape}. Please check your syntax.`);if(t.link){let o;a.config.securityLevel==="sandbox"?o="_top":t.linkTarget&&(o=t.linkTarget||"_blank"),r=e.insert("svg:a").attr("xlink:href",t.link).attr("target",o??null),n=await i(r,t,a)}else n=await i(e,t,a),r=n;return t.tooltip&&n.attr("title",t.tooltip),np.set(t.id,r),t.haveCallback&&r.attr("class",r.attr("class")+" clickable"),r}I(KP,"insertNode");var H_t=I((e,t)=>{np.set(t.id,e)},"setNodeElem"),W_t=I(()=>{np.clear()},"clear"),q_t=I(e=>{const t=np.get(e.id);It.trace("Transforming node",e.diff,e,"translate("+(e.x-e.width/2-5)+", "+e.width/2+")");const a=8,r=e.diff||0;return e.clusterNode?t.attr("transform","translate("+(e.x+r-e.width/2)+", "+(e.y-e.height/2-a)+")"):t.attr("transform","translate("+e.x+", "+e.y+")"),r},"positionNode"),Xvt=I((e,t,a,r,n,i)=>{t.arrowTypeStart&&CC(e,"start",t.arrowTypeStart,a,r,n,i),t.arrowTypeEnd&&CC(e,"end",t.arrowTypeEnd,a,r,n,i)},"addEdgeMarkers"),Zvt={arrow_cross:{type:"cross",fill:!1},arrow_point:{type:"point",fill:!0},arrow_barb:{type:"barb",fill:!0},arrow_circle:{type:"circle",fill:!1},aggregation:{type:"aggregation",fill:!1},extension:{type:"extension",fill:!1},composition:{type:"composition",fill:!0},dependency:{type:"dependency",fill:!0},lollipop:{type:"lollipop",fill:!1},only_one:{type:"onlyOne",fill:!1},zero_or_one:{type:"zeroOrOne",fill:!1},one_or_more:{type:"oneOrMore",fill:!1},zero_or_more:{type:"zeroOrMore",fill:!1},requirement_arrow:{type:"requirement_arrow",fill:!1},requirement_contains:{type:"requirement_contains",fill:!1}},CC=I((e,t,a,r,n,i,o)=>{var h;const s=Zvt[a];if(!s){It.warn(`Unknown arrow type: ${a}`);return}const l=s.type,u=`${n}_${i}-${l}${t==="start"?"Start":"End"}`;if(o&&o.trim()!==""){const d=o.replace(/[^\dA-Za-z]/g,"_"),f=`${u}_${d}`;if(!document.getElementById(f)){const p=document.getElementById(u);if(p){const g=p.cloneNode(!0);g.id=f,g.querySelectorAll("path, circle, line").forEach(_=>{_.setAttribute("stroke",o),s.fill&&_.setAttribute("fill",o)}),(h=p.parentNode)==null||h.appendChild(g)}}e.attr(`marker-${t}`,`url(${r}#${f})`)}else e.attr(`marker-${t}`,`url(${r}#${u})`)},"addEdgeMarker"),Qd=new Map,Oa=new Map,U_t=I(()=>{Qd.clear(),Oa.clear()},"clear"),ql=I(e=>e?e.reduce((a,r)=>a+";"+r,""):"","getLabelStyles"),Kvt=I(async(e,t)=>{let a=Da(He().flowchart.htmlLabels);const r=await Gi(e,t.label,{style:ql(t.labelStyle),useHtmlLabels:a,addSvgBackground:!0,isNode:!1});It.info("abc82",t,t.labelType);const n=e.insert("g").attr("class","edgeLabel"),i=n.insert("g").attr("class","label");i.node().appendChild(r);let o=r.getBBox();if(a){const l=r.children[0],c=$e(r);o=l.getBoundingClientRect(),c.attr("width",o.width),c.attr("height",o.height)}i.attr("transform","translate("+-o.width/2+", "+-o.height/2+")"),Qd.set(t.id,n),t.width=o.width,t.height=o.height;let s;if(t.startLabelLeft){const l=await vo(t.startLabelLeft,ql(t.labelStyle)),c=e.insert("g").attr("class","edgeTerminals"),u=c.insert("g").attr("class","inner");s=u.node().appendChild(l);const h=l.getBBox();u.attr("transform","translate("+-h.width/2+", "+-h.height/2+")"),Oa.get(t.id)||Oa.set(t.id,{}),Oa.get(t.id).startLeft=c,oc(s,t.startLabelLeft)}if(t.startLabelRight){const l=await vo(t.startLabelRight,ql(t.labelStyle)),c=e.insert("g").attr("class","edgeTerminals"),u=c.insert("g").attr("class","inner");s=c.node().appendChild(l),u.node().appendChild(l);const h=l.getBBox();u.attr("transform","translate("+-h.width/2+", "+-h.height/2+")"),Oa.get(t.id)||Oa.set(t.id,{}),Oa.get(t.id).startRight=c,oc(s,t.startLabelRight)}if(t.endLabelLeft){const l=await vo(t.endLabelLeft,ql(t.labelStyle)),c=e.insert("g").attr("class","edgeTerminals"),u=c.insert("g").attr("class","inner");s=u.node().appendChild(l);const h=l.getBBox();u.attr("transform","translate("+-h.width/2+", "+-h.height/2+")"),c.node().appendChild(l),Oa.get(t.id)||Oa.set(t.id,{}),Oa.get(t.id).endLeft=c,oc(s,t.endLabelLeft)}if(t.endLabelRight){const l=await vo(t.endLabelRight,ql(t.labelStyle)),c=e.insert("g").attr("class","edgeTerminals"),u=c.insert("g").attr("class","inner");s=u.node().appendChild(l);const h=l.getBBox();u.attr("transform","translate("+-h.width/2+", "+-h.height/2+")"),c.node().appendChild(l),Oa.get(t.id)||Oa.set(t.id,{}),Oa.get(t.id).endRight=c,oc(s,t.endLabelRight)}return r},"insertEdgeLabel");function oc(e,t){He().flowchart.htmlLabels&&e&&(e.style.width=t.length*9+"px",e.style.height="12px")}I(oc,"setTerminalWidth");var Jvt=I((e,t)=>{It.debug("Moving label abc88 ",e.id,e.label,Qd.get(e.id),t);let a=t.updatedPath?t.updatedPath:t.originalPath;const r=He(),{subGraphTitleTotalMargin:n}=Q0(r);if(e.label){const i=Qd.get(e.id);let o=e.x,s=e.y;if(a){const l=mn.calcLabelPosition(a);It.debug("Moving label "+e.label+" from (",o,",",s,") to (",l.x,",",l.y,") abc88"),t.updatedPath&&(o=l.x,s=l.y)}i.attr("transform",`translate(${o}, ${s+n/2})`)}if(e.startLabelLeft){const i=Oa.get(e.id).startLeft;let o=e.x,s=e.y;if(a){const l=mn.calcTerminalLabelPosition(e.arrowTypeStart?10:0,"start_left",a);o=l.x,s=l.y}i.attr("transform",`translate(${o}, ${s})`)}if(e.startLabelRight){const i=Oa.get(e.id).startRight;let o=e.x,s=e.y;if(a){const l=mn.calcTerminalLabelPosition(e.arrowTypeStart?10:0,"start_right",a);o=l.x,s=l.y}i.attr("transform",`translate(${o}, ${s})`)}if(e.endLabelLeft){const i=Oa.get(e.id).endLeft;let o=e.x,s=e.y;if(a){const l=mn.calcTerminalLabelPosition(e.arrowTypeEnd?10:0,"end_left",a);o=l.x,s=l.y}i.attr("transform",`translate(${o}, ${s})`)}if(e.endLabelRight){const i=Oa.get(e.id).endRight;let o=e.x,s=e.y;if(a){const l=mn.calcTerminalLabelPosition(e.arrowTypeEnd?10:0,"end_right",a);o=l.x,s=l.y}i.attr("transform",`translate(${o}, ${s})`)}},"positionEdgeLabel"),Qvt=I((e,t)=>{const a=e.x,r=e.y,n=Math.abs(t.x-a),i=Math.abs(t.y-r),o=e.width/2,s=e.height/2;return n>=o||i>=s},"outsideNode"),tmt=I((e,t,a)=>{It.debug(`intersection calc abc89:
  outsidePoint: ${JSON.stringify(t)}
  insidePoint : ${JSON.stringify(a)}
  node        : x:${e.x} y:${e.y} w:${e.width} h:${e.height}`);const r=e.x,n=e.y,i=Math.abs(r-a.x),o=e.width/2;let s=a.x<t.x?o-i:o+i;const l=e.height/2,c=Math.abs(t.y-a.y),u=Math.abs(t.x-a.x);if(Math.abs(n-t.y)*o>Math.abs(r-t.x)*l){let h=a.y<t.y?t.y-l-n:n-l-t.y;s=u*h/c;const d={x:a.x<t.x?a.x+s:a.x-u+s,y:a.y<t.y?a.y+c-h:a.y-c+h};return s===0&&(d.x=t.x,d.y=t.y),u===0&&(d.x=t.x),c===0&&(d.y=t.y),It.debug(`abc89 top/bottom calc, Q ${c}, q ${h}, R ${u}, r ${s}`,d),d}else{a.x<t.x?s=t.x-o-r:s=r-o-t.x;let h=c*s/u,d=a.x<t.x?a.x+u-s:a.x-u+s,f=a.y<t.y?a.y+h:a.y-h;return It.debug(`sides calc abc89, Q ${c}, q ${h}, R ${u}, r ${s}`,{_x:d,_y:f}),s===0&&(d=t.x,f=t.y),u===0&&(d=t.x),c===0&&(f=t.y),{x:d,y:f}}},"intersection"),TC=I((e,t)=>{It.warn("abc88 cutPathAtIntersect",e,t);let a=[],r=e[0],n=!1;return e.forEach(i=>{if(It.info("abc88 checking point",i,t),!Qvt(t,i)&&!n){const o=tmt(t,r,i);It.debug("abc88 inside",i,r,o),It.debug("abc88 intersection",o,t);let s=!1;a.forEach(l=>{s=s||l.x===o.x&&l.y===o.y}),a.some(l=>l.x===o.x&&l.y===o.y)?It.warn("abc88 no intersect",o,a):a.push(o),n=!0}else It.warn("abc88 outside",i,r),r=i,n||a.push(i)}),It.debug("returning points",a),a},"cutPathAtIntersect");function JP(e){const t=[],a=[];for(let r=1;r<e.length-1;r++){const n=e[r-1],i=e[r],o=e[r+1];(n.x===i.x&&i.y===o.y&&Math.abs(i.x-o.x)>5&&Math.abs(i.y-n.y)>5||n.y===i.y&&i.x===o.x&&Math.abs(i.x-n.x)>5&&Math.abs(i.y-o.y)>5)&&(t.push(i),a.push(r))}return{cornerPoints:t,cornerPointPositions:a}}I(JP,"extractCornerPoints");var AC=I(function(e,t,a){const r=t.x-e.x,n=t.y-e.y,i=Math.sqrt(r*r+n*n),o=a/i;return{x:t.x-o*r,y:t.y-o*n}},"findAdjacentPoint"),emt=I(function(e){const{cornerPointPositions:t}=JP(e),a=[];for(let r=0;r<e.length;r++)if(t.includes(r)){const n=e[r-1],i=e[r+1],o=e[r],s=AC(n,o,5),l=AC(i,o,5),c=l.x-s.x,u=l.y-s.y;a.push(s);const h=Math.sqrt(2)*2;let d={x:o.x,y:o.y};if(Math.abs(i.x-n.x)>10&&Math.abs(i.y-n.y)>=10){It.debug("Corner point fixing",Math.abs(i.x-n.x),Math.abs(i.y-n.y));const f=5;o.x===s.x?d={x:c<0?s.x-f+h:s.x+f-h,y:u<0?s.y-h:s.y+h}:d={x:c<0?s.x-h:s.x+h,y:u<0?s.y-f+h:s.y+f-h}}else It.debug("Corner point skipping fixing",Math.abs(i.x-n.x),Math.abs(i.y-n.y));a.push(d,l)}else a.push(e[r]);return a},"fixCorners"),amt=I(function(e,t,a,r,n,i,o){var L;const{handDrawnSeed:s}=He();let l=t.points,c=!1;const u=n;var h=i;const d=[];for(const M in t.cssCompiledStyles)KM(M)||d.push(t.cssCompiledStyles[M]);h.intersect&&u.intersect&&(l=l.slice(1,t.points.length-1),l.unshift(u.intersect(l[0])),It.debug("Last point APA12",t.start,"-->",t.end,l[l.length-1],h,h.intersect(l[l.length-1])),l.push(h.intersect(l[l.length-1]))),t.toCluster&&(It.info("to cluster abc88",a.get(t.toCluster)),l=TC(t.points,a.get(t.toCluster).node),c=!0),t.fromCluster&&(It.debug("from cluster abc88",a.get(t.fromCluster),JSON.stringify(l,null,2)),l=TC(l.reverse(),a.get(t.fromCluster).node).reverse(),c=!0);let f=l.filter(M=>!Number.isNaN(M.y));f=emt(f);let p=Oh;switch(p=zd,t.curve){case"linear":p=zd;break;case"basis":p=Oh;break;case"cardinal":p=RE;break;case"bumpX":p=DE;break;case"bumpY":p=LE;break;case"catmullRom":p=BE;break;case"monotoneX":p=VE;break;case"monotoneY":p=GE;break;case"natural":p=WE;break;case"step":p=qE;break;case"stepAfter":p=jE;break;case"stepBefore":p=UE;break;default:p=Oh}const{x:g,y:v}=Jut(t),_=Apt().x(g).y(v).curve(p);let y;switch(t.thickness){case"normal":y="edge-thickness-normal";break;case"thick":y="edge-thickness-thick";break;case"invisible":y="edge-thickness-invisible";break;default:y="edge-thickness-normal"}switch(t.pattern){case"solid":y+=" edge-pattern-solid";break;case"dotted":y+=" edge-pattern-dotted";break;case"dashed":y+=" edge-pattern-dashed";break;default:y+=" edge-pattern-solid"}let b,w=_(f);const T=Array.isArray(t.style)?t.style:t.style?[t.style]:[];let C=T.find(M=>M==null?void 0:M.startsWith("stroke:"));if(t.look==="handDrawn"){const M=ae.svg(e);Object.assign([],f);const P=M.path(w,{roughness:.3,seed:s});y+=" transition",b=$e(P).select("path").attr("id",t.id).attr("class"," "+y+(t.classes?" "+t.classes:"")).attr("style",T?T.reduce((D,O)=>D+";"+O,""):"");let E=b.attr("d");b.attr("d",E),e.node().appendChild(b.node())}else{const M=d.join(";"),P=T?T.reduce((O,B)=>O+B+";",""):"";let E="";t.animate&&(E=" edge-animation-fast"),t.animation&&(E=" edge-animation-"+t.animation);const D=M?M+";"+P+";":P;b=e.append("path").attr("d",w).attr("id",t.id).attr("class"," "+y+(t.classes?" "+t.classes:"")+(E??"")).attr("style",D),C=(L=D.match(/stroke:([^;]+)/))==null?void 0:L[1]}let A="";(He().flowchart.arrowMarkerAbsolute||He().state.arrowMarkerAbsolute)&&(A=fI(!0)),It.info("arrowTypeStart",t.arrowTypeStart),It.info("arrowTypeEnd",t.arrowTypeEnd),Xvt(b,t,A,o,r,C);let k={};return c&&(k.updatedPath=l),k.originalPath=t.points,k},"insertEdge"),rmt=I((e,t,a,r)=>{t.forEach(n=>{_mt[n](e,a,r)})},"insertMarkers"),nmt=I((e,t,a)=>{It.trace("Making markers for ",a),e.append("defs").append("marker").attr("id",a+"_"+t+"-extensionStart").attr("class","marker extension "+t).attr("refX",18).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 1,7 L18,13 V 1 Z"),e.append("defs").append("marker").attr("id",a+"_"+t+"-extensionEnd").attr("class","marker extension "+t).attr("refX",1).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 1,1 V 13 L18,7 Z")},"extension"),imt=I((e,t,a)=>{e.append("defs").append("marker").attr("id",a+"_"+t+"-compositionStart").attr("class","marker composition "+t).attr("refX",18).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z"),e.append("defs").append("marker").attr("id",a+"_"+t+"-compositionEnd").attr("class","marker composition "+t).attr("refX",1).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z")},"composition"),omt=I((e,t,a)=>{e.append("defs").append("marker").attr("id",a+"_"+t+"-aggregationStart").attr("class","marker aggregation "+t).attr("refX",18).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z"),e.append("defs").append("marker").attr("id",a+"_"+t+"-aggregationEnd").attr("class","marker aggregation "+t).attr("refX",1).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z")},"aggregation"),smt=I((e,t,a)=>{e.append("defs").append("marker").attr("id",a+"_"+t+"-dependencyStart").attr("class","marker dependency "+t).attr("refX",6).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 5,7 L9,13 L1,7 L9,1 Z"),e.append("defs").append("marker").attr("id",a+"_"+t+"-dependencyEnd").attr("class","marker dependency "+t).attr("refX",13).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L14,7 L9,1 Z")},"dependency"),lmt=I((e,t,a)=>{e.append("defs").append("marker").attr("id",a+"_"+t+"-lollipopStart").attr("class","marker lollipop "+t).attr("refX",13).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("circle").attr("stroke","black").attr("fill","transparent").attr("cx",7).attr("cy",7).attr("r",6),e.append("defs").append("marker").attr("id",a+"_"+t+"-lollipopEnd").attr("class","marker lollipop "+t).attr("refX",1).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("circle").attr("stroke","black").attr("fill","transparent").attr("cx",7).attr("cy",7).attr("r",6)},"lollipop"),cmt=I((e,t,a)=>{e.append("marker").attr("id",a+"_"+t+"-pointEnd").attr("class","marker "+t).attr("viewBox","0 0 10 10").attr("refX",5).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",8).attr("markerHeight",8).attr("orient","auto").append("path").attr("d","M 0 0 L 10 5 L 0 10 z").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0"),e.append("marker").attr("id",a+"_"+t+"-pointStart").attr("class","marker "+t).attr("viewBox","0 0 10 10").attr("refX",4.5).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",8).attr("markerHeight",8).attr("orient","auto").append("path").attr("d","M 0 5 L 10 10 L 10 0 z").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0")},"point"),umt=I((e,t,a)=>{e.append("marker").attr("id",a+"_"+t+"-circleEnd").attr("class","marker "+t).attr("viewBox","0 0 10 10").attr("refX",11).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("circle").attr("cx","5").attr("cy","5").attr("r","5").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0"),e.append("marker").attr("id",a+"_"+t+"-circleStart").attr("class","marker "+t).attr("viewBox","0 0 10 10").attr("refX",-1).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("circle").attr("cx","5").attr("cy","5").attr("r","5").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0")},"circle"),hmt=I((e,t,a)=>{e.append("marker").attr("id",a+"_"+t+"-crossEnd").attr("class","marker cross "+t).attr("viewBox","0 0 11 11").attr("refX",12).attr("refY",5.2).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("path").attr("d","M 1,1 l 9,9 M 10,1 l -9,9").attr("class","arrowMarkerPath").style("stroke-width",2).style("stroke-dasharray","1,0"),e.append("marker").attr("id",a+"_"+t+"-crossStart").attr("class","marker cross "+t).attr("viewBox","0 0 11 11").attr("refX",-1).attr("refY",5.2).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("path").attr("d","M 1,1 l 9,9 M 10,1 l -9,9").attr("class","arrowMarkerPath").style("stroke-width",2).style("stroke-dasharray","1,0")},"cross"),dmt=I((e,t,a)=>{e.append("defs").append("marker").attr("id",a+"_"+t+"-barbEnd").attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",14).attr("markerUnits","userSpaceOnUse").attr("orient","auto").append("path").attr("d","M 19,7 L9,13 L14,7 L9,1 Z")},"barb"),fmt=I((e,t,a)=>{e.append("defs").append("marker").attr("id",a+"_"+t+"-onlyOneStart").attr("class","marker onlyOne "+t).attr("refX",0).attr("refY",9).attr("markerWidth",18).attr("markerHeight",18).attr("orient","auto").append("path").attr("d","M9,0 L9,18 M15,0 L15,18"),e.append("defs").append("marker").attr("id",a+"_"+t+"-onlyOneEnd").attr("class","marker onlyOne "+t).attr("refX",18).attr("refY",9).attr("markerWidth",18).attr("markerHeight",18).attr("orient","auto").append("path").attr("d","M3,0 L3,18 M9,0 L9,18")},"only_one"),pmt=I((e,t,a)=>{const r=e.append("defs").append("marker").attr("id",a+"_"+t+"-zeroOrOneStart").attr("class","marker zeroOrOne "+t).attr("refX",0).attr("refY",9).attr("markerWidth",30).attr("markerHeight",18).attr("orient","auto");r.append("circle").attr("fill","white").attr("cx",21).attr("cy",9).attr("r",6),r.append("path").attr("d","M9,0 L9,18");const n=e.append("defs").append("marker").attr("id",a+"_"+t+"-zeroOrOneEnd").attr("class","marker zeroOrOne "+t).attr("refX",30).attr("refY",9).attr("markerWidth",30).attr("markerHeight",18).attr("orient","auto");n.append("circle").attr("fill","white").attr("cx",9).attr("cy",9).attr("r",6),n.append("path").attr("d","M21,0 L21,18")},"zero_or_one"),gmt=I((e,t,a)=>{e.append("defs").append("marker").attr("id",a+"_"+t+"-oneOrMoreStart").attr("class","marker oneOrMore "+t).attr("refX",18).attr("refY",18).attr("markerWidth",45).attr("markerHeight",36).attr("orient","auto").append("path").attr("d","M0,18 Q 18,0 36,18 Q 18,36 0,18 M42,9 L42,27"),e.append("defs").append("marker").attr("id",a+"_"+t+"-oneOrMoreEnd").attr("class","marker oneOrMore "+t).attr("refX",27).attr("refY",18).attr("markerWidth",45).attr("markerHeight",36).attr("orient","auto").append("path").attr("d","M3,9 L3,27 M9,18 Q27,0 45,18 Q27,36 9,18")},"one_or_more"),vmt=I((e,t,a)=>{const r=e.append("defs").append("marker").attr("id",a+"_"+t+"-zeroOrMoreStart").attr("class","marker zeroOrMore "+t).attr("refX",18).attr("refY",18).attr("markerWidth",57).attr("markerHeight",36).attr("orient","auto");r.append("circle").attr("fill","white").attr("cx",48).attr("cy",18).attr("r",6),r.append("path").attr("d","M0,18 Q18,0 36,18 Q18,36 0,18");const n=e.append("defs").append("marker").attr("id",a+"_"+t+"-zeroOrMoreEnd").attr("class","marker zeroOrMore "+t).attr("refX",39).attr("refY",18).attr("markerWidth",57).attr("markerHeight",36).attr("orient","auto");n.append("circle").attr("fill","white").attr("cx",9).attr("cy",18).attr("r",6),n.append("path").attr("d","M21,18 Q39,0 57,18 Q39,36 21,18")},"zero_or_more"),mmt=I((e,t,a)=>{e.append("defs").append("marker").attr("id",a+"_"+t+"-requirement_arrowEnd").attr("refX",20).attr("refY",10).attr("markerWidth",20).attr("markerHeight",20).attr("orient","auto").append("path").attr("d",`M0,0
      L20,10
      M20,10
      L0,20`)},"requirement_arrow"),ymt=I((e,t,a)=>{const r=e.append("defs").append("marker").attr("id",a+"_"+t+"-requirement_containsStart").attr("refX",0).attr("refY",10).attr("markerWidth",20).attr("markerHeight",20).attr("orient","auto").append("g");r.append("circle").attr("cx",10).attr("cy",10).attr("r",9).attr("fill","none"),r.append("line").attr("x1",1).attr("x2",19).attr("y1",10).attr("y2",10),r.append("line").attr("y1",1).attr("y2",19).attr("x1",10).attr("x2",10)},"requirement_contains"),_mt={extension:nmt,composition:imt,aggregation:omt,dependency:smt,lollipop:lmt,point:cmt,circle:umt,cross:hmt,barb:dmt,only_one:fmt,zero_or_one:pmt,one_or_more:gmt,zero_or_more:vmt,requirement_arrow:mmt,requirement_contains:ymt},bmt=rmt,xmt={common:vl,getConfig:mr,insertCluster:Lvt,insertEdge:amt,insertEdgeLabel:Kvt,insertMarkers:bmt,insertNode:KP,interpolateToCurve:f_,labelHelper:Te,log:It,positionEdgeLabel:Jvt},eu={},QP=I(e=>{for(const t of e)eu[t.name]=t},"registerLayoutLoaders"),Smt=I(()=>{QP([{name:"dagre",loader:I(async()=>await jt(()=>import("./dagre-FFZHY6LT-CCnNfLh6.js"),__vite__mapDeps([78,79,1,80,2])),"loader")}])},"registerDefaultLayoutLoaders");Smt();var j_t=I(async(e,t)=>{if(!(e.layoutAlgorithm in eu))throw new Error(`Unknown layout algorithm: ${e.layoutAlgorithm}`);const a=eu[e.layoutAlgorithm];return(await a.loader()).render(e,t,xmt,{algorithm:a.algorithm})},"render"),Y_t=I((e="",{fallback:t="dagre"}={})=>{if(e in eu)return e;if(t in eu)return It.warn(`Layout algorithm ${e} is not registered. Using ${t} as fallback.`),t;throw new Error(`Both layout algorithms ${e} and ${t} are not registered.`)},"getRegisteredLayoutAlgorithm"),kC={name:"mermaid",version:"11.8.1",description:"Markdown-ish syntax for generating flowcharts, mindmaps, sequence diagrams, class diagrams, gantt charts, git graphs and more.",type:"module",module:"./dist/mermaid.core.mjs",types:"./dist/mermaid.d.ts",exports:{".":{types:"./dist/mermaid.d.ts",import:"./dist/mermaid.core.mjs",default:"./dist/mermaid.core.mjs"},"./*":"./*"},keywords:["diagram","markdown","flowchart","sequence diagram","gantt","class diagram","git graph","mindmap","packet diagram","c4 diagram","er diagram","pie chart","pie diagram","quadrant chart","requirement diagram","graph"],scripts:{clean:"rimraf dist",dev:"pnpm -w dev","docs:code":"typedoc src/defaultConfig.ts src/config.ts src/mermaid.ts && prettier --write ./src/docs/config/setup","docs:build":"rimraf ../../docs && pnpm docs:code && pnpm docs:spellcheck && tsx scripts/docs.cli.mts","docs:verify":"pnpm docs:code && pnpm docs:spellcheck && tsx scripts/docs.cli.mts --verify","docs:pre:vitepress":"pnpm --filter ./src/docs prefetch && rimraf src/vitepress && pnpm docs:code && tsx scripts/docs.cli.mts --vitepress && pnpm --filter ./src/vitepress install --no-frozen-lockfile --ignore-scripts","docs:build:vitepress":"pnpm docs:pre:vitepress && (cd src/vitepress && pnpm run build) && cpy --flat src/docs/landing/ ./src/vitepress/.vitepress/dist/landing","docs:dev":'pnpm docs:pre:vitepress && concurrently "pnpm --filter ./src/vitepress dev" "tsx scripts/docs.cli.mts --watch --vitepress"',"docs:dev:docker":'pnpm docs:pre:vitepress && concurrently "pnpm --filter ./src/vitepress dev:docker" "tsx scripts/docs.cli.mts --watch --vitepress"',"docs:serve":"pnpm docs:build:vitepress && vitepress serve src/vitepress","docs:spellcheck":'cspell "src/docs/**/*.md"',"docs:release-version":"tsx scripts/update-release-version.mts","docs:verify-version":"tsx scripts/update-release-version.mts --verify","types:build-config":"tsx scripts/create-types-from-json-schema.mts","types:verify-config":"tsx scripts/create-types-from-json-schema.mts --verify",checkCircle:"npx madge --circular ./src",prepublishOnly:"pnpm docs:verify-version"},repository:{type:"git",url:"https://github.com/mermaid-js/mermaid"},author:"Knut Sveidqvist",license:"MIT",standard:{ignore:["**/parser/*.js","dist/**/*.js","cypress/**/*.js"],globals:["page"]},dependencies:{"@braintree/sanitize-url":"^7.0.4","@iconify/utils":"^2.1.33","@mermaid-js/parser":"workspace:^","@types/d3":"^7.4.3",cytoscape:"^3.29.3","cytoscape-cose-bilkent":"^4.1.0","cytoscape-fcose":"^2.2.0",d3:"^7.9.0","d3-sankey":"^0.12.3","dagre-d3-es":"7.0.11",dayjs:"^1.11.13",dompurify:"^3.2.5",katex:"^0.16.9",khroma:"^2.1.0","lodash-es":"^4.17.21",marked:"^15.0.7",roughjs:"^4.6.6",stylis:"^4.3.6","ts-dedent":"^2.2.0",uuid:"^11.1.0"},devDependencies:{"@adobe/jsonschema2md":"^8.0.2","@iconify/types":"^2.0.0","@types/cytoscape":"^3.21.9","@types/cytoscape-fcose":"^2.2.4","@types/d3-sankey":"^0.12.4","@types/d3-scale":"^4.0.9","@types/d3-scale-chromatic":"^3.1.0","@types/d3-selection":"^3.0.11","@types/d3-shape":"^3.1.7","@types/jsdom":"^21.1.7","@types/katex":"^0.16.7","@types/lodash-es":"^4.17.12","@types/micromatch":"^4.0.9","@types/stylis":"^4.2.7","@types/uuid":"^10.0.0",ajv:"^8.17.1",chokidar:"3.6.0",concurrently:"^9.1.2","csstree-validator":"^4.0.1",globby:"^14.0.2",jison:"^0.4.18","js-base64":"^3.7.7",jsdom:"^26.0.0","json-schema-to-typescript":"^15.0.4",micromatch:"^4.0.8","path-browserify":"^1.0.1",prettier:"^3.5.2",remark:"^15.0.1","remark-frontmatter":"^5.0.0","remark-gfm":"^4.0.1",rimraf:"^6.0.1","start-server-and-test":"^2.0.10","type-fest":"^4.35.0",typedoc:"^0.27.8","typedoc-plugin-markdown":"^4.4.2",typescript:"~5.7.3","unist-util-flatmap":"^1.0.0","unist-util-visit":"^5.0.0",vitepress:"^1.0.2","vitepress-plugin-search":"1.0.4-alpha.22"},files:["dist/","README.md"],publishConfig:{access:"public"}},wmt=I(e=>{var n;const{securityLevel:t}=He();let a=$e("body");if(t==="sandbox"){const o=((n=$e(`#i${e}`).node())==null?void 0:n.contentDocument)??document;a=$e(o.body)}return a.select(`#${e}`)},"selectSvgElement"),tB="comm",eB="rule",aB="decl",Cmt="@import",Tmt="@namespace",Amt="@keyframes",kmt="@layer",rB=Math.abs,R_=String.fromCharCode;function nB(e){return e.trim()}function zh(e,t,a){return e.replace(t,a)}function Dmt(e,t,a){return e.indexOf(t,a)}function ws(e,t){return e.charCodeAt(t)|0}function rl(e,t,a){return e.slice(t,a)}function vn(e){return e.length}function Lmt(e){return e.length}function ph(e,t){return t.push(e),e}var ip=1,nl=1,iB=0,Nr=0,ya=0,_l="";function P_(e,t,a,r,n,i,o,s){return{value:e,root:t,parent:a,type:r,props:n,children:i,line:ip,column:nl,length:o,return:"",siblings:s}}function Imt(){return ya}function Mmt(){return ya=Nr>0?ws(_l,--Nr):0,nl--,ya===10&&(nl=1,ip--),ya}function jr(){return ya=Nr<iB?ws(_l,Nr++):0,nl++,ya===10&&(nl=1,ip++),ya}function Ai(){return ws(_l,Nr)}function Vh(){return Nr}function op(e,t){return rl(_l,e,t)}function au(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function Emt(e){return ip=nl=1,iB=vn(_l=e),Nr=0,[]}function Rmt(e){return _l="",e}function ev(e){return nB(op(Nr-1,ay(e===91?e+2:e===40?e+1:e)))}function Pmt(e){for(;(ya=Ai())&&ya<33;)jr();return au(e)>2||au(ya)>3?"":" "}function Bmt(e,t){for(;--t&&jr()&&!(ya<48||ya>102||ya>57&&ya<65||ya>70&&ya<97););return op(e,Vh()+(t<6&&Ai()==32&&jr()==32))}function ay(e){for(;jr();)switch(ya){case e:return Nr;case 34:case 39:e!==34&&e!==39&&ay(ya);break;case 40:e===41&&ay(e);break;case 92:jr();break}return Nr}function Omt(e,t){for(;jr()&&e+ya!==57;)if(e+ya===84&&Ai()===47)break;return"/*"+op(t,Nr-1)+"*"+R_(e===47?e:jr())}function Nmt(e){for(;!au(Ai());)jr();return op(e,Nr)}function $mt(e){return Rmt(Gh("",null,null,null,[""],e=Emt(e),0,[0],e))}function Gh(e,t,a,r,n,i,o,s,l){for(var c=0,u=0,h=o,d=0,f=0,p=0,g=1,v=1,_=1,y=0,b="",w=n,T=i,C=r,A=b;v;)switch(p=y,y=jr()){case 40:if(p!=108&&ws(A,h-1)==58){Dmt(A+=zh(ev(y),"&","&\f"),"&\f",rB(c?s[c-1]:0))!=-1&&(_=-1);break}case 34:case 39:case 91:A+=ev(y);break;case 9:case 10:case 13:case 32:A+=Pmt(p);break;case 92:A+=Bmt(Vh()-1,7);continue;case 47:switch(Ai()){case 42:case 47:ph(Fmt(Omt(jr(),Vh()),t,a,l),l),(au(p||1)==5||au(Ai()||1)==5)&&vn(A)&&rl(A,-1,void 0)!==" "&&(A+=" ");break;default:A+="/"}break;case 123*g:s[c++]=vn(A)*_;case 125*g:case 59:case 0:switch(y){case 0:case 125:v=0;case 59+u:_==-1&&(A=zh(A,/\f/g,"")),f>0&&(vn(A)-h||g===0&&p===47)&&ph(f>32?LC(A+";",r,a,h-1,l):LC(zh(A," ","")+";",r,a,h-2,l),l);break;case 59:A+=";";default:if(ph(C=DC(A,t,a,c,u,n,s,b,w=[],T=[],h,i),i),y===123)if(u===0)Gh(A,t,C,C,w,i,h,s,T);else{switch(d){case 99:if(ws(A,3)===110)break;case 108:if(ws(A,2)===97)break;default:u=0;case 100:case 109:case 115:}u?Gh(e,C,C,r&&ph(DC(e,C,C,0,0,n,s,b,n,w=[],h,T),T),n,T,h,s,r?w:T):Gh(A,C,C,C,[""],T,0,s,T)}}c=u=f=0,g=_=1,b=A="",h=o;break;case 58:h=1+vn(A),f=p;default:if(g<1){if(y==123)--g;else if(y==125&&g++==0&&Mmt()==125)continue}switch(A+=R_(y),y*g){case 38:_=u>0?1:(A+="\f",-1);break;case 44:s[c++]=(vn(A)-1)*_,_=1;break;case 64:Ai()===45&&(A+=ev(jr())),d=Ai(),u=h=vn(b=A+=Nmt(Vh())),y++;break;case 45:p===45&&vn(A)==2&&(g=0)}}return i}function DC(e,t,a,r,n,i,o,s,l,c,u,h){for(var d=n-1,f=n===0?i:[""],p=Lmt(f),g=0,v=0,_=0;g<r;++g)for(var y=0,b=rl(e,d+1,d=rB(v=o[g])),w=e;y<p;++y)(w=nB(v>0?f[y]+" "+b:zh(b,/&\f/g,f[y])))&&(l[_++]=w);return P_(e,t,a,n===0?eB:s,l,c,u,h)}function Fmt(e,t,a,r){return P_(e,t,a,tB,R_(Imt()),rl(e,2,-2),0,r)}function LC(e,t,a,r,n){return P_(e,t,a,aB,rl(e,0,r),rl(e,r+1,-1),r,n)}function ry(e,t){for(var a="",r=0;r<e.length;r++)a+=t(e[r],r,e,t)||"";return a}function zmt(e,t,a,r){switch(e.type){case kmt:if(e.children.length)break;case Cmt:case Tmt:case aB:return e.return=e.return||e.value;case tB:return"";case Amt:return e.return=e.value+"{"+ry(e.children,r)+"}";case eB:if(!vn(e.value=e.props.join(",")))return""}return vn(a=ry(e.children,r))?e.return=e.value+"{"+a+"}":""}var oB="c4",Vmt=I(e=>/^\s*C4Context|C4Container|C4Component|C4Dynamic|C4Deployment/.test(e),"detector"),Gmt=I(async()=>{const{diagram:e}=await jt(async()=>{const{diagram:t}=await import("./c4Diagram-6F6E4RAY-C80zq_1u.js");return{diagram:t}},__vite__mapDeps([81,82,1,2]));return{id:oB,diagram:e}},"loader"),Hmt={id:oB,detector:Vmt,loader:Gmt},Wmt=Hmt,sB="flowchart",qmt=I((e,t)=>{var a,r;return((a=t==null?void 0:t.flowchart)==null?void 0:a.defaultRenderer)==="dagre-wrapper"||((r=t==null?void 0:t.flowchart)==null?void 0:r.defaultRenderer)==="elk"?!1:/^\s*graph/.test(e)},"detector"),Umt=I(async()=>{const{diagram:e}=await jt(async()=>{const{diagram:t}=await import("./flowDiagram-PKI6S5ZS-DbrIezbE.js");return{diagram:t}},__vite__mapDeps([83,84,85,86,87,1,2]));return{id:sB,diagram:e}},"loader"),jmt={id:sB,detector:qmt,loader:Umt},Ymt=jmt,lB="flowchart-v2",Xmt=I((e,t)=>{var a,r,n;return((a=t==null?void 0:t.flowchart)==null?void 0:a.defaultRenderer)==="dagre-d3"?!1:(((r=t==null?void 0:t.flowchart)==null?void 0:r.defaultRenderer)==="elk"&&(t.layout="elk"),/^\s*graph/.test(e)&&((n=t==null?void 0:t.flowchart)==null?void 0:n.defaultRenderer)==="dagre-wrapper"?!0:/^\s*flowchart/.test(e))},"detector"),Zmt=I(async()=>{const{diagram:e}=await jt(async()=>{const{diagram:t}=await import("./flowDiagram-PKI6S5ZS-DbrIezbE.js");return{diagram:t}},__vite__mapDeps([83,84,85,86,87,1,2]));return{id:lB,diagram:e}},"loader"),Kmt={id:lB,detector:Xmt,loader:Zmt},Jmt=Kmt,cB="er",Qmt=I(e=>/^\s*erDiagram/.test(e),"detector"),tyt=I(async()=>{const{diagram:e}=await jt(async()=>{const{diagram:t}=await import("./erDiagram-R3QVA2FD-DwCV7SfS.js");return{diagram:t}},__vite__mapDeps([88,85,86,87,1,2]));return{id:cB,diagram:e}},"loader"),eyt={id:cB,detector:Qmt,loader:tyt},ayt=eyt,uB="gitGraph",ryt=I(e=>/^\s*gitGraph/.test(e),"detector"),nyt=I(async()=>{const{diagram:e}=await jt(async()=>{const{diagram:t}=await import("./gitGraphDiagram-GW3U2K7C-CYnF7xE8.js");return{diagram:t}},__vite__mapDeps([89,90,91,92,1,2]));return{id:uB,diagram:e}},"loader"),iyt={id:uB,detector:ryt,loader:nyt},oyt=iyt,hB="gantt",syt=I(e=>/^\s*gantt/.test(e),"detector"),lyt=I(async()=>{const{diagram:e}=await jt(async()=>{const{diagram:t}=await import("./ganttDiagram-EK5VF46D-BJW8zf-L.js");return{diagram:t}},__vite__mapDeps([93,1,94,95,96,2]));return{id:hB,diagram:e}},"loader"),cyt={id:hB,detector:syt,loader:lyt},uyt=cyt,dB="info",hyt=I(e=>/^\s*info/.test(e),"detector"),dyt=I(async()=>{const{diagram:e}=await jt(async()=>{const{diagram:t}=await import("./infoDiagram-XT3IWWJI-D9q7riry.js");return{diagram:t}},__vite__mapDeps([97,92,1,2]));return{id:dB,diagram:e}},"loader"),fyt={id:dB,detector:hyt,loader:dyt},fB="pie",pyt=I(e=>/^\s*pie/.test(e),"detector"),gyt=I(async()=>{const{diagram:e}=await jt(async()=>{const{diagram:t}=await import("./pieDiagram-NIOCPIFQ-BSkiEi1S.js");return{diagram:t}},__vite__mapDeps([98,90,92,1,99,100,95,2]));return{id:fB,diagram:e}},"loader"),vyt={id:fB,detector:pyt,loader:gyt},pB="quadrantChart",myt=I(e=>/^\s*quadrantChart/.test(e),"detector"),yyt=I(async()=>{const{diagram:e}=await jt(async()=>{const{diagram:t}=await import("./quadrantDiagram-2OG54O6I-DznVXC43.js");return{diagram:t}},__vite__mapDeps([101,94,95,96,1,2]));return{id:pB,diagram:e}},"loader"),_yt={id:pB,detector:myt,loader:yyt},byt=_yt,gB="xychart",xyt=I(e=>/^\s*xychart-beta/.test(e),"detector"),Syt=I(async()=>{const{diagram:e}=await jt(async()=>{const{diagram:t}=await import("./xychartDiagram-H2YORKM3-pzsM24AG.js");return{diagram:t}},__vite__mapDeps([102,95,100,94,96,1,2]));return{id:gB,diagram:e}},"loader"),wyt={id:gB,detector:xyt,loader:Syt},Cyt=wyt,vB="requirement",Tyt=I(e=>/^\s*requirement(Diagram)?/.test(e),"detector"),Ayt=I(async()=>{const{diagram:e}=await jt(async()=>{const{diagram:t}=await import("./requirementDiagram-SO3GGRV7-BJ6nV2N3.js");return{diagram:t}},__vite__mapDeps([103,85,86,1,2]));return{id:vB,diagram:e}},"loader"),kyt={id:vB,detector:Tyt,loader:Ayt},Dyt=kyt,mB="sequence",Lyt=I(e=>/^\s*sequenceDiagram/.test(e),"detector"),Iyt=I(async()=>{const{diagram:e}=await jt(async()=>{const{diagram:t}=await import("./sequenceDiagram-ZIKVLSP4-C1FLKL3x.js");return{diagram:t}},__vite__mapDeps([104,82,91,1,2]));return{id:mB,diagram:e}},"loader"),Myt={id:mB,detector:Lyt,loader:Iyt},Eyt=Myt,yB="class",Ryt=I((e,t)=>{var a;return((a=t==null?void 0:t.class)==null?void 0:a.defaultRenderer)==="dagre-wrapper"?!1:/^\s*classDiagram/.test(e)},"detector"),Pyt=I(async()=>{const{diagram:e}=await jt(async()=>{const{diagram:t}=await import("./classDiagram-BGRH5UQR-3DwqqSsJ.js");return{diagram:t}},__vite__mapDeps([105,106,84,85,86,1,2]));return{id:yB,diagram:e}},"loader"),Byt={id:yB,detector:Ryt,loader:Pyt},Oyt=Byt,_B="classDiagram",Nyt=I((e,t)=>{var a;return/^\s*classDiagram/.test(e)&&((a=t==null?void 0:t.class)==null?void 0:a.defaultRenderer)==="dagre-wrapper"?!0:/^\s*classDiagram-v2/.test(e)},"detector"),$yt=I(async()=>{const{diagram:e}=await jt(async()=>{const{diagram:t}=await import("./classDiagram-v2-O24JOBDK-3DwqqSsJ.js");return{diagram:t}},__vite__mapDeps([107,106,84,85,86,1,2]));return{id:_B,diagram:e}},"loader"),Fyt={id:_B,detector:Nyt,loader:$yt},zyt=Fyt,bB="state",Vyt=I((e,t)=>{var a;return((a=t==null?void 0:t.state)==null?void 0:a.defaultRenderer)==="dagre-wrapper"?!1:/^\s*stateDiagram/.test(e)},"detector"),Gyt=I(async()=>{const{diagram:e}=await jt(async()=>{const{diagram:t}=await import("./stateDiagram-XX37X6EN-PecmVe7R.js");return{diagram:t}},__vite__mapDeps([108,109,85,86,79,1,80,2]));return{id:bB,diagram:e}},"loader"),Hyt={id:bB,detector:Vyt,loader:Gyt},Wyt=Hyt,xB="stateDiagram",qyt=I((e,t)=>{var a;return!!(/^\s*stateDiagram-v2/.test(e)||/^\s*stateDiagram/.test(e)&&((a=t==null?void 0:t.state)==null?void 0:a.defaultRenderer)==="dagre-wrapper")},"detector"),Uyt=I(async()=>{const{diagram:e}=await jt(async()=>{const{diagram:t}=await import("./stateDiagram-v2-GD6S3NHB-CQcGi_dW.js");return{diagram:t}},__vite__mapDeps([110,109,85,86,1,2]));return{id:xB,diagram:e}},"loader"),jyt={id:xB,detector:qyt,loader:Uyt},Yyt=jyt,SB="journey",Xyt=I(e=>/^\s*journey/.test(e),"detector"),Zyt=I(async()=>{const{diagram:e}=await jt(async()=>{const{diagram:t}=await import("./journeyDiagram-EWQZEKCU-v6r_Czed.js");return{diagram:t}},__vite__mapDeps([111,82,84,99,1,2]));return{id:SB,diagram:e}},"loader"),Kyt={id:SB,detector:Xyt,loader:Zyt},Jyt=Kyt,Qyt=I((e,t,a)=>{It.debug(`rendering svg for syntax error
`);const r=wmt(t),n=r.append("g");r.attr("viewBox","0 0 2412 512"),pI(r,100,512,!0),n.append("path").attr("class","error-icon").attr("d","m411.313,123.313c6.25-6.25 6.25-16.375 0-22.625s-16.375-6.25-22.625,0l-32,32-9.375,9.375-20.688-20.688c-12.484-12.5-32.766-12.5-45.25,0l-16,16c-1.261,1.261-2.304,2.648-3.31,4.051-21.739-8.561-45.324-13.426-70.065-13.426-105.867,0-192,86.133-192,192s86.133,192 192,192 192-86.133 192-192c0-24.741-4.864-48.327-13.426-70.065 1.402-1.007 2.79-2.049 4.051-3.31l16-16c12.5-12.492 12.5-32.758 0-45.25l-20.688-20.688 9.375-9.375 32.001-31.999zm-219.313,100.687c-52.938,0-96,43.063-96,96 0,8.836-7.164,16-16,16s-16-7.164-16-16c0-70.578 57.422-128 128-128 8.836,0 16,7.164 16,16s-7.164,16-16,16z"),n.append("path").attr("class","error-icon").attr("d","m459.02,148.98c-6.25-6.25-16.375-6.25-22.625,0s-6.25,16.375 0,22.625l16,16c3.125,3.125 7.219,4.688 11.313,4.688 4.094,0 8.188-1.563 11.313-4.688 6.25-6.25 6.25-16.375 0-22.625l-16.001-16z"),n.append("path").attr("class","error-icon").attr("d","m340.395,75.605c3.125,3.125 7.219,4.688 11.313,4.688 4.094,0 8.188-1.563 11.313-4.688 6.25-6.25 6.25-16.375 0-22.625l-16-16c-6.25-6.25-16.375-6.25-22.625,0s-6.25,16.375 0,22.625l15.999,16z"),n.append("path").attr("class","error-icon").attr("d","m400,64c8.844,0 16-7.164 16-16v-32c0-8.836-7.156-16-16-16-8.844,0-16,7.164-16,16v32c0,8.836 7.156,16 16,16z"),n.append("path").attr("class","error-icon").attr("d","m496,96.586h-32c-8.844,0-16,7.164-16,16 0,8.836 7.156,16 16,16h32c8.844,0 16-7.164 16-16 0-8.836-7.156-16-16-16z"),n.append("path").attr("class","error-icon").attr("d","m436.98,75.605c3.125,3.125 7.219,4.688 11.313,4.688 4.094,0 8.188-1.563 11.313-4.688l32-32c6.25-6.25 6.25-16.375 0-22.625s-16.375-6.25-22.625,0l-32,32c-6.251,6.25-6.251,16.375-0.001,22.625z"),n.append("text").attr("class","error-text").attr("x",1440).attr("y",250).attr("font-size","150px").style("text-anchor","middle").text("Syntax error in text"),n.append("text").attr("class","error-text").attr("x",1250).attr("y",400).attr("font-size","100px").style("text-anchor","middle").text(`mermaid version ${a}`)},"draw"),wB={draw:Qyt},t0t=wB,e0t={db:{},renderer:wB,parser:{parse:I(()=>{},"parse")}},a0t=e0t,CB="flowchart-elk",r0t=I((e,t={})=>{var a;return/^\s*flowchart-elk/.test(e)||/^\s*flowchart|graph/.test(e)&&((a=t==null?void 0:t.flowchart)==null?void 0:a.defaultRenderer)==="elk"?(t.layout="elk",!0):!1},"detector"),n0t=I(async()=>{const{diagram:e}=await jt(async()=>{const{diagram:t}=await import("./flowDiagram-PKI6S5ZS-DbrIezbE.js");return{diagram:t}},__vite__mapDeps([83,84,85,86,87,1,2]));return{id:CB,diagram:e}},"loader"),i0t={id:CB,detector:r0t,loader:n0t},o0t=i0t,TB="timeline",s0t=I(e=>/^\s*timeline/.test(e),"detector"),l0t=I(async()=>{const{diagram:e}=await jt(async()=>{const{diagram:t}=await import("./timeline-definition-RI47OAVP-DZ-Z9P1Y.js");return{diagram:t}},__vite__mapDeps([112,99,1,2]));return{id:TB,diagram:e}},"loader"),c0t={id:TB,detector:s0t,loader:l0t},u0t=c0t,AB="mindmap",h0t=I(e=>/^\s*mindmap/.test(e),"detector"),d0t=I(async()=>{const{diagram:e}=await jt(async()=>{const{diagram:t}=await import("./mindmap-definition-CZNETY7S-DIBz7uyY.js");return{diagram:t}},__vite__mapDeps([113,114,1,2]));return{id:AB,diagram:e}},"loader"),f0t={id:AB,detector:h0t,loader:d0t},p0t=f0t,kB="kanban",g0t=I(e=>/^\s*kanban/.test(e),"detector"),v0t=I(async()=>{const{diagram:e}=await jt(async()=>{const{diagram:t}=await import("./kanban-definition-ILFWEQ3N-CApUlFCz.js");return{diagram:t}},__vite__mapDeps([115,84,1,2]));return{id:kB,diagram:e}},"loader"),m0t={id:kB,detector:g0t,loader:v0t},y0t=m0t,DB="sankey",_0t=I(e=>/^\s*sankey-beta/.test(e),"detector"),b0t=I(async()=>{const{diagram:e}=await jt(async()=>{const{diagram:t}=await import("./sankeyDiagram-4UZDY2LN-DANYLpNq.js");return{diagram:t}},__vite__mapDeps([116,100,95,1,2]));return{id:DB,diagram:e}},"loader"),x0t={id:DB,detector:_0t,loader:b0t},S0t=x0t,LB="packet",w0t=I(e=>/^\s*packet-beta/.test(e),"detector"),C0t=I(async()=>{const{diagram:e}=await jt(async()=>{const{diagram:t}=await import("./diagram-5UYTHUR4-BDaIWzwP.js");return{diagram:t}},__vite__mapDeps([117,90,92,1,2]));return{id:LB,diagram:e}},"loader"),T0t={id:LB,detector:w0t,loader:C0t},IB="radar",A0t=I(e=>/^\s*radar-beta/.test(e),"detector"),k0t=I(async()=>{const{diagram:e}=await jt(async()=>{const{diagram:t}=await import("./diagram-ZTM2IBQH-ByWmh3oY.js");return{diagram:t}},__vite__mapDeps([118,90,92,1,2]));return{id:IB,diagram:e}},"loader"),D0t={id:IB,detector:A0t,loader:k0t},MB="block",L0t=I(e=>/^\s*block-beta/.test(e),"detector"),I0t=I(async()=>{const{diagram:e}=await jt(async()=>{const{diagram:t}=await import("./blockDiagram-PHRCVELO-7iGK3aqf.js");return{diagram:t}},__vite__mapDeps([119,84,1,79,87,2]));return{id:MB,diagram:e}},"loader"),M0t={id:MB,detector:L0t,loader:I0t},E0t=M0t,EB="architecture",R0t=I(e=>/^\s*architecture/.test(e),"detector"),P0t=I(async()=>{const{diagram:e}=await jt(async()=>{const{diagram:t}=await import("./architectureDiagram-NQ2NVSRB-BxaODYId.js");return{diagram:t}},__vite__mapDeps([120,90,91,92,1,114,2]));return{id:EB,diagram:e}},"loader"),B0t={id:EB,detector:R0t,loader:P0t},O0t=B0t,RB="treemap",N0t=I(e=>/^\s*treemap/.test(e),"detector"),$0t=I(async()=>{const{diagram:e}=await jt(async()=>{const{diagram:t}=await import("./diagram-3EMPZRKU-D1J58W8A.js");return{diagram:t}},__vite__mapDeps([121,86,90,91,92,1,96,100,95,2]));return{id:RB,diagram:e}},"loader"),F0t={id:RB,detector:N0t,loader:$0t},IC=!1,sp=I(()=>{IC||(IC=!0,kd("error",a0t,e=>e.toLowerCase().trim()==="error"),kd("---",{db:{clear:I(()=>{},"clear")},styles:{},renderer:{draw:I(()=>{},"draw")},parser:{parse:I(()=>{throw new Error("Diagrams beginning with --- are not valid. If you were trying to use a YAML front-matter, please ensure that you've correctly opened and closed the YAML front-matter with un-indented `---` blocks")},"parse")},init:I(()=>null,"init")},e=>e.toLowerCase().trimStart().startsWith("---")),mm(o0t,p0t,O0t),mm(Wmt,y0t,zyt,Oyt,ayt,uyt,fyt,vyt,Dyt,Eyt,Jmt,Ymt,u0t,oyt,Yyt,Wyt,Jyt,byt,S0t,T0t,Cyt,E0t,D0t,F0t))},"addDiagrams"),z0t=I(async()=>{It.debug("Loading registered diagrams");const t=(await Promise.allSettled(Object.entries(Xs).map(async([a,{detector:r,loader:n}])=>{if(n)try{xm(a)}catch{try{const{diagram:i,id:o}=await n();kd(o,i,r)}catch(i){throw It.error(`Failed to load external diagram with key ${a}. Removing from detectors.`),delete Xs[a],i}}}))).filter(a=>a.status==="rejected");if(t.length>0){It.error(`Failed to load ${t.length} external diagrams`);for(const a of t)It.error(a);throw new Error(`Failed to load ${t.length} external diagrams`)}},"loadRegisteredDiagrams"),V0t="graphics-document document";function PB(e,t){e.attr("role",V0t),t!==""&&e.attr("aria-roledescription",t)}I(PB,"setA11yDiagramInfo");function BB(e,t,a,r){if(e.insert!==void 0){if(a){const n=`chart-desc-${r}`;e.attr("aria-describedby",n),e.insert("desc",":first-child").attr("id",n).text(a)}if(t){const n=`chart-title-${r}`;e.attr("aria-labelledby",n),e.insert("title",":first-child").attr("id",n).text(t)}}}I(BB,"addSVGa11yTitleDescription");var wo,ny=(wo=class{constructor(t,a,r,n,i){this.type=t,this.text=a,this.db=r,this.parser=n,this.renderer=i}static async fromText(t,a={}){var c,u;const r=mr(),n=z0(t,r);t=Jpt(t)+`
`;try{xm(n)}catch{const h=Qlt(n);if(!h)throw new tI(`Diagram ${n} not found.`);const{id:d,diagram:f}=await h();kd(d,f)}const{db:i,parser:o,renderer:s,init:l}=xm(n);return o.parser&&(o.parser.yy=i),(c=i.clear)==null||c.call(i),l==null||l(r),a.title&&((u=i.setDiagramTitle)==null||u.call(i,a.title)),await o.parse(t),new wo(n,t,i,o,s)}async render(t,a){await this.renderer.draw(this.text,t,a,this)}getParser(){return this.parser}getType(){return this.type}},I(wo,"Diagram"),wo),MC=[],G0t=I(()=>{MC.forEach(e=>{e()}),MC=[]},"attachFunctions"),H0t=I(e=>e.replace(/^\s*%%(?!{)[^\n]+\n?/gm,"").trimStart(),"cleanupComments");function OB(e){const t=e.match(QL);if(!t)return{text:e,metadata:{}};let a=Kut(t[1],{schema:Zut})??{};a=typeof a=="object"&&!Array.isArray(a)?a:{};const r={};return a.displayMode&&(r.displayMode=a.displayMode.toString()),a.title&&(r.title=a.title.toString()),a.config&&(r.config=a.config),{text:e.slice(t[0].length),metadata:r}}I(OB,"extractFrontMatter");var W0t=I(e=>e.replace(/\r\n?/g,`
`).replace(/<(\w+)([^>]*)>/g,(t,a,r)=>"<"+a+r.replace(/="([^"]*)"/g,"='$1'")+">"),"cleanupText"),q0t=I(e=>{const{text:t,metadata:a}=OB(e),{displayMode:r,title:n,config:i={}}=a;return r&&(i.gantt||(i.gantt={}),i.gantt.displayMode=r),{title:n,config:i,text:t}},"processFrontmatter"),U0t=I(e=>{const t=mn.detectInit(e)??{},a=mn.detectDirective(e,"wrap");return Array.isArray(a)?t.wrap=a.some(({type:r})=>r==="wrap"):(a==null?void 0:a.type)==="wrap"&&(t.wrap=!0),{text:Fpt(e),directive:t}},"processDirectives");function B_(e){const t=W0t(e),a=q0t(t),r=U0t(a.text),n=y_(a.config,r.directive);return e=H0t(r.text),{code:e,title:a.title,config:n}}I(B_,"preprocessDiagram");function NB(e){const t=new TextEncoder().encode(e),a=Array.from(t,r=>String.fromCodePoint(r)).join("");return btoa(a)}I(NB,"toBase64");var j0t=5e4,Y0t="graph TB;a[Maximum text size in diagram exceeded];style a fill:#faa",X0t="sandbox",Z0t="loose",K0t="http://www.w3.org/2000/svg",J0t="http://www.w3.org/1999/xlink",Q0t="http://www.w3.org/1999/xhtml",t_t="100%",e_t="100%",a_t="border:0;margin:0;",r_t="margin:0",n_t="allow-top-navigation-by-user-activation allow-popups",i_t='The "iframe" tag is not supported by your browser.',o_t=["foreignobject"],s_t=["dominant-baseline"];function O_(e){const t=B_(e);return Td(),gct(t.config??{}),t}I(O_,"processAndSetConfigs");async function $B(e,t){sp();try{const{code:a,config:r}=O_(e);return{diagramType:(await zB(a)).type,config:r}}catch(a){if(t!=null&&t.suppressErrors)return!1;throw a}}I($B,"parse");var EC=I((e,t,a=[])=>`
.${e} ${t} { ${a.join(" !important; ")} !important; }`,"cssImportantStyles"),l_t=I((e,t=new Map)=>{var r;let a="";if(e.themeCSS!==void 0&&(a+=`
${e.themeCSS}`),e.fontFamily!==void 0&&(a+=`
:root { --mermaid-font-family: ${e.fontFamily}}`),e.altFontFamily!==void 0&&(a+=`
:root { --mermaid-alt-font-family: ${e.altFontFamily}}`),t instanceof Map){const s=e.htmlLabels??((r=e.flowchart)==null?void 0:r.htmlLabels)?["> *","span"]:["rect","polygon","ellipse","circle","path"];t.forEach(l=>{Y_(l.styles)||s.forEach(c=>{a+=EC(l.id,c,l.styles)}),Y_(l.textStyles)||(a+=EC(l.id,"tspan",((l==null?void 0:l.textStyles)||[]).map(c=>c.replace("color","fill"))))})}return a},"createCssStyles"),c_t=I((e,t,a,r)=>{const n=l_t(e,a),i=Rct(t,n,e.themeVariables);return ry($mt(`${r}{${i}}`),zmt)},"createUserStyles"),u_t=I((e="",t,a)=>{let r=e;return!a&&!t&&(r=r.replace(/marker-end="url\([\d+./:=?A-Za-z-]*?#/g,'marker-end="url(#')),r=Ho(r),r=r.replace(/<br>/g,"<br/>"),r},"cleanUpSvgCode"),h_t=I((e="",t)=>{var n,i;const a=(i=(n=t==null?void 0:t.viewBox)==null?void 0:n.baseVal)!=null&&i.height?t.viewBox.baseVal.height+"px":e_t,r=NB(`<body style="${r_t}">${e}</body>`);return`<iframe style="width:${t_t};height:${a};${a_t}" src="data:text/html;charset=UTF-8;base64,${r}" sandbox="${n_t}">
  ${i_t}
</iframe>`},"putIntoIFrame"),RC=I((e,t,a,r,n)=>{const i=e.append("div");i.attr("id",a),r&&i.attr("style",r);const o=i.append("svg").attr("id",t).attr("width","100%").attr("xmlns",K0t);return n&&o.attr("xmlns:xlink",n),o.append("g"),e},"appendDivSvgG");function iy(e,t){return e.append("iframe").attr("id",t).attr("style","width: 100%; height: 100%;").attr("sandbox","")}I(iy,"sandboxedIframe");var d_t=I((e,t,a,r)=>{var n,i,o;(n=e.getElementById(t))==null||n.remove(),(i=e.getElementById(a))==null||i.remove(),(o=e.getElementById(r))==null||o.remove()},"removeExistingElements"),f_t=I(async function(e,t,a){var E,D,O,B,R,V;sp();const r=O_(t);t=r.code;const n=mr();It.debug(n),t.length>((n==null?void 0:n.maxTextSize)??j0t)&&(t=Y0t);const i="#"+e,o="i"+e,s="#"+o,l="d"+e,c="#"+l,u=I(()=>{const W=$e(d?s:c).node();W&&"remove"in W&&W.remove()},"removeTempElements");let h=$e("body");const d=n.securityLevel===X0t,f=n.securityLevel===Z0t,p=n.fontFamily;if(a!==void 0){if(a&&(a.innerHTML=""),d){const z=iy($e(a),o);h=$e(z.nodes()[0].contentDocument.body),h.node().style.margin=0}else h=$e(a);RC(h,e,l,`font-family: ${p}`,J0t)}else{if(d_t(document,e,l,o),d){const z=iy($e("body"),o);h=$e(z.nodes()[0].contentDocument.body),h.node().style.margin=0}else h=$e("body");RC(h,e,l)}let g,v;try{g=await ny.fromText(t,{title:r.title})}catch(z){if(n.suppressErrorRendering)throw u(),z;g=await ny.fromText("error"),v=z}const _=h.select(c).node(),y=g.type,b=_.firstChild,w=b.firstChild,T=(D=(E=g.renderer).getClasses)==null?void 0:D.call(E,t,g),C=c_t(n,y,T,i),A=document.createElement("style");A.innerHTML=C,b.insertBefore(A,w);try{await g.renderer.draw(t,e,kC.version,g)}catch(z){throw n.suppressErrorRendering?u():t0t.draw(t,e,kC.version),z}const k=h.select(`${c} svg`),L=(B=(O=g.db).getAccTitle)==null?void 0:B.call(O),M=(V=(R=g.db).getAccDescription)==null?void 0:V.call(R);VB(y,k,L,M),h.select(`[id="${e}"]`).selectAll("foreignobject > *").attr("xmlns",Q0t);let P=h.select(c).node().innerHTML;if(It.debug("config.arrowMarkerAbsolute",n.arrowMarkerAbsolute),P=u_t(P,d,Da(n.arrowMarkerAbsolute)),d){const z=h.select(c+" svg").node();P=h_t(P,z)}else f||(P=Ys.sanitize(P,{ADD_TAGS:o_t,ADD_ATTR:s_t,HTML_INTEGRATION_POINTS:{foreignobject:!0}}));if(G0t(),v)throw v;return u(),{diagramType:y,svg:P,bindFunctions:g.db.bindFunctions}},"render");function FB(e={}){var r;const t=Na({},e);t!=null&&t.fontFamily&&!((r=t.themeVariables)!=null&&r.fontFamily)&&(t.themeVariables||(t.themeVariables={}),t.themeVariables.fontFamily=t.fontFamily),fct(t),t!=null&&t.theme&&t.theme in Yn?t.themeVariables=Yn[t.theme].getThemeVariables(t.themeVariables):t&&(t.themeVariables=Yn.default.getThemeVariables(t.themeVariables));const a=typeof t=="object"?dct(t):oI();F0(a.logLevel),sp()}I(FB,"initialize");var zB=I((e,t={})=>{const{code:a}=B_(e);return ny.fromText(a,t)},"getDiagramFromText");function VB(e,t,a,r){PB(t,e),BB(t,a,r,t.attr("id"))}I(VB,"addA11yInfo");var Eo=Object.freeze({render:f_t,parse:$B,getDiagramFromText:zB,initialize:FB,getConfig:mr,setConfig:sI,getSiteConfig:oI,updateSiteConfig:pct,reset:I(()=>{Td()},"reset"),globalReset:I(()=>{Td(Zs)},"globalReset"),defaultConfig:Zs});F0(mr().logLevel);Td(mr());var p_t=I((e,t,a)=>{It.warn(e),m_(e)?(a&&a(e.str,e.hash),t.push({...e,message:e.str,error:e})):(a&&a(e),e instanceof Error&&t.push({str:e.message,message:e.message,hash:e.name,error:e}))},"handleError"),GB=I(async function(e={querySelector:".mermaid"}){try{await g_t(e)}catch(t){if(m_(t)&&It.error(t.str),Sr.parseError&&Sr.parseError(t),!e.suppressErrors)throw It.error("Use the suppressErrors option to suppress these errors"),t}},"run"),g_t=I(async function({postRenderCallback:e,querySelector:t,nodes:a}={querySelector:".mermaid"}){const r=Eo.getConfig();It.debug(`${e?"":"No "}Callback function found`);let n;if(a)n=a;else if(t)n=document.querySelectorAll(t);else throw new Error("Nodes and querySelector are both undefined");It.debug(`Found ${n.length} diagrams`),(r==null?void 0:r.startOnLoad)!==void 0&&(It.debug("Start On Load: "+(r==null?void 0:r.startOnLoad)),Eo.updateSiteConfig({startOnLoad:r==null?void 0:r.startOnLoad}));const i=new mn.InitIDGenerator(r.deterministicIds,r.deterministicIDSeed);let o;const s=[];for(const l of Array.from(n)){if(It.info("Rendering diagram: "+l.id),l.getAttribute("data-processed"))continue;l.setAttribute("data-processed","true");const c=`mermaid-${i.next()}`;o=l.innerHTML,o=pR(mn.entityDecode(o)).trim().replace(/<br\s*\/?>/gi,"<br/>");const u=mn.detectInit(o);u&&It.debug("Detected early reinit: ",u);try{const{svg:h,bindFunctions:d}=await UB(c,o,l);l.innerHTML=h,e&&await e(c),d&&d(l)}catch(h){p_t(h,s,Sr.parseError)}}if(s.length>0)throw s[0]},"runThrowsErrors"),HB=I(function(e){Eo.initialize(e)},"initialize"),v_t=I(async function(e,t,a){It.warn("mermaid.init is deprecated. Please use run instead."),e&&HB(e);const r={postRenderCallback:a,querySelector:".mermaid"};typeof t=="string"?r.querySelector=t:t&&(t instanceof HTMLElement?r.nodes=[t]:r.nodes=t),await GB(r)},"init"),m_t=I(async(e,{lazyLoad:t=!0}={})=>{sp(),mm(...e),t===!1&&await z0t()},"registerExternalDiagrams"),WB=I(function(){if(Sr.startOnLoad){const{startOnLoad:e}=Eo.getConfig();e&&Sr.run().catch(t=>It.error("Mermaid failed to initialize",t))}},"contentLoaded");typeof document<"u"&&window.addEventListener("load",WB,!1);var y_t=I(function(e){Sr.parseError=e},"setParseErrorHandler"),tf=[],av=!1,qB=I(async()=>{if(!av){for(av=!0;tf.length>0;){const e=tf.shift();if(e)try{await e()}catch(t){It.error("Error executing queue",t)}}av=!1}},"executeQueue"),__t=I(async(e,t)=>new Promise((a,r)=>{const n=I(()=>new Promise((i,o)=>{Eo.parse(e,t).then(s=>{i(s),a(s)},s=>{var l;It.error("Error parsing",s),(l=Sr.parseError)==null||l.call(Sr,s),o(s),r(s)})}),"performCall");tf.push(n),qB().catch(r)}),"parse"),UB=I((e,t,a)=>new Promise((r,n)=>{const i=I(()=>new Promise((o,s)=>{Eo.render(e,t,a).then(l=>{o(l),r(l)},l=>{var c;It.error("Error parsing",l),(c=Sr.parseError)==null||c.call(Sr,l),s(l),n(l)})}),"performCall");tf.push(i),qB().catch(n)}),"render"),Sr={startOnLoad:!0,mermaidAPI:Eo,parse:__t,render:UB,init:v_t,run:GB,registerExternalDiagrams:m_t,registerLayoutLoaders:QP,initialize:HB,parseError:void 0,contentLoaded:WB,setParseErrorHandler:y_t,detectType:z0,registerIconPacks:avt},ef=Sr;/*! Check if previously processed *//*!
 * Wait for document loaded before starting the execution
 */ue([Tn,Cn,ri,yD,An,eD,_0,hD,_u,Lf,zo,Vi,fl,Ty,Cy,kn]);ef.initialize({startOnLoad:!0,theme:"default",securityLevel:"loose",flowchart:{htmlLabels:!0,curve:"basis"}});const oi=B3(u$);oi.config.errorHandler=(e,t,a)=>{console.error("Vue错误:",e),console.info("错误组件:",t),console.info("错误信息:",a)};oi.use(O3,{locale:qT});for(const[e,t]of Object.entries(N3))oi.component(e,t);oi.use(GL());oi.use(Slt);oi.config.globalProperties.$echarts=ET;oi.config.globalProperties.$mermaid=ef;oi.directive("mermaid",{mounted(e){ef.init(void 0,e)},updated(e){e.removeAttribute("data-processed"),ef.init(void 0,e)}});console.log("初始化项目基线关系...");try{WD(),console.log("项目基线关系初始化完成")}catch(e){console.error("项目基线关系初始化失败:",e)}setTimeout(async()=>{try{console.log("正在初始化物料编码映射...");const{initializeMaterialCodeMap:e}=await jt(async()=>{const{initializeMaterialCodeMap:r}=await Promise.resolve().then(()=>zX);return{initializeMaterialCodeMap:r}},void 0);await e(),console.log("物料编码映射初始化完成"),await(await jt(async()=>{const{default:r}=await Promise.resolve().then(()=>ML);return{default:r}},void 0)).default.ensureCodeMapInitialized(),console.log("系统数据服务初始化完成"),console.log("初始化服务...");const a=await TZ();console.log("服务初始化"+(a?"成功":"失败"))}catch(e){console.error("服务初始化错误:",e)}},1e3);console.log("应用初始化中...");oi.mount("#app");export{E_t as $,V_t as A,Pct as B,L_t as C,mc as D,Sn as E,Klt as F,Gct as G,y_ as H,mr as I,Zut as J,nI as K,Wpt as L,wmt as M,kC as N,Spt as O,eC as P,tC as Q,$_t as R,R_t as S,O_t as T,Ce as U,B_t as V,M_t as W,rs as X,l_ as Y,N_t as Z,jt as _,ca as a,w_t as a$,z_t as a0,F_t as a1,P_t as a2,ict as a3,Js as a4,k_t as a5,Jf as a6,Bpt as a7,fI as a8,V0 as a9,U_t as aA,G_t as aB,oe as aC,H_t as aD,amt as aE,Jvt as aF,Kvt as aG,nvt as aH,wpt as aI,Du as aJ,avt as aK,evt as aL,Je as aM,n_ as aN,bi as aO,Y2 as aP,aft as aQ,Qc as aR,se as aS,KM as aT,fr as aU,Xdt as aV,r_ as aW,dE as aX,Au as aY,gE as aZ,I_t as a_,E2 as aa,Apt as ab,Oh as ac,Hpt as ad,Ict as ae,Su as af,Qt as ag,fe as ah,gI as ai,Lvt as aj,KP as ak,q_t as al,Jut as am,Da as an,Gi as ao,Q0 as ap,AR as aq,Ho as ar,QE as as,C_t as at,js as au,fn as av,di as aw,hl as ax,bmt as ay,W_t as az,I as b,Oct as c,Bct as d,He as e,$e as f,$ct as g,pI as h,Na as i,ei as j,Do as k,It as l,JM as m,vl as n,eR as o,wu as p,D_t as q,Y_t as r,Nct as s,j_t as t,mn as u,Fct as v,jpt as w,zct as x,Kut as y,Yvt as z};
