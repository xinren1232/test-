import{S as u,aj as F,T as R,c as l,o as n,a as e,O as m,Q as A,P as f,e as w,F as v,r as _,b as E,_ as G,ai as H,t as o,X as J,n as V,V as h,W}from"./element-plus-DR-erZ3X.js";import{a as X,ax as Y}from"./index-Bo1zM2q5.js";import"./echarts-Dfqt_Pbx.js";const Z={class:"ai-assistant-main"},ee={class:"top-header"},se={class:"header-controls"},te={class:"three-column-layout"},ae={class:"left-column"},ne={class:"tools-section"},oe=["onClick"],ie={class:"tool-icon"},le={class:"tool-details"},ce={class:"tool-name"},re={class:"tool-desc"},de={class:"middle-column"},ue={class:"column-header"},pe={class:"quick-examples"},me={class:"message-avatar"},ve={class:"message-content"},_e={class:"message-text"},he={class:"message-time"},ye={key:0,class:"message ai"},ge={class:"input-section"},ke={class:"input-actions"},Ie={class:"right-column"},Ae={class:"thinking-area"},fe={key:0,class:"empty-state"},we={class:"step-header"},xe={class:"step-icon"},Ce={class:"step-title"},be={class:"step-status"},Te={__name:"AIAssistantMain",setup(Ee){const $=Y(),y=u(!0),d=u(!1),r=u(""),p=u([{type:"ai",content:"æ‚¨å¥½ï¼æˆ‘æ˜¯IQE AIæ™ºèƒ½åŠ©æ‰‹ã€‚æˆ‘å·²æŽ¥å…¥DeepSeekå¤§è¯­è¨€æ¨¡åž‹ï¼Œå¯ä»¥ä¸ºæ‚¨æä¾›ä¸“ä¸šçš„è´¨é‡ç®¡ç†é—®ç­”æœåŠ¡ã€‚",timestamp:new Date}]),i=u([]),g=u(null),S=u(["æŸ¥è¯¢å·¥åŽ‚Açš„åº“å­˜æƒ…å†µ","åˆ†æžæœ€è¿‘çš„è´¨é‡è¶‹åŠ¿","ç”Ÿæˆè´¨é‡æŠ¥å‘Š","æ£€æŸ¥å¼‚å¸¸æ‰¹æ¬¡"]),D=F([{name:"æ•°æ®åˆ†æžå·¥å…·",icon:"ðŸ“Š",tools:[{name:"æ•°æ®åˆ†æž",icon:"ðŸ“Š",description:"åˆ†æžè´¨é‡ç®¡ç†æ•°æ®"},{name:"ç»Ÿè®¡åˆ†æž",icon:"ðŸ“ˆ",description:"æ‰§è¡Œç»Ÿè®¡åˆ†æž"},{name:"æ•°å€¼è®¡ç®—",icon:"ðŸ”¢",description:"æ‰§è¡Œæ•°å€¼è®¡ç®—åˆ†æž"},{name:"æ•°æ®éªŒè¯",icon:"âœ…",description:"éªŒè¯æ•°æ®å®Œæ•´æ€§"}]},{name:"å¯è§†åŒ–å·¥å…·",icon:"ðŸ“ˆ",tools:[{name:"å›¾è¡¨ç”Ÿæˆ",icon:"ðŸ“Š",description:"ç”Ÿæˆæ•°æ®å¯è§†åŒ–å›¾è¡¨"},{name:"è¶‹åŠ¿åˆ†æž",icon:"ðŸ“ˆ",description:"åˆ†æžæ•°æ®è¶‹åŠ¿å˜åŒ–"},{name:"æŠ¥è¡¨ç”Ÿæˆ",icon:"ðŸ“„",description:"ç”Ÿæˆè´¨é‡åˆ†æžæŠ¥è¡¨"}]},{name:"è”ç½‘å·¥å…·",icon:"ðŸŒ",tools:[{name:"ç½‘ç»œæœç´¢",icon:"ðŸ”",description:"æœç´¢ç›¸å…³ä¿¡æ¯"},{name:"APIè°ƒç”¨",icon:"ðŸ”—",description:"è°ƒç”¨å¤–éƒ¨APIæŽ¥å£"}]},{name:"è´¨é‡ç®¡ç†",icon:"ðŸŽ¯",tools:[{name:"ç”Ÿäº§ç®¡ç†",icon:"ðŸ­",description:"ç®¡ç†ç”Ÿäº§æµç¨‹æ•°æ®"}]}]),k={apiKey:"sk-cab797574abf4288bcfaca253191565d",baseURL:"https://api.deepseek.com",endpoint:"/chat/completions",model:"deepseek-chat"},Q=()=>{$.push("/")},B=()=>{h.info(`å·²åˆ‡æ¢åˆ°${y.value?"AIå¢žå¼ºæ¨¡å¼":"åŸºç¡€æ¨¡å¼"}`)},M=()=>{p.value=[{type:"ai",content:"å¯¹è¯å·²æ¸…ç©ºã€‚æ‚¨å¥½ï¼æˆ‘æ˜¯IQE AIæ™ºèƒ½åŠ©æ‰‹ï¼Œå·²æŽ¥å…¥DeepSeekå¤§è¯­è¨€æ¨¡åž‹ã€‚",timestamp:new Date}],i.value=[],h.success("å¯¹è¯å·²æ¸…ç©º")},N=t=>{r.value=`è¯·ä½¿ç”¨${t.name}å·¥å…·å¸®æˆ‘åˆ†æžæ•°æ®`,h.success(`å·²é€‰æ‹©å·¥å…·ï¼š${t.name}`)},P=t=>{r.value=t,x()},x=async()=>{if(!r.value.trim()||d.value)return;const t=r.value.trim();p.value.push({type:"user",content:t,timestamp:new Date}),r.value="",T();try{await K(t)}catch(s){console.error("AIå¤„ç†é”™è¯¯:",s),p.value.push({type:"ai",content:"æŠ±æ­‰ï¼Œå¤„ç†æ‚¨çš„é—®é¢˜æ—¶å‡ºçŽ°äº†é”™è¯¯ã€‚è¯·ç¨åŽé‡è¯•ã€‚",timestamp:new Date})}T()},K=async t=>{d.value=!0,i.value=[];try{i.value.push({type:"thinking",title:"ç†è§£é—®é¢˜",status:"processing"}),await C(500),i.value[0].status="completed",i.value.push({type:"data_query",title:"èŽ·å–ä¸šåŠ¡æ•°æ®",status:"processing"}),await C(400),i.value[1].status="completed",i.value.push({type:"ai_call",title:"è°ƒç”¨AIå¤§æ¨¡åž‹",status:"processing"});let s;if(y.value)try{s=await z(t),h.success("AIå“åº”æˆåŠŸ")}catch(I){console.error("AIè°ƒç”¨å¤±è´¥:",I),s=`æŠ±æ­‰ï¼ŒAIæœåŠ¡æš‚æ—¶ä¸å¯ç”¨ã€‚åŸºäºŽæ‚¨çš„é—®é¢˜"${t}"ï¼Œæˆ‘ä¸ºæ‚¨æä¾›åŸºç¡€åˆ†æž...`,h.error("AIæœåŠ¡ä¸å¯ç”¨ï¼Œå·²åˆ‡æ¢åˆ°åŸºç¡€æ¨¡å¼")}else s=`åŸºç¡€æ¨¡å¼å›žå¤ï¼šæˆ‘æ”¶åˆ°äº†æ‚¨çš„é—®é¢˜"${t}"ã€‚è¿™æ˜¯ä¸€ä¸ªå…³äºŽè´¨é‡ç®¡ç†çš„é—®é¢˜ï¼Œæˆ‘æ­£åœ¨ä¸ºæ‚¨åˆ†æžç›¸å…³æ•°æ®...`;i.value[2].status="completed",i.value.push({type:"response",title:"ç”Ÿæˆå›žç­”",status:"processing"}),await C(200),i.value[3].status="completed",p.value.push({type:"ai",content:s,timestamp:new Date})}finally{d.value=!1}},z=async t=>{const s=await fetch(`${k.baseURL}${k.endpoint}`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${k.apiKey}`},body:JSON.stringify({model:k.model,messages:[{role:"system",content:"ä½ æ˜¯IQEè´¨é‡ç®¡ç†ç³»ç»Ÿçš„AIæ™ºèƒ½åŠ©æ‰‹ï¼Œä¸“é—¨è´Ÿè´£è´¨é‡ç®¡ç†æ•°æ®åˆ†æžå’Œé—®ç­”ã€‚è¯·åŸºäºŽç”¨æˆ·é—®é¢˜æä¾›ä¸“ä¸šã€å‡†ç¡®ã€æœ‰ç”¨çš„å›žç­”ã€‚"},{role:"user",content:t}],temperature:.7,max_tokens:2e3})});if(!s.ok)throw new Error(`AI APIé”™è¯¯: ${s.status}`);return(await s.json()).choices[0].message.content},C=t=>new Promise(s=>setTimeout(s,t)),L=t=>t?new Date(t).toLocaleTimeString():"",O=t=>({thinking:"ðŸ¤”",data_query:"ðŸ“Š",ai_call:"ðŸ¤–",response:"ðŸ’¬"})[t]||"âš™ï¸",U=t=>({processing:"å¤„ç†ä¸­...",completed:"å®Œæˆ"})[t]||t,T=()=>{W(()=>{g.value&&(g.value.scrollTop=g.value.scrollHeight)})};return R(()=>{console.log("ðŸ¤– IQE AIæ™ºèƒ½åŠ©æ‰‹å·²åŠ è½½")}),(t,s)=>{const I=A("el-switch"),b=A("el-button"),j=A("el-tag"),q=A("el-input");return n(),l("div",Z,[e("div",ee,[s[4]||(s[4]=e("h1",null,"ðŸ¤– IQE AI æ™ºèƒ½åŠ©æ‰‹",-1)),e("div",se,[m(I,{modelValue:y.value,"onUpdate:modelValue":s[0]||(s[0]=a=>y.value=a),onChange:B,"active-text":"AIå¢žå¼ºæ¨¡å¼","inactive-text":"åŸºç¡€æ¨¡å¼",size:"large"},null,8,["modelValue"]),m(b,{onClick:M,type:"primary",plain:""},{default:f(()=>s[2]||(s[2]=[w("æ¸…ç©ºå¯¹è¯")])),_:1,__:[2]}),m(b,{onClick:Q,type:"info",plain:""},{default:f(()=>s[3]||(s[3]=[w("è¿”å›žç³»ç»Ÿ")])),_:1,__:[3]})])]),e("div",te,[e("div",ae,[s[5]||(s[5]=e("div",{class:"column-header"},[e("h3",null,"ðŸ› ï¸ å¯ç”¨å·¥å…·")],-1)),e("div",ne,[(n(!0),l(v,null,_(D,a=>(n(),l("div",{class:"tool-category",key:a.name},[e("h4",null,o(a.icon)+" "+o(a.name),1),(n(!0),l(v,null,_(a.tools,c=>(n(),l("div",{class:"tool-item",key:c.name,onClick:Ve=>N(c)},[e("span",ie,o(c.icon),1),e("div",le,[e("div",ce,o(c.name),1),e("div",re,o(c.description),1)])],8,oe))),128))]))),128))])]),e("div",de,[e("div",ue,[s[6]||(s[6]=e("h3",null,"ðŸ’¬ æ™ºèƒ½é—®ç­”",-1)),e("div",pe,[(n(!0),l(v,null,_(S.value,a=>(n(),J(j,{key:a,onClick:c=>P(a),class:"example-tag",size:"small",effect:"plain"},{default:f(()=>[w(o(a),1)]),_:2},1032,["onClick"]))),128))])]),e("div",{class:"messages-area",ref_key:"messagesArea",ref:g},[(n(!0),l(v,null,_(p.value,(a,c)=>(n(),l("div",{key:c,class:V(["message",a.type])},[e("div",me,o(a.type==="user"?"ðŸ‘¤":"ðŸ¤–"),1),e("div",ve,[e("div",_e,o(a.content),1),e("div",he,o(L(a.timestamp)),1)])],2))),128)),d.value?(n(),l("div",ye,s[7]||(s[7]=[e("div",{class:"message-avatar"},"ðŸ¤–",-1),e("div",{class:"message-content"},[e("div",{class:"loading-dots"},[e("span"),e("span"),e("span")]),e("div",{class:"loading-text"},"AIæ­£åœ¨æ€è€ƒä¸­...")],-1)]))):E("",!0)],512),e("div",ge,[m(q,{modelValue:r.value,"onUpdate:modelValue":s[1]||(s[1]=a=>r.value=a),type:"textarea",rows:3,placeholder:"è¯·è¾“å…¥æ‚¨çš„é—®é¢˜...",onKeydown:G(H(x,["ctrl"]),["enter"]),disabled:d.value},null,8,["modelValue","onKeydown","disabled"]),e("div",ke,[m(b,{type:"primary",onClick:x,loading:d.value,disabled:!r.value.trim()},{default:f(()=>[w(o(d.value?"å‘é€ä¸­...":"å‘é€ (Ctrl+Enter)"),1)]),_:1},8,["loading","disabled"])])])]),e("div",Ie,[s[9]||(s[9]=e("div",{class:"column-header"},[e("h3",null,"ðŸ§  AIæ€è€ƒè¿‡ç¨‹")],-1)),e("div",Ae,[i.value.length===0?(n(),l("div",fe,s[8]||(s[8]=[e("div",{class:"empty-icon"},"ðŸ¤”",-1),e("div",{class:"empty-text"},"AIæ­£åœ¨ç­‰å¾…æ‚¨çš„é—®é¢˜...",-1)]))):E("",!0),(n(!0),l(v,null,_(i.value,(a,c)=>(n(),l("div",{key:c,class:V(["thinking-step",a.status])},[e("div",we,[e("span",xe,o(O(a.type)),1),e("span",Ce,o(a.title),1),e("span",be,o(U(a.status)),1)])],2))),128))])])])])}}},Qe=X(Te,[["__scopeId","data-v-826972aa"]]);export{Qe as default};
