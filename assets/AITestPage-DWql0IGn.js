import{S as i,T as x,c as h,o as y,a as t,O as r,P as d,e as p,t as l,a0 as u,a7 as $,a9 as S,F as C,r as b,a3 as V,_ as M,V as m,n as L}from"./element-plus-DR-erZ3X.js";import{a as _}from"./aiService-CKXedvtd.js";import{a as B}from"./index-Bo1zM2q5.js";import"./echarts-Dfqt_Pbx.js";const N={class:"ai-test-page"},O={class:"status-section"},U={class:"test-buttons"},j={class:"chat-section"},K={class:"chat-messages"},z={class:"message-header"},F={class:"timestamp"},J={class:"message-content"},R={class:"chat-input"},H={class:"log-section"},q={class:"log-container"},G={class:"log-time"},Q={class:"log-level"},W={class:"log-message"},X={__name:"AITestPage",setup(Y){const w=i("æœªçŸ¥"),c=i("æœªæµ‹è¯•"),T=i("ä»Žæœª"),v=i(!1),I=i(!1),g=i(""),A=i([]),f=i([]),a=(o,e)=>{const s=new Date;f.value.push({time:s.toLocaleTimeString(),level:o,message:e}),f.value.length>100&&(f.value=f.value.slice(-50)),console.log(`[${o.toUpperCase()}] ${e}`)},P=async()=>{v.value=!0,a("info","å¼€å§‹æµ‹è¯•AIæœåŠ¡...");try{if(a("info",`AIæœåŠ¡å®žä¾‹: ${!!_}`),!_)throw new Error("AIæœåŠ¡æœªåŠ è½½");a("info","è°ƒç”¨testConnectionæ–¹æ³•..."),await _.testConnection()?(w.value="æ­£å¸¸",c.value="è¿žæŽ¥æˆåŠŸ",a("success","AIæœåŠ¡è¿žæŽ¥æµ‹è¯•æˆåŠŸ"),m.success("âœ… AIæœåŠ¡è¿žæŽ¥æˆåŠŸ!")):(w.value="å¼‚å¸¸",c.value="è¿žæŽ¥å¤±è´¥",a("error","AIæœåŠ¡è¿žæŽ¥æµ‹è¯•å¤±è´¥"),m.error("âŒ AIæœåŠ¡è¿žæŽ¥å¤±è´¥"))}catch(o){w.value="é”™è¯¯",c.value="æµ‹è¯•å¼‚å¸¸",a("error",`AIæœåŠ¡æµ‹è¯•å¼‚å¸¸: ${o.message}`),m.error(`æµ‹è¯•å¤±è´¥: ${o.message}`)}finally{v.value=!1,T.value=new Date().toLocaleTimeString()}},D=async()=>{v.value=!0,a("info","å¼€å§‹ç›´æŽ¥æµ‹è¯•DeepSeek API...");try{const o="sk-cab797574abf4288bcfaca253191565d",e="https://api.deepseek.com/chat/completions";a("info",`APIåœ°å€: ${e}`),a("info",`APIå¯†é’¥é•¿åº¦: ${o.length}`);const s=await fetch(e,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${o}`},body:JSON.stringify({model:"deepseek-chat",messages:[{role:"user",content:"Hello, this is a test message."}],max_tokens:50})});if(a("info",`å“åº”çŠ¶æ€: ${s.status} ${s.statusText}`),s.ok){const n=await s.json();a("success","ç›´æŽ¥APIæµ‹è¯•æˆåŠŸ"),a("info",`å“åº”å†…å®¹: ${n.choices[0].message.content}`),m.success("âœ… ç›´æŽ¥APIæµ‹è¯•æˆåŠŸ!"),c.value="ç›´æŽ¥è¿žæŽ¥æˆåŠŸ"}else{const n=await s.json().catch(()=>({}));a("error",`APIé”™è¯¯: ${JSON.stringify(n)}`),m.error("âŒ ç›´æŽ¥APIæµ‹è¯•å¤±è´¥"),c.value="ç›´æŽ¥è¿žæŽ¥å¤±è´¥"}}catch(o){a("error",`ç›´æŽ¥APIæµ‹è¯•å¼‚å¸¸: ${o.message}`),m.error(`ç›´æŽ¥æµ‹è¯•å¤±è´¥: ${o.message}`),c.value="ç›´æŽ¥æµ‹è¯•å¼‚å¸¸"}finally{v.value=!1,T.value=new Date().toLocaleTimeString()}},k=async()=>{if(!g.value.trim()||I.value)return;const o=g.value.trim();g.value="",A.value.push({type:"user",content:o,timestamp:new Date().toLocaleTimeString()}),I.value=!0,a("info",`å‘é€æ¶ˆæ¯: ${o}`);try{if(!_)throw new Error("AIæœåŠ¡æœªåŠ è½½");const e=[{role:"user",content:o}];a("info","è°ƒç”¨AIæœåŠ¡chatæ–¹æ³•...");const s=await _.chat(e);if(s&&s.choices&&s.choices[0]){const n=s.choices[0].message.content;A.value.push({type:"ai",content:n,timestamp:new Date().toLocaleTimeString()}),a("success",`AIå›žå¤: ${n.substring(0,50)}...`)}else throw new Error("AIå“åº”æ ¼å¼å¼‚å¸¸")}catch(e){a("error",`å‘é€æ¶ˆæ¯å¤±è´¥: ${e.message}`),A.value.push({type:"ai",content:`âŒ é”™è¯¯: ${e.message}`,timestamp:new Date().toLocaleTimeString()}),m.error(`å‘é€å¤±è´¥: ${e.message}`)}finally{I.value=!1}},E=()=>{f.value=[],A.value=[],a("info","æ—¥å¿—å·²æ¸…ç©º")};return x(()=>{a("info","AIæµ‹è¯•é¡µé¢å·²åŠ è½½"),a("info",`AIæœåŠ¡çŠ¶æ€: ${!!_}`),setTimeout(()=>{P()},1e3)}),(o,e)=>(y(),h("div",N,[e[11]||(e[11]=t("h1",null,"ðŸ¤– AIåŠŸèƒ½æµ‹è¯•é¡µé¢",-1)),t("div",O,[r(u(S),null,{default:d(()=>[e[7]||(e[7]=t("h3",null,"ðŸ“Š AIæœåŠ¡çŠ¶æ€",-1)),t("p",null,[e[1]||(e[1]=t("strong",null,"æœåŠ¡çŠ¶æ€:",-1)),p(" "+l(w.value),1)]),t("p",null,[e[2]||(e[2]=t("strong",null,"APIè¿žæŽ¥:",-1)),p(" "+l(c.value),1)]),t("p",null,[e[3]||(e[3]=t("strong",null,"æœ€åŽæµ‹è¯•:",-1)),p(" "+l(T.value),1)]),t("div",U,[r(u($),{onClick:P,type:"primary",loading:v.value},{default:d(()=>e[4]||(e[4]=[p(" ðŸ”— æµ‹è¯•AIè¿žæŽ¥ ")])),_:1,__:[4]},8,["loading"]),r(u($),{onClick:D,type:"success",loading:v.value},{default:d(()=>e[5]||(e[5]=[p(" ðŸ§ª ç›´æŽ¥æµ‹è¯•API ")])),_:1,__:[5]},8,["loading"]),r(u($),{onClick:E,type:"warning"},{default:d(()=>e[6]||(e[6]=[p(" ðŸ—‘ï¸ æ¸…ç©ºæ—¥å¿— ")])),_:1,__:[6]})])]),_:1,__:[7]})]),t("div",j,[r(u(S),null,{default:d(()=>[e[9]||(e[9]=t("h3",null,"ðŸ’¬ AIå¯¹è¯æµ‹è¯•",-1)),t("div",K,[(y(!0),h(C,null,b(A.value,(s,n)=>(y(),h("div",{key:n,class:L(["chat-message",s.type])},[t("div",z,[t("strong",null,l(s.type==="user"?"ðŸ‘¤ ç”¨æˆ·":"ðŸ¤– AI"),1),t("span",F,l(s.timestamp),1)]),t("div",J,l(s.content),1)],2))),128))]),t("div",R,[r(u(V),{modelValue:g.value,"onUpdate:modelValue":e[0]||(e[0]=s=>g.value=s),placeholder:"è¾“å…¥æµ‹è¯•æ¶ˆæ¯...",onKeyup:M(k,["enter"]),disabled:I.value},null,8,["modelValue","disabled"]),r(u($),{onClick:k,type:"primary",loading:I.value,disabled:!g.value.trim()},{default:d(()=>e[8]||(e[8]=[p(" å‘é€ ")])),_:1,__:[8]},8,["loading","disabled"])])]),_:1,__:[9]})]),t("div",H,[r(u(S),null,{default:d(()=>[e[10]||(e[10]=t("h3",null,"ðŸ“‹ è°ƒè¯•æ—¥å¿—",-1)),t("div",q,[(y(!0),h(C,null,b(f.value,(s,n)=>(y(),h("div",{key:n,class:L(["log-item",s.level])},[t("span",G,l(s.time),1),t("span",Q,l(s.level.toUpperCase()),1),t("span",W,l(s.message),1)],2))),128))])]),_:1,__:[10]})])]))}},ae=B(X,[["__scopeId","data-v-4207466a"]]);export{ae as default};
