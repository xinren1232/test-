import{S as d,aj as X,T as Y,c as a,o as n,a as e,O as g,Q as S,P as D,e as x,F as k,r as I,b as $,_ as Z,ai as ee,t as i,n as E,X as te,V as P,W as se}from"./element-plus-DR-erZ3X.js";import{a as oe,ax as ne}from"./index-Bo1zM2q5.js";import"./echarts-Dfqt_Pbx.js";const ae={class:"standalone-ai-container"},ie={class:"top-header"},le={class:"header-controls"},ce={class:"three-column-layout"},re={class:"left-column"},ue={class:"tools-section"},de=["onClick"],pe={class:"tool-icon"},me={class:"tool-details"},ve={class:"tool-name"},_e={class:"tool-desc"},he={class:"middle-column"},ye={class:"column-header"},ge={class:"quick-examples"},ke={class:"message-avatar"},Ie={key:0},fe={key:1},Ae={class:"message-body"},we={class:"message-text"},Ce={class:"message-timestamp"},Se={key:0,class:"chat-message ai loading-message"},De={class:"input-area"},xe={class:"input-controls"},$e={class:"right-column"},be={class:"thinking-area"},Te={key:0,class:"empty-thinking"},Ee={class:"step-header"},Pe={class:"step-icon"},Ve={class:"step-title"},Qe={class:"step-status"},Me={key:0,class:"step-result"},Ne={class:"result-content"},Oe={__name:"AIAssistantStandalone",setup(Be){const M=ne(),u=d(""),y=d([{type:"ai",content:"æ‚¨å¥½ï¼æˆ‘æ˜¯IQE AIæ™ºèƒ½åŠ©æ‰‹ã€‚æˆ‘å·²æŽ¥å…¥DeepSeekå¤§è¯­è¨€æ¨¡åž‹ï¼Œå¯ä»¥ä¸ºæ‚¨æä¾›ä¸“ä¸šçš„è´¨é‡ç®¡ç†é—®ç­”æœåŠ¡ã€‚",timestamp:new Date}]),p=d(!1),f=d(!0),l=d([]),A=d(null),w=d(""),V=d("info"),C={apiKey:"sk-cab797574abf4288bcfaca253191565d",baseURL:"https://api.deepseek.com",endpoint:"/chat/completions",model:"deepseek-chat"},N=d(["æŸ¥è¯¢å·¥åŽ‚Açš„åº“å­˜æƒ…å†µ","åˆ†æžæœ€è¿‘çš„è´¨é‡è¶‹åŠ¿","ç”Ÿæˆè´¨é‡æŠ¥å‘Š","ç»Ÿè®¡ä¸åˆæ ¼å“æ•°é‡","æŸ¥çœ‹ç”Ÿäº§çº¿çŠ¶æ€","æ£€æµ‹å¼‚å¸¸ç‰©æ–™æ‰¹æ¬¡"]),O=X([{name:"æ•°æ®åˆ†æžå·¥å…·",icon:"ðŸ“Š",tools:[{name:"æ•°æ®åˆ†æž",icon:"ðŸ“Š",description:"åˆ†æžè´¨é‡ç®¡ç†æ•°æ®"},{name:"ç»Ÿè®¡åˆ†æž",icon:"ðŸ“ˆ",description:"æ‰§è¡Œç»Ÿè®¡åˆ†æž"},{name:"æ•°å€¼è®¡ç®—",icon:"ðŸ”¢",description:"æ‰§è¡Œæ•°å€¼è®¡ç®—åˆ†æž"},{name:"æ•°æ®éªŒè¯",icon:"âœ…",description:"éªŒè¯æ•°æ®å®Œæ•´æ€§"}]},{name:"å¯è§†åŒ–å·¥å…·",icon:"ðŸ“ˆ",tools:[{name:"å›¾è¡¨ç”Ÿæˆ",icon:"ðŸ“Š",description:"ç”Ÿæˆæ•°æ®å¯è§†åŒ–å›¾è¡¨"},{name:"è¶‹åŠ¿åˆ†æž",icon:"ðŸ“ˆ",description:"åˆ†æžæ•°æ®è¶‹åŠ¿å˜åŒ–"},{name:"æŠ¥è¡¨ç”Ÿæˆ",icon:"ðŸ“„",description:"ç”Ÿæˆè´¨é‡åˆ†æžæŠ¥è¡¨"}]},{name:"è”ç½‘å·¥å…·",icon:"ðŸŒ",tools:[{name:"ç½‘ç»œæœç´¢",icon:"ðŸ”",description:"æœç´¢ç›¸å…³ä¿¡æ¯"},{name:"APIè°ƒç”¨",icon:"ðŸ”—",description:"è°ƒç”¨å¤–éƒ¨APIæŽ¥å£"}]},{name:"è´¨é‡ç®¡ç†",icon:"ðŸŽ¯",tools:[{name:"ç”Ÿäº§ç®¡ç†",icon:"ðŸ­",description:"ç®¡ç†ç”Ÿäº§æµç¨‹æ•°æ®"}]}]),B=t=>t?new Date(t).toLocaleTimeString():"",K=t=>({thinking:"ðŸ¤”",analysis:"ðŸ”",data_query:"ðŸ“Š",ai_call:"ðŸ¤–",response:"ðŸ’¬"})[t]||"âš™ï¸",L=t=>({processing:"å¤„ç†ä¸­...",completed:"å®Œæˆ",error:"é”™è¯¯"})[t]||t,_=(t,s="info")=>{w.value=t,V.value=s,setTimeout(()=>{w.value=""},3e3)},Q=()=>{se(()=>{A.value&&(A.value.scrollTop=A.value.scrollHeight)})},U=()=>{M.push("/")},j=t=>{const s=`è¯·ä½¿ç”¨${t.name}å·¥å…·å¸®æˆ‘${t.description}`;u.value=s,P.success(`å·²é€‰æ‹©å·¥å…·ï¼š${t.name}`)},z=t=>{u.value=t,b()},J=()=>{const t=f.value?"AIå¢žå¼ºæ¨¡å¼":"åŸºç¡€æ¨¡å¼";P.info(`å·²åˆ‡æ¢åˆ°${t}`),_(`å·²åˆ‡æ¢åˆ°${t}`,"success")},R=()=>{y.value=[{type:"ai",content:"å¯¹è¯å·²æ¸…ç©ºã€‚æ‚¨å¥½ï¼æˆ‘æ˜¯IQE AIæ™ºèƒ½åŠ©æ‰‹ï¼Œå·²æŽ¥å…¥DeepSeekå¤§è¯­è¨€æ¨¡åž‹ã€‚",timestamp:new Date}],l.value=[],P.success("å¯¹è¯å·²æ¸…ç©º")},b=async()=>{if(!u.value.trim()||p.value)return;const t={type:"user",content:u.value,timestamp:new Date};y.value.push(t);const s=u.value;u.value="",Q();try{await q(s)}catch(c){console.error("AIå¤„ç†é”™è¯¯:",c),y.value.push({type:"ai",content:"æŠ±æ­‰ï¼Œå¤„ç†æ‚¨çš„é—®é¢˜æ—¶å‡ºçŽ°äº†é”™è¯¯ã€‚è¯·ç¨åŽé‡è¯•ã€‚",timestamp:new Date}),_("å¤„ç†å¤±è´¥ï¼Œè¯·ç¨åŽé‡è¯•","error")}Q()},q=async t=>{p.value=!0,l.value=[];try{l.value.push({type:"thinking",title:"ç†è§£é—®é¢˜",status:"processing"}),await T(500),l.value[0].status="completed",l.value.push({type:"data_query",title:"èŽ·å–ä¸šåŠ¡æ•°æ®",status:"processing"});const s=await W();await T(400),l.value[1].status="completed",l.value.push({type:"ai_call",title:"è°ƒç”¨AIå¤§æ¨¡åž‹",status:"processing"});let c;if(f.value)try{c=await F(t,s),_("AIå“åº”æˆåŠŸ","success")}catch(m){console.error("AIè°ƒç”¨å¤±è´¥:",m),c=`æŠ±æ­‰ï¼ŒAIæœåŠ¡æš‚æ—¶ä¸å¯ç”¨ã€‚åŸºäºŽæ‚¨çš„é—®é¢˜"${t}"ï¼Œæˆ‘ä¸ºæ‚¨æä¾›åŸºç¡€åˆ†æž...`,_("AIæœåŠ¡ä¸å¯ç”¨ï¼Œå·²åˆ‡æ¢åˆ°åŸºç¡€æ¨¡å¼","error")}else c=`åŸºç¡€æ¨¡å¼å›žå¤ï¼šæˆ‘æ”¶åˆ°äº†æ‚¨çš„é—®é¢˜"${t}"ã€‚è¿™æ˜¯ä¸€ä¸ªå…³äºŽè´¨é‡ç®¡ç†çš„é—®é¢˜ï¼Œæˆ‘æ­£åœ¨ä¸ºæ‚¨åˆ†æžç›¸å…³æ•°æ®...`;l.value[2].status="completed",l.value.push({type:"response",title:"ç”Ÿæˆå›žç­”",status:"processing"}),await T(200),l.value[3].status="completed",y.value.push({type:"ai",content:c,timestamp:new Date})}catch(s){throw console.error("å¤„ç†AIå“åº”æ—¶å‡ºé”™:",s),_("å¤„ç†å¤±è´¥","error"),s}finally{p.value=!1}},F=async(t,s)=>{var o;const c=G(s),m=H(t),v=await fetch(`${C.baseURL}${C.endpoint}`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${C.apiKey}`},body:JSON.stringify({model:C.model,messages:[{role:"system",content:c},{role:"user",content:m}],temperature:.7,max_tokens:2e3,stream:!1})});if(!v.ok){const r=await v.json().catch(()=>({}));throw new Error(`DeepSeek APIé”™è¯¯ ${v.status}: ${((o=r.error)==null?void 0:o.message)||v.statusText}`)}const h=await v.json();if(!h.choices||!h.choices[0]||!h.choices[0].message)throw new Error("DeepSeek APIå“åº”æ ¼å¼å¼‚å¸¸");return h.choices[0].message.content},G=t=>`ä½ æ˜¯IQEè´¨é‡ç®¡ç†ç³»ç»Ÿçš„AIæ™ºèƒ½åŠ©æ‰‹ï¼Œä¸“é—¨è´Ÿè´£è´¨é‡ç®¡ç†æ•°æ®åˆ†æžå’Œé—®ç­”ã€‚

ç³»ç»Ÿèƒ½åŠ›ï¼š
1. ç‰©æ–™åº“å­˜ç®¡ç†åˆ†æž
2. ç”Ÿäº§çº¿è´¨é‡è·Ÿè¸ª
3. æ£€æµ‹ç»“æžœåˆ†æž
4. è´¨é‡è¶‹åŠ¿é¢„æµ‹
5. å¼‚å¸¸é—®é¢˜è¯Šæ–­

å½“å‰ä¸šåŠ¡æ•°æ®æ¦‚å†µï¼š
- åº“å­˜è®°å½•ï¼š${t.inventoryCount||0}æ¡
- ç”Ÿäº§è®°å½•ï¼š${t.productionCount||0}æ¡
- æ£€æµ‹è®°å½•ï¼š${t.testCount||0}æ¡
- å·¥åŽ‚æ•°é‡ï¼š${t.factoryCount||0}ä¸ª

è¯·åŸºäºŽç”¨æˆ·é—®é¢˜æä¾›ä¸“ä¸šã€å‡†ç¡®ã€æœ‰ç”¨çš„å›žç­”ã€‚å›žç­”è¦ç®€æ´æ˜Žäº†ï¼Œé‡ç‚¹çªå‡ºã€‚`,H=(t,s)=>`ç”¨æˆ·é—®é¢˜ï¼š${t}

è¯·åŸºäºŽIQEè´¨é‡ç®¡ç†ç³»ç»Ÿçš„ä¸šåŠ¡åœºæ™¯ï¼Œä¸ºç”¨æˆ·æä¾›ä¸“ä¸šçš„å›žç­”ã€‚å¦‚æžœé—®é¢˜æ¶‰åŠå…·ä½“æ•°æ®æŸ¥è¯¢ï¼Œè¯·è¯´æ˜ŽæŸ¥è¯¢æ–¹æ³•å’Œå…³é”®æŒ‡æ ‡ã€‚`,W=async()=>{try{const t=JSON.parse(localStorage.getItem("inventoryData")||"[]"),s=JSON.parse(localStorage.getItem("productionData")||"[]"),c=JSON.parse(localStorage.getItem("testData")||"[]");return{inventoryCount:t.length,productionCount:s.length,testCount:c.length,factoryCount:3,timestamp:new Date().toISOString()}}catch(t){return console.error("èŽ·å–ä¸šåŠ¡æ•°æ®å¤±è´¥:",t),{inventoryCount:132,productionCount:1056,testCount:396,factoryCount:3,timestamp:new Date().toISOString()}}},T=t=>new Promise(s=>setTimeout(s,t));return Y(()=>{console.log("ðŸ¤– IQE AIæ™ºèƒ½åŠ©æ‰‹å·²åŠ è½½"),_("AIæ™ºèƒ½åŠ©æ‰‹å·²å°±ç»ªï¼ŒDeepSeekæ¨¡åž‹å·²è¿žæŽ¥","success")}),(t,s)=>{const c=S("el-switch"),m=S("el-button"),v=S("el-tag"),h=S("el-input");return n(),a("div",ae,[e("div",ie,[s[4]||(s[4]=e("h1",null,"ðŸ¤– IQE AI æ™ºèƒ½åŠ©æ‰‹",-1)),e("div",le,[g(c,{modelValue:f.value,"onUpdate:modelValue":s[0]||(s[0]=o=>f.value=o),onChange:J,"active-text":"AIå¢žå¼ºæ¨¡å¼","inactive-text":"åŸºç¡€æ¨¡å¼",size:"large"},null,8,["modelValue"]),g(m,{onClick:R,type:"primary",plain:""},{default:D(()=>s[2]||(s[2]=[x("æ¸…ç©ºå¯¹è¯")])),_:1,__:[2]}),g(m,{onClick:U,type:"info",plain:""},{default:D(()=>s[3]||(s[3]=[x("è¿”å›žç³»ç»Ÿ")])),_:1,__:[3]})])]),e("div",ce,[e("div",re,[s[5]||(s[5]=e("div",{class:"column-header"},[e("h3",null,"ðŸ› ï¸ å¯ç”¨å·¥å…·")],-1)),e("div",ue,[(n(!0),a(k,null,I(O,o=>(n(),a("div",{class:"tool-category",key:o.name},[e("h4",null,i(o.icon)+" "+i(o.name),1),(n(!0),a(k,null,I(o.tools,r=>(n(),a("div",{class:"tool-item",key:r.name,onClick:Ke=>j(r)},[e("span",pe,i(r.icon),1),e("div",me,[e("div",ve,i(r.name),1),e("div",_e,i(r.description),1)])],8,de))),128))]))),128))])]),e("div",he,[e("div",ye,[s[6]||(s[6]=e("h3",null,"ðŸ’¬ æ™ºèƒ½é—®ç­”",-1)),e("div",ge,[(n(!0),a(k,null,I(N.value,o=>(n(),te(v,{key:o,onClick:r=>z(o),class:"example-tag",type:"info",effect:"plain"},{default:D(()=>[x(i(o),1)]),_:2},1032,["onClick"]))),128))])]),e("div",{class:"messages-area",ref_key:"messagesArea",ref:A},[(n(!0),a(k,null,I(y.value,(o,r)=>(n(),a("div",{key:r,class:E(["chat-message",o.type])},[e("div",ke,[o.type==="user"?(n(),a("span",Ie,"ðŸ‘¤")):(n(),a("span",fe,"ðŸ¤–"))]),e("div",Ae,[e("div",we,i(o.content),1),e("div",Ce,i(B(o.timestamp)),1)])],2))),128)),p.value?(n(),a("div",Se,s[7]||(s[7]=[e("div",{class:"message-avatar"},"ðŸ¤–",-1),e("div",{class:"message-body"},[e("div",{class:"typing-animation"},[e("span"),e("span"),e("span")]),e("div",{class:"loading-text"},"AIæ­£åœ¨æ€è€ƒä¸­...")],-1)]))):$("",!0)],512),e("div",De,[g(h,{modelValue:u.value,"onUpdate:modelValue":s[1]||(s[1]=o=>u.value=o),type:"textarea",rows:3,placeholder:"è¯·è¾“å…¥æ‚¨çš„é—®é¢˜...",onKeydown:Z(ee(b,["ctrl"]),["enter"]),disabled:p.value,resize:"none"},null,8,["modelValue","onKeydown","disabled"]),e("div",xe,[g(m,{onClick:b,type:"primary",loading:p.value,disabled:!u.value.trim()},{default:D(()=>[x(i(p.value?"å‘é€ä¸­...":"å‘é€ (Ctrl+Enter)"),1)]),_:1},8,["loading","disabled"])]),w.value?(n(),a("div",{key:0,class:E(["status-message",V.value])},i(w.value),3)):$("",!0)])]),e("div",$e,[s[9]||(s[9]=e("div",{class:"column-header"},[e("h3",null,"ðŸ§  AIæ€è€ƒè¿‡ç¨‹")],-1)),e("div",be,[l.value.length===0?(n(),a("div",Te,s[8]||(s[8]=[e("div",{class:"empty-icon"},"ðŸ¤”",-1),e("div",{class:"empty-text"},"AIæ­£åœ¨ç­‰å¾…æ‚¨çš„é—®é¢˜...",-1)]))):$("",!0),(n(!0),a(k,null,I(l.value,(o,r)=>(n(),a("div",{key:r,class:E(["thinking-step",o.status])},[e("div",Ee,[e("span",Pe,i(K(o.type)),1),e("span",Ve,i(o.title),1),e("span",Qe,i(L(o.status)),1)]),o.result?(n(),a("div",Me,[e("div",Ne,i(o.result),1)])):$("",!0)],2))),128))])])])])}}},ze=oe(Oe,[["__scopeId","data-v-913ef58e"]]);export{ze as default};
