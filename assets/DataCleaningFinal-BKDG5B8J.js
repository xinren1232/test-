const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/8DDataExtractor-CE6Zk_sv.js","assets/8DReportAnalyzer-BsKXd43f.js"])))=>i.map(i=>d[i]);
import{a as Ls,_ as et}from"./index-Bo1zM2q5.js";import{ar as qs,as as Es,y as Ns,aq as Us,at as Bs,au as js,D as Os,av as Ys,G as Js,K as Ws,aw as Ks,ax as Hs,ay as Qs,c as m,o as u,R as Gs,a as e,O as a,F as T,r as k,M as se,az as ae,b as M,e as d,P as n,Q as x,n as w,d as Fe,t as c,X as E,_ as Xs,ai as X,S as y,$ as tt,V as g,W as Ee}from"./element-plus-DR-erZ3X.js";import"./echarts-Dfqt_Pbx.js";const Ne={baseURL:"https://api.deepseek.com",endpoint:"/chat/completions",apiKey:"sk-cab797574abf4288bcfaca253191565d",model:"deepseek-chat"},Zs={name:"DataCleaningFinal",components:{Upload:Qs,UploadFilled:Hs,Setting:Ks,DataAnalysis:Ws,Document:Js,Plus:Ys,Download:Os,QuestionFilled:js,DocumentAdd:Bs,Search:Us,CircleCheck:Ns,Monitor:Es,Files:qs},setup(){const N=y("cleaning"),t=y([{id:1,name:"通用数据清洗",type:"system",description:"基于Desbordante框架的标准数据质量处理流程",rules:["函数依赖发现与验证","精确重复检测与去重","空值模式分析与处理","数据类型约束验证","唯一性约束检查","包含依赖验证","异常值检测与标记"],algorithms:["TANE","FastFDs","HyFD","SPIDER"],metrics:["g1","tau","rho","mu+"],usageCount:1250,successRate:95},{id:2,name:"财务数据清洗",type:"system",description:"专门针对财务数据的清洗规则",rules:["金额格式化","日期标准化","科目代码验证","借贷平衡检查"]},{id:3,name:"客户信息清洗",type:"custom",description:"客户数据专用清洗模板",rules:["手机号验证","邮箱格式检查","地址标准化","姓名去重"]},{id:4,name:"质量问题数据清洗",type:"system",description:"专门针对质量问题批号数据的清洗规则",rules:["批号格式标准化","问题分类规范","日期时间统一","供应商信息验证","问题描述去重"]},{id:5,name:"8D报告数据清洗",type:"system",description:"8D问题解决报告的结构化数据清洗",rules:["8D步骤完整性检查","问题描述标准化","根因分析格式化","纠正措施验证","预防措施规范"]}]);y(1);const A=y([{type:"assistant",content:"您好！我是AI清洗助手，可以帮助您进行数据清洗。请告诉我您的需求。",timestamp:"09:00:00"}]),l=y(null),Se=y(!1),ge=y(null),f=y(null),de=y(""),D=y(!1),J=y(["清洗空值数据","删除重复记录","标准化日期格式","检测异常值","验证数据完整性"]),b=y([{title:"文档解析",description:"解析文档结构，识别字段设计和数据类型",status:"pending",progress:0,result:"",details:{fieldsDetected:0,dataTypes:[],constraints:[],relationships:[]}},{title:"字段分析",description:"分析字段属性、约束关系和数据质量",status:"pending",progress:0,result:"",details:{functionalDependencies:[],uniqueConstraints:[],nullableFields:[],dataDistribution:{}}},{title:"重复检测",description:"识别和标记重复记录，应用去重策略",status:"pending",progress:0,result:"",details:{duplicatesFound:0,duplicateGroups:[],deduplicationStrategy:"",removedRecords:0}},{title:"空值筛查",description:"检测空白内容，应用填充或删除策略",status:"pending",progress:0,result:"",details:{nullFields:[],nullPercentage:{},fillStrategy:{},processedNulls:0}},{title:"数据清洗",description:"应用清洗规则，验证数据约束和完整性",status:"pending",progress:0,result:"",details:{rulesApplied:[],violationsFound:0,correctedRecords:0,qualityScore:0}},{title:"结果呈现",description:"生成清洗后的数据集和质量报告",status:"pending",progress:0,result:"",details:{cleanedRecords:0,qualityImprovement:0,reportGenerated:!1,downloadReady:!1}}]),W=y([{timestamp:"09:00:01",level:"info",message:"开始处理文件：data.xlsx"},{timestamp:"09:00:02",level:"info",message:"检测到 1,000 条记录"},{timestamp:"09:00:03",level:"warning",message:"发现 50 个空值"},{timestamp:"09:00:04",level:"info",message:"应用清洗规则：去除空值"}]),P=y([]),F=y("idle"),h=y(0),U=y(0),B=y(""),oe=y(""),ce=y(!1),L=y({name:"customer_data.xlsx",records:1e3,size:"2.5MB",nullCount:50,duplicateCount:25,anomalyCount:15}),R=y({name:"customer_data_cleaned.xlsx",records:960,size:"2.3MB",qualityScore:95,completeness:98}),Z=y({removedRecords:40,modifiedRecords:120,addedRecords:0,processingTime:"2分30秒"}),ye=y([{id:1,name:"通用数据清洗",type:"system",description:"基础数据清洗规则",appliedRules:[{name:"去除空值",effect:"删除50条记录"},{name:"删除重复项",effect:"删除25条记录"},{name:"格式标准化",effect:"修正120条记录"}]}]),Ue=y({generateTime:"2024-01-15 14:30:00",fileName:"customer_data.xlsx",reportId:"RPT-20240115-001",totalRecords:1e3,appliedRulesCount:8,qualityScore:95,completeness:98,accuracy:96,consistency:94,qualityIssues:[{type:"空值",count:50,severity:"中等",action:"删除记录"},{type:"重复值",count:25,severity:"高",action:"去重处理"},{type:"格式错误",count:15,severity:"低",action:"格式修正"}],appliedRules:[{id:1,name:"空值处理",description:"检测并处理空值数据",affectedRecords:50,executionTime:"0.5秒",successRate:100}],aiInsights:[{id:1,title:"数据质量评估",content:"整体数据质量良好，主要问题集中在空值和重复值处理上。",recommendations:["建议在数据录入阶段增加验证规则","定期进行数据质量检查"]}],dataLineage:[{id:1,name:"数据上传",description:"原始数据文件上传",icon:"el-icon-upload",input:"原始文件",output:"结构化数据"}]}),j=y("patterns"),Ce=y([{id:1,name:"客户手机号模式",description:"标准11位手机号格式：1[3-9]xxxxxxxxx",frequency:"95%",confidence:98}]),Re=y([{id:1,name:"手机号验证规则",description:"验证手机号格式的正确性",successRate:98,usageCount:156}]),Te=y([{name:"数据完整性",value:98.5,unit:"%",trend:"up",change:"+2.3%"},{name:"数据准确性",value:96.2,unit:"%",trend:"up",change:"+1.8%"},{name:"数据一致性",value:94.7,unit:"%",trend:"down",change:"-0.5%"}]),ne=y([{key:"cleaning",title:"文件清洗",description:"智能数据清洗处理",iconClass:"el-icon-brush"},{key:"template-rules",title:"模板规则",description:"清洗模板与规则配置",iconClass:"el-icon-setting"},{key:"results",title:"清洗结果",description:"清洗报告与结果展示",iconClass:"el-icon-document"},{key:"governance",title:"数据治理",description:"知识提炼与管理应用",iconClass:"el-icon-data-analysis"},{key:"tech-tools",title:"技术工具",description:"开源工具集成管理",iconClass:"el-icon-cpu"}]),ue=y([{type:"excel",name:"Excel文件",extensions:[".xlsx",".xls"],icon:"el-icon-document",color:"#67C23A",tools:[{id:"pandas",name:"Pandas",description:"Python数据处理库",category:"python",features:["数据清洗","格式转换","统计分析"]},{id:"openpyxl",name:"OpenPyXL",description:"Excel读写库",category:"python",features:["读取Excel","写入Excel","格式化"]},{id:"apache-poi",name:"Apache POI",description:"Java Excel处理",category:"java",features:["企业级","高性能","完整功能"]},{id:"sheetjs",name:"SheetJS",description:"JavaScript Excel库",category:"javascript",features:["前端处理","轻量级","跨平台"]}]},{type:"csv",name:"CSV文件",extensions:[".csv"],icon:"el-icon-document",color:"#409EFF",tools:[{id:"pandas",name:"Pandas",description:"Python CSV处理",category:"python",features:["大数据处理","数据分析","清洗转换"]},{id:"csvkit",name:"CSVKit",description:"CSV命令行工具",category:"cli",features:["命令行","批处理","快速操作"]},{id:"opencsv",name:"OpenCSV",description:"Java CSV库",category:"java",features:["企业级","稳定可靠","高性能"]},{id:"papaparse",name:"Papa Parse",description:"JavaScript CSV解析器",category:"javascript",features:["浏览器支持","流式处理","错误处理"]}]},{type:"pdf",name:"PDF文件",extensions:[".pdf"],icon:"el-icon-document",color:"#E6A23C",tools:[{id:"pdfplumber",name:"PDFPlumber",description:"Python PDF文本提取",category:"python",features:["文本提取","表格识别","布局分析"]},{id:"tabula",name:"Tabula",description:"PDF表格提取工具",category:"java",features:["表格提取","批量处理","高精度"]},{id:"camelot",name:"Camelot",description:"PDF表格提取库",category:"python",features:["智能识别","多种格式","可视化"]},{id:"pdf-lib",name:"PDF-lib",description:"JavaScript PDF处理",category:"javascript",features:["前端处理","创建PDF","修改PDF"]}]},{type:"word",name:"Word文档",extensions:[".doc",".docx"],icon:"el-icon-document",color:"#909399",tools:[{id:"python-docx",name:"Python-docx",description:"Python Word处理",category:"python",features:["文档读取","内容提取","格式处理"]},{id:"apache-poi",name:"Apache POI",description:"Java Word处理",category:"java",features:["企业级","完整功能","高性能"]},{id:"mammoth",name:"Mammoth",description:"Word转HTML工具",category:"javascript",features:["格式转换","样式保持","前端处理"]},{id:"docx4j",name:"Docx4j",description:"Java DOCX库",category:"java",features:["XML处理","模板生成","高级功能"]}]},{type:"ppt",name:"PowerPoint文件",extensions:[".ppt",".pptx"],icon:"el-icon-document",color:"#F56C6C",tools:[{id:"python-pptx",name:"Python-pptx",description:"Python PPT处理",category:"python",features:["幻灯片读取","内容提取","格式处理"]},{id:"apache-poi",name:"Apache POI",description:"Java PPT处理",category:"java",features:["企业级","完整功能","高性能"]},{id:"officegen",name:"OfficeGen",description:"Node.js Office生成器",category:"javascript",features:["文档生成","模板支持","前端处理"]},{id:"aspose-slides",name:"Aspose.Slides",description:"商业PPT处理库",category:"commercial",features:["专业级","高级功能","商业支持"]}]}]),S=y(null),I=y(null),V=y("common"),q=y([{id:"common",name:"常规字段清洗",description:"适用于一般数据表格的基础清洗规则",icon:"el-icon-document",rules:["去除空值","去重","格式标准化","数据验证"],examples:["去除空值","去重","格式标准化"],cleaningLogic:{removeEmpty:!0,removeDuplicates:!0,standardizeFormat:!0,validateData:!0,trimWhitespace:!0,normalizeCase:!1}},{id:"8d-report",name:"8D报告专用",description:"针对8D报告格式的专业清洗规则",icon:"el-icon-warning",rules:["问题描述清洗","根因分析格式化","纠正措施验证","预防措施标准化"],examples:["问题描述清洗","根因分析格式化"],cleaningLogic:{removeEmpty:!0,removeDuplicates:!1,standardizeFormat:!0,validateData:!0,trimWhitespace:!0,normalizeCase:!0,specialFields:{D1:"团队组建",D2:"问题描述",D3:"临时措施",D4:"根因分析",D5:"纠正措施",D6:"实施验证",D7:"预防措施",D8:"团队表彰"}}},{id:"quality-case",name:"质量案例",description:"质量管理案例的专业清洗规则",icon:"el-icon-star-on",rules:["案例编号标准化","问题分类规范","解决方案格式化","效果评估清洗"],examples:["案例编号标准化","问题分类规范"],cleaningLogic:{removeEmpty:!0,removeDuplicates:!0,standardizeFormat:!0,validateData:!0,trimWhitespace:!0,normalizeCase:!0,caseNumberPattern:/^QC\d{4}-\d{3}$/,categoryMapping:{质量问题:"QUALITY_ISSUE",工艺改进:"PROCESS_IMPROVEMENT",设备故障:"EQUIPMENT_FAILURE"}}},{id:"inspection-report",name:"检验报告",description:"检验检测报告的专业清洗规则",icon:"el-icon-view",rules:["检验项目标准化","结果数据验证","判定结论规范","签名信息提取"],examples:["检验项目标准化","结果数据验证"],cleaningLogic:{removeEmpty:!1,removeDuplicates:!1,standardizeFormat:!0,validateData:!0,trimWhitespace:!0,normalizeCase:!1,resultValidation:{numericFields:["测量值","标准值","偏差"],conclusionMapping:{合格:"PASS",不合格:"FAIL",待定:"PENDING"}}}},{id:"material-issue",name:"来料问题数据",description:"来料问题批号数据的专业清洗规则",icon:"el-icon-box",rules:["批号格式标准化","供应商信息验证","问题分类规范","日期时间统一","数量单位标准化"],examples:["批号格式标准化","供应商信息验证"],cleaningLogic:{removeEmpty:!0,removeDuplicates:!0,standardizeFormat:!0,validateData:!0,trimWhitespace:!0,normalizeCase:!0,batchNumberPattern:/^\d{8}[A-Z]{2}\d{3}$/,dateFormats:["YYYY-MM-DD","YYYY/MM/DD","DD/MM/YYYY"],unitMapping:{kg:"KG",g:"G",pcs:"PCS",个:"PCS",公斤:"KG"}}}]),$=y(""),pe=y([]),me=y(["ID","标题","描述","状态","创建时间","更新时间"]),ze=y([]),ke=y([]),ee=y(null),Me=y("basic"),ve=y([{id:1,name:"8D报告标准模板",description:"适用于8D报告的标准清洗规则，包含问题描述、根因分析等字段的清洗",type:"system",applicableFormats:["8d-report"],rules:["removeEmpty","trimWhitespace","dataValidation","standardizeFormat"]},{id:2,name:"质量案例通用模板",description:"适用于质量案例的通用清洗规则，重点处理案例编号和问题分类",type:"system",applicableFormats:["quality-case"],rules:["removeEmpty","removeDuplicates","dataValidation"]},{id:3,name:"检验记录专用模板",description:"适用于检验记录的专用清洗规则，确保数值准确性和格式统一",type:"system",applicableFormats:["inspection-record"],rules:["removeEmpty","standardizeFormat","dataValidation","anomalyDetection"]}]),o=y({name:"",description:"",applicableFormats:[],basicRules:[],advancedRules:[],customRules:[]}),_=y(0),C=y(0),O=y(0),Be=y(0),lt=y([{id:1,field:"问题描述",type:"空值",row:15,description:"该字段为必填项，但当前为空"},{id:2,field:"责任人",type:"空值",row:23,description:"责任人字段缺失"}]),st=y([{id:1,field:"案例编号",type:"重复",rows:[5,12,18],value:"QC-2024-001"},{id:2,field:"问题标题",type:"重复",rows:[8,15],value:"产品质量异常"}]),at=y([{id:1,field:"创建时间",type:"格式错误",description:"日期格式不统一",row:10,severity:"中等"},{id:2,field:"质量分数",type:"数值异常",description:"分数超出正常范围",row:25,severity:"高"}]),Q=y({status:"",type:"",keyword:"",dateRange:[]}),Y=y({totalRecords:1250,processedFiles:5,cleanedRecords:905,issueRecords:45,pendingRecords:300,qualityScore:92,processingTime:125}),te=y([{id:"QC001",title:"产品A质量问题分析报告",type:"8d-report",status:"cleaned",qualityScore:95,issueCount:0,createTime:"2024-01-15",updateTime:"2024-01-16",data:[{field:"问题描述",value:"产品表面划痕"},{field:"根因分析",value:"生产工艺问题"}],columns:[{prop:"field",label:"字段"},{prop:"value",label:"值"}],issues:[]},{id:"QC002",title:"检验记录-批次B001",type:"inspection-record",status:"issues",qualityScore:75,issueCount:3,createTime:"2024-01-14",updateTime:"2024-01-15",data:[{field:"检验项目",value:"尺寸检测"},{field:"标准值",value:"10±0.1mm"}],columns:[{prop:"field",label:"字段"},{prop:"value",label:"值"}],issues:[{field:"实测值",type:"空值",description:"缺少实测数据",severity:"高"}]}]),fe=y([]),ot=y([]),Ve=y(1),Ie=y(20),_e=y([]),je=y(!1),we=y(null),nt=y("system"),it=y(null),he=y(null),De=y(!1),Jt=y([{id:1,name:"8D报告标准模板",description:"适用于8D报告的标准清洗规则，包含问题描述、根因分析等字段的清洗",type:"system",applicableFormats:["excel","word"],rules:[{name:"问题描述清洗",description:"清理问题描述中的无效字符",type:"cleaning"},{name:"根因分析格式化",description:"标准化根因分析格式",type:"formatting"},{name:"纠正措施验证",description:"验证纠正措施的完整性",type:"validation"}],createdAt:"2024-01-15"},{id:2,name:"质量案例通用模板",description:"适用于质量案例的通用清洗规则，重点处理案例编号和问题分类",type:"system",applicableFormats:["excel","csv"],rules:[{name:"案例编号标准化",description:"统一案例编号格式",type:"formatting"},{name:"问题分类规范",description:"规范问题分类字段",type:"validation"},{name:"去重处理",description:"删除重复的案例记录",type:"deduplication"}],createdAt:"2024-01-10"}]),be=y([{id:101,name:"自定义检验报告模板",description:"针对特定检验报告格式的自定义清洗规则",type:"custom",applicableFormats:["pdf","excel"],rules:[{name:"检验项目提取",description:"从PDF中提取检验项目",type:"cleaning"},{name:"数据格式转换",description:"转换数据格式为标准格式",type:"formatting"}],createdAt:"2024-01-20"}]),Oe=y("python"),Ye=y(null),Je=y(!1),rt=y([{id:"python",name:"Python工具",description:"Python生态系统的数据处理工具",icon:"el-icon-cpu",tools:[{id:"pandas",name:"Pandas",description:"Python数据分析库，提供强大的数据处理能力",status:"deployed",version:"v1.5.3",rating:4.8,downloads:15e3,icon:"el-icon-document",technologies:["Python","NumPy","Data Analysis"],configParams:[{name:"memory_limit",value:"2GB",placeholder:"内存限制"},{name:"chunk_size",value:"10000",placeholder:"分块大小"}]},{id:"openpyxl",name:"OpenPyXL",description:"Python Excel文件读写库",status:"available",version:"v3.1.2",rating:4.5,downloads:8e3,icon:"el-icon-document",technologies:["Python","Excel","XLSX"],configParams:[{name:"read_only",value:"false",placeholder:"只读模式"},{name:"data_only",value:"true",placeholder:"仅数据"}]}]},{id:"java",name:"Java工具",description:"Java生态系统的企业级数据处理工具",icon:"el-icon-cpu",tools:[{id:"apache-poi",name:"Apache POI",description:"Java处理Microsoft Office文档的库",status:"available",version:"v5.2.4",rating:4.6,downloads:12e3,icon:"el-icon-document",technologies:["Java","Office","Excel","Word"],configParams:[{name:"heap_size",value:"1GB",placeholder:"堆内存大小"},{name:"temp_dir",value:"/tmp",placeholder:"临时目录"}]}]},{id:"javascript",name:"JavaScript工具",description:"JavaScript/Node.js数据处理工具",icon:"el-icon-cpu",tools:[{id:"sheetjs",name:"SheetJS",description:"JavaScript电子表格处理库",status:"available",version:"v0.20.0",rating:4.4,downloads:6e3,icon:"el-icon-document",technologies:["JavaScript","Node.js","Excel"],configParams:[{name:"type",value:"buffer",placeholder:"输出类型"},{name:"bookType",value:"xlsx",placeholder:"文件类型"}]}]}]),Wt=tt(()=>P.value.length>0?"success":"info"),Kt=tt(()=>P.value.length>0?`已选择 ${P.value.length} 个文件`:"待上传"),Ht=tt(()=>({idle:"待处理",running:"处理中",completed:"已完成",stopped:"已停止"})[F.value]||"未知状态"),Qt=s=>{N.value=s;const i=document.querySelector(".tab-content");i&&(i.style.opacity="0",i.style.transform="translateY(10px)",setTimeout(()=>{i.style.opacity="1",i.style.transform="translateY(0)"},100)),g.success(`已切换到${Gt(s)}`)},Gt=s=>({cleaning:"文件清洗",results:"清洗结果",governance:"数据治理"})[s]||s,Xt=()=>{de.value.trim()&&(A.value.push({type:"user",content:de.value,timestamp:new Date().toLocaleTimeString()}),D.value=!0,setTimeout(()=>{A.value.push({type:"assistant",content:"我已经理解您的需求，正在为您处理数据清洗任务...",timestamp:new Date().toLocaleTimeString()}),D.value=!1,de.value=""},1e3))},Zt=()=>{A.value=[{type:"assistant",content:"您好！我是AI清洗助手，可以帮助您进行数据清洗。请告诉我您的需求。",timestamp:new Date().toLocaleTimeString()}]},$t=s=>{const i=b.value[s];return{completed:i.status==="completed",processing:i.status==="processing",pending:i.status==="pending"}},el=()=>{b.value.forEach((s,i)=>{i===0?(s.status="completed",s.progress=100):(s.status="pending",s.progress=0)})},tl=()=>{g.success("报告生成中...")},ll=()=>{g.success("报告保存成功")},sl=s=>({高:"danger",中等:"warning",低:"info"})[s]||"info",al=()=>{g.success("知识提炼中...")},ol=s=>s==="up"?"el-icon-top":"el-icon-bottom",nl=(s,i)=>{try{console.log("📁 文件上传事件触发:",s,i);const r=s.raw||s;if(!r||!r.name)return g.error("无效的文件对象"),!1;console.log("📄 处理文件:",r.name,r.size,r.type);const p=50*1024*1024;if(r.size>p)return g.error("文件大小不能超过50MB"),!1;if(!(["application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/vnd.ms-excel","text/csv","application/pdf","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document","text/plain"].includes(r.type)||r.name.match(/\.(xlsx|xls|csv|pdf|doc|docx|txt)$/i)))return g.error("不支持的文件格式，请上传Excel、CSV、PDF、Word或TXT文件"),!1;P.value=i,g.success(`已选择文件: ${r.name} (${We(null,null,r.size)})`),Xe()||(console.log("⚠️ 配置不完整，使用默认配置"),S.value||(S.value={name:"通用文本",extensions:[".txt"],color:"#409eff"}),I.value||(I.value={name:"AI智能清洗",id:"ai-cleaner"}),V.value||(V.value={name:"通用规则",id:"general"}),g.info("已使用默认配置处理文件"));const H={type:"user",content:`我已上传文件：${r.name}`,timestamp:new Date().toLocaleTimeString(),avatar:"/api/placeholder/32/32"};return A.value.push(H),setTimeout(()=>{Ke(r),setTimeout(()=>{St(r),setTimeout(()=>{gt()},2e3)},1e3)},500),!0}catch(r){return console.error("❌ 文件上传处理失败:",r),g.error(`文件上传失败: ${r.message}`),!1}},We=(s,i,r)=>r<1024?r+" B":r<1024*1024?(r/1024).toFixed(1)+" KB":(r/(1024*1024)).toFixed(1)+" MB",il=s=>{P.value.splice(s,1),g.info("文件已移除")},Ke=async s=>{try{if(console.log("🔍 开始分析文件结构:",s),!s)throw new Error("文件对象为空");if(!(s instanceof File)&&!(s instanceof Blob))throw new Error("无效的文件对象类型");const i=s.name||"unknown";console.log("📁 分析文件:",i,"大小:",s.size),g.info(`正在分析文件结构: ${i}`),console.log("📖 开始读取文件内容...");const r=await $e(s);if(!r)throw new Error("文件内容为空或读取失败");if(console.log("📄 文件内容读取成功，长度:",r.length),console.log("🔍 开始8D报告检测..."),await He(s,r)){console.log("✅ 识别为8D报告，启动专用处理流程"),await Qe(s,r);return}console.log("📊 执行通用文件结构分析...");const v=rl(r,i);me.value=v.fields,$.value=v.recommendedFormat,Ge(),g.success(`文件结构分析完成 - 检测到 ${v.fields.length} 个字段`),console.log("✅ 文件结构分析完成:",v)}catch(i){console.error("❌ 文件分析失败:",i),g.error(`文件分析失败: ${i.message||"未知错误"}`),me.value=["ID","标题","内容","状态","时间"],$.value="general";try{Ge()}catch(r){console.error("❌ 格式变更失败:",r)}}},rl=(s,i)=>{try{const r={fields:[],recommendedFormat:"general",confidence:.5},p=dl(i);r.recommendedFormat=p.format,r.confidence=p.confidence;const v=cl(s);return r.fields=v.fields,r.confidence=Math.max(r.confidence,v.confidence),r}catch(r){return console.warn("内容结构分析失败:",r),{fields:["ID","标题","内容","状态","时间"],recommendedFormat:"general",confidence:.3}}},dl=s=>{const i=s.toLowerCase();return i.includes("8d")?{format:"8d-report",confidence:.9}:i.includes("质量")||i.includes("案例")?{format:"quality-case",confidence:.8}:i.includes("检验")||i.includes("记录")?{format:"inspection-record",confidence:.8}:i.includes("问题")||i.includes("缺陷")?{format:"defect-report",confidence:.7}:{format:"general",confidence:.5}},cl=s=>{const i=new Set(["ID","标题"]);let r=.5;const p={问题描述:/问题描述|问题现象|故障描述/gi,状态:/状态|进度|阶段/gi,责任人:/责任人|负责人|处理人|联系人/gi,创建时间:/创建时间|发生时间|报告时间|时间/gi,更新时间:/更新时间|修改时间|完成时间/gi,优先级:/优先级|紧急程度|严重程度/gi,分类:/分类|类型|类别/gi,客户:/客户|用户|报告人/gi,产品:/产品|型号|设备/gi,根因:/根因|原因|根本原因/gi,措施:/措施|行动|解决方案|对策/gi,验证:/验证|确认|测试/gi};return Object.keys(p).forEach(v=>{p[v].test(s)&&(i.add(v),r+=.05)}),{fields:Array.from(i),confidence:Math.min(r,1)}},He=async(s,i)=>{try{if(console.log("🔍 检测8D报告..."),!s||!i)return console.log("❌ 8D检测参数无效"),!1;const r=s.name||"unknown";console.log("📁 检测文件:",r);const{default:p}=await et(async()=>{const{default:z}=await import("./8DReportAnalyzer-BsKXd43f.js");return{default:z}},[]);if(!p)return console.error("❌ 8D分析器导入失败"),!1;const v=await p.identify8DReport(i,r);return f.value=v,Se.value=v.is8DReport,v.is8DReport?(console.log("✅ 识别为8D报告，置信度:",(v.confidence*100).toFixed(1)+"%"),await dt(v),A.value.push({type:"assistant",content:`🎯 **检测到8D质量管理报告！**

**识别结果**：
- 📊 文档类型：8D质量管理报告
- 🎯 置信度：${(v.confidence*100).toFixed(1)}%
- 📋 建议模板：${v.suggestedTemplate}

**自动配置**：
- ✅ 已自动选择8D专用处理模板
- ✅ 已配置质量管理分析规则
- ✅ 已启用DeepSeek AI深度分析

**8D处理流程**：
1. 📄 **文档解析** - 识别8D结构和维度
2. 🔍 **维度提取** - 提取D1-D8各维度内容
3. 📊 **质量评估** - 评估各维度完整性和准确性
4. 🤖 **AI分析** - DeepSeek专业质量管理分析
5. 📋 **报告生成** - 生成专业8D分析报告
6. 💡 **改进建议** - 提供具体改进措施

准备好开始8D专业分析了吗？`,timestamp:new Date().toLocaleTimeString(),avatar:"/api/placeholder/32/32",isMarkdown:!0}),!0):(console.log("ℹ️ 非8D报告，使用通用处理流程"),!1)}catch(r){return console.error("8D报告识别失败:",r),!1}},dt=async s=>{const i=ue.value.find(v=>v.name.includes("8D")||v.id==="quality_report")||ue.value.find(v=>v.id==="excel");i&&(S.value=i);const r=processingTools.value.find(v=>v.name.includes("质量")||v.name.includes("8D"))||processingTools.value.find(v=>v.id==="pandas");r&&(I.value=r);const p=q.value.find(v=>v.name.includes("8D")||v.name.includes("质量"))||q.value.find(v=>v.id==="quality_analysis");p&&(V.value=p),b.value=[{id:1,name:"8D结构识别",description:"识别8D报告结构和各维度内容",status:"pending",progress:0,result:"",details:null},{id:2,name:"D1-D8维度提取",description:"提取团队组建到团队表彰8个维度的详细信息",status:"pending",progress:0,result:"",details:null},{id:3,name:"质量评估分析",description:"评估各维度的完整性、准确性和质量水平",status:"pending",progress:0,result:"",details:null},{id:4,name:"AI专业分析",description:"使用DeepSeek AI进行深度质量管理分析",status:"pending",progress:0,result:"",details:null},{id:5,name:"改进建议生成",description:"基于分析结果生成具体的改进建议和行动计划",status:"pending",progress:0,result:"",details:null},{id:6,name:"专业报告输出",description:"生成完整的8D分析报告和质量评估文档",status:"pending",progress:0,result:"",details:null}]},Qe=async(s,i)=>{try{console.log("🚀 开始8D报告专业处理..."),await K(0,"8D结构识别",async()=>{const r=f.value;return b.value[0].details=r,`识别完成：置信度${(r.confidence*100).toFixed(1)}%，建议模板${r.suggestedTemplate}`}),await K(1,"D1-D8维度提取",async()=>{const{default:r}=await et(async()=>{const{default:v}=await import("./8DDataExtractor-CE6Zk_sv.js");return{default:v}},__vite__mapDeps([0,1])),p=await r.extract8DData(i,Le(s.name),s.name);if(!p.success)throw new Error(p.error);return b.value[1].details=p,`提取完成：${p.extractionReport.extraction.dimensionsExtracted}/${p.extractionReport.extraction.totalDimensions}个维度`}),await K(2,"质量评估分析",async()=>{const p=b.value[1].details.qualityAssessment;return b.value[2].details=p,`评估完成：总体评分${p.overall.score.toFixed(1)}分，等级${p.overall.grade}`}),await K(3,"AI专业分析",async()=>{const r=b.value[1].details,p=b.value[2].details,{default:v}=await et(async()=>{const{default:H}=await import("./8DAIAnalysisEngine-Bam4RiAq.js");return{default:H}},[]),z=await v.analyze8DReport(r.extractedData,p,r.metadata,{template:"comprehensive",industry:"general",framework:"iso9001",language:"zh-CN",depth:"detailed"});if(!z.success)throw new Error(z.error);return ge.value=z,b.value[3].details=z,"AI分析完成：已生成专业质量管理分析报告"}),await K(4,"改进建议生成",async()=>{const r=b.value[3].details,p=r.analysis.recommendations||[];return b.value[4].details={recommendations:p,implementationRoadmap:r.analysis.implementationRoadmap,successMetrics:r.analysis.successMetrics},`建议生成完成：${p.length}项改进建议`}),await K(5,"专业报告输出",async()=>{const r=await ct();return b.value[5].details=r,l.value=r,"8D专业分析报告生成完成"}),console.log("✅ 8D报告处理完成"),A.value.push({type:"assistant",content:ge.value.analysis.rawAnalysis,isMarkdown:!0,timestamp:new Date().toLocaleTimeString(),avatar:"/api/placeholder/32/32"}),setTimeout(()=>{N.value="results"},2e3)}catch(r){console.error("8D报告处理失败:",r),g.error(`8D报告处理失败: ${r.message}`)}},ct=async()=>{const s=ge.value,i=b.value[1].details,r=b.value[2].details;return{title:"8D质量管理报告专业分析",subtitle:"基于DeepSeek AI的深度质量分析",timestamp:new Date().toLocaleString(),reportType:"8D_ANALYSIS",summary:{documentType:"8D质量管理报告",confidence:f.value.confidence,overallScore:r.overall.score,grade:r.overall.grade,dimensionsAnalyzed:Object.keys(i.extractedData).length,aiAnalysisCompleted:!0},identification:f.value,extraction:i,qualityAssessment:r,aiAnalysis:s.analysis.rawAnalysis,structuredAnalysis:s.analysis,recommendations:s.analysis.recommendations||[],downloadLinks:[{name:"8D分析报告.pdf",type:"pdf",size:"2.8MB",url:"#download-8d-analysis"},{name:"质量评估详情.xlsx",type:"excel",size:"1.5MB",url:"#download-quality-details"},{name:"改进建议清单.docx",type:"word",size:"800KB",url:"#download-recommendations"}]}},ul=async()=>{try{console.log("🧪 开始测试8D流程...");const s=`
8D质量管理报告

D1 - 团队组建
团队成员: 张三(质量工程师)、李四(技术专家)、王五(生产主管)
角色分工: 张三担任组长，负责整体协调

D2 - 问题描述
问题现象: 发动机控制模块在客户端出现间歇性故障
发生时间: 2024-01-08 首次发现
影响范围: 涉及1000台车辆

D4 - 根因分析
根本原因: 供应商提供的芯片存在设计缺陷
分析方法: 采用5Why分析法和鱼骨图分析
`,i={name:"8D-test-report.txt",size:s.length,type:"text/plain"};await He(i,s)?(g.success("8D报告识别成功！"),await Qe(i,s)):g.warning("8D报告识别失败")}catch(s){console.error("测试8D流程失败:",s),g.error(`测试失败: ${s.message}`)}},pl=()=>{try{console.log("📋 生成测试报告...");const s={title:"8D质量管理报告测试分析",subtitle:"基于DeepSeek AI的深度质量分析",timestamp:new Date().toLocaleString(),reportType:"8D_ANALYSIS_TEST",summary:{documentType:"8D质量管理报告",confidence:.85,overallScore:75,grade:"B",dimensionsAnalyzed:8,aiAnalysisCompleted:!0},aiAnalysis:`# 8D质量管理报告分析

## 📊 执行摘要

本次8D报告分析显示整体质量水平良好，各维度基本完整。主要优势在于问题描述清晰、根因分析方法得当。需要改进的方面包括团队信息完善和预防措施系统化。

## 🔍 8D维度分析

### D1 - 团队组建 ⭐⭐⭐⭐
**评估**: 良好
- 团队成员配置合理，角色分工明确
- 建议补充联系方式和专业背景信息

### D2 - 问题描述 ⭐⭐⭐⭐⭐
**评估**: 优秀
- 问题现象描述清晰，时间节点明确
- 影响范围量化准确，符合标准要求

### D4 - 根因分析 ⭐⭐⭐⭐
**评估**: 良好
- 使用了系统性分析方法（5Why、鱼骨图）
- 根本原因识别准确，建议补充更多验证证据

## 💡 改进建议

### 高优先级
1. **完善团队信息** - 补充成员联系方式和专业背景
2. **加强证据支撑** - 为根因分析提供更多验证数据

### 中优先级
1. **系统化预防措施** - 建立长期预防机制
2. **标准化流程** - 完善8D报告标准模板

## 📈 质量指标

- **完整性**: 85%
- **准确性**: 90%
- **一致性**: 80%
- **可执行性**: 75%

## 🎯 结论

本8D报告基本达到质量标准，建议按照改进建议进一步完善，预计可将整体质量提升至90%以上。`,recommendations:[{priority:"high",category:"D1改进",description:"补充团队成员的联系方式和专业背景信息",impact:"提升团队协作效率"},{priority:"medium",category:"D4改进",description:"为根因分析提供更多验证证据和数据支撑",impact:"增强分析结果可信度"}],downloadLinks:[{name:"8D测试分析报告.pdf",type:"pdf",size:"2.1MB",url:"#download-test-analysis"},{name:"质量评估详情.xlsx",type:"excel",size:"1.2MB",url:"#download-test-details"}]};l.value=s,g.success("测试报告生成成功！"),console.log("✅ 测试报告已生成")}catch(s){console.error("生成测试报告失败:",s),g.error(`生成失败: ${s.message}`)}},ml=async()=>{try{console.log("🧪 开始测试文件读取功能...");const s=`测试文件内容
ID: TEST001
标题: 文件读取测试
问题描述: 验证文件读取和解析功能
状态: 测试中
责任人: 系统测试员
创建时间: 2024-01-20 10:00:00
更新时间: 2024-01-20 10:30:00

这是一个用于测试文件读取功能的示例文件。
包含了基本的字段信息和中文内容。`,i=new Blob([s],{type:"text/plain;charset=utf-8"}),r=new File([i],"test-file.txt",{type:"text/plain",lastModified:Date.now()});if(console.log("📄 创建测试文件:",{name:r.name,size:r.size,type:r.type,lastModified:r.lastModified}),!(r instanceof File))throw new Error("测试文件对象创建失败");console.log("📖 开始测试文件读取...");const p=await $e(r);console.log("📖 文件内容读取成功，长度:",p.length),console.log("📖 内容预览:",p.substring(0,100)+"..."),console.log("📊 开始测试结构分析..."),await Ke(r),g.success("文件读取测试完成！")}catch(s){console.error("❌ 文件读取测试失败:",s),g.error(`测试失败: ${s.message}`)}},vl=()=>{try{console.log("🗑️ 清除调试数据..."),l.value=null,Se.value=!1,ge.value=null,f.value=null,P.value=[],me.value=[],b.value=[],isProcessing.value=!1,h.value=0,g.success("调试数据已清除"),console.log("✅ 调试数据清除完成")}catch(s){console.error("❌ 清除数据失败:",s),g.error(`清除失败: ${s.message}`)}},Ge=()=>{if(!$.value)return;const s={"8d-report":[{standardField:"问题描述",sourceField:"",required:!0},{standardField:"根因分析",sourceField:"",required:!0},{standardField:"纠正措施",sourceField:"",required:!0},{standardField:"预防措施",sourceField:"",required:!1},{standardField:"责任人",sourceField:"",required:!0},{standardField:"完成时间",sourceField:"",required:!1}],"quality-case":[{standardField:"案例编号",sourceField:"",required:!0},{standardField:"问题类型",sourceField:"",required:!0},{standardField:"问题描述",sourceField:"",required:!0},{standardField:"处理结果",sourceField:"",required:!0},{standardField:"责任部门",sourceField:"",required:!1}],"inspection-record":[{standardField:"检验项目",sourceField:"",required:!0},{standardField:"标准值",sourceField:"",required:!0},{standardField:"实测值",sourceField:"",required:!0},{standardField:"判定结果",sourceField:"",required:!0},{standardField:"检验员",sourceField:"",required:!0}]};pe.value=s[$.value]||[],ze.value=[{field1:"示例数据1",field2:"示例数据2",field3:"示例数据3"},{field1:"示例数据4",field2:"示例数据5",field3:"示例数据6"}],ke.value=[{prop:"field1",label:"字段1"},{prop:"field2",label:"字段2"},{prop:"field3",label:"字段3"}]},fl=()=>{g.success("结构模板已保存")},gl=s=>{ee.value=s,C.value=s.rules.length,g.success(`已应用模板: ${s.name}，包含 ${s.rules.length} 个规则`)},yl=s=>{g.info(`预览模板: ${s.name}`)},_l=s=>{const i=ve.value.findIndex(r=>r.id===s.id);i>-1&&(ve.value.splice(i,1),g.success("模板已删除"))},ut=()=>{o.value={name:"",description:"",applicableFormats:[],basicRules:[],advancedRules:[],customRules:[]},g.info("请填写自定义模板信息")},hl=()=>{o.value.customRules.push({name:"",expression:""})},Dl=s=>{o.value.customRules.splice(s,1)},Cl=()=>{if(!o.value.name){g.warning("请输入模板名称");return}const s={id:Date.now(),name:o.value.name,description:o.value.description,type:"custom",applicableFormats:o.value.applicableFormats,rules:[...o.value.basicRules,...o.value.advancedRules,...o.value.customRules.map(i=>i.name)]};ve.value.push(s),g.success("自定义模板已保存")},Tl=()=>{ut(),g.info("模板已重置")},kl=()=>{g.info("预览自定义模板效果")},wl=()=>{if(!ee.value){g.warning("请先选择规则模板");return}F.value="running",h.value=0,U.value=0,_.value=0,O.value=0,Be.value=0;const s=["正在上传文件...","正在解析数据结构...","正在应用清洗规则...","正在提取关键信息...","正在汇总处理结果...","正在生成AI分析报告..."],i=setInterval(()=>{U.value+=16.67,O.value+=1,_.value+=Math.floor(Math.random()*50)+10,Be.value+=Math.floor(Math.random()*3),oe.value=s[h.value]||"处理完成",U.value>=100?(clearInterval(i),F.value="completed",h.value=6,B.value="success",Y.value.processedFiles=P.value.length,Y.value.cleanedRecords=_.value,Y.value.processingTime=O.value,fe.value=[...te.value],ie(),g.success("数据清洗完成！"),N.value="results"):h.value=Math.floor(U.value/16.67)},1e3)},Ae=s=>{g.success(`已修复问题: ${s.description}`),[lt,st,at].forEach(r=>{const p=r.value.findIndex(v=>v.id===s.id);p>-1&&r.value.splice(p,1)})},bl=s=>{g.info(`已忽略问题: ${s.description}`),Ae(s)},xl=s=>{g.success(`已删除重复数据: ${s.value}`),Ae(s)},Fl=s=>{g.success(`已合并重复数据: ${s.value}`),Ae(s)},Sl=s=>{g.info(`查看问题详情: ${s.description}`)},Rl=s=>({格式错误:"warning",数值异常:"danger",逻辑错误:"info"})[s]||"info",zl=s=>({高:"danger",中等:"warning",低:"info"})[s]||"info",Ml=()=>{F.value="stopped",g.warning("处理已停止")},Vl=()=>{g.info("日志查看功能开发中...")},Il=()=>{let s=[...te.value];if(Q.value.status&&(s=s.filter(i=>i.status===Q.value.status)),Q.value.type&&(s=s.filter(i=>i.type===Q.value.type)),Q.value.keyword&&(s=s.filter(i=>i.title.includes(Q.value.keyword)||i.id.includes(Q.value.keyword))),Q.value.dateRange&&Q.value.dateRange.length===2){const[i,r]=Q.value.dateRange;s=s.filter(p=>p.createTime>=i&&p.createTime<=r)}fe.value=s,Ve.value=1,ie(),g.success(`查询完成，找到 ${s.length} 条记录`)},Al=()=>{Q.value={status:"",type:"",keyword:"",dateRange:[]},fe.value=[...te.value],ie(),g.info("查询条件已重置")},ie=()=>{const s=(Ve.value-1)*Ie.value,i=s+Ie.value;ot.value=fe.value.slice(s,i)},Pl=s=>{Ie.value=s,ie()},Ll=s=>{Ve.value=s,ie()},ql=s=>{_e.value=s},El=s=>{we.value=s,je.value=!0},Nl=s=>{g.success(`开始清洗记录: ${s.title}`)},Ul=s=>{g.success(`下载记录: ${s.title}`)},Bl=()=>{if(_e.value.length===0){g.warning("请先选择要清洗的记录");return}g.success(`批量清洗 ${_e.value.length} 条记录`)},jl=()=>{if(_e.value.length===0){g.warning("请先选择要导出的记录");return}g.success(`批量导出 ${_e.value.length} 条记录`)},pt=()=>{je.value=!1,we.value=null},Ol=()=>{g.success(`清洗记录: ${we.value.title}`),pt()},Yl=()=>{g.success(`导出记录: ${we.value.title}`)},Jl=s=>{g.success(`数据已导出为 ${s.toUpperCase()} 格式`)},Wl=s=>({"8d-report":"primary","quality-case":"success","inspection-record":"warning"})[s]||"info",Kl=s=>({"8d-report":"8D报告","quality-case":"质量案例","inspection-record":"检验记录"})[s]||s,Hl=s=>({cleaned:"success",issues:"danger",pending:"warning"})[s]||"info",Ql=s=>({cleaned:"已清洗",issues:"有问题",pending:"待处理"})[s]||s,Gl=s=>s>=90?"#67c23a":s>=70?"#e6a23c":"#f56c6c",Xl=()=>{N.value!=="upload"&&(N.value="upload"),g.info("请在数据上传模块中上传文件")},Zl=()=>{ce.value=!0},$l=()=>{g.success("技术支持联系方式已发送到您的邮箱"),ce.value=!1},mt=()=>{const s={fileList:P.value,selectedStructureFormat:$.value,fieldMappings:pe.value,selectedTemplate:ee.value,customTemplate:o.value,resultStats:Y.value,timestamp:Date.now()};localStorage.setItem("dataCleaningProgress",JSON.stringify(s))},vt=()=>{try{const s=localStorage.getItem("dataCleaningProgress");if(s){const i=JSON.parse(s);Date.now()-i.timestamp<24*60*60*1e3&&(P.value=i.fileList||[],$.value=i.selectedStructureFormat||"",pe.value=i.fieldMappings||[],ee.value=i.selectedTemplate||null,o.value=i.customTemplate||{name:"",description:"",applicableFormats:[],basicRules:[],advancedRules:[],customRules:[]},Y.value={...Y.value,...i.resultStats},g.success("已恢复上次的工作进度"))}}catch(s){console.error("加载进度失败:",s)}},es=()=>{setInterval(()=>{(P.value.length>0||ee.value)&&mt()},3e4)};fe.value=[...te.value],ie();const ts=s=>{S.value=s,I.value=null,V.value="common",g.success(`已选择文件格式: ${s.name}`)},ls=s=>{S.value=s,I.value=null,V.value="common";const i={type:"user",content:`我已选择文件格式：${s.name}（${s.extensions.join(", ")}）`,timestamp:new Date().toLocaleTimeString(),avatar:"/api/placeholder/32/32"};A.value.push(i),setTimeout(()=>{const r={type:"assistant",content:`很好！您选择了${s.name}格式。我为您推荐以下处理工具：`,timestamp:new Date().toLocaleTimeString(),avatar:"/api/placeholder/32/32",tools:s.tools,showToolSelection:!0};A.value.push(r),Ee(()=>{const p=document.querySelector(".chat-messages");p&&(p.scrollTop=p.scrollHeight)})},1e3),g.success(`已选择文件格式: ${s.name}`)},ss=s=>{I.value=s;const i={type:"user",content:`我选择了处理工具：${s.name}`,timestamp:new Date().toLocaleTimeString(),avatar:"/api/placeholder/32/32"};A.value.push(i),setTimeout(()=>{const r={type:"assistant",content:`很好！您选择了${s.name}。现在请选择适合的清洗规则类型：`,timestamp:new Date().toLocaleTimeString(),avatar:"/api/placeholder/32/32",rules:q.value,showRuleSelection:!0};A.value.push(r),Ee(()=>{const p=document.querySelector(".chat-messages");p&&(p.scrollTop=p.scrollHeight)})},1e3),g.success(`已选择处理工具: ${s.name}`)},as=s=>{V.value=s.id;const i={type:"user",content:`我选择了清洗规则：${s.name}`,timestamp:new Date().toLocaleTimeString(),avatar:"/api/placeholder/32/32"};A.value.push(i),setTimeout(()=>{ft()},1e3),g.success(`已选择清洗规则: ${s.name}`)},os=s=>{I.value=s,g.success(`已选择处理工具: ${s.name}`)},ns=s=>{V.value=s;const i=q.value.find(r=>r.id===s);g.success(`已选择规则类型: ${i==null?void 0:i.name}`)},is=s=>({python:"success",java:"warning",javascript:"info",cli:"primary",commercial:"danger"})[s]||"info",Pe=s=>{const i=q.value.find(r=>r.id===s);return(i==null?void 0:i.name)||s},rs=()=>S.value?I.value?V.value?`使用${I.value.name}处理${S.value.name}文件，请输入您的清洗需求...`:`已选择${I.value.name}工具，请选择规则类型后输入需求...`:`已选择${S.value.name}格式，请选择处理工具后输入需求...`:"请先选择文件格式，然后输入您的清洗需求...",ds=()=>{if(!S.value||!I.value||!V.value)return["选择文件格式","选择处理工具","选择规则类型"];const s=q.value.find(i=>i.id===V.value);return(s==null?void 0:s.rules)||["开始清洗","预览结果","导出数据"]},Xe=()=>S.value&&I.value&&V.value,ft=()=>{Xe()&&(A.value.push({type:"assistant",content:`🎯 **配置完成！**

**当前配置**：
- 📊 文件格式：${S.value.name}
- 🛠️ 处理工具：${I.value.name}
- 📋 清洗规则：${Pe(V.value)}

✅ 配置已完成，现在请上传您的文件开始数据清洗！`,timestamp:new Date().toLocaleTimeString(),avatar:"/api/placeholder/32/32"}),Ee(()=>{const s=document.querySelector(".chat-messages");s&&(s.scrollTop=s.scrollHeight)}))},gt=()=>{F.value="running";const s=q.value.find(r=>r.id===V.value),i=P.value[0].name.toLowerCase();b.value.forEach((r,p)=>{p===0?(r.status="completed",r.progress=100,r.result=`成功上传文件: ${P.value[0].name}`):(r.status="pending",r.progress=0,r.result="")}),A.value.push({type:"assistant",content:`🚀 **开始6阶段数据治理流程**

**当前配置**：
- 📊 文件格式：${S.value.name}
- 🛠️ 处理工具：${I.value.name}
- 📋 清洗规则：${s.name}

**处理流程**：
1. 📄 **文档解析** - 识别字段设计和数据结构
2. 🔍 **字段分析** - 发现函数依赖和约束关系
3. 🔄 **重复检测** - 基于算法的精确去重
4. ❌ **空值筛查** - 智能空值模式分析
5. 🧹 **数据清洗** - 应用约束验证和规则
6. 📊 **结果呈现** - 生成清洗数据和质量报告

正在使用基于 **Desbordante** 框架的数据治理算法处理您的数据...`,timestamp:new Date().toLocaleTimeString(),avatar:"/api/placeholder/32/32"}),setTimeout(()=>{K(0,"文档解析",()=>yt(i,s))},1e3)},yt=(s,i)=>{let r=1e3,p=[],v=[];return i.id==="material-issue"&&(s.includes("来料")||s.includes("问题"))?(r=Math.floor(Math.random()*500)+200,p=["批号","供应商","物料名称","问题描述","发现日期","数量"],v=["发现3个批号格式不规范","2个供应商名称需要标准化"]):i.id==="8d-report"&&s.includes("8d")?(r=Math.floor(Math.random()*50)+10,p=["D1-团队","D2-问题描述","D3-临时措施","D4-根因","D5-纠正措施"],v=["发现5个问题描述格式需要规范","3个根因分析内容不完整"]):i.id==="quality-case"?(r=Math.floor(Math.random()*200)+50,p=["案例编号","问题分类","解决方案","效果评估","创建时间"],v=["发现2个案例编号格式错误","1个问题分类需要规范"]):(p=["ID","标题","描述","状态","创建时间"],v=["发现少量空值","部分格式需要标准化"]),p.value=p,`解析完成，检测到 ${r} 条记录，${p.length} 个字段。${v.length>0?"发现 "+v.length+" 个问题需要清洗。":""}`},Ze=s=>{const i=s.cleaningLogic;let r=[],p=0;if(i.removeEmpty){const v=Math.floor(Math.random()*50)+10;r.push(`移除了 ${v} 个空值`),p+=v}if(i.removeDuplicates){const v=Math.floor(Math.random()*30)+5;r.push(`移除了 ${v} 个重复项`),p+=v}if(i.trimWhitespace){const v=Math.floor(Math.random()*20)+5;r.push(`清理了 ${v} 个多余空格`),p+=v}if(i.standardizeFormat){const v=Math.floor(Math.random()*40)+15;r.push(`标准化了 ${v} 个格式`),p+=v}if(s.id==="material-issue"&&i.batchNumberPattern){const v=Math.floor(Math.random()*15)+3;r.push(`标准化了 ${v} 个批号格式`),p+=v}if(s.id==="8d-report"&&i.specialFields){const v=Math.floor(Math.random()*8)+2;r.push(`规范化了 ${v} 个8D步骤格式`),p+=v}return`清洗完成，共处理 ${p} 个问题：${r.join("，")}`},_t=s=>{let i=[],r=0;return s.id==="material-issue"?(i.push("供应商风险等级","批号模式分析","问题趋势统计"),r=15):s.id==="8d-report"?(i.push("问题分类统计","根因分析模式","措施有效性评估"),r=12):s.id==="quality-case"?(i.push("案例分类统计","解决方案模式","效果评估指标"),r=18):s.id==="inspection-report"?(i.push("检验项目统计","合格率分析","异常模式识别"),r=20):(i.push("数据分布统计","异常值检测","关联性分析"),r=10),`提取了 ${r} 个关键特征：${i.join("，")}`},ht=s=>{const i=Math.floor(Math.random()*20)+80;let r=[];return r.push(`数据质量评分：${i}%`),r.push("生成清洗报告"),r.push("创建统计图表"),s.id==="material-issue"?(r.push("生成供应商风险报告"),r.push("创建批号追溯表")):s.id==="8d-report"&&(r.push("生成8D完整性报告"),r.push("创建问题解决效率分析")),r.join("，")},K=(s,i,r)=>{const p=b.value[s];p.status="processing",W.value.push({timestamp:new Date().toLocaleTimeString(),level:"info",message:`开始${i}...`});let v=0;const z=setInterval(()=>{v+=Math.random()*20+5,p.progress=Math.min(v,100),p.progress>=100&&(clearInterval(z),p.status="completed",p.result=r(),W.value.push({timestamp:new Date().toLocaleTimeString(),level:"success",message:`${i}完成: ${p.result}`}),s<b.value.length-1?setTimeout(()=>{Dt(s+1)},500):Ct())},300)},Dt=s=>{const i=b.value[s].title,r=q.value.find(p=>p.id===V.value);switch(s){case 1:K(s,i,()=>Ze(r));break;case 2:K(s,i,()=>_t(r));break;case 3:K(s,i,()=>ht(r));break;case 4:K(s,i,()=>Ze(r));break;case 5:K(s,i,()=>"完成结果呈现，生成清洗数据和质量报告");break}},Ct=()=>{F.value="completed";const s=q.value.find(r=>r.id===V.value);Y.value.processedFiles=P.value.length,Y.value.cleanedRecords=Math.floor(Math.random()*1e3)+500,Y.value.processingTime=Math.floor(Math.random()*60)+30,Ft(),W.value.push({timestamp:new Date().toLocaleTimeString(),level:"success",message:"所有处理步骤已完成！"});const i={parse:b.value[0].details,field:b.value[1].details,duplicate:b.value[2].details,null:b.value[3].details,cleaning:b.value[4].details,presentation:b.value[5].details};setTimeout(async()=>{try{const r=await wt(i);l.value=r,A.value.push({type:"assistant",content:r.aiAnalysis,isMarkdown:!0,timestamp:new Date().toLocaleTimeString(),avatar:"/api/placeholder/32/32",reportData:r}),A.value.push({type:"assistant",content:`📋 **专业报告已生成**

**可下载文件**：
- 📊 清洗后数据.xlsx (2.5MB)
- 📄 质量分析报告.pdf (1.2MB)
- 📝 处理日志.txt (156KB)

**报告亮点**：
- ✅ 8D报告维度完整分析
- ✅ AI智能洞察和建议
- ✅ 技术实施效果评估
- ✅ 业务价值量化分析

点击"查看结果"标签页查看完整的专业报告！`,timestamp:new Date().toLocaleTimeString(),avatar:"/api/placeholder/32/32"})}catch(r){console.error("AI分析失败:",r);const p=b.value[5].details;A.value.push({type:"assistant",content:`✅ **6阶段数据治理完成！**

**处理结果摘要**：
- 📊 处理文件：${P.value[0].name}
- 🔧 使用规则：${s.name}
- 📈 清洗记录：${p?p.cleanedRecords:Y.value.cleanedRecords} 条
- ⏱️ 处理时间：${Y.value.processingTime} 秒
- 🎯 质量提升：${p?p.qualityImprovement:Math.floor(Math.random()*20)+15}%

点击"查看结果"标签页查看详细分析报告！`,timestamp:new Date().toLocaleTimeString(),avatar:"/api/placeholder/32/32"})}},2e3),g.success('数据处理完成！点击"查看结果"标签页查看详细结果。'),setTimeout(()=>{N.value="results"},2e3)},cs=s=>{const i=[];return s.id==="material-issue"?(i.push("• 标准化了所有批号格式"),i.push("• 统一了供应商名称规范"),i.push("• 规范了问题分类体系"),i.push("• 完善了数量单位标准")):s.id==="8d-report"?(i.push("• 规范了8D步骤格式"),i.push("• 完善了问题描述结构"),i.push("• 标准化了根因分析模板"),i.push("• 统一了措施描述格式")):s.id==="quality-case"?(i.push("• 标准化了案例编号格式"),i.push("• 规范了问题分类体系"),i.push("• 完善了解决方案结构"),i.push("• 统一了效果评估标准")):s.id==="inspection-report"?(i.push("• 标准化了检验项目名称"),i.push("• 验证了测量数据格式"),i.push("• 规范了判定结论表述"),i.push("• 提取了关键签名信息")):(i.push("• 清理了所有空值和重复项"),i.push("• 标准化了数据格式"),i.push("• 验证了数据完整性"),i.push("• 优化了数据结构")),i.join(`
`)},Tt=async s=>{try{const i=us(s),r=await fetch(`${Ne.baseURL}${Ne.endpoint}`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${Ne.apiKey}`},body:JSON.stringify({model:Ne.model,messages:[{role:"system",content:"你是一位专业的数据质量分析专家，擅长8D报告分析和数据治理。请用专业的语言分析数据清洗结果，并提供改进建议。"},{role:"user",content:i}],temperature:.7,max_tokens:2e3,stream:!1})});if(!r.ok)throw new Error(`AI API错误: ${r.status}`);return(await r.json()).choices[0].message.content}catch(i){return console.error("AI分析失败:",i),kt()}},us=s=>{var i,r,p,v,z,H,G,re,le,xe,Rt,zt,Mt,Vt,It,At,Pt,Lt,qt,Et,Nt,Ut,Bt,jt,Ot,Yt;return`
# 数据清洗结果分析请求

## 处理概况
- **原始记录数**: 1000条
- **清洗后记录数**: ${((i=s.presentation)==null?void 0:i.cleanedRecords)||950}条
- **质量提升**: ${((r=s.presentation)==null?void 0:r.qualityImprovement)||25}%
- **处理时间**: ${new Date().toLocaleString()}

## 各阶段详细结果

### 1. 文档解析阶段
- 识别字段数: ${((v=(p=s.parse)==null?void 0:p.fields)==null?void 0:v.length)||8}个
- 数据类型: ${((H=(z=s.parse)==null?void 0:z.dataTypes)==null?void 0:H.map(Ps=>Ps.detectedType).join(", "))||"文本, 数字, 日期"}
- 约束发现: ${((re=(G=s.parse)==null?void 0:G.constraints)==null?void 0:re.length)||3}个

### 2. 字段分析阶段
- 函数依赖: ${((xe=(le=s.field)==null?void 0:le.functionalDependencies)==null?void 0:xe.length)||3}个
- 唯一约束: ${((zt=(Rt=s.field)==null?void 0:Rt.uniqueConstraints)==null?void 0:zt.length)||2}个
- 空值字段: ${((Vt=(Mt=s.field)==null?void 0:Mt.nullableFields)==null?void 0:Vt.length)||4}个

### 3. 重复检测阶段
- 发现重复: ${((It=s.duplicate)==null?void 0:It.duplicatesFound)||45}条
- 重复组数: ${((Pt=(At=s.duplicate)==null?void 0:At.duplicateGroups)==null?void 0:Pt.length)||8}组
- 移除记录: ${((Lt=s.duplicate)==null?void 0:Lt.removedRecords)||35}条

### 4. 空值处理阶段
- 空值字段: ${((Et=(qt=s.null)==null?void 0:qt.nullFields)==null?void 0:Et.length)||4}个
- 处理空值: ${((Nt=s.null)==null?void 0:Nt.processedNulls)||120}个
- 填充策略: 智能填充和删除结合

### 5. 数据清洗阶段
- 应用规则: ${((Bt=(Ut=s.cleaning)==null?void 0:Ut.rulesApplied)==null?void 0:Bt.length)||5}个
- 发现违规: ${((jt=s.cleaning)==null?void 0:jt.violationsFound)||28}个
- 修正记录: ${((Ot=s.cleaning)==null?void 0:Ot.correctedRecords)||25}条
- 质量分数: ${((Yt=s.cleaning)==null?void 0:Yt.qualityScore)||85}/100

## 分析要求

请从以下维度进行专业分析：

### 8D报告维度评估
1. **D1-团队组建**: 数据治理团队配置建议
2. **D2-问题描述**: 数据质量问题识别和描述
3. **D3-临时措施**: 当前清洗措施的有效性
4. **D4-根因分析**: 数据质量问题的根本原因
5. **D5-永久措施**: 长期数据质量保障方案
6. **D6-措施实施**: 清洗规则的执行效果
7. **D7-预防措施**: 未来数据质量预防建议
8. **D8-团队表彰**: 数据治理成果总结

### 技术分析
- 清洗算法效果评估
- 数据质量提升分析
- 性能优化建议
- 风险点识别

### 业务影响
- 数据可用性改善
- 业务决策支持能力
- 合规性提升
- ROI评估

请用Markdown格式输出专业分析报告，包含图表建议和具体的改进措施。
`},kt=s=>`
# 数据清洗结果分析报告

## 📊 执行摘要

本次数据清洗处理取得了显著成效，通过6阶段专业数据治理流程，成功提升了数据质量。

### 🎯 关键成果
- ✅ **数据完整性**: 提升至85%以上
- ✅ **重复数据**: 减少95%以上
- ✅ **空值处理**: 100%覆盖处理
- ✅ **约束验证**: 发现并修复多项违规

## 🔍 8D报告维度分析

### D1-团队组建 ⭐⭐⭐⭐⭐
**评估**: 优秀
- 数据治理团队配置完善
- 技术工具选择合理
- 处理流程标准化

### D2-问题描述 ⭐⭐⭐⭐
**评估**: 良好
- 数据质量问题识别准确
- 重复数据和空值问题突出
- 约束违规需要关注

### D3-临时措施 ⭐⭐⭐⭐⭐
**评估**: 优秀
- 6阶段清洗流程有效
- 算法选择科学合理
- 处理结果可验证

### D4-根因分析 ⭐⭐⭐⭐
**评估**: 良好
- 数据源质量控制不足
- 录入规范需要加强
- 系统约束配置待优化

### D5-永久措施 ⭐⭐⭐
**评估**: 待改进
**建议**:
- 建立数据质量监控体系
- 实施数据录入规范
- 定期执行质量检查

### D6-措施实施 ⭐⭐⭐⭐⭐
**评估**: 优秀
- 清洗规则执行彻底
- 质量提升明显
- 处理效率高

### D7-预防措施 ⭐⭐⭐
**评估**: 待改进
**建议**:
- 源头数据质量控制
- 实时数据验证
- 定期质量评估

### D8-团队表彰 ⭐⭐⭐⭐⭐
**评估**: 优秀
- 技术方案先进
- 执行效果显著
- 为后续工作奠定基础

## 📈 技术分析

### 算法效果评估
- **TANE算法**: 函数依赖发现准确率95%+
- **去重算法**: 精确识别重复模式
- **约束验证**: 全面覆盖数据完整性检查

### 性能表现
- **处理速度**: 1000条记录/分钟
- **内存使用**: 优化良好
- **准确率**: 85%以上

## 🎯 改进建议

### 短期措施
1. **数据源头控制**: 加强录入验证
2. **实时监控**: 建立质量预警机制
3. **规则优化**: 根据业务调整清洗规则

### 长期规划
1. **自动化流程**: 建立定期清洗机制
2. **质量体系**: 完善数据治理框架
3. **团队建设**: 提升数据管理能力

## 📋 结论

本次数据清洗项目成功达成预期目标，为业务决策提供了高质量的数据基础。建议继续完善数据治理体系，确保数据质量的持续改进。
`,ps=s=>s?s.replace(/^### (.*$)/gim,"<h3>$1</h3>").replace(/^## (.*$)/gim,"<h2>$1</h2>").replace(/^# (.*$)/gim,"<h1>$1</h1>").replace(/\*\*(.*?)\*\*/g,"<strong>$1</strong>").replace(/\*(.*?)\*/g,"<em>$1</em>").replace(/```([\s\S]*?)```/g,"<pre><code>$1</code></pre>").replace(/`(.*?)`/g,"<code>$1</code>").replace(/\[([^\]]+)\]\(([^)]+)\)/g,'<a href="$2" target="_blank">$1</a>').replace(/^\- (.*$)/gim,"<li>$1</li>").replace(/(<li>.*<\/li>)/s,"<ul>$1</ul>").replace(/\n/g,"<br>").replace(/\|(.+)\|/g,(r,p)=>`<tr>${p.split("|").map(z=>`<td>${z.trim()}</td>`).join("")}</tr>`):"",wt=async s=>{var i,r,p,v,z,H,G,re;try{const le=await Tt(s);return{title:"数据清洗治理报告",timestamp:new Date().toLocaleString(),summary:{originalRecords:1e3,cleanedRecords:((i=s.presentation)==null?void 0:i.cleanedRecords)||950,qualityImprovement:((r=s.presentation)==null?void 0:r.qualityImprovement)||25,processingTime:Y.value.processingTime},stages:[{name:"文档解析",result:((p=s.parse)==null?void 0:p.summary)||"解析完成",details:s.parse},{name:"字段分析",result:((v=s.field)==null?void 0:v.summary)||"分析完成",details:s.field},{name:"重复检测",result:((z=s.duplicate)==null?void 0:z.summary)||"检测完成",details:s.duplicate},{name:"空值筛查",result:((H=s.null)==null?void 0:H.summary)||"筛查完成",details:s.null},{name:"数据清洗",result:((G=s.cleaning)==null?void 0:G.summary)||"清洗完成",details:s.cleaning},{name:"结果呈现",result:((re=s.presentation)==null?void 0:re.summary)||"呈现完成",details:s.presentation}],aiAnalysis:le,recommendations:bt(s),downloadLinks:xt(s)}}catch(le){return console.error("生成报告失败:",le),ms()}},bt=s=>[{priority:"high",category:"数据源头控制",description:"建立数据录入验证机制，从源头保证数据质量",impact:"预计可减少70%的数据质量问题"},{priority:"medium",category:"实时监控",description:"建立数据质量实时监控预警系统",impact:"及时发现和处理数据异常"},{priority:"medium",category:"定期清洗",description:"建立定期数据清洗机制，保持数据质量",impact:"持续维护数据质量水平"}],xt=s=>[{name:"清洗后数据.xlsx",type:"excel",size:"2.5MB",url:"#download-cleaned-data"},{name:"质量报告.pdf",type:"pdf",size:"1.2MB",url:"#download-quality-report"},{name:"处理日志.txt",type:"text",size:"156KB",url:"#download-process-log"}],ms=s=>({title:"数据清洗治理报告",timestamp:new Date().toLocaleString(),summary:{originalRecords:1e3,cleanedRecords:950,qualityImprovement:25,processingTime:Y.value.processingTime},aiAnalysis:kt(),recommendations:bt(),downloadLinks:xt()}),vs=s=>({excel:"el-icon-document",pdf:"el-icon-document-copy",text:"el-icon-tickets"})[s]||"el-icon-document",fs=s=>{g.success(`正在下载 ${s.name}...`),console.log("下载文件:",s)},$e=s=>new Promise((i,r)=>{try{if(console.log("📖 开始读取文件:",s),!s){r(new Error("文件对象为空"));return}if(!(s instanceof File)&&!(s instanceof Blob)){r(new Error("无效的文件对象类型"));return}if(!s.name&&!(s instanceof Blob)){r(new Error("文件名缺失"));return}if(s.size>50*1024*1024){r(new Error("文件大小超过50MB限制"));return}if(s.size===0){r(new Error("文件为空"));return}console.log("📄 文件验证通过，开始读取内容...");const p=new FileReader;p.onload=H=>{try{const G=H.target.result;if(!G){r(new Error("文件内容为空"));return}console.log("✅ 文件读取成功，内容长度:",G.length);const re=s.name||"unknown",le=Le(re);if(le==="text"||le==="csv")i(G);else{const xe=`文件名: ${re}
文件大小: ${s.size} bytes
文件类型: ${s.type||"未知"}
最后修改: ${s.lastModified?new Date(s.lastModified).toLocaleString():"未知"}`;i(xe)}}catch(G){console.error("❌ 文件内容处理失败:",G),r(new Error(`文件内容处理失败: ${G.message}`))}},p.onerror=H=>{console.error("❌ 文件读取错误:",H),r(new Error("文件读取失败"))},p.onabort=()=>{console.error("❌ 文件读取被中断"),r(new Error("文件读取被中断"))};const v=s.name||"unknown",z=Le(v);console.log("📋 文件类型:",z,"开始读取..."),p.readAsText(s,"UTF-8")}catch(p){console.error("❌ 文件读取启动失败:",p),r(new Error(`文件读取启动失败: ${p.message}`))}}),Le=s=>{if(!s||typeof s!="string")return"text";try{const i=s.split(".").pop().toLowerCase();return i&&{xlsx:"excel",xls:"excel",docx:"word",doc:"word",pdf:"pdf",txt:"text",csv:"csv",json:"json",xml:"xml",html:"html",htm:"html"}[i]||"text"}catch(i){return console.warn("文件类型检测失败:",i),"text"}},Ft=()=>{const s=P.value[0].name.toLowerCase();s.includes("来料")&&s.includes("问题")?te.value=Array.from({length:50},(i,r)=>({id:r+1,batchNumber:`LOT${String(r+1).padStart(4,"0")}`,supplier:["供应商A","供应商B","供应商C"][r%3],problemType:["尺寸偏差","外观缺陷","性能不符"][r%3],quantity:Math.floor(Math.random()*1e3)+100,reportDate:new Date(2025,1,Math.floor(Math.random()*28)+1).toLocaleDateString(),status:["已处理","处理中","待处理"][r%3],quality:Math.floor(Math.random()*100)+1,type:"material-issue"})):s.includes("8d")?te.value=Array.from({length:20},(i,r)=>({id:r+1,problemDescription:`问题描述 ${r+1}`,rootCause:`根因分析 ${r+1}`,correctiveAction:`纠正措施 ${r+1}`,preventiveAction:`预防措施 ${r+1}`,responsible:`责任人${r+1}`,dueDate:new Date(2025,2,Math.floor(Math.random()*30)+1).toLocaleDateString(),status:["已完成","进行中","计划中"][r%3],quality:Math.floor(Math.random()*100)+1,type:"8d-report"})):te.value=Array.from({length:30},(i,r)=>({id:r+1,title:`数据项 ${r+1}`,description:`描述信息 ${r+1}`,category:["类别A","类别B","类别C"][r%3],value:Math.floor(Math.random()*1e3),date:new Date(2025,1,Math.floor(Math.random()*28)+1).toLocaleDateString(),status:["正常","异常","待确认"][r%3],quality:Math.floor(Math.random()*100)+1,type:"general"})),fe.value=[...te.value],ie()},St=s=>{const i=s.name.toLowerCase();let r="";i.includes("来料")&&i.includes("问题")&&i.includes("批号")?(r=`🔍 **文件分析完成**

我检测到这是一个来料问题批号数据文件。基于文件名分析，我为您推荐以下处理方案：

**建议配置**：
- 📊 文件格式：Excel文件
- 🛠️ 处理工具：Pandas (数据处理专家)
- 📋 清洗规则：来料问题数据专用

**预期清洗内容**：
✅ 批号格式标准化
✅ 供应商信息验证
✅ 问题分类规范
✅ 日期时间统一
✅ 数量单位标准化

点击左侧对应的选项来应用这些建议，或者点击"生成建议"获取更详细的处理方案。`,setTimeout(()=>{const p=ue.value.find(v=>v.type==="excel");if(p){S.value=p,V.value="material-issue";const v=p.tools.find(z=>z.id==="pandas");v&&(I.value=v),A.value.push({type:"assistant",content:"✅ 已自动应用推荐配置！正在开始数据处理...",timestamp:new Date().toLocaleTimeString(),avatar:"/api/placeholder/32/32"})}},2e3)):i.includes("8d")||i.includes("复盘")?(r=`🔍 **文件分析完成**

我检测到这是一个8D问题解决报告文档。基于文件名分析，我为您推荐以下处理方案：

**建议配置**：
- 📄 文件格式：Word文档
- 🛠️ 处理工具：Python-docx (文档内容提取)
- 📋 清洗规则：8D报告专用

**预期清洗内容**：
✅ 8D步骤完整性检查
✅ 问题描述标准化
✅ 根因分析格式化
✅ 纠正措施验证
✅ 预防措施规范

点击左侧对应的选项来应用这些建议，或者点击"生成建议"获取更详细的处理方案。`,setTimeout(()=>{const p=ue.value.find(v=>v.type==="word");if(p){S.value=p,V.value="8d-report";const v=p.tools.find(z=>z.id==="python-docx");v&&(I.value=v),A.value.push({type:"assistant",content:"✅ 已自动应用推荐配置！正在开始数据处理...",timestamp:new Date().toLocaleTimeString(),avatar:"/api/placeholder/32/32"})}},2e3)):r=`🔍 **文件分析完成**

文件：${s.name}
大小：${We(null,null,s.size)}

我已完成初步分析，请选择合适的文件格式和处理工具来开始数据清洗。如需智能建议，请点击"生成建议"按钮。`,A.value.push({type:"assistant",content:r,timestamp:new Date().toLocaleTimeString(),avatar:"/api/placeholder/32/32"}),Ee(()=>{const p=document.querySelector(".chat-messages");p&&(p.scrollTop=p.scrollHeight)})},gs=()=>{let s="";if(P.value.length>0){const i=P.value[0].name.toLowerCase();i.includes("来料")&&i.includes("问题")&&i.includes("批号")?s=`🎯 **智能识别**: 检测到来料问题批号数据文件

**推荐处理方案**:
- 文件格式: Excel文件 (.xlsx)
- 处理工具: Pandas (Python数据处理)
- 规则类型: 来料问题数据专用清洗

**针对性清洗建议**:
1. 批号格式标准化 (统一批号命名规范)
2. 供应商信息验证 (检查供应商代码完整性)
3. 问题分类规范 (标准化问题类型描述)
4. 日期时间统一 (统一日期格式为YYYY-MM-DD)
5. 数量单位标准化 (统一计量单位)

**预期效果**: 提高数据一致性，便于质量追溯分析`:i.includes("8d")||i.includes("复盘")?s=`🎯 **智能识别**: 检测到8D问题解决报告文档

**推荐处理方案**:
- 文件格式: Word文档 (.docx)
- 处理工具: Python-docx (文档内容提取)
- 规则类型: 8D报告专用清洗

**针对性清洗建议**:
1. 8D步骤完整性检查 (确保8个步骤完整)
2. 问题描述标准化 (统一问题描述格式)
3. 根因分析格式化 (结构化根因分析内容)
4. 纠正措施验证 (检查措施可执行性)
5. 预防措施规范 (标准化预防措施描述)

**预期效果**: 结构化8D报告内容，提升问题解决效率`:!S.value||!I.value||!V.value?s=`💡 **智能建议**: 请先选择文件格式、处理工具和规则类型，我将为您生成个性化的处理建议。

**当前已上传文件**: ${i}
**建议操作**:
1. 点击左侧对应的文件格式卡片
2. 选择合适的处理工具
3. 选择相应的清洗规则类型`:s=`基于您的选择：

**文件格式**: ${S.value.name}
**处理工具**: ${I.value.name}
**规则类型**: ${Pe(V.value)}

**建议的处理流程**:
1. 使用${I.value.name}读取${S.value.name}文件
2. 应用${Pe(V.value)}规则进行清洗
3. 验证清洗结果的完整性和准确性
4. 导出清洗后的数据

**推荐配置**:
- 内存限制: 根据文件大小调整
- 处理模式: 批量处理
- 输出格式: 保持原格式或转换为标准格式`}else s=`💡 **使用提示**: 请先上传文件，我将基于文件内容为您提供智能化的清洗建议。

**支持的文件类型**:
- Excel文件 (.xlsx, .xls) - 适合表格数据清洗
- Word文档 (.doc, .docx) - 适合文档内容提取
- CSV文件 (.csv) - 适合大数据量处理
- PDF文件 (.pdf) - 适合报告内容提取`;A.value.push({type:"assistant",content:s,timestamp:new Date().toLocaleTimeString()})},ys=()=>{if(!S.value||!I.value||!V.value){g.warning("请先完成所有配置选择");return}const s={fileFormat:S.value,tool:I.value,ruleType:V.value,timestamp:new Date().toISOString()};localStorage.setItem("dataCleaningConfig",JSON.stringify(s)),g.success("配置已保存")},_s=s=>{nt.value=s.name},qe=s=>{it.value=s.id,he.value={...s},De.value=!1},hs=()=>{const s={id:Date.now(),name:"新建模板",description:"请输入模板描述",type:"custom",applicableFormats:[],rules:[],createdAt:new Date().toISOString().split("T")[0]};be.value.push(s),qe(s),De.value=!0},Ds=s=>{const i={...s,id:Date.now(),name:s.name+" (副本)",type:"custom",createdAt:new Date().toISOString().split("T")[0]};be.value.push(i),g.success("模板已复制")},Cs=s=>{qe(s),De.value=!0},Ts=()=>{De.value=!0},ks=()=>{if(!he.value.name.trim()){g.warning("请输入模板名称");return}const s=be.value.findIndex(i=>i.id===he.value.id);s>-1&&(be.value[s]={...he.value}),De.value=!1,g.success("模板已保存")},ws=()=>{he.value.rules.push({name:"新规则",description:"请输入规则描述",type:"cleaning"})},bs=s=>{he.value.rules.splice(s,1)},xs=s=>{Oe.value=s,Ye.value=null},Fs=()=>{const s=rt.value.find(i=>i.id===Oe.value);return(s==null?void 0:s.tools)||[]},Ss=s=>{Ye.value=s},Rs=s=>({deployed:"success",available:"info",installing:"warning",error:"danger"})[s]||"info",zs=s=>({deployed:"工具已部署并可以使用",available:"工具可用，点击部署按钮进行安装",installing:"工具正在安装中，请稍候",error:"工具部署失败，请检查配置"})[s]||"未知状态",Ms=s=>{Je.value=!0,g.info(`正在部署工具: ${s.name}`),setTimeout(()=>{s.status="deployed",Je.value=!1,g.success(`工具 ${s.name} 部署成功`)},3e3)},Vs=s=>{g.info(`配置工具: ${s.name}`)},Is=s=>{g.info(`测试工具连接: ${s.name}`),setTimeout(()=>{g.success("连接测试成功")},1e3)},As=()=>{g.info("添加新工具功能开发中...")};return vt(),es(),{activeTab:N,fileList:P,processingStatus:F,currentStep:h,processingProgress:U,progressStatus:B,currentStepDescription:oe,helpDialogVisible:ce,selectedStructureFormat:$,fieldMappings:pe,detectedFields:me,structurePreview:ze,previewColumns:ke,fileFormats:ue,selectedFileFormat:S,selectedTool:I,selectedRuleType:V,ruleTypes:q,activeTemplateCategory:nt,selectedTemplateId:it,systemTemplates:Jt,customTemplates:be,isEditingTemplate:De,selectedToolCategory:Oe,selectedToolDetail:Ye,deployingTool:Je,toolCategories:rt,selectedRuleTemplate:ee,activeRuleTab:Me,ruleTemplates:ve,customTemplate:o,processedRecords:_,appliedRules:C,processingTime:O,detectedIssues:Be,emptyValueIssues:lt,duplicateIssues:st,otherIssues:at,queryForm:Q,resultStats:Y,allData:te,filteredData:fe,paginatedData:ot,currentPage:Ve,pageSize:Ie,selectedRecords:_e,detailDialogVisible:je,selectedRecord:we,uploadStatus:Wt,uploadStatusText:Kt,processingStatusText:Ht,switchTab:Qt,handleFileChange:nl,formatFileSize:We,removeFile:il,analyzeFileStructure:Ke,onStructureFormatChange:Ge,saveStructureTemplate:fl,selectTemplate:qe,applyTemplate:gl,previewTemplate:yl,deleteTemplate:_l,createCustomTemplate:ut,addCustomRule:hl,removeCustomRule:Dl,saveCustomTemplate:Cl,resetCustomTemplate:Tl,previewCustomTemplate:kl,startMonitoring:wl,stopProcessing:Ml,viewLogs:Vl,fixIssue:Ae,ignoreIssue:bl,removeDuplicate:xl,mergeDuplicate:Fl,viewIssueDetail:Sl,getIssueTagType:Rl,getSeverityTagType:zl,searchData:Il,resetQuery:Al,updatePaginatedData:ie,handleSizeChange:Pl,handleCurrentChange:Ll,handleSelectionChange:ql,viewDetail:El,cleanRecord:Nl,downloadRecord:Ul,batchClean:Bl,batchExport:jl,closeDetailDialog:pt,cleanSelectedRecord:Ol,exportSelectedRecord:Yl,exportResults:Jl,getTypeTagType:Wl,getTypeLabel:Kl,getStatusTagType:Hl,getStatusLabel:Ql,getQualityColor:Gl,selectFileFormat:ts,selectFileFormatAndNotifyAI:ls,selectToolFromChat:ss,selectRuleFromChat:as,selectTool:os,selectRuleType:ns,getToolCategoryType:is,getRuleTypeName:Pe,getChatPlaceholder:rs,getContextualCommands:ds,generateSuggestions:gs,generateSmartAnalysis:St,checkConfigurationComplete:Xe,onConfigurationComplete:ft,performDataParsing:yt,performDataCleaning:Ze,performInformationExtraction:_t,performResultSummary:ht,generateImprovementSummary:cs,performAIAnalysis:Tt,renderMarkdown:ps,generateCleaningReport:wt,getDownloadIcon:vs,downloadFile:fs,readFileContent:$e,getFileType:Le,identify8DReport:He,setup8DConfiguration:dt,process8DReport:Qe,generate8DFinalReport:ct,is8DReport:Se,eightDAnalysisResult:ge,eightDIdentification:f,test8DFlow:ul,generateTestReport:pl,testFileReading:ml,clearDebugData:vl,latestCleaningReport:l,startRealDataProcessing:gt,processStep:K,processNextStep:Dt,completeProcessing:Ct,generateMockResults:Ft,saveCurrentConfig:ys,handleTemplateCategoryChange:_s,createNewTemplate:hs,copyTemplate:Ds,editTemplate:Cs,enableEditMode:Ts,saveTemplate:ks,addRule:ws,removeRule:bs,selectToolCategory:xs,getToolsByCategory:Fs,selectToolDetail:Ss,getToolStatusType:Rs,getStatusDescription:zs,deployTool:Ms,configureTool:Vs,testTool:Is,addNewTool:As,quickUpload:Xl,showHelp:Zl,contactSupport:$l,saveProgress:mt,loadProgress:vt,tabList:ne,cleaningTemplates:t,chatMessages:A,chatInput:de,chatLoading:D,quickCommands:J,processSteps:b,processLogs:W,originalFile:L,cleanedFile:R,cleaningStats:Z,appliedTemplates:ye,reportData:Ue,activeKnowledgeTab:j,dataPatterns:Ce,knowledgeRules:Re,qualityMetrics:Te,selectTemplate:qe,sendMessage:Xt,clearChat:Zt,getStepStatus:$t,resetProcess:el,generateReport:tl,saveReport:ll,getSeverityType:sl,extractKnowledge:al,getTrendIcon:ol}}},$s={class:"data-cleaning-final"},ea={class:"sub-menu"},ta={class:"sub-menu-content"},la=["onClick"],sa={class:"menu-icon"},aa={class:"menu-text"},oa={class:"menu-title"},na={class:"menu-desc"},ia={class:"page-content"},ra={class:"tab-content cleaning-workspace"},da={class:"workspace-layout"},ca={class:"left-panel"},ua={class:"panel-section"},pa={class:"section-header"},ma={class:"config-progress"},va={class:"progress-steps"},fa={class:"step-icon"},ga={key:0,class:"el-icon-document"},ya={key:1,class:"el-icon-check"},_a={class:"step-icon"},ha={key:0,class:"el-icon-setting"},Da={key:1,class:"el-icon-check"},Ca={class:"step-icon"},Ta={key:0,class:"el-icon-menu"},ka={key:1,class:"el-icon-check"},wa={class:"step-icon"},ba={key:0,class:"el-icon-upload"},xa={key:1,class:"el-icon-check"},Fa={class:"format-selection"},Sa={class:"format-grid"},Ra=["onClick"],za={class:"format-info"},Ma={key:0,class:"selection-status"},Va={class:"status-item"},Ia={class:"selected-format"},Aa={class:"format-info"},Pa={key:1,class:"file-upload-area"},La={class:"config-summary"},qa={class:"config-item"},Ea={class:"config-item"},Na={class:"config-item"},Ua={class:"el-upload__text"},Ba={class:"el-upload__tip"},ja={key:2,class:"config-incomplete-hint"},Oa={class:"config-checklist"},Ya={key:0,class:"file-list"},Ja={class:"file-info"},Wa={class:"file-name"},Ka={class:"file-size"},Ha={class:"file-actions"},Qa={class:"center-panel"},Ga={class:"chat-container"},Xa={class:"chat-header"},Za={class:"header-actions"},$a={key:0,class:"config-status"},eo={key:0,class:"status-item"},to={key:1,class:"status-item"},lo={key:2,class:"status-item"},so={class:"chat-messages",ref:"chatMessagesContainer"},ao={class:"message-avatar"},oo={class:"message-content"},no=["innerHTML"],io=["innerHTML"],ro={key:2,class:"tool-selection-chat"},co={class:"tools-grid"},uo=["onClick"],po={class:"tool-header"},mo={class:"tool-desc"},vo={class:"tool-features"},fo={key:3,class:"rule-selection-chat"},go={class:"rules-grid"},yo=["onClick"],_o={class:"rule-header"},ho={class:"rule-desc"},Do={class:"rule-preview"},Co={class:"message-time"},To={class:"chat-input"},ko={class:"input-actions"},wo={class:"quick-commands"},bo={class:"right-panel"},xo={class:"process-container"},Fo={class:"process-header"},So={class:"process-steps"},Ro={class:"step-number"},zo={class:"step-content"},Mo={key:0,class:"step-progress"},Vo={class:"progress-text"},Io={key:1,class:"step-result"},Ao={class:"process-logs"},Po={class:"log-container",ref:"logContainer"},Lo={class:"log-time"},qo={class:"log-message"},Eo={class:"tab-content template-rules-workspace"},No={class:"template-rules-layout"},Uo={class:"card-header"},Bo={class:"template-categories"},jo={class:"template-list"},Oo=["onClick"],Yo={class:"template-header"},Jo={class:"template-description"},Wo={class:"template-meta"},Ko={class:"meta-item"},Ho={class:"meta-item"},Qo={class:"template-actions"},Go={class:"template-list"},Xo=["onClick"],Zo={class:"template-header"},$o={class:"template-description"},en={class:"template-meta"},tn={class:"meta-item"},ln={class:"meta-item"},sn={class:"template-actions"},an={class:"card-header"},on={class:"header-actions"},nn={class:"template-detail-content"},rn={class:"detail-section"},dn={class:"detail-section"},cn={class:"rules-editor"},un={class:"rule-content"},pn={key:0,class:"rule-actions"},mn={class:"tab-content results-workspace"},vn={key:0,class:"debug-info",style:{padding:"20px",background:"#f0f0f0","margin-bottom":"20px"}},fn={style:{display:"grid","grid-template-columns":"1fr 1fr",gap:"15px","margin-bottom":"15px"}},gn={style:{"margin-top":"15px"}},yn={key:1,class:"ai-analysis-report"},_n={class:"report-header"},hn={class:"report-meta"},Dn={class:"report-time"},Cn={class:"report-content"},Tn={class:"executive-summary"},kn={class:"summary-metric"},wn={class:"metric-value"},bn={class:"summary-metric"},xn={class:"metric-value"},Fn={class:"summary-metric"},Sn={class:"metric-value"},Rn={class:"ai-analysis-content"},zn=["innerHTML"],Mn={key:0,class:"recommendations"},Vn={class:"recommendation-list"},In={class:"rec-header"},An={class:"rec-description"},Pn={class:"rec-impact"},Ln={key:1,class:"download-section"},qn={class:"download-card"},En={class:"download-icon"},Nn={class:"download-info"},Un={class:"results-overview"},Bn={class:"card-header"},jn={class:"header-actions"},On={class:"file-comparison"},Yn={class:"comparison-item"},Jn={class:"file-info"},Wn={class:"file-details"},Kn={class:"file-name"},Hn={class:"file-stats"},Qn={class:"quality-indicators"},Gn={class:"comparison-item"},Xn={class:"file-info"},Zn={class:"file-details"},$n={class:"file-name"},ei={class:"file-stats"},ti={class:"quality-indicators"},li={class:"cleaning-stats"},si={class:"stat-card"},ai={class:"stat-content"},oi={class:"stat-card"},ni={class:"stat-content"},ii={class:"stat-card"},ri={class:"stat-content"},di={class:"stat-card"},ci={class:"stat-content"},ui={class:"applied-templates"},pi={class:"template-header"},mi={class:"template-desc"},vi={class:"template-rules"},fi={class:"rule-name"},gi={class:"rule-effect"},yi={class:"report-generation"},_i={class:"card-header"},hi={class:"header-actions"},Di={class:"report-content"},Ci={class:"report-preview"},Ti={class:"report-header"},ki={class:"report-meta"},wi={class:"report-section"},bi={class:"summary-content"},xi={class:"tab-content governance-workspace"},Fi={class:"governance-layout"},Si={class:"knowledge-section"},Ri={class:"card-header"},zi={class:"knowledge-content"},Mi={class:"patterns-list"},Vi={class:"pattern-stats"},Ii={class:"rules-library"},Ai={class:"rule-effectiveness"},Pi={class:"metrics-dashboard"},Li={class:"metric-card"},qi={class:"metric-value"},Ei={class:"tab-content tech-tools-workspace"},Ni={class:"tech-tools-layout"},Ui={class:"category-list"},Bi=["onClick"],ji={class:"category-header"},Oi={class:"category-desc"},Yi={class:"card-header"},Ji={class:"tools-grid"},Wi=["onClick"],Ki={class:"tool-header"},Hi={class:"tool-icon"},Qi={class:"tool-info"},Gi={class:"tool-description"},Xi={class:"tool-meta"},Zi={class:"meta-item"},$i={class:"meta-item"},er={class:"tool-actions"},tr={class:"tool-detail-content"},lr={class:"detail-header"},sr={class:"tool-avatar"},ar={class:"detail-section"},or={class:"detail-section"},nr={class:"tech-tags"},ir={class:"detail-section"},rr={class:"deployment-status"},dr={class:"status-desc"},cr={class:"detail-section"},ur={class:"config-params"},pr={class:"detail-actions"},mr={class:"tab-content"},vr={class:"card-header"},fr={key:0,class:"file-preview"},gr={class:"card-header"},yr={class:"structure-formats"},_r={key:0,class:"field-mapping"},hr={key:1,class:"structure-preview"},Dr={class:"tab-content"},Cr={class:"card-header"},Tr={class:"template-list"},kr=["onClick"],wr={class:"template-header"},br={class:"template-desc"},xr={class:"template-stats"},Fr={class:"template-actions"},Sr={class:"card-header"},Rr={class:"template-form"},zr={class:"rules-config"},Mr={class:"rule-item"},Vr={class:"rule-item"},Ir={class:"rule-item"},Ar={class:"rule-item"},Pr={class:"rule-item"},Lr={class:"rule-item"},qr={class:"rule-item"},Er={class:"rule-item"},Nr={class:"custom-rules"},Ur={class:"template-actions"},Br={class:"tab-content"},jr={class:"card-header"},Or={class:"process-steps"},Yr={key:0,class:"progress-info"},Jr={class:"progress-desc"},Wr={class:"processing-details"},Kr={class:"monitor-actions"},Hr={class:"card-header"},Qr={class:"issue-list"},Gr={class:"issue-header"},Xr={class:"issue-field"},Zr={class:"issue-details"},$r={class:"issue-actions"},ed={key:0,class:"no-issues"},td={class:"card-header"},ld={class:"issue-list"},sd={class:"issue-header"},ad={class:"issue-field"},od={class:"issue-details"},nd={class:"issue-actions"},id={key:0,class:"no-issues"},rd={class:"card-header"},dd={class:"tab-content"},cd={class:"card-header"},ud={class:"query-conditions"},pd={class:"result-stats"},md={class:"card-header"},vd={style:{"margin-left":"8px"}},fd={class:"pagination-wrapper"},gd={key:0,class:"record-detail"},yd={class:"record-content"},_d={key:0,class:"record-issues"},hd={class:"dialog-footer"},Dd={class:"quick-actions"},Cd={class:"dialog-footer"};function Td(N,t,A,l,Se,ge){var ke,ee,Me,ve;const f=x("el-button"),de=x("el-upload"),D=x("el-tag"),J=x("el-input"),b=x("el-progress"),W=x("el-tab-pane"),P=x("el-tabs"),F=x("el-card"),h=x("el-col"),U=x("el-form-item"),B=x("el-option"),oe=x("el-select"),ce=x("el-form"),L=x("el-row"),R=x("el-table-column"),Z=x("el-table"),ye=x("el-radio"),Ue=x("el-radio-group"),j=x("el-checkbox"),Ce=x("el-checkbox-group"),Re=x("Plus"),Te=x("el-icon"),ne=x("el-step"),ue=x("el-steps"),S=x("el-statistic"),I=x("el-date-picker"),V=x("el-pagination"),q=x("el-descriptions-item"),$=x("el-descriptions"),pe=x("el-dialog"),me=x("el-tooltip"),ze=x("QuestionFilled");return u(),m("div",$s,[t[231]||(t[231]=Gs('<div class="page-header" data-v-af5a01a2><div class="header-background" data-v-af5a01a2></div><div class="header-content" data-v-af5a01a2><div class="header-main" data-v-af5a01a2><div class="header-icon" data-v-af5a01a2><i class="el-icon-data-analysis" style="font-size:32px;" data-v-af5a01a2></i></div><div class="header-text" data-v-af5a01a2><h1 data-v-af5a01a2>数据清洗治理系统</h1><p data-v-af5a01a2>智能化数据处理与质量管控平台 | 6阶段处理流程 | AI驱动</p><div class="header-stats" data-v-af5a01a2><span class="stat-item" data-v-af5a01a2><i class="el-icon-document" style="font-size:14px;" data-v-af5a01a2></i> 已处理 1,250 条记录 </span><span class="stat-item" data-v-af5a01a2><i class="el-icon-circle-check" style="font-size:14px;" data-v-af5a01a2></i> 质量评分 95% </span></div></div></div></div></div>',1)),e("div",ea,[e("div",ta,[(u(!0),m(T,null,k(l.tabList,o=>(u(),m("div",{key:o.key,class:w(["menu-item",{active:l.activeTab===o.key}]),onClick:_=>l.switchTab(o.key)},[e("div",sa,[e("i",{class:w(o.iconClass),style:{"font-size":"20px"}},null,2)]),e("div",aa,[e("span",oa,c(o.title),1),e("span",na,c(o.description),1)])],10,la))),128))])]),e("div",ia,[se(e("div",ra,[e("div",da,[e("div",ca,[e("div",ua,[e("div",pa,[t[29]||(t[29]=e("h3",null,[e("i",{class:"el-icon-upload"}),d(" 智能文件上传")],-1)),a(f,{type:"success",size:"small",onClick:l.saveCurrentConfig},{default:n(()=>t[28]||(t[28]=[e("i",{class:"el-icon-document-add",style:{"font-size":"14px","margin-right":"4px"}},null,-1),d(" 保存配置 ")])),_:1,__:[28]},8,["onClick"])]),e("div",ma,[t[34]||(t[34]=e("h4",null,"配置进度",-1)),e("div",va,[e("div",{class:w(["step",{active:l.selectedFileFormat,completed:l.selectedFileFormat}])},[e("div",fa,[l.selectedFileFormat?(u(),m("i",ya)):(u(),m("i",ga))]),t[30]||(t[30]=e("span",null,"选择格式",-1))],2),e("div",{class:w(["step",{active:l.selectedFileFormat&&!l.selectedTool,completed:l.selectedTool}])},[e("div",_a,[l.selectedTool?(u(),m("i",Da)):(u(),m("i",ha))]),t[31]||(t[31]=e("span",null,"选择工具",-1))],2),e("div",{class:w(["step",{active:l.selectedTool&&!l.selectedRuleType,completed:l.selectedRuleType}])},[e("div",Ca,[l.selectedRuleType?(u(),m("i",ka)):(u(),m("i",Ta))]),t[32]||(t[32]=e("span",null,"选择规则",-1))],2),e("div",{class:w(["step",{active:l.selectedRuleType&&(!l.fileList||l.fileList.length===0),completed:l.fileList&&l.fileList.length>0}])},[e("div",wa,[!l.fileList||l.fileList.length===0?(u(),m("i",ba)):(u(),m("i",xa))]),t[33]||(t[33]=e("span",null,"上传文件",-1))],2)])]),e("div",Fa,[t[35]||(t[35]=e("h4",null,"选择文件格式",-1)),e("div",Sa,[(u(!0),m(T,null,k(l.fileFormats,o=>{var _;return u(),m("div",{key:o.type,class:w(["format-card",{active:((_=l.selectedFileFormat)==null?void 0:_.type)===o.type}]),onClick:C=>l.selectFileFormatAndNotifyAI(o)},[e("div",{class:"format-icon",style:Fe({color:o.color})},[e("i",{class:w(o.icon)},null,2)],4),e("div",za,[e("h5",null,c(o.name),1),e("p",null,c(o.extensions.join(", ")),1)])],10,Ra)}),128))])]),l.selectedFileFormat?(u(),m("div",Ma,[e("div",Va,[t[36]||(t[36]=e("h4",null,"当前选择",-1)),e("div",Ia,[e("div",{class:"format-icon",style:Fe({color:l.selectedFileFormat.color})},[e("i",{class:w(l.selectedFileFormat.icon)},null,2)],4),e("div",Aa,[e("h5",null,c(l.selectedFileFormat.name),1),e("p",null,c(l.selectedFileFormat.extensions.join(", ")),1)])]),t[37]||(t[37]=e("p",{class:"hint-text"},"请在右侧AI助手中继续配置处理规则",-1))])])):M("",!0),l.checkConfigurationComplete()?(u(),m("div",Pa,[t[41]||(t[41]=e("h4",null,"上传文件",-1)),e("div",La,[e("div",qa,[e("i",{class:"el-icon-document",style:Fe({color:(ke=l.selectedFileFormat)==null?void 0:ke.color})},null,4),e("span",null,c((ee=l.selectedFileFormat)==null?void 0:ee.name),1)]),e("div",Ea,[e("i",{class:"el-icon-setting",style:Fe({color:(Me=l.selectedTool)==null?void 0:Me.color})},null,4),e("span",null,c((ve=l.selectedTool)==null?void 0:ve.name),1)]),e("div",Na,[t[38]||(t[38]=e("i",{class:"el-icon-check"},null,-1)),e("span",null,c(l.getRuleTypeName(l.selectedRuleType)),1)])]),a(de,{class:"upload-demo",drag:"","auto-upload":!1,multiple:"","file-list":l.fileList,onChange:l.handleFileChange,accept:l.selectedFileFormat?l.selectedFileFormat.extensions.join(","):"*"},{tip:n(()=>{var o;return[e("div",Ba," 支持 "+c((o=l.selectedFileFormat)==null?void 0:o.extensions.join("、"))+" 格式，单个文件不超过50MB ",1)]}),default:n(()=>{var o;return[t[40]||(t[40]=e("i",{class:"el-icon-upload",style:{"font-size":"48px",color:"#409eff"}},null,-1)),e("div",Ua,[d(" 将"+c((o=l.selectedFileFormat)==null?void 0:o.name)+"文件拖到此处，或",1),t[39]||(t[39]=e("em",null,"点击上传",-1))])]}),_:1,__:[40]},8,["file-list","onChange","accept"])])):(u(),m("div",ja,[t[48]||(t[48]=e("div",{class:"hint-icon"},[e("i",{class:"el-icon-warning",style:{"font-size":"48px",color:"#e6a23c"}})],-1)),t[49]||(t[49]=e("h4",null,"请先完成配置",-1)),t[50]||(t[50]=e("p",null,"请在右侧AI助手中依次选择：",-1)),e("ul",Oa,[e("li",{class:w({completed:l.selectedFileFormat})},[e("i",{class:w(l.selectedFileFormat?"el-icon-check":"el-icon-circle-check")},null,2),t[42]||(t[42]=d(" 文件格式 "))],2),e("li",{class:w({completed:l.selectedTool})},[e("i",{class:w(l.selectedTool?"el-icon-check":"el-icon-circle-check")},null,2),t[43]||(t[43]=d(" 处理工具 "))],2),e("li",{class:w({completed:l.selectedRuleType})},[e("i",{class:w(l.selectedRuleType?"el-icon-check":"el-icon-circle-check")},null,2),t[44]||(t[44]=d(" 清洗规则 "))],2)]),t[51]||(t[51]=e("p",{class:"hint-text"},"配置完成后即可上传文件开始处理",-1)),l.fileList&&l.fileList.length>0?(u(),m("div",Ya,[t[47]||(t[47]=e("h5",null,"已选择文件：",-1)),(u(!0),m(T,null,k(l.fileList,(o,_)=>{var C;return u(),m("div",{key:_,class:"file-item"},[e("div",Ja,[e("i",{class:"el-icon-document",style:Fe({color:(C=l.selectedFileFormat)==null?void 0:C.color})},null,4),e("span",Wa,c(o.name),1),e("span",Ka,c(l.formatFileSize(null,null,o.size)),1)]),e("div",Ha,[a(f,{type:"primary",size:"small",onClick:O=>l.analyzeFileStructure(o)},{default:n(()=>t[45]||(t[45]=[d(" 分析 ")])),_:2,__:[45]},1032,["onClick"]),a(f,{type:"danger",size:"small",onClick:O=>l.removeFile(_)},{default:n(()=>t[46]||(t[46]=[d(" 删除 ")])),_:2,__:[46]},1032,["onClick"])])])}),128))])):M("",!0)]))])]),e("div",Qa,[e("div",Ga,[e("div",Xa,[t[54]||(t[54]=e("h3",null,[e("i",{class:"el-icon-chat-dot-round"}),d(" AI 清洗助手")],-1)),e("div",Za,[l.selectedFileFormat?(u(),E(f,{key:0,type:"text",onClick:l.generateSuggestions},{default:n(()=>t[52]||(t[52]=[e("i",{class:"el-icon-magic-stick"},null,-1),d(" 生成建议 ")])),_:1,__:[52]},8,["onClick"])):M("",!0),a(f,{type:"text",onClick:l.clearChat},{default:n(()=>t[53]||(t[53]=[d("清空对话")])),_:1,__:[53]},8,["onClick"])])]),l.selectedFileFormat||l.selectedTool||l.selectedRuleType?(u(),m("div",$a,[l.selectedFileFormat?(u(),m("div",eo,[a(D,{type:"success",size:"small"},{default:n(()=>[e("i",{class:w(l.selectedFileFormat.icon)},null,2),d(" "+c(l.selectedFileFormat.name),1)]),_:1})])):M("",!0),l.selectedTool?(u(),m("div",to,[a(D,{type:l.getToolCategoryType(l.selectedTool.category),size:"small"},{default:n(()=>[t[55]||(t[55]=e("i",{class:"el-icon-cpu"},null,-1)),d(" "+c(l.selectedTool.name),1)]),_:1,__:[55]},8,["type"])])):M("",!0),l.selectedRuleType?(u(),m("div",lo,[a(D,{type:"warning",size:"small"},{default:n(()=>[t[56]||(t[56]=e("i",{class:"el-icon-setting"},null,-1)),d(" "+c(l.getRuleTypeName(l.selectedRuleType)),1)]),_:1,__:[56]})])):M("",!0)])):M("",!0),e("div",so,[(u(!0),m(T,null,k(l.chatMessages,(o,_)=>(u(),m("div",{key:_,class:w(["message",o.type])},[e("div",ao,[e("i",{class:w(o.type==="user"?"el-icon-user":"el-icon-cpu")},null,2)]),e("div",oo,[o.isMarkdown?(u(),m("div",{key:0,class:"message-text",innerHTML:l.renderMarkdown(o.content)},null,8,no)):(u(),m("div",{key:1,class:"message-text",innerHTML:o.content},null,8,io)),o.showToolSelection&&o.tools?(u(),m("div",ro,[e("div",co,[(u(!0),m(T,null,k(o.tools,C=>(u(),m("div",{key:C.id,class:"tool-card-chat",onClick:O=>l.selectToolFromChat(C)},[e("div",po,[e("h5",null,c(C.name),1),a(D,{type:l.getToolCategoryType(C.category),size:"small"},{default:n(()=>[d(c(C.category),1)]),_:2},1032,["type"])]),e("p",mo,c(C.description),1),e("div",vo,[(u(!0),m(T,null,k(C.features,O=>(u(),m("span",{key:O,class:"feature-tag"},c(O),1))),128))])],8,uo))),128))])])):M("",!0),o.showRuleSelection&&o.rules?(u(),m("div",fo,[e("div",go,[(u(!0),m(T,null,k(o.rules,C=>(u(),m("div",{key:C.id,class:"rule-card-chat",onClick:O=>l.selectRuleFromChat(C)},[e("div",_o,[e("i",{class:w(C.icon)},null,2),e("h5",null,c(C.name),1)]),e("p",ho,c(C.description),1),e("div",Do,[(u(!0),m(T,null,k(C.examples,O=>(u(),E(D,{key:O,size:"small"},{default:n(()=>[d(c(O),1)]),_:2},1024))),128))])],8,yo))),128))])])):M("",!0),e("div",Co,c(o.timestamp),1)])],2))),128))],512),e("div",To,[a(J,{modelValue:l.chatInput,"onUpdate:modelValue":t[0]||(t[0]=o=>l.chatInput=o),type:"textarea",rows:3,placeholder:l.getChatPlaceholder(),onKeydown:Xs(X(l.sendMessage,["ctrl"]),["enter"])},null,8,["modelValue","placeholder","onKeydown"]),e("div",ko,[e("div",wo,[(u(!0),m(T,null,k(l.getContextualCommands(),o=>(u(),E(D,{key:o,onClick:_=>l.chatInput=o,class:"command-tag"},{default:n(()=>[d(c(o),1)]),_:2},1032,["onClick"]))),128))]),a(f,{type:"primary",onClick:l.sendMessage,loading:l.chatLoading},{default:n(()=>t[57]||(t[57]=[e("i",{class:"el-icon-s-promotion"},null,-1),d(" 发送 ")])),_:1,__:[57]},8,["onClick","loading"])])])])]),e("div",bo,[e("div",xo,[e("div",Fo,[t[59]||(t[59]=e("h3",null,[e("i",{class:"el-icon-loading"}),d(" 处理进度")],-1)),a(f,{type:"text",onClick:l.resetProcess},{default:n(()=>t[58]||(t[58]=[d("重置")])),_:1,__:[58]},8,["onClick"])]),e("div",So,[(u(!0),m(T,null,k(l.processSteps,(o,_)=>(u(),m("div",{key:_,class:w(["step-item",l.getStepStatus(_)])},[e("div",Ro,c(_+1),1),e("div",zo,[e("h4",null,c(o.title),1),e("p",null,c(o.description),1),o.status==="processing"?(u(),m("div",Mo,[a(b,{percentage:o.progress,"show-text":!1},null,8,["percentage"]),e("span",Vo,c(o.progress)+"%",1)])):M("",!0),o.status==="completed"?(u(),m("div",Io,[t[60]||(t[60]=e("i",{class:"el-icon-circle-check"},null,-1)),e("span",null,c(o.result),1)])):M("",!0)])],2))),128))]),e("div",Ao,[t[61]||(t[61]=e("h4",null,[e("i",{class:"el-icon-document"}),d(" 处理日志")],-1)),e("div",Po,[(u(!0),m(T,null,k(l.processLogs,(o,_)=>(u(),m("div",{key:_,class:w(["log-item",o.level])},[e("span",Lo,c(o.timestamp),1),e("span",qo,c(o.message),1)],2))),128))],512)])])])])],512),[[ae,l.activeTab==="cleaning"]]),se(e("div",Eo,[e("div",No,[a(L,{gutter:24},{default:n(()=>[a(h,{span:12},{default:n(()=>[a(F,{class:"template-management-card"},{header:n(()=>[e("div",Uo,[t[63]||(t[63]=e("h3",null,[e("i",{class:"el-icon-setting"}),d(" 规则模板管理")],-1)),a(f,{type:"primary",size:"small",onClick:l.createNewTemplate},{default:n(()=>t[62]||(t[62]=[e("i",{class:"el-icon-plus"},null,-1),d(" 新建模板 ")])),_:1,__:[62]},8,["onClick"])])]),default:n(()=>[e("div",Bo,[a(P,{modelValue:l.activeTemplateCategory,"onUpdate:modelValue":t[1]||(t[1]=o=>l.activeTemplateCategory=o),onTabClick:l.handleTemplateCategoryChange},{default:n(()=>[a(W,{label:"系统模板",name:"system"},{default:n(()=>[e("div",jo,[(u(!0),m(T,null,k(l.systemTemplates,o=>(u(),m("div",{key:o.id,class:w(["template-card",{active:l.selectedTemplateId===o.id}]),onClick:_=>l.selectTemplate(o)},[e("div",Yo,[e("h4",null,c(o.name),1),a(D,{type:"primary",size:"mini"},{default:n(()=>t[64]||(t[64]=[d("系统")])),_:1,__:[64]})]),e("p",Jo,c(o.description),1),e("div",Wo,[e("span",Ko,[t[65]||(t[65]=e("i",{class:"el-icon-document"},null,-1)),d(" 适用: "+c(o.applicableFormats.join(", ")),1)]),e("span",Ho,[t[66]||(t[66]=e("i",{class:"el-icon-setting"},null,-1)),d(" "+c(o.rules.length)+" 条规则 ",1)])]),e("div",Qo,[a(f,{type:"text",size:"mini",onClick:X(_=>l.copyTemplate(o),["stop"])},{default:n(()=>t[67]||(t[67]=[e("i",{class:"el-icon-copy-document"},null,-1),d(" 复制 ")])),_:2,__:[67]},1032,["onClick"]),a(f,{type:"text",size:"mini",onClick:X(_=>l.previewTemplate(o),["stop"])},{default:n(()=>t[68]||(t[68]=[e("i",{class:"el-icon-view"},null,-1),d(" 预览 ")])),_:2,__:[68]},1032,["onClick"])])],10,Oo))),128))])]),_:1}),a(W,{label:"自定义模板",name:"custom"},{default:n(()=>[e("div",Go,[(u(!0),m(T,null,k(l.customTemplates,o=>(u(),m("div",{key:o.id,class:w(["template-card",{active:l.selectedTemplateId===o.id}]),onClick:_=>l.selectTemplate(o)},[e("div",Zo,[e("h4",null,c(o.name),1),a(D,{type:"success",size:"mini"},{default:n(()=>t[69]||(t[69]=[d("自定义")])),_:1,__:[69]})]),e("p",$o,c(o.description),1),e("div",en,[e("span",tn,[t[70]||(t[70]=e("i",{class:"el-icon-time"},null,-1)),d(" "+c(o.createdAt),1)]),e("span",ln,[t[71]||(t[71]=e("i",{class:"el-icon-setting"},null,-1)),d(" "+c(o.rules.length)+" 条规则 ",1)])]),e("div",sn,[a(f,{type:"text",size:"mini",onClick:X(_=>l.editTemplate(o),["stop"])},{default:n(()=>t[72]||(t[72]=[e("i",{class:"el-icon-edit"},null,-1),d(" 编辑 ")])),_:2,__:[72]},1032,["onClick"]),a(f,{type:"text",size:"mini",onClick:X(_=>l.deleteTemplate(o),["stop"])},{default:n(()=>t[73]||(t[73]=[e("i",{class:"el-icon-delete"},null,-1),d(" 删除 ")])),_:2,__:[73]},1032,["onClick"])])],10,Xo))),128))])]),_:1})]),_:1},8,["modelValue","onTabClick"])])]),_:1})]),_:1}),a(h,{span:12},{default:n(()=>[N.selectedTemplateDetail?(u(),E(F,{key:0,class:"template-detail-card"},{header:n(()=>[e("div",an,[t[76]||(t[76]=e("h3",null,[e("i",{class:"el-icon-view"}),d(" 模板详情")],-1)),e("div",on,[l.isEditingTemplate?(u(),E(f,{key:0,type:"success",size:"small",onClick:l.saveTemplate},{default:n(()=>t[74]||(t[74]=[e("i",{class:"el-icon-check"},null,-1),d(" 保存 ")])),_:1,__:[74]},8,["onClick"])):(u(),E(f,{key:1,type:"primary",size:"small",onClick:l.enableEditMode},{default:n(()=>t[75]||(t[75]=[e("i",{class:"el-icon-edit"},null,-1),d(" 编辑 ")])),_:1,__:[75]},8,["onClick"]))])])]),default:n(()=>[e("div",nn,[e("div",rn,[t[77]||(t[77]=e("h4",null,"基本信息",-1)),a(ce,{model:N.selectedTemplateDetail,"label-width":"100px"},{default:n(()=>[a(U,{label:"模板名称"},{default:n(()=>[a(J,{modelValue:N.selectedTemplateDetail.name,"onUpdate:modelValue":t[2]||(t[2]=o=>N.selectedTemplateDetail.name=o),disabled:!l.isEditingTemplate},null,8,["modelValue","disabled"])]),_:1}),a(U,{label:"描述"},{default:n(()=>[a(J,{type:"textarea",modelValue:N.selectedTemplateDetail.description,"onUpdate:modelValue":t[3]||(t[3]=o=>N.selectedTemplateDetail.description=o),disabled:!l.isEditingTemplate,rows:3},null,8,["modelValue","disabled"])]),_:1}),a(U,{label:"适用格式"},{default:n(()=>[a(oe,{modelValue:N.selectedTemplateDetail.applicableFormats,"onUpdate:modelValue":t[4]||(t[4]=o=>N.selectedTemplateDetail.applicableFormats=o),multiple:"",disabled:!l.isEditingTemplate,placeholder:"选择适用的文件格式"},{default:n(()=>[(u(!0),m(T,null,k(l.fileFormats,o=>(u(),E(B,{key:o.type,label:o.name,value:o.type},null,8,["label","value"]))),128))]),_:1},8,["modelValue","disabled"])]),_:1})]),_:1},8,["model"])]),e("div",dn,[t[80]||(t[80]=e("h4",null,"清洗规则",-1)),e("div",cn,[(u(!0),m(T,null,k(N.selectedTemplateDetail.rules,(o,_)=>(u(),m("div",{key:_,class:"rule-item"},[e("div",un,[a(J,{modelValue:o.name,"onUpdate:modelValue":C=>o.name=C,placeholder:"规则名称",disabled:!l.isEditingTemplate},null,8,["modelValue","onUpdate:modelValue","disabled"]),a(J,{modelValue:o.description,"onUpdate:modelValue":C=>o.description=C,placeholder:"规则描述",disabled:!l.isEditingTemplate},null,8,["modelValue","onUpdate:modelValue","disabled"]),a(oe,{modelValue:o.type,"onUpdate:modelValue":C=>o.type=C,placeholder:"规则类型",disabled:!l.isEditingTemplate},{default:n(()=>[a(B,{label:"数据清洗",value:"cleaning"}),a(B,{label:"格式标准化",value:"formatting"}),a(B,{label:"数据验证",value:"validation"}),a(B,{label:"去重处理",value:"deduplication"})]),_:2},1032,["modelValue","onUpdate:modelValue","disabled"])]),l.isEditingTemplate?(u(),m("div",pn,[a(f,{type:"danger",size:"mini",onClick:C=>l.removeRule(_)},{default:n(()=>t[78]||(t[78]=[e("i",{class:"el-icon-delete"},null,-1)])),_:2,__:[78]},1032,["onClick"])])):M("",!0)]))),128)),l.isEditingTemplate?(u(),E(f,{key:0,type:"dashed",onClick:l.addRule,style:{width:"100%","margin-top":"10px"}},{default:n(()=>t[79]||(t[79]=[e("i",{class:"el-icon-plus"},null,-1),d(" 添加规则 ")])),_:1,__:[79]},8,["onClick"])):M("",!0)])])])]),_:1})):(u(),E(F,{key:1,class:"empty-state-card"},{default:n(()=>t[81]||(t[81]=[e("div",{class:"empty-state"},[e("i",{class:"el-icon-document-add",style:{"font-size":"64px",color:"#ddd"}}),e("h3",null,"选择一个模板"),e("p",null,"请从左侧选择一个模板来查看详情和编辑规则")],-1)])),_:1,__:[81]}))]),_:1})]),_:1})])],512),[[ae,l.activeTab==="template-rules"]]),se(e("div",mn,[l.latestCleaningReport?M("",!0):(u(),m("div",vn,[t[92]||(t[92]=e("h3",null,"🔧 调试信息",-1)),e("div",fn,[e("div",null,[e("p",null,[t[82]||(t[82]=e("strong",null,"报告状态:",-1)),d(" "+c(l.latestCleaningReport?"已生成":"未生成"),1)]),e("p",null,[t[83]||(t[83]=e("strong",null,"8D识别:",-1)),d(" "+c(l.is8DReport?"是8D报告":"非8D报告"),1)]),e("p",null,[t[84]||(t[84]=e("strong",null,"分析结果:",-1)),d(" "+c(l.eightDAnalysisResult?"有数据":"无数据"),1)])]),e("div",null,[e("p",null,[t[85]||(t[85]=e("strong",null,"处理步骤:",-1)),d(" "+c(l.processSteps.filter(o=>o.status==="completed").length)+"/"+c(l.processSteps.length),1)]),e("p",null,[t[86]||(t[86]=e("strong",null,"文件列表:",-1)),d(" "+c(l.fileList.length)+" 个文件",1)]),e("p",null,[t[87]||(t[87]=e("strong",null,"检测字段:",-1)),d(" "+c(l.detectedFields.length)+" 个字段",1)])])]),e("div",gn,[a(f,{type:"primary",onClick:l.test8DFlow},{default:n(()=>t[88]||(t[88]=[d("🧪 测试8D流程")])),_:1,__:[88]},8,["onClick"]),a(f,{type:"success",onClick:l.generateTestReport},{default:n(()=>t[89]||(t[89]=[d("📋 生成测试报告")])),_:1,__:[89]},8,["onClick"]),a(f,{type:"info",onClick:l.testFileReading},{default:n(()=>t[90]||(t[90]=[d("📖 测试文件读取")])),_:1,__:[90]},8,["onClick"]),a(f,{type:"warning",onClick:l.clearDebugData},{default:n(()=>t[91]||(t[91]=[d("🗑️ 清除数据")])),_:1,__:[91]},8,["onClick"])])])),l.latestCleaningReport?(u(),m("div",yn,[a(F,{class:"report-card"},{header:n(()=>[e("div",_n,[t[94]||(t[94]=e("h2",null,[e("i",{class:"el-icon-data-analysis"}),d(" AI数据治理分析报告")],-1)),e("div",hn,[a(D,{type:"success"},{default:n(()=>t[93]||(t[93]=[d("DeepSeek AI分析")])),_:1,__:[93]}),e("span",Dn,c(l.latestCleaningReport.timestamp),1)])])]),default:n(()=>[e("div",Cn,[e("div",Tn,[t[99]||(t[99]=e("h3",null,"📊 执行摘要",-1)),a(L,{gutter:20},{default:n(()=>[a(h,{span:6},{default:n(()=>[e("div",kn,[e("div",wn,c(l.latestCleaningReport.summary.cleanedRecords),1),t[95]||(t[95]=e("div",{class:"metric-label"},"清洗记录数",-1))])]),_:1}),a(h,{span:6},{default:n(()=>[e("div",bn,[e("div",xn,c(l.latestCleaningReport.summary.qualityImprovement)+"%",1),t[96]||(t[96]=e("div",{class:"metric-label"},"质量提升",-1))])]),_:1}),a(h,{span:6},{default:n(()=>[e("div",Fn,[e("div",Sn,c(l.latestCleaningReport.summary.processingTime)+"s",1),t[97]||(t[97]=e("div",{class:"metric-label"},"处理时间",-1))])]),_:1}),a(h,{span:6},{default:n(()=>t[98]||(t[98]=[e("div",{class:"summary-metric"},[e("div",{class:"metric-value"},"6"),e("div",{class:"metric-label"},"处理阶段")],-1)])),_:1,__:[98]})]),_:1})]),e("div",Rn,[t[100]||(t[100]=e("h3",null,"🤖 AI专业分析",-1)),e("div",{class:"analysis-text",innerHTML:l.renderMarkdown(l.latestCleaningReport.aiAnalysis)},null,8,zn)]),l.latestCleaningReport.recommendations?(u(),m("div",Mn,[t[102]||(t[102]=e("h3",null,"💡 改进建议",-1)),e("div",Vn,[(u(!0),m(T,null,k(l.latestCleaningReport.recommendations,o=>(u(),m("div",{key:o.category,class:w(["recommendation-item",o.priority])},[e("div",In,[a(D,{type:o.priority==="high"?"danger":o.priority==="medium"?"warning":"info",size:"small"},{default:n(()=>[d(c(o.priority==="high"?"高优先级":o.priority==="medium"?"中优先级":"低优先级"),1)]),_:2},1032,["type"]),e("h4",null,c(o.category),1)]),e("p",An,c(o.description),1),e("p",Pn,[t[101]||(t[101]=e("strong",null,"预期影响：",-1)),d(c(o.impact),1)])],2))),128))])])):M("",!0),l.latestCleaningReport.downloadLinks?(u(),m("div",Ln,[t[104]||(t[104]=e("h3",null,"📥 报告下载",-1)),a(L,{gutter:16},{default:n(()=>[(u(!0),m(T,null,k(l.latestCleaningReport.downloadLinks,o=>(u(),E(h,{span:8,key:o.name},{default:n(()=>[e("div",qn,[e("div",En,[e("i",{class:w(l.getDownloadIcon(o.type))},null,2)]),e("div",Nn,[e("h5",null,c(o.name),1),e("p",null,c(o.size),1)]),a(f,{type:"primary",size:"small",onClick:_=>l.downloadFile(o)},{default:n(()=>t[103]||(t[103]=[d(" 下载 ")])),_:2,__:[103]},1032,["onClick"])])]),_:2},1024))),128))]),_:1})])):M("",!0)])]),_:1})])):M("",!0),e("div",Un,[a(L,{gutter:24},{default:n(()=>[a(h,{span:16},{default:n(()=>[a(F,{class:"file-results-card"},{header:n(()=>[e("div",Bn,[t[107]||(t[107]=e("h3",null,[e("i",{class:"el-icon-document"}),d(" 清洗结果文件")],-1)),e("div",jn,[a(f,{type:"success",size:"small",onClick:t[5]||(t[5]=o=>l.exportResults("excel"))},{default:n(()=>t[105]||(t[105]=[e("i",{class:"el-icon-download",style:{"font-size":"14px","margin-right":"4px"}},null,-1),d(" 导出Excel ")])),_:1,__:[105]}),a(f,{type:"info",size:"small",onClick:t[6]||(t[6]=o=>l.exportResults("pdf"))},{default:n(()=>t[106]||(t[106]=[e("i",{class:"el-icon-download",style:{"font-size":"14px","margin-right":"4px"}},null,-1),d(" 导出PDF ")])),_:1,__:[106]})])])]),default:n(()=>[e("div",On,[e("div",Yn,[t[109]||(t[109]=e("h4",null,"原始文件",-1)),e("div",Jn,[t[108]||(t[108]=e("div",{class:"file-icon"},[e("i",{class:"el-icon-document"})],-1)),e("div",Wn,[e("p",Kn,c(l.originalFile.name),1),e("p",Hn,c(l.originalFile.records)+" 条记录 | "+c(l.originalFile.size),1),e("div",Qn,[a(D,{type:"warning",size:"mini"},{default:n(()=>[d("空值: "+c(l.originalFile.nullCount),1)]),_:1}),a(D,{type:"danger",size:"mini"},{default:n(()=>[d("重复: "+c(l.originalFile.duplicateCount),1)]),_:1}),a(D,{type:"info",size:"mini"},{default:n(()=>[d("异常: "+c(l.originalFile.anomalyCount),1)]),_:1})])])])]),t[112]||(t[112]=e("div",{class:"comparison-arrow"},[e("i",{class:"el-icon-right"})],-1)),e("div",Gn,[t[111]||(t[111]=e("h4",null,"清洗后文件",-1)),e("div",Xn,[t[110]||(t[110]=e("div",{class:"file-icon cleaned"},[e("i",{class:"el-icon-document"})],-1)),e("div",Zn,[e("p",$n,c(l.cleanedFile.name),1),e("p",ei,c(l.cleanedFile.records)+" 条记录 | "+c(l.cleanedFile.size),1),e("div",ti,[a(D,{type:"success",size:"mini"},{default:n(()=>[d("质量评分: "+c(l.cleanedFile.qualityScore)+"%",1)]),_:1}),a(D,{type:"success",size:"mini"},{default:n(()=>[d("完整性: "+c(l.cleanedFile.completeness)+"%",1)]),_:1})])])])])]),e("div",li,[a(L,{gutter:16},{default:n(()=>[a(h,{span:6},{default:n(()=>[e("div",si,[t[114]||(t[114]=e("div",{class:"stat-icon"},[e("i",{class:"el-icon-delete"})],-1)),e("div",ai,[e("h4",null,c(l.cleaningStats.removedRecords),1),t[113]||(t[113]=e("p",null,"删除记录",-1))])])]),_:1}),a(h,{span:6},{default:n(()=>[e("div",oi,[t[116]||(t[116]=e("div",{class:"stat-icon"},[e("i",{class:"el-icon-edit"})],-1)),e("div",ni,[e("h4",null,c(l.cleaningStats.modifiedRecords),1),t[115]||(t[115]=e("p",null,"修正记录",-1))])])]),_:1}),a(h,{span:6},{default:n(()=>[e("div",ii,[t[118]||(t[118]=e("div",{class:"stat-icon"},[e("i",{class:"el-icon-plus"})],-1)),e("div",ri,[e("h4",null,c(l.cleaningStats.addedRecords),1),t[117]||(t[117]=e("p",null,"补充记录",-1))])])]),_:1}),a(h,{span:6},{default:n(()=>[e("div",di,[t[120]||(t[120]=e("div",{class:"stat-icon"},[e("i",{class:"el-icon-time"})],-1)),e("div",ci,[e("h4",null,c(l.cleaningStats.processingTime),1),t[119]||(t[119]=e("p",null,"处理时间",-1))])])]),_:1})]),_:1})])]),_:1})]),_:1}),a(h,{span:8},{default:n(()=>[a(F,{class:"template-info-card"},{header:n(()=>t[121]||(t[121]=[e("h3",null,[e("i",{class:"el-icon-setting"}),d(" 使用的模板")],-1)])),default:n(()=>[e("div",ui,[(u(!0),m(T,null,k(l.appliedTemplates,o=>(u(),m("div",{key:o.id,class:"template-summary"},[e("div",pi,[e("h4",null,c(o.name),1),a(D,{type:o.type==="system"?"primary":"success",size:"small"},{default:n(()=>[d(c(o.type==="system"?"系统":"自定义"),1)]),_:2},1032,["type"])]),e("p",mi,c(o.description),1),e("div",vi,[(u(!0),m(T,null,k(o.appliedRules,_=>(u(),m("div",{key:_.name,class:"rule-item"},[e("span",fi,c(_.name),1),e("span",gi,c(_.effect),1)]))),128))])]))),128))])]),_:1})]),_:1})]),_:1})]),e("div",yi,[a(F,{class:"report-card"},{header:n(()=>[e("div",_i,[t[124]||(t[124]=e("h3",null,[e("i",{class:"el-icon-document-copy"}),d(" 数据清洗报告")],-1)),e("div",hi,[a(f,{type:"primary",onClick:l.generateReport},{default:n(()=>t[122]||(t[122]=[e("i",{class:"el-icon-magic-stick"},null,-1),d(" 生成报告 ")])),_:1,__:[122]},8,["onClick"]),a(f,{type:"success",onClick:l.saveReport},{default:n(()=>t[123]||(t[123]=[e("i",{class:"el-icon-download"},null,-1),d(" 保存报告 ")])),_:1,__:[123]},8,["onClick"])])])]),default:n(()=>[e("div",Di,[e("div",Ci,[e("div",Ti,[t[125]||(t[125]=e("h2",null,"数据清洗治理报告",-1)),e("div",ki,[e("p",null,"生成时间："+c(l.reportData.generateTime),1),e("p",null,"处理文件："+c(l.reportData.fileName),1),e("p",null,"报告编号："+c(l.reportData.reportId),1)])]),e("div",wi,[t[130]||(t[130]=e("h3",null,"1. 执行摘要",-1)),e("div",bi,[e("p",null,[t[126]||(t[126]=d("本次数据清洗处理了 ")),e("strong",null,c(l.reportData.totalRecords),1),t[127]||(t[127]=d(" 条记录， 通过 ")),e("strong",null,c(l.reportData.appliedRulesCount),1),t[128]||(t[128]=d(" 项清洗规则， 最终数据质量评分达到 ")),e("strong",null,c(l.reportData.qualityScore)+"%",1),t[129]||(t[129]=d("。"))])])])])])]),_:1})])],512),[[ae,l.activeTab==="results"]]),se(e("div",xi,[e("div",Fi,[e("div",Si,[a(F,{class:"knowledge-card"},{header:n(()=>[e("div",Ri,[t[132]||(t[132]=e("h3",null,[e("i",{class:"el-icon-collection"}),d(" 数据治理知识库")],-1)),a(f,{type:"primary",onClick:l.extractKnowledge},{default:n(()=>t[131]||(t[131]=[e("i",{class:"el-icon-magic-stick"},null,-1),d(" 提炼知识 ")])),_:1,__:[131]},8,["onClick"])])]),default:n(()=>[e("div",zi,[a(P,{modelValue:l.activeKnowledgeTab,"onUpdate:modelValue":t[7]||(t[7]=o=>l.activeKnowledgeTab=o),type:"card"},{default:n(()=>[a(W,{label:"数据模式",name:"patterns"},{default:n(()=>[e("div",Mi,[(u(!0),m(T,null,k(l.dataPatterns,o=>(u(),m("div",{key:o.id,class:"pattern-item"},[e("h4",null,c(o.name),1),e("p",null,c(o.description),1),e("div",Vi,[a(D,{size:"mini"},{default:n(()=>[d("出现频率: "+c(o.frequency),1)]),_:2},1024),a(D,{size:"mini",type:"success"},{default:n(()=>[d("置信度: "+c(o.confidence)+"%",1)]),_:2},1024)])]))),128))])]),_:1}),a(W,{label:"清洗规则",name:"rules"},{default:n(()=>[e("div",Ii,[(u(!0),m(T,null,k(l.knowledgeRules,o=>(u(),m("div",{key:o.id,class:"rule-knowledge-item"},[e("h4",null,c(o.name),1),e("p",null,c(o.description),1),e("div",Ai,[e("span",null,"成功率: "+c(o.successRate)+"%",1),e("span",null,"应用次数: "+c(o.usageCount),1)])]))),128))])]),_:1}),a(W,{label:"质量指标",name:"metrics"},{default:n(()=>[e("div",Pi,[a(L,{gutter:16},{default:n(()=>[(u(!0),m(T,null,k(l.qualityMetrics,o=>(u(),E(h,{span:8,key:o.name},{default:n(()=>[e("div",Li,[e("h4",null,c(o.name),1),e("div",qi,c(o.value)+c(o.unit),1),e("div",{class:w(["metric-trend",o.trend])},[e("i",{class:w(l.getTrendIcon(o.trend))},null,2),d(" "+c(o.change),1)],2)])]),_:2},1024))),128))]),_:1})])]),_:1})]),_:1},8,["modelValue"])])]),_:1})])])],512),[[ae,l.activeTab==="governance"]]),se(e("div",Ei,[e("div",Ni,[a(L,{gutter:24},{default:n(()=>[a(h,{span:8},{default:n(()=>[a(F,{class:"tool-categories-card"},{header:n(()=>t[133]||(t[133]=[e("h3",null,[e("i",{class:"el-icon-cpu"}),d(" 技术工具分类")],-1)])),default:n(()=>[e("div",Ui,[(u(!0),m(T,null,k(l.toolCategories,o=>(u(),m("div",{key:o.id,class:w(["category-item",{active:l.selectedToolCategory===o.id}]),onClick:_=>l.selectToolCategory(o.id)},[e("div",ji,[e("i",{class:w(o.icon)},null,2),e("h4",null,c(o.name),1),a(D,{size:"mini"},{default:n(()=>[d(c(o.tools.length),1)]),_:2},1024)]),e("p",Oi,c(o.description),1)],10,Bi))),128))])]),_:1})]),_:1}),a(h,{span:10},{default:n(()=>[a(F,{class:"tools-list-card"},{header:n(()=>[e("div",Yi,[t[135]||(t[135]=e("h3",null,[e("i",{class:"el-icon-menu"}),d(" 可用工具")],-1)),a(f,{type:"primary",size:"small",onClick:l.addNewTool},{default:n(()=>t[134]||(t[134]=[e("i",{class:"el-icon-plus"},null,-1),d(" 添加工具 ")])),_:1,__:[134]},8,["onClick"])])]),default:n(()=>[e("div",Ji,[(u(!0),m(T,null,k(l.getToolsByCategory(),o=>{var _;return u(),m("div",{key:o.id,class:w(["tool-card",{active:((_=l.selectedToolDetail)==null?void 0:_.id)===o.id}]),onClick:C=>l.selectToolDetail(o)},[e("div",Ki,[e("div",Hi,[e("i",{class:w(o.icon||"el-icon-cpu")},null,2)]),e("div",Qi,[e("h4",null,c(o.name),1),a(D,{type:l.getToolStatusType(o.status),size:"mini"},{default:n(()=>[d(c(o.status),1)]),_:2},1032,["type"])])]),e("p",Gi,c(o.description),1),e("div",Xi,[e("span",Zi,[t[136]||(t[136]=e("i",{class:"el-icon-star-on"},null,-1)),d(" "+c(o.rating||"N/A"),1)]),e("span",$i,[t[137]||(t[137]=e("i",{class:"el-icon-download"},null,-1)),d(" "+c(o.downloads||0),1)])]),e("div",er,[a(f,{type:"text",size:"mini",onClick:X(C=>l.deployTool(o),["stop"])},{default:n(()=>t[138]||(t[138]=[e("i",{class:"el-icon-upload2"},null,-1),d(" 部署 ")])),_:2,__:[138]},1032,["onClick"]),a(f,{type:"text",size:"mini",onClick:X(C=>l.configureTool(o),["stop"])},{default:n(()=>t[139]||(t[139]=[e("i",{class:"el-icon-setting"},null,-1),d(" 配置 ")])),_:2,__:[139]},1032,["onClick"])])],10,Wi)}),128))])]),_:1})]),_:1}),a(h,{span:6},{default:n(()=>[l.selectedToolDetail?(u(),E(F,{key:0,class:"tool-detail-card"},{header:n(()=>t[140]||(t[140]=[e("h3",null,[e("i",{class:"el-icon-view"}),d(" 工具详情")],-1)])),default:n(()=>[e("div",tr,[e("div",lr,[e("div",sr,[e("i",{class:w(l.selectedToolDetail.icon||"el-icon-cpu")},null,2)]),e("h4",null,c(l.selectedToolDetail.name),1),e("p",null,c(l.selectedToolDetail.version||"v1.0.0"),1)]),e("div",ar,[t[141]||(t[141]=e("h5",null,"描述",-1)),e("p",null,c(l.selectedToolDetail.description),1)]),e("div",or,[t[142]||(t[142]=e("h5",null,"技术栈",-1)),e("div",nr,[(u(!0),m(T,null,k(l.selectedToolDetail.technologies,o=>(u(),E(D,{key:o,size:"mini"},{default:n(()=>[d(c(o),1)]),_:2},1024))),128))])]),e("div",ir,[t[143]||(t[143]=e("h5",null,"部署状态",-1)),e("div",rr,[a(D,{type:l.getToolStatusType(l.selectedToolDetail.status)},{default:n(()=>[d(c(l.selectedToolDetail.status),1)]),_:1},8,["type"]),e("p",dr,c(l.getStatusDescription(l.selectedToolDetail.status)),1)])]),e("div",cr,[t[144]||(t[144]=e("h5",null,"配置参数",-1)),e("div",ur,[(u(!0),m(T,null,k(l.selectedToolDetail.configParams,o=>(u(),m("div",{key:o.name,class:"param-item"},[e("label",null,c(o.name),1),a(J,{modelValue:o.value,"onUpdate:modelValue":_=>o.value=_,placeholder:o.placeholder,size:"mini"},null,8,["modelValue","onUpdate:modelValue","placeholder"])]))),128))])]),e("div",pr,[a(f,{type:"primary",onClick:t[8]||(t[8]=o=>l.deployTool(l.selectedToolDetail)),loading:l.deployingTool},{default:n(()=>t[145]||(t[145]=[e("i",{class:"el-icon-upload2"},null,-1),d(" 部署工具 ")])),_:1,__:[145]},8,["loading"]),a(f,{onClick:t[9]||(t[9]=o=>l.testTool(l.selectedToolDetail))},{default:n(()=>t[146]||(t[146]=[e("i",{class:"el-icon-cpu"},null,-1),d(" 测试连接 ")])),_:1,__:[146]})])])]),_:1})):(u(),E(F,{key:1,class:"empty-state-card"},{default:n(()=>t[147]||(t[147]=[e("div",{class:"empty-state"},[e("i",{class:"el-icon-cpu",style:{"font-size":"64px",color:"#ddd"}}),e("h3",null,"选择一个工具"),e("p",null,"请从左侧选择一个工具来查看详情和配置")],-1)])),_:1,__:[147]}))]),_:1})]),_:1})])],512),[[ae,l.activeTab==="tech-tools"]]),se(e("div",mr,[a(L,{gutter:20},{default:n(()=>[a(h,{span:12},{default:n(()=>[a(F,null,{header:n(()=>[e("div",vr,[t[148]||(t[148]=e("span",null,"文件上传",-1)),a(D,{type:l.uploadStatus},{default:n(()=>[d(c(l.uploadStatusText),1)]),_:1},8,["type"])])]),default:n(()=>[a(de,{class:"upload-demo",drag:"","auto-upload":!1,multiple:"","file-list":l.fileList,onChange:l.handleFileChange,accept:".xlsx,.xls,.csv,.pdf,.doc,.docx,.txt"},{tip:n(()=>t[149]||(t[149]=[e("div",{class:"el-upload__tip"}," 支持 Excel、CSV、PDF、Word、TXT 等格式，单个文件不超过50MB ",-1)])),default:n(()=>[t[150]||(t[150]=e("i",{class:"el-icon-upload",style:{"font-size":"48px",color:"#409eff"}},null,-1)),t[151]||(t[151]=e("div",{class:"el-upload__text"},[d(" 将文件拖到此处，或"),e("em",null,"点击上传")],-1))]),_:1,__:[150,151]},8,["file-list","onChange"]),l.fileList&&l.fileList.length>0?(u(),m("div",fr,[t[154]||(t[154]=e("h4",null,"已选择文件：",-1)),a(Z,{data:l.fileList,style:{width:"100%"},size:"small"},{default:n(()=>[a(R,{prop:"name",label:"文件名"}),a(R,{prop:"size",label:"大小",formatter:l.formatFileSize},null,8,["formatter"]),a(R,{label:"操作"},{default:n(o=>[a(f,{type:"primary",size:"small",onClick:_=>l.analyzeFileStructure(o.row)},{default:n(()=>t[152]||(t[152]=[d(" 分析结构 ")])),_:2,__:[152]},1032,["onClick"]),a(f,{type:"danger",size:"small",onClick:_=>l.removeFile(o.$index)},{default:n(()=>t[153]||(t[153]=[d(" 删除 ")])),_:2,__:[153]},1032,["onClick"])]),_:1})]),_:1},8,["data"])])):M("",!0)]),_:1})]),_:1}),a(h,{span:12},{default:n(()=>[a(F,null,{header:n(()=>[e("div",gr,[t[156]||(t[156]=e("span",null,"数据结构格式设置",-1)),a(f,{type:"success",size:"small",onClick:l.saveStructureTemplate},{default:n(()=>t[155]||(t[155]=[e("i",{class:"el-icon-document-add",style:{"font-size":"14px","margin-right":"4px"}},null,-1),d(" 保存模板 ")])),_:1,__:[155]},8,["onClick"])])]),default:n(()=>[e("div",yr,[t[161]||(t[161]=e("h4",null,"选择数据结构格式：",-1)),a(Ue,{modelValue:l.selectedStructureFormat,"onUpdate:modelValue":t[10]||(t[10]=o=>l.selectedStructureFormat=o),onChange:l.onStructureFormatChange},{default:n(()=>[a(ye,{label:"8d-report"},{default:n(()=>t[157]||(t[157]=[e("div",{class:"format-option"},[e("strong",null,"8D报告格式"),e("p",null,"包含问题描述、根因分析、纠正措施等标准字段")],-1)])),_:1,__:[157]}),a(ye,{label:"quality-case"},{default:n(()=>t[158]||(t[158]=[e("div",{class:"format-option"},[e("strong",null,"质量案例格式"),e("p",null,"包含案例编号、问题类型、处理结果等字段")],-1)])),_:1,__:[158]}),a(ye,{label:"inspection-record"},{default:n(()=>t[159]||(t[159]=[e("div",{class:"format-option"},[e("strong",null,"检验记录格式"),e("p",null,"包含检验项目、标准值、实测值、判定结果等")],-1)])),_:1,__:[159]}),a(ye,{label:"custom"},{default:n(()=>t[160]||(t[160]=[e("div",{class:"format-option"},[e("strong",null,"自定义格式"),e("p",null,"根据实际数据结构自定义字段映射")],-1)])),_:1,__:[160]})]),_:1},8,["modelValue","onChange"])]),l.selectedStructureFormat?(u(),m("div",_r,[t[162]||(t[162]=e("h4",null,"字段映射配置：",-1)),a(Z,{data:l.fieldMappings,style:{width:"100%"},size:"small"},{default:n(()=>[a(R,{prop:"standardField",label:"标准字段"}),a(R,{prop:"sourceField",label:"源字段"},{default:n(o=>[a(oe,{modelValue:o.row.sourceField,"onUpdate:modelValue":_=>o.row.sourceField=_,placeholder:"选择源字段",size:"small"},{default:n(()=>[(u(!0),m(T,null,k(l.detectedFields,_=>(u(),E(B,{key:_,label:_,value:_},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue"])]),_:1}),a(R,{prop:"required",label:"必填"},{default:n(o=>[a(D,{type:o.row.required?"danger":"info",size:"small"},{default:n(()=>[d(c(o.row.required?"必填":"可选"),1)]),_:2},1032,["type"])]),_:1})]),_:1},8,["data"])])):M("",!0),l.structurePreview.length>0?(u(),m("div",hr,[t[163]||(t[163]=e("h4",null,"数据结构预览：",-1)),a(Z,{data:l.structurePreview,style:{width:"100%"},size:"small","max-height":"200"},{default:n(()=>[(u(!0),m(T,null,k(l.previewColumns,o=>(u(),E(R,{key:o.prop,prop:o.prop,label:o.label,"show-overflow-tooltip":""},null,8,["prop","label"]))),128))]),_:1},8,["data"])])):M("",!0)]),_:1})]),_:1})]),_:1})],512),[[ae,l.activeTab==="upload"]]),se(e("div",Dr,[a(L,{gutter:20},{default:n(()=>[a(h,{span:12},{default:n(()=>[a(F,null,{header:n(()=>[e("div",Cr,[t[164]||(t[164]=e("span",null,"预设规则模板",-1)),a(D,{type:"info"},{default:n(()=>[d(c(l.ruleTemplates.length)+" 个模板",1)]),_:1})])]),default:n(()=>[e("div",Tr,[(u(!0),m(T,null,k(l.ruleTemplates,o=>{var _;return u(),m("div",{key:o.id,class:w(["template-item",{active:((_=l.selectedRuleTemplate)==null?void 0:_.id)===o.id}]),onClick:C=>N.selectRuleTemplate(o)},[e("div",wr,[e("h4",null,c(o.name),1),a(D,{type:o.type==="system"?"success":"warning",size:"small"},{default:n(()=>[d(c(o.type==="system"?"系统":"自定义"),1)]),_:2},1032,["type"])]),e("p",br,c(o.description),1),e("div",xr,[e("span",null,"规则数: "+c(o.rules.length),1),e("span",null,"适用: "+c(o.applicableFormats.join(", ")),1)]),e("div",Fr,[a(f,{type:"primary",size:"small",onClick:X(C=>l.applyTemplate(o),["stop"])},{default:n(()=>t[165]||(t[165]=[d(" 应用模板 ")])),_:2,__:[165]},1032,["onClick"]),a(f,{type:"info",size:"small",onClick:X(C=>l.previewTemplate(o),["stop"])},{default:n(()=>t[166]||(t[166]=[d(" 预览 ")])),_:2,__:[166]},1032,["onClick"]),o.type==="custom"?(u(),E(f,{key:0,type:"danger",size:"small",onClick:X(C=>l.deleteTemplate(o),["stop"])},{default:n(()=>t[167]||(t[167]=[d(" 删除 ")])),_:2,__:[167]},1032,["onClick"])):M("",!0)])],10,kr)}),128))])]),_:1})]),_:1}),a(h,{span:12},{default:n(()=>[a(F,null,{header:n(()=>[e("div",Sr,[t[169]||(t[169]=e("span",null,"自定义规则配置",-1)),a(f,{type:"success",size:"small",onClick:l.createCustomTemplate},{default:n(()=>t[168]||(t[168]=[e("i",{class:"el-icon-plus",style:{"font-size":"14px","margin-right":"4px"}},null,-1),d(" 新建模板 ")])),_:1,__:[168]},8,["onClick"])])]),default:n(()=>[e("div",Rr,[a(ce,{model:l.customTemplate,"label-width":"100px",size:"small"},{default:n(()=>[a(U,{label:"模板名称"},{default:n(()=>[a(J,{modelValue:l.customTemplate.name,"onUpdate:modelValue":t[11]||(t[11]=o=>l.customTemplate.name=o),placeholder:"输入模板名称"},null,8,["modelValue"])]),_:1}),a(U,{label:"模板描述"},{default:n(()=>[a(J,{modelValue:l.customTemplate.description,"onUpdate:modelValue":t[12]||(t[12]=o=>l.customTemplate.description=o),type:"textarea",rows:2,placeholder:"输入模板描述"},null,8,["modelValue"])]),_:1}),a(U,{label:"适用格式"},{default:n(()=>[a(Ce,{modelValue:l.customTemplate.applicableFormats,"onUpdate:modelValue":t[13]||(t[13]=o=>l.customTemplate.applicableFormats=o)},{default:n(()=>[a(j,{label:"8d-report"},{default:n(()=>t[170]||(t[170]=[d("8D报告")])),_:1,__:[170]}),a(j,{label:"quality-case"},{default:n(()=>t[171]||(t[171]=[d("质量案例")])),_:1,__:[171]}),a(j,{label:"inspection-record"},{default:n(()=>t[172]||(t[172]=[d("检验记录")])),_:1,__:[172]}),a(j,{label:"custom"},{default:n(()=>t[173]||(t[173]=[d("自定义格式")])),_:1,__:[173]})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model"])]),e("div",zr,[t[192]||(t[192]=e("h4",null,"规则配置：",-1)),a(P,{modelValue:l.activeRuleTab,"onUpdate:modelValue":t[16]||(t[16]=o=>l.activeRuleTab=o)},{default:n(()=>[a(W,{label:"基础规则",name:"basic"},{default:n(()=>[a(Ce,{modelValue:l.customTemplate.basicRules,"onUpdate:modelValue":t[14]||(t[14]=o=>l.customTemplate.basicRules=o)},{default:n(()=>[e("div",Mr,[a(j,{label:"removeEmpty"},{default:n(()=>t[174]||(t[174]=[d("去除空值")])),_:1,__:[174]}),t[175]||(t[175]=e("span",{class:"rule-desc"},"移除空白、null、undefined等无效数据",-1))]),e("div",Vr,[a(j,{label:"trimWhitespace"},{default:n(()=>t[176]||(t[176]=[d("去除空白字符")])),_:1,__:[176]}),t[177]||(t[177]=e("span",{class:"rule-desc"},"移除字段值前后的空白字符",-1))]),e("div",Ir,[a(j,{label:"removeDuplicates"},{default:n(()=>t[178]||(t[178]=[d("去除重复数据")])),_:1,__:[178]}),t[179]||(t[179]=e("span",{class:"rule-desc"},"基于关键字段去除重复记录",-1))]),e("div",Ar,[a(j,{label:"standardizeFormat"},{default:n(()=>t[180]||(t[180]=[d("格式标准化")])),_:1,__:[180]}),t[181]||(t[181]=e("span",{class:"rule-desc"},"统一日期、数字、文本格式",-1))])]),_:1},8,["modelValue"])]),_:1}),a(W,{label:"高级规则",name:"advanced"},{default:n(()=>[a(Ce,{modelValue:l.customTemplate.advancedRules,"onUpdate:modelValue":t[15]||(t[15]=o=>l.customTemplate.advancedRules=o)},{default:n(()=>[e("div",Pr,[a(j,{label:"dataValidation"},{default:n(()=>t[182]||(t[182]=[d("数据验证")])),_:1,__:[182]}),t[183]||(t[183]=e("span",{class:"rule-desc"},"检查数据完整性和有效性",-1))]),e("div",Lr,[a(j,{label:"smartRepair"},{default:n(()=>t[184]||(t[184]=[d("智能修复")])),_:1,__:[184]}),t[185]||(t[185]=e("span",{class:"rule-desc"},"AI辅助修复常见数据问题",-1))]),e("div",qr,[a(j,{label:"anomalyDetection"},{default:n(()=>t[186]||(t[186]=[d("异常检测")])),_:1,__:[186]}),t[187]||(t[187]=e("span",{class:"rule-desc"},"识别和标记异常数据",-1))]),e("div",Er,[a(j,{label:"qualityScoring"},{default:n(()=>t[188]||(t[188]=[d("质量评分")])),_:1,__:[188]}),t[189]||(t[189]=e("span",{class:"rule-desc"},"对数据质量进行评分",-1))])]),_:1},8,["modelValue"])]),_:1}),a(W,{label:"自定义规则",name:"custom"},{default:n(()=>[e("div",Nr,[a(f,{type:"primary",size:"small",onClick:l.addCustomRule},{default:n(()=>[a(Te,null,{default:n(()=>[a(Re)]),_:1}),t[190]||(t[190]=d(" 添加自定义规则 "))]),_:1,__:[190]},8,["onClick"]),(u(!0),m(T,null,k(l.customTemplate.customRules,(o,_)=>(u(),m("div",{key:_,class:"custom-rule-item"},[a(J,{modelValue:o.name,"onUpdate:modelValue":C=>o.name=C,placeholder:"规则名称",size:"small"},null,8,["modelValue","onUpdate:modelValue"]),a(J,{modelValue:o.expression,"onUpdate:modelValue":C=>o.expression=C,placeholder:"规则表达式",size:"small"},null,8,["modelValue","onUpdate:modelValue"]),a(f,{type:"danger",size:"small",onClick:C=>l.removeCustomRule(_)},{default:n(()=>t[191]||(t[191]=[d("删除")])),_:2,__:[191]},1032,["onClick"])]))),128))])]),_:1})]),_:1},8,["modelValue"])]),e("div",Ur,[a(f,{type:"primary",onClick:l.saveCustomTemplate},{default:n(()=>t[193]||(t[193]=[d("保存模板")])),_:1,__:[193]},8,["onClick"]),a(f,{onClick:l.resetCustomTemplate},{default:n(()=>t[194]||(t[194]=[d("重置")])),_:1,__:[194]},8,["onClick"]),a(f,{type:"info",onClick:l.previewCustomTemplate},{default:n(()=>t[195]||(t[195]=[d("预览效果")])),_:1,__:[195]},8,["onClick"])])]),_:1})]),_:1})]),_:1})],512),[[ae,l.activeTab==="rules"]]),se(e("div",Br,[a(L,{gutter:20},{default:n(()=>[a(h,{span:24},{default:n(()=>[a(F,null,{header:n(()=>[e("div",jr,[t[196]||(t[196]=e("span",null,"数据清洗执行监控",-1)),a(D,{type:l.processingStatus==="running"?"success":"info"},{default:n(()=>[d(c(l.processingStatusText),1)]),_:1},8,["type"])])]),default:n(()=>[e("div",Or,[a(ue,{active:l.currentStep,"finish-status":"success","align-center":""},{default:n(()=>[a(ne,{title:"文档解析",description:"识别字段设计和数据结构"}),a(ne,{title:"字段分析",description:"分析字段属性和约束关系"}),a(ne,{title:"重复检测",description:"识别和处理重复记录"}),a(ne,{title:"空值筛查",description:"检测和处理空白内容"}),a(ne,{title:"数据清洗",description:"应用清洗规则和约束验证"}),a(ne,{title:"结果呈现",description:"生成清洗数据和质量报告"})]),_:1},8,["active"])]),l.processingStatus==="running"?(u(),m("div",Yr,[t[197]||(t[197]=e("h4",null,"当前进度",-1)),a(b,{percentage:l.processingProgress,status:l.progressStatus,"stroke-width":8},null,8,["percentage","status"]),e("p",Jr,c(l.currentStepDescription),1),e("div",Wr,[a(L,{gutter:20},{default:n(()=>[a(h,{span:6},{default:n(()=>[a(S,{title:"已处理记录",value:l.processedRecords},null,8,["value"])]),_:1}),a(h,{span:6},{default:n(()=>[a(S,{title:"清洗规则数",value:l.appliedRules},null,8,["value"])]),_:1}),a(h,{span:6},{default:n(()=>[a(S,{title:"发现问题",value:l.detectedIssues},null,8,["value"])]),_:1}),a(h,{span:6},{default:n(()=>[a(S,{title:"处理时间",value:l.processingTime,suffix:"秒"},null,8,["value"])]),_:1})]),_:1})])])):M("",!0),e("div",Kr,[a(f,{type:"primary",loading:l.processingStatus==="running",onClick:l.startMonitoring,disabled:!l.fileList||l.fileList.length===0||!l.selectedRuleTemplate},{default:n(()=>[d(c(l.processingStatus==="running"?"处理中...":"开始清洗"),1)]),_:1},8,["loading","onClick","disabled"]),l.processingStatus==="running"?(u(),E(f,{key:0,type:"danger",onClick:l.stopProcessing},{default:n(()=>t[198]||(t[198]=[d(" 停止处理 ")])),_:1,__:[198]},8,["onClick"])):M("",!0),a(f,{type:"info",onClick:l.viewLogs},{default:n(()=>t[199]||(t[199]=[d("查看日志")])),_:1,__:[199]},8,["onClick"])])]),_:1})]),_:1})]),_:1}),a(L,{gutter:20,style:{"margin-top":"20px"}},{default:n(()=>[a(h,{span:12},{default:n(()=>[a(F,null,{header:n(()=>[e("div",Hr,[t[200]||(t[200]=e("span",null,"空白值检测",-1)),a(D,{type:"warning"},{default:n(()=>[d(c(l.emptyValueIssues.length)+" 个问题",1)]),_:1})])]),default:n(()=>[e("div",Qr,[(u(!0),m(T,null,k(l.emptyValueIssues,o=>(u(),m("div",{key:o.id,class:"issue-item"},[e("div",Gr,[e("span",Xr,c(o.field),1),a(D,{type:"warning",size:"small"},{default:n(()=>[d(c(o.type),1)]),_:2},1024)]),e("div",Zr,[e("p",null,"位置: 第 "+c(o.row)+" 行",1),e("p",null,"问题: "+c(o.description),1),e("div",$r,[a(f,{type:"primary",size:"small",onClick:_=>l.fixIssue(o)},{default:n(()=>t[201]||(t[201]=[d(" 自动修复 ")])),_:2,__:[201]},1032,["onClick"]),a(f,{type:"info",size:"small",onClick:_=>l.ignoreIssue(o)},{default:n(()=>t[202]||(t[202]=[d(" 忽略 ")])),_:2,__:[202]},1032,["onClick"])])])]))),128))]),l.emptyValueIssues.length===0?(u(),m("div",ed,t[203]||(t[203]=[e("div",{class:"empty-state"},[e("div",{class:"empty-icon"},[e("i",{class:"el-icon-circle-check",style:{"font-size":"40px",color:"#67c23a"}})]),e("h4",null,"数据质量良好"),e("p",null,"未发现空白值问题")],-1)]))):M("",!0)]),_:1})]),_:1}),a(h,{span:12},{default:n(()=>[a(F,null,{header:n(()=>[e("div",td,[t[204]||(t[204]=e("span",null,"重复内容检测",-1)),a(D,{type:"danger"},{default:n(()=>[d(c(l.duplicateIssues.length)+" 个问题",1)]),_:1})])]),default:n(()=>[e("div",ld,[(u(!0),m(T,null,k(l.duplicateIssues,o=>(u(),m("div",{key:o.id,class:"issue-item"},[e("div",sd,[e("span",ad,c(o.field),1),a(D,{type:"danger",size:"small"},{default:n(()=>[d(c(o.type),1)]),_:2},1024)]),e("div",od,[e("p",null,"重复行: "+c(o.rows.join(", ")),1),e("p",null,"重复值: "+c(o.value),1),e("div",nd,[a(f,{type:"primary",size:"small",onClick:_=>l.removeDuplicate(o)},{default:n(()=>t[205]||(t[205]=[d(" 删除重复 ")])),_:2,__:[205]},1032,["onClick"]),a(f,{type:"warning",size:"small",onClick:_=>l.mergeDuplicate(o)},{default:n(()=>t[206]||(t[206]=[d(" 合并 ")])),_:2,__:[206]},1032,["onClick"]),a(f,{type:"info",size:"small",onClick:_=>l.ignoreIssue(o)},{default:n(()=>t[207]||(t[207]=[d(" 保留 ")])),_:2,__:[207]},1032,["onClick"])])])]))),128))]),l.duplicateIssues.length===0?(u(),m("div",id,t[208]||(t[208]=[e("div",{class:"empty-state"},[e("div",{class:"empty-icon"},[e("i",{class:"el-icon-circle-check",style:{"font-size":"40px",color:"#67c23a"}})]),e("h4",null,"数据唯一性良好"),e("p",null,"未发现重复内容问题")],-1)]))):M("",!0)]),_:1})]),_:1})]),_:1}),a(L,{gutter:20,style:{"margin-top":"20px"}},{default:n(()=>[a(h,{span:24},{default:n(()=>[a(F,null,{header:n(()=>[e("div",rd,[t[209]||(t[209]=e("span",null,"其他数据质量问题",-1)),a(D,{type:"info"},{default:n(()=>[d(c(l.otherIssues.length)+" 个问题",1)]),_:1})])]),default:n(()=>[a(Z,{data:l.otherIssues,style:{width:"100%"},size:"small"},{default:n(()=>[a(R,{prop:"field",label:"字段",width:"120"}),a(R,{prop:"type",label:"问题类型",width:"120"},{default:n(o=>[a(D,{type:l.getIssueTagType(o.row.type),size:"small"},{default:n(()=>[d(c(o.row.type),1)]),_:2},1032,["type"])]),_:1}),a(R,{prop:"description",label:"问题描述"}),a(R,{prop:"row",label:"位置",width:"80"}),a(R,{prop:"severity",label:"严重程度",width:"100"},{default:n(o=>[a(D,{type:l.getSeverityTagType(o.row.severity),size:"small"},{default:n(()=>[d(c(o.row.severity),1)]),_:2},1032,["type"])]),_:1}),a(R,{label:"操作",width:"200"},{default:n(o=>[a(f,{type:"primary",size:"small",onClick:_=>l.fixIssue(o.row)},{default:n(()=>t[210]||(t[210]=[d(" 修复 ")])),_:2,__:[210]},1032,["onClick"]),a(f,{type:"info",size:"small",onClick:_=>l.viewIssueDetail(o.row)},{default:n(()=>t[211]||(t[211]=[d(" 详情 ")])),_:2,__:[211]},1032,["onClick"])]),_:1})]),_:1},8,["data"])]),_:1})]),_:1})]),_:1})],512),[[ae,l.activeTab==="monitor"]]),se(e("div",dd,[a(L,{gutter:20},{default:n(()=>[a(h,{span:24},{default:n(()=>[a(F,null,{header:n(()=>[e("div",cd,[t[214]||(t[214]=e("span",null,"数据查询与筛选",-1)),e("div",null,[a(f,{type:"success",size:"small",onClick:t[17]||(t[17]=o=>l.exportResults("excel"))},{default:n(()=>t[212]||(t[212]=[e("i",{class:"el-icon-download",style:{"font-size":"14px","margin-right":"4px"}},null,-1),d(" 导出Excel ")])),_:1,__:[212]}),a(f,{type:"info",size:"small",onClick:t[18]||(t[18]=o=>l.exportResults("pdf"))},{default:n(()=>t[213]||(t[213]=[e("i",{class:"el-icon-download",style:{"font-size":"14px","margin-right":"4px"}},null,-1),d(" 导出PDF ")])),_:1,__:[213]})])])]),default:n(()=>[e("div",ud,[a(ce,{model:l.queryForm,inline:!0,size:"small"},{default:n(()=>[a(U,{label:"数据状态"},{default:n(()=>[a(oe,{modelValue:l.queryForm.status,"onUpdate:modelValue":t[19]||(t[19]=o=>l.queryForm.status=o),placeholder:"选择状态",clearable:""},{default:n(()=>[a(B,{label:"全部",value:""}),a(B,{label:"已清洗",value:"cleaned"}),a(B,{label:"有问题",value:"issues"}),a(B,{label:"待处理",value:"pending"})]),_:1},8,["modelValue"])]),_:1}),a(U,{label:"数据类型"},{default:n(()=>[a(oe,{modelValue:l.queryForm.type,"onUpdate:modelValue":t[20]||(t[20]=o=>l.queryForm.type=o),placeholder:"选择类型",clearable:""},{default:n(()=>[a(B,{label:"全部",value:""}),a(B,{label:"8D报告",value:"8d-report"}),a(B,{label:"质量案例",value:"quality-case"}),a(B,{label:"检验记录",value:"inspection-record"})]),_:1},8,["modelValue"])]),_:1}),a(U,{label:"关键字"},{default:n(()=>[a(J,{modelValue:l.queryForm.keyword,"onUpdate:modelValue":t[21]||(t[21]=o=>l.queryForm.keyword=o),placeholder:"输入关键字搜索",clearable:""},null,8,["modelValue"])]),_:1}),a(U,{label:"时间范围"},{default:n(()=>[a(I,{modelValue:l.queryForm.dateRange,"onUpdate:modelValue":t[22]||(t[22]=o=>l.queryForm.dateRange=o),type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",format:"YYYY-MM-DD","value-format":"YYYY-MM-DD"},null,8,["modelValue"])]),_:1}),a(U,null,{default:n(()=>[a(f,{type:"primary",onClick:l.searchData},{default:n(()=>t[215]||(t[215]=[e("i",{class:"el-icon-search",style:{"font-size":"14px","margin-right":"4px"}},null,-1),d(" 查询 ")])),_:1,__:[215]},8,["onClick"]),a(f,{onClick:l.resetQuery},{default:n(()=>t[216]||(t[216]=[d("重置")])),_:1,__:[216]},8,["onClick"])]),_:1})]),_:1},8,["model"])])]),_:1})]),_:1})]),_:1}),a(L,{gutter:20,style:{"margin-top":"20px"}},{default:n(()=>[a(h,{span:24},{default:n(()=>[a(F,null,{header:n(()=>t[217]||(t[217]=[e("span",null,"数据统计概览",-1)])),default:n(()=>[e("div",pd,[a(L,{gutter:20},{default:n(()=>[a(h,{span:4},{default:n(()=>[a(S,{title:"总记录数",value:l.resultStats.totalRecords,"value-style":"color: #409eff"},null,8,["value"])]),_:1}),a(h,{span:4},{default:n(()=>[a(S,{title:"已清洗",value:l.resultStats.cleanedRecords,"value-style":"color: #67c23a"},null,8,["value"])]),_:1}),a(h,{span:4},{default:n(()=>[a(S,{title:"有问题",value:l.resultStats.issueRecords,"value-style":"color: #f56c6c"},null,8,["value"])]),_:1}),a(h,{span:4},{default:n(()=>[a(S,{title:"待处理",value:l.resultStats.pendingRecords,"value-style":"color: #e6a23c"},null,8,["value"])]),_:1}),a(h,{span:4},{default:n(()=>[a(S,{title:"数据质量分",value:l.resultStats.qualityScore,suffix:"%","value-style":"color: #909399"},null,8,["value"])]),_:1}),a(h,{span:4},{default:n(()=>[a(S,{title:"处理时间",value:l.resultStats.processingTime,suffix:"秒","value-style":"color: #909399"},null,8,["value"])]),_:1})]),_:1})])]),_:1})]),_:1})]),_:1}),a(L,{gutter:20,style:{"margin-top":"20px"}},{default:n(()=>[a(h,{span:24},{default:n(()=>[a(F,null,{header:n(()=>[e("div",md,[e("span",null,"数据详情 ("+c(l.filteredData.length)+" 条记录)",1),e("div",null,[a(f,{type:"primary",size:"small",onClick:l.batchClean},{default:n(()=>t[218]||(t[218]=[d(" 批量清洗 ")])),_:1,__:[218]},8,["onClick"]),a(f,{type:"warning",size:"small",onClick:l.batchExport},{default:n(()=>t[219]||(t[219]=[d(" 批量导出 ")])),_:1,__:[219]},8,["onClick"])])])]),default:n(()=>[a(Z,{data:l.paginatedData,style:{width:"100%"},size:"small",onSelectionChange:l.handleSelectionChange,"max-height":"500"},{default:n(()=>[a(R,{type:"selection",width:"55"}),a(R,{prop:"id",label:"ID",width:"80"}),a(R,{prop:"title",label:"标题","min-width":"200","show-overflow-tooltip":""}),a(R,{prop:"type",label:"类型",width:"120"},{default:n(o=>[a(D,{type:l.getTypeTagType(o.row.type),size:"small"},{default:n(()=>[d(c(l.getTypeLabel(o.row.type)),1)]),_:2},1032,["type"])]),_:1}),a(R,{prop:"status",label:"状态",width:"100"},{default:n(o=>[a(D,{type:l.getStatusTagType(o.row.status),size:"small"},{default:n(()=>[d(c(l.getStatusLabel(o.row.status)),1)]),_:2},1032,["type"])]),_:1}),a(R,{prop:"qualityScore",label:"质量分",width:"100"},{default:n(o=>[a(b,{percentage:o.row.qualityScore,"stroke-width":6,"show-text":!1,color:l.getQualityColor(o.row.qualityScore)},null,8,["percentage","color"]),e("span",vd,c(o.row.qualityScore)+"%",1)]),_:1}),a(R,{prop:"issueCount",label:"问题数",width:"80"}),a(R,{prop:"createTime",label:"创建时间",width:"120"}),a(R,{label:"操作",width:"200",fixed:"right"},{default:n(o=>[a(f,{type:"primary",size:"small",onClick:_=>l.viewDetail(o.row)},{default:n(()=>t[220]||(t[220]=[d(" 查看 ")])),_:2,__:[220]},1032,["onClick"]),a(f,{type:"success",size:"small",onClick:_=>l.cleanRecord(o.row)},{default:n(()=>t[221]||(t[221]=[d(" 清洗 ")])),_:2,__:[221]},1032,["onClick"]),a(f,{type:"info",size:"small",onClick:_=>l.downloadRecord(o.row)},{default:n(()=>t[222]||(t[222]=[d(" 下载 ")])),_:2,__:[222]},1032,["onClick"])]),_:1})]),_:1},8,["data","onSelectionChange"]),e("div",fd,[a(V,{"current-page":l.currentPage,"onUpdate:currentPage":t[23]||(t[23]=o=>l.currentPage=o),"page-size":l.pageSize,"onUpdate:pageSize":t[24]||(t[24]=o=>l.pageSize=o),"page-sizes":[10,20,50,100],total:l.filteredData.length,layout:"total, sizes, prev, pager, next, jumper",onSizeChange:l.handleSizeChange,onCurrentChange:l.handleCurrentChange},null,8,["current-page","page-size","total","onSizeChange","onCurrentChange"])])]),_:1})]),_:1})]),_:1}),a(pe,{modelValue:l.detailDialogVisible,"onUpdate:modelValue":t[25]||(t[25]=o=>l.detailDialogVisible=o),title:"数据详情",width:"80%","before-close":l.closeDetailDialog},{footer:n(()=>[e("div",hd,[a(f,{onClick:l.closeDetailDialog},{default:n(()=>t[225]||(t[225]=[d("关闭")])),_:1,__:[225]},8,["onClick"]),a(f,{type:"primary",onClick:l.cleanSelectedRecord},{default:n(()=>t[226]||(t[226]=[d("清洗数据")])),_:1,__:[226]},8,["onClick"]),a(f,{type:"success",onClick:l.exportSelectedRecord},{default:n(()=>t[227]||(t[227]=[d("导出数据")])),_:1,__:[227]},8,["onClick"])])]),default:n(()=>[l.selectedRecord?(u(),m("div",gd,[a($,{column:2,border:""},{default:n(()=>[a(q,{label:"ID"},{default:n(()=>[d(c(l.selectedRecord.id),1)]),_:1}),a(q,{label:"标题"},{default:n(()=>[d(c(l.selectedRecord.title),1)]),_:1}),a(q,{label:"类型"},{default:n(()=>[d(c(l.getTypeLabel(l.selectedRecord.type)),1)]),_:1}),a(q,{label:"状态"},{default:n(()=>[d(c(l.getStatusLabel(l.selectedRecord.status)),1)]),_:1}),a(q,{label:"质量分"},{default:n(()=>[d(c(l.selectedRecord.qualityScore)+"%",1)]),_:1}),a(q,{label:"问题数"},{default:n(()=>[d(c(l.selectedRecord.issueCount),1)]),_:1}),a(q,{label:"创建时间"},{default:n(()=>[d(c(l.selectedRecord.createTime),1)]),_:1}),a(q,{label:"更新时间"},{default:n(()=>[d(c(l.selectedRecord.updateTime),1)]),_:1})]),_:1}),e("div",yd,[t[223]||(t[223]=e("h4",null,"数据内容：",-1)),a(Z,{data:l.selectedRecord.data,style:{width:"100%"},size:"small","max-height":"300"},{default:n(()=>[(u(!0),m(T,null,k(l.selectedRecord.columns,o=>(u(),E(R,{key:o.prop,prop:o.prop,label:o.label,"show-overflow-tooltip":""},null,8,["prop","label"]))),128))]),_:1},8,["data"])]),l.selectedRecord.issues&&l.selectedRecord.issues.length>0?(u(),m("div",_d,[t[224]||(t[224]=e("h4",null,"数据问题：",-1)),a(Z,{data:l.selectedRecord.issues,style:{width:"100%"},size:"small"},{default:n(()=>[a(R,{prop:"field",label:"字段"}),a(R,{prop:"type",label:"问题类型"}),a(R,{prop:"description",label:"问题描述"}),a(R,{prop:"severity",label:"严重程度"},{default:n(o=>[a(D,{type:l.getSeverityTagType(o.row.severity),size:"small"},{default:n(()=>[d(c(o.row.severity),1)]),_:2},1032,["type"])]),_:1})]),_:1},8,["data"])])):M("",!0)])):M("",!0)]),_:1},8,["modelValue","before-close"])],512),[[ae,l.activeTab==="results"]])]),e("div",Dd,[a(me,{content:"快速上传文件",placement:"left"},{default:n(()=>[a(f,{type:"primary",circle:"",size:"large",onClick:l.quickUpload,class:"quick-btn"},{default:n(()=>[a(Te,null,{default:n(()=>[a(Re)]),_:1})]),_:1},8,["onClick"])]),_:1}),a(me,{content:"查看帮助",placement:"left"},{default:n(()=>[a(f,{type:"info",circle:"",onClick:l.showHelp,class:"quick-btn"},{default:n(()=>[a(Te,null,{default:n(()=>[a(ze)]),_:1})]),_:1},8,["onClick"])]),_:1})]),a(pe,{modelValue:l.helpDialogVisible,"onUpdate:modelValue":t[27]||(t[27]=o=>l.helpDialogVisible=o),title:"使用帮助",width:"60%"},{footer:n(()=>[e("div",Cd,[a(f,{onClick:t[26]||(t[26]=o=>l.helpDialogVisible=!1)},{default:n(()=>t[228]||(t[228]=[d("关闭")])),_:1,__:[228]}),a(f,{type:"primary",onClick:l.contactSupport},{default:n(()=>t[229]||(t[229]=[d("联系技术支持")])),_:1,__:[229]},8,["onClick"])])]),default:n(()=>[t[230]||(t[230]=e("div",{class:"help-content"},[e("h4",null,"数据清洗系统使用指南"),e("p",null,"本系统提供完整的6阶段数据处理流程，帮助您快速清洗和分析数据。"),e("h5",null,"主要功能："),e("ul",null,[e("li",null,[e("strong",null,"数据上传："),d("支持多种格式文件上传")]),e("li",null,[e("strong",null,"规则配置："),d("灵活的清洗规则设置")]),e("li",null,[e("strong",null,"流程监控："),d("实时监控处理进度")]),e("li",null,[e("strong",null,"结果分析："),d("详细的处理结果和AI分析")])])],-1))]),_:1,__:[230]},8,["modelValue"])])}const xd=Ls(Zs,[["render",Td],["__scopeId","data-v-af5a01a2"]]);export{xd as default};
