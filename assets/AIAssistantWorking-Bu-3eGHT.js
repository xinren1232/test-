import{c as l,o as i,a as s,O as h,P as y,e as f,Q as k,R as A,F as C,r as w,b as S,_ as V,ai as b,S as _,V as P,X as T,t as r,n as M}from"./element-plus-DR-erZ3X.js";import{a as E}from"./index-Bo1zM2q5.js";import"./echarts-Dfqt_Pbx.js";const L={name:"AIAssistantWorking",setup(){const c=_(""),t=_([]),g=_(!1),e=_([]),x=_(null),I=_(["查询工厂A的库存情况","分析最近的质量趋势","生成质量报告","统计不合格品数量"]),d=a=>new Promise(n=>setTimeout(n,a)),v=(a,n,m)=>{e.value.push({type:a,title:n,status:m})},u=(a,n,m=null)=>{e.value[a]&&(e.value[a].status=n,m&&(e.value[a].result=m))},o=async()=>{if(!c.value.trim()||g.value)return;const a={type:"user",content:c.value,timestamp:new Date};t.value.push(a);const n=c.value;c.value="",g.value=!0,e.value=[];try{await p(n)}catch(m){console.error("AI处理错误:",m),t.value.push({type:"ai",content:"抱歉，处理您的问题时出现了错误。请稍后重试。",timestamp:new Date})}finally{g.value=!1}},p=async a=>{v("thinking","理解问题","processing"),await d(1e3),u(0,"completed"),v("analysis","分析问题类型","processing"),await d(800),u(1,"completed"),v("tool_selection","选择合适工具","processing"),await d(600),u(2,"completed"),v("response","生成回答","processing"),await d(500),u(3,"completed");const n=`我收到了您的问题："${a}"。这是一个关于质量管理的问题，我正在为您分析相关数据...`;t.value.push({type:"ai",content:n,timestamp:new Date})};return{inputMessage:c,messages:t,isLoading:g,currentProcess:e,chatMessages:x,quickExamples:I,sendMessage:o,sendQuickQuestion:a=>{c.value=a,o()},clearChat:()=>{t.value=[],e.value=[]},exportChat:()=>{P.success("导出功能开发中...")},formatTime:a=>a.toLocaleTimeString(),getStepIcon:a=>({thinking:"🤔",analysis:"🔍",tool_selection:"🛠️",response:"💬"})[a]||"⚙️",getStatusText:a=>({processing:"处理中...",completed:"完成",error:"错误"})[a]||a,formatStepResult:a=>typeof a=="object"?JSON.stringify(a,null,2):String(a)}}},N={class:"ai-assistant"},Q={class:"header"},q={class:"header-actions"},B={class:"main-content"},D={class:"chat-panel"},R={class:"panel-header"},K={class:"quick-actions"},F={class:"chat-messages",ref:"chatMessages"},O={class:"message-avatar"},W={key:0},j={key:1},z={class:"message-content"},J={class:"message-text"},U={class:"message-time"},X={key:0,class:"message ai loading"},G={class:"chat-input"},H={class:"input-actions"},Y={class:"process-panel"},Z={class:"process-content"},$={key:0,class:"empty-state"},ss={class:"step-header"},ts={class:"step-icon"},es={class:"step-title"},as={class:"step-status"},os={key:0,class:"step-result"},is={class:"result-content"};function ns(c,t,g,e,x,I){const d=k("el-button"),v=k("el-tag"),u=k("el-input");return i(),l("div",N,[s("div",Q,[t[3]||(t[3]=s("h1",null,"🤖 IQE AI 智能助手",-1)),s("div",q,[h(d,{onClick:e.clearChat,type:"primary",plain:""},{default:y(()=>t[1]||(t[1]=[f("清空对话")])),_:1,__:[1]},8,["onClick"]),h(d,{onClick:e.exportChat,type:"success",plain:""},{default:y(()=>t[2]||(t[2]=[f("导出对话")])),_:1,__:[2]},8,["onClick"])])]),s("div",B,[t[10]||(t[10]=A('<div class="tools-panel" data-v-12874758><div class="panel-header" data-v-12874758><h3 data-v-12874758>🛠️ 可用工具</h3></div><div class="tool-category" data-v-12874758><h4 data-v-12874758>📊 数据分析工具</h4><div class="tool-list" data-v-12874758><div class="tool-item" data-v-12874758><div class="tool-icon" data-v-12874758>📊</div><div class="tool-info" data-v-12874758><div class="tool-name" data-v-12874758>数据分析</div><div class="tool-desc" data-v-12874758>分析质量管理数据</div></div></div><div class="tool-item" data-v-12874758><div class="tool-icon" data-v-12874758>📈</div><div class="tool-info" data-v-12874758><div class="tool-name" data-v-12874758>统计分析</div><div class="tool-desc" data-v-12874758>执行统计分析</div></div></div></div></div><div class="tool-category" data-v-12874758><h4 data-v-12874758>📈 可视化工具</h4><div class="tool-list" data-v-12874758><div class="tool-item" data-v-12874758><div class="tool-icon" data-v-12874758>📊</div><div class="tool-info" data-v-12874758><div class="tool-name" data-v-12874758>图表生成</div><div class="tool-desc" data-v-12874758>生成数据可视化图表</div></div></div></div></div></div>',1)),s("div",D,[s("div",R,[t[4]||(t[4]=s("h3",null,"💬 智能问答",-1)),s("div",K,[(i(!0),l(C,null,w(e.quickExamples,o=>(i(),T(v,{key:o,onClick:p=>e.sendQuickQuestion(o),class:"quick-tag"},{default:y(()=>[f(r(o),1)]),_:2},1032,["onClick"]))),128))])]),s("div",F,[(i(!0),l(C,null,w(e.messages,(o,p)=>(i(),l("div",{key:p,class:M(["message",o.type])},[s("div",O,[o.type==="user"?(i(),l("span",W,"👤")):(i(),l("span",j,"🤖"))]),s("div",z,[s("div",J,r(o.content),1),s("div",U,r(e.formatTime(o.timestamp)),1)])],2))),128)),e.isLoading?(i(),l("div",X,t[5]||(t[5]=[s("div",{class:"message-avatar"},"🤖",-1),s("div",{class:"message-content"},[s("div",{class:"typing-indicator"},[s("span"),s("span"),s("span")])],-1)]))):S("",!0)],512),s("div",G,[h(u,{modelValue:e.inputMessage,"onUpdate:modelValue":t[0]||(t[0]=o=>e.inputMessage=o),type:"textarea",rows:3,placeholder:"请输入您的问题...",onKeydown:V(b(e.sendMessage,["ctrl"]),["enter"]),disabled:e.isLoading},null,8,["modelValue","onKeydown","disabled"]),s("div",H,[h(d,{onClick:e.sendMessage,type:"primary",loading:e.isLoading},{default:y(()=>t[6]||(t[6]=[f(" 发送 (Ctrl+Enter) ")])),_:1,__:[6]},8,["onClick","loading"])])])]),s("div",Y,[t[9]||(t[9]=s("div",{class:"panel-header"},[s("h3",null,"🧠 AI思考过程")],-1)),s("div",Z,[e.currentProcess.length===0?(i(),l("div",$,t[7]||(t[7]=[s("div",{class:"empty-icon"},"🤔",-1),s("div",{class:"empty-text"},"AI正在等待您的问题...",-1)]))):S("",!0),(i(!0),l(C,null,w(e.currentProcess,(o,p)=>(i(),l("div",{key:p,class:M(["process-step",o.status])},[s("div",ss,[s("div",ts,r(e.getStepIcon(o.type)),1),s("div",es,r(o.title),1),s("div",as,r(e.getStatusText(o.status)),1)]),o.result?(i(),l("div",os,[t[8]||(t[8]=s("div",{class:"result-label"},"执行结果:",-1)),s("div",is,r(e.formatStepResult(o.result)),1)])):S("",!0)],2))),128))])])])])}const rs=E(L,[["render",ns],["__scopeId","data-v-12874758"]]);export{rs as default};
