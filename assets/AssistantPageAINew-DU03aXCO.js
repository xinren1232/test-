import{S as p,c as o,o as d,a,O as y,Q as g,P as h,e as k,R as L,F as A,r as S,b as f,_ as O,ai as R,X as z,t as r,n as V,V as C}from"./element-plus-DR-erZ3X.js";import{a as F}from"./index-Bo1zM2q5.js";import"./echarts-Dfqt_Pbx.js";const J={class:"ai-assistant-container"},U={class:"top-header"},$={class:"header-controls"},j={class:"three-column-layout"},X={class:"middle-column"},G={class:"column-header"},H={class:"quick-examples"},W={class:"message-avatar"},Y={key:0},Z={key:1},aa={class:"message-body"},sa={class:"message-text"},ta={class:"message-timestamp"},ea={key:0,class:"chat-message ai loading-message"},da={class:"input-area"},oa={class:"input-controls"},la={class:"right-column"},ia={class:"thinking-area"},na={key:0,class:"empty-thinking"},va={class:"step-header"},ca={class:"step-icon"},ra={class:"step-title"},ua={class:"step-status"},pa={key:0,class:"step-details"},ma={key:1,class:"step-result"},_a={class:"result-content"},ya={__name:"AssistantPageAINew",setup(ga){const u=p(""),_=p([{sender:"assistant",text:"您好！我是AI智能问答助手。我已接入DeepSeek大语言模型，可以为您提供智能对话服务。",timestamp:new Date}]),m=p(!1),I=p(!0),n=p([]),b=p(null),D=p(["查询工厂A的库存情况","分析最近的质量趋势","生成质量报告","统计不合格品数量","查看生产线状态"]),N=e=>e?new Date(e).toLocaleTimeString():"",M=e=>({thinking:"🤔",analysis:"🔍",tool_selection:"🛠️",data_query:"📊",response:"💬"})[e]||"⚙️",P=e=>({processing:"处理中...",completed:"完成",error:"错误"})[e]||e,E=e=>typeof e=="object"?JSON.stringify(e,null,2):String(e),T=e=>{u.value=e,w()},w=async()=>{if(!u.value.trim()||m.value)return;const e={type:"user",content:u.value,timestamp:new Date};_.value.push(e);const s=u.value;u.value="",m.value=!0,n.value=[];try{await B(s)}catch(v){console.error("AI处理错误:",v),_.value.push({type:"ai",content:"抱歉，处理您的问题时出现了错误。请稍后重试。",timestamp:new Date})}finally{m.value=!1}},B=async e=>{const s=l=>new Promise(t=>setTimeout(t,l)),v=(l,t,i,K=null)=>{n.value.push({type:l,title:t,status:i,details:K})},c=(l,t,i=null)=>{n.value[l]&&(n.value[l].status=t,i&&(n.value[l].result=i))};v("thinking","理解问题","processing",{question:e}),await s(1e3),c(0,"completed"),v("analysis","分析问题类型","processing"),await s(800),c(1,"completed"),v("tool_selection","选择合适工具","processing"),await s(600),c(2,"completed"),v("response","生成回答","processing"),await s(500),c(3,"completed");const x=`我收到了您的问题："${e}"。这是一个关于质量管理的问题，我正在为您分析相关数据...`;_.value.push({type:"ai",content:x,timestamp:new Date})},Q=()=>{_.value=[{sender:"assistant",text:"对话已清空。您好！我是AI智能问答助手，已接入DeepSeek大语言模型。",timestamp:new Date}],n.value=[],C.success("对话已清空")},q=()=>{C.success("导出功能开发中...")};return(e,s)=>{const v=g("el-switch"),c=g("el-button"),x=g("el-tag"),l=g("el-input");return d(),o("div",J,[a("div",U,[s[4]||(s[4]=a("h1",null,"🤖 IQE AI 智能助手",-1)),a("div",$,[y(v,{modelValue:I.value,"onUpdate:modelValue":s[0]||(s[0]=t=>I.value=t),"active-text":"AI增强模式","inactive-text":"基础模式",size:"large"},null,8,["modelValue"]),y(c,{onClick:Q,type:"primary",plain:""},{default:h(()=>s[2]||(s[2]=[k("清空对话")])),_:1,__:[2]}),y(c,{onClick:q,type:"success",plain:""},{default:h(()=>s[3]||(s[3]=[k("导出对话")])),_:1,__:[3]})])]),a("div",j,[s[11]||(s[11]=L('<div class="left-column" data-v-3624a94d><div class="column-header" data-v-3624a94d><h3 data-v-3624a94d>🛠️ 可用工具</h3></div><div class="tools-section" data-v-3624a94d><div class="tool-category" data-v-3624a94d><h4 data-v-3624a94d>📊 数据分析工具</h4><div class="tool-item" data-v-3624a94d><span class="tool-icon" data-v-3624a94d>📊</span><div class="tool-details" data-v-3624a94d><div class="tool-name" data-v-3624a94d>数据分析</div><div class="tool-desc" data-v-3624a94d>分析质量管理数据</div></div></div><div class="tool-item" data-v-3624a94d><span class="tool-icon" data-v-3624a94d>📈</span><div class="tool-details" data-v-3624a94d><div class="tool-name" data-v-3624a94d>统计分析</div><div class="tool-desc" data-v-3624a94d>执行统计分析</div></div></div><div class="tool-item" data-v-3624a94d><span class="tool-icon" data-v-3624a94d>🧮</span><div class="tool-details" data-v-3624a94d><div class="tool-name" data-v-3624a94d>数值计算</div><div class="tool-desc" data-v-3624a94d>执行数学计算</div></div></div></div><div class="tool-category" data-v-3624a94d><h4 data-v-3624a94d>📈 可视化工具</h4><div class="tool-item" data-v-3624a94d><span class="tool-icon" data-v-3624a94d>📊</span><div class="tool-details" data-v-3624a94d><div class="tool-name" data-v-3624a94d>图表生成</div><div class="tool-desc" data-v-3624a94d>生成数据可视化图表</div></div></div><div class="tool-item" data-v-3624a94d><span class="tool-icon" data-v-3624a94d>📄</span><div class="tool-details" data-v-3624a94d><div class="tool-name" data-v-3624a94d>报告生成</div><div class="tool-desc" data-v-3624a94d>生成质量分析报告</div></div></div></div><div class="tool-category" data-v-3624a94d><h4 data-v-3624a94d>🌐 联网工具</h4><div class="tool-item" data-v-3624a94d><span class="tool-icon" data-v-3624a94d>🔍</span><div class="tool-details" data-v-3624a94d><div class="tool-name" data-v-3624a94d>网络搜索</div><div class="tool-desc" data-v-3624a94d>搜索相关信息</div></div></div></div><div class="tool-category" data-v-3624a94d><h4 data-v-3624a94d>🎯 质量管理</h4><div class="tool-item" data-v-3624a94d><span class="tool-icon" data-v-3624a94d>📦</span><div class="tool-details" data-v-3624a94d><div class="tool-name" data-v-3624a94d>库存查询</div><div class="tool-desc" data-v-3624a94d>查询库存信息</div></div></div><div class="tool-item" data-v-3624a94d><span class="tool-icon" data-v-3624a94d>🏭</span><div class="tool-details" data-v-3624a94d><div class="tool-name" data-v-3624a94d>生产查询</div><div class="tool-desc" data-v-3624a94d>查询生产数据</div></div></div><div class="tool-item" data-v-3624a94d><span class="tool-icon" data-v-3624a94d>🧪</span><div class="tool-details" data-v-3624a94d><div class="tool-name" data-v-3624a94d>检测查询</div><div class="tool-desc" data-v-3624a94d>查询检测结果</div></div></div></div></div></div>',1)),a("div",X,[a("div",G,[s[5]||(s[5]=a("h3",null,"💬 智能问答",-1)),a("div",H,[(d(!0),o(A,null,S(D.value,t=>(d(),z(x,{key:t,onClick:i=>T(t),class:"example-tag"},{default:h(()=>[k(r(t),1)]),_:2},1032,["onClick"]))),128))])]),a("div",{class:"messages-area",ref_key:"messagesArea",ref:b},[(d(!0),o(A,null,S(_.value,(t,i)=>(d(),o("div",{key:i,class:V(["chat-message",t.sender||t.type])},[a("div",W,[t.sender==="user"||t.type==="user"?(d(),o("span",Y,"👤")):(d(),o("span",Z,"🤖"))]),a("div",aa,[a("div",sa,r(t.content||t.text),1),a("div",ta,r(N(t.timestamp)),1)])],2))),128)),m.value?(d(),o("div",ea,s[6]||(s[6]=[a("div",{class:"message-avatar"},"🤖",-1),a("div",{class:"message-body"},[a("div",{class:"typing-animation"},[a("span"),a("span"),a("span")])],-1)]))):f("",!0)],512),a("div",da,[y(l,{modelValue:u.value,"onUpdate:modelValue":s[1]||(s[1]=t=>u.value=t),type:"textarea",rows:3,placeholder:"请输入您的问题...",onKeydown:O(R(w,["ctrl"]),["enter"]),disabled:m.value},null,8,["modelValue","onKeydown","disabled"]),a("div",oa,[y(c,{onClick:w,type:"primary",loading:m.value},{default:h(()=>s[7]||(s[7]=[k(" 发送 (Ctrl+Enter) ")])),_:1,__:[7]},8,["loading"])])])]),a("div",la,[s[10]||(s[10]=a("div",{class:"column-header"},[a("h3",null,"🧠 AI思考过程")],-1)),a("div",ia,[n.value.length===0?(d(),o("div",na,s[8]||(s[8]=[a("div",{class:"empty-icon"},"🤔",-1),a("div",{class:"empty-text"},"AI正在等待您的问题...",-1)]))):f("",!0),(d(!0),o(A,null,S(n.value,(t,i)=>(d(),o("div",{key:i,class:V(["thinking-step",t.status])},[a("div",va,[a("span",ca,r(M(t.type)),1),a("span",ra,r(t.title),1),a("span",ua,r(P(t.status)),1)]),t.details?(d(),o("div",pa,[a("pre",null,r(JSON.stringify(t.details,null,2)),1)])):f("",!0),t.result?(d(),o("div",ma,[s[9]||(s[9]=a("div",{class:"result-label"},"执行结果:",-1)),a("div",_a,r(E(t.result)),1)])):f("",!0)],2))),128))])])])])}}},wa=F(ya,[["__scopeId","data-v-3624a94d"]]);export{wa as default};
