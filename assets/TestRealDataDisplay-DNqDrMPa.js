import{S as h,c as d,o as c,a as t,b as D,O as o,P as n,e as v,Q as p,a0 as T,aq as O,G as E,t as r,F as C,r as M,n as R,X as P,V as w}from"./element-plus-DR-erZ3X.js";import{a as V}from"./index-Bo1zM2q5.js";import"./echarts-Dfqt_Pbx.js";const $={class:"test-real-data-page"},q={class:"test-section"},J={class:"test-controls"},L={key:0,class:"test-result"},j={class:"result-header"},z={class:"result-info"},F={key:0,class:"key-metrics"},G={class:"metrics-grid"},H={class:"metric-label"},I={class:"metric-value"},X={key:1,class:"data-table-section"},A={class:"raw-response"},K={__name:"TestRealDataDisplay",setup(Q){const g=h(!1),s=h(null),S=async()=>{var e,m,f,b;g.value=!0;const l=Date.now();try{console.log("ðŸ§ª å¼€å§‹æµ‹è¯•çœŸå®žæ•°æ®...");const a=await fetch("/api/assistant/query",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:"æ·±åœ³å·¥åŽ‚çš„åº“å­˜æƒ…å†µ"})}),y=Date.now()-l;if(!a.ok)throw new Error(`HTTP ${a.status}: ${a.statusText}`);const u=await a.json();console.log("âœ… çœŸå®žæ•°æ®æµ‹è¯•æˆåŠŸ:",u),s.value={success:!0,source:u.source||"API",count:((m=(e=u.data)==null?void 0:e.tableData)==null?void 0:m.length)||0,responseTime:y,keyMetrics:((f=u.data)==null?void 0:f.keyMetrics)||[],tableData:((b=u.data)==null?void 0:b.tableData)||[],rawResponse:u},w.success(`çœŸå®žæ•°æ®æµ‹è¯•æˆåŠŸï¼ŒèŽ·å–åˆ° ${s.value.count} æ¡è®°å½•`)}catch(a){console.error("âŒ çœŸå®žæ•°æ®æµ‹è¯•å¤±è´¥:",a),s.value={success:!1,source:"Error",count:0,responseTime:Date.now()-l,error:a.message,rawResponse:{error:a.message}},w.error(`çœŸå®žæ•°æ®æµ‹è¯•å¤±è´¥: ${a.message}`)}finally{g.value=!1}},x=()=>{console.log("ðŸŽ­ ç”Ÿæˆæ¨¡æ‹Ÿæ•°æ®æµ‹è¯•...");const l={success:!0,data:{answer:'æ ¹æ®æ‚¨çš„æŸ¥è¯¢"æ·±åœ³å·¥åŽ‚çš„åº“å­˜æƒ…å†µ"ï¼Œæ‰¾åˆ°äº† 5 æ¡ç›¸å…³è®°å½•ã€‚',tableData:[{å·¥åŽ‚:"æ·±åœ³å·¥åŽ‚",ç‰©æ–™ç¼–ç :"SPK-ç‘ž6984",ç‰©æ–™åç§°:"å–‡å­",ä¾›åº”å•†:"ç‘žå£°",æ•°é‡:137,çŠ¶æ€:"æ­£å¸¸",å…¥åº“æ—¶é—´:"2025-07-10"},{å·¥åŽ‚:"æ·±åœ³å·¥åŽ‚",ç‰©æ–™ç¼–ç :"BOX-å¯Œ5172",ç‰©æ–™åç§°:"åŒ…è£…ç›’",ä¾›åº”å•†:"å¯Œç¾¤",æ•°é‡:1024,çŠ¶æ€:"æ­£å¸¸",å…¥åº“æ—¶é—´:"2025-07-10"},{å·¥åŽ‚:"æ·±åœ³å·¥åŽ‚",ç‰©æ–™ç¼–ç :"DEC-æ¬£7269",ç‰©æ–™åç§°:"è£…é¥°ä»¶",ä¾›åº”å•†:"æ¬£å† ",æ•°é‡:319,çŠ¶æ€:"æ­£å¸¸",å…¥åº“æ—¶é—´:"2025-07-10"},{å·¥åŽ‚:"æ·±åœ³å·¥åŽ‚",ç‰©æ–™ç¼–ç :"CHG-ç†8507",ç‰©æ–™åç§°:"å……ç”µå™¨",ä¾›åº”å•†:"ç†å¨",æ•°é‡:962,çŠ¶æ€:"æ­£å¸¸",å…¥åº“æ—¶é—´:"2025-07-10"},{å·¥åŽ‚:"æ·±åœ³å·¥åŽ‚",ç‰©æ–™ç¼–ç :"DS-L-B4188",ç‰©æ–™åç§°:"LCDæ˜¾ç¤ºå±",ä¾›åº”å•†:"BOE",æ•°é‡:476,çŠ¶æ€:"é£Žé™©",å…¥åº“æ—¶é—´:"2025-07-10"}],keyMetrics:[{label:"æ€»è®°å½•æ•°",value:5,trend:"stable"},{label:"æ­£å¸¸çŠ¶æ€",value:4,trend:"up"},{label:"é£Žé™©çŠ¶æ€",value:1,trend:"down"}]},source:"mock"};s.value={success:!0,source:"Mock Data",count:l.data.tableData.length,responseTime:50,keyMetrics:l.data.keyMetrics,tableData:l.data.tableData,rawResponse:l},w.success(`æ¨¡æ‹Ÿæ•°æ®æµ‹è¯•æˆåŠŸï¼Œç”Ÿæˆ ${s.value.count} æ¡è®°å½•`)},B=(l,e)=>l==="çŠ¶æ€"?e==="æ­£å¸¸"?"status-normal":e==="é£Žé™©"?"status-risk":"":"";return(l,e)=>{const m=p("el-icon"),f=p("el-button"),b=p("el-tag"),a=p("el-table-column"),y=p("el-table"),u=p("el-collapse-item"),N=p("el-collapse");return c(),d("div",$,[e[9]||(e[9]=t("div",{class:"page-header"},[t("h1",null,"ðŸ§ª çœŸå®žæ•°æ®æ˜¾ç¤ºæµ‹è¯•"),t("p",null,"æµ‹è¯•å‰ç«¯æ˜¯å¦èƒ½æ­£ç¡®æ˜¾ç¤ºåŽç«¯è¿”å›žçš„çœŸå®žæ•°æ®")],-1)),t("div",q,[t("div",J,[o(f,{type:"primary",onClick:S,loading:g.value},{default:n(()=>[o(m,null,{default:n(()=>[o(T(O))]),_:1}),e[0]||(e[0]=v(" æµ‹è¯•çœŸå®žæ•°æ® "))]),_:1,__:[0]},8,["loading"]),o(f,{type:"success",onClick:x},{default:n(()=>[o(m,null,{default:n(()=>[o(T(E))]),_:1}),e[1]||(e[1]=v(" æµ‹è¯•æ¨¡æ‹Ÿæ•°æ® "))]),_:1,__:[1]})]),s.value?(c(),d("div",L,[t("div",j,[e[2]||(e[2]=t("h3",null,"ðŸ“Š æµ‹è¯•ç»“æžœ",-1)),o(b,{type:s.value.success?"success":"danger"},{default:n(()=>[v(r(s.value.success?"æˆåŠŸ":"å¤±è´¥"),1)]),_:1},8,["type"])]),t("div",z,[t("p",null,[e[3]||(e[3]=t("strong",null,"æ•°æ®æº:",-1)),v(" "+r(s.value.source),1)]),t("p",null,[e[4]||(e[4]=t("strong",null,"è®°å½•æ•°:",-1)),v(" "+r(s.value.count),1)]),t("p",null,[e[5]||(e[5]=t("strong",null,"å“åº”æ—¶é—´:",-1)),v(" "+r(s.value.responseTime)+"ms",1)])]),s.value.keyMetrics&&s.value.keyMetrics.length>0?(c(),d("div",F,[e[6]||(e[6]=t("h4",null,"ðŸ“ˆ å…³é”®æŒ‡æ ‡",-1)),t("div",G,[(c(!0),d(C,null,M(s.value.keyMetrics,i=>(c(),d("div",{key:i.label,class:"metric-card"},[t("div",H,r(i.label),1),t("div",I,r(i.value),1),t("div",{class:R(["metric-trend",i.trend])},r(i.trend==="up"?"ðŸ“ˆ":i.trend==="down"?"ðŸ“‰":"âž¡ï¸"),3)]))),128))])])):D("",!0),s.value.tableData&&s.value.tableData.length>0?(c(),d("div",X,[e[7]||(e[7]=t("h4",null,"ðŸ“‹ æ•°æ®è¡¨æ ¼",-1)),o(y,{data:s.value.tableData,style:{width:"100%"},stripe:"",border:"",size:"small","max-height":"400","header-cell-style":{background:"#f8fafc",color:"#374151",fontWeight:"600"}},{default:n(()=>[(c(!0),d(C,null,M(s.value.tableData[0]||{},(i,_)=>(c(),P(a,{key:_,prop:_,label:_,"show-overflow-tooltip":""},{default:n(k=>[t("span",{class:R(B(_,k.row[_]))},r(k.row[_]),3)]),_:2},1032,["prop","label"]))),128))]),_:1},8,["data"])])):D("",!0),t("div",A,[e[8]||(e[8]=t("h4",null,"ðŸ” åŽŸå§‹å“åº”æ•°æ®",-1)),o(N,null,{default:n(()=>[o(u,{title:"æŸ¥çœ‹åŽŸå§‹JSONæ•°æ®",name:"raw"},{default:n(()=>[t("pre",null,r(JSON.stringify(s.value.rawResponse,null,2)),1)]),_:1})]),_:1})])])):D("",!0)])])}}},Z=V(K,[["__scopeId","data-v-f2e13260"]]);export{Z as default};
