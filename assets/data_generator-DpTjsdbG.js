import{at as v,au as O}from"./index-Bo1zM2q5.js";import"./element-plus-DR-erZ3X.js";import"./echarts-Dfqt_Pbx.js";const j=["重庆工厂","深圳工厂","南昌工厂","宜宾工厂"],x=["中央库存","重庆库存","深圳库存"],A={正常:.7,风险:.2,冻结:.1},C={质量问题:["不良率超标","安规不合格","外观不良","性能测试异常"],供应商问题:["供应商资质审核不通过","批次混乱","交期延误"],技术参数:["材料参数偏差","性能不稳定","兼容性问题"],包装问题:["包装破损","标签错误","防护不足"],其他:["文档不全","内部流程问题","未知原因"]},K=new Set;function F(){let e;do e=(Math.floor(Math.random()*9e5)+1e5).toString();while(K.has(e));return K.add(e),e}function r(e){return e[Math.floor(Math.random()*e.length)]}function k(e){const o=Object.keys(e),a=Object.values(e),n=a.reduce((c,s)=>c+s,0);let t=Math.random()*n;for(let c=0;c<o.length;c++)if(t-=a[c],t<=0)return o[c];return o[0]}function $(e=0,o=515){const a=new Date(2024,0,1),n=new Date(a);n.setDate(a.getDate()+e);const t=new Date(a);return t.setDate(a.getDate()+Math.min(o,515)),new Date(n.getTime()+Math.random()*(t.getTime()-n.getTime()))}function w(e){return e.toLocaleDateString()+" "+e.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}function E(e){const o=e.getFullYear(),a=(e.getMonth()+1).toString().padStart(2,"0"),n=e.getDate().toString().padStart(2,"0");return`${o}-${a}-${n}`}function P(e){const o=e==="中央库存"?"C":e==="重庆库存"?"Q":e==="深圳库存"?"S":"X",a=Math.floor(Math.random()*5)+1,n=Math.floor(Math.random()*30)+1;return`${o}区-${String(a).padStart(2,"0")}-${String(n).padStart(2,"0")}`}function z(){return k(A)}function W(e){const o=Math.random();return e==="冻结"?o<.6?"不合格":r(["风险物料(来料)","风险物料(实验室)","风险物料(产线)"]):e==="风险"?o<.3?"待检":o<.7?r(["风险物料(来料)","风险物料(实验室)","风险物料(产线)"]):"合格":o<.05?"待检":o<.1?r(["风险物料(来料)","风险物料(实验室)","风险物料(产线)"]):"合格"}function X(e=100){const o=O(),a=[];for(let n=0;n<e;n++){const t=r(o),c=v(t.name),s=r(j);s.charAt(0);const f=r(x),u=P(f);t.name.substring(0,2);const D=F(),M=z(),h=W(M),l=$(1,30);let m=null;if(t.shelf_life_months){const i=new Date,g=Math.random();g<.05?i.setMonth(i.getMonth()-Math.floor(Math.random()*3)):g<.15?i.setMonth(i.getMonth()+Math.floor(Math.random()*2)+1):i.setMonth(i.getMonth()+Math.floor(Math.random()*(t.shelf_life_months-3))+3),m=i.toLocaleDateString()}let d;t.unit==="个"||t.unit==="片"?d=Math.floor(Math.random()*5e3)+100:d=Math.floor(Math.random()*500)+50;const p={id:n+1,batch_code:D,material_code:t.code_prefix+Math.floor(Math.random()*1e4).toString().padStart(6,"0"),material_name:t.name,category:t.category,factory:s,warehouse:f,location:u,quantity:d,unit:t.unit,supplier:c,status:M,quality:h,inspectionDate:w(l),shelfLife:m,risk_level:t.risk_level,last_updated:w(new Date),freeze_reason:M==="冻结"?`${r(Object.keys(C))}-${r(C[r(Object.keys(C))])}`:null,freeze_date:M==="冻结"?w($(1,15)):null,frozen_by:M==="冻结"?r(["系统","张经理","李经理","王经理","质量部"]):null};a.push(p)}return a}function N(e,o=50){const a=[],n={};return e.forEach(t=>{if(!getMaterialInfo(t.material_name))return;const s=Math.floor(Math.random()*3)+3;n[t.batch_code]=s;const f=new Date(t.inspectionDate.split(" ")[0]);for(let u=0;u<s;u++){const D=new Date(f);D.setDate(D.getDate()+Math.floor(Math.random()*60)+1);const h=r(["X6827","S665LN","KI4K","X6828","X6831","KI5K","S662LN","S663LN","S664LN"]);let l;["X6827","S665LN","KI4K","X6828"].includes(h)?l="I6789":["X6831","KI5K"].includes(h)?l="I6788":l="I6787";const m=Math.random()<.5?"新品测试":"量产例行",d=Math.random()<.9,p=d?"合格":"不合格";let i="";if(!d){const b={电池盖:["划伤","掉漆","起翘","色差"],中框:["变形","破裂","掉漆","尺寸异常"],手机卡托:["注塑不良","尺寸异常","断裂","毛刺"],侧键:["脱落","卡键","尺寸异常","松动"],装饰件:["掉色","偏位","脱落","掉色"],LCD显示屏:["漏光","暗点","花屏","偏色"],OLED显示屏:["闪屏","mura","亮点","亮线"],摄像头模组:["刮花","底座破裂","脏污","无法拍照"],电池:["起鼓","松动","漏液","电压不稳定"],充电器:["无法充电","外壳破裂","输出功率异常","发热异常"],扬声器:["无声","杂音","音量小","破裂"],听筒:["无声","杂音","音量小","破裂"],保护套:["尺寸偏差","发黄","开孔错位","模具压痕"],标签:["脱落","错印","logo错误","尺寸异常"],包装盒:["破损","logo错误","错印","尺寸异常"]}[t.material_name]||["缺陷1","缺陷2","缺陷3","缺陷4"];if((Math.random()<.5?1:2)===1)i=r(b);else{const y=r(b);let L;do L=r(b);while(L===y);i=`${y},${L}`}}const g=t.batch_code.substring(0,4),S=Math.floor(Math.random()*1e6).toString().padStart(6,"0"),_={id:`TEST-${t.material_code}-${g}-${S}`,testDate:E(D),projectId:h,baselineId:l,material_code:t.material_code,material_name:t.material_name,batch_code:t.batch_code,supplier:t.supplier,testItem:m,result:p,defect:i};a.push(_)}}),a.sort((t,c)=>new Date(c.testDate)-new Date(t.testDate)),a}function R(e,o){const a=[],n={};return e.forEach(t=>{const c=Math.floor(Math.random()*4)+5;n[t.batch_code]=c;let s=null;o.forEach(f=>{if(f.batch_code===t.batch_code){const u=new Date(f.testDate);(!s||u>s)&&(s=u)}}),s||(s=new Date(t.inspectionDate.split(" ")[0]));for(let f=0;f<c;f++){const u=t.factory,D=r(["01线","02线","03线","04线"]),h=r(["X6827","S665LN","KI4K","X6828","X6831","KI5K","S662LN","S663LN","S664LN"]);let l;["X6827","S665LN","KI4K","X6828"].includes(h)?l="I6789":["X6831","KI5K"].includes(h)?l="I6788":l="I6787";const m=new Date(s);m.setDate(m.getDate()+Math.floor(Math.random()*30)+1);let d;Math.random()<.8?d=(Math.random()*5).toFixed(1)+"%":d=(5+Math.random()*5).toFixed(1)+"%";let p="";if(parseFloat(d)>.5){const S={电池盖:["划伤","掉漆","起翘","色差"],中框:["变形","破裂","掉漆","尺寸异常"],手机卡托:["注塑不良","尺寸异常","断裂","毛刺"],侧键:["脱落","卡键","尺寸异常","松动"],装饰件:["掉色","偏位","脱落","掉色"],LCD显示屏:["漏光","暗点","花屏","偏色"],OLED显示屏:["闪屏","mura","亮点","亮线"],摄像头模组:["刮花","底座破裂","脏污","无法拍照"],电池:["起鼓","松动","漏液","电压不稳定"],充电器:["无法充电","外壳破裂","输出功率异常","发热异常"],扬声器:["无声","杂音","音量小","破裂"],听筒:["无声","杂音","音量小","破裂"],保护套:["尺寸偏差","发黄","开孔错位","模具压痕"],标签:["脱落","错印","logo错误","尺寸异常"],包装盒:["破损","logo错误","错印","尺寸异常"]}[t.material_name]||["缺陷1","缺陷2","缺陷3","缺陷4"];if((Math.random()<.5?1:2)===1)p=r(S);else{const _=r(S);let I;do I=r(S);while(I===_);p=`${_},${I}`}}const i={id:`PROD-${Math.floor(Math.random()*1e6).toString().padStart(6,"0")}`,factory:u,productionLine:D,baselineId:l,projectId:h,material_code:t.material_code,material_name:t.material_name,supplier:t.supplier,batch_code:t.batch_code,defectRate:d,defect:p,inspectionDate:E(m)};a.push(i)}}),a.sort((t,c)=>new Date(c.inspectionDate)-new Date(t.inspectionDate)),a}function q(){const e=Math.floor(200*(Math.random()*.1+.95)),o=X(e),a=N(o),n=R(o,a);return{inventory:o,inspection:a,production:n}}const Y={generateInventoryData:X,generateInspectionData:N,generateProductionData:R,generateCompleteDataset:q};export{Y as default,q as generateCompleteDataset,N as generateInspectionData,X as generateInventoryData,R as generateProductionData};
