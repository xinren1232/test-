import{a as S,v as l}from"./VoiceServiceManager-2sv0FYbn.js";import{a as T}from"./index-Bo1zM2q5.js";import{S as r,T as $,c as v,o as d,a as e,b as _,n as b,t as i,F as C,r as x}from"./element-plus-DR-erZ3X.js";import"./echarts-Dfqt_Pbx.js";const Q={class:"test-voice-ai"},V={class:"test-sections"},w={class:"test-section"},E={class:"status-icon"},M={class:"status-info"},R={class:"status-detail"},z=["disabled"],B={key:0,class:"test-result"},D={class:"test-section"},F={class:"status-icon"},N={class:"status-info"},U={class:"status-detail"},J={class:"voice-controls"},O=["disabled"],j=["disabled"],q={key:0,class:"voice-transcript"},G={class:"interim"},H={key:1,class:"voice-transcript"},K={class:"final"},P={class:"confidence"},W={class:"test-section"},X=["disabled"],Y={key:0,class:"test-log"},Z={class:"log-time"},ss={class:"log-message"},es={__name:"TestVoiceAI",setup(ts){const u=r({available:!1,error:null}),a=r({isSupported:!1,isListening:!1,isSpeaking:!1}),n=r({final:"",interim:"",confidence:0}),g=r(!1),m=r(""),p=r(!1),c=r([]);$(async()=>{console.log("ðŸ§ª åˆå§‹åŒ–è¯­éŸ³AIæµ‹è¯•é¡µé¢");try{const s=await S.initialize();u.value={available:s,error:s?null:"AIæœåŠ¡åˆå§‹åŒ–å¤±è´¥"}}catch(s){u.value={available:!1,error:s.message}}a.value=l.getStatus(),l.setCallbacks({onResult:s=>{console.log("ðŸŽ¤ æµ‹è¯•é¡µé¢æ”¶åˆ°è¯­éŸ³è¯†åˆ«ç»“æžœ:",s),n.value=s,t(`è¯­éŸ³è¯†åˆ«: final="${s.final}", interim="${s.interim}", confidence=${s.confidence}`)},onError:s=>{console.error("è¯­éŸ³é”™è¯¯:",s),a.value.isListening=!1,t(`è¯­éŸ³è¯†åˆ«é”™è¯¯: ${s}`)},onStart:()=>{a.value.isListening=!0,t("è¯­éŸ³è¯†åˆ«å¼€å§‹")},onEnd:()=>{a.value.isListening=!1,t("è¯­éŸ³è¯†åˆ«ç»“æŸ")},onSpeechStart:()=>{a.value.isSpeaking=!0,t("è¯­éŸ³æ’­æ”¾å¼€å§‹")},onSpeechEnd:()=>{a.value.isSpeaking=!1,t("è¯­éŸ³æ’­æ”¾ç»“æŸ")}});const t=s=>{c.value||(c.value=[]),c.value.push({timestamp:new Date,message:s}),console.log("ðŸ“ æµ‹è¯•æ—¥å¿—:",s)}});const h=async()=>{g.value=!0;try{const t=await S.analyzeUserIntent("æµ‹è¯•æŸ¥è¯¢æ·±åœ³å·¥åŽ‚çš„åº“å­˜æƒ…å†µ");m.value=JSON.stringify(t,null,2)}catch(t){m.value=`æµ‹è¯•å¤±è´¥: ${t.message}`}finally{g.value=!1}},I=()=>{a.value.isListening?l.stopListening():(n.value={final:"",interim:"",confidence:0},l.startListening())},k=()=>{l.speak("æ‚¨å¥½ï¼Œæˆ‘æ˜¯å°Qï¼Œæ‚¨çš„ä¸“å±žQMSé—®ç­”åŠ©æ‰‹ï¼è¯­éŸ³åŠŸèƒ½æ­£å¸¸å·¥ä½œï¼Œæœ‰ä»€ä¹ˆé—®é¢˜å°½ç®¡é—®æˆ‘å§ï¼")},y=()=>{p.value=!0,c.value=[],o("å¼€å§‹ç»¼åˆæµ‹è¯•"),o("è¯·è¯´è¯ï¼Œæˆ‘ä¼šè¯†åˆ«æ‚¨çš„è¯­éŸ³ï¼Œç„¶åŽç”¨AIåˆ†æžå¹¶è¯­éŸ³å›žå¤"),n.value={final:"",interim:"",confidence:0},l.startListening(),l.onResult,l.setCallbacks({...l,onResult:async t=>{if(n.value=t,t.final&&t.final.trim()){o(`è¯­éŸ³è¯†åˆ«å®Œæˆ: ${t.final}`);try{o("æ­£åœ¨è¿›è¡ŒAIåˆ†æž...");const s=await S.analyzeUserIntent(t.final);o(`AIåˆ†æžå®Œæˆ: ${s.intent}`);const f=`æˆ‘æ˜¯å°Qï¼æˆ‘å¬åˆ°æ‚¨è¯´ï¼š"${t.final}"ã€‚æ ¹æ®AIåˆ†æžï¼Œè¿™æ˜¯ä¸€ä¸ª${s.intent}ç±»åž‹çš„é—®é¢˜ã€‚æœ‰ä»€ä¹ˆå…¶ä»–é—®é¢˜éšæ—¶é—®æˆ‘å“¦ï¼`;o(`ç”Ÿæˆå›žå¤: ${f}`),o("å¼€å§‹è¯­éŸ³æ’­æ”¾å›žå¤..."),l.speak(f)}catch(s){o(`AIåˆ†æžå¤±è´¥: ${s.message}`)}finally{p.value=!1}}},onEnd:()=>{a.value.isListening=!1,p.value&&!n.value.final&&(o("æœªè¯†åˆ«åˆ°è¯­éŸ³ï¼Œæµ‹è¯•ç»“æŸ"),p.value=!1)}})},o=t=>{c.value.push({timestamp:new Date,message:t})},A=t=>t.toLocaleTimeString();return(t,s)=>(d(),v("div",Q,[s[10]||(s[10]=e("div",{class:"header"},[e("h1",null,"ðŸŽ¤ å°Qè¯­éŸ³AIåŠŸèƒ½æµ‹è¯•"),e("p",null,"æµ‹è¯•QMSé—®ç­”åŠ©æ‰‹-å°Qçš„è¯­éŸ³è¯†åˆ«ã€AIåˆ†æžå’Œè¯­éŸ³åˆæˆåŠŸèƒ½")],-1)),e("div",V,[e("div",w,[s[2]||(s[2]=e("h2",null,"ðŸ¤– AIæœåŠ¡æµ‹è¯•",-1)),e("div",{class:b(["status-card",{success:u.value.available,error:!u.value.available}])},[e("div",E,i(u.value.available?"âœ…":"âŒ"),1),e("div",M,[s[0]||(s[0]=e("div",{class:"status-title"},"AIæœåŠ¡çŠ¶æ€",-1)),e("div",R,i(u.value.available?"æœåŠ¡æ­£å¸¸":u.value.error||"æœåŠ¡ä¸å¯ç”¨"),1)])],2),e("button",{onClick:h,disabled:g.value,class:"test-button"},i(g.value?"æµ‹è¯•ä¸­...":"æµ‹è¯•AIæœåŠ¡"),9,z),m.value?(d(),v("div",B,[s[1]||(s[1]=e("h4",null,"AIæµ‹è¯•ç»“æžœï¼š",-1)),e("pre",null,i(m.value),1)])):_("",!0)]),e("div",D,[s[6]||(s[6]=e("h2",null,"ðŸŽ¤ è¯­éŸ³æœåŠ¡æµ‹è¯•",-1)),e("div",{class:b(["status-card",{success:a.value.isSupported,error:!a.value.isSupported}])},[e("div",F,i(a.value.isSupported?"âœ…":"âŒ"),1),e("div",N,[s[3]||(s[3]=e("div",{class:"status-title"},"è¯­éŸ³æœåŠ¡çŠ¶æ€",-1)),e("div",U,i(a.value.isSupported?"æµè§ˆå™¨æ”¯æŒè¯­éŸ³åŠŸèƒ½":"æµè§ˆå™¨ä¸æ”¯æŒè¯­éŸ³åŠŸèƒ½"),1)])],2),e("div",J,[e("button",{onClick:I,disabled:!a.value.isSupported,class:b(["voice-button",{recording:a.value.isListening}])},i(a.value.isListening?"ðŸ”´ åœæ­¢å½•éŸ³":"ðŸŽ¤ å¼€å§‹å½•éŸ³"),11,O),e("button",{onClick:k,disabled:!a.value.isSupported||a.value.isSpeaking,class:"test-button"},i(a.value.isSpeaking?"ðŸ”Š æ’­æ”¾ä¸­...":"ðŸ”‰ æµ‹è¯•è¯­éŸ³æ’­æ”¾"),9,j)]),n.value.interim?(d(),v("div",q,[s[4]||(s[4]=e("h4",null,"è¯†åˆ«ä¸­ï¼š",-1)),e("p",G,i(n.value.interim),1)])):_("",!0),n.value.final?(d(),v("div",H,[s[5]||(s[5]=e("h4",null,"è¯†åˆ«ç»“æžœï¼š",-1)),e("p",K,i(n.value.final),1),e("p",P,"ç½®ä¿¡åº¦: "+i((n.value.confidence*100).toFixed(1))+"%",1)])):_("",!0)]),e("div",W,[s[8]||(s[8]=e("h2",null,"ðŸš€ ç»¼åˆåŠŸèƒ½æµ‹è¯•",-1)),s[9]||(s[9]=e("p",null,"è¯´è¯ â†’ AIåˆ†æž â†’ è¯­éŸ³å›žå¤",-1)),e("button",{onClick:y,disabled:!a.value.isSupported||!u.value.available||p.value,class:"comprehensive-button"},i(p.value?"æµ‹è¯•è¿›è¡Œä¸­...":"å¼€å§‹ç»¼åˆæµ‹è¯•"),9,X),c.value.length>0?(d(),v("div",Y,[s[7]||(s[7]=e("h4",null,"æµ‹è¯•æ—¥å¿—ï¼š",-1)),(d(!0),v(C,null,x(c.value,(f,L)=>(d(),v("div",{key:L,class:"log-item"},[e("span",Z,i(A(f.timestamp)),1),e("span",ss,i(f.message),1)]))),128))])):_("",!0)])])]))}},os=T(es,[["__scopeId","data-v-322d779f"]]);export{os as default};
