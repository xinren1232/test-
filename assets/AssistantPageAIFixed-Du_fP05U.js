import{S as f,$ as R,c,o as l,a as n,O as p,a0 as y,a1 as G,P as h,e as A,t as d,a2 as b,F as $,r as w,a3 as K,_ as U,a4 as W,a5 as z,a6 as X,a7 as T,a8 as Y,a9 as Q,b as _,X as M,n as E,aa as Z}from"./element-plus-DR-erZ3X.js";import{a as ee}from"./index-Bo1zM2q5.js";import"./echarts-Dfqt_Pbx.js";const te={class:"ai-assistant-container"},se={class:"top-header"},ne={class:"header-right"},ie={class:"two-column-layout"},ae={class:"left-column"},re={class:"chat-body"},oe={key:0,class:"welcome-container"},le={class:"welcome-content"},ce={class:"welcome-subtitle"},de={class:"suggested-queries"},ue={class:"query-buttons"},ye={key:1,class:"message-list"},he={class:"message-avatar"},ve={class:"message-content"},me={class:"message-sender"},pe={class:"message-bubble"},_e={key:0,class:"ai-message"},ge={key:0,class:"thinking-process"},fe={class:"thinking-header"},ke={key:1,class:"ai-content"},Ie=["innerHTML"],Ae=["innerHTML"],$e={class:"chat-footer"},we={class:"input-container"},Se={class:"right-column"},be={class:"panel-header"},Me={class:"analysis-content"},xe={key:0,class:"empty-analysis"},De={key:1,class:"analysis-results"},ze={key:0,class:"metrics-section"},Ee={class:"metrics-grid"},Te={class:"metric-value"},Qe={class:"metric-name"},Fe={key:1,class:"insights-section"},Le={class:"insights-list"},Ce={class:"insight-icon"},Pe={class:"insight-content"},Be={class:"insight-title"},Oe={class:"insight-description"},Ve={key:2,class:"recommendations-section"},Ne={class:"recommendations-list"},je={class:"rec-priority"},qe={class:"rec-content"},He={class:"rec-title"},Je={class:"rec-description"},Re={key:3,class:"sources-section"},Ge={class:"sources-list"},Ke={__name:"AssistantPageAIFixed",setup(Ue){const g=f(""),v=f([]),m=f(!1),F=f(""),L=f(["åˆ†ææ·±åœ³å·¥å‚çš„æ•´ä½“è´¨é‡çŠ¶å†µï¼ŒåŒ…æ‹¬åº“å­˜é£é™©å’Œç”Ÿäº§è¡¨ç°","è¯„ä¼°ç´«å…‰ä¾›åº”å•†çš„è´¨é‡è¡¨ç°å’Œé£é™©çŠ¶å†µ","ä¸ºä»€ä¹ˆæœ€è¿‘çš„ç”Ÿäº§ä¸è‰¯ç‡æœ‰æ‰€ä¸Šå‡ï¼Ÿè¯·åˆ†æåŸå› ","å¦‚ä½•ä¼˜åŒ–å½“å‰çš„è´¨é‡ç®¡ç†æµç¨‹ï¼Ÿ"]),C=f(["æŸ¥è¯¢æ·±åœ³å·¥å‚çš„åº“å­˜","æ˜¾ç¤ºé£é™©çŠ¶æ€çš„ç‰©æ–™","æŸ¥è¯¢ç´«å…‰ä¾›åº”å•†çš„æ•°æ®","æ˜¾ç¤ºæµ‹è¯•ä¸åˆæ ¼çš„è®°å½•"]),P=R(()=>v.value.length===0),u=f({hasData:!1,status:null,keyMetrics:[],insights:[],recommendations:[],dataSources:[]}),B=s=>{switch(s){case"analyzing":return"warning";case"completed":return"success";case"error":return"danger";default:return"info"}},O=s=>{switch(s){case"analyzing":return"åˆ†æä¸­";case"completed":return"åˆ†æå®Œæˆ";case"error":return"åˆ†æå¤±è´¥";default:return"ç­‰å¾…ä¸­"}},V=()=>{console.log("AIæ¨¡å¼åˆ‡æ¢:",m.value)},N=s=>{g.value=s,x()},x=async()=>{const s=g.value.trim();if(!s)return;F.value=s,v.value.push({sender:"user",text:s});const e=g.value;g.value="";const t=v.value.length;m.value?(v.value.push({sender:"assistant",type:"ai_streaming",analysisPhase:"ğŸ¤– AIæ­£åœ¨åˆ†ææ‚¨çš„é—®é¢˜...",isLoading:!0,isAI:!0}),u.value.status="analyzing",u.value.hasData=!0,await j(e,t)):(v.value.push({sender:"assistant",text:"æˆ‘æ­£åœ¨æ€è€ƒæ‚¨çš„é—®é¢˜ï¼Œè¯·ç¨å€™...",isLoading:!0}),await H(e,t))},k={getData(){const s=JSON.parse(localStorage.getItem("inventoryData")||"[]"),e=JSON.parse(localStorage.getItem("testData")||"[]"),t=JSON.parse(localStorage.getItem("productionData")||"[]"),i=JSON.parse(localStorage.getItem("batchData")||"[]");return{inventoryData:s,testData:e,productionData:t,batchData:i}},recognizeIntent(s){const e=s.toLowerCase();return e.includes("åº“å­˜")||e.includes("ç‰©æ–™")||e.includes("ä»“åº“")?e.includes("é£é™©")||e.includes("å†»ç»“")?"inventory_risk":e.includes("æ·±åœ³")||e.includes("ä¸Šæµ·")||e.includes("åŒ—äº¬")?"inventory_by_factory":e.includes("ä¾›åº”å•†")||e.includes("BOE")||e.includes("èšé¾™")?"inventory_by_supplier":"inventory_general":e.includes("è´¨é‡")||e.includes("æµ‹è¯•")||e.includes("æ£€éªŒ")||e.includes("ä¸åˆæ ¼")?e.includes("ä¸åˆæ ¼")||e.includes("å¤±è´¥")||e.includes("FAIL")?"quality_issues":e.includes("åˆæ ¼ç‡")||e.includes("ç»Ÿè®¡")?"quality_statistics":"quality_general":e.includes("ç”Ÿäº§")||e.includes("ä¸è‰¯ç‡")||e.includes("äº§çº¿")?e.includes("ä¸è‰¯ç‡")||e.includes("ç¼ºé™·")?"production_defects":"production_general":e.includes("åˆ†æ")||e.includes("è¶‹åŠ¿")||e.includes("å¯¹æ¯”")?"analysis_request":"general_query"},executeQuery(s,e,t){const{inventoryData:i,testData:r,productionData:o,batchData:a}=t;switch(s){case"inventory_risk":return this.analyzeInventoryRisk(i,e);case"inventory_by_factory":return this.analyzeInventoryByFactory(i,e);case"inventory_by_supplier":return this.analyzeInventoryBySupplier(i,e);case"quality_issues":return this.analyzeQualityIssues(r,e);case"quality_statistics":return this.analyzeQualityStatistics(r,e);case"production_defects":return this.analyzeProductionDefects(o,e);case"analysis_request":return this.performComprehensiveAnalysis(t,e);default:return this.handleGeneralQuery(t,e)}},analyzeInventoryRisk(s,e){const t=s.filter(a=>a.status==="é£é™©"||a.status==="å†»ç»“"),i=s.length,r=(t.length/i*100).toFixed(1),o={};return t.forEach(a=>{o[a.factory]=(o[a.factory]||0)+1}),{type:"analysis",title:"åº“å­˜é£é™©åˆ†æç»“æœ",summary:`å‘ç° ${t.length} é¡¹é£é™©åº“å­˜ï¼Œå æ€»åº“å­˜çš„ ${r}%`,keyMetrics:[{name:"é£é™©ç‰©æ–™æ•°",value:t.length,trend:"warning"},{name:"é£é™©æ¯”ä¾‹",value:`${r}%`,trend:"warning"},{name:"æ¶‰åŠå·¥å‚",value:Object.keys(o).length,trend:"info"}],insights:[{icon:"âš ï¸",title:"é£é™©é›†ä¸­åº¦",description:`${Object.keys(o)[0]||"æ·±åœ³å·¥å‚"}é£é™©ç‰©æ–™æœ€å¤šï¼Œéœ€é‡ç‚¹å…³æ³¨`,priority:"high"},{icon:"ğŸ“Š",title:"é£é™©ç±»å‹",description:"ä¸»è¦é£é™©æ¥æºäºåº“å­˜çŠ¶æ€å¼‚å¸¸å’Œä¾›åº”é“¾é—®é¢˜",priority:"medium"}],recommendations:[{priority:"é«˜",title:"ç«‹å³å¤„ç†",description:"ä¼˜å…ˆå¤„ç†å†»ç»“çŠ¶æ€çš„åº“å­˜ç‰©æ–™"},{priority:"ä¸­",title:"ç›‘æ§é¢„è­¦",description:"å»ºç«‹é£é™©åº“å­˜å®æ—¶ç›‘æ§æœºåˆ¶"}],data:t.slice(0,10),dataSources:["åº“å­˜æ•°æ®","çŠ¶æ€ç›‘æ§"]}},analyzeInventoryByFactory(s,e){const t=this.extractFactory(e),i=t?s.filter(o=>o.factory===t):s,r={};return i.forEach(o=>{r[o.status]=(r[o.status]||0)+1}),{type:"analysis",title:`${t||"å…¨éƒ¨å·¥å‚"}åº“å­˜åˆ†æ`,summary:`${t||"å…¨éƒ¨å·¥å‚"}å…±æœ‰ ${i.length} é¡¹åº“å­˜ç‰©æ–™`,keyMetrics:[{name:"æ€»ç‰©æ–™æ•°",value:i.length,trend:"info"},{name:"æ­£å¸¸çŠ¶æ€",value:r.æ­£å¸¸||0,trend:"up"},{name:"é£é™©çŠ¶æ€",value:r.é£é™©||0,trend:"warning"}],insights:[{icon:"ğŸ“¦",title:"åº“å­˜çŠ¶å†µ",description:`æ­£å¸¸åº“å­˜å æ¯” ${((r.æ­£å¸¸||0)/i.length*100).toFixed(1)}%`,priority:"medium"}],recommendations:[{priority:"ä¸­",title:"åº“å­˜ä¼˜åŒ–",description:"å»ºè®®ä¼˜åŒ–åº“å­˜ç»“æ„ï¼Œæé«˜å‘¨è½¬ç‡"}],data:i.slice(0,10),dataSources:["åº“å­˜æ•°æ®","å·¥å‚ä¿¡æ¯"]}},analyzeQualityIssues(s,e){const t=s.filter(a=>a.testResult==="FAIL"),i=s.length,r=(t.length/i*100).toFixed(1),o={};return t.forEach(a=>{a.defectPhenomena&&(o[a.defectPhenomena]=(o[a.defectPhenomena]||0)+1)}),{type:"analysis",title:"è´¨é‡é—®é¢˜åˆ†æç»“æœ",summary:`å‘ç° ${t.length} é¡¹ä¸åˆæ ¼æµ‹è¯•ï¼Œä¸åˆæ ¼ç‡ä¸º ${r}%`,keyMetrics:[{name:"ä¸åˆæ ¼æ•°",value:t.length,trend:"warning"},{name:"ä¸åˆæ ¼ç‡",value:`${r}%`,trend:"warning"},{name:"ç¼ºé™·ç±»å‹",value:Object.keys(o).length,trend:"info"}],insights:[{icon:"ğŸ”",title:"ä¸»è¦ç¼ºé™·",description:`${Object.keys(o)[0]||"è¡¨é¢åˆ’ç—•"}æ˜¯æœ€å¸¸è§çš„è´¨é‡é—®é¢˜`,priority:"high"},{icon:"ğŸ“ˆ",title:"è´¨é‡è¶‹åŠ¿",description:"éœ€è¦åŠ å¼ºè´¨é‡æ§åˆ¶å’Œæ£€éªŒæµç¨‹",priority:"medium"}],recommendations:[{priority:"é«˜",title:"è´¨é‡æ”¹è¿›",description:"é’ˆå¯¹ä¸»è¦ç¼ºé™·ç±»å‹åˆ¶å®šæ”¹è¿›æªæ–½"},{priority:"ä¸­",title:"æµç¨‹ä¼˜åŒ–",description:"ä¼˜åŒ–æ£€éªŒæµç¨‹ï¼Œæé«˜æ£€å‡ºç‡"}],data:t.slice(0,10),dataSources:["æµ‹è¯•æ•°æ®","è´¨é‡è®°å½•"]}},performComprehensiveAnalysis(s,e){const{inventoryData:t,testData:i,productionData:r}=s,o=t.length,a=t.filter(D=>D.status==="é£é™©").length,I=i.length,J=i.filter(D=>D.testResult==="FAIL").length,S=((I-J)/I*100).toFixed(1);return{type:"comprehensive",title:"IQEè´¨é‡ç®¡ç†ç»¼åˆåˆ†æ",summary:`åŸºäº ${o} é¡¹åº“å­˜ã€${I} é¡¹æµ‹è¯•ã€${r.length} é¡¹ç”Ÿäº§è®°å½•çš„ç»¼åˆåˆ†æ`,keyMetrics:[{name:"è´¨é‡åˆæ ¼ç‡",value:`${S}%`,trend:S>95?"up":"warning"},{name:"åº“å­˜é£é™©ç‡",value:`${(a/o*100).toFixed(1)}%`,trend:"warning"},{name:"æ•°æ®å®Œæ•´æ€§",value:"98.5%",trend:"up"}],insights:[{icon:"ğŸ¯",title:"æ•´ä½“è¡¨ç°",description:`è´¨é‡åˆæ ¼ç‡ ${S}%ï¼Œ${S>95?"è¡¨ç°è‰¯å¥½":"éœ€è¦æ”¹è¿›"}`,priority:S>95?"medium":"high"},{icon:"ğŸ“Š",title:"é£é™©çŠ¶å†µ",description:`${a} é¡¹é£é™©åº“å­˜éœ€è¦é‡ç‚¹å…³æ³¨`,priority:"medium"},{icon:"ğŸ”„",title:"æ”¹è¿›æœºä¼š",description:"åœ¨è´¨é‡æ§åˆ¶å’Œåº“å­˜ç®¡ç†æ–¹é¢å­˜åœ¨ä¼˜åŒ–ç©ºé—´",priority:"medium"}],recommendations:[{priority:"é«˜",title:"è´¨é‡æå‡",description:"é‡ç‚¹æ”¹è¿›ä¸åˆæ ¼ç‡è¾ƒé«˜çš„å·¥åº"},{priority:"é«˜",title:"é£é™©ç®¡æ§",description:"å»ºç«‹é£é™©åº“å­˜é¢„è­¦æœºåˆ¶"},{priority:"ä¸­",title:"æµç¨‹ä¼˜åŒ–",description:"ä¼˜åŒ–è´¨é‡ç®¡ç†æµç¨‹ï¼Œæé«˜æ•ˆç‡"}],dataSources:["åº“å­˜æ•°æ®","è´¨é‡æ£€æµ‹","ç”Ÿäº§è®°å½•","ç»¼åˆåˆ†æ"]}},handleGeneralQuery(s,e){return{type:"general",title:"æ™ºèƒ½é—®ç­”ç»“æœ",summary:`åŸºäºæ‚¨çš„é—®é¢˜"${e}"ï¼Œæˆ‘ä¸ºæ‚¨æä¾›ä»¥ä¸‹ä¿¡æ¯`,keyMetrics:[{name:"æ•°æ®æº",value:"4ä¸ª",trend:"info"},{name:"è¦†ç›–åº¦",value:"100%",trend:"up"}],insights:[{icon:"ğŸ’¡",title:"å»ºè®®",description:'è¯·å°è¯•æ›´å…·ä½“çš„é—®é¢˜ï¼Œå¦‚"æŸ¥è¯¢é£é™©åº“å­˜"æˆ–"åˆ†æè´¨é‡é—®é¢˜"',priority:"medium"}],recommendations:[{priority:"ä¸­",title:"ä¼˜åŒ–æŸ¥è¯¢",description:"ä½¿ç”¨æ›´å…·ä½“çš„å…³é”®è¯è·å¾—æ›´å‡†ç¡®çš„åˆ†æç»“æœ"}],dataSources:["æ™ºèƒ½é—®ç­”ç³»ç»Ÿ"]}},extractFactory(s){return s.includes("æ·±åœ³")?"æ·±åœ³å·¥å‚":s.includes("ä¸Šæµ·")?"ä¸Šæµ·å·¥å‚":s.includes("åŒ—äº¬")?"åŒ—äº¬å·¥å‚":null}},j=async(s,e)=>{try{v.value[e].analysisPhase="ğŸ¤– AIæ­£åœ¨ç†è§£æ‚¨çš„é—®é¢˜...",setTimeout(()=>{v.value[e].analysisPhase="ğŸ” æ­£åœ¨åˆ†æç›¸å…³æ•°æ®..."},800),setTimeout(()=>{v.value[e].analysisPhase="ğŸ“Š ç”Ÿæˆæ™ºèƒ½åˆ†æç»“æœ..."},1600),setTimeout(async()=>{const t=k.getData(),i=k.recognizeIntent(s),r=k.executeQuery(i,s,t),o=q(r,s);v.value[e]={sender:"assistant",type:"ai_streaming",aiContent:o,text:o,isLoading:!1,isAI:!0},u.value={hasData:!0,status:"completed",keyMetrics:r.keyMetrics||[],insights:r.insights||[],recommendations:r.recommendations||[],dataSources:r.dataSources||[]}},2400)}catch(t){console.error("AIæŸ¥è¯¢å¤±è´¥:",t),v.value[e]={sender:"assistant",text:"æŠ±æ­‰ï¼ŒAIåˆ†ææ—¶å‘ç”Ÿäº†é”™è¯¯ã€‚è¯·ç¨åå†è¯•ã€‚",isLoading:!1,isAI:!0}}},q=(s,e)=>{let t=`ğŸ¤– **AIåˆ†æå®Œæˆ**

`;return t+=`åŸºäºæ‚¨çš„é—®é¢˜"${e}"ï¼Œæˆ‘è¿›è¡Œäº†æ·±åº¦æ•°æ®åˆ†æï¼š

`,t+=`ğŸ“Š **${s.title}**
`,t+=`${s.summary}

`,s.keyMetrics&&s.keyMetrics.length>0&&(t+=`ğŸ¯ **å…³é”®æŒ‡æ ‡**ï¼š
`,s.keyMetrics.forEach(i=>{t+=`- ${i.name}: ${i.value}
`}),t+=`
`),s.insights&&s.insights.length>0&&(t+=`ğŸ’¡ **æ ¸å¿ƒæ´å¯Ÿ**ï¼š
`,s.insights.forEach(i=>{t+=`- ${i.title}: ${i.description}
`}),t+=`
`),s.recommendations&&s.recommendations.length>0&&(t+=`ğŸš€ **è¡ŒåŠ¨å»ºè®®**ï¼š
`,s.recommendations.forEach(i=>{t+=`- [${i.priority}ä¼˜å…ˆçº§] ${i.title}: ${i.description}
`}),t+=`
`),t+=`ğŸ“‹ **æ•°æ®æ¥æº**: ${(s.dataSources||[]).join("ã€")}

`,t+="âœ¨ è¿™æ˜¯åŸºäºæ‚¨å®é™…ä¸šåŠ¡æ•°æ®çš„AIæ™ºèƒ½åˆ†æç»“æœã€‚å¦‚éœ€æ›´è¯¦ç»†çš„ä¿¡æ¯ï¼Œè¯·æŸ¥çœ‹å³ä¾§åˆ†æé¢æ¿ã€‚",t},H=async(s,e)=>{try{setTimeout(()=>{var a;const t=k.getData(),i=k.recognizeIntent(s),r=k.executeQuery(i,s,t);let o=`ğŸ“‹ **åŸºç¡€æŸ¥è¯¢ç»“æœ**

`;o+=`${r.summary}

`,r.keyMetrics&&r.keyMetrics.length>0&&(o+=`ğŸ“Š **å…³é”®æ•°æ®**ï¼š
`,r.keyMetrics.slice(0,3).forEach(I=>{o+=`â€¢ ${I.name}: ${I.value}
`}),o+=`
`),r.data&&r.data.length>0&&(o+=`ğŸ“‹ **ç›¸å…³è®°å½•**: æ‰¾åˆ° ${r.data.length} æ¡ç›¸å…³æ•°æ®

`),o+="ğŸ’¡ **æç¤º**: å¼€å¯AIå¢å¼ºæ¨¡å¼å¯è·å¾—æ›´æ·±å…¥çš„åˆ†æå’Œä¸“ä¸šå»ºè®®",v.value[e]={sender:"assistant",text:o,isLoading:!1},u.value={hasData:!0,status:"completed",keyMetrics:((a=r.keyMetrics)==null?void 0:a.slice(0,3))||[],insights:[{icon:"ğŸ“‹",title:"åŸºç¡€æŸ¥è¯¢",description:"å·²å®ŒæˆåŸºç¡€æ•°æ®æŸ¥è¯¢ï¼Œå¼€å¯AIæ¨¡å¼è·å¾—æ›´å¤šæ´å¯Ÿ",priority:"medium"}],recommendations:[{priority:"ä¸­",title:"AIå¢å¼º",description:"å¼€å¯AIæ¨¡å¼è¿›è¡Œæ·±åº¦åˆ†æ"}],dataSources:r.dataSources||["åŸºç¡€æŸ¥è¯¢"]}},1e3)}catch(t){console.error("å¤„ç†å¤±è´¥:",t),v.value[e]={sender:"assistant",text:"æŠ±æ­‰ï¼Œå¤„ç†æ‚¨çš„é—®é¢˜æ—¶å‘ç”Ÿäº†é”™è¯¯ã€‚è¯·ç¨åå†è¯•ã€‚",isLoading:!1}}};return(s,e)=>(l(),c("div",te,[n("div",se,[e[2]||(e[2]=n("div",{class:"header-left"},[n("h2",null,"ğŸ¤– IQE AIå¢å¼ºåŠ©æ‰‹"),n("p",null,"æ™ºèƒ½è´¨é‡åˆ†æ Â· AIé©±åŠ¨æ´å¯Ÿ")],-1)),n("div",ne,[p(y(G),{modelValue:m.value,"onUpdate:modelValue":e[0]||(e[0]=t=>m.value=t),onChange:V,"active-text":"AIå¢å¼º","inactive-text":"åŸºç¡€æ¨¡å¼",class:"ai-switch"},null,8,["modelValue"]),p(y(b),{type:m.value?"success":"info",effect:"dark",size:"small"},{default:h(()=>[A(d(m.value?"AIæ¨¡å¼":"åŸºç¡€æ¨¡å¼"),1)]),_:1},8,["type"])])]),n("div",ie,[n("div",ae,[p(y(Q),{class:"chat-card",shadow:"never"},{footer:h(()=>[n("div",$e,[n("div",we,[p(y(K),{modelValue:g.value,"onUpdate:modelValue":e[1]||(e[1]=t=>g.value=t),placeholder:m.value?"è¯·è¾“å…¥å¤æ‚é—®é¢˜ï¼ŒAIå°†ä¸ºæ‚¨æ·±åº¦åˆ†æ...":"è¯·è¾“å…¥æ‚¨çš„é—®é¢˜...",onKeyup:U(x,["enter"]),clearable:"",size:"large",class:"input-with-send"},W({append:h(()=>[p(y(T),{onClick:x,disabled:!g.value.trim()},{default:h(()=>[p(y(z),null,{default:h(()=>[p(y(Y))]),_:1}),n("span",null,d(m.value?"AIåˆ†æ":"å‘é€"),1)]),_:1},8,["disabled"])]),_:2},[m.value?{name:"prepend",fn:h(()=>[p(y(z),null,{default:h(()=>[p(y(X))]),_:1})]),key:"0"}:void 0]),1032,["modelValue","placeholder"])])])]),default:h(()=>[n("div",re,[P.value?(l(),c("div",oe,[n("div",le,[e[3]||(e[3]=n("div",{class:"welcome-avatar"},[n("div",{class:"avatar-circle"},"ğŸ¤–")],-1)),e[4]||(e[4]=n("h2",{class:"welcome-title"},"æ¬¢è¿ä½¿ç”¨IQE AIå¢å¼ºåŠ©æ‰‹",-1)),n("p",ce,d(m.value?"ğŸ¤– AIå¢å¼ºæ¨¡å¼ï¼šæˆ‘å¯ä»¥è¿›è¡Œæ·±åº¦åˆ†æã€å¤æ‚æ¨ç†å’Œä¸“ä¸šå»ºè®®":"ğŸ“‹ åŸºç¡€æ¨¡å¼ï¼šæˆ‘å¯ä»¥å¿«é€ŸæŸ¥è¯¢æ•°æ®ã€ç”Ÿæˆå›¾è¡¨å’Œå›ç­”é—®é¢˜"),1),n("div",de,[n("h4",null,"ğŸ’¡ "+d(m.value?"AIå¢å¼ºæŸ¥è¯¢ç¤ºä¾‹":"åŸºç¡€æŸ¥è¯¢ç¤ºä¾‹"),1),n("div",ue,[(l(!0),c($,null,w(m.value?L.value:C.value,t=>(l(),M(y(T),{key:t,type:m.value?"success":"primary",plain:"",onClick:i=>N(t),class:"query-btn"},{default:h(()=>[A(d(t),1)]),_:2},1032,["type","onClick"]))),128))])])])])):(l(),c("div",ye,[(l(!0),c($,null,w(v.value,(t,i)=>(l(),c("div",{key:i,class:E(["message-item",{"is-user":t.sender==="user","is-ai":t.isAI}])},[n("div",he,d(t.sender==="user"?"ğŸ‘¤":"ğŸ¤–"),1),n("div",ve,[n("div",me,[A(d(t.sender==="user"?"æ‚¨":"AIåŠ©æ‰‹")+" ",1),t.isAI?(l(),M(y(b),{key:0,type:"success",size:"small"},{default:h(()=>e[5]||(e[5]=[A("AI")])),_:1,__:[5]})):_("",!0)]),n("div",pe,[t.type==="ai_streaming"?(l(),c("div",_e,[t.isLoading?(l(),c("div",ge,[n("div",fe,[p(y(z),{class:"loading-icon"},{default:h(()=>[p(y(Z))]),_:1}),n("span",null,d(t.analysisPhase||"AIæ­£åœ¨æ€è€ƒ..."),1)])])):_("",!0),t.aiContent?(l(),c("div",ke,[n("div",{innerHTML:t.aiContent},null,8,Ie)])):_("",!0)])):(l(),c("div",{key:1,innerHTML:t.text},null,8,Ae))])])],2))),128))]))])]),_:1})]),n("div",Se,[p(y(Q),{class:"analysis-panel",shadow:"never"},{header:h(()=>[n("div",be,[e[6]||(e[6]=n("h3",null,"ğŸ“Š åˆ†æç»“æœ",-1)),u.value.status?(l(),M(y(b),{key:0,type:B(u.value.status),size:"small"},{default:h(()=>[A(d(O(u.value.status)),1)]),_:1},8,["type"])):_("",!0)])]),default:h(()=>{var t,i,r,o;return[n("div",Me,[u.value.hasData?(l(),c("div",De,[(t=u.value.keyMetrics)!=null&&t.length?(l(),c("div",ze,[e[8]||(e[8]=n("h4",null,"ğŸ¯ å…³é”®æŒ‡æ ‡",-1)),n("div",Ee,[(l(!0),c($,null,w(u.value.keyMetrics,a=>(l(),c("div",{key:a.name,class:"metric-card"},[n("div",Te,d(a.value),1),n("div",Qe,d(a.name),1),n("div",{class:E(["metric-trend",a.trend])},d(a.trendText),3)]))),128))])])):_("",!0),(i=u.value.insights)!=null&&i.length?(l(),c("div",Fe,[e[9]||(e[9]=n("h4",null,"ğŸ’¡ æ ¸å¿ƒæ´å¯Ÿ",-1)),n("div",Le,[(l(!0),c($,null,w(u.value.insights,a=>(l(),c("div",{key:a.id,class:E(["insight-item",a.priority])},[n("div",Ce,d(a.icon),1),n("div",Pe,[n("div",Be,d(a.title),1),n("div",Oe,d(a.description),1)])],2))),128))])])):_("",!0),(r=u.value.recommendations)!=null&&r.length?(l(),c("div",Ve,[e[10]||(e[10]=n("h4",null,"ğŸš€ å»ºè®®è¡ŒåŠ¨",-1)),n("div",Ne,[(l(!0),c($,null,w(u.value.recommendations,a=>(l(),c("div",{key:a.id,class:"recommendation-item"},[n("div",je,d(a.priority),1),n("div",qe,[n("div",He,d(a.title),1),n("div",Je,d(a.description),1)])]))),128))])])):_("",!0),(o=u.value.dataSources)!=null&&o.length?(l(),c("div",Re,[e[11]||(e[11]=n("h4",null,"ğŸ“‹ æ•°æ®æ¥æº",-1)),n("div",Ge,[(l(!0),c($,null,w(u.value.dataSources,a=>(l(),M(y(b),{key:a,size:"small",class:"source-tag"},{default:h(()=>[A(d(a),1)]),_:2},1024))),128))])])):_("",!0)])):(l(),c("div",xe,e[7]||(e[7]=[n("div",{class:"empty-icon"},"ğŸ”",-1),n("h4",null,"ç­‰å¾…åˆ†æ",-1),n("p",null,"å‘é€é—®é¢˜åï¼ŒAIåˆ†æç»“æœå°†åœ¨è¿™é‡Œæ˜¾ç¤º",-1)])))])]}),_:1})])])]))}},Ze=ee(Ke,[["__scopeId","data-v-1b86de24"]]);export{Ze as default};
