import{S as u,aj as U,T as j,c as o,o as a,a as e,O as v,Q as k,P as f,e as I,F as _,r as h,b as T,_ as q,ai as G,t as l,X as H,n as V,V as $,W as J}from"./element-plus-DR-erZ3X.js";import{ax as W}from"./index-Bo1zM2q5.js";import"./echarts-Dfqt_Pbx.js";const X={class:"fullscreen-ai-assistant"},Y={class:"ai-header"},Z={class:"ai-controls"},ee={class:"ai-main-content"},te={class:"ai-left-panel"},se={class:"tools-list"},ne=["onClick"],ae={class:"tool-icon"},oe={class:"tool-info"},ie={class:"tool-name"},le={class:"tool-desc"},ce={class:"ai-center-panel"},re={class:"panel-header"},de={class:"quick-questions"},ue={class:"msg-avatar"},pe={key:0},me={key:1},ve={class:"msg-content"},_e={class:"msg-text"},he={class:"msg-time"},ye={key:0,class:"chat-msg ai loading"},ge={class:"input-section"},ke={class:"input-actions"},fe={class:"ai-right-panel"},Ie={class:"thinking-area"},we={key:0,class:"empty-state"},Ae={class:"step-header"},xe={class:"step-icon"},Ce={class:"step-title"},be={class:"step-status"},De={__name:"AIAssistantFullscreen",setup(Te){const E=W(),r=u(""),m=u([{type:"ai",content:"æ‚¨å¥½ï¼æˆ‘æ˜¯IQE AIæ™ºèƒ½åŠ©æ‰‹ã€‚æˆ‘å·²æ¥å…¥DeepSeekå¤§è¯­è¨€æ¨¡å‹ï¼Œå¯ä»¥ä¸ºæ‚¨æä¾›ä¸“ä¸šçš„è´¨é‡ç®¡ç†é—®ç­”æœåŠ¡ã€‚",timestamp:new Date}]),d=u(!1),w=u(!0),i=u([]),y=u(null),g={apiKey:"sk-cab797574abf4288bcfaca253191565d",baseURL:"https://api.deepseek.com",endpoint:"/chat/completions",model:"deepseek-chat"},S=u(["æŸ¥è¯¢å·¥å‚Açš„åº“å­˜æƒ…å†µ","åˆ†ææœ€è¿‘çš„è´¨é‡è¶‹åŠ¿","ç”Ÿæˆè´¨é‡æŠ¥å‘Š","ç»Ÿè®¡ä¸åˆæ ¼å“æ•°é‡","æŸ¥çœ‹ç”Ÿäº§çº¿çŠ¶æ€","æ£€æµ‹å¼‚å¸¸ç‰©æ–™æ‰¹æ¬¡"]),D=U([{name:"æ•°æ®åˆ†æå·¥å…·",icon:"ğŸ“Š",tools:[{name:"æ•°æ®åˆ†æ",icon:"ğŸ“Š",description:"åˆ†æè´¨é‡ç®¡ç†æ•°æ®"},{name:"ç»Ÿè®¡åˆ†æ",icon:"ğŸ“ˆ",description:"æ‰§è¡Œç»Ÿè®¡åˆ†æ"},{name:"æ•°å€¼è®¡ç®—",icon:"ğŸ§®",description:"æ‰§è¡Œæ•°å­¦è®¡ç®—"}]},{name:"å¯è§†åŒ–å·¥å…·",icon:"ğŸ“ˆ",tools:[{name:"å›¾è¡¨ç”Ÿæˆ",icon:"ğŸ“Š",description:"ç”Ÿæˆæ•°æ®å¯è§†åŒ–å›¾è¡¨"},{name:"æŠ¥å‘Šç”Ÿæˆ",icon:"ğŸ“„",description:"ç”Ÿæˆè´¨é‡åˆ†ææŠ¥å‘Š"}]},{name:"è”ç½‘å·¥å…·",icon:"ğŸŒ",tools:[{name:"ç½‘ç»œæœç´¢",icon:"ğŸ”",description:"æœç´¢ç›¸å…³ä¿¡æ¯"}]},{name:"è´¨é‡ç®¡ç†",icon:"ğŸ¯",tools:[{name:"åº“å­˜æŸ¥è¯¢",icon:"ğŸ“¦",description:"æŸ¥è¯¢åº“å­˜ä¿¡æ¯"},{name:"ç”Ÿäº§æŸ¥è¯¢",icon:"ğŸ­",description:"æŸ¥è¯¢ç”Ÿäº§æ•°æ®"},{name:"æ£€æµ‹æŸ¥è¯¢",icon:"ğŸ§ª",description:"æŸ¥è¯¢æ£€æµ‹ç»“æœ"}]}]),Q=s=>s?new Date(s).toLocaleTimeString():"",B=s=>({thinking:"ğŸ¤”",analysis:"ğŸ”",data_query:"ğŸ“Š",ai_call:"ğŸ¤–",response:"ğŸ’¬"})[s]||"âš™ï¸",M=s=>({processing:"å¤„ç†ä¸­...",completed:"å®Œæˆ",error:"é”™è¯¯"})[s]||s,b=()=>{J(()=>{y.value&&(y.value.scrollTop=y.value.scrollHeight)})},N=()=>{E.push("/")},K=s=>{const t=`è¯·ä½¿ç”¨${s.name}å·¥å…·å¸®æˆ‘${s.description}`;r.value=t,$.success(`å·²é€‰æ‹©å·¥å…·ï¼š${s.name}`)},P=s=>{r.value=s,A()},z=()=>{m.value=[{type:"ai",content:"å¯¹è¯å·²æ¸…ç©ºã€‚æ‚¨å¥½ï¼æˆ‘æ˜¯IQE AIæ™ºèƒ½åŠ©æ‰‹ï¼Œå·²æ¥å…¥DeepSeekå¤§è¯­è¨€æ¨¡å‹ã€‚",timestamp:new Date}],i.value=[],$.success("å¯¹è¯å·²æ¸…ç©º")},A=async()=>{if(!r.value.trim()||d.value)return;const s={type:"user",content:r.value,timestamp:new Date};m.value.push(s);const t=r.value;r.value="",b();try{await F(t)}catch(p){console.error("AIå¤„ç†é”™è¯¯:",p),m.value.push({type:"ai",content:"æŠ±æ­‰ï¼Œå¤„ç†æ‚¨çš„é—®é¢˜æ—¶å‡ºç°äº†é”™è¯¯ã€‚è¯·ç¨åé‡è¯•ã€‚",timestamp:new Date})}b()},F=async s=>{d.value=!0,i.value=[];try{i.value.push({type:"thinking",title:"ç†è§£é—®é¢˜",status:"processing"}),await x(500),i.value[0].status="completed",i.value.push({type:"data_query",title:"è·å–ä¸šåŠ¡æ•°æ®",status:"processing"}),await x(400),i.value[1].status="completed",i.value.push({type:"ai_call",title:"è°ƒç”¨AIå¤§æ¨¡å‹",status:"processing"});let t;if(w.value)try{t=await L(s)}catch(p){console.error("AIè°ƒç”¨å¤±è´¥:",p),t=`æŠ±æ­‰ï¼ŒAIæœåŠ¡æš‚æ—¶ä¸å¯ç”¨ã€‚åŸºäºæ‚¨çš„é—®é¢˜"${s}"ï¼Œæˆ‘ä¸ºæ‚¨æä¾›åŸºç¡€åˆ†æ...`}else t=`åŸºç¡€æ¨¡å¼å›å¤ï¼šæˆ‘æ”¶åˆ°äº†æ‚¨çš„é—®é¢˜"${s}"ã€‚è¿™æ˜¯ä¸€ä¸ªå…³äºè´¨é‡ç®¡ç†çš„é—®é¢˜ï¼Œæˆ‘æ­£åœ¨ä¸ºæ‚¨åˆ†æç›¸å…³æ•°æ®...`;i.value[2].status="completed",i.value.push({type:"response",title:"ç”Ÿæˆå›ç­”",status:"processing"}),await x(200),i.value[3].status="completed",m.value.push({type:"ai",content:t,timestamp:new Date})}catch(t){throw console.error("å¤„ç†AIå“åº”æ—¶å‡ºé”™:",t),t}finally{d.value=!1}},L=async s=>{const t=await fetch(`${g.baseURL}${g.endpoint}`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${g.apiKey}`},body:JSON.stringify({model:g.model,messages:[{role:"system",content:"ä½ æ˜¯IQEè´¨é‡ç®¡ç†ç³»ç»Ÿçš„AIæ™ºèƒ½åŠ©æ‰‹ï¼Œä¸“é—¨è´Ÿè´£è´¨é‡ç®¡ç†æ•°æ®åˆ†æå’Œé—®ç­”ã€‚è¯·åŸºäºç”¨æˆ·é—®é¢˜æä¾›ä¸“ä¸šã€å‡†ç¡®ã€æœ‰ç”¨çš„å›ç­”ã€‚"},{role:"user",content:s}],temperature:.7,max_tokens:2e3})});if(!t.ok)throw new Error(`AI APIé”™è¯¯: ${t.status}`);return(await t.json()).choices[0].message.content},x=s=>new Promise(t=>setTimeout(t,s));return j(()=>{console.log("ğŸ¤– IQE AIæ™ºèƒ½åŠ©æ‰‹å·²åŠ è½½")}),(s,t)=>{const p=k("el-switch"),C=k("el-button"),O=k("el-tag"),R=k("el-input");return a(),o("div",X,[e("div",Y,[t[4]||(t[4]=e("h1",null,"ğŸ¤– IQE AI æ™ºèƒ½åŠ©æ‰‹",-1)),e("div",Z,[v(p,{modelValue:w.value,"onUpdate:modelValue":t[0]||(t[0]=n=>w.value=n),"active-text":"AIå¢å¼ºæ¨¡å¼","inactive-text":"åŸºç¡€æ¨¡å¼",size:"large"},null,8,["modelValue"]),v(C,{onClick:z,type:"primary",plain:""},{default:f(()=>t[2]||(t[2]=[I("æ¸…ç©ºå¯¹è¯")])),_:1,__:[2]}),v(C,{onClick:N,type:"info",plain:""},{default:f(()=>t[3]||(t[3]=[I("è¿”å›ç³»ç»Ÿ")])),_:1,__:[3]})])]),e("div",ee,[e("div",te,[t[5]||(t[5]=e("div",{class:"panel-header"},[e("h3",null,"ğŸ› ï¸ å¯ç”¨å·¥å…·")],-1)),e("div",se,[(a(!0),o(_,null,h(D,n=>(a(),o("div",{class:"tool-group",key:n.name},[e("h4",null,l(n.icon)+" "+l(n.name),1),(a(!0),o(_,null,h(n.tools,c=>(a(),o("div",{class:"tool-item",key:c.name,onClick:Ve=>K(c)},[e("span",ae,l(c.icon),1),e("div",oe,[e("div",ie,l(c.name),1),e("div",le,l(c.description),1)])],8,ne))),128))]))),128))])]),e("div",ce,[e("div",re,[t[6]||(t[6]=e("h3",null,"ğŸ’¬ æ™ºèƒ½é—®ç­”",-1)),e("div",de,[(a(!0),o(_,null,h(S.value,n=>(a(),H(O,{key:n,onClick:c=>P(n),class:"question-tag",type:"info",effect:"plain"},{default:f(()=>[I(l(n),1)]),_:2},1032,["onClick"]))),128))])]),e("div",{class:"chat-area",ref_key:"chatArea",ref:y},[(a(!0),o(_,null,h(m.value,(n,c)=>(a(),o("div",{key:c,class:V(["chat-msg",n.type])},[e("div",ue,[n.type==="user"?(a(),o("span",pe,"ğŸ‘¤")):(a(),o("span",me,"ğŸ¤–"))]),e("div",ve,[e("div",_e,l(n.content),1),e("div",he,l(Q(n.timestamp)),1)])],2))),128)),d.value?(a(),o("div",ye,t[7]||(t[7]=[e("div",{class:"msg-avatar"},"ğŸ¤–",-1),e("div",{class:"msg-content"},[e("div",{class:"loading-dots"},[e("span"),e("span"),e("span")]),e("div",{class:"loading-text"},"AIæ­£åœ¨æ€è€ƒä¸­...")],-1)]))):T("",!0)],512),e("div",ge,[v(R,{modelValue:r.value,"onUpdate:modelValue":t[1]||(t[1]=n=>r.value=n),type:"textarea",rows:3,placeholder:"è¯·è¾“å…¥æ‚¨çš„é—®é¢˜...",onKeydown:q(G(A,["ctrl"]),["enter"]),disabled:d.value,resize:"none"},null,8,["modelValue","onKeydown","disabled"]),e("div",ke,[v(C,{onClick:A,type:"primary",loading:d.value,disabled:!r.value.trim()},{default:f(()=>[I(l(d.value?"å‘é€ä¸­...":"å‘é€ (Ctrl+Enter)"),1)]),_:1},8,["loading","disabled"])])])]),e("div",fe,[t[9]||(t[9]=e("div",{class:"panel-header"},[e("h3",null,"ğŸ§  AIæ€è€ƒè¿‡ç¨‹")],-1)),e("div",Ie,[i.value.length===0?(a(),o("div",we,t[8]||(t[8]=[e("div",{class:"empty-icon"},"ğŸ¤”",-1),e("div",{class:"empty-text"},"AIæ­£åœ¨ç­‰å¾…æ‚¨çš„é—®é¢˜...",-1)]))):T("",!0),(a(!0),o(_,null,h(i.value,(n,c)=>(a(),o("div",{key:c,class:V(["thinking-step",n.status])},[e("div",Ae,[e("span",xe,l(B(n.type)),1),e("span",Ce,l(n.title),1),e("span",be,l(M(n.status)),1)])],2))),128))])])])])}}};export{De as default};
