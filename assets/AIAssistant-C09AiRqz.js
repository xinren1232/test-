import{c as l,o as i,a as s,O as w,P as T,e as C,Q as q,F as _,r as m,b as M,_ as V,ai as z,S as d,V as B,W as O,t as c,X as H,n as D}from"./element-plus-DR-erZ3X.js";import{a as J}from"./index-Bo1zM2q5.js";import"./echarts-Dfqt_Pbx.js";const K={name:"AIAssistant",setup(){const u=d(""),a=d([]),y=d(!1),n=d([]),v=d(null),I=d([{name:"analyze_data",icon:"ðŸ“Š",displayName:"æ•°æ®åˆ†æž",description:"åˆ†æžè´¨é‡ç®¡ç†æ•°æ®"},{name:"statistical_analysis",icon:"ðŸ“ˆ",displayName:"ç»Ÿè®¡åˆ†æž",description:"æ‰§è¡Œç»Ÿè®¡åˆ†æž"},{name:"calculate",icon:"ðŸ§®",displayName:"æ•°å€¼è®¡ç®—",description:"æ‰§è¡Œæ•°å­¦è®¡ç®—"},{name:"format_data",icon:"ðŸ“‹",displayName:"æ•°æ®æ ¼å¼åŒ–",description:"æ ¼å¼åŒ–æ•°æ®è¾“å‡º"}]),g=d([{name:"create_chart",icon:"ðŸ“Š",displayName:"å›¾è¡¨ç”Ÿæˆ",description:"ç”Ÿæˆæ•°æ®å¯è§†åŒ–å›¾è¡¨"},{name:"trend_analysis",icon:"ðŸ“ˆ",displayName:"è¶‹åŠ¿åˆ†æž",description:"åˆ†æžæ•°æ®è¶‹åŠ¿"},{name:"generate_report",icon:"ðŸ“„",displayName:"æŠ¥å‘Šç”Ÿæˆ",description:"ç”Ÿæˆè´¨é‡åˆ†æžæŠ¥å‘Š"}]),x=d([{name:"web_search",icon:"ðŸ”",displayName:"ç½‘ç»œæœç´¢",description:"æœç´¢ç›¸å…³ä¿¡æ¯"},{name:"api_call",icon:"ðŸŒ",displayName:"APIè°ƒç”¨",description:"è°ƒç”¨å¤–éƒ¨API"}]),A=d([{name:"query_inventory",icon:"ðŸ“¦",displayName:"åº“å­˜æŸ¥è¯¢",description:"æŸ¥è¯¢åº“å­˜ä¿¡æ¯"},{name:"query_production",icon:"ðŸ­",displayName:"ç”Ÿäº§æŸ¥è¯¢",description:"æŸ¥è¯¢ç”Ÿäº§æ•°æ®"},{name:"query_testing",icon:"ðŸ§ª",displayName:"æ£€æµ‹æŸ¥è¯¢",description:"æŸ¥è¯¢æ£€æµ‹ç»“æžœ"},{name:"export_data",icon:"ðŸ’¾",displayName:"æ•°æ®å¯¼å‡º",description:"å¯¼å‡ºæ•°æ®ä¸ºå„ç§æ ¼å¼"}]),e=d(["æŸ¥è¯¢å·¥åŽ‚Açš„åº“å­˜æƒ…å†µ","åˆ†æžæœ€è¿‘çš„è´¨é‡è¶‹åŠ¿","ç”Ÿæˆè´¨é‡æŠ¥å‘Š","ç»Ÿè®¡ä¸åˆæ ¼å“æ•°é‡","æŸ¥çœ‹ç”Ÿäº§çº¿çŠ¶æ€"]),p=async()=>{if(!u.value.trim()||y.value)return;const t={type:"user",content:u.value,timestamp:new Date};a.value.push(t);const o=u.value;u.value="",await S(),y.value=!0,n.value=[];try{await Q(o)}catch(r){console.error("AIå¤„ç†é”™è¯¯:",r),a.value.push({type:"ai",content:"æŠ±æ­‰ï¼Œå¤„ç†æ‚¨çš„é—®é¢˜æ—¶å‡ºçŽ°äº†é”™è¯¯ã€‚è¯·ç¨åŽé‡è¯•ã€‚",timestamp:new Date})}finally{y.value=!1,await S()}},k=t=>new Promise(o=>setTimeout(o,t)),h=(t,o,r,N=null)=>{n.value.push({type:t,title:o,status:r,details:N})},f=(t,o,r=null)=>{n.value[t]&&(n.value[t].status=o,r&&(n.value[t].result=r))},b=t=>{const o=t.toLowerCase();return o.includes("åº“å­˜")||o.includes("inventory")?{needsData:!0,tool:"query_inventory",parameters:{data_type:"inventory"},category:"inventory"}:o.includes("ç”Ÿäº§")||o.includes("production")?{needsData:!0,tool:"query_production",parameters:{data_type:"production"},category:"production"}:o.includes("æ£€æµ‹")||o.includes("æµ‹è¯•")||o.includes("testing")?{needsData:!0,tool:"query_testing",parameters:{data_type:"testing"},category:"testing"}:o.includes("è®¡ç®—")||o.includes("ç®—")?{needsData:!0,tool:"calculate",parameters:{expression:L(t)},category:"calculation"}:o.includes("åˆ†æž")||o.includes("ç»Ÿè®¡")?{needsData:!0,tool:"analyze_data",parameters:{data_type:"inventory"},category:"analysis"}:{needsData:!1,tool:"general",parameters:{},category:"general"}},L=t=>{const o=t.match(/[\d+\-*/().\s]+/);return o?o[0].trim():"1+1"},P=t=>{if(!t||!t.success)return"æŠ±æ­‰ï¼ŒæŸ¥è¯¢æ•°æ®æ—¶å‡ºçŽ°é—®é¢˜ã€‚";const o=t.data;return Array.isArray(o)?`æŸ¥è¯¢åˆ° ${o.length} æ¡è®°å½•ã€‚

${t.summary||"æ•°æ®æŸ¥è¯¢å®Œæˆã€‚"}`:typeof o=="object"?`æŸ¥è¯¢ç»“æžœï¼š
${JSON.stringify(o,null,2)}`:`æŸ¥è¯¢ç»“æžœï¼š${o}`},E=t=>{const o=["æˆ‘æ˜¯IQE AIæ™ºèƒ½åŠ©æ‰‹ï¼Œä¸“é—¨å¸®åŠ©æ‚¨å¤„ç†è´¨é‡ç®¡ç†ç›¸å…³é—®é¢˜ã€‚","æ‚¨å¯ä»¥è¯¢é—®åº“å­˜ã€ç”Ÿäº§ã€æ£€æµ‹ç­‰ç›¸å…³æ•°æ®ã€‚","æˆ‘å¯ä»¥å¸®æ‚¨åˆ†æžæ•°æ®ã€ç”ŸæˆæŠ¥å‘Šã€æ‰§è¡Œè®¡ç®—ç­‰ã€‚","å¦‚éœ€å…·ä½“å¸®åŠ©ï¼Œè¯·å‘Šè¯‰æˆ‘æ‚¨æƒ³æŸ¥è¯¢ä»€ä¹ˆæ•°æ®ã€‚"];return o[Math.floor(Math.random()*o.length)]},S=async()=>{await O(),v.value&&(v.value.scrollTop=v.value.scrollHeight)},Q=async t=>{h("thinking","ç†è§£é—®é¢˜","processing",{question:t}),await k(1e3);const o=b(t);f(0,"completed",{analysis:o}),h("analysis","åˆ†æžé—®é¢˜ç±»åž‹","processing",o),await k(800),f(1,"completed"),h("tool_selection","é€‰æ‹©åˆé€‚å·¥å…·","processing"),await k(600);let r="";if(o.needsData){h("data_query","æŸ¥è¯¢æ•°æ®","processing");const N={success:!0,data:[{id:1,name:"ç¤ºä¾‹æ•°æ®",value:100}],summary:"æŸ¥è¯¢å®Œæˆï¼Œæ‰¾åˆ°1æ¡è®°å½•"};f(3,"completed",{result:N}),r=P(N)}else r=E();f(2,"completed",{selectedTool:o.tool}),h("response","ç”Ÿæˆå›žç­”","processing"),await k(500),f(4,"completed"),a.value.push({type:"ai",content:r,timestamp:new Date})};return{inputMessage:u,messages:a,isLoading:y,currentProcess:n,chatMessages:v,dataAnalysisTools:I,visualizationTools:g,networkTools:x,qualityTools:A,quickExamples:e,sendMessage:p,sendQuickQuestion:t=>{u.value=t,p()},clearChat:()=>{a.value=[],n.value=[]},exportChat:()=>{B.success("å¯¼å‡ºåŠŸèƒ½å¼€å‘ä¸­...")},formatMessage:t=>t.replace(/\n/g,"<br>"),formatTime:t=>t.toLocaleTimeString(),getStepIcon:t=>({thinking:"ðŸ¤”",analysis:"ðŸ”",tool_selection:"ðŸ› ï¸",data_query:"ðŸ“Š",response:"ðŸ’¬"})[t]||"âš™ï¸",getStatusText:t=>({processing:"å¤„ç†ä¸­...",completed:"å®Œæˆ",error:"é”™è¯¯"})[t]||t,formatStepResult:t=>typeof t=="object"?JSON.stringify(t,null,2):String(t)}}},R={class:"ai-assistant"},j={class:"header"},F={class:"header-actions"},U={class:"main-content"},W={class:"tools-panel"},X={class:"tool-category"},G={class:"tool-list"},Y={class:"tool-icon"},Z={class:"tool-info"},$={class:"tool-name"},ss={class:"tool-desc"},es={class:"tool-category"},ts={class:"tool-list"},os={class:"tool-icon"},as={class:"tool-info"},ns={class:"tool-name"},is={class:"tool-desc"},ls={class:"tool-category"},cs={class:"tool-list"},rs={class:"tool-icon"},ds={class:"tool-info"},us={class:"tool-name"},ps={class:"tool-desc"},_s={class:"tool-category"},ms={class:"tool-list"},ys={class:"tool-icon"},vs={class:"tool-info"},gs={class:"tool-name"},hs={class:"tool-desc"},fs={class:"chat-panel"},ks={class:"panel-header"},Ns={class:"quick-actions"},ws={class:"chat-messages",ref:"chatMessages"},Ts={class:"message-avatar"},Cs={key:0},Ms={key:1},xs={class:"message-content"},As=["innerHTML"],qs={class:"message-time"},Is={key:0,class:"message ai loading"},Ss={class:"chat-input"},Ds={class:"input-actions"},bs={class:"process-panel"},Ls={class:"process-content"},Ps={key:0,class:"empty-state"},Es={class:"step-header"},Qs={class:"step-icon"},Vs={class:"step-title"},zs={class:"step-status"},Bs={key:0,class:"step-details"},Os={key:1,class:"step-result"},Hs={class:"result-content"};function Js(u,a,y,n,v,I){const g=q("el-button"),x=q("el-tag"),A=q("el-input");return i(),l("div",R,[s("div",j,[a[3]||(a[3]=s("h1",null,"ðŸ¤– IQE AI æ™ºèƒ½åŠ©æ‰‹",-1)),s("div",F,[w(g,{onClick:n.clearChat,type:"primary",plain:""},{default:T(()=>a[1]||(a[1]=[C("æ¸…ç©ºå¯¹è¯")])),_:1,__:[1]},8,["onClick"]),w(g,{onClick:n.exportChat,type:"success",plain:""},{default:T(()=>a[2]||(a[2]=[C("å¯¼å‡ºå¯¹è¯")])),_:1,__:[2]},8,["onClick"])])]),s("div",U,[s("div",W,[a[8]||(a[8]=s("div",{class:"panel-header"},[s("h3",null,"ðŸ› ï¸ å¯ç”¨å·¥å…·")],-1)),s("div",X,[a[4]||(a[4]=s("h4",null,"ðŸ“Š æ•°æ®åˆ†æžå·¥å…·",-1)),s("div",G,[(i(!0),l(_,null,m(n.dataAnalysisTools,e=>(i(),l("div",{class:"tool-item",key:e.name},[s("div",Y,c(e.icon),1),s("div",Z,[s("div",$,c(e.displayName),1),s("div",ss,c(e.description),1)])]))),128))])]),s("div",es,[a[5]||(a[5]=s("h4",null,"ðŸ“ˆ å¯è§†åŒ–å·¥å…·",-1)),s("div",ts,[(i(!0),l(_,null,m(n.visualizationTools,e=>(i(),l("div",{class:"tool-item",key:e.name},[s("div",os,c(e.icon),1),s("div",as,[s("div",ns,c(e.displayName),1),s("div",is,c(e.description),1)])]))),128))])]),s("div",ls,[a[6]||(a[6]=s("h4",null,"ðŸŒ è”ç½‘å·¥å…·",-1)),s("div",cs,[(i(!0),l(_,null,m(n.networkTools,e=>(i(),l("div",{class:"tool-item",key:e.name},[s("div",rs,c(e.icon),1),s("div",ds,[s("div",us,c(e.displayName),1),s("div",ps,c(e.description),1)])]))),128))])]),s("div",_s,[a[7]||(a[7]=s("h4",null,"ðŸŽ¯ è´¨é‡ç®¡ç†",-1)),s("div",ms,[(i(!0),l(_,null,m(n.qualityTools,e=>(i(),l("div",{class:"tool-item",key:e.name},[s("div",ys,c(e.icon),1),s("div",vs,[s("div",gs,c(e.displayName),1),s("div",hs,c(e.description),1)])]))),128))])])]),s("div",fs,[s("div",ks,[a[9]||(a[9]=s("h3",null,"ðŸ’¬ æ™ºèƒ½é—®ç­”",-1)),s("div",Ns,[(i(!0),l(_,null,m(n.quickExamples,e=>(i(),H(x,{key:e,onClick:p=>n.sendQuickQuestion(e),class:"quick-tag"},{default:T(()=>[C(c(e),1)]),_:2},1032,["onClick"]))),128))])]),s("div",ws,[(i(!0),l(_,null,m(n.messages,(e,p)=>(i(),l("div",{key:p,class:D(["message",e.type])},[s("div",Ts,[e.type==="user"?(i(),l("span",Cs,"ðŸ‘¤")):(i(),l("span",Ms,"ðŸ¤–"))]),s("div",xs,[s("div",{class:"message-text",innerHTML:n.formatMessage(e.content)},null,8,As),s("div",qs,c(n.formatTime(e.timestamp)),1)])],2))),128)),n.isLoading?(i(),l("div",Is,a[10]||(a[10]=[s("div",{class:"message-avatar"},"ðŸ¤–",-1),s("div",{class:"message-content"},[s("div",{class:"typing-indicator"},[s("span"),s("span"),s("span")])],-1)]))):M("",!0)],512),s("div",Ss,[w(A,{modelValue:n.inputMessage,"onUpdate:modelValue":a[0]||(a[0]=e=>n.inputMessage=e),type:"textarea",rows:3,placeholder:"è¯·è¾“å…¥æ‚¨çš„é—®é¢˜...",onKeydown:V(z(n.sendMessage,["ctrl"]),["enter"]),disabled:n.isLoading},null,8,["modelValue","onKeydown","disabled"]),s("div",Ds,[w(g,{onClick:n.sendMessage,type:"primary",loading:n.isLoading},{default:T(()=>a[11]||(a[11]=[C(" å‘é€ (Ctrl+Enter) ")])),_:1,__:[11]},8,["onClick","loading"])])])]),s("div",bs,[a[14]||(a[14]=s("div",{class:"panel-header"},[s("h3",null,"ðŸ§  AIæ€è€ƒè¿‡ç¨‹")],-1)),s("div",Ls,[n.currentProcess.length===0?(i(),l("div",Ps,a[12]||(a[12]=[s("div",{class:"empty-icon"},"ðŸ¤”",-1),s("div",{class:"empty-text"},"AIæ­£åœ¨ç­‰å¾…æ‚¨çš„é—®é¢˜...",-1)]))):M("",!0),(i(!0),l(_,null,m(n.currentProcess,(e,p)=>(i(),l("div",{key:p,class:D(["process-step",e.status])},[s("div",Es,[s("div",Qs,c(n.getStepIcon(e.type)),1),s("div",Vs,c(e.title),1),s("div",zs,c(n.getStatusText(e.status)),1)]),e.details?(i(),l("div",Bs,[s("pre",null,c(JSON.stringify(e.details,null,2)),1)])):M("",!0),e.result?(i(),l("div",Os,[a[13]||(a[13]=s("div",{class:"result-label"},"æ‰§è¡Œç»“æžœ:",-1)),s("div",Hs,c(n.formatStepResult(e.result)),1)])):M("",!0)],2))),128))])])])])}const Fs=J(K,[["render",Js],["__scopeId","data-v-e4a8a12b"]]);export{Fs as default};
