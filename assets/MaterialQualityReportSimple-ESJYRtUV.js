const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-Bo1zM2q5.js","assets/element-plus-DR-erZ3X.js","assets/echarts-Dfqt_Pbx.js","assets/index-CBPCiJRk.css"])))=>i.map(i=>d[i]);
import{a as Xt,_ as Z}from"./index-Bo1zM2q5.js";import{q as Yt,s as Ht,w as Jt,x as Zt,y as te,z as ee,A as ae,B as se,C as oe,D as le,E as ne,G as ie,H as ce,I as re,J as de,K as ue,L as pe,M as ve,N as fe,o as g,c as h,a as t,t as _,O as a,e as v,P as n,Q as b,R as I,F as V,r as B,S as y,T as me,U as ye,V as Q,W as Ct,n as K,X as nt,Y as Dt,b as _e}from"./element-plus-DR-erZ3X.js";import{i as $}from"./echarts-Dfqt_Pbx.js";const be={name:"MaterialQualityReportSimple",components:{TrendCharts:pe,DataAnalysis:ue,Grid:de,OfficeBuilding:re,Warning:ce,Document:ie,Refresh:ne,Download:le,ArrowUp:oe,ArrowDown:se,ArrowRight:ae,Minus:ee,CircleCheck:te,View:Zt,Lightning:Jt,Cpu:Ht,More:Yt},setup(){const tt=y(null),e=y(null),X=y(null),f=y(null),et=y(null),at=y(null),W=y(null),d=y(new Date().toLocaleString()),F=y("30d"),M=y(!1),S=y([]),k=y([]),w=y([]),R=y([]),A=y([]),Y=y([]),U=y(null),O=y(null),x=y([]),T=y([]),D=y([]),L=y(5),P=y([]),st=y(""),it=y(""),N=y([]),j=y([]),ct=async()=>{try{console.log("获取核心指标数据...");const o=await c();S.value=pt(o)}catch(o){console.error("获取核心指标失败:",o),S.value=pt()}},c=async()=>{try{const{default:o}=await Z(async()=>{const{default:C}=await import("./index-Bo1zM2q5.js").then(Kt=>Kt.a$);return{default:C}},__vite__mapDeps([0,1,2,3])),r=o.getInventoryData(),i=o.getLabData(),u=o.getOnlineData();console.log("获取到的数据:",{inventory:r.length,lab:i.length,online:u.length});const m=r.length||0,l=i.length||0,s=u.length||0,p=i.filter(C=>C.test_result==="不合格"||C.test_status==="不合格").length,G=u.filter(C=>C.defect_rate>5||C.has_alerts||C.production_status==="异常").length,E=l+s,H=p+G,J=E>0?((E-H)/E*100).toFixed(1):0;return{totalInspections:E,overallPassRate:parseFloat(J),totalDefects:H,testingCount:l,onlineCount:s,inventoryCount:m,testingPassRate:l>0?((l-p)/l*100).toFixed(1):0,onlinePassRate:s>0?((s-G)/s*100).toFixed(1):0}}catch(o){return console.error("获取真实统计数据失败:",o),{totalInspections:0,overallPassRate:0,totalDefects:0,testingCount:0,onlineCount:0,inventoryCount:0,testingPassRate:0,onlinePassRate:0}}},q=async()=>{try{console.log("获取不良情况TOP排名数据...");const{default:o}=await Z(async()=>{const{default:l}=await import("./index-Bo1zM2q5.js").then(s=>s.a$);return{default:l}},__vite__mapDeps([0,1,2,3])),r=o.getLabData(),i=o.getOnlineData();console.log("实验室数据条数:",r.length),console.log("上线数据条数:",i.length);const u={};r.forEach(l=>{if(!l.materialCode||!l.materialName||!l.supplier)return;const s=`${l.materialCode}_${l.supplier}`;u[s]||(u[s]={materialCode:l.materialCode,materialName:l.materialName,supplier:l.supplier,totalTests:0,defectCount:0,mainDefectTypes:[]}),u[s].totalTests++,(l.test_result==="不合格"||l.test_status==="不合格")&&(u[s].defectCount++,l.notes&&u[s].mainDefectTypes.push(l.notes))}),i.forEach(l=>{if(!l.materialCode||!l.materialName||!l.supplier)return;const s=`${l.materialCode}_${l.supplier}`;u[s]||(u[s]={materialCode:l.materialCode,materialName:l.materialName,supplier:l.supplier,totalTests:0,defectCount:0,mainDefectTypes:[]}),u[s].totalTests++,(l.defect_rate>5||l.has_alerts||l.production_status==="异常")&&(u[s].defectCount++,l.alert_message&&u[s].mainDefectTypes.push(l.alert_message))}),console.log("统计的物料数量:",Object.keys(u).length);const m=Object.values(u).filter(l=>l.totalTests>0).map(l=>({...l,defectRate:(l.defectCount/l.totalTests*100).toFixed(1),testPassRate:((l.totalTests-l.defectCount)/l.totalTests*100).toFixed(1),mainDefectType:l.mainDefectTypes.length>0?l.mainDefectTypes[0]:"质量异常"})).sort((l,s)=>parseFloat(s.defectRate)-parseFloat(l.defectRate));console.log("TOP不良物料:",m),w.value=m.map(l=>({...l,defectRate:parseFloat(l.defectRate),testPassRate:parseFloat(l.testPassRate)})),ot(),w.value.length===0&&(console.log("没有不良数据，生成示例数据"),w.value=[{materialCode:"M001",materialName:"充电器IC芯片",supplier:"德州仪器",defectRate:8.5,defectCount:17,totalTests:200,mainDefectType:"电压不稳定",testPassRate:91.5},{materialCode:"M015",materialName:"USB-C连接器",supplier:"富士康",defectRate:6.2,defectCount:12,totalTests:194,mainDefectType:"接触不良",testPassRate:93.8},{materialCode:"M008",materialName:"电池保护板",supplier:"比亚迪",defectRate:5.8,defectCount:11,totalTests:190,mainDefectType:"过流保护异常",testPassRate:94.2},{materialCode:"M003",materialName:"摄像头模组",supplier:"舜宇光学",defectRate:4.7,defectCount:9,totalTests:192,mainDefectType:"对焦不准",testPassRate:95.3},{materialCode:"M012",materialName:"显示屏总成",supplier:"BOE",defectRate:3.9,defectCount:8,totalTests:205,mainDefectType:"亮度不均",testPassRate:96.1}]),ot()}catch(o){console.error("获取不良情况TOP排名失败:",o),w.value=[],P.value=[]}},ot=()=>{P.value=w.value.slice(0,L.value)},St=o=>{L.value=o,ot()},xt=async()=>{try{console.log("获取供应商质量数据...");const{default:o}=await Z(async()=>{const{default:s}=await import("./index-Bo1zM2q5.js").then(p=>p.a$);return{default:s}},__vite__mapDeps([0,1,2,3])),r=o.getLabData(),i=o.getOnlineData(),u=o.getInventoryData(),m={};u.forEach(s=>{m[s.supplier]||(m[s.supplier]={name:s.supplier,materials:new Set,inspectionCount:0,defectCount:0}),m[s.supplier].materials.add(s.materialCode)}),r.forEach(s=>{m[s.supplier]&&(m[s.supplier].inspectionCount++,(s.test_result==="不合格"||s.test_status==="不合格")&&m[s.supplier].defectCount++)}),i.forEach(s=>{m[s.supplier]&&(m[s.supplier].inspectionCount++,(s.defect_rate>5||s.has_alerts||s.production_status==="异常")&&m[s.supplier].defectCount++)});const l=s=>s<=2?{grade:"优秀",gradeType:"success",riskLevel:"low-risk"}:s<=4?{grade:"良好",gradeType:"success",riskLevel:"low-risk"}:s<=6?{grade:"一般",gradeType:"warning",riskLevel:"medium-risk"}:{grade:"待改进",gradeType:"danger",riskLevel:"high-risk"};R.value=Object.values(m).filter(s=>s.inspectionCount>0).map(s=>{const p=(s.defectCount/s.inspectionCount*100).toFixed(1),G=(100-parseFloat(p)).toFixed(1),E=l(parseFloat(p));return{name:s.name,materialCount:s.materials.size,inspectionCount:s.inspectionCount,defectCount:s.defectCount,defectRate:parseFloat(p),passRate:parseFloat(G),...E}}).sort((s,p)=>s.defectRate-p.defectRate)}catch(o){console.error("获取供应商质量数据失败:",o),R.value=[]}},wt=async()=>{try{const{default:o}=await Z(async()=>{const{default:m}=await import("./index-Bo1zM2q5.js").then(l=>l.a$);return{default:m}},__vite__mapDeps([0,1,2,3])),r=o.getInventoryData(),i=new Map,u=new Set;r.forEach(m=>{i.set(m.materialCode,m.materialName),u.add(m.supplier)}),N.value=Array.from(i.entries()).map(([m,l])=>({code:m,name:l})),j.value=Array.from(u).sort()}catch(o){console.error("初始化筛选器选项失败:",o),N.value=[],j.value=[]}},Rt=async()=>{try{console.log("获取物料分类详细数据...");const{default:o}=await Z(async()=>{const{default:s}=await import("./index-Bo1zM2q5.js").then(p=>p.a$);return{default:s}},__vite__mapDeps([0,1,2,3])),r=o.getLabData(),i=o.getOnlineData(),u=o.getInventoryData(),m={光学类:{color:"#3b82f6",icon:"View"},充电类:{color:"#ef4444",icon:"Lightning"},结构类:{color:"#f59e0b",icon:"Grid"},电子类:{color:"#8b5cf6",icon:"Cpu"},其他类:{color:"#6b7280",icon:"More"}},l={};u.forEach(s=>{const p=s.category||"其他类";l[p]||(l[p]={name:p,materials:new Set,suppliers:new Set,inspectionCount:0,defectCount:0,materialDefects:{}}),l[p].materials.add(s.materialCode),l[p].suppliers.add(s.supplier)}),r.forEach(s=>{const p=s.category||"其他类";l[p]&&(l[p].inspectionCount++,(s.test_result==="不合格"||s.test_status==="不合格")&&(l[p].defectCount++,l[p].materialDefects[s.materialCode]||(l[p].materialDefects[s.materialCode]={name:s.materialName,defectCount:0,totalCount:0}),l[p].materialDefects[s.materialCode].defectCount++),l[p].materialDefects[s.materialCode]?l[p].materialDefects[s.materialCode].totalCount++:l[p].materialDefects[s.materialCode]={name:s.materialName,defectCount:0,totalCount:1})}),i.forEach(s=>{const p=s.category||"其他类";l[p]&&(l[p].inspectionCount++,(s.defect_rate>5||s.has_alerts||s.production_status==="异常")&&(l[p].defectCount++,l[p].materialDefects[s.materialCode]||(l[p].materialDefects[s.materialCode]={name:s.materialName,defectCount:0,totalCount:0}),l[p].materialDefects[s.materialCode].defectCount++),l[p].materialDefects[s.materialCode]?l[p].materialDefects[s.materialCode].totalCount++:l[p].materialDefects[s.materialCode]={name:s.materialName,defectCount:0,totalCount:1})}),A.value=Object.values(l).filter(s=>s.inspectionCount>0&&s.name!=="其他类").map(s=>{var E,H;const p=(s.defectCount/s.inspectionCount*100).toFixed(1),G=Object.entries(s.materialDefects).map(([J,C])=>({code:J,name:C.name,defectRate:C.totalCount>0?(C.defectCount/C.totalCount*100).toFixed(1):0})).sort((J,C)=>parseFloat(C.defectRate)-parseFloat(J.defectRate)).slice(0,3);return{name:s.name,materialCount:s.materials.size,defectRate:parseFloat(p),supplierCount:s.suppliers.size,inspectionCount:s.inspectionCount,color:((E=m[s.name])==null?void 0:E.color)||"#6b7280",icon:((H=m[s.name])==null?void 0:H.icon)||"More",topDefectMaterials:G}}).sort((s,p)=>p.defectRate-s.defectRate)}catch(o){console.error("获取物料分类详细数据失败:",o),A.value=[]}},Tt=async()=>{try{console.log("生成AI智能分析建议...");const o=[];if(R.value.length>0){const r=R.value.filter(u=>u.defectRate>5).map(u=>u.name),i=R.value.filter(u=>u.defectRate<3).map(u=>u.name);(r.length>0||i.length>0)&&o.push({id:1,type:"supplier",icon:"TrendCharts",title:"供应商质量分析",confidence:88,content:`${r.length>0?`${r.join("、")}等供应商不良率偏高，`:""}${i.length>0?`${i.join("、")}等供应商表现优异。`:""}建议优化供应商结构。`,actions:[...r.length>0?[`对${r.join("、")}启动质量改进计划`]:[],...i.length>0?[`扩大与${i.join("、")}的合作规模`]:[],"建立供应商分级管理体系"]})}if(A.value.length>0){const r=A.value.filter(i=>i.defectRate>5).map(i=>i.name);r.length>0&&o.push({id:2,type:"material",icon:"Warning",title:"物料分类风险预警",confidence:85,content:`${r.join("、")}物料不良率较高，需要重点关注和改进。`,actions:[`对${r.join("、")}物料实施专项质量管控`,"加强来料检验标准","建立物料质量追溯机制"]})}if(w.value.length>0){const r=w.value[0];o.push({id:3,type:"process",icon:"DataAnalysis",title:"重点物料改进",confidence:92,content:`${r.materialName}(${r.supplier})不良率最高(${r.defectRate}%)，主要异常为${r.mainDefectType}。`,actions:[`针对${r.materialName}制定专项改进计划`,`与${r.supplier}协作解决${r.mainDefectType}问题`,"建立重点物料监控机制"]})}o.push({id:4,type:"factory",icon:"OfficeBuilding",title:"工厂质量对比",confidence:79,content:"建议建立工厂间质量对标机制，定期分析各工厂的质量表现差异，识别最佳实践并推广。",actions:["建立工厂质量KPI对比体系","定期开展工厂间质量交流","推广优秀工厂的质量管理经验"]}),Y.value=o}catch(o){console.error("生成AI智能分析建议失败:",o),Y.value=[]}},ut=async()=>{try{console.log("获取质量趋势数据..."),U.value=yt(),O.value=_t()}catch(o){console.error("获取质量趋势失败:",o),U.value=yt(),O.value=_t()}},kt=async()=>{try{console.log("获取分类分析数据..."),x.value=vt()}catch(o){console.error("获取分类分析失败:",o),x.value=vt()}},At=async()=>{try{console.log("获取供应商分析数据..."),T.value=ft()}catch(o){console.error("获取供应商分析失败:",o),T.value=ft()}},Lt=async()=>{try{console.log("获取异常分析数据..."),D.value=mt()}catch(o){console.error("获取异常分析失败:",o),D.value=mt()}},pt=(o=null)=>o?[{key:"totalInspections",value:`${o.totalInspections}次`,label:"总检验次数",trend:{type:"up",text:"测试+上线跟踪",icon:"ArrowUp"},color:"#3b82f6",icon:"DataAnalysis"},{key:"overallPassRate",value:`${o.overallPassRate}%`,label:"整体合格率",trend:{type:o.overallPassRate>95?"up":"stable",text:"质量水平良好",icon:o.overallPassRate>95?"ArrowUp":"Minus"},color:"#10b981",icon:"CircleCheck"},{key:"totalDefects",value:`${o.totalDefects}次`,label:"不良检出",trend:{type:"down",text:"需重点关注",icon:"ArrowDown"},color:"#ef4444",icon:"Warning"},{key:"testingInspections",value:`${o.testingCount}次`,label:"实验室测试",trend:{type:"stable",text:`合格率${o.testingPassRate}%`,icon:"Minus"},color:"#f59e0b",icon:"DataAnalysis"},{key:"onlineInspections",value:`${o.onlineCount}次`,label:"上线跟踪",trend:{type:"stable",text:`合格率${o.onlinePassRate}%`,icon:"Minus"},color:"#8b5cf6",icon:"TrendCharts"},{key:"inventoryRecords",value:`${o.inventoryCount}条`,label:"库存记录",trend:{type:"stable",text:"当前管理",icon:"Minus"},color:"#06b6d4",icon:"Grid"}]:[{key:"totalInspections",value:"0次",label:"总检验次数",trend:{type:"stable",text:"暂无数据",icon:"Minus"},color:"#3b82f6",icon:"DataAnalysis"},{key:"overallPassRate",value:"0%",label:"整体合格率",trend:{type:"stable",text:"暂无数据",icon:"Minus"},color:"#10b981",icon:"CircleCheck"},{key:"totalDefects",value:"0次",label:"不良检出",trend:{type:"stable",text:"暂无数据",icon:"Minus"},color:"#ef4444",icon:"Warning"}],vt=()=>[{name:"结构件类",count:45,percentage:34,qualityRate:95.2,riskCount:3,color:"#409eff",totalQuantity:15420,testCount:360},{name:"光学类",count:24,percentage:18,qualityRate:97.8,riskCount:1,color:"#67c23a",totalQuantity:8960,testCount:192},{name:"充电类",count:18,percentage:14,qualityRate:93.5,riskCount:2,color:"#e6a23c",totalQuantity:6780,testCount:144},{name:"声学类",count:8,percentage:6,qualityRate:96.1,riskCount:1,color:"#f56c6c",totalQuantity:3240,testCount:64},{name:"包装类",count:5,percentage:4,qualityRate:94.7,riskCount:1,color:"#909399",totalQuantity:2100,testCount:40}],ft=()=>[{name:"聚龙",qualityRate:95.2,materialCount:15,totalQuantity:4500,riskLevel:"低",onTimeRate:92,defectRate:2.1,score:95},{name:"BOE",qualityRate:92.8,materialCount:12,totalQuantity:3800,riskLevel:"低",onTimeRate:88,defectRate:3.2,score:92},{name:"天马",qualityRate:89.5,materialCount:10,totalQuantity:3200,riskLevel:"中",onTimeRate:85,defectRate:4.1,score:89},{name:"华星",qualityRate:87.2,materialCount:8,totalQuantity:2900,riskLevel:"中",onTimeRate:90,defectRate:3.8,score:87},{name:"歌尔",qualityRate:85.6,materialCount:6,totalQuantity:2400,riskLevel:"中",onTimeRate:82,defectRate:5.2,score:85}],mt=()=>[{id:1,level:"high",icon:"Warning",title:"供应商BOE质量异常",description:"LCD显示屏批次B2024001检测不合格率超过5%",time:"2小时前"},{id:2,level:"medium",icon:"InfoFilled",title:"库存风险预警",description:"结构件类物料库存量低于安全线",time:"4小时前"},{id:3,level:"low",icon:"CircleCheck",title:"测试完成通知",description:"聚龙供应商本周测试任务已完成",time:"6小时前"}],yt=()=>{const o=F.value==="7d"?7:F.value==="30d"?30:90;return{dates:rt(o),qualityRate:z(o,92,98),defectRate:z(o,1,5),riskRate:z(o,2,8)}},_t=()=>{const o=F.value==="7d"?7:F.value==="30d"?30:90;return{dates:rt(o),inventory:z(o,800,1200),testing:z(o,200,400),online:z(o,150,350)}},rt=o=>{const r=[];for(let i=o-1;i>=0;i--){const u=new Date;u.setDate(u.getDate()-i),r.push(u.toLocaleDateString("zh-CN",{month:"2-digit",day:"2-digit"}))}return r},z=(o,r,i)=>Array.from({length:o},()=>Math.floor(Math.random()*(i-r+1))+r),bt=()=>{if(!tt.value||!U.value)return;const o=$(tt.value),r=U.value,i={tooltip:{trigger:"axis",axisPointer:{type:"cross",crossStyle:{color:"#999"}},backgroundColor:"rgba(255, 255, 255, 0.95)",borderColor:"#409eff",borderWidth:1,textStyle:{color:"#303133"}},legend:{data:["合格率","不良率","风险率"],top:10,textStyle:{fontSize:12,color:"#606266"}},grid:{left:"3%",right:"4%",bottom:"8%",top:"15%",containLabel:!0},xAxis:{type:"category",data:r.dates,axisLine:{lineStyle:{color:"#e4e7ed"}},axisTick:{lineStyle:{color:"#e4e7ed"}},axisLabel:{color:"#909399",fontSize:11}},yAxis:{type:"value",axisLabel:{formatter:"{value}%",color:"#909399",fontSize:11},axisLine:{lineStyle:{color:"#e4e7ed"}},splitLine:{lineStyle:{color:"#f5f7fa",type:"dashed"}}},series:[{name:"合格率",type:"line",data:r.qualityRate,itemStyle:{color:"#67c23a"},lineStyle:{width:3},smooth:!0,symbol:"circle",symbolSize:6,areaStyle:{color:{type:"linear",x:0,y:0,x2:0,y2:1,colorStops:[{offset:0,color:"rgba(103, 194, 58, 0.3)"},{offset:1,color:"rgba(103, 194, 58, 0.05)"}]}}},{name:"不良率",type:"line",data:r.defectRate,itemStyle:{color:"#f56c6c"},lineStyle:{width:3},smooth:!0,symbol:"circle",symbolSize:6},{name:"风险率",type:"line",data:r.riskRate,itemStyle:{color:"#e6a23c"},lineStyle:{width:3},smooth:!0,symbol:"circle",symbolSize:6}]};o.setOption(i)},gt=()=>{if(!e.value||!O.value)return;const o=$(e.value),r=O.value,i={tooltip:{trigger:"axis",backgroundColor:"rgba(255, 255, 255, 0.95)",borderColor:"#409eff",borderWidth:1,textStyle:{color:"#303133"}},legend:{data:["库存量","测试量","上线量"],top:10,textStyle:{fontSize:12,color:"#606266"}},grid:{left:"3%",right:"4%",bottom:"8%",top:"15%",containLabel:!0},xAxis:{type:"category",data:r.dates,axisLine:{lineStyle:{color:"#e4e7ed"}},axisTick:{lineStyle:{color:"#e4e7ed"}},axisLabel:{color:"#909399",fontSize:11}},yAxis:{type:"value",axisLabel:{color:"#909399",fontSize:11},axisLine:{lineStyle:{color:"#e4e7ed"}},splitLine:{lineStyle:{color:"#f5f7fa",type:"dashed"}}},series:[{name:"库存量",type:"bar",data:r.inventory,itemStyle:{color:"#409eff"}},{name:"测试量",type:"bar",data:r.testing,itemStyle:{color:"#67c23a"}},{name:"上线量",type:"bar",data:r.online,itemStyle:{color:"#e6a23c"}}]};o.setOption(i)},Pt=()=>{if(console.log("初始化分类分布图表...",X.value,x.value.length),!X.value||!x.value.length)return;const o=$(X.value),r={tooltip:{trigger:"item",backgroundColor:"rgba(255, 255, 255, 0.95)",borderColor:"#409eff",borderWidth:1,textStyle:{color:"#303133"},formatter:function(i){return`<div style="font-weight: 600; margin-bottom: 4px;">${i.name}</div>
                    <div style="display: flex; justify-content: space-between; gap: 20px;">
                      <span>数量: <strong style="color: ${i.color};">${i.value}种</strong></span>
                      <span>占比: <strong style="color: ${i.color};">${i.percent}%</strong></span>
                    </div>`}},legend:{orient:"vertical",left:"left",top:"center",textStyle:{fontSize:12,color:"#606266"},itemGap:12,formatter:function(i){const u=x.value.find(m=>m.name===i);return`${i}  ${u?u.count:0}种`}},series:[{name:"物料分类",type:"pie",radius:["45%","75%"],center:["65%","50%"],avoidLabelOverlap:!1,label:{show:!0,position:"outside",formatter:`{b}
{d}%`,fontSize:11,color:"#606266"},labelLine:{show:!0,length:15,length2:10,lineStyle:{color:"#e4e7ed"}},emphasis:{itemStyle:{shadowBlur:15,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.3)"},label:{fontSize:14,fontWeight:"bold"}},data:x.value.map(i=>({value:i.count,name:i.name,itemStyle:{color:{type:"linear",x:0,y:0,x2:1,y2:1,colorStops:[{offset:0,color:i.color},{offset:1,color:i.color+"80"}]}}}))}]};o.setOption(r)},It=()=>{if(!f.value||!x.value.length)return;const o=$(f.value),r={tooltip:{trigger:"axis",backgroundColor:"rgba(255, 255, 255, 0.95)",borderColor:"#409eff",borderWidth:1,textStyle:{color:"#303133"}},legend:{data:["合格率","风险率"],top:10,textStyle:{fontSize:12,color:"#606266"}},grid:{left:"3%",right:"4%",bottom:"8%",top:"15%",containLabel:!0},xAxis:{type:"category",data:x.value.map(i=>i.name),axisLine:{lineStyle:{color:"#e4e7ed"}},axisTick:{lineStyle:{color:"#e4e7ed"}},axisLabel:{color:"#909399",fontSize:11}},yAxis:{type:"value",axisLabel:{formatter:"{value}%",color:"#909399",fontSize:11},axisLine:{lineStyle:{color:"#e4e7ed"}},splitLine:{lineStyle:{color:"#f5f7fa",type:"dashed"}}},series:[{name:"合格率",type:"bar",data:x.value.map(i=>i.qualityRate),itemStyle:{color:"#67c23a"}},{name:"风险率",type:"bar",data:x.value.map(i=>(100-i.qualityRate).toFixed(1)),itemStyle:{color:"#f56c6c"}}]};o.setOption(r)},Mt=()=>{if(!et.value||!T.value.length)return;const o=$(et.value),r={tooltip:{trigger:"axis",backgroundColor:"rgba(255, 255, 255, 0.95)",borderColor:"#409eff",borderWidth:1,textStyle:{color:"#303133"}},grid:{left:"3%",right:"4%",bottom:"8%",top:"10%",containLabel:!0},xAxis:{type:"category",data:T.value.map(i=>i.name),axisLine:{lineStyle:{color:"#e4e7ed"}},axisTick:{lineStyle:{color:"#e4e7ed"}},axisLabel:{color:"#909399",fontSize:11}},yAxis:{type:"value",axisLabel:{color:"#909399",fontSize:11},axisLine:{lineStyle:{color:"#e4e7ed"}},splitLine:{lineStyle:{color:"#f5f7fa",type:"dashed"}}},series:[{name:"综合评分",type:"bar",data:T.value.map(i=>i.score),itemStyle:{color:{type:"linear",x:0,y:0,x2:0,y2:1,colorStops:[{offset:0,color:"#409eff"},{offset:1,color:"#66b3ff"}]}},barWidth:"60%",label:{show:!0,position:"top",color:"#303133",fontSize:12,fontWeight:"bold"}}]};o.setOption(r)},Ot=()=>{if(!at.value||!T.value.length)return;const o=$(at.value),r={tooltip:{backgroundColor:"rgba(255, 255, 255, 0.95)",borderColor:"#409eff",borderWidth:1,textStyle:{color:"#303133"}},legend:{data:T.value.slice(0,3).map(i=>i.name),top:10,textStyle:{fontSize:12,color:"#606266"}},radar:{indicator:[{name:"质量率",max:100},{name:"准时率",max:100},{name:"响应速度",max:100},{name:"成本控制",max:100},{name:"创新能力",max:100},{name:"服务质量",max:100}],shape:"polygon",splitNumber:5,axisName:{color:"#606266",fontSize:12},splitLine:{lineStyle:{color:"#e4e7ed"}},splitArea:{show:!0,areaStyle:{color:["rgba(64, 158, 255, 0.1)","rgba(64, 158, 255, 0.05)"]}}},series:[{name:"供应商评价",type:"radar",data:T.value.slice(0,3).map((i,u)=>({name:i.name,value:[i.qualityRate,i.onTimeRate,Math.random()*30+70,Math.random()*20+75,Math.random()*25+70,Math.random()*20+80],itemStyle:{color:["#409eff","#67c23a","#e6a23c"][u]},lineStyle:{color:["#409eff","#67c23a","#e6a23c"][u],width:2},areaStyle:{color:["#409eff","#67c23a","#e6a23c"][u],opacity:.1}}))}]};o.setOption(r)},zt=()=>{if(!W.value)return;const o=$(W.value),r=14,i={tooltip:{trigger:"axis",backgroundColor:"rgba(255, 255, 255, 0.95)",borderColor:"#409eff",borderWidth:1,textStyle:{color:"#303133"}},legend:{data:["高风险","中风险","低风险"],top:10,textStyle:{fontSize:12,color:"#606266"}},grid:{left:"3%",right:"4%",bottom:"8%",top:"15%",containLabel:!0},xAxis:{type:"category",data:rt(r),axisLine:{lineStyle:{color:"#e4e7ed"}},axisTick:{lineStyle:{color:"#e4e7ed"}},axisLabel:{color:"#909399",fontSize:11}},yAxis:{type:"value",axisLabel:{color:"#909399",fontSize:11},axisLine:{lineStyle:{color:"#e4e7ed"}},splitLine:{lineStyle:{color:"#f5f7fa",type:"dashed"}}},series:[{name:"高风险",type:"line",data:z(r,2,8),itemStyle:{color:"#f56c6c"},lineStyle:{width:3},smooth:!0,symbol:"circle",symbolSize:6},{name:"中风险",type:"line",data:z(r,5,15),itemStyle:{color:"#e6a23c"},lineStyle:{width:3},smooth:!0,symbol:"circle",symbolSize:6},{name:"低风险",type:"line",data:z(r,1,5),itemStyle:{color:"#67c23a"},lineStyle:{width:3},smooth:!0,symbol:"circle",symbolSize:6}]};o.setOption(i)},Et=async()=>{await ut(),Ct(()=>{bt(),gt()})},ht=async()=>{M.value=!0;try{await Promise.all([ct(),ut(),kt(),At(),Lt()]),await Ct(),setTimeout(()=>{console.log("开始初始化所有图表..."),bt(),gt(),Pt(),It(),Mt(),Ot(),zt(),console.log("图表初始化完成")},100)}catch(o){console.error("加载数据失败:",o)}finally{M.value=!1}},Qt=async()=>{console.log("刷新数据"),d.value=new Date().toLocaleString(),await ht()},Ft=()=>{console.log("导出报告")},Nt=async o=>{console.log("导出类型:",o);try{switch(o){case"pdf":await qt();break;case"excel":await Vt();break;case"ppt":await Bt();break;case"ai-report":await $t();break;default:console.log("未知导出类型")}}catch(r){console.error("导出失败:",r),Q.error("导出失败，请重试")}},qt=async()=>{Q.info("正在生成PDF报告..."),setTimeout(()=>{Q.success("PDF报告已生成并下载")},2e3)},Vt=async()=>{Q.info("正在导出Excel数据...");const o={topDefectMaterials:w.value,supplierQualityData:R.value,categoryDetailData:A.value};console.log("导出数据:",o),setTimeout(()=>{Q.success("Excel数据已导出")},1500)},Bt=async()=>{Q.info("正在生成PPT演示文稿..."),setTimeout(()=>{Q.success("PPT演示文稿已生成")},3e3)},$t=async()=>{Q.info("AI正在分析数据并生成智能报告..."),setTimeout(()=>{Q.success("AI智能报告已生成")},4e3)},Wt=o=>{console.log("查看物料详情:",o)},Ut=o=>{console.log("查看供应商详情:",o)},dt=async()=>{try{M.value=!0,console.log("刷新报告数据..."),await ht(),await wt(),await q(),await xt(),await Rt(),await Tt(),console.log("报告数据刷新完成")}catch(o){console.error("刷新数据失败:",o)}finally{M.value=!1}};let lt=null;const jt=()=>{lt=setInterval(async()=>{console.log("自动刷新数据..."),await dt()},3e4)},Gt=()=>{lt&&(clearInterval(lt),lt=null)};return me(async()=>{await dt(),jt()}),ye(()=>{Gt()}),{qualityTrendChart:tt,quantityTrendChart:e,categoryDistributionChart:X,categoryQualityChart:f,supplierRankingChart:et,supplierRadarChart:at,exceptionTrendChart:W,lastUpdateTime:d,trendPeriod:F,loading:M,coreMetrics:S,materialCategories:k,topDefectMaterials:w,supplierQualityData:R,categoryDetailData:A,aiInsights:Y,categoryStats:x,supplierStats:T,exceptionAlerts:D,topRankingCount:L,displayTopDefectMaterials:P,selectedMaterial:st,selectedSupplier:it,materialOptions:N,supplierOptions:j,updateTrendData:Et,updateTopRanking:St,refreshData:Qt,refreshAllData:dt,exportReport:Ft,handleExport:Nt,viewMaterialDetail:Wt,viewSupplierDetail:Ut}}},ge={class:"material-quality-report"},he={class:"report-header"},Ce={class:"header-content"},De={class:"title-section"},Se={class:"report-meta"},xe={class:"report-period"},we={class:"report-info"},Re={class:"info-item"},Te={class:"info-item"},ke={class:"info-item"},Ae={class:"info-item"},Le={class:"info-item"},Pe={class:"info-item"},Ie={class:"info-item data-status"},Me={class:"header-actions"},Oe={class:"material-overview-section"},ze={class:"section-header"},Ee={class:"section-status"},Qe={class:"overview-content"},Fe={class:"basic-data-section"},Ne={class:"basic-metrics-grid"},qe={class:"basic-metric-card"},Ve={class:"metric-header"},Be={class:"metric-icon",style:{"background-color":"rgba(59, 130, 246, 0.15)",color:"#3b82f6"}},$e={class:"basic-metric-card"},We={class:"metric-header"},Ue={class:"metric-icon",style:{"background-color":"rgba(16, 185, 129, 0.15)",color:"#10b981"}},je={class:"basic-metric-card"},Ge={class:"metric-header"},Ke={class:"metric-icon",style:{"background-color":"rgba(245, 158, 11, 0.15)",color:"#f59e0b"}},Xe={class:"basic-metric-card"},Ye={class:"metric-header"},He={class:"metric-icon",style:{"background-color":"rgba(139, 92, 246, 0.15)",color:"#8b5cf6"}},Je={class:"basic-metric-card"},Ze={class:"metric-header"},ta={class:"metric-icon",style:{"background-color":"rgba(16, 185, 129, 0.15)",color:"#10b981"}},ea={class:"basic-metric-card"},aa={class:"metric-header"},sa={class:"metric-icon",style:{"background-color":"rgba(239, 68, 68, 0.15)",color:"#ef4444"}},oa={class:"material-categories-section"},la={class:"section-subtitle-header"},na={class:"header-right"},ia={class:"defect-ranking-container"},ca={key:0,class:"no-data-message"},ra={key:1,class:"defect-ranking-table"},da={class:"table-body"},ua=["onClick"],pa={class:"cell-rank"},va={class:"cell-material"},fa={class:"material-name"},ma={class:"material-code"},ya={class:"cell-supplier"},_a={class:"supplier-name"},ba={class:"cell-rate"},ga={class:"cell-stats"},ha={class:"stats-item defect-count"},Ca={class:"stats-item total-tests"},Da={class:"stats-item pass-rate"},Sa={class:"cell-action"},xa={class:"scenarios-section"},wa={class:"scenario-cards-grid"},Ra={class:"scenario-card testing-card"},Ta={class:"card-header"},ka={class:"card-icon"},Aa={class:"scenario-card online-card"},La={class:"card-header"},Pa={class:"card-icon"},Ia={class:"exception-type-analysis"},Ma={class:"analysis-header"},Oa={class:"trend-section"},za={class:"section-header"},Ea={class:"section-controls"},Qa={class:"control-group"},Fa={class:"trend-summary"},Na={class:"summary-cards"},qa={class:"summary-card"},Va={class:"summary-icon success"},Ba={class:"summary-card"},$a={class:"summary-icon info"},Wa={class:"summary-card"},Ua={class:"summary-icon warning"},ja={class:"trend-charts"},Ga={class:"chart-container"},Ka={class:"chart-header"},Xa={ref:"qualityTrendChart",class:"chart"},Ya={class:"chart-container"},Ha={class:"chart-header"},Ja={ref:"quantityTrendChart",class:"chart"},Za={class:"category-section"},ts={class:"category-analysis"},es={class:"category-overview"},as={class:"chart-container"},ss={class:"chart-header"},os={ref:"categoryDistributionChart",class:"chart"},ls={class:"category-details"},ns={class:"chart-container"},is={class:"chart-header"},cs={ref:"categoryQualityChart",class:"chart"},rs={class:"supplier-section"},ds={class:"supplier-quality-table"},us={class:"table-header"},ps={class:"quality-table"},vs={class:"supplier-name"},fs={class:"pass-rate"},ms={class:"analysis-summary"},ys={class:"summary-card"},_s={class:"summary-card"},bs={class:"supplier-analysis"},gs={class:"supplier-ranking"},hs={class:"chart-container"},Cs={class:"chart-header"},Ds={ref:"supplierRankingChart",class:"chart"},Ss={class:"supplier-comparison"},xs={class:"chart-container"},ws={class:"chart-header"},Rs={ref:"supplierRadarChart",class:"chart"},Ts={class:"exception-section"},ks={class:"exception-analysis"},As={class:"exception-alerts"},Ls={class:"alert-content"},Ps={class:"alert-title"},Is={class:"alert-description"},Ms={class:"alert-time"},Os={class:"exception-trends"},zs={class:"chart-container"},Es={class:"chart-header"},Qs={ref:"exceptionTrendChart",class:"chart"},Fs={class:"insights-section"},Ns={class:"insights-content"},qs={class:"insights-grid"},Vs={class:"insight-card warning"},Bs={class:"insight-header"},$s={class:"insight-card error"},Ws={class:"insight-header"},Us={class:"insight-card info"},js={class:"insight-header"},Gs={class:"insight-card success"},Ks={class:"insight-header"},Xs={class:"ai-insights-section"},Ys={class:"ai-insights-header"},Hs={class:"ai-insights-content"},Js={class:"ai-insight-header"},Zs={class:"insight-title"},to={class:"insight-confidence"},eo={class:"confidence-value"},ao={class:"ai-insight-content"},so={key:0,class:"insight-actions"},oo={class:"actions-list"},lo={class:"insights-grid"},no={class:"insight-card info"},io={class:"insight-header"},co={class:"action-recommendations"};function ro(tt,e,X,f,et,at){const W=b("Document"),d=b("el-icon"),F=b("Grid"),M=b("OfficeBuilding"),S=b("TrendCharts"),k=b("DataAnalysis"),w=b("Refresh"),R=b("CircleCheck"),A=b("el-button"),Y=b("Download"),U=b("ArrowDown"),O=b("el-dropdown-item"),x=b("el-dropdown-menu"),T=b("el-dropdown"),D=b("el-tag"),L=b("Warning"),P=b("el-radio-button"),st=b("el-radio-group"),it=b("ArrowRight"),N=b("el-option"),j=b("el-select"),ct=fe("loading");return ve((g(),h("div",ge,[t("div",he,[t("div",Ce,[t("div",De,[t("div",Se,[e[4]||(e[4]=t("span",{class:"report-type"},"质量管理报告",-1)),t("span",xe,_(new Date().getFullYear())+"年第"+_(Math.ceil(new Date().getMonth()/3))+"季度",1)]),e[11]||(e[11]=t("h1",{class:"report-title"}," 物料质量总结报告 ",-1)),e[12]||(e[12]=t("p",{class:"report-subtitle"},"Material Quality Summary Report",-1)),t("div",we,[t("span",Re,[a(d,null,{default:n(()=>[a(W)]),_:1}),e[5]||(e[5]=v(" 统计周期: 2025-06-01 ~ 2025-07-13 (43天) "))]),t("span",Te,[a(d,null,{default:n(()=>[a(F)]),_:1}),e[6]||(e[6]=v(" 物料种类: 15种 (覆盖5大类别) "))]),t("span",ke,[a(d,null,{default:n(()=>[a(M)]),_:1}),e[7]||(e[7]=v(" 供应商数: 21家 (活跃供应商) "))]),t("span",Ae,[a(d,null,{default:n(()=>[a(S)]),_:1}),e[8]||(e[8]=v(" 覆盖工厂: 4个 (南昌、深圳、苏州、重庆) "))]),t("span",Le,[a(d,null,{default:n(()=>[a(k)]),_:1}),e[9]||(e[9]=v(" 检验总数: 1452次 (测试396次 + 上线1056次) "))]),t("span",Pe,[a(d,null,{default:n(()=>[a(w)]),_:1}),v(" 生成时间: "+_(f.lastUpdateTime),1)]),t("span",Ie,[a(d,{class:"status-icon"},{default:n(()=>[a(R)]),_:1}),e[10]||(e[10]=v(" 实时数据 (30秒自动刷新) "))])])]),t("div",Me,[a(A,{type:"primary",onClick:f.refreshAllData,loading:f.loading},{default:n(()=>[a(d,null,{default:n(()=>[a(w)]),_:1}),e[13]||(e[13]=v(" 刷新数据 "))]),_:1,__:[13]},8,["onClick","loading"]),a(T,{onCommand:f.handleExport,trigger:"click"},{dropdown:n(()=>[a(x,null,{default:n(()=>[a(O,{command:"pdf"},{default:n(()=>[a(d,null,{default:n(()=>[a(W)]),_:1}),e[15]||(e[15]=v(" 导出PDF报告 "))]),_:1,__:[15]}),a(O,{command:"excel"},{default:n(()=>[a(d,null,{default:n(()=>[a(F)]),_:1}),e[16]||(e[16]=v(" 导出Excel数据 "))]),_:1,__:[16]}),a(O,{command:"ppt",divided:""},{default:n(()=>[a(d,null,{default:n(()=>[a(S)]),_:1}),e[17]||(e[17]=v(" 生成PPT演示 "))]),_:1,__:[17]}),a(O,{command:"ai-report"},{default:n(()=>[a(d,null,{default:n(()=>[a(k)]),_:1}),e[18]||(e[18]=v(" AI智能报告 "))]),_:1,__:[18]})]),_:1})]),default:n(()=>[a(A,{type:"success"},{default:n(()=>[a(d,null,{default:n(()=>[a(Y)]),_:1}),e[14]||(e[14]=v(" 导出报告 ")),a(d,{class:"el-icon--right"},{default:n(()=>[a(U)]),_:1})]),_:1,__:[14]})]),_:1},8,["onCommand"])])])]),t("div",Oe,[t("div",ze,[e[20]||(e[20]=I('<div class="section-title-wrapper" data-v-8b1c8507><h2 class="section-title" data-v-8b1c8507><span class="section-number" data-v-8b1c8507>01</span><span class="section-name" data-v-8b1c8507>物料情况概览</span><span class="section-subtitle" data-v-8b1c8507>Material Overview</span></h2></div>',1)),t("div",Ee,[a(D,{type:"success",size:"large",class:"status-tag"},{default:n(()=>[a(d,null,{default:n(()=>[a(R)]),_:1}),e[19]||(e[19]=v(" 数据完整性良好 "))]),_:1,__:[19]})])]),t("div",Qe,[t("div",Fe,[e[27]||(e[27]=t("div",{class:"section-subtitle-header"},[t("h3",null,"质量检验概况"),t("span",{class:"subtitle-desc"},"Quality Inspection Overview")],-1)),t("div",Ne,[t("div",qe,[t("div",Ve,[t("div",Be,[a(d,null,{default:n(()=>[a(k)]),_:1})])]),e[21]||(e[21]=t("div",{class:"metric-content"},[t("div",{class:"metric-value",style:{color:"#3b82f6"}},"15种"),t("div",{class:"metric-label"},"物料种类"),t("div",{class:"metric-desc"},"覆盖5大类别")],-1))]),t("div",$e,[t("div",We,[t("div",Ue,[a(d,null,{default:n(()=>[a(M)]),_:1})])]),e[22]||(e[22]=t("div",{class:"metric-content"},[t("div",{class:"metric-value",style:{color:"#10b981"}},"4个"),t("div",{class:"metric-label"},"覆盖工厂"),t("div",{class:"metric-desc"},"南昌、深圳、苏州、重庆")],-1))]),t("div",je,[t("div",Ge,[t("div",Ke,[a(d,null,{default:n(()=>[a(S)]),_:1})])]),e[23]||(e[23]=t("div",{class:"metric-content"},[t("div",{class:"metric-value",style:{color:"#f59e0b"}},"21家"),t("div",{class:"metric-label"},"供应商总数"),t("div",{class:"metric-desc"},"活跃供应商")],-1))]),t("div",Xe,[t("div",Ye,[t("div",He,[a(d,null,{default:n(()=>[a(k)]),_:1})])]),e[24]||(e[24]=t("div",{class:"metric-content"},[t("div",{class:"metric-value",style:{color:"#8b5cf6"}},"1452次"),t("div",{class:"metric-label"},"总检验次数"),t("div",{class:"metric-desc"},"测试396 + 上线1056")],-1))]),t("div",Je,[t("div",Ze,[t("div",ta,[a(d,null,{default:n(()=>[a(R)]),_:1})])]),e[25]||(e[25]=t("div",{class:"metric-content"},[t("div",{class:"metric-value",style:{color:"#10b981"}},"95.2%"),t("div",{class:"metric-label"},"整体合格率"),t("div",{class:"metric-desc"},"质量水平良好")],-1))]),t("div",ea,[t("div",aa,[t("div",sa,[a(d,null,{default:n(()=>[a(L)]),_:1})])]),e[26]||(e[26]=t("div",{class:"metric-content"},[t("div",{class:"metric-value",style:{color:"#ef4444"}},"70次"),t("div",{class:"metric-label"},"不良检出"),t("div",{class:"metric-desc"},"需重点关注")],-1))])])]),t("div",oa,[t("div",la,[e[31]||(e[31]=t("div",{class:"header-left"},[t("h3",null,"物料不良情况TOP排名"),t("span",{class:"subtitle-desc"},"Top Materials with Quality Issues")],-1)),t("div",na,[a(st,{modelValue:f.topRankingCount,"onUpdate:modelValue":e[0]||(e[0]=c=>f.topRankingCount=c),size:"small",onChange:f.updateTopRanking},{default:n(()=>[a(P,{label:3},{default:n(()=>e[28]||(e[28]=[v("Top 3")])),_:1,__:[28]}),a(P,{label:5},{default:n(()=>e[29]||(e[29]=[v("Top 5")])),_:1,__:[29]}),a(P,{label:10},{default:n(()=>e[30]||(e[30]=[v("Top 10")])),_:1,__:[30]})]),_:1},8,["modelValue","onChange"])])]),t("div",ia,[f.displayTopDefectMaterials.length===0?(g(),h("div",ca,[a(d,null,{default:n(()=>[a(L)]),_:1}),e[32]||(e[32]=t("span",null,"暂无不良物料数据",-1))])):(g(),h("div",ra,[t("div",da,[(g(!0),h(V,null,B(f.displayTopDefectMaterials,(c,q)=>(g(),h("div",{class:"table-row",key:c.materialCode,onClick:ot=>f.viewMaterialDetail(c)},[t("div",pa,[t("div",{class:K(["ranking-badge","rank-"+(q+1)])},_(q+1),3)]),t("div",va,[t("div",fa,_(c.materialName),1),t("div",ma,_(c.materialCode),1)]),t("div",ya,[t("div",_a,_(c.supplier),1)]),t("div",ba,[t("div",{class:K(["defect-rate",{"high-risk":c.defectRate>5,"medium-risk":c.defectRate>3&&c.defectRate<=5}])},_(c.defectRate)+"% ",3)]),t("div",ga,[t("div",ha,_(c.defectCount)+"次不良",1),t("div",Ca,"共"+_(c.totalTests)+"次检验",1),t("div",Da,"通过率: "+_(c.testPassRate)+"%",1)]),t("div",Sa,[a(d,{class:"detail-arrow"},{default:n(()=>[a(it)]),_:1})])],8,ua))),128))])]))])]),t("div",xa,[e[40]||(e[40]=t("div",{class:"section-subtitle-header"},[t("h3",null,"质量检验场景分析"),t("span",{class:"subtitle-desc"},"Quality Inspection Scenario Analysis")],-1)),t("div",wa,[t("div",Ra,[t("div",Ta,[t("div",ka,[a(d,null,{default:n(()=>[a(k)]),_:1})]),e[33]||(e[33]=t("div",{class:"card-title"},[t("h4",null,"实验室测试"),t("span",{class:"card-subtitle"},"Laboratory Testing")],-1))]),e[34]||(e[34]=I('<div class="card-content" data-v-8b1c8507><div class="main-metric" data-v-8b1c8507><span class="metric-value" data-v-8b1c8507>396</span><span class="metric-unit" data-v-8b1c8507>次检验</span></div><div class="sub-metrics" data-v-8b1c8507><div class="sub-metric success" data-v-8b1c8507><span class="sub-label" data-v-8b1c8507>合格</span><span class="sub-value" data-v-8b1c8507>378次</span></div><div class="sub-metric error" data-v-8b1c8507><span class="sub-label" data-v-8b1c8507>不合格</span><span class="sub-value" data-v-8b1c8507>18次</span></div></div><div class="card-footer" data-v-8b1c8507><div class="pass-rate" data-v-8b1c8507><span class="rate-label" data-v-8b1c8507>合格率</span><span class="rate-value success" data-v-8b1c8507>95.5%</span></div></div></div>',1))]),t("div",Aa,[t("div",La,[t("div",Pa,[a(d,null,{default:n(()=>[a(S)]),_:1})]),e[35]||(e[35]=t("div",{class:"card-title"},[t("h4",null,"上线跟踪"),t("span",{class:"card-subtitle"},"Online Tracking")],-1))]),e[36]||(e[36]=I('<div class="card-content" data-v-8b1c8507><div class="main-metric" data-v-8b1c8507><span class="metric-value" data-v-8b1c8507>1056</span><span class="metric-unit" data-v-8b1c8507>次跟踪</span></div><div class="sub-metrics" data-v-8b1c8507><div class="sub-metric success" data-v-8b1c8507><span class="sub-label" data-v-8b1c8507>正常</span><span class="sub-value" data-v-8b1c8507>1004次</span></div><div class="sub-metric warning" data-v-8b1c8507><span class="sub-label" data-v-8b1c8507>异常</span><span class="sub-value" data-v-8b1c8507>52次</span></div></div><div class="card-footer" data-v-8b1c8507><div class="pass-rate" data-v-8b1c8507><span class="rate-label" data-v-8b1c8507>正常率</span><span class="rate-value success" data-v-8b1c8507>95.1%</span></div></div></div>',1))])]),t("div",Ia,[t("div",Ma,[t("h4",null,[a(d,null,{default:n(()=>[a(S)]),_:1}),e[37]||(e[37]=v("异常类型占比"))]),e[38]||(e[38]=t("span",{class:"analysis-desc"},"Exception Type Distribution",-1))]),e[39]||(e[39]=I('<div class="type-distribution" data-v-8b1c8507><div class="type-item" data-v-8b1c8507><div class="type-icon" style="background-color:#ef4444;" data-v-8b1c8507></div><div class="type-info" data-v-8b1c8507><span class="type-name" data-v-8b1c8507>焊接不良</span><span class="type-count" data-v-8b1c8507>23次 (32.9%)</span></div></div><div class="type-item" data-v-8b1c8507><div class="type-icon" style="background-color:#f59e0b;" data-v-8b1c8507></div><div class="type-info" data-v-8b1c8507><span class="type-name" data-v-8b1c8507>尺寸偏差</span><span class="type-count" data-v-8b1c8507>15次 (21.4%)</span></div></div><div class="type-item" data-v-8b1c8507><div class="type-icon" style="background-color:#8b5cf6;" data-v-8b1c8507></div><div class="type-info" data-v-8b1c8507><span class="type-name" data-v-8b1c8507>外观缺陷</span><span class="type-count" data-v-8b1c8507>14次 (20.0%)</span></div></div><div class="type-item" data-v-8b1c8507><div class="type-icon" style="background-color:#06b6d4;" data-v-8b1c8507></div><div class="type-info" data-v-8b1c8507><span class="type-name" data-v-8b1c8507>功能异常</span><span class="type-count" data-v-8b1c8507>10次 (14.3%)</span></div></div><div class="type-item" data-v-8b1c8507><div class="type-icon" style="background-color:#10b981;" data-v-8b1c8507></div><div class="type-info" data-v-8b1c8507><span class="type-name" data-v-8b1c8507>其他异常</span><span class="type-count" data-v-8b1c8507>8次 (11.4%)</span></div></div></div>',1))])])])]),t("div",Oa,[t("div",za,[e[45]||(e[45]=I('<div class="section-title-wrapper" data-v-8b1c8507><h2 class="section-title" data-v-8b1c8507><span class="section-number" data-v-8b1c8507>02</span><span class="section-name" data-v-8b1c8507>质量趋势分析</span><span class="section-subtitle" data-v-8b1c8507>Quality Trend Analysis</span></h2></div>',1)),t("div",Ea,[t("div",Qa,[e[44]||(e[44]=t("label",null,"筛选条件:",-1)),a(j,{modelValue:f.selectedMaterial,"onUpdate:modelValue":e[1]||(e[1]=c=>f.selectedMaterial=c),onChange:f.updateTrendData,size:"small",placeholder:"选择物料",clearable:""},{default:n(()=>[a(N,{label:"全部物料",value:""}),(g(!0),h(V,null,B(f.materialOptions,c=>(g(),nt(N,{key:c.code,label:c.name,value:c.code},null,8,["label","value"]))),128))]),_:1},8,["modelValue","onChange"]),a(j,{modelValue:f.selectedSupplier,"onUpdate:modelValue":e[2]||(e[2]=c=>f.selectedSupplier=c),onChange:f.updateTrendData,size:"small",placeholder:"选择供应商",clearable:""},{default:n(()=>[a(N,{label:"全部供应商",value:""}),(g(!0),h(V,null,B(f.supplierOptions,c=>(g(),nt(N,{key:c,label:c,value:c},null,8,["label","value"]))),128))]),_:1},8,["modelValue","onChange"]),a(st,{modelValue:f.trendPeriod,"onUpdate:modelValue":e[3]||(e[3]=c=>f.trendPeriod=c),onChange:f.updateTrendData,class:"trend-controls"},{default:n(()=>[a(P,{label:"7d"},{default:n(()=>e[41]||(e[41]=[v("近7天")])),_:1,__:[41]}),a(P,{label:"30d"},{default:n(()=>e[42]||(e[42]=[v("近30天")])),_:1,__:[42]}),a(P,{label:"90d"},{default:n(()=>e[43]||(e[43]=[v("近90天")])),_:1,__:[43]})]),_:1},8,["modelValue","onChange"])])])]),t("div",Fa,[t("div",Na,[t("div",qa,[t("div",Va,[a(d,null,{default:n(()=>[a(S)]),_:1})]),e[46]||(e[46]=t("div",{class:"summary-content"},[t("div",{class:"summary-value"},"+2.1%"),t("div",{class:"summary-label"},"合格率环比"),t("div",{class:"summary-desc"},"较上周期提升")],-1))]),t("div",Ba,[t("div",$a,[a(d,null,{default:n(()=>[a(k)]),_:1})]),e[47]||(e[47]=t("div",{class:"summary-content"},[t("div",{class:"summary-value"},"+156次"),t("div",{class:"summary-label"},"检验量环比"),t("div",{class:"summary-desc"},"较上周期增加")],-1))]),t("div",Wa,[t("div",Ua,[a(d,null,{default:n(()=>[a(L)]),_:1})]),e[48]||(e[48]=t("div",{class:"summary-content"},[t("div",{class:"summary-value"},"-8次"),t("div",{class:"summary-label"},"不良数环比"),t("div",{class:"summary-desc"},"较上周期减少")],-1))])])]),t("div",ja,[t("div",Ga,[t("div",Ka,[e[50]||(e[50]=t("h3",null,"分场景质量趋势",-1)),a(D,{type:"success"},{default:n(()=>e[49]||(e[49]=[v("整体向好")])),_:1,__:[49]})]),t("div",Xa,null,512)]),t("div",Ya,[t("div",Ha,[e[52]||(e[52]=t("h3",null,"检验数量趋势",-1)),a(D,{type:"info"},{default:n(()=>e[51]||(e[51]=[v("稳定增长")])),_:1,__:[51]})]),t("div",Ja,null,512)])])]),t("div",Za,[e[57]||(e[57]=I('<div class="section-header" data-v-8b1c8507><div class="section-title-wrapper" data-v-8b1c8507><h2 class="section-title" data-v-8b1c8507><span class="section-number" data-v-8b1c8507>03</span><span class="section-name" data-v-8b1c8507>物料分类分析</span><span class="section-subtitle" data-v-8b1c8507>Material Category Analysis</span></h2></div></div>',1)),t("div",ts,[t("div",es,[t("div",as,[t("div",ss,[e[54]||(e[54]=t("h3",null,"物料分类分布",-1)),a(D,{type:"info"},{default:n(()=>e[53]||(e[53]=[v("按物料数量统计")])),_:1,__:[53]})]),t("div",os,null,512)])]),t("div",ls,[t("div",ns,[t("div",is,[e[56]||(e[56]=t("h3",null,"各类别质量对比",-1)),a(D,{type:"success"},{default:n(()=>e[55]||(e[55]=[v("合格率对比分析")])),_:1,__:[55]})]),t("div",cs,null,512)])])])]),t("div",rs,[e[70]||(e[70]=I('<div class="section-header" data-v-8b1c8507><div class="section-title-wrapper" data-v-8b1c8507><h2 class="section-title" data-v-8b1c8507><span class="section-number" data-v-8b1c8507>04</span><span class="section-name" data-v-8b1c8507>供应商质量分析</span><span class="section-subtitle" data-v-8b1c8507>Supplier Quality Analysis</span></h2></div></div>',1)),t("div",ds,[t("div",us,[t("h4",null,[a(d,null,{default:n(()=>[a(M)]),_:1}),e[58]||(e[58]=v("供应商质量表现对比"))]),e[59]||(e[59]=t("span",{class:"table-desc"},"Supplier Quality Performance Comparison",-1))]),t("div",ps,[t("table",null,[e[61]||(e[61]=t("thead",null,[t("tr",null,[t("th",null,"供应商"),t("th",null,"物料数"),t("th",null,"检验次数"),t("th",null,"不良次数"),t("th",null,"不良率"),t("th",null,"合格率"),t("th",null,"质量等级"),t("th",null,"操作")])],-1)),t("tbody",null,[(g(!0),h(V,null,B(f.supplierQualityData,c=>(g(),h("tr",{key:c.name,class:K(c.riskLevel)},[t("td",vs,_(c.name),1),t("td",null,_(c.materialCount)+"种",1),t("td",null,_(c.inspectionCount)+"次",1),t("td",null,_(c.defectCount)+"次",1),t("td",{class:K(["defect-rate",c.riskLevel])},_(c.defectRate)+"%",3),t("td",fs,_(c.passRate)+"%",1),t("td",null,[a(D,{type:c.gradeType,size:"small"},{default:n(()=>[v(_(c.grade),1)]),_:2},1032,["type"])]),t("td",null,[a(A,{size:"small",type:"primary",link:"",onClick:q=>f.viewSupplierDetail(c)},{default:n(()=>e[60]||(e[60]=[v(" 查看详情 ")])),_:2,__:[60]},1032,["onClick"])])],2))),128))])])])]),t("div",ms,[t("div",ys,[t("h4",null,[a(d,null,{default:n(()=>[a(S)]),_:1}),e[62]||(e[62]=v("同物料供应商质量对比"))]),e[63]||(e[63]=t("p",null,[t("strong",null,"摄像头模组"),v("：舜宇光学不良率4.7%，欧菲光不良率2.1%，建议优化舜宇光学供应链； "),t("strong",null,"充电器IC"),v("：德州仪器不良率8.5%，联发科不良率3.2%，德州仪器需重点改进； "),t("strong",null,"显示屏总成"),v("：BOE不良率3.9%，天马不良率5.1%，BOE质量更稳定。 ")],-1))]),t("div",_s,[t("h4",null,[a(d,null,{default:n(()=>[a(L)]),_:1}),e[64]||(e[64]=v("质量改进建议"))]),e[65]||(e[65]=t("p",null," 建议对不良率超过5%的供应商启动质量改进计划，加强来料检验和过程监控。 重点关注充电类物料的供应商质量管控，建立供应商质量月度评估机制。 ",-1))])]),t("div",bs,[t("div",gs,[t("div",hs,[t("div",Cs,[e[67]||(e[67]=t("h3",null,"供应商质量排行",-1)),a(D,{type:"primary"},{default:n(()=>e[66]||(e[66]=[v("综合评分排名")])),_:1,__:[66]})]),t("div",Ds,null,512)])]),t("div",Ss,[t("div",xs,[t("div",ws,[e[69]||(e[69]=t("h3",null,"供应商综合评价",-1)),a(D,{type:"warning"},{default:n(()=>e[68]||(e[68]=[v("多维度对比")])),_:1,__:[68]})]),t("div",Rs,null,512)])])])]),t("div",Ts,[e[73]||(e[73]=I('<div class="section-header" data-v-8b1c8507><div class="section-title-wrapper" data-v-8b1c8507><h2 class="section-title" data-v-8b1c8507><span class="section-number" data-v-8b1c8507>05</span><span class="section-name" data-v-8b1c8507>异常分析与预警</span><span class="section-subtitle" data-v-8b1c8507>Exception Analysis &amp; Alerts</span></h2></div></div>',1)),t("div",ks,[t("div",As,[(g(!0),h(V,null,B(f.exceptionAlerts,c=>(g(),h("div",{class:"alert-item",key:c.id},[t("div",{class:K(["alert-icon",c.level])},[a(d,null,{default:n(()=>[(g(),nt(Dt(c.icon)))]),_:2},1024)],2),t("div",Ls,[t("div",Ps,_(c.title),1),t("div",Is,_(c.description),1),t("div",Ms,_(c.time),1)])]))),128))]),t("div",Os,[t("div",zs,[t("div",Es,[e[72]||(e[72]=t("h3",null,"异常趋势分析",-1)),a(D,{type:"danger"},{default:n(()=>e[71]||(e[71]=[v("风险等级趋势")])),_:1,__:[71]})]),t("div",Qs,null,512)])])])]),t("div",Fs,[e[90]||(e[90]=I('<div class="section-header" data-v-8b1c8507><div class="section-title-wrapper" data-v-8b1c8507><h2 class="section-title" data-v-8b1c8507><span class="section-number" data-v-8b1c8507>07</span><span class="section-name" data-v-8b1c8507>关键洞察与建议</span><span class="section-subtitle" data-v-8b1c8507>Key Insights &amp; Recommendations</span></h2></div></div>',1)),t("div",Ns,[t("div",qs,[t("div",Vs,[t("div",Bs,[a(d,null,{default:n(()=>[a(L)]),_:1}),e[74]||(e[74]=t("h4",null,"测试异常集中分析",-1))]),e[75]||(e[75]=t("p",null,"实验室测试18次不合格主要集中在充电器IC芯片(8次)和USB-C连接器(4次)，建议对这两类物料加强来料检验和供应商管控。",-1))]),t("div",$s,[t("div",Ws,[a(d,null,{default:n(()=>[a(L)]),_:1}),e[76]||(e[76]=t("h4",null,"上线异常原因分析",-1))]),e[77]||(e[77]=t("p",null,"生产线异常52次，焊接不良占44%(23次)，尺寸偏差占29%(15次)，外观缺陷占27%(14次)。建议优化工艺参数和加强过程监控。",-1))]),t("div",Us,[t("div",js,[a(d,null,{default:n(()=>[a(S)]),_:1}),e[78]||(e[78]=t("h4",null,"供应商质量对比",-1))]),e[79]||(e[79]=t("p",null,"同物料不同供应商质量差异明显：欧菲光摄像头不良率2.1%，舜宇光学4.7%；联发科IC不良率3.2%，德州仪器8.5%。建议优化供应商选择。",-1))]),t("div",Gs,[t("div",Ks,[a(d,null,{default:n(()=>[a(R)]),_:1}),e[80]||(e[80]=t("h4",null,"质量改进目标",-1))]),e[81]||(e[81]=t("p",null,"当前整体合格率95.2%，建议通过专项改进将不良率控制在3%以内，重点提升充电类和连接器类物料的质量水平。",-1))])]),t("div",Xs,[t("div",Ys,[t("h4",null,[a(d,null,{default:n(()=>[a(k)]),_:1}),e[82]||(e[82]=v("AI智能分析建议"))]),a(D,{type:"info",size:"small"},{default:n(()=>e[83]||(e[83]=[v("基于数据自动生成")])),_:1,__:[83]})]),t("div",Hs,[(g(!0),h(V,null,B(f.aiInsights,c=>(g(),h("div",{class:"ai-insight-item",key:c.id},[t("div",Js,[t("div",{class:K(["insight-type-badge",c.type])},[a(d,null,{default:n(()=>[(g(),nt(Dt(c.icon)))]),_:2},1024)],2),t("div",Zs,_(c.title),1),t("div",to,[e[84]||(e[84]=t("span",{class:"confidence-label"},"置信度:",-1)),t("span",eo,_(c.confidence)+"%",1)])]),t("div",ao,[t("p",null,_(c.content),1),c.actions&&c.actions.length>0?(g(),h("div",so,[e[85]||(e[85]=t("span",{class:"actions-label"},"建议行动:",-1)),t("ul",oo,[(g(!0),h(V,null,B(c.actions,q=>(g(),h("li",{key:q},_(q),1))),128))])])):_e("",!0)])]))),128))])]),t("div",lo,[t("div",no,[t("div",io,[a(d,null,{default:n(()=>[a(S)]),_:1}),e[86]||(e[86]=t("h4",null,"工厂差异分析",-1))]),e[87]||(e[87]=t("p",null,"南昌工厂摄像头组件不良率显著高于其他工厂(6.2% vs 平均3.8%)，建议检查该工厂的工艺参数和仓储环境影响因素。",-1))])]),t("div",co,[t("h4",null,[a(d,null,{default:n(()=>[a(k)]),_:1}),e[88]||(e[88]=v("下阶段行动建议"))]),e[89]||(e[89]=I('<div class="recommendations-list" data-v-8b1c8507><div class="recommendation-item" data-v-8b1c8507><span class="priority high" data-v-8b1c8507>高优先级</span><span class="action" data-v-8b1c8507>对不良率TOP5物料启动专项改进：加强德州仪器IC和舜宇光学摄像头的质量管控</span></div><div class="recommendation-item" data-v-8b1c8507><span class="priority high" data-v-8b1c8507>高优先级</span><span class="action" data-v-8b1c8507>优化生产工艺参数，重点解决焊接不良和尺寸偏差问题，降低上线异常率</span></div><div class="recommendation-item" data-v-8b1c8507><span class="priority medium" data-v-8b1c8507>中优先级</span><span class="action" data-v-8b1c8507>建立供应商质量分级管理，优先选择欧菲光、联发科等优质供应商</span></div><div class="recommendation-item" data-v-8b1c8507><span class="priority medium" data-v-8b1c8507>中优先级</span><span class="action" data-v-8b1c8507>加强来料检验标准，对充电器IC和USB-C连接器实施100%检验</span></div><div class="recommendation-item" data-v-8b1c8507><span class="priority low" data-v-8b1c8507>低优先级</span><span class="action" data-v-8b1c8507>建立质量追溯机制和预警系统，实现质量问题的快速定位和处理</span></div></div>',1))])])])])),[[ct,f.loading]])}const fo=Xt(be,[["render",ro],["__scopeId","data-v-8b1c8507"]]);export{fo as default};
