import{S as x,T as de,Q as he,c as n,o as a,a as e,b as k,O as z,P as H,a0 as ee,E as Oe,M as V,n as T,az as j,F as q,r as D,t as i,e as L,d as te,W as ge,V as oe,U as Be,aE as ce,X as Ne,a7 as Ve,aU as Ue,aV as He,aW as je,aX as Fe,aY as Ge,L as We,aZ as Je,K as Xe,$ as Ke,a_ as Ze,Z as Ye,_ as et,R as tt,ai as fe}from"./element-plus-DR-erZ3X.js";/* empty css                                                                             */import{aM as K,a as ae}from"./index-Bo1zM2q5.js";import{i as _e,L as se}from"./echarts-Dfqt_Pbx.js";import{a as ie,v as Y}from"./VoiceServiceManager-2sv0FYbn.js";class st{constructor(){this.baseURL="http://localhost:3001/api"}async getInventoryDistribution(){try{const l=await K.post(`${this.baseURL}/assistant/query`,{query:"æŸ¥è¯¢å½“å‰åº“å­˜æ€»ä½“æƒ…å†µ"}),c=this.parseInventoryData(l.data.reply);return this.formatPieChartData(c)}catch(l){return console.error("è·å–åº“å­˜åˆ†å¸ƒæ•°æ®å¤±è´¥:",l),this.getMockInventoryDistribution()}}async getQualityTrend(){try{const l=await K.post(`${this.baseURL}/assistant/query`,{query:"åˆ†æè´¨é‡æŒ‡æ ‡è¶‹åŠ¿"}),c=this.parseQualityTrendData(l.data.reply);return this.formatLineChartData(c)}catch(l){return console.error("è·å–è´¨é‡è¶‹åŠ¿æ•°æ®å¤±è´¥:",l),this.getMockQualityTrend()}}async getDefectDistribution(){try{const l=await K.post(`${this.baseURL}/assistant/query`,{query:"åˆ†æä¸»è¦ä¸è‰¯ç±»å‹åˆ†å¸ƒ"}),c=this.parseDefectData(l.data.reply);return this.formatBarChartData(c)}catch(l){return console.error("è·å–ä¸è‰¯åˆ†å¸ƒæ•°æ®å¤±è´¥:",l),this.getMockDefectDistribution()}}async getSupplierEvaluation(){try{const l=await K.post(`${this.baseURL}/assistant/query`,{query:"åˆ†æå„ä¾›åº”å•†çš„é£é™©ç­‰çº§å’Œè´¨é‡è¡¨ç°"}),c=this.parseSupplierData(l.data.reply);return this.formatRadarChartData(c)}catch(l){return console.error("è·å–ä¾›åº”å•†è¯„ä»·æ•°æ®å¤±è´¥:",l),this.getMockSupplierEvaluation()}}async getRiskDistribution(){try{const l=await K.post(`${this.baseURL}/assistant/query`,{query:"æŸ¥è¯¢é«˜é£é™©ç­‰çº§çš„ç‰©æ–™"}),c=this.parseRiskData(l.data.reply);return this.formatPieChartData(c)}catch(l){return console.error("è·å–é£é™©åˆ†å¸ƒæ•°æ®å¤±è´¥:",l),this.getMockRiskDistribution()}}async getPassRateStats(){try{const l=await K.post(`${this.baseURL}/assistant/query`,{query:"è®¡ç®—æœ¬æœˆçš„åˆæ ¼ç‡"}),c=this.parsePassRateData(l.data.reply);return this.formatBarChartData(c)}catch(l){return console.error("è·å–åˆæ ¼ç‡æ•°æ®å¤±è´¥:",l),this.getMockPassRateStats()}}parseInventoryData(l){const c=l.split(`
`),r=[];return c.forEach(y=>{const _=y.match(/(ç”µå­å…ƒä»¶|ç»“æ„ä»¶|å…‰å­¦|ç”µæº|è¿æ¥å™¨).*?(\d+)/);_&&r.push({name:_[1],value:parseInt(_[2])})}),r.length>0?r:this.getMockInventoryDistribution()}parseQualityTrendData(l){const c=[];return["2024-01","2024-02","2024-03","2024-04","2024-05","2024-06"].forEach((y,_)=>{const p=l.match(/(\d+\.?\d*)%/),A=p?parseFloat(p[1]):95;c.push({date:y,value:A+(Math.random()-.5)*4})}),c}parseDefectData(l){const c=["å¤–è§‚ä¸è‰¯","å°ºå¯¸è¶…å·®","åŠŸèƒ½å¼‚å¸¸","åŒ…è£…é—®é¢˜","å…¶ä»–"],r=[];return c.forEach(y=>{const _=new RegExp(`${y}.*?(\\d+)`,"i"),p=l.match(_),A=p?parseInt(p[1]):Math.floor(Math.random()*50)+10;r.push({type:y,count:A})}),r}parseSupplierData(l){const c=["ç¾å…‰ç§‘æŠ€","å¯Œå£«åº·","æ¯”äºšè¿ª","æ¬§è²å…‰","ç«‹è®¯ç²¾å¯†"],r=["è´¨é‡","äº¤æœŸ","æˆæœ¬","æœåŠ¡","åˆ›æ–°"];return c.slice(0,3).map(y=>({name:y,value:r.map(()=>Math.floor(Math.random()*40)+60)}))}parseRiskData(l){const c=["ä½é£é™©","ä¸­é£é™©","é«˜é£é™©","æé«˜é£é™©"],r=[];return c.forEach(y=>{const _=new RegExp(`${y}.*?(\\d+)`,"i"),p=l.match(_),A=p?parseInt(p[1]):Math.floor(Math.random()*100)+20;r.push({name:y,value:A})}),r}parsePassRateData(l){const c=["ç”µå­å…ƒä»¶","ç»“æ„ä»¶","å…‰å­¦å™¨ä»¶","ç”µæºæ¨¡å—","è¿æ¥å™¨"],r=[];return c.forEach(y=>{const _=new RegExp(`${y}.*?(\\d+\\.?\\d*)%`,"i"),p=l.match(_),A=p?parseFloat(p[1]):90+Math.random()*10;r.push({name:y,value:A})}),r}formatPieChartData(l){return l.map(c=>({name:c.name,value:c.value||c.count}))}formatLineChartData(l){return{xAxis:l.map(c=>c.date||c.name),series:l.map(c=>c.value)}}formatBarChartData(l){return{xAxis:l.map(c=>c.type||c.name),series:l.map(c=>c.count||c.value)}}formatRadarChartData(l){return{indicator:["è´¨é‡","äº¤æœŸ","æˆæœ¬","æœåŠ¡","åˆ›æ–°"].map(r=>({name:r,max:100})),series:l.map(r=>({name:r.name,value:r.value}))}}getMockInventoryDistribution(){return[{name:"ç”µå­å…ƒä»¶",value:1200},{name:"ç»“æ„ä»¶",value:800},{name:"å…‰å­¦å™¨ä»¶",value:600},{name:"ç”µæºæ¨¡å—",value:400},{name:"è¿æ¥å™¨",value:300}]}getMockQualityTrend(){return{xAxis:["2024-01","2024-02","2024-03","2024-04","2024-05","2024-06"],series:[95.2,96.1,94.8,97.3,96.7,98.1]}}getMockDefectDistribution(){return[{type:"å¤–è§‚ä¸è‰¯",count:45},{type:"å°ºå¯¸è¶…å·®",count:32},{type:"åŠŸèƒ½å¼‚å¸¸",count:28},{type:"åŒ…è£…é—®é¢˜",count:15},{type:"å…¶ä»–",count:8}]}getMockSupplierEvaluation(){return{indicator:[{name:"è´¨é‡",max:100},{name:"äº¤æœŸ",max:100},{name:"æˆæœ¬",max:100},{name:"æœåŠ¡",max:100},{name:"åˆ›æ–°",max:100}],series:[{name:"ç¾å…‰ç§‘æŠ€",value:[95,88,92,90,85]},{name:"å¯Œå£«åº·",value:[92,95,88,93,87]},{name:"æ¯”äºšè¿ª",value:[88,90,95,85,92]}]}}getMockRiskDistribution(){return[{name:"ä½é£é™©",value:65},{name:"ä¸­é£é™©",value:25},{name:"é«˜é£é™©",value:8},{name:"æé«˜é£é™©",value:2}]}getMockPassRateStats(){return{xAxis:["ç”µå­å…ƒä»¶","ç»“æ„ä»¶","å…‰å­¦å™¨ä»¶","ç”µæºæ¨¡å—","è¿æ¥å™¨"],series:[98.5,96.2,97.8,95.1,99.2]}}}const N=new st,at={class:"chart-tool-panel"},nt={class:"panel-header"},ot={class:"panel-actions"},it={class:"chart-categories"},lt={class:"chart-category"},rt={class:"category-content"},ct={class:"chart-grid"},dt=["onClick","title"],ut={class:"chart-icon"},vt={class:"chart-name"},pt={class:"chart-category"},mt={class:"category-content"},yt={class:"chart-grid"},ht=["onClick","title"],ft={class:"chart-icon"},gt={class:"chart-name"},_t={class:"chart-category"},bt={class:"category-content"},kt={class:"chart-grid"},$t=["onClick","title"],Ct={class:"chart-icon"},xt={class:"chart-name"},wt={key:0,class:"chart-preview"},St={class:"preview-header"},qt={class:"preview-actions"},Dt={class:"preview-content"},At={__name:"ChartToolPanel",setup(v){const l=x({visualization:!0,quality:!1,supplier:!1}),c=x(null),r=x(null),y=x(null),_=x(300),p=x([{id:"inventory-distribution",name:"åº“å­˜åˆ†å¸ƒ",icon:"ğŸ¥§",type:"pie",description:"æ˜¾ç¤ºå„ç±»ç‰©æ–™çš„åº“å­˜åˆ†å¸ƒæƒ…å†µ",dataSource:"inventory"},{id:"trend-analysis",name:"è¶‹åŠ¿åˆ†æ",icon:"ğŸ“ˆ",type:"line",description:"æ˜¾ç¤ºè´¨é‡æŒ‡æ ‡çš„æ—¶é—´è¶‹åŠ¿",dataSource:"quality_trend"},{id:"risk-heatmap",name:"é£é™©çƒ­åŠ›å›¾",icon:"ğŸ”¥",type:"heatmap",description:"æ˜¾ç¤ºå„åŒºåŸŸçš„é£é™©åˆ†å¸ƒçƒ­åŠ›å›¾",dataSource:"risk_data"},{id:"defect-pareto",name:"ä¸è‰¯å¸•ç´¯æ‰˜",icon:"ğŸ“Š",type:"bar",description:"ä¸è‰¯ç±»å‹çš„å¸•ç´¯æ‰˜åˆ†æå›¾",dataSource:"defect_data"}]),A=x([{id:"quality-control",name:"è´¨é‡æ§åˆ¶å›¾",icon:"ğŸ“‰",type:"line",description:"è´¨é‡æ§åˆ¶è¿‡ç¨‹å›¾è¡¨",dataSource:"quality_control"},{id:"pass-rate",name:"åˆæ ¼ç‡ç»Ÿè®¡",icon:"âœ…",type:"bar",description:"å„äº§å“çº¿åˆæ ¼ç‡ç»Ÿè®¡",dataSource:"pass_rate"},{id:"defect-distribution",name:"ä¸è‰¯åˆ†å¸ƒ",icon:"âŒ",type:"pie",description:"ä¸è‰¯ç±»å‹åˆ†å¸ƒé¥¼å›¾",dataSource:"defect_distribution"}]),g=x([{id:"supplier-radar",name:"ä¾›åº”å•†é›·è¾¾",icon:"ğŸ¯",type:"radar",description:"ä¾›åº”å•†ç»¼åˆè¯„ä»·é›·è¾¾å›¾",dataSource:"supplier_evaluation"},{id:"supplier-ranking",name:"ä¾›åº”å•†æ’å",icon:"ğŸ†",type:"bar",description:"ä¾›åº”å•†è´¨é‡æ’åæŸ±çŠ¶å›¾",dataSource:"supplier_ranking"}]),$=M=>{l.value[M]=!l.value[M]},m=async M=>{try{if(c.value=M,await ge(),r.value){y.value&&y.value.dispose(),y.value=_e(r.value);const d=await u(M.dataSource),R=h(M,d);y.value.setOption(R),window.addEventListener("resize",()=>{y.value&&y.value.resize()}),oe.success(`${M.name} ç”ŸæˆæˆåŠŸ`)}}catch(d){console.error("ç”Ÿæˆå›¾è¡¨å¤±è´¥:",d),oe.error("ç”Ÿæˆå›¾è¡¨å¤±è´¥")}},u=async M=>{try{switch(M){case"inventory":return await N.getInventoryDistribution();case"quality_trend":return await N.getQualityTrend();case"defect_data":return await N.getDefectDistribution();case"risk_data":return await N.getRiskDistribution();case"quality_control":return await N.getQualityTrend();case"pass_rate":return await N.getPassRateStats();case"defect_distribution":return await N.getDefectDistribution();case"supplier_evaluation":return await N.getSupplierEvaluation();case"supplier_ranking":const d=await N.getSupplierEvaluation();return{xAxis:d.series.map(R=>R.name),series:d.series.map(R=>R.value.reduce((O,w)=>O+w,0)/R.value.length)};default:return[]}}catch(d){return console.error("è·å–å›¾è¡¨æ•°æ®å¤±è´¥:",d),[]}},h=(M,d)=>{const R={title:{text:M.name,left:"center",textStyle:{fontSize:14,fontWeight:"bold"}},tooltip:{trigger:"item",backgroundColor:"rgba(0, 0, 0, 0.8)",textStyle:{color:"#fff"}},legend:{bottom:10,textStyle:{fontSize:12}}};switch(M.type){case"pie":return{...R,series:[{type:"pie",radius:["40%","70%"],data:Array.isArray(d)?d:[],emphasis:{itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}},label:{formatter:"{b}: {c} ({d}%)"}}]};case"line":const O=d.xAxis?d:{xAxis:d.map(E=>E.date||E.name),series:d.map(E=>E.value)};return{...R,tooltip:{trigger:"axis"},xAxis:{type:"category",data:O.xAxis,axisLabel:{rotate:45}},yAxis:{type:"value",axisLabel:{formatter:"{value}%"}},series:[{type:"line",data:O.series,smooth:!0,areaStyle:{color:new se(0,0,0,1,[{offset:0,color:"rgba(24, 144, 255, 0.6)"},{offset:1,color:"rgba(24, 144, 255, 0.1)"}])},lineStyle:{width:3},symbol:"circle",symbolSize:6}]};case"bar":const w=d.xAxis?d:{xAxis:d.map(E=>E.type||E.name),series:d.map(E=>E.count||E.value)};return{...R,tooltip:{trigger:"axis"},xAxis:{type:"category",data:w.xAxis,axisLabel:{rotate:45}},yAxis:{type:"value"},series:[{type:"bar",data:w.series,itemStyle:{color:new se(0,0,0,1,[{offset:0,color:"#83bff6"},{offset:.5,color:"#188df0"},{offset:1,color:"#188df0"}])},emphasis:{itemStyle:{color:new se(0,0,0,1,[{offset:0,color:"#409EFF"},{offset:1,color:"#1890ff"}])}}}]};case"radar":return{...R,radar:{indicator:d.indicator||[],radius:"70%"},series:[{type:"radar",data:d.series||[],areaStyle:{opacity:.3}}]};case"heatmap":return{...R,tooltip:{position:"top"},grid:{height:"50%",top:"10%"},xAxis:{type:"category",data:d.xAxis||[],splitArea:{show:!0}},yAxis:{type:"category",data:d.yAxis||[],splitArea:{show:!0}},visualMap:{min:0,max:100,calculable:!0,orient:"horizontal",left:"center",bottom:"15%"},series:[{type:"heatmap",data:d.series||[],label:{show:!0},emphasis:{itemStyle:{shadowBlur:10,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]};default:return R}},b=()=>{c.value&&m(c.value)},I=()=>{if(y.value){const M=y.value.getDataURL({type:"png",pixelRatio:2,backgroundColor:"#fff"}),d=document.createElement("a");d.download=`${c.value.name}.png`,d.href=M,d.click(),oe.success("å›¾è¡¨å¯¼å‡ºæˆåŠŸ")}},U=()=>{oe.info("å…¨å±åŠŸèƒ½å¼€å‘ä¸­...")},C=()=>{y.value&&(y.value.dispose(),y.value=null),c.value=null};return de(()=>{console.log("å›¾è¡¨å·¥å…·é¢æ¿åˆå§‹åŒ–å®Œæˆ")}),(M,d)=>{const R=he("el-icon"),O=he("el-button");return a(),n("div",at,[e("div",nt,[d[3]||(d[3]=e("span",{class:"panel-icon"},"ğŸ“Š",-1)),d[4]||(d[4]=e("h3",{class:"panel-title"},"å›¾è¡¨å·¥å…·",-1)),e("div",ot,[z(O,{size:"small",onClick:b},{default:H(()=>[z(R,null,{default:H(()=>[z(ee(Oe))]),_:1})]),_:1})])]),e("div",it,[e("div",lt,[e("div",{class:"category-header",onClick:d[0]||(d[0]=w=>$("visualization"))},[d[5]||(d[5]=e("span",{class:"category-icon"},"ğŸ“ˆ",-1)),d[6]||(d[6]=e("span",{class:"category-title"},"æ•°æ®å¯è§†åŒ–",-1)),e("span",{class:T(["expand-icon",{expanded:l.value.visualization}])},"â–¼",2)]),V(e("div",rt,[e("div",ct,[(a(!0),n(q,null,D(p.value,w=>(a(),n("div",{key:w.id,class:"chart-item",onClick:E=>m(w),title:w.description},[e("div",ut,i(w.icon),1),e("div",vt,i(w.name),1)],8,dt))),128))])],512),[[j,l.value.visualization]])]),e("div",pt,[e("div",{class:"category-header",onClick:d[1]||(d[1]=w=>$("quality"))},[d[7]||(d[7]=e("span",{class:"category-icon"},"ğŸ§ª",-1)),d[8]||(d[8]=e("span",{class:"category-title"},"è´¨é‡åˆ†æ",-1)),e("span",{class:T(["expand-icon",{expanded:l.value.quality}])},"â–¼",2)]),V(e("div",mt,[e("div",yt,[(a(!0),n(q,null,D(A.value,w=>(a(),n("div",{key:w.id,class:"chart-item",onClick:E=>m(w),title:w.description},[e("div",ft,i(w.icon),1),e("div",gt,i(w.name),1)],8,ht))),128))])],512),[[j,l.value.quality]])]),e("div",_t,[e("div",{class:"category-header",onClick:d[2]||(d[2]=w=>$("supplier"))},[d[9]||(d[9]=e("span",{class:"category-icon"},"ğŸ­",-1)),d[10]||(d[10]=e("span",{class:"category-title"},"ä¾›åº”å•†åˆ†æ",-1)),e("span",{class:T(["expand-icon",{expanded:l.value.supplier}])},"â–¼",2)]),V(e("div",bt,[e("div",kt,[(a(!0),n(q,null,D(g.value,w=>(a(),n("div",{key:w.id,class:"chart-item",onClick:E=>m(w),title:w.description},[e("div",Ct,i(w.icon),1),e("div",xt,i(w.name),1)],8,$t))),128))])],512),[[j,l.value.supplier]])])]),c.value?(a(),n("div",wt,[e("div",St,[e("h4",null,i(c.value.name),1),e("div",qt,[z(O,{size:"small",onClick:I},{default:H(()=>d[11]||(d[11]=[L("å¯¼å‡º")])),_:1,__:[11]}),z(O,{size:"small",onClick:U},{default:H(()=>d[12]||(d[12]=[L("å…¨å±")])),_:1,__:[12]}),z(O,{size:"small",onClick:C},{default:H(()=>d[13]||(d[13]=[L("å…³é—­")])),_:1,__:[13]})])]),e("div",Dt,[e("div",{ref_key:"chartContainer",ref:r,class:"chart-container",style:te({height:_.value+"px"})},null,4)])])):k("",!0)])}}},Mt=ae(At,[["__scopeId","data-v-18aa7632"]]),Rt={class:"enhanced-chart-renderer"},Lt={key:0,class:"chart-container"},Tt={class:"chart-header"},It={class:"chart-title"},Et={class:"chart-controls"},Qt={key:0,class:"chart-description"},zt={key:1,class:"empty-state"},Pt={__name:"EnhancedChartRenderer",props:{chartData:{type:Array,default:()=>[]},title:{type:String,default:"æ•°æ®å›¾è¡¨"},description:{type:String,default:""},defaultChartType:{type:String,default:"bar"},chartHeight:{type:Number,default:400},theme:{type:String,default:"light"}},emits:["chart-ready","chart-click"],setup(v,{emit:l}){const c=v,r=l,y=x(null),_=x(null),p=x(c.defaultChartType),A=x([{value:"bar",label:"æŸ±çŠ¶å›¾",icon:Fe},{value:"pie",label:"é¥¼å›¾",icon:Ge},{value:"line",label:"æŠ˜çº¿å›¾",icon:We},{value:"gauge",label:"ä»ªè¡¨ç›˜",icon:Je},{value:"scatter",label:"æ•£ç‚¹å›¾",icon:Xe}]),g=(h,b)=>{const I={backgroundColor:c.theme==="dark"?"#1a1a1a":"#ffffff",textStyle:{color:c.theme==="dark"?"#ffffff":"#333333"},tooltip:{trigger:"item",backgroundColor:c.theme==="dark"?"#333":"#fff",borderColor:c.theme==="dark"?"#555":"#ddd",textStyle:{color:c.theme==="dark"?"#fff":"#333"}},legend:{top:"5%",textStyle:{color:c.theme==="dark"?"#ffffff":"#333333"}}};switch(h){case"bar":return{...I,xAxis:{type:"category",data:b.map(C=>C.name||C.label),axisLabel:{color:c.theme==="dark"?"#ffffff":"#333333"}},yAxis:{type:"value",axisLabel:{color:c.theme==="dark"?"#ffffff":"#333333"}},series:[{data:b.map(C=>C.value||C.count),type:"bar",itemStyle:{color:new se(0,0,0,1,[{offset:0,color:"#83bff6"},{offset:.5,color:"#188df0"},{offset:1,color:"#188df0"}])}}]};case"pie":return{...I,series:[{name:c.title,type:"pie",radius:"50%",data:b.map(C=>({value:C.value||C.count,name:C.name||C.label})),emphasis:{itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]};case"line":return{...I,xAxis:{type:"category",data:b.map(C=>C.name||C.label),axisLabel:{color:c.theme==="dark"?"#ffffff":"#333333"}},yAxis:{type:"value",axisLabel:{color:c.theme==="dark"?"#ffffff":"#333333"}},series:[{data:b.map(C=>C.value||C.count),type:"line",smooth:!0,itemStyle:{color:"#5470c6"},areaStyle:{color:new se(0,0,0,1,[{offset:0,color:"rgba(84, 112, 198, 0.3)"},{offset:1,color:"rgba(84, 112, 198, 0.1)"}])}}]};case"gauge":b.reduce((C,M)=>C+(M.value||M.count),0);const U=Math.max(...b.map(C=>C.value||C.count));return{...I,series:[{name:c.title,type:"gauge",progress:{show:!0},detail:{valueAnimation:!0,formatter:"{value}"},data:[{value:U,name:"æœ€å¤§å€¼"}]}]};case"scatter":return{...I,xAxis:{type:"value",axisLabel:{color:c.theme==="dark"?"#ffffff":"#333333"}},yAxis:{type:"value",axisLabel:{color:c.theme==="dark"?"#ffffff":"#333333"}},series:[{symbolSize:20,data:b.map((C,M)=>[M,C.value||C.count]),type:"scatter"}]};default:return I}},$=async()=>{if(!y.value||!c.chartData.length)return;await ge(),_.value&&_.value.dispose(),_.value=_e(y.value,c.theme);const h=g(p.value,c.chartData);_.value.setOption(h),_.value.on("click",b=>{r("chart-click",b)}),r("chart-ready",_.value)},m=h=>{p.value=h,$()},u=()=>{_.value&&_.value.resize()};return de(()=>{$(),window.addEventListener("resize",u)}),Be(()=>{_.value&&_.value.dispose(),window.removeEventListener("resize",u)}),ce(()=>c.chartData,()=>{$()},{deep:!0}),ce(()=>c.theme,()=>{$()}),(h,b)=>(a(),n("div",Rt,[v.chartData&&v.chartData.length>0?(a(),n("div",Lt,[e("div",Tt,[e("h3",It,i(v.title),1),e("div",Et,[z(ee(Ue),{size:"small"},{default:H(()=>[(a(!0),n(q,null,D(A.value,I=>(a(),Ne(ee(Ve),{key:I.value,type:p.value===I.value?"primary":"default",onClick:U=>m(I.value),icon:I.icon},{default:H(()=>[L(i(I.label),1)]),_:2},1032,["type","onClick","icon"]))),128))]),_:1})])]),e("div",{ref_key:"chartContainer",ref:y,class:"chart-canvas",style:te({height:v.chartHeight+"px"})},null,4),v.description?(a(),n("div",Qt,[z(ee(He),{type:"info",size:"small"},{default:H(()=>[L(i(v.description),1)]),_:1})])):k("",!0)])):(a(),n("div",zt,[z(ee(je),{description:"æš‚æ— å›¾è¡¨æ•°æ®"})]))]))}},Ot=ae(Pt,[["__scopeId","data-v-4eab013f"]]),Bt={class:"enhanced-response-renderer"},Nt={key:0,class:"empty-result"},Vt={class:"empty-message"},Ut={key:0,class:"suggestions"},Ht={key:1,class:"inventory-response"},jt={class:"response-header"},Ft={class:"timestamp"},Gt={class:"summary-cards"},Wt={class:"summary-card"},Jt={class:"card-content"},Xt={class:"card-value"},Kt={class:"summary-card"},Zt={class:"card-content"},Yt={class:"card-value"},es={class:"summary-card"},ts={class:"card-content"},ss={class:"card-value"},as={class:"card-content"},ns={class:"card-value"},os={key:0,class:"charts-section"},is={key:1,class:"table-section"},ls={class:"table-container"},rs={class:"data-table"},cs={key:1},ds={key:0,class:"pagination-info"},us={key:2,class:"quality-response"},vs={class:"response-header"},ps={class:"timestamp"},ms={class:"quality-summary"},ys={class:"grade-letter"},hs={class:"grade-label"},fs={class:"quality-metrics"},gs={class:"metric"},_s={class:"metric-value"},bs={class:"metric"},ks={class:"metric-value"},$s={class:"metric"},Cs={class:"metric-value"},xs={key:0,class:"insights-section"},ws={class:"insight-cards"},Ss={class:"insight-icon"},qs={class:"insight-content"},Ds={class:"insight-title"},As={class:"insight-text"},Ms={key:1,class:"recommendations-section"},Rs={class:"recommendations-list"},Ls={key:3,class:"action-buttons"},Ts=["onClick"],Is={__name:"EnhancedResponseRenderer",props:{data:{type:Object,required:!0}},emits:["action","chart-ready","chart-click"],setup(v,{emit:l}){const c=v,r=l,y=m=>m?new Date(m).toLocaleString("zh-CN"):"",_=m=>{r("action",{action:m,data:c.data})},p=()=>{_("export")},A=()=>{_("load_more")},g=m=>{console.log("ğŸ“Š å›¾è¡¨å·²å‡†å¤‡å°±ç»ª:",m),r("chart-ready",m)},$=m=>{console.log("ğŸ“Š å›¾è¡¨ç‚¹å‡»äº‹ä»¶:",m),r("chart-click",m),m.data&&_("chart_drill_down",{chartData:m.data,seriesName:m.seriesName})};return(m,u)=>(a(),n("div",Bt,[v.data.type==="empty_result"?(a(),n("div",Nt,[u[1]||(u[1]=e("div",{class:"empty-icon"},"ğŸ“­",-1)),e("div",Vt,i(v.data.message),1),v.data.suggestions?(a(),n("div",Ut,[u[0]||(u[0]=e("div",{class:"suggestion-title"},"å»ºè®®ï¼š",-1)),e("ul",null,[(a(!0),n(q,null,D(v.data.suggestions,h=>(a(),n("li",{key:h},i(h),1))),128))])])):k("",!0)])):v.data.type==="inventory_query"?(a(),n("div",Ht,[e("div",jt,[e("h3",null,i(v.data.title),1),e("div",Ft,i(y(v.data.timestamp)),1)]),e("div",Gt,[e("div",Wt,[u[3]||(u[3]=e("div",{class:"card-icon"},"ğŸ“¦",-1)),e("div",Jt,[e("div",Xt,i(v.data.summary.totalBatches),1),u[2]||(u[2]=e("div",{class:"card-label"},"æ‰¹æ¬¡æ€»æ•°",-1))])]),e("div",Kt,[u[5]||(u[5]=e("div",{class:"card-icon"},"ğŸ“Š",-1)),e("div",Zt,[e("div",Yt,i(v.data.summary.totalQuantity),1),u[4]||(u[4]=e("div",{class:"card-label"},"æ€»æ•°é‡",-1))])]),e("div",es,[u[7]||(u[7]=e("div",{class:"card-icon"},"ğŸ­",-1)),e("div",ts,[e("div",ss,i(v.data.summary.materialTypes),1),u[6]||(u[6]=e("div",{class:"card-label"},"ç‰©æ–™ç§ç±»",-1))])]),e("div",{class:T(["summary-card",{risk:v.data.summary.riskItems>0}])},[u[9]||(u[9]=e("div",{class:"card-icon"},"âš ï¸",-1)),e("div",as,[e("div",ns,i(v.data.summary.riskItems),1),u[8]||(u[8]=e("div",{class:"card-label"},"é£é™©é¡¹ç›®",-1))])],2)]),v.data.charts?(a(),n("div",os,[(a(!0),n(q,null,D(v.data.charts,(h,b)=>(a(),n("div",{class:"chart-container",key:b},[z(Ot,{"chart-data":h.data,title:h.title,description:h.description,"default-chart-type":h.type,"chart-height":350,onChartReady:g,onChartClick:$},null,8,["chart-data","title","description","default-chart-type"])]))),128))])):k("",!0),v.data.table?(a(),n("div",is,[e("div",{class:"table-header"},[u[11]||(u[11]=e("h4",null,"è¯¦ç»†æ•°æ®",-1)),e("div",{class:"table-actions"},[e("button",{class:"action-btn",onClick:p},u[10]||(u[10]=[e("span",null,"ğŸ“Š",-1),L(" å¯¼å‡º ")]))])]),e("div",ls,[e("table",rs,[e("thead",null,[e("tr",null,[(a(!0),n(q,null,D(v.data.table.columns,h=>(a(),n("th",{key:h.key,style:te({width:h.width})},i(h.title),5))),128))])]),e("tbody",null,[(a(!0),n(q,null,D(v.data.table.rows,h=>(a(),n("tr",{key:h.id},[(a(!0),n(q,null,D(v.data.table.columns,b=>(a(),n("td",{key:b.key,class:T(b.align)},[b.type==="status"?(a(),n("span",{key:0,class:"status-badge",style:te({backgroundColor:h[b.key].color})},i(h[b.key].icon)+" "+i(h[b.key].value),5)):(a(),n("span",cs,i(h[b.key]),1))],2))),128))]))),128))])])]),v.data.table.pagination.hasMore?(a(),n("div",ds,[L(" æ˜¾ç¤º "+i(v.data.table.pagination.pageSize)+" / "+i(v.data.table.pagination.total)+" æ¡è®°å½• ",1),e("button",{class:"load-more-btn",onClick:A},"åŠ è½½æ›´å¤š")])):k("",!0)])):k("",!0)])):v.data.type==="quality_analysis"?(a(),n("div",us,[e("div",vs,[e("h3",null,i(v.data.title),1),e("div",ps,i(y(v.data.timestamp)),1)]),e("div",ms,[e("div",{class:"quality-grade",style:te({backgroundColor:v.data.summary.qualityGrade.color})},[e("div",ys,i(v.data.summary.qualityGrade.grade),1),e("div",hs,i(v.data.summary.qualityGrade.label),1)],4),e("div",fs,[e("div",gs,[e("div",_s,i(v.data.summary.passRate)+"%",1),u[12]||(u[12]=e("div",{class:"metric-label"},"åˆæ ¼ç‡",-1))]),e("div",bs,[e("div",ks,i(v.data.summary.totalTests),1),u[13]||(u[13]=e("div",{class:"metric-label"},"æ€»æµ‹è¯•æ•°",-1))]),e("div",$s,[e("div",Cs,i(v.data.summary.failedTests),1),u[14]||(u[14]=e("div",{class:"metric-label"},"ä¸åˆæ ¼æ•°",-1))])])]),v.data.insights?(a(),n("div",xs,[u[15]||(u[15]=e("h4",null,"å…³é”®æ´å¯Ÿ",-1)),e("div",ws,[(a(!0),n(q,null,D(v.data.insights,h=>(a(),n("div",{key:h.title,class:T(["insight-card",h.type])},[e("div",Ss,i(h.icon),1),e("div",qs,[e("div",Ds,i(h.title),1),e("div",As,i(h.content),1)])],2))),128))])])):k("",!0),v.data.recommendations?(a(),n("div",Ms,[u[16]||(u[16]=e("h4",null,"æ”¹è¿›å»ºè®®",-1)),e("ul",Rs,[(a(!0),n(q,null,D(v.data.recommendations,h=>(a(),n("li",{key:h},i(h),1))),128))])])):k("",!0)])):k("",!0),v.data.actions?(a(),n("div",Ls,[(a(!0),n(q,null,D(v.data.actions,h=>(a(),n("button",{key:h.action,class:"action-btn",onClick:b=>_(h.action)},[e("span",null,i(h.icon),1),L(" "+i(h.label),1)],8,Ts))),128))])):k("",!0)]))}},Es=ae(Is,[["__scopeId","data-v-1afa43aa"]]),Qs=["innerHTML"],zs={__name:"MarkdownRenderer",props:{content:{type:String,required:!0}},setup(v){const l=v,c=Ke(()=>{let r=l.content;return r=r.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),r=r.replace(/```(\w+)?\n([\s\S]*?)```/g,(y,_,p)=>{const A=_||"text";return`<div class="code-block">
      <div class="code-header">
        <span class="code-lang">${A}</span>
        <button class="copy-btn" onclick="copyCode(this)">å¤åˆ¶</button>
      </div>
      <pre><code class="language-${A}">${p.trim()}</code></pre>
    </div>`}),r=r.replace(/`([^`]+)`/g,'<code class="inline-code">$1</code>'),r=r.replace(/^### (.*$)/gm,'<h3 class="md-h3">$1</h3>'),r=r.replace(/^## (.*$)/gm,'<h2 class="md-h2">$1</h2>'),r=r.replace(/^# (.*$)/gm,'<h1 class="md-h1">$1</h1>'),r=r.replace(/\*\*(.*?)\*\*/g,'<strong class="md-bold">$1</strong>'),r=r.replace(/\*(.*?)\*/g,'<em class="md-italic">$1</em>'),r=r.replace(/^(\d+)\. (.*$)/gm,'<li class="md-ol-item">$2</li>'),r=r.replace(/^- (.*$)/gm,'<li class="md-ul-item">$2</li>'),r=r.replace(/^â€¢ (.*$)/gm,'<li class="md-ul-item">$2</li>'),r=r.replace(/(<li class="md-ol-item">.*<\/li>)/gs,'<ol class="md-ol">$1</ol>'),r=r.replace(/(<li class="md-ul-item">.*<\/li>)/gs,'<ul class="md-ul">$1</ul>'),r=r.replace(/\n\n/g,'</p><p class="md-paragraph">'),r=r.replace(/\n/g,"<br>"),r.startsWith("<")||(r='<p class="md-paragraph">'+r+"</p>"),r=r.replace(/^&gt; (.*$)/gm,'<blockquote class="md-quote">$1</blockquote>'),r=r.replace(/^---$/gm,'<hr class="md-divider">'),r=r.replace(/\|(.+)\|/g,(y,_)=>`<tr class="md-tr">${_.split("|").map(g=>g.trim()).map(g=>`<td class="md-td">${g}</td>`).join("")}</tr>`),r});return typeof window<"u"&&(window.copyCode=function(r){const _=r.closest(".code-block").querySelector("code").textContent;navigator.clipboard.writeText(_).then(()=>{r.textContent="å·²å¤åˆ¶",setTimeout(()=>{r.textContent="å¤åˆ¶"},2e3)}).catch(()=>{const p=document.createElement("textarea");p.value=_,document.body.appendChild(p),p.select(),document.execCommand("copy"),document.body.removeChild(p),r.textContent="å·²å¤åˆ¶",setTimeout(()=>{r.textContent="å¤åˆ¶"},2e3)})}),(r,y)=>(a(),n("div",{class:"markdown-renderer",innerHTML:c.value},null,8,Qs))}},Ps=ae(zs,[["__scopeId","data-v-01919da8"]]),Os={class:"simple-ai-three-column"},Bs={class:"three-column-layout"},Ns={class:"left-panel"},Vs={class:"conversation-management"},Us={class:"section-content"},Hs={key:0,class:"saved-sessions"},js={class:"sessions-header"},Fs={class:"sessions-title"},Gs={class:"sessions-container"},Ws={class:"sessions-list-scrollable"},Js=["onClick","title"],Xs={class:"session-content"},Ks={class:"session-info"},Zs={class:"session-title"},Ys={class:"session-preview"},ea={class:"session-meta"},ta={class:"session-time"},sa=["onClick"],aa={style:{background:"#e8f5e8",padding:"5px",margin:"5px 0","font-size":"11px","border-radius":"3px",color:"#2d5a2d"}},na={class:"rule-section"},oa={class:"section-content"},ia={class:"rule-category"},la={class:"rule-container"},ra={class:"rule-buttons-scrollable",ref:"inventoryRulesContainer"},ca=["onClick","title"],da={class:"rule-pagination"},ua={class:"rule-count"},va={class:"rule-category"},pa={class:"rule-container"},ma={class:"rule-buttons-scrollable",ref:"qualityRulesContainer"},ya=["onClick","title"],ha={class:"rule-pagination"},fa={class:"rule-count"},ga={class:"rule-category"},_a={class:"rule-container"},ba={class:"rule-buttons-scrollable",ref:"productionRulesContainer"},ka=["onClick","title"],$a={class:"rule-pagination"},Ca={class:"rule-count"},xa={class:"rule-section"},wa={class:"section-content"},Sa={class:"rule-category"},qa={class:"rule-buttons"},Da=["onClick"],Aa={class:"rule-section"},Ma={class:"section-content"},Ra={class:"rule-section"},La={class:"section-content"},Ta={key:0,class:"current-session"},Ia={class:"session-info"},Ea={class:"message-count"},Qa={class:"session-actions"},za=["disabled"],Pa={key:1,class:"history-sessions"},Oa={class:"session-list"},Ba=["onClick"],Na={class:"session-header"},Va={class:"session-title"},Ua=["onClick"],Ha={class:"session-meta"},ja={class:"session-time"},Fa={class:"session-count"},Ga={key:0,class:"view-more"},Wa={key:2,class:"empty-sessions"},Ja={class:"center-panel"},Xa={class:"chat-container"},Ka={class:"messages-container",ref:"messagesContainer"},Za={key:0,class:"empty-messages"},Ya={key:0,class:"user-message-wrapper"},en={class:"user-content"},tn={class:"user-text"},sn={class:"message-time"},an={key:1,class:"assistant-message-wrapper"},nn={class:"assistant-content"},on={class:"assistant-header"},ln={key:0,class:"message-source"},rn=["onClick","disabled","title"],cn={key:0},dn={key:1},un={key:0,class:"loading-content"},vn={class:"loading-text"},pn={key:1},mn={key:2},yn={key:0,class:"ai-response"},hn=["innerHTML"],fn={key:2,class:"cards-container"},gn={class:"card-header"},_n={class:"card-icon"},bn={class:"card-title"},kn={class:"card-content"},$n={class:"card-value"},Cn={key:0,class:"card-subtitle"},xn={key:3,class:"table-container"},wn={class:"data-table"},Sn={key:3,class:"workflow-info"},qn={class:"workflow-summary"},Dn={class:"workflow-text"},An={key:4,class:"chart-info"},Mn={class:"chart-summary"},Rn={class:"chart-text"},Ln={class:"message-time"},Tn={class:"input-area"},In={class:"input-container"},En=["disabled"],Qn=["disabled","title"],zn={key:0},Pn={key:1},On={key:2},Bn=["disabled"],Nn={key:0},Vn={key:1},Un={key:0,class:"voice-status"},Hn={key:1,class:"voice-transcript"},jn={key:0,class:"transcript-line"},Fn={class:"transcript-text interim"},Gn={key:1,class:"transcript-line"},Wn={class:"transcript-text final"},Jn={class:"confidence"},Xn={key:2,class:"voice-debug"},Kn={class:"debug-info"},Zn={class:"right-panel"},Yn={class:"panel-header"},eo={key:0,class:"analysis-status"},to={class:"status-text"},so={key:0,class:"analysis-content"},ao={class:"analysis-overview"},no={class:"analysis-title"},oo={class:"analysis-meta"},io={class:"analysis-time"},lo={class:"analysis-type"},ro={class:"workflow-steps"},co={class:"step-header"},uo={class:"step-number"},vo={class:"step-info"},po={class:"step-title"},mo={class:"step-description"},yo={class:"step-status"},ho={key:0,class:"loading-spinner"},fo={key:1,class:"success-icon"},go={key:2,class:"error-icon"},_o={key:3,class:"pending-icon"},bo={key:0,class:"step-details"},ko={key:0,class:"step-data"},$o={key:1,class:"step-result"},Co={key:2,class:"step-duration"},xo={key:0,class:"analysis-summary"},wo={class:"summary-content"},So={key:0,class:"summary-item"},qo={key:1,class:"summary-item"},Do={key:2,class:"summary-item"},Ao={key:1,class:"empty-analysis"},Mo={__name:"SimpleAIThreeColumn",setup(v){const l=x([]),c=x(""),r=x(null),y=x(!1),_=x(null),p=x(null),A=x({available:!1,lastCheck:null,error:null}),g=x({isSupported:!1,isListening:!1,isSpeaking:!1}),$=x({final:"",interim:"",confidence:0});x([]);const m=x([]),u=x({basic:!0,ai:!1,chart:!1,conversation:!0}),h=x(!1),b=x({inventory:[{name:"ğŸ­ å·¥å‚åº“å­˜æŸ¥è¯¢",query:"æŸ¥è¯¢æ·±åœ³å·¥å‚çš„åº“å­˜æƒ…å†µ"},{name:"ğŸ¢ ä¾›åº”å•†ç‰©æ–™æŸ¥è¯¢",query:"æŸ¥è¯¢èšé¾™ä¾›åº”å•†çš„ç‰©æ–™æ‰¹æ¬¡"},{name:"ğŸ”‹ ç‰©æ–™åº“å­˜æŸ¥è¯¢",query:"æŸ¥è¯¢ç”µæ± ç›–çš„åº“å­˜çŠ¶æ€"},{name:"âš ï¸ çŠ¶æ€åº“å­˜æŸ¥è¯¢",query:"æŸ¥è¯¢é£é™©çŠ¶æ€çš„ç‰©æ–™æ‰¹æ¬¡"},{name:"ğŸ“¦ æ‰¹æ¬¡è¯¦æƒ…æŸ¥è¯¢",query:"æŸ¥è¯¢æ‰¹æ¬¡å·çš„è¯¦ç»†ä¿¡æ¯"},{name:"ğŸª ä»“åº“åˆ†å¸ƒæŸ¥è¯¢",query:"æŸ¥è¯¢ä¸­å¤®åº“å­˜çš„ç‰©æ–™åˆ†å¸ƒ"}],quality:[{name:"ğŸ“Š è´¨é‡çŠ¶æ€åˆ†æ",query:"åˆ†æåº“å­˜ç‰©æ–™çš„è´¨é‡çŠ¶æ€"},{name:"ğŸ¢ ä¾›åº”å•†è´¨é‡è¯„ä¼°",query:"è¯„ä¼°å„ä¾›åº”å•†çš„è´¨é‡è¡¨ç°"},{name:"âš ï¸ é£é™©ç­‰çº§åˆ†æ",query:"åˆ†æç‰©æ–™çš„é£é™©ç­‰çº§åˆ†å¸ƒ"},{name:"ğŸ—ï¸ ç‰©æ–™ç±»åˆ«è´¨é‡",query:"åˆ†æç»“æ„ä»¶ç±»ç‰©æ–™çš„è´¨é‡çŠ¶å†µ"},{name:"ğŸ­ å·¥å‚è´¨é‡åˆ†æ",query:"åˆ†ææ·±åœ³å·¥å‚çš„æ•´ä½“è´¨é‡æƒ…å†µ"},{name:"ğŸ’¡ è´¨é‡æ”¹è¿›å»ºè®®",query:"åŸºäºå½“å‰æ•°æ®æä¾›è´¨é‡æ”¹è¿›å»ºè®®"}],production:[{name:"ğŸ­ ç”Ÿäº§çŠ¶æ€æŸ¥è¯¢",query:"æŸ¥è¯¢å½“å‰ç”Ÿäº§çŠ¶æ€"},{name:"ğŸ“‰ ä¸è‰¯ç‡åˆ†æ",query:"åˆ†æç”Ÿäº§ä¸è‰¯ç‡æƒ…å†µ"},{name:"âš¡ äº§çº¿æ•ˆç‡æŸ¥è¯¢",query:"æŸ¥è¯¢å„äº§çº¿æ•ˆç‡"},{name:"ğŸ“‹ åœ¨çº¿è·Ÿè¸ªè®°å½•",query:"æŸ¥è¯¢åœ¨çº¿è·Ÿè¸ªè®°å½•"},{name:"âš ï¸ å¼‚å¸¸è®°å½•æŸ¥è¯¢",query:"æŸ¥è¯¢ç”Ÿäº§å¼‚å¸¸è®°å½•"},{name:"ğŸ¯ è´¨é‡æ§åˆ¶ç‚¹",query:"æŸ¥è¯¢è´¨é‡æ§åˆ¶ç‚¹çŠ¶æ€"}]}),I=x({analysis:[{name:"ğŸ¤– æ™ºèƒ½è´¨é‡åˆ†æ",query:"è¯·å¯¹å½“å‰è´¨é‡çŠ¶å†µè¿›è¡Œæ·±åº¦åˆ†æå¹¶æä¾›æ”¹è¿›å»ºè®®"},{name:"ğŸ¢ ä¾›åº”å•†é£é™©è¯„ä¼°",query:"åˆ†æèšé¾™ã€æ¬£å† ã€å¹¿æ­£ç­‰ä¾›åº”å•†çš„é£é™©ç­‰çº§å’Œè´¨é‡è¡¨ç°"},{name:"ğŸ”® é¢„æµ‹æ€§ç»´æŠ¤",query:"åŸºäºå†å²æ•°æ®é¢„æµ‹å¯èƒ½çš„è´¨é‡é—®é¢˜"},{name:"ğŸ“¦ åº“å­˜ä¼˜åŒ–å»ºè®®",query:"åŸºäºå†å²æ•°æ®åˆ†æåº“å­˜é…ç½®ä¼˜åŒ–æ–¹æ¡ˆ"},{name:"ğŸ“ˆ è¶‹åŠ¿é¢„æµ‹åˆ†æ",query:"é¢„æµ‹æœªæ¥ä¸€ä¸ªæœˆçš„è´¨é‡è¶‹åŠ¿å˜åŒ–"},{name:"âš™ï¸ å·¥è‰ºä¼˜åŒ–å»ºè®®",query:"åŸºäºè´¨é‡æ•°æ®æä¾›å·¥è‰ºä¼˜åŒ–å»ºè®®"}]});x({visualization:[{name:"ğŸ“Š TOPä¸è‰¯ç‰©æ–™æ’è¡Œ",query:"ç”ŸæˆTOPä¸è‰¯ç‰©æ–™æ’è¡Œæ¦œ"},{name:"âš ï¸ é£é™©ç­‰çº§åˆ†å¸ƒå›¾",query:"æ˜¾ç¤ºé£é™©ç­‰çº§åˆ†å¸ƒå›¾"},{name:"ğŸ¢ ä¾›åº”å•†è´¨é‡å¯¹æ¯”",query:"ç”Ÿæˆèšé¾™ã€æ¬£å† ã€å¹¿æ­£ä¾›åº”å•†è´¨é‡å¯¹æ¯”é›·è¾¾å›¾"},{name:"ğŸ“ˆ åº“å­˜è¶‹åŠ¿å›¾è¡¨",query:"ç”Ÿæˆåº“å­˜å˜åŒ–è¶‹åŠ¿å›¾è¡¨"},{name:"âœ… åˆæ ¼ç‡ç»Ÿè®¡å›¾",query:"ç”Ÿæˆæœˆåº¦åˆæ ¼ç‡ç»Ÿè®¡å›¾"},{name:"ğŸ“‰ ä¸è‰¯ç±»å‹åˆ†æå›¾",query:"ç”Ÿæˆä¸è‰¯ç±»å‹å¸•ç´¯æ‰˜åˆ†æå›¾"}]});const U=async()=>{var s,f,S,Q,P;if(!c.value.trim()||y.value)return;const o=c.value.trim();console.log("ğŸš€ å¼€å§‹å¤„ç†ç”¨æˆ·æ¶ˆæ¯:",o),l.value.push({type:"user",content:o,timestamp:new Date});const t={type:"assistant",content:"æ­£åœ¨æ™ºèƒ½åˆ†ææ‚¨çš„é—®é¢˜...",isLoading:!0,timestamp:new Date};l.value.push(t),c.value="",y.value=!0;try{console.log("ğŸ§  æ‰§è¡ŒAIæ„å›¾åˆ†æ...");const B=await ie.analyzeUserIntent(o);console.log("ğŸ¯ æ„å›¾åˆ†æç»“æœ:",B);const X=l.value.length-1;l.value[X].content="æ­£åœ¨å¤„ç†æ‚¨çš„è¯·æ±‚...";let F=null;if(B.needsDataQuery){console.log("ğŸ“Š éœ€è¦æ•°æ®æŸ¥è¯¢ï¼Œè°ƒç”¨æ•°æ®API...");const G=await fetch("/api/assistant/query",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({question:o,scenario:"basic",intentAnalysis:B})});if(!G.ok)throw new Error(`æ•°æ®æŸ¥è¯¢APIè¯·æ±‚å¤±è´¥: ${G.status}`);F=await G.json(),console.log("âœ… æ•°æ®æŸ¥è¯¢æˆåŠŸ:",F),l.value[X]={type:"assistant",content:((s=F.data)==null?void 0:s.answer)||"æŸ¥è¯¢å®Œæˆ",cards:((f=F.data)==null?void 0:f.cards)||[],tableData:((S=F.data)==null?void 0:S.tableData)||[],tableColumns:((Q=F.data)==null?void 0:Q.tableColumns)||[],chartId:((P=F.data)==null?void 0:P.chartId)||null,isLoading:!1,timestamp:new Date,source:"data-query",intentAnalysis:B}}else{console.log("ğŸ’¬ å’¨è¯¢é—®ç­”ï¼Œä½¿ç”¨AIå¢å¼ºå›å¤...");try{const G=await ie.callDeepSeek(`
æˆ‘æ˜¯å°Qï¼ŒQMSé—®ç­”åŠ©æ‰‹ï¼Œä¸“ä¸šçš„è´¨é‡ç®¡ç†AIåŠ©æ‰‹ã€‚è¯·å›ç­”ä»¥ä¸‹é—®é¢˜ï¼š

ç”¨æˆ·é—®é¢˜ï¼š${o}

è¯·ä»¥å°Qçš„èº«ä»½æä¾›ä¸“ä¸šã€è¯¦ç»†çš„å›ç­”ï¼ŒåŒ…å«ï¼š
1. é—®é¢˜åˆ†æ
2. ä¸“ä¸šå»ºè®®
3. æœ€ä½³å®è·µ
4. æ³¨æ„äº‹é¡¹

å›ç­”è¦æ±‚ï¼š
- ä»¥"å°Qä¸ºæ‚¨è§£ç­”"å¼€å¤´
- è¯­è¨€äº²åˆ‡ä¸“ä¸š
- ç»“æ„æ¸…æ™°
- å®ç”¨æ€§å¼º
- ç¬¦åˆè´¨é‡ç®¡ç†æ ‡å‡†
- ç»“å°¾å¯ä»¥è¯´"è¿˜æœ‰å…¶ä»–é—®é¢˜éšæ—¶é—®å°Qå“¦ï¼"
        `);l.value[X]={type:"assistant",content:G,isLoading:!1,timestamp:new Date,source:"ai-consultation",intentAnalysis:B}}catch(G){console.warn("âš ï¸ AIå’¨è¯¢å¤±è´¥ï¼Œä½¿ç”¨é™çº§å›å¤:",G.message);const Pe=ie.generateFallbackResponse(o,B.intent);l.value[X]={type:"assistant",content:Pe,isLoading:!1,timestamp:new Date,source:"fallback",intentAnalysis:B}}}console.log("ğŸ“Š æ¶ˆæ¯å¤„ç†å®Œæˆ")}catch(B){console.error("âŒ å¤„ç†æ¶ˆæ¯å¤±è´¥:",B);const X=l.value.length-1;l.value[X]={type:"assistant",content:`æŠ±æ­‰ï¼Œå¤„ç†æ‚¨çš„é—®é¢˜æ—¶å‡ºç°é”™è¯¯ï¼š${B.message}`,isLoading:!1,timestamp:new Date,source:"error"}}finally{y.value=!1}},C=()=>{l.value=[],_.value=null,console.log("ğŸ—‘ï¸ å¯¹è¯å·²æ¸…ç©º")},M=()=>{if(!g.value.isSupported){console.warn("âš ï¸ æµè§ˆå™¨ä¸æ”¯æŒè¯­éŸ³åŠŸèƒ½");return}g.value.isListening?R():d()},d=()=>{console.log("ğŸ¤ å¼€å§‹è¯­éŸ³è¾“å…¥"),$.value={final:"",interim:"",confidence:0},Y.startListening()?(g.value.isListening=!0,console.log("ğŸ¤ è¯­éŸ³è¯†åˆ«å·²å¯åŠ¨ï¼Œè¯·å¼€å§‹è¯´è¯...")):console.error("âŒ è¯­éŸ³è¯†åˆ«å¯åŠ¨å¤±è´¥")},R=()=>{console.log("ğŸ¤ åœæ­¢è¯­éŸ³è¾“å…¥"),Y.stopListening()&&(g.value.isListening=!1,$.value.final.trim()&&(c.value=$.value.final.trim(),$.value={final:"",interim:"",confidence:0}))},O=o=>{if(!g.value.isSupported)return console.warn("âš ï¸ æµè§ˆå™¨ä¸æ”¯æŒè¯­éŸ³åˆæˆ"),!1;const t=o.replace(/<[^>]*>/g,"").replace(/[#*`]/g,"").replace(/\n+/g,"ã€‚").trim();return t.length===0?(console.warn("âš ï¸ æ²¡æœ‰å¯æ’­æ”¾çš„æ–‡æœ¬å†…å®¹"),!1):(console.log("ğŸ”Š å¼€å§‹è¯­éŸ³æ’­æ”¾å›å¤"),Y.speak(t))},w=()=>{console.log("ğŸ§ª å¼€å§‹è¯­éŸ³è°ƒè¯•æµ‹è¯•"),console.log("ğŸ¤ å½“å‰è¯­éŸ³çŠ¶æ€:",g.value),console.log("ğŸ“ å½“å‰è¯†åˆ«ç»“æœ:",$.value),console.log("ğŸ’¬ å½“å‰è¾“å…¥å†…å®¹:",c.value),g.value.isListening?(console.log("ğŸ¤ åœæ­¢è¯­éŸ³è¯†åˆ«æµ‹è¯•..."),R()):(console.log("ğŸ¤ å¯åŠ¨è¯­éŸ³è¯†åˆ«æµ‹è¯•..."),d())},E=()=>{l.value.push({type:"assistant",content:`# å°Qä¸ºæ‚¨è§£ç­”

## è´¨é‡ç®¡ç†åˆ†ææŠ¥å‘Š

### 1. é—®é¢˜åˆ†æ
æ‚¨è¯¢é—®çš„æ˜¯å…³äº**è´¨é‡ç®¡ç†**çš„é—®é¢˜ï¼Œè¿™æ˜¯ä¸€ä¸ªéå¸¸é‡è¦çš„è¯é¢˜ã€‚

### 2. ä¸“ä¸šå»ºè®®
- **å»ºç«‹å®Œå–„çš„è´¨é‡ä½“ç³»**ï¼šç¡®ä¿æ‰€æœ‰æµç¨‹éƒ½æœ‰æ˜ç¡®çš„æ ‡å‡†
- **å®šæœŸè´¨é‡æ£€æŸ¥**ï¼šå»ºç«‹å®šæœŸæ£€æŸ¥æœºåˆ¶
- **æ•°æ®é©±åŠ¨å†³ç­–**ï¼šåŸºäºæ•°æ®åˆ†æè¿›è¡Œè´¨é‡æ”¹è¿›

### 3. æœ€ä½³å®è·µ
\`\`\`javascript
// è´¨é‡æ£€æŸ¥ç¤ºä¾‹ä»£ç 
function qualityCheck(product) {
  if (product.defectRate > 0.03) {
    return 'FAIL';
  }
  return 'PASS';
}
\`\`\`

### 4. æ³¨æ„äº‹é¡¹
> è´¨é‡ç®¡ç†æ˜¯ä¸€ä¸ªæŒç»­æ”¹è¿›çš„è¿‡ç¨‹ï¼Œéœ€è¦å…¨å‘˜å‚ä¸ã€‚

---

è¿˜æœ‰å…¶ä»–é—®é¢˜éšæ—¶é—®å°Qå“¦ï¼`,timestamp:new Date,source:"ai-consultation"})},ue=o=>new Date(o).toLocaleTimeString(),be=o=>typeof o=="object"&&o!==null&&o.type,ke=o=>{switch(console.log("å¤„ç†å“åº”æ“ä½œ:",o),o.action){case"export":$e(o.data);break;case"detail":Ce(o.data);break;case"risk_analysis":xe(o.data);break;case"load_more":we(o.data);break;default:console.log("æœªçŸ¥æ“ä½œ:",o.action)}},$e=o=>{console.log("å¯¼å‡ºæ•°æ®:",o)},Ce=o=>{console.log("æ˜¾ç¤ºè¯¦ç»†è§†å›¾:",o)},xe=o=>{console.log("æ‰§è¡Œé£é™©åˆ†æ:",o)},we=o=>{console.log("åŠ è½½æ›´å¤šæ•°æ®:",o)},Se=o=>{if(!o)return"";let t=o.replace(/\n/g,"<br>");return t=t.replace(/(\d+\.?\d*%?)/g,'<span class="highlight-number">$1</span>'),["åˆæ ¼","ä¸åˆæ ¼","é£é™©","è´¨é‡","åº“å­˜","ä¾›åº”å•†","æµ‹è¯•","æ£€éªŒ","èšé¾™","æ¬£å† ","å¹¿æ­£","BOE","å¤©é©¬","åæ˜Ÿ","æ·±åœ³å·¥å‚","é‡åº†å·¥å‚","å—æ˜Œå·¥å‚","å®œå®¾å·¥å‚","ç”µæ± ç›–","ä¸­æ¡†","æ‰‹æœºå¡æ‰˜","LCDæ˜¾ç¤ºå±","OLEDæ˜¾ç¤ºå±","ç»“æ„ä»¶ç±»","å…‰å­¦ç±»","æœºæ¢°ç±»"].forEach(f=>{const S=new RegExp(`(${f})`,"g");t=t.replace(S,'<span class="highlight-keyword">$1</span>')}),t},qe=o=>({"basic-rules":"åŸºç¡€è§„åˆ™","ai-enhanced":"AIå¢å¼º","chart-tool":"å›¾è¡¨å·¥å…·"})[o]||o,De=o=>{var S,Q;if(!o)return"";const t=((S=o.steps)==null?void 0:S.filter(P=>P.status==="completed").length)||0,s=((Q=o.steps)==null?void 0:Q.length)||0,f=o.totalTime||0;return`${t}/${s}æ­¥å®Œæˆï¼Œè€—æ—¶${f}ms`},ve=o=>{const t=new Date(o),f=new Date-t,S=Math.floor(f/6e4),Q=Math.floor(f/36e5),P=Math.floor(f/864e5);return S<1?"åˆšåˆš":S<60?`${S}åˆ†é’Ÿå‰`:Q<24?`${Q}å°æ—¶å‰`:P<7?`${P}å¤©å‰`:t.toLocaleDateString()},Z=o=>{u.value[o]=!u.value[o]},ne=o=>{y.value||(c.value=o,U())},W=(o,t)=>{const s={inventory:"inventoryRulesContainer",quality:"qualityRulesContainer",production:"productionRulesContainer"}[o],f=document.querySelector(`[ref="${s}"]`)||document.querySelector(".rule-buttons-scrollable");if(f){const Q=f.scrollLeft,P=t==="left"?Math.max(0,Q-120):Q+120;f.scrollTo({left:P,behavior:"smooth"})}},le=o=>{const t=b.value[o]||[];return`${Math.min(4,t.length)}/${t.length}`},Ae=()=>{if(!p.value)return"";switch(p.value.status){case"processing":return"åˆ†æä¸­...";case"completed":return"åˆ†æå®Œæˆ";case"error":return"åˆ†æå¤±è´¥";default:return"ç­‰å¾…ä¸­"}},Me=o=>o?new Date(o).toLocaleTimeString():"",Re=o=>typeof o=="object"?JSON.stringify(o).substring(0,100)+"...":String(o).substring(0,100),Le=()=>"session_"+Date.now()+"_"+Math.random().toString(36).substr(2,9),J=()=>{var s,f;if(l.value.length===0)return;const o={id:r.value||Le(),title:((f=(s=l.value[0])==null?void 0:s.content)==null?void 0:f.substring(0,30))+"..."||"æ–°å¯¹è¯",messages:[...l.value],analysis:p.value?{...p.value}:null,timestamp:new Date,messageCount:l.value.length},t=m.value.findIndex(S=>S.id===o.id);t>=0?m.value[t]=o:m.value.unshift(o),m.value.length>50&&(m.value=m.value.slice(0,50)),localStorage.setItem("ai_chat_sessions",JSON.stringify(m.value)),r.value=o.id,console.log("ğŸ’¾ ä¼šè¯å·²ä¿å­˜:",o.title)},pe=()=>{try{const o=localStorage.getItem("ai_chat_sessions");o&&(m.value=JSON.parse(o),console.log(`ğŸ“š åŠ è½½äº† ${m.value.length} ä¸ªå†å²ä¼šè¯`))}catch(o){console.error("åŠ è½½å†å²ä¼šè¯å¤±è´¥:",o),m.value=[]}},me=o=>{let t;typeof o=="string"?t=m.value.find(s=>s.id===o):t=o,t&&(l.value=[...t.messages],p.value=t.analysis?{...t.analysis}:null,r.value=t.id,console.log("ğŸ“– å·²åŠ è½½ä¼šè¯:",t.title))},re=()=>{l.value.length>0&&J(),l.value=[],p.value=null,r.value=null,console.log("ğŸ†• åˆ›å»ºæ–°ä¼šè¯")},Te=()=>{re();const o=[];A.value.available&&o.push("AIå¢å¼ºåˆ†æ"),g.value.isSupported&&o.push("è¯­éŸ³äº¤äº’");const t=o.length>0?`ğŸ‘‹ æ‚¨å¥½ï¼æˆ‘æ˜¯å°Qï¼Œæ‚¨çš„ä¸“å±QMSé—®ç­”åŠ©æ‰‹ï¼å·²å¯ç”¨${o.join("ã€")}åŠŸèƒ½ï¼Œå¯ä»¥å¸®æ‚¨æŸ¥è¯¢è´¨é‡æ•°æ®ã€åˆ†æé—®é¢˜å’Œæä¾›ä¸“ä¸šå»ºè®®ã€‚æœ‰ä»€ä¹ˆé—®é¢˜å°½ç®¡é—®æˆ‘å§ï¼`:"ğŸ‘‹ æ‚¨å¥½ï¼æˆ‘æ˜¯å°Qï¼Œæ‚¨çš„ä¸“å±QMSé—®ç­”åŠ©æ‰‹ï¼å½“å‰ä½¿ç”¨åŸºç¡€æ¨¡å¼ï¼Œå¯ä»¥å¸®æ‚¨æŸ¥è¯¢è´¨é‡æ•°æ®å’Œæä¾›åŸºç¡€å»ºè®®ã€‚æœ‰ä»€ä¹ˆé—®é¢˜å°½ç®¡é—®æˆ‘å§ï¼";l.value.push({type:"assistant",content:t,timestamp:new Date,source:"system"})},ye=o=>{m.value=m.value.filter(t=>t.id!==o),localStorage.setItem("ai_chat_sessions",JSON.stringify(m.value)),r.value===o&&re(),console.log("ğŸ—‘ï¸ ä¼šè¯å·²åˆ é™¤")},Ie=()=>{pe(),console.log("ğŸ”„ å·²åˆ·æ–°ä¼šè¯åˆ—è¡¨")},Ee=()=>{confirm("ç¡®å®šè¦æ¸…ç©ºæ‰€æœ‰å†å²ä¼šè¯å—ï¼Ÿæ­¤æ“ä½œä¸å¯æ¢å¤ã€‚")&&(m.value=[],localStorage.removeItem("ai_chat_sessions"),console.log("ğŸ—‘ï¸ å·²æ¸…ç©ºæ‰€æœ‰å†å²ä¼šè¯"))},Qe=o=>{if(!o.messages||o.messages.length===0)return"ç©ºä¼šè¯";const t=o.messages.find(f=>f.type==="user");if(t)return t.content.substring(0,30)+(t.content.length>30?"...":"");const s=o.messages.find(f=>f.type==="assistant");return s?s.content.substring(0,30)+(s.content.length>30?"...":""):"æ— å†…å®¹"};ce(l,()=>{l.value.length>0&&setTimeout(()=>{J()},1e3)},{deep:!0}),de(async()=>{console.log("ğŸš€ QMSé—®ç­”åŠ©æ‰‹-å°Qåˆå§‹åŒ–..."),pe();try{console.log("ğŸ¤– åˆå§‹åŒ–AIæœåŠ¡...");const s=await ie.initialize();A.value={available:s,lastCheck:new Date,error:s?null:"AIæœåŠ¡åˆå§‹åŒ–å¤±è´¥"},console.log("ğŸ¤– AIæœåŠ¡çŠ¶æ€:",A.value)}catch(s){console.error("âŒ AIæœåŠ¡åˆå§‹åŒ–å¤±è´¥:",s),A.value={available:!1,lastCheck:new Date,error:s.message}}try{console.log("ğŸ¤ åˆå§‹åŒ–è¯­éŸ³æœåŠ¡...");const s=Y.getStatus();g.value=s,Y.setCallbacks({onResult:f=>{console.log("ğŸ¤ è¯­éŸ³è¯†åˆ«ç»“æœ:",f),$.value=f,f.final&&f.final.trim()&&(console.log("ğŸ¤ è‡ªåŠ¨å¡«å…¥è¯†åˆ«ç»“æœ:",f.final),c.value=f.final.trim(),setTimeout(()=>{$.value={final:"",interim:"",confidence:0}},1e3))},onError:f=>{console.error("âŒ è¯­éŸ³è¯†åˆ«é”™è¯¯:",f),g.value.isListening=!1,$.value={final:"",interim:"",confidence:0}},onStart:()=>{console.log("ğŸ¤ è¯­éŸ³è¯†åˆ«å¼€å§‹"),g.value.isListening=!0,$.value={final:"",interim:"",confidence:0}},onEnd:()=>{console.log("ğŸ¤ è¯­éŸ³è¯†åˆ«ç»“æŸ"),g.value.isListening=!1,$.value.final&&$.value.final.trim()&&!c.value&&(console.log("ğŸ¤ è¯†åˆ«ç»“æŸæ—¶å¡«å…¥ç»“æœ:",$.value.final),c.value=$.value.final.trim(),setTimeout(()=>{$.value={final:"",interim:"",confidence:0}},1e3))},onSpeechStart:()=>{console.log("ğŸ”Š è¯­éŸ³æ’­æ”¾å¼€å§‹"),g.value.isSpeaking=!0},onSpeechEnd:()=>{console.log("ğŸ”Š è¯­éŸ³æ’­æ”¾ç»“æŸ"),g.value.isSpeaking=!1}}),console.log("ğŸ¤ è¯­éŸ³æœåŠ¡çŠ¶æ€:",g.value)}catch(s){console.error("âŒ è¯­éŸ³æœåŠ¡åˆå§‹åŒ–å¤±è´¥:",s),g.value.isSupported=!1}m.value.length>0&&console.log(`ğŸ“š å‘ç° ${m.value.length} ä¸ªå†å²ä¼šè¯`);const o=[];A.value.available&&o.push("AIå¢å¼ºåˆ†æ"),g.value.isSupported&&o.push("è¯­éŸ³äº¤äº’");const t=o.length>0?`ğŸ‘‹ æ‚¨å¥½ï¼æˆ‘æ˜¯å°Qï¼Œæ‚¨çš„ä¸“å±QMSé—®ç­”åŠ©æ‰‹ï¼å·²å¯ç”¨${o.join("ã€")}åŠŸèƒ½ï¼Œå¯ä»¥å¸®æ‚¨æŸ¥è¯¢è´¨é‡æ•°æ®ã€åˆ†æé—®é¢˜å’Œæä¾›ä¸“ä¸šå»ºè®®ã€‚æœ‰ä»€ä¹ˆé—®é¢˜å°½ç®¡é—®æˆ‘å§ï¼`:"ğŸ‘‹ æ‚¨å¥½ï¼æˆ‘æ˜¯å°Qï¼Œæ‚¨çš„ä¸“å±QMSé—®ç­”åŠ©æ‰‹ï¼å½“å‰ä½¿ç”¨åŸºç¡€æ¨¡å¼ï¼Œå¯ä»¥å¸®æ‚¨æŸ¥è¯¢è´¨é‡æ•°æ®å’Œæä¾›åŸºç¡€å»ºè®®ã€‚æœ‰ä»€ä¹ˆé—®é¢˜å°½ç®¡é—®æˆ‘å§ï¼";l.value.push({type:"assistant",content:t,timestamp:new Date,source:"system"})});const ze=o=>{console.log("ğŸ“Š å›¾è¡¨ç”ŸæˆæˆåŠŸ:",o);const t={type:"assistant",content:`ğŸ“Š å·²ç”Ÿæˆ${o.name}å›¾è¡¨ï¼Œè¯·æŸ¥çœ‹å·¦ä¾§å›¾è¡¨å·¥å…·é¢æ¿ä¸­çš„é¢„è§ˆã€‚`,timestamp:new Date,chartData:o,source:"chart-tool"};l.value.push(t),setTimeout(()=>{J()},500)};return Ze(()=>{l.value.length>0&&J()}),(o,t)=>(a(),n("div",Os,[e("div",{class:"header-bar"},[t[13]||(t[13]=e("div",{class:"header-left"},[e("div",{class:"logo-section"},[e("span",{class:"logo-icon"},"ğŸ¤–"),e("span",{class:"logo-text"},"QMSé—®ç­”åŠ©æ‰‹-å°Q")])],-1)),e("div",{class:"header-right"},[e("button",{onClick:C,class:"header-button"},"æ¸…ç©ºå¯¹è¯")])]),e("div",Bs,[e("div",Ns,[t[34]||(t[34]=e("div",{class:"panel-header"},[e("span",{class:"panel-icon"},"âš™ï¸"),e("h3",{class:"panel-title"},"åŠŸèƒ½åŒº")],-1)),e("div",Vs,[e("div",{class:"section-header",onClick:t[0]||(t[0]=s=>Z("conversation"))},[t[14]||(t[14]=e("span",{class:"section-icon"},"ğŸ’¬",-1)),t[15]||(t[15]=e("span",{class:"section-title"},"å¯¹è¯ç®¡ç†",-1)),e("span",{class:T(["expand-icon",{expanded:u.value.conversation}])},"â–¼",2)]),V(e("div",Us,[e("div",{class:"conversation-controls"},[e("button",{onClick:Te,class:"control-btn new-conversation"},t[16]||(t[16]=[e("span",{class:"btn-icon"},"â•",-1),e("span",{class:"btn-text"},"æ–°å»ºå¯¹è¯",-1)])),e("button",{onClick:J,class:"control-btn save-session"},t[17]||(t[17]=[e("span",{class:"btn-icon"},"ğŸ’¾",-1),e("span",{class:"btn-text"},"ä¿å­˜ä¼šè¯",-1)])),e("button",{onClick:C,class:"control-btn clear-messages"},t[18]||(t[18]=[e("span",{class:"btn-icon"},"ğŸ—‘ï¸",-1),e("span",{class:"btn-text"},"æ¸…ç©ºå¯¹è¯",-1)]))]),m.value.length>0?(a(),n("div",Hs,[e("div",js,[e("h5",Fs,"å†å²ä¼šè¯ ("+i(m.value.length)+")",1),e("div",{class:"sessions-controls"},[e("button",{onClick:Ie,class:"refresh-btn",title:"åˆ·æ–°ä¼šè¯åˆ—è¡¨"}," ğŸ”„ "),e("button",{onClick:Ee,class:"clear-all-btn",title:"æ¸…ç©ºæ‰€æœ‰å†å²ä¼šè¯"}," ğŸ—‘ï¸ ")])]),e("div",Gs,[e("div",Ws,[(a(!0),n(q,null,D(m.value,s=>(a(),n("div",{key:s.id,onClick:f=>me(s),class:T(["session-item",{active:s.id===r.value}]),title:s.title},[e("div",Xs,[t[19]||(t[19]=e("span",{class:"session-icon"},"ğŸ“",-1)),e("div",Ks,[e("span",Zs,i(s.title),1),e("span",Ys,i(Qe(s)),1)]),e("div",ea,[e("span",ta,i(ve(s.timestamp)),1),e("button",{onClick:fe(f=>ye(s.id),["stop"]),class:"delete-session-btn",title:"åˆ é™¤æ­¤ä¼šè¯"}," âŒ ",8,sa)])])],10,Js))),128))])])])):k("",!0)],512),[[j,u.value.conversation]])]),e("div",aa," âœ… è§„åˆ™å·²ä¼˜åŒ–å»é‡ | åº“å­˜("+i(b.value.inventory.length)+") è´¨é‡("+i(b.value.quality.length)+") ç”Ÿäº§("+i(b.value.production.length)+") | "+i(new Date().toLocaleTimeString()),1),e("div",na,[e("div",{class:"section-header",onClick:t[1]||(t[1]=s=>Z("basic"))},[t[20]||(t[20]=e("span",{class:"section-icon"},"ğŸ“‹",-1)),t[21]||(t[21]=e("span",{class:"section-title"},"æ™ºèƒ½é—®ç­”è§„åˆ™",-1)),e("span",{class:T(["expand-icon",{expanded:u.value.basic}])},"â–¼",2)]),V(e("div",oa,[e("div",ia,[e("h4",null,"ğŸ“¦ åº“å­˜æŸ¥è¯¢ ("+i(b.value.inventory.length)+")",1),e("div",la,[e("div",ra,[(a(!0),n(q,null,D(b.value.inventory,s=>(a(),n("button",{key:s.query,onClick:f=>ne(s.query),class:"rule-btn",title:s.query},i(s.name),9,ca))),128))],512),e("div",da,[e("button",{onClick:t[2]||(t[2]=s=>W("inventory","left")),class:"scroll-btn"},"â—€"),e("span",ua,i(le("inventory")),1),e("button",{onClick:t[3]||(t[3]=s=>W("inventory","right")),class:"scroll-btn"},"â–¶")])])]),e("div",va,[e("h4",null,"ğŸ§ª è´¨é‡åˆ†æ ("+i(b.value.quality.length)+")",1),e("div",pa,[e("div",ma,[(a(!0),n(q,null,D(b.value.quality,s=>(a(),n("button",{key:s.query,onClick:f=>ne(s.query),class:"rule-btn",title:s.query},i(s.name),9,ya))),128))],512),e("div",ha,[e("button",{onClick:t[4]||(t[4]=s=>W("quality","left")),class:"scroll-btn"},"â—€"),e("span",fa,i(le("quality")),1),e("button",{onClick:t[5]||(t[5]=s=>W("quality","right")),class:"scroll-btn"},"â–¶")])])]),e("div",ga,[e("h4",null,"ğŸ­ ç”Ÿäº§è·Ÿè¸ª ("+i(b.value.production.length)+")",1),e("div",_a,[e("div",ba,[(a(!0),n(q,null,D(b.value.production,s=>(a(),n("button",{key:s.query,onClick:f=>ne(s.query),class:"rule-btn",title:s.query},i(s.name),9,ka))),128))],512),e("div",$a,[e("button",{onClick:t[6]||(t[6]=s=>W("production","left")),class:"scroll-btn"},"â—€"),e("span",Ca,i(le("production")),1),e("button",{onClick:t[7]||(t[7]=s=>W("production","right")),class:"scroll-btn"},"â–¶")])])])],512),[[j,u.value.basic]])]),e("div",xa,[e("div",{class:"section-header",onClick:t[8]||(t[8]=s=>Z("ai"))},[t[22]||(t[22]=e("span",{class:"section-icon"},"ğŸ¤–",-1)),t[23]||(t[23]=e("span",{class:"section-title"},"AIå¢å¼ºåˆ†æ",-1)),e("span",{class:T(["expand-icon",{expanded:u.value.ai}])},"â–¼",2)]),V(e("div",wa,[e("div",Sa,[t[24]||(t[24]=e("h4",null,"ğŸ” æ™ºèƒ½åˆ†æ",-1)),e("div",qa,[(a(!0),n(q,null,D(I.value.analysis,s=>(a(),n("button",{key:s.query,onClick:f=>ne(s.query),class:"rule-btn ai-rule"},i(s.name),9,Da))),128))])])],512),[[j,u.value.ai]])]),e("div",Aa,[e("div",{class:"section-header",onClick:t[9]||(t[9]=s=>Z("chart"))},[t[25]||(t[25]=e("span",{class:"section-icon"},"ğŸ“Š",-1)),t[26]||(t[26]=e("span",{class:"section-title"},"å›¾è¡¨å·¥å…·",-1)),e("span",{class:T(["expand-icon",{expanded:u.value.chart}])},"â–¼",2)]),V(e("div",Ma,[z(Mt,{onChartGenerated:ze})],512),[[j,u.value.chart]])]),e("div",Ra,[e("div",{class:"section-header",onClick:t[10]||(t[10]=s=>Z("conversation"))},[t[27]||(t[27]=e("span",{class:"section-icon"},"ğŸ’¬",-1)),t[28]||(t[28]=e("span",{class:"section-title"},"å¯¹è¯ç®¡ç†",-1)),e("span",{class:T(["expand-icon",{expanded:u.value.conversation}])},"â–¼",2)]),V(e("div",La,[r.value?(a(),n("div",Ta,[e("div",Ia,[t[29]||(t[29]=e("span",{class:"session-icon"},"ğŸŸ¢",-1)),t[30]||(t[30]=e("span",{class:"session-text"},"å½“å‰ä¼šè¯",-1)),e("span",Ea,i(l.value.length)+"æ¡",1)])])):k("",!0),e("div",Qa,[e("button",{onClick:re,class:"action-btn new-session"},t[31]||(t[31]=[e("span",{class:"btn-icon"},"â•",-1),L(" æ–°å»ºå¯¹è¯ ")])),e("button",{onClick:J,class:"action-btn save-session",disabled:l.value.length===0},t[32]||(t[32]=[e("span",{class:"btn-icon"},"ğŸ’¾",-1),L(" ä¿å­˜å¯¹è¯ ")]),8,za)]),m.value.length>0?(a(),n("div",Pa,[e("h4",null,"ğŸ“š å†å²å¯¹è¯ ("+i(m.value.length)+")",1),e("div",Oa,[(a(!0),n(q,null,D(m.value.slice(0,5),s=>(a(),n("div",{key:s.id,class:T(["session-item",{active:s.id===r.value}]),onClick:f=>me(s.id)},[e("div",Na,[e("span",Va,i(s.title),1),e("button",{onClick:fe(f=>ye(s.id),["stop"]),class:"delete-btn",title:"åˆ é™¤ä¼šè¯"}," âŒ ",8,Ua)]),e("div",Ha,[e("span",ja,i(ve(s.timestamp)),1),e("span",Fa,i(s.messageCount)+"æ¡æ¶ˆæ¯",1)])],10,Ba))),128))]),m.value.length>5?(a(),n("div",Ga,[e("button",{onClick:t[11]||(t[11]=s=>h.value=!h.value),class:"view-more-btn"},i(h.value?"æ”¶èµ·":`æŸ¥çœ‹å…¨éƒ¨ ${m.value.length} ä¸ªä¼šè¯`),1)])):k("",!0)])):(a(),n("div",Wa,t[33]||(t[33]=[e("div",{class:"empty-icon"},"ğŸ“",-1),e("div",{class:"empty-text"},"æš‚æ— å†å²å¯¹è¯",-1)])))],512),[[j,u.value.conversation]])])]),e("div",Ja,[t[46]||(t[46]=e("div",{class:"panel-header"},[e("span",{class:"panel-icon"},"ğŸ’¬"),e("h3",{class:"panel-title"},"AIå¯¹è¯")],-1)),e("div",Xa,[e("div",Ka,[l.value.length===0?(a(),n("div",Za,t[35]||(t[35]=[e("div",{class:"empty-icon"},"ğŸ’¬",-1),e("div",{class:"empty-text"},"å¼€å§‹æ‚¨çš„æ™ºèƒ½é—®ç­”ä¹‹æ—…",-1),e("div",{class:"empty-hint"},"ç‚¹å‡»å·¦ä¾§è§„åˆ™æŒ‰é’®æˆ–ç›´æ¥è¾“å…¥é—®é¢˜",-1)]))):k("",!0),(a(!0),n(q,null,D(l.value,(s,f)=>(a(),n("div",{key:f,class:T(["message-item",s.type])},[s.type==="user"?(a(),n("div",Ya,[t[36]||(t[36]=e("div",{class:"user-avatar"},"ğŸ‘¤",-1)),e("div",en,[e("div",tn,i(s.content),1),e("div",sn,i(ue(s.timestamp)),1)])])):(a(),n("div",an,[t[41]||(t[41]=e("div",{class:"assistant-avatar"},"ğŸ¤–",-1)),e("div",nn,[e("div",on,[t[37]||(t[37]=e("span",{class:"assistant-name"},"QMSé—®ç­”åŠ©æ‰‹-å°Q",-1)),s.source?(a(),n("span",ln,i(qe(s.source)),1)):k("",!0),g.value.isSupported&&!s.isLoading?(a(),n("button",{key:1,onClick:S=>O(s.content),class:"voice-play-button",disabled:g.value.isSpeaking,title:g.value.isSpeaking?"æ­£åœ¨æ’­æ”¾...":"ç‚¹å‡»æ’­æ”¾è¯­éŸ³"},[g.value.isSpeaking?(a(),n("span",cn,"ğŸ”Š")):(a(),n("span",dn,"ğŸ”‰"))],8,rn)):k("",!0)]),s.isLoading?(a(),n("div",un,[t[38]||(t[38]=e("div",{class:"loading-spinner"},"â³",-1)),e("div",vn,i(s.content),1)])):be(s.content)?(a(),n("div",pn,[z(Es,{data:s.content,onAction:ke},null,8,["data"])])):(a(),n("div",mn,[s.source==="ai-consultation"||s.source==="ai-enhanced"?(a(),n("div",yn,[z(Ps,{content:s.content},null,8,["content"])])):(a(),n("div",{key:1,class:"assistant-text",innerHTML:Se(s.content)},null,8,hn)),s.cards&&s.cards.length>0?(a(),n("div",fn,[(a(!0),n(q,null,D(s.cards,(S,Q)=>(a(),n("div",{key:Q,class:"data-card"},[e("div",gn,[e("span",_n,i(S.icon||"ğŸ“Š"),1),e("span",bn,i(S.title),1)]),e("div",kn,[e("div",$n,i(S.value),1),S.subtitle?(a(),n("div",Cn,i(S.subtitle),1)):k("",!0)])]))),128))])):k("",!0),s.tableData&&s.tableData.length>0?(a(),n("div",xn,[e("table",wn,[e("thead",null,[e("tr",null,[(a(!0),n(q,null,D(s.tableColumns,S=>(a(),n("th",{key:S.key},i(S.title),1))),128))])]),e("tbody",null,[(a(!0),n(q,null,D(s.tableData,(S,Q)=>(a(),n("tr",{key:Q},[(a(!0),n(q,null,D(s.tableColumns,P=>(a(),n("td",{key:P.key},i(S[P.key]),1))),128))]))),128))])])])):k("",!0)])),s.workflow?(a(),n("div",Sn,[e("div",qn,[t[39]||(t[39]=e("span",{class:"workflow-icon"},"âš¡",-1)),e("span",Dn,i(De(s.workflow)),1)])])):k("",!0),s.chartId?(a(),n("div",An,[e("div",Mn,[t[40]||(t[40]=e("span",{class:"chart-icon"},"ğŸ“Š",-1)),e("span",Rn,"å·²ç”Ÿæˆå›¾è¡¨ï¼ŒID: "+i(s.chartId),1)])])):k("",!0),e("div",Ln,i(ue(s.timestamp)),1)])]))],2))),128))],512),e("div",Tn,[e("div",In,[V(e("input",{"onUpdate:modelValue":t[12]||(t[12]=s=>c.value=s),onKeyup:et(U,["enter"]),placeholder:"å‘å°Qæé—®ï¼Œæˆ–ç‚¹å‡»ğŸ¤è¯­éŸ³è¾“å…¥...",class:"message-input",disabled:y.value},null,40,En),[[Ye,c.value]]),e("button",{onClick:M,class:T(["voice-button",{listening:g.value.isListening,disabled:!g.value.isSupported}]),disabled:y.value,title:g.value.isSupported?g.value.isListening?"ç‚¹å‡»åœæ­¢å½•éŸ³":"ç‚¹å‡»å¼€å§‹è¯­éŸ³è¾“å…¥":"æµè§ˆå™¨ä¸æ”¯æŒè¯­éŸ³åŠŸèƒ½"},[g.value.isListening?(a(),n("span",zn,"ğŸ”´")):g.value.isSupported?(a(),n("span",Pn,"ğŸ¤")):(a(),n("span",On,"ğŸš«"))],10,Qn),e("button",{onClick:U,class:"send-button",disabled:y.value||!c.value.trim()},[y.value?(a(),n("span",Nn,"â³")):(a(),n("span",Vn,"ğŸš€"))],8,Bn)]),g.value.isListening?(a(),n("div",Un,t[42]||(t[42]=[tt('<div class="voice-indicator" data-v-0290bfa9><div class="voice-wave" data-v-0290bfa9></div><div class="voice-wave" data-v-0290bfa9></div><div class="voice-wave" data-v-0290bfa9></div></div><span class="voice-text" data-v-0290bfa9>æ­£åœ¨å¬æ‚¨è¯´è¯...</span>',2)]))):k("",!0),$.value.interim||$.value.final?(a(),n("div",Hn,[$.value.interim?(a(),n("div",jn,[t[43]||(t[43]=e("span",{class:"transcript-label"},"è¯†åˆ«ä¸­:",-1)),e("span",Fn,i($.value.interim),1)])):k("",!0),$.value.final?(a(),n("div",Gn,[t[44]||(t[44]=e("span",{class:"transcript-label"},"è¯†åˆ«å®Œæˆ:",-1)),e("span",Wn,i($.value.final),1),e("span",Jn,"("+i(($.value.confidence*100).toFixed(1))+"%)",1)])):k("",!0)])):k("",!0),g.value.isSupported?(a(),n("div",Xn,[e("small",Kn,[L(" è¯­éŸ³çŠ¶æ€: "+i(g.value.isListening?"ğŸ”´ å½•éŸ³ä¸­":"âšª å¾…æœº")+" | æ”¯æŒ: âœ… | ",1),e("button",{onClick:w,class:"debug-button"},"æµ‹è¯•è¯­éŸ³"),t[45]||(t[45]=L(" | ")),e("button",{onClick:E,class:"debug-button"},"æµ‹è¯•MD")])])):k("",!0)])])]),e("div",Zn,[e("div",Yn,[t[47]||(t[47]=e("span",{class:"panel-icon"},"ğŸ§ ",-1)),t[48]||(t[48]=e("h3",{class:"panel-title"},"æ™ºèƒ½åˆ†æ",-1)),p.value?(a(),n("div",eo,[e("span",{class:T(["status-dot",p.value.status])},null,2),e("span",to,i(Ae()),1)])):k("",!0)]),p.value?(a(),n("div",so,[e("div",ao,[e("div",no,i(p.value.question),1),e("div",oo,[e("span",io,i(Me(p.value.startTime)),1),e("span",lo,i(p.value.type),1)])]),e("div",ro,[(a(!0),n(q,null,D(p.value.steps,(s,f)=>(a(),n("div",{key:f,class:T(["workflow-step",{active:s.status==="processing",completed:s.status==="completed",error:s.status==="error"}])},[e("div",co,[e("div",uo,i(f+1),1),e("div",vo,[e("div",po,i(s.title),1),e("div",mo,i(s.description),1)]),e("div",yo,[s.status==="processing"?(a(),n("span",ho,"â³")):s.status==="completed"?(a(),n("span",fo,"âœ…")):s.status==="error"?(a(),n("span",go,"âŒ")):(a(),n("span",_o,"â¸ï¸"))])]),s.details&&s.status==="completed"?(a(),n("div",bo,[s.data?(a(),n("div",ko,[t[49]||(t[49]=e("strong",null,"æ•°æ®:",-1)),L(" "+i(Re(s.data)),1)])):k("",!0),s.result?(a(),n("div",$o,[t[50]||(t[50]=e("strong",null,"ç»“æœ:",-1)),L(" "+i(s.result),1)])):k("",!0),s.duration?(a(),n("div",Co,[t[51]||(t[51]=e("strong",null,"è€—æ—¶:",-1)),L(" "+i(s.duration)+"ms ",1)])):k("",!0)])):k("",!0)],2))),128))]),p.value.summary?(a(),n("div",xo,[t[55]||(t[55]=e("h4",null,"ğŸ“Š åˆ†ææ‘˜è¦",-1)),e("div",wo,[p.value.summary.dataPoints?(a(),n("div",So,[t[52]||(t[52]=e("strong",null,"æ•°æ®ç‚¹:",-1)),L(" "+i(p.value.summary.dataPoints),1)])):k("",!0),p.value.summary.insights?(a(),n("div",qo,[t[53]||(t[53]=e("strong",null,"å…³é”®æ´å¯Ÿ:",-1)),L(" "+i(p.value.summary.insights),1)])):k("",!0),p.value.summary.recommendations?(a(),n("div",Do,[t[54]||(t[54]=e("strong",null,"å»ºè®®:",-1)),L(" "+i(p.value.summary.recommendations),1)])):k("",!0)])])):k("",!0)])):(a(),n("div",Ao,t[56]||(t[56]=[e("div",{class:"empty-icon"},"ğŸ¤”",-1),e("div",{class:"empty-text"},"ç­‰å¾…åˆ†æä»»åŠ¡...",-1),e("div",{class:"empty-hint"},"ç‚¹å‡»å·¦ä¾§è§„åˆ™æˆ–è¾“å…¥é—®é¢˜å¼€å§‹åˆ†æ",-1)])))])])]))}},Qo=ae(Mo,[["__scopeId","data-v-0290bfa9"]]);export{Qo as default};
