<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç»Ÿè®¡å¡ç‰‡æ˜¾ç¤ºæµ‹è¯•</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            background-color: #f5f5f5;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .test-section {
            margin-bottom: 30px;
            padding: 15px;
            border: 1px solid #ddd;
            border-radius: 5px;
        }
        .test-section h3 {
            margin-top: 0;
            color: #333;
        }
        .result {
            background: #f8f9fa;
            padding: 10px;
            border-radius: 4px;
            margin-top: 10px;
            white-space: pre-wrap;
            font-family: monospace;
            font-size: 12px;
        }
        .success {
            background: #d4edda;
            color: #155724;
        }
        .error {
            background: #f8d7da;
            color: #721c24;
        }
        button {
            background: #007bff;
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 4px;
            cursor: pointer;
            margin-right: 10px;
        }
        button:hover {
            background: #0056b3;
        }
        .link-button {
            background: #28a745;
            text-decoration: none;
            display: inline-block;
            padding: 8px 16px;
            border-radius: 4px;
            color: white;
            margin-right: 10px;
        }
        .link-button:hover {
            background: #218838;
            color: white;
        }
        .stats-preview {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 16px;
            margin: 16px 0;
        }
        .stat-card-preview {
            background: #ffffff;
            border: 1px solid #e2e8f0;
            border-radius: 12px;
            padding: 16px;
            display: flex;
            align-items: center;
            gap: 12px;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
        }
        .stat-card-preview.primary {
            border-left: 4px solid #3b82f6;
        }
        .stat-card-preview.info {
            border-left: 4px solid #06b6d4;
        }
        .stat-card-preview.success {
            border-left: 4px solid #10b981;
        }
        .stat-card-preview.warning {
            border-left: 4px solid #f59e0b;
        }
        .stat-card-preview.danger {
            border-left: 4px solid #ef4444;
        }
        .stat-icon-preview {
            font-size: 24px;
            line-height: 1;
        }
        .stat-content-preview {
            flex: 1;
        }
        .stat-value-preview {
            font-size: 24px;
            font-weight: 700;
            color: #1f2937;
            line-height: 1.2;
            margin-bottom: 4px;
        }
        .stat-label-preview {
            font-size: 14px;
            font-weight: 500;
            color: #374151;
            line-height: 1.2;
            margin-bottom: 2px;
        }
        .stat-subtitle-preview {
            font-size: 12px;
            color: #6b7280;
            line-height: 1.2;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ“Š ç»Ÿè®¡å¡ç‰‡æ˜¾ç¤ºæµ‹è¯•</h1>
        <p>æµ‹è¯•æ™ºèƒ½é—®ç­”é¡µé¢çš„ç»Ÿè®¡å¡ç‰‡åŠŸèƒ½æ˜¯å¦æ­£ç¡®æ˜¾ç¤º</p>
        
        <div class="test-section">
            <h3>1. åº“å­˜åœºæ™¯ç»Ÿè®¡å¡ç‰‡é¢„è§ˆ</h3>
            <div class="stats-preview">
                <div class="stat-card-preview primary">
                    <div class="stat-icon-preview">ğŸ“¦</div>
                    <div class="stat-content-preview">
                        <div class="stat-value-preview">6</div>
                        <div class="stat-label-preview">ç‰©æ–™å’Œæ‰¹æ¬¡</div>
                        <div class="stat-subtitle-preview">0 ä¸ªæ‰¹æ¬¡</div>
                    </div>
                </div>
                <div class="stat-card-preview info">
                    <div class="stat-icon-preview">ğŸ­</div>
                    <div class="stat-content-preview">
                        <div class="stat-value-preview">5</div>
                        <div class="stat-label-preview">ä¾›åº”å•†</div>
                        <div class="stat-subtitle-preview">å®¶ä¾›åº”å•†</div>
                    </div>
                </div>
                <div class="stat-card-preview warning">
                    <div class="stat-icon-preview">âš ï¸</div>
                    <div class="stat-content-preview">
                        <div class="stat-value-preview">11</div>
                        <div class="stat-label-preview">é£é™©åº“å­˜</div>
                        <div class="stat-subtitle-preview">éœ€å…³æ³¨</div>
                    </div>
                </div>
                <div class="stat-card-preview danger">
                    <div class="stat-icon-preview">ğŸ§Š</div>
                    <div class="stat-content-preview">
                        <div class="stat-value-preview">3</div>
                        <div class="stat-label-preview">å†»ç»“åº“å­˜</div>
                        <div class="stat-subtitle-preview">å·²å†»ç»“</div>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="test-section">
            <h3>2. ç”Ÿäº§åœºæ™¯ç»Ÿè®¡å¡ç‰‡é¢„è§ˆ</h3>
            <div class="stats-preview">
                <div class="stat-card-preview primary">
                    <div class="stat-icon-preview">ğŸ“¦</div>
                    <div class="stat-content-preview">
                        <div class="stat-value-preview">14</div>
                        <div class="stat-label-preview">ç‰©æ–™å’Œæ‰¹æ¬¡</div>
                        <div class="stat-subtitle-preview">44 ä¸ªæ‰¹æ¬¡</div>
                    </div>
                </div>
                <div class="stat-card-preview info">
                    <div class="stat-icon-preview">ğŸ¯</div>
                    <div class="stat-content-preview">
                        <div class="stat-value-preview">5</div>
                        <div class="stat-label-preview">é¡¹ç›®</div>
                        <div class="stat-subtitle-preview">ä¸ªé¡¹ç›®</div>
                    </div>
                </div>
                <div class="stat-card-preview success">
                    <div class="stat-icon-preview">ğŸ­</div>
                    <div class="stat-content-preview">
                        <div class="stat-value-preview">18</div>
                        <div class="stat-label-preview">ä¾›åº”å•†</div>
                        <div class="stat-subtitle-preview">å®¶ä¾›åº”å•†</div>
                    </div>
                </div>
                <div class="stat-card-preview warning">
                    <div class="stat-icon-preview">ğŸ“Š</div>
                    <div class="stat-content-preview">
                        <div class="stat-value-preview">26/24</div>
                        <div class="stat-label-preview">ä¸è‰¯ç‡</div>
                        <div class="stat-subtitle-preview">æ ‡å‡†å†…/æ ‡å‡†å¤–</div>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="test-section">
            <h3>3. æµ‹è¯•åœºæ™¯ç»Ÿè®¡å¡ç‰‡é¢„è§ˆ</h3>
            <div class="stats-preview">
                <div class="stat-card-preview primary">
                    <div class="stat-icon-preview">ğŸ“¦</div>
                    <div class="stat-content-preview">
                        <div class="stat-value-preview">2</div>
                        <div class="stat-label-preview">ç‰©æ–™å’Œæ‰¹æ¬¡</div>
                        <div class="stat-subtitle-preview">50 ä¸ªæ‰¹æ¬¡</div>
                    </div>
                </div>
                <div class="stat-card-preview info">
                    <div class="stat-icon-preview">ğŸ¯</div>
                    <div class="stat-content-preview">
                        <div class="stat-value-preview">10</div>
                        <div class="stat-label-preview">é¡¹ç›®</div>
                        <div class="stat-subtitle-preview">ä¸ªé¡¹ç›®</div>
                    </div>
                </div>
                <div class="stat-card-preview success">
                    <div class="stat-icon-preview">ğŸ­</div>
                    <div class="stat-content-preview">
                        <div class="stat-value-preview">3</div>
                        <div class="stat-label-preview">ä¾›åº”å•†</div>
                        <div class="stat-subtitle-preview">å®¶ä¾›åº”å•†</div>
                    </div>
                </div>
                <div class="stat-card-preview danger">
                    <div class="stat-icon-preview">âŒ</div>
                    <div class="stat-content-preview">
                        <div class="stat-value-preview">3</div>
                        <div class="stat-label-preview">NGæ‰¹æ¬¡</div>
                        <div class="stat-subtitle-preview">ä¸ªæ‰¹æ¬¡</div>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="test-section">
            <h3>4. å®é™…æµ‹è¯•</h3>
            <p>è¯·æŒ‰ä»¥ä¸‹æ­¥éª¤æµ‹è¯•å®é™…åŠŸèƒ½ï¼š</p>
            <ol>
                <li><a href="http://localhost:5174/assistant" target="_blank" class="link-button">æ‰“å¼€æ™ºèƒ½é—®ç­”é¡µé¢</a></li>
                <li>è¾“å…¥æŸ¥è¯¢: "æŸ¥è¯¢åº“å­˜ä¿¡æ¯"</li>
                <li>æ£€æŸ¥æ˜¯å¦æ˜¾ç¤ºåº“å­˜åœºæ™¯çš„4ä¸ªç»Ÿè®¡å¡ç‰‡</li>
                <li>è¾“å…¥æŸ¥è¯¢: "æŸ¥è¯¢ä¸Šçº¿ä¿¡æ¯"</li>
                <li>æ£€æŸ¥æ˜¯å¦æ˜¾ç¤ºç”Ÿäº§åœºæ™¯çš„4ä¸ªç»Ÿè®¡å¡ç‰‡</li>
                <li>è¾“å…¥æŸ¥è¯¢: "æŸ¥è¯¢æµ‹è¯•ä¿¡æ¯"</li>
                <li>æ£€æŸ¥æ˜¯å¦æ˜¾ç¤ºæµ‹è¯•åœºæ™¯çš„4ä¸ªç»Ÿè®¡å¡ç‰‡</li>
            </ol>
            
            <button onclick="testQueries()">è‡ªåŠ¨æµ‹è¯•æŸ¥è¯¢</button>
            <div id="testResult" class="result"></div>
        </div>
        
        <div class="test-section">
            <h3>5. é¢„æœŸæ•ˆæœ</h3>
            <div class="result">
âœ… ç»Ÿè®¡å¡ç‰‡åº”è¯¥æ˜¾ç¤ºåœ¨æŸ¥è¯¢ç»“æœçš„æ•°æ®è¡¨æ ¼ä¹‹å‰
âœ… æ¯ä¸ªåœºæ™¯æ˜¾ç¤º4ä¸ªä¸åŒçš„ç»Ÿè®¡å¡ç‰‡
âœ… å¡ç‰‡æœ‰ä¸åŒçš„é¢œè‰²è¾¹æ¡†å’Œå›¾æ ‡
âœ… ç»Ÿè®¡æ•°æ®åº”è¯¥ä¸è¡¨æ ¼æ•°æ®ä¸€è‡´
âœ… å¡ç‰‡åº”è¯¥æœ‰æ‚¬åœæ•ˆæœå’Œå“åº”å¼å¸ƒå±€

ğŸ“Š åº“å­˜åœºæ™¯å¡ç‰‡:
- ğŸ“¦ ç‰©æ–™å’Œæ‰¹æ¬¡ (è“è‰²è¾¹æ¡†)
- ğŸ­ ä¾›åº”å•† (é’è‰²è¾¹æ¡†)  
- âš ï¸ é£é™©åº“å­˜ (é»„è‰²è¾¹æ¡†)
- ğŸ§Š å†»ç»“åº“å­˜ (çº¢è‰²è¾¹æ¡†)

ğŸ­ ç”Ÿäº§åœºæ™¯å¡ç‰‡:
- ğŸ“¦ ç‰©æ–™å’Œæ‰¹æ¬¡ (è“è‰²è¾¹æ¡†)
- ğŸ¯ é¡¹ç›® (é’è‰²è¾¹æ¡†)
- ğŸ­ ä¾›åº”å•† (ç»¿è‰²è¾¹æ¡†)
- ğŸ“Š ä¸è‰¯ç‡ (é»„è‰²/ç»¿è‰²è¾¹æ¡†)

ğŸ”¬ æµ‹è¯•åœºæ™¯å¡ç‰‡:
- ğŸ“¦ ç‰©æ–™å’Œæ‰¹æ¬¡ (è“è‰²è¾¹æ¡†)
- ğŸ¯ é¡¹ç›® (é’è‰²è¾¹æ¡†)
- ğŸ­ ä¾›åº”å•† (ç»¿è‰²è¾¹æ¡†)
- âŒ NGæ‰¹æ¬¡ (çº¢è‰²è¾¹æ¡†)
            </div>
        </div>
    </div>

    <script>
        async function testQueries() {
            const resultDiv = document.getElementById('testResult');
            resultDiv.textContent = 'æ­£åœ¨æµ‹è¯•æŸ¥è¯¢åŠŸèƒ½...';
            
            const testQueries = [
                { query: 'æŸ¥è¯¢åº“å­˜ä¿¡æ¯', scenario: 'åº“å­˜' },
                { query: 'æŸ¥è¯¢ä¸Šçº¿ä¿¡æ¯', scenario: 'ç”Ÿäº§' },
                { query: 'æŸ¥è¯¢æµ‹è¯•ä¿¡æ¯', scenario: 'æµ‹è¯•' }
            ];
            
            let output = 'ğŸ§ª è‡ªåŠ¨æµ‹è¯•ç»“æœ:\n\n';
            
            for (const test of testQueries) {
                try {
                    const response = await fetch('http://localhost:3001/api/assistant/query', {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({ question: test.query })
                    });
                    
                    if (response.ok) {
                        const result = await response.json();
                        
                        if (result.success && result.data && result.data.tableData) {
                            output += `âœ… ${test.scenario}åœºæ™¯æŸ¥è¯¢æˆåŠŸ\n`;
                            output += `   æŸ¥è¯¢: ${test.query}\n`;
                            output += `   ç»“æœ: ${result.data.tableData.length} æ¡è®°å½•\n`;
                            output += `   é¢„æœŸæ˜¾ç¤º4ä¸ªç»Ÿè®¡å¡ç‰‡\n\n`;
                        } else {
                            output += `âŒ ${test.scenario}åœºæ™¯æŸ¥è¯¢å¤±è´¥\n`;
                            output += `   é”™è¯¯: ${result.message || 'æœªçŸ¥é”™è¯¯'}\n\n`;
                        }
                    } else {
                        output += `âŒ ${test.scenario}åœºæ™¯è¯·æ±‚å¤±è´¥: ${response.status}\n\n`;
                    }
                } catch (error) {
                    output += `âŒ ${test.scenario}åœºæ™¯æµ‹è¯•å‡ºé”™: ${error.message}\n\n`;
                }
            }
            
            output += 'ğŸ’¡ è¯·æ‰‹åŠ¨è®¿é—®æ™ºèƒ½é—®ç­”é¡µé¢éªŒè¯ç»Ÿè®¡å¡ç‰‡æ˜¾ç¤ºæ•ˆæœ';
            
            resultDiv.className = 'result success';
            resultDiv.textContent = output;
        }
    </script>
</body>
</html>
