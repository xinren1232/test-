# 数据清洗页面更新功能使用说明

## 功能概述

数据清洗页面现在支持完整的数据更新功能，包括：
- 单行数据编辑
- 批量数据编辑
- 数据验证
- 实时保存
- 变更追踪

## 访问路径

访问地址：`http://localhost:5175/data-cleaning`

## 主要功能

### 1. 数据预览与编辑

#### 1.1 切换编辑模式
- 在数据预览页面，点击右上角的"编辑模式"开关
- 开启编辑模式后，表格将显示编辑操作按钮

#### 1.2 单行编辑
1. 点击行首的"编辑"按钮（铅笔图标）
2. 该行进入编辑状态，字段变为可编辑控件：
   - 文本字段：输入框
   - 数字字段：数字输入框
   - 日期字段：日期选择器
   - 下拉字段：下拉选择框
3. 编辑完成后点击"保存"按钮（对勾图标）
4. 或点击"取消"按钮（X图标）放弃更改

#### 1.3 字段验证
- 必填字段验证：物料编码、物料名称、供应商、状态
- 格式验证：物料编码需符合 `XX-XXXX` 格式
- 实时验证：输入时即时显示验证结果
- 错误提示：无效数据会显示红色警告图标

#### 1.4 快捷操作
- `Enter` 键：保存当前行
- `Esc` 键：取消编辑
- 自动保存：失去焦点时自动验证

### 2. 批量编辑功能

#### 2.1 打开批量编辑器
- 在编辑模式下，点击"批量编辑"按钮
- 弹出批量编辑对话框

#### 2.2 选择数据行
- 使用表格左侧的复选框选择要编辑的行
- 点击"全选"按钮选择所有行
- 点击"清除选择"取消所有选择
- 实时显示已选择的行数

#### 2.3 批量修改字段
- 在批量编辑面板中设置要修改的字段值：
  - 供应商：下拉选择
  - 问题类型：下拉选择
  - 状态：下拉选择
  - 问题描述：文本输入
- 只需填写要修改的字段，空白字段不会被修改
- 点击"应用批量修改"执行批量更新

#### 2.4 批量删除
- 选择要删除的行
- 点击"删除选中行"按钮
- 确认删除操作

### 3. 数据保存与管理

#### 3.1 保存更改
- 单行编辑：每行编辑后立即标记为已修改
- 批量编辑：批量操作后统一标记
- 点击"保存更改"按钮将所有修改提交到后端
- 保存成功后清除未保存标记

#### 3.2 取消更改
- 点击"取消更改"按钮恢复到原始数据
- 会丢失所有未保存的修改
- 需要确认操作

#### 3.3 变更追踪
- 修改过的字段显示橙色高亮
- 修改过的行在卡片视图中显示"已修改"标签
- 实时统计修改的记录数量

### 4. 数据验证规则

#### 4.1 必填字段
- 物料编码：必填
- 物料名称：必填
- 供应商：必填
- 状态：必填

#### 4.2 格式验证
- 物料编码：必须符合 `[A-Z]{2,3}-[A-Z0-9]{4,6}` 格式
- 示例：`AXX-H1234`、`BXX-H5678`

#### 4.3 下拉选项
- **供应商**：华星光电、京东方、比亚迪、宁德时代、富士康
- **问题类型**：尺寸偏差、性能问题、外观缺陷、材料问题、工艺问题
- **状态**：待处理、处理中、已处理、已关闭

### 5. 使用流程示例

#### 5.1 单行编辑流程
1. 上传并处理数据文件
2. 切换到"数据预览"标签页
3. 开启"编辑模式"
4. 点击要编辑行的"编辑"按钮
5. 修改字段内容
6. 点击"保存"按钮确认修改
7. 点击"保存更改"提交到后端

#### 5.2 批量编辑流程
1. 在编辑模式下点击"批量编辑"
2. 选择要修改的数据行
3. 在批量编辑面板中设置新的字段值
4. 点击"应用批量修改"
5. 关闭批量编辑对话框
6. 点击"保存更改"提交到后端

### 6. 注意事项

#### 6.1 数据安全
- 所有修改都有确认步骤
- 支持取消操作恢复原始数据
- 修改前会保存原始值用于回滚

#### 6.2 性能优化
- 大量数据时建议分批编辑
- 批量操作会有进度提示
- 自动保存避免数据丢失

#### 6.3 兼容性
- 支持现代浏览器
- 响应式设计，支持移动设备
- 键盘快捷键支持

### 7. 常见问题

#### Q: 编辑后数据没有保存？
A: 请确保点击了"保存更改"按钮，单行编辑只是标记修改，需要统一提交。

#### Q: 验证失败无法保存？
A: 检查必填字段是否完整，物料编码格式是否正确。

#### Q: 批量编辑没有生效？
A: 确保选择了要编辑的行，并且在批量编辑面板中设置了要修改的字段值。

#### Q: 如何恢复误删的数据？
A: 在保存前可以点击"取消更改"恢复，保存后需要重新上传原始文件。

### 8. 技术支持

如有问题请联系技术支持团队或查看系统日志获取详细错误信息。
