import{aa as N,S as G,ab as O,ac as C,ae as K,al as R,af as A}from"./index-BA_4wflW.js";import{_ as I,C as f,cg as L,h as T,aa as P,p as w,d as M,ak as E,a3 as d,ay as W}from"./echarts-Cq7vAPzK.js";var H=function(t){I(e,t);function e(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=e.type,a}return e.prototype.createMarkerModelFromSeries=function(a,r,i){return new e(a,r,i)},e.type="markPoint",e.defaultOption={z:5,symbol:"pin",symbolSize:50,tooltip:{trigger:"item"},label:{show:!0,position:"inside"},itemStyle:{borderWidth:2},emphasis:{label:{show:!0}}},e}(N);function V(t,e,a){var r=e.coordinateSystem;t.each(function(i){var n=t.getItemModel(i),o,s=P(n.get("x"),a.getWidth()),l=P(n.get("y"),a.getHeight());if(!isNaN(s)&&!isNaN(l))o=[s,l];else if(e.getMarkerPosition)o=e.getMarkerPosition(t.getValues(t.dimensions,i));else if(r){var k=t.get(r.dimensions[0],i),u=t.get(r.dimensions[1],i);o=r.dataToPoint([k,u])}isNaN(s)||(o[0]=s),isNaN(l)||(o[1]=l),t.setItemLayout(i,o)})}var _=function(t){I(e,t);function e(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=e.type,a}return e.prototype.updateTransform=function(a,r,i){r.eachSeries(function(n){var o=N.getMarkerModelFromSeries(n,"markPoint");o&&(V(o.getData(),n,i),this.markerGroupMap.get(n.id).updateLayout())},this)},e.prototype.renderSeries=function(a,r,i,n){var o=a.coordinateSystem,s=a.id,l=a.getData(),k=this.markerGroupMap,u=k.get(s)||k.set(s,new G),g=j(o,a,r);r.setData(g),V(r.getData(),a,n),g.each(function(y){var m=g.getItemModel(y),c=m.getShallow("symbol"),p=m.getShallow("symbolSize"),v=m.getShallow("symbolRotate"),h=m.getShallow("symbolOffset"),z=m.getShallow("symbolKeepAspect");if(f(c)||f(p)||f(v)||f(h)){var b=r.getRawValue(y),S=r.getDataParams(y);f(c)&&(c=c(b,S)),f(p)&&(p=p(b,S)),f(v)&&(v=v(b,S)),f(h)&&(h=h(b,S))}var D=m.getModel("itemStyle").getItemStyle(),F=L(l,"color");D.fill||(D.fill=F),g.setItemVisual(y,{symbol:c,symbolSize:p,symbolRotate:v,symbolOffset:h,symbolKeepAspect:z,style:D})}),u.updateData(g),this.group.add(u.group),g.eachItemGraphicEl(function(y){y.traverse(function(m){T(m).dataModel=r})}),this.markKeep(u),u.group.silent=r.get("silent")||a.get("silent")},e.type="markPoint",e}(O);function j(t,e,a){var r;t?r=w(t&&t.dimensions,function(s){var l=e.getData().getDimensionInfo(e.getData().mapDimension(s))||{};return M(M({},l),{name:s,ordinalMeta:null})}):r=[{name:"value",type:"float"}];var i=new E(r,a),n=w(a.get("data"),d(C,e));t&&(n=W(n,d(K,t)));var o=R(!!t,r);return i.initData(n,null,o),i}function J(t){t.registerComponentModel(H),t.registerComponentView(_),t.registerPreprocessor(function(e){A(e.series,"markPoint")&&(e.markPoint=e.markPoint||{})})}export{J as i};
