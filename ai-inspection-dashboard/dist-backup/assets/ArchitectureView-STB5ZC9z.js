import{_ as C,l as I}from"./index-BA_4wflW.js";import"./index-C-zgdgf0.js";import{r as B,t as E,v as L,e as c,k as t,f as g,g as p,j as R,a5 as f,a6 as h,o as y,l as w,ac as A,x as v}from"./element-plus-CvrI1lB2.js";import{cF as V}from"./echarts-Cq7vAPzK.js";import"./install-_7eNnU3u.js";import"./installMarkPoint-DRgdH7kI.js";const W={class:"architecture-container"},$={class:"header"},N={class:"controls"},O={class:"diagram-legend"},T={class:"legend-content"},D={class:"flow-steps"},j={__name:"ArchitectureView",setup(Q){const S=I(),l=B(null);let r=null;function x(){S.push("/")}const i={user:"#e74c3c",frontend:"#3498db",backend:"#9b59b6",storage:"#8e44ad",devops:"#2c3e50",monitor:"#c0392b"},d={user:"用户交互层",frontend:"应用服务层",backend:"后端服务层",storage:"数据存储层",devops:"开发运维层",monitor:"监控告警层"},z=[{description:"开发者提交代码"},{description:"用户请求前端服务"},{description:"请求负载均衡与处理"},{description:"后端与数据存储交互"},{description:"部署与监控流程"}],a=[{id:"dev",name:"开发者",x:140,y:100,category:"devops",symbol:"circle",symbolSize:60},{id:"user",name:"用户",x:620,y:100,category:"user",symbol:"circle",symbolSize:60},{id:"web",name:"Web前端",x:500,y:200,category:"frontend",symbol:"rect",symbolSize:[90,50]},{id:"client",name:"客户端",x:740,y:200,category:"frontend",symbol:"rect",symbolSize:[90,50]},{id:"lb",name:"负载均衡",x:620,y:280,category:"frontend",symbol:"rect",symbolSize:70},{id:"cdn",name:"CDN",x:800,y:280,category:"frontend",symbol:"diamond",symbolSize:60},{id:"webapp",name:"Web App服务",x:380,y:380,category:"backend",symbol:"rect",symbolSize:[120,60]},{id:"backend",name:"后台服务",x:620,y:450,category:"backend",symbol:"rect",symbolSize:[120,60]},{id:"db",name:"数据库",x:380,y:580,category:"storage",symbol:"roundRect",symbolSize:[100,60]},{id:"cache",name:"缓存",x:620,y:580,category:"storage",symbol:"roundRect",symbolSize:[100,60]},{id:"cicd",name:"CI/CD",x:200,y:280,category:"devops",symbol:"rect",symbolSize:[90,50]},{id:"monitor",name:"告警服务",x:140,y:580,category:"monitor",symbol:"rect",symbolSize:[90,50]}],_=[{source:"dev",target:"cicd",lineStyle:{width:2,curveness:.2}},{source:"user",target:"web",lineStyle:{width:2,curveness:.2}},{source:"web",target:"lb",lineStyle:{width:2,curveness:.2}},{source:"client",target:"lb",lineStyle:{width:2,curveness:.2}},{source:"lb",target:"webapp",lineStyle:{width:2}},{source:"lb",target:"cdn",lineStyle:{width:2,curveness:.2}},{source:"webapp",target:"backend",lineStyle:{width:2}},{source:"backend",target:"db",lineStyle:{width:2,curveness:.2}},{source:"backend",target:"cache",lineStyle:{width:2,curveness:.2}},{source:"cicd",target:"webapp",lineStyle:{width:2,curveness:.3}},{source:"cicd",target:"backend",lineStyle:{width:2,curveness:.3}},{source:"backend",target:"monitor",lineStyle:{width:2,curveness:.2}},{source:"db",target:"monitor",lineStyle:{width:2,curveness:.4}}];function u(){if(!l.value)return;r&&r.dispose(),r=V(l.value);const m=_.map(e=>({...e,lineStyle:{...e.lineStyle,type:"dashed",dashOffset:0,cap:"round",shadowColor:i[a.find(s=>s.id===e.source).category],shadowBlur:15,opacity:.95,curveness:e.lineStyle.curveness||.2},effect:{show:!0,period:3.5,trailLength:.8,symbolSize:8,color:"#fff",symbol:"arrow"}})),o={backgroundColor:"transparent",tooltip:{trigger:"item",formatter:e=>e.dataType==="node"?`<div style="font-weight:bold;margin-bottom:5px;">${e.data.name}</div>
                  <div>类型: ${d[e.data.category]}</div>`:`数据流向: ${e.data.source} → ${e.data.target}`,backgroundColor:"rgba(30,30,45,0.9)",borderColor:"rgba(255,255,255,0.2)",textStyle:{color:"#fff"},extraCssText:"box-shadow: 0 0 15px rgba(0,0,0,0.3); border-radius: 8px;"},grid:{top:10,bottom:10},legend:{show:!1},animationDuration:1500,animationEasingUpdate:"quinticInOut",animation:!0,series:[{type:"graph",layout:"none",symbolSize:50,roam:!0,focusNodeAdjacency:!0,itemStyle:{borderWidth:2,borderColor:"rgba(255, 255, 255, 0.4)",shadowColor:"rgba(0, 0, 0, 0.5)",shadowBlur:15},lineStyle:{color:"#aaa",width:3,curveness:.2,dashOffset:0},label:{show:!0,position:"inside",formatter:"{b}",fontSize:13,fontWeight:"bold",color:"#fff",backgroundColor:"rgba(0,0,0,0.6)",borderRadius:4,padding:[4,6]},edgeLabel:{fontSize:13,color:"#fff",backgroundColor:"rgba(40,40,60,0.85)",borderRadius:5,padding:[3,5],formatter:"{c}"},categories:Object.keys(i).map(e=>({name:e,itemStyle:{color:i[e]}})),data:a.map(e=>({...e,tooltip:{formatter:`${e.name}<br/>类型: ${d[e.category]}`},itemStyle:{color:i[e.category],borderWidth:2,borderColor:"rgba(255, 255, 255, 0.4)",shadowBlur:12,shadowColor:"rgba(0, 0, 0, 0.5)"},emphasis:{scale:!0,itemStyle:{shadowBlur:25,borderColor:"#fff",borderWidth:3}}})),links:m.map(e=>({...e,lineStyle:{...e.lineStyle,color:{type:"linear",x:0,y:0,x2:1,y2:0,colorStops:[{offset:0,color:i[a.find(s=>s.id===e.source).category]},{offset:1,color:i[a.find(s=>s.id===e.target).category]}],global:!1}},emphasis:{lineStyle:{width:6,shadowBlur:20,type:"solid"}}})),emphasis:{lineStyle:{width:5},itemStyle:{shadowBlur:20}}}]};r.setOption(o),r.on("mouseover",e=>{e.dataType==="node"&&r.dispatchAction({type:"highlight",seriesIndex:0,dataIndex:e.dataIndex})}),r.on("mouseout",e=>{e.dataType==="node"&&r.dispatchAction({type:"downplay",seriesIndex:0,dataIndex:e.dataIndex})})}function k(){u()}function b(){r&&r.resize()}return E(()=>{u(),window.addEventListener("resize",b)}),L(()=>{window.removeEventListener("resize",b),r&&r.dispose()}),(m,o)=>{const e=R("el-button");return y(),c("div",W,[t("div",$,[o[1]||(o[1]=t("div",{class:"title"},"IQE动态检验系统 - 架构图解",-1)),g(e,{onClick:x,type:"primary",round:"",size:"small"},{default:p(()=>o[0]||(o[0]=[w(" 返回 ")])),_:1,__:[0]})]),o[4]||(o[4]=t("div",{class:"system-title-bar"},[t("div",{class:"main-title"},"图解IQE动态检验系统架构")],-1)),o[5]||(o[5]=t("div",{class:"system-description"},[t("p",null,"本架构图展示IQE动态检验系统各组件之间的关系和数据流向。")],-1)),t("div",N,[g(e,{type:"success",size:"small",onClick:k},{default:p(()=>o[2]||(o[2]=[t("i",{class:"el-icon-refresh"},null,-1),w(" 重置视图 ")])),_:1,__:[2]})]),t("div",{class:"architecture-chart",ref_key:"chartRef",ref:l},null,512),t("div",O,[o[3]||(o[3]=t("div",{class:"legend-title"},"架构图例说明",-1)),t("div",T,[(y(),c(f,null,h(i,(s,n)=>t("div",{class:"legend-item",key:n},[t("div",{class:"legend-color",style:A({background:s})},null,4),t("span",null,v(d[n]),1)])),64))]),t("div",D,[(y(),c(f,null,h(z,(s,n)=>t("div",{class:"flow-step",key:n},v(s.description),1)),64))])])])}}},J=C(j,[["__scopeId","data-v-e36456af"]]);export{J as default};
